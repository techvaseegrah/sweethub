/*! For license information please see main.a1be406d.js.LICENSE.txt */
(()=>{var e={745:()=>{},1052:function(e){e.exports=function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};function r(e,t,n,r){function s(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(Rt){a(Rt)}}function o(e){try{l(r.throw(e))}catch(Rt){a(Rt)}}function l(e){e.done?n(e.value):s(e.value).then(i,o)}l((r=r.apply(e,t||[])).next())})}function s(e,t){var n,r,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){i.label=a[1];break}if(6===a[0]&&i.label<s[1]){i.label=s[1],s=a;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(a);break}s[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(Rt){a=[6,Rt],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function a(e,t,n){if(n||2===arguments.length)for(var r,s=0,a=t.length;s<a;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||t)}for(var i=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,s){return new e(this.left+t,this.top+n,this.width+r,this.height+s)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find(function(e){return 0!==e.width});return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),o=function(e,t){return i.fromClientRect(e,t.getBoundingClientRect())},l=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),s=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new i(0,0,r,s)},c=function(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=e.charCodeAt(n++);56320===(64512&a)?t.push(((1023&s)<<10)+(1023&a)+65536):(t.push(s),n--)}else t.push(s)}return t},d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var i=e[s];i<=65535?r.push(i):(i-=65536,r.push(55296+(i>>10),i%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="undefined"===typeof Uint8Array?[]:new Uint8Array(256),A=0;A<u.length;A++)h[u.charCodeAt(A)]=A;for(var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p="undefined"===typeof Uint8Array?[]:new Uint8Array(256),m=0;m<f.length;m++)p[f.charCodeAt(m)]=m;for(var g=function(e){var t,n,r,s,a,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),d=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<o;t+=4)n=p[e.charCodeAt(t)],r=p[e.charCodeAt(t+1)],s=p[e.charCodeAt(t+2)],a=p[e.charCodeAt(t+3)],d[l++]=n<<2|r>>4,d[l++]=(15&r)<<4|s>>2,d[l++]=(3&s)<<6|63&a;return c},x=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},v=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},b=5,y=11,w=2,N=65536>>b,j=(1<<b)-1,C=N+(1024>>b)+32,B=65536>>y,k=(1<<y-b)-1,S=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},_=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},E=function(e,t){var n=g(e),r=Array.isArray(n)?v(n):new Uint32Array(n),s=Array.isArray(n)?x(n):new Uint16Array(n),a=24,i=S(s,a/2,r[4]/2),o=2===r[5]?S(s,(a+r[4])/2):_(r,Math.ceil((a+r[4])/4));return new F(r[0],r[1],r[2],r[3],i,o)},F=function(){function e(e,t,n,r,s,a){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=a}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>b])<<w)+(e&j),this.data[t];if(e<=65535)return t=((t=this.index[N+(e-55296>>b)])<<w)+(e&j),this.data[t];if(e<this.highStart)return t=C-B+(e>>y),t=this.index[t],t+=e>>b&k,t=((t=this.index[t])<<w)+(e&j),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I="undefined"===typeof Uint8Array?[]:new Uint8Array(256),D=0;D<T.length;D++)I[T.charCodeAt(D)]=D;var L=50,P=1,R=2,U=3,O=4,M=5,Q=7,H=8,z=9,W=10,V=11,K=12,G=13,q=14,X=15,Y=16,J=17,Z=18,$=19,ee=20,te=21,ne=22,re=23,se=24,ae=25,ie=26,oe=27,le=28,ce=29,de=30,ue=31,he=32,Ae=33,fe=34,pe=35,me=36,ge=37,xe=38,ve=39,be=40,ye=41,we=42,Ne=43,je=[9001,65288],Ce="!",Be="\xd7",ke="\xf7",Se=E("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),_e=[de,me],Ee=[P,R,U,M],Fe=[W,H],Te=[oe,ie],Ie=Ee.concat(Fe),De=[xe,ve,be,fe,pe],Le=[X,G],Pe=function(e,t){void 0===t&&(t="strict");var n=[],r=[],s=[];return e.forEach(function(e,a){var i=Se.get(e);if(i>L?(s.push(!0),i-=L):s.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(a),n.push(Y);if(i===O||i===V){if(0===a)return r.push(a),n.push(de);var o=n[a-1];return-1===Ie.indexOf(o)?(r.push(r[a-1]),n.push(o)):(r.push(a),n.push(de))}return r.push(a),i===ue?n.push("strict"===t?te:ge):i===we||i===ce?n.push(de):i===Ne?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(ge):n.push(de):void n.push(i)}),[r,n,s]},Re=function(e,t,n,r){var s=r[n];if(Array.isArray(e)?-1!==e.indexOf(s):e===s)for(var a=n;a<=r.length;){if((l=r[++a])===t)return!0;if(l!==W)break}if(s===W)for(a=n;a>0;){var i=r[--a];if(Array.isArray(e)?-1!==e.indexOf(i):e===i)for(var o=n;o<=r.length;){var l;if((l=r[++o])===t)return!0;if(l!==W)break}if(i!==W)break}return!1},Ue=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r!==W)return r;n--}return 0},Oe=function(e,t,n,r,s){if(0===n[r])return Be;var a=r-1;if(Array.isArray(s)&&!0===s[a])return Be;var i=a-1,o=a+1,l=t[a],c=i>=0?t[i]:0,d=t[o];if(l===R&&d===U)return Be;if(-1!==Ee.indexOf(l))return Ce;if(-1!==Ee.indexOf(d))return Be;if(-1!==Fe.indexOf(d))return Be;if(Ue(a,t)===H)return ke;if(Se.get(e[a])===V)return Be;if((l===he||l===Ae)&&Se.get(e[o])===V)return Be;if(l===Q||d===Q)return Be;if(l===z)return Be;if(-1===[W,G,X].indexOf(l)&&d===z)return Be;if(-1!==[J,Z,$,se,le].indexOf(d))return Be;if(Ue(a,t)===ne)return Be;if(Re(re,ne,a,t))return Be;if(Re([J,Z],te,a,t))return Be;if(Re(K,K,a,t))return Be;if(l===W)return ke;if(l===re||d===re)return Be;if(d===Y||l===Y)return ke;if(-1!==[G,X,te].indexOf(d)||l===q)return Be;if(c===me&&-1!==Le.indexOf(l))return Be;if(l===le&&d===me)return Be;if(d===ee)return Be;if(-1!==_e.indexOf(d)&&l===ae||-1!==_e.indexOf(l)&&d===ae)return Be;if(l===oe&&-1!==[ge,he,Ae].indexOf(d)||-1!==[ge,he,Ae].indexOf(l)&&d===ie)return Be;if(-1!==_e.indexOf(l)&&-1!==Te.indexOf(d)||-1!==Te.indexOf(l)&&-1!==_e.indexOf(d))return Be;if(-1!==[oe,ie].indexOf(l)&&(d===ae||-1!==[ne,X].indexOf(d)&&t[o+1]===ae)||-1!==[ne,X].indexOf(l)&&d===ae||l===ae&&-1!==[ae,le,se].indexOf(d))return Be;if(-1!==[ae,le,se,J,Z].indexOf(d))for(var u=a;u>=0;){if((h=t[u])===ae)return Be;if(-1===[le,se].indexOf(h))break;u--}if(-1!==[oe,ie].indexOf(d))for(u=-1!==[J,Z].indexOf(l)?i:a;u>=0;){var h;if((h=t[u])===ae)return Be;if(-1===[le,se].indexOf(h))break;u--}if(xe===l&&-1!==[xe,ve,fe,pe].indexOf(d)||-1!==[ve,fe].indexOf(l)&&-1!==[ve,be].indexOf(d)||-1!==[be,pe].indexOf(l)&&d===be)return Be;if(-1!==De.indexOf(l)&&-1!==[ee,ie].indexOf(d)||-1!==De.indexOf(d)&&l===oe)return Be;if(-1!==_e.indexOf(l)&&-1!==_e.indexOf(d))return Be;if(l===se&&-1!==_e.indexOf(d))return Be;if(-1!==_e.concat(ae).indexOf(l)&&d===ne&&-1===je.indexOf(e[o])||-1!==_e.concat(ae).indexOf(d)&&l===Z)return Be;if(l===ye&&d===ye){for(var A=n[a],f=1;A>0&&t[--A]===ye;)f++;if(f%2!==0)return Be}return l===he&&d===Ae?Be:ke},Me=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=Pe(e,t.lineBreak),r=n[0],s=n[1],a=n[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(s=s.map(function(e){return-1!==[ae,de,we].indexOf(e)?ge:e}));var i="keep-all"===t.wordBreak?a.map(function(t,n){return t&&e[n]>=19968&&e[n]<=40959}):void 0;return[r,s,i]},Qe=function(){function e(e,t,n,r){this.codePoints=e,this.required=t===Ce,this.start=n,this.end=r}return e.prototype.slice=function(){return d.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),He=function(e,t){var n=c(e),r=Me(n,t),s=r[0],a=r[1],i=r[2],o=n.length,l=0,d=0;return{next:function(){if(d>=o)return{done:!0,value:null};for(var e=Be;d<o&&(e=Oe(n,a,s,++d,i))===Be;);if(e!==Be||d===o){var t=new Qe(n,e,l,d);return l=d,{value:t,done:!1}}return{done:!0,value:null}}}},ze=1,We=2,Ve=4,Ke=8,Ge=10,qe=47,Xe=92,Ye=9,Je=32,Ze=34,$e=61,et=35,tt=36,nt=37,rt=39,st=40,at=41,it=95,ot=45,lt=33,ct=60,dt=62,ut=64,ht=91,At=93,ft=61,pt=123,mt=63,gt=125,xt=124,vt=126,bt=128,yt=65533,wt=42,Nt=43,jt=44,Ct=58,Bt=59,kt=46,St=0,_t=8,Et=11,Ft=14,Tt=31,It=127,Dt=-1,Lt=48,Pt=97,Rt=101,Ut=102,Ot=117,Mt=122,Qt=65,Ht=69,zt=70,Wt=85,Vt=90,Kt=function(e){return e>=Lt&&e<=57},Gt=function(e){return e>=55296&&e<=57343},qt=function(e){return Kt(e)||e>=Qt&&e<=zt||e>=Pt&&e<=Ut},Xt=function(e){return e>=Pt&&e<=Mt},Yt=function(e){return e>=Qt&&e<=Vt},Jt=function(e){return Xt(e)||Yt(e)},Zt=function(e){return e>=bt},$t=function(e){return e===Ge||e===Ye||e===Je},en=function(e){return Jt(e)||Zt(e)||e===it},tn=function(e){return en(e)||Kt(e)||e===ot},nn=function(e){return e>=St&&e<=_t||e===Et||e>=Ft&&e<=Tt||e===It},rn=function(e,t){return e===Xe&&t!==Ge},sn=function(e,t,n){return e===ot?en(t)||rn(t,n):!!en(e)||!(e!==Xe||!rn(e,t))},an=function(e,t,n){return e===Nt||e===ot?!!Kt(t)||t===kt&&Kt(n):Kt(e===kt?t:e)},on=function(e){var t=0,n=1;e[t]!==Nt&&e[t]!==ot||(e[t]===ot&&(n=-1),t++);for(var r=[];Kt(e[t]);)r.push(e[t++]);var s=r.length?parseInt(d.apply(void 0,r),10):0;e[t]===kt&&t++;for(var a=[];Kt(e[t]);)a.push(e[t++]);var i=a.length,o=i?parseInt(d.apply(void 0,a),10):0;e[t]!==Ht&&e[t]!==Rt||t++;var l=1;e[t]!==Nt&&e[t]!==ot||(e[t]===ot&&(l=-1),t++);for(var c=[];Kt(e[t]);)c.push(e[t++]);var u=c.length?parseInt(d.apply(void 0,c),10):0;return n*(s+o*Math.pow(10,-i))*Math.pow(10,l*u)},ln={type:2},cn={type:3},dn={type:4},un={type:13},hn={type:8},An={type:21},fn={type:9},pn={type:10},mn={type:11},gn={type:12},xn={type:14},vn={type:23},bn={type:1},yn={type:25},wn={type:24},Nn={type:26},jn={type:27},Cn={type:28},Bn={type:29},kn={type:31},Sn={type:32},_n=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(c(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Sn;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Ze:return this.consumeStringToken(Ze);case et:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(tn(t)||rn(n,r)){var s=sn(t,n,r)?We:ze;return{type:5,value:this.consumeName(),flags:s}}break;case tt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),un;break;case rt:return this.consumeStringToken(rt);case st:return ln;case at:return cn;case wt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),xn;break;case Nt:if(an(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case jt:return dn;case ot:var a=e,i=this.peekCodePoint(0),o=this.peekCodePoint(1);if(an(a,i,o))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(sn(a,i,o))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(i===ot&&o===dt)return this.consumeCodePoint(),this.consumeCodePoint(),wn;break;case kt:if(an(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case qe:if(this.peekCodePoint(0)===wt)for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(l===wt&&(l=this.consumeCodePoint())===qe)return this.consumeToken();if(l===Dt)return this.consumeToken()}break;case Ct:return Nn;case Bt:return jn;case ct:if(this.peekCodePoint(0)===lt&&this.peekCodePoint(1)===ot&&this.peekCodePoint(2)===ot)return this.consumeCodePoint(),this.consumeCodePoint(),yn;break;case ut:var c=this.peekCodePoint(0),u=this.peekCodePoint(1),h=this.peekCodePoint(2);if(sn(c,u,h))return{type:7,value:this.consumeName()};break;case ht:return Cn;case Xe:if(rn(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case At:return Bn;case ft:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),hn;break;case pt:return mn;case gt:return gn;case Ot:case Wt:var A=this.peekCodePoint(0),f=this.peekCodePoint(1);return A!==Nt||!qt(f)&&f!==mt||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case xt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),fn;if(this.peekCodePoint(0)===xt)return this.consumeCodePoint(),An;break;case vt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),pn;break;case Dt:return Sn}return $t(e)?(this.consumeWhiteSpace(),kn):Kt(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):en(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:d(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return"undefined"===typeof e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();qt(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===mt&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(d.apply(void 0,e.map(function(e){return e===mt?Lt:e})),16),end:parseInt(d.apply(void 0,e.map(function(e){return e===mt?zt:e})),16)};var r=parseInt(d.apply(void 0,e),16);if(this.peekCodePoint(0)===ot&&qt(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var s=[];qt(t)&&s.length<6;)s.push(t),t=this.consumeCodePoint();return{type:30,start:r,end:parseInt(d.apply(void 0,s),16)}}return{type:30,start:r,end:r}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&this.peekCodePoint(0)===st?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===st?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Dt)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===rt||t===Ze){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Dt||this.peekCodePoint(0)===at)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),vn)}for(;;){var r=this.consumeCodePoint();if(r===Dt||r===at)return{type:22,value:d.apply(void 0,e)};if($t(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Dt||this.peekCodePoint(0)===at?(this.consumeCodePoint(),{type:22,value:d.apply(void 0,e)}):(this.consumeBadUrlRemnants(),vn);if(r===Ze||r===rt||r===st||nn(r))return this.consumeBadUrlRemnants(),vn;if(r===Xe){if(!rn(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),vn;e.push(this.consumeEscapedCodePoint())}else e.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;$t(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===at||e===Dt)return;rn(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var r=Math.min(t,e);n+=d.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),n},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var r=this._value[n];if(r===Dt||void 0===r||r===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(r===Ge)return this._value.splice(0,n),bn;if(r===Xe){var s=this._value[n+1];s!==Dt&&void 0!==s&&(s===Ge?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):rn(r,s)&&(t+=this.consumeStringSlice(n),t+=d(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=Ve,n=this.peekCodePoint(0);for(n!==Nt&&n!==ot||e.push(this.consumeCodePoint());Kt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===kt&&Kt(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Ke;Kt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Ht||n===Rt)&&((r===Nt||r===ot)&&Kt(s)||Kt(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Ke;Kt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[on(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),s=this.peekCodePoint(1),a=this.peekCodePoint(2);return sn(r,s,a)?{type:15,number:t,flags:n,unit:this.consumeName()}:r===nt?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(qt(e)){for(var t=d(e);qt(this.peekCodePoint(0))&&t.length<6;)t+=d(this.consumeCodePoint());$t(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||Gt(n)||n>1114111?yt:n}return e===Dt?yt:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(tn(t))e+=d(t);else{if(!rn(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=d(this.consumeEscapedCodePoint())}}},e}(),En=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new _n;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||On(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return"undefined"===typeof e?Sn:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),Fn=function(e){return 15===e.type},Tn=function(e){return 17===e.type},In=function(e){return 20===e.type},Dn=function(e){return 0===e.type},Ln=function(e,t){return In(e)&&e.value===t},Pn=function(e){return 31!==e.type},Rn=function(e){return 31!==e.type&&4!==e.type},Un=function(e){var t=[],n=[];return e.forEach(function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)}),n.length&&t.push(n),t},On=function(e,t){return 11===t&&12===e.type||28===t&&29===e.type||2===t&&3===e.type},Mn=function(e){return 17===e.type||15===e.type},Qn=function(e){return 16===e.type||Mn(e)},Hn=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},zn={type:17,number:0,flags:Ve},Wn={type:16,number:50,flags:Ve},Vn={type:16,number:100,flags:Ve},Kn=function(e,t,n){var r=e[0],s=e[1];return[Gn(r,t),Gn("undefined"!==typeof s?s:r,n)]},Gn=function(e,t){if(16===e.type)return e.number/100*t;if(Fn(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},qn="deg",Xn="grad",Yn="rad",Jn="turn",Zn={name:"angle",parse:function(e,t){if(15===t.type)switch(t.unit){case qn:return Math.PI*t.number/180;case Xn:return Math.PI/200*t.number;case Yn:return t.number;case Jn:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")}},$n=function(e){return 15===e.type&&(e.unit===qn||e.unit===Xn||e.unit===Yn||e.unit===Jn)},er=function(e){switch(e.filter(In).map(function(e){return e.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[zn,zn];case"to top":case"bottom":return tr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[zn,Vn];case"to right":case"left":return tr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Vn,Vn];case"to bottom":case"top":return tr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Vn,zn];case"to left":case"right":return tr(270)}return 0},tr=function(e){return Math.PI*e/180},nr={name:"color",parse:function(e,t){if(18===t.type){var n=dr[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var r=t.value.substring(0,1),s=t.value.substring(1,2),a=t.value.substring(2,3);return ar(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),1)}if(4===t.value.length){r=t.value.substring(0,1),s=t.value.substring(1,2),a=t.value.substring(2,3);var i=t.value.substring(3,4);return ar(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16)/255)}if(6===t.value.length)return r=t.value.substring(0,2),s=t.value.substring(2,4),a=t.value.substring(4,6),ar(parseInt(r,16),parseInt(s,16),parseInt(a,16),1);if(8===t.value.length)return r=t.value.substring(0,2),s=t.value.substring(2,4),a=t.value.substring(4,6),i=t.value.substring(6,8),ar(parseInt(r,16),parseInt(s,16),parseInt(a,16),parseInt(i,16)/255)}if(20===t.type){var o=hr[t.value.toUpperCase()];if("undefined"!==typeof o)return o}return hr.TRANSPARENT}},rr=function(e){return 0===(255&e)},sr=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,s=255&e>>24;return t<255?"rgba("+s+","+r+","+n+","+t/255+")":"rgb("+s+","+r+","+n+")"},ar=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r))>>>0},ir=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},or=function(e,t){var n=t.filter(Rn);if(3===n.length){var r=n.map(ir),s=r[0],a=r[1],i=r[2];return ar(s,a,i,1)}if(4===n.length){var o=n.map(ir),l=(s=o[0],a=o[1],i=o[2],o[3]);return ar(s,a,i,l)}return 0};function lr(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var cr=function(e,t){var n=t.filter(Rn),r=n[0],s=n[1],a=n[2],i=n[3],o=(17===r.type?tr(r.number):Zn.parse(e,r))/(2*Math.PI),l=Qn(s)?s.number/100:0,c=Qn(a)?a.number/100:0,d="undefined"!==typeof i&&Qn(i)?Gn(i,1):1;if(0===l)return ar(255*c,255*c,255*c,1);var u=c<=.5?c*(l+1):c+l-c*l,h=2*c-u,A=lr(h,u,o+1/3),f=lr(h,u,o),p=lr(h,u,o-1/3);return ar(255*A,255*f,255*p,d)},dr={hsl:cr,hsla:cr,rgb:or,rgba:or},ur=function(e,t){return nr.parse(e,En.create(t).parseComponentValue())},hr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Ar={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(In(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},fr={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},pr=function(e,t){var n=nr.parse(e,t[0]),r=t[1];return r&&Qn(r)?{color:n,stop:r}:{color:n,stop:null}},mr=function(e,t){var n=e[0],r=e[e.length-1];null===n.stop&&(n.stop=zn),null===r.stop&&(r.stop=Vn);for(var s=[],a=0,i=0;i<e.length;i++){var o=e[i].stop;if(null!==o){var l=Gn(o,t);l>a?s.push(l):s.push(a),a=l}else s.push(null)}var c=null;for(i=0;i<s.length;i++){var d=s[i];if(null===d)null===c&&(c=i);else if(null!==c){for(var u=i-c,h=(d-s[c-1])/(u+1),A=1;A<=u;A++)s[c+A-1]=h*A;c=null}}return e.map(function(e,n){return{color:e.color,stop:Math.max(Math.min(1,s[n]/t),0)}})},gr=function(e,t,n){var r=t/2,s=n/2,a=Gn(e[0],t)-r,i=s-Gn(e[1],n);return(Math.atan2(i,a)+2*Math.PI)%(2*Math.PI)},xr=function(e,t,n){var r="number"===typeof e?e:gr(e,t,n),s=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),a=t/2,i=n/2,o=s/2,l=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[s,a-c,a+c,i-l,i+l]},vr=function(e,t){return Math.sqrt(e*e+t*t)},br=function(e,t,n,r,s){return[[0,0],[0,t],[e,0],[e,t]].reduce(function(e,t){var a=t[0],i=t[1],o=vr(n-a,r-i);return(s?o<e.optimumDistance:o>e.optimumDistance)?{optimumCorner:t,optimumDistance:o}:e},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},yr=function(e,t,n,r,s){var a=0,i=0;switch(e.size){case 0:0===e.shape?a=i=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-s)):1===e.shape&&(a=Math.min(Math.abs(t),Math.abs(t-r)),i=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(0===e.shape)a=i=Math.min(vr(t,n),vr(t,n-s),vr(t-r,n),vr(t-r,n-s));else if(1===e.shape){var o=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(t),Math.abs(t-r)),l=br(r,s,t,n,!0),c=l[0],d=l[1];i=o*(a=vr(c-t,(d-n)/o))}break;case 1:0===e.shape?a=i=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-s)):1===e.shape&&(a=Math.max(Math.abs(t),Math.abs(t-r)),i=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(0===e.shape)a=i=Math.max(vr(t,n),vr(t,n-s),vr(t-r,n),vr(t-r,n-s));else if(1===e.shape){o=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(t),Math.abs(t-r));var u=br(r,s,t,n,!1);c=u[0],d=u[1],i=o*(a=vr(c-t,(d-n)/o))}}return Array.isArray(e.size)&&(a=Gn(e.size[0],r),i=2===e.size.length?Gn(e.size[1],s):a),[a,i]},wr=function(e,t){var n=tr(180),r=[];return Un(t).forEach(function(t,s){if(0===s){var a=t[0];if(20===a.type&&-1!==["top","left","right","bottom"].indexOf(a.value))return void(n=er(t));if($n(a))return void(n=(Zn.parse(e,a)+tr(270))%tr(360))}var i=pr(e,t);r.push(i)}),{angle:n,stops:r,type:1}},Nr="closest-side",jr="farthest-side",Cr="closest-corner",Br="farthest-corner",kr="circle",Sr="ellipse",_r="cover",Er="contain",Fr=function(e,t){var n=0,r=3,s=[],a=[];return Un(t).forEach(function(t,i){var o=!0;if(0===i?o=t.reduce(function(e,t){if(In(t))switch(t.value){case"center":return a.push(Wn),!1;case"top":case"left":return a.push(zn),!1;case"right":case"bottom":return a.push(Vn),!1}else if(Qn(t)||Mn(t))return a.push(t),!1;return e},o):1===i&&(o=t.reduce(function(e,t){if(In(t))switch(t.value){case kr:return n=0,!1;case Sr:return n=1,!1;case Er:case Nr:return r=0,!1;case jr:return r=1,!1;case Cr:return r=2,!1;case _r:case Br:return r=3,!1}else if(Mn(t)||Qn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},o)),o){var l=pr(e,t);s.push(l)}}),{size:r,shape:n,stops:s,position:a,type:2}},Tr=function(e){return 1===e.type},Ir=function(e){return 2===e.type},Dr={name:"image",parse:function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var r=Rr[t.name];if("undefined"===typeof r)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Lr(e){return!(20===e.type&&"none"===e.value)&&(18!==e.type||!!Rr[e.name])}var Pr,Rr={"linear-gradient":function(e,t){var n=tr(180),r=[];return Un(t).forEach(function(t,s){if(0===s){var a=t[0];if(20===a.type&&"to"===a.value)return void(n=er(t));if($n(a))return void(n=Zn.parse(e,a))}var i=pr(e,t);r.push(i)}),{angle:n,stops:r,type:1}},"-moz-linear-gradient":wr,"-ms-linear-gradient":wr,"-o-linear-gradient":wr,"-webkit-linear-gradient":wr,"radial-gradient":function(e,t){var n=0,r=3,s=[],a=[];return Un(t).forEach(function(t,i){var o=!0;if(0===i){var l=!1;o=t.reduce(function(e,t){if(l)if(In(t))switch(t.value){case"center":return a.push(Wn),e;case"top":case"left":return a.push(zn),e;case"right":case"bottom":return a.push(Vn),e}else(Qn(t)||Mn(t))&&a.push(t);else if(In(t))switch(t.value){case kr:return n=0,!1;case Sr:return n=1,!1;case"at":return l=!0,!1;case Nr:return r=0,!1;case _r:case jr:return r=1,!1;case Er:case Cr:return r=2,!1;case Br:return r=3,!1}else if(Mn(t)||Qn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},o)}if(o){var c=pr(e,t);s.push(c)}}),{size:r,shape:n,stops:s,position:a,type:2}},"-moz-radial-gradient":Fr,"-ms-radial-gradient":Fr,"-o-radial-gradient":Fr,"-webkit-radial-gradient":Fr,"-webkit-gradient":function(e,t){var n=tr(180),r=[],s=1,a=0,i=3,o=[];return Un(t).forEach(function(t,n){var a=t[0];if(0===n){if(In(a)&&"linear"===a.value)return void(s=1);if(In(a)&&"radial"===a.value)return void(s=2)}if(18===a.type)if("from"===a.name){var i=nr.parse(e,a.values[0]);r.push({stop:zn,color:i})}else if("to"===a.name)i=nr.parse(e,a.values[0]),r.push({stop:Vn,color:i});else if("color-stop"===a.name){var o=a.values.filter(Rn);if(2===o.length){i=nr.parse(e,o[1]);var l=o[0];Tn(l)&&r.push({stop:{type:16,number:100*l.number,flags:l.flags},color:i})}}}),1===s?{angle:(n+tr(180))%tr(360),stops:r,type:s}:{size:i,shape:a,stops:r,position:o,type:s}}},Ur={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter(function(e){return Rn(e)&&Lr(e)}).map(function(t){return Dr.parse(e,t)})}},Or={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(In(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Mr={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Un(t).map(function(e){return e.filter(Qn)}).map(Hn)}},Qr={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Un(t).map(function(e){return e.filter(In).map(function(e){return e.value}).join(" ")}).map(Hr)}},Hr=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Pr||(Pr={}));var zr,Wr={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Un(t).map(function(e){return e.filter(Vr)})}},Vr=function(e){return In(e)||Qn(e)},Kr=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Gr=Kr("top"),qr=Kr("right"),Xr=Kr("bottom"),Yr=Kr("left"),Jr=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return Hn(t.filter(Qn))}}},Zr=Jr("top-left"),$r=Jr("top-right"),es=Jr("bottom-right"),ts=Jr("bottom-left"),ns=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},rs=ns("top"),ss=ns("right"),as=ns("bottom"),is=ns("left"),os=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Fn(t)?t.number:0}}},ls=os("top"),cs=os("right"),ds=os("bottom"),us=os("left"),hs={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},As={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},fs={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(In).reduce(function(e,t){return e|ps(t.value)},0)}},ps=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ms={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},gs={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(zr||(zr={}));var xs,vs={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?zr.STRICT:zr.NORMAL}},bs={name:"line-height",initialValue:"normal",prefix:!1,type:4},ys=function(e,t){return In(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:Qn(e)?Gn(e,t):t},ws={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Dr.parse(e,t)}},Ns={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},js={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Cs=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Bs=Cs("top"),ks=Cs("right"),Ss=Cs("bottom"),_s=Cs("left"),Es={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(In).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},Fs={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},Ts=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Is=Ts("top"),Ds=Ts("right"),Ls=Ts("bottom"),Ps=Ts("left"),Rs={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Us={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Os={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Ln(t[0],"none")?[]:Un(t).map(function(t){for(var n={color:hr.TRANSPARENT,offsetX:zn,offsetY:zn,blur:zn},r=0,s=0;s<t.length;s++){var a=t[s];Mn(a)?(0===r?n.offsetX=a:1===r?n.offsetY=a:n.blur=a,r++):n.color=nr.parse(e,a)}return n})}},Ms={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Qs={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=Hs[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},Hs={matrix:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number});return 6===t.length?t:null},matrix3d:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number}),n=t[0],r=t[1];t[2],t[3];var s=t[4],a=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],16===t.length?[n,r,s,a,i,o]:null}},zs={type:16,number:50,flags:Ve},Ws=[zs,zs],Vs={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(Qn);return 2!==n.length?Ws:[n[0],n[1]]}},Ks={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(xs||(xs={}));for(var Gs={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return xs.BREAK_ALL;case"keep-all":return xs.KEEP_ALL;default:return xs.NORMAL}}},qs={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(Tn(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Xs={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Ys={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Tn(t)?t.number:1}},Js={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Zs={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(In).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return 0!==e})}},$s={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach(function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}}),n.length&&r.push(n.join(" ")),r.map(function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"})}},ea={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ta={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return Tn(t)?t.number:In(t)&&"bold"===t.value?700:400}},na={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(In).map(function(e){return e.value})}},ra={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},sa=function(e,t){return 0!==(e&t)},aa={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},ia={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],s=t.filter(Pn),a=0;a<s.length;a++){var i=s[a],o=s[a+1];if(20===i.type){var l=o&&Tn(o)?o.number:1;r.push({counter:i.value,increment:l})}}return r}},oa={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],r=t.filter(Pn),s=0;s<r.length;s++){var a=r[s],i=r[s+1];if(In(a)&&"none"!==a.value){var o=i&&Tn(i)?i.number:0;n.push({counter:a.value,reset:o})}}return n}},la={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Fn).map(function(t){return Xs.parse(e,t)})}},ca={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var r=[],s=t.filter(Dn);if(s.length%2!==0)return null;for(var a=0;a<s.length;a+=2){var i=s[a].value,o=s[a+1].value;r.push({open:i,close:o})}return r}},da=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},ua={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Ln(t[0],"none")?[]:Un(t).map(function(t){for(var n={color:255,offsetX:zn,offsetY:zn,blur:zn,spread:zn,inset:!1},r=0,s=0;s<t.length;s++){var a=t[s];Ln(a,"inset")?n.inset=!0:Mn(a)?(0===r?n.offsetX=a:1===r?n.offsetY=a:2===r?n.blur=a:n.spread=a,r++):n.color=nr.parse(e,a)}return n})}},ha={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(In).forEach(function(e){switch(e.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2)}}),n.forEach(function(e){-1===r.indexOf(e)&&r.push(e)}),r}},Aa={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},fa={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Fn(t)?t.number:0}},pa=function(){function e(e,t){var n,r;this.animationDuration=xa(e,la,t.animationDuration),this.backgroundClip=xa(e,Ar,t.backgroundClip),this.backgroundColor=xa(e,fr,t.backgroundColor),this.backgroundImage=xa(e,Ur,t.backgroundImage),this.backgroundOrigin=xa(e,Or,t.backgroundOrigin),this.backgroundPosition=xa(e,Mr,t.backgroundPosition),this.backgroundRepeat=xa(e,Qr,t.backgroundRepeat),this.backgroundSize=xa(e,Wr,t.backgroundSize),this.borderTopColor=xa(e,Gr,t.borderTopColor),this.borderRightColor=xa(e,qr,t.borderRightColor),this.borderBottomColor=xa(e,Xr,t.borderBottomColor),this.borderLeftColor=xa(e,Yr,t.borderLeftColor),this.borderTopLeftRadius=xa(e,Zr,t.borderTopLeftRadius),this.borderTopRightRadius=xa(e,$r,t.borderTopRightRadius),this.borderBottomRightRadius=xa(e,es,t.borderBottomRightRadius),this.borderBottomLeftRadius=xa(e,ts,t.borderBottomLeftRadius),this.borderTopStyle=xa(e,rs,t.borderTopStyle),this.borderRightStyle=xa(e,ss,t.borderRightStyle),this.borderBottomStyle=xa(e,as,t.borderBottomStyle),this.borderLeftStyle=xa(e,is,t.borderLeftStyle),this.borderTopWidth=xa(e,ls,t.borderTopWidth),this.borderRightWidth=xa(e,cs,t.borderRightWidth),this.borderBottomWidth=xa(e,ds,t.borderBottomWidth),this.borderLeftWidth=xa(e,us,t.borderLeftWidth),this.boxShadow=xa(e,ua,t.boxShadow),this.color=xa(e,hs,t.color),this.direction=xa(e,As,t.direction),this.display=xa(e,fs,t.display),this.float=xa(e,ms,t.cssFloat),this.fontFamily=xa(e,$s,t.fontFamily),this.fontSize=xa(e,ea,t.fontSize),this.fontStyle=xa(e,ra,t.fontStyle),this.fontVariant=xa(e,na,t.fontVariant),this.fontWeight=xa(e,ta,t.fontWeight),this.letterSpacing=xa(e,gs,t.letterSpacing),this.lineBreak=xa(e,vs,t.lineBreak),this.lineHeight=xa(e,bs,t.lineHeight),this.listStyleImage=xa(e,ws,t.listStyleImage),this.listStylePosition=xa(e,Ns,t.listStylePosition),this.listStyleType=xa(e,js,t.listStyleType),this.marginTop=xa(e,Bs,t.marginTop),this.marginRight=xa(e,ks,t.marginRight),this.marginBottom=xa(e,Ss,t.marginBottom),this.marginLeft=xa(e,_s,t.marginLeft),this.opacity=xa(e,Ys,t.opacity);var s=xa(e,Es,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=xa(e,Fs,t.overflowWrap),this.paddingTop=xa(e,Is,t.paddingTop),this.paddingRight=xa(e,Ds,t.paddingRight),this.paddingBottom=xa(e,Ls,t.paddingBottom),this.paddingLeft=xa(e,Ps,t.paddingLeft),this.paintOrder=xa(e,ha,t.paintOrder),this.position=xa(e,Us,t.position),this.textAlign=xa(e,Rs,t.textAlign),this.textDecorationColor=xa(e,Js,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=xa(e,Zs,null!==(r=t.textDecorationLine)&&void 0!==r?r:t.textDecoration),this.textShadow=xa(e,Os,t.textShadow),this.textTransform=xa(e,Ms,t.textTransform),this.transform=xa(e,Qs,t.transform),this.transformOrigin=xa(e,Vs,t.transformOrigin),this.visibility=xa(e,Ks,t.visibility),this.webkitTextStrokeColor=xa(e,Aa,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=xa(e,fa,t.webkitTextStrokeWidth),this.wordBreak=xa(e,Gs,t.wordBreak),this.zIndex=xa(e,qs,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return rr(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return sa(this.display,4)||sa(this.display,33554432)||sa(this.display,268435456)||sa(this.display,536870912)||sa(this.display,67108864)||sa(this.display,134217728)},e}(),ma=function(){function e(e,t){this.content=xa(e,aa,t.content),this.quotes=xa(e,ca,t.quotes)}return e}(),ga=function(){function e(e,t){this.counterIncrement=xa(e,ia,t.counterIncrement),this.counterReset=xa(e,oa,t.counterReset)}return e}(),xa=function(e,t,n){var r=new _n,s=null!==n&&"undefined"!==typeof n?n.toString():t.initialValue;r.write(s);var a=new En(r.read());switch(t.type){case 2:var i=a.parseComponentValue();return t.parse(e,In(i)?i.value:t.initialValue);case 0:return t.parse(e,a.parseComponentValue());case 1:return t.parse(e,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(t.format){case"angle":return Zn.parse(e,a.parseComponentValue());case"color":return nr.parse(e,a.parseComponentValue());case"image":return Dr.parse(e,a.parseComponentValue());case"length":var o=a.parseComponentValue();return Mn(o)?o:zn;case"length-percentage":var l=a.parseComponentValue();return Qn(l)?l:zn;case"time":return Xs.parse(e,a.parseComponentValue())}}},va="data-html2canvas-debug",ba=function(e){switch(e.getAttribute(va)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ya=function(e,t){var n=ba(e);return 1===n||t===n},wa=function(){function e(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,ya(t,3),this.styles=new pa(e,window.getComputedStyle(t,null)),co(t)&&(this.styles.animationDuration.some(function(e){return e>0})&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=o(this.context,t),ya(t,4)&&(this.flags|=16)}return e}(),Na="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ja="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ca="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Ba=0;Ba<ja.length;Ba++)Ca[ja.charCodeAt(Ba)]=Ba;for(var ka=function(e){var t,n,r,s,a,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),d=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<o;t+=4)n=Ca[e.charCodeAt(t)],r=Ca[e.charCodeAt(t+1)],s=Ca[e.charCodeAt(t+2)],a=Ca[e.charCodeAt(t+3)],d[l++]=n<<2|r>>4,d[l++]=(15&r)<<4|s>>2,d[l++]=(3&s)<<6|63&a;return c},Sa=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},_a=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},Ea=5,Fa=11,Ta=2,Ia=65536>>Ea,Da=(1<<Ea)-1,La=Ia+(1024>>Ea)+32,Pa=65536>>Fa,Ra=(1<<Fa-Ea)-1,Ua=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Oa=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Ma=function(e,t){var n=ka(e),r=Array.isArray(n)?_a(n):new Uint32Array(n),s=Array.isArray(n)?Sa(n):new Uint16Array(n),a=24,i=Ua(s,a/2,r[4]/2),o=2===r[5]?Ua(s,(a+r[4])/2):Oa(r,Math.ceil((a+r[4])/4));return new Qa(r[0],r[1],r[2],r[3],i,o)},Qa=function(){function e(e,t,n,r,s,a){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=a}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>Ea])<<Ta)+(e&Da),this.data[t];if(e<=65535)return t=((t=this.index[Ia+(e-55296>>Ea)])<<Ta)+(e&Da),this.data[t];if(e<this.highStart)return t=La-Pa+(e>>Fa),t=this.index[t],t+=e>>Ea&Ra,t=((t=this.index[t])<<Ta)+(e&Da),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Ha="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",za="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Wa=0;Wa<Ha.length;Wa++)za[Ha.charCodeAt(Wa)]=Wa;var Va,Ka=1,Ga=2,qa=3,Xa=4,Ya=5,Ja=7,Za=8,$a=9,ei=10,ti=11,ni=12,ri=13,si=14,ai=15,ii=function(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=e.charCodeAt(n++);56320===(64512&a)?t.push(((1023&s)<<10)+(1023&a)+65536):(t.push(s),n--)}else t.push(s)}return t},oi=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var i=e[s];i<=65535?r.push(i):(i-=65536,r.push(55296+(i>>10),i%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},li=Ma(Na),ci="\xd7",di="\xf7",ui=function(e){return li.get(e)},hi=function(e,t,n){var r=n-2,s=t[r],a=t[n-1],i=t[n];if(a===Ga&&i===qa)return ci;if(a===Ga||a===qa||a===Xa)return di;if(i===Ga||i===qa||i===Xa)return di;if(a===Za&&-1!==[Za,$a,ti,ni].indexOf(i))return ci;if((a===ti||a===$a)&&(i===$a||i===ei))return ci;if((a===ni||a===ei)&&i===ei)return ci;if(i===ri||i===Ya)return ci;if(i===Ja)return ci;if(a===Ka)return ci;if(a===ri&&i===si){for(;s===Ya;)s=t[--r];if(s===si)return ci}if(a===ai&&i===ai){for(var o=0;s===ai;)o++,s=t[--r];if(o%2===0)return ci}return di},Ai=function(e){var t=ii(e),n=t.length,r=0,s=0,a=t.map(ui);return{next:function(){if(r>=n)return{done:!0,value:null};for(var e=ci;r<n&&(e=hi(t,a,++r))===ci;);if(e!==ci||r===n){var i=oi.apply(null,t.slice(s,r));return s=r,{value:i,done:!1}}return{done:!0,value:null}}}},fi=function(e){for(var t,n=Ai(e),r=[];!(t=n.next()).done;)t.value&&r.push(t.value.slice());return r},pi=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),a=Math.round(s.height);if(e.body.removeChild(r),a===t)return!0}}return!1},mi=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"===typeof"".repeat?"&#128104;".repeat(10):"";var r=t.firstChild,s=c(r.data).map(function(e){return d(e)}),a=0,i={},o=s.every(function(e,t){n.setStart(r,a),n.setEnd(r,a+e.length);var s=n.getBoundingClientRect();a+=e.length;var o=s.x>i.x||s.y>i.y;return i=s,0===t||o});return e.body.removeChild(t),o},gi=function(){return"undefined"!==typeof(new Image).crossOrigin},xi=function(){return"string"===typeof(new XMLHttpRequest).responseType},vi=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(Rt){return!1}return!0},bi=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},yi=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,a=t.toDataURL();s.src=a;var i=wi(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),Ni(i).then(function(t){r.drawImage(t,0,0);var s=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var i=e.createElement("div");return i.style.backgroundImage="url("+a+")",i.style.height=n+"px",bi(s)?Ni(wi(n,n,0,0,i)):Promise.reject(!1)}).then(function(e){return r.drawImage(e,0,0),bi(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},wi=function(e,t,n,r,s){var a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},Ni=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},ji={get SUPPORT_RANGE_BOUNDS(){var e=pi(document);return Object.defineProperty(ji,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=ji.SUPPORT_RANGE_BOUNDS&&mi(document);return Object.defineProperty(ji,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=vi(document);return Object.defineProperty(ji,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"===typeof Array.from&&"function"===typeof window.fetch?yi(document):Promise.resolve(!1);return Object.defineProperty(ji,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=gi();return Object.defineProperty(ji,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=xi();return Object.defineProperty(ji,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ji,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"===typeof Intl||!Intl.Segmenter);return Object.defineProperty(ji,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Ci=function(){function e(e,t){this.text=e,this.bounds=t}return e}(),Bi=function(e,t,n,r){var s=Fi(t,n),a=[],o=0;return s.forEach(function(t){if(n.textDecorationLine.length||t.trim().length>0)if(ji.SUPPORT_RANGE_BOUNDS){var s=Si(r,o,t.length).getClientRects();if(s.length>1){var l=_i(t),c=0;l.forEach(function(t){a.push(new Ci(t,i.fromDOMRectList(e,Si(r,c+o,t.length).getClientRects()))),c+=t.length})}else a.push(new Ci(t,i.fromDOMRectList(e,s)))}else{var d=r.splitText(t.length);a.push(new Ci(t,ki(e,r))),r=d}else ji.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));o+=t.length}),a},ki=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var s=t.parentNode;if(s){s.replaceChild(r,t);var a=o(e,r);return r.firstChild&&s.replaceChild(r.firstChild,r),a}}return i.EMPTY},Si=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(e,t),s.setEnd(e,t+n),s},_i=function(e){if(ji.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(e){return e.segment})}return fi(e)},Ei=function(e,t){if(ji.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(e){return e.segment})}return Ii(e,t)},Fi=function(e,t){return 0!==t.letterSpacing?_i(e):Ei(e,t)},Ti=[32,160,4961,65792,65793,4153,4241],Ii=function(e,t){for(var n,r=He(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),s=[],a=function(){if(n.value){var e=n.value.slice(),t=c(e),r="";t.forEach(function(e){-1===Ti.indexOf(e)?r+=d(e):(r.length&&s.push(r),s.push(d(e)),r="")}),r.length&&s.push(r)}};!(n=r.next()).done;)a();return s},Di=function(){function e(e,t,n){this.text=Li(t.data,n.textTransform),this.textBounds=Bi(e,this.text,n,t)}return e}(),Li=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Pi,Ri);case 2:return e.toUpperCase();default:return e}},Pi=/(^|\s|:|-|\(|\))([a-z])/g,Ri=function(e,t,n){return e.length>0?t+n.toUpperCase():e},Ui=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return t(n,e),n}(wa),Oi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return t(n,e),n}(wa),Mi=function(e){function n(t,n){var r=e.call(this,t,n)||this,s=new XMLSerializer,a=o(t,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t(n,e),n}(wa),Qi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(wa),Hi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed="boolean"===typeof n.reversed&&!0===n.reversed,r}return t(n,e),n}(wa),zi=[{type:15,flags:0,unit:"px",number:3}],Wi=[{type:16,flags:0,number:50}],Vi=function(e){return e.width>e.height?new i(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new i(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Ki=function(e){var t=e.type===Xi?new Array(e.value.length+1).join("\u2022"):e.value;return 0===t.length?e.placeholder||"":t},Gi="checkbox",qi="radio",Xi="password",Yi=707406591,Ji=function(e){function n(t,n){var r=e.call(this,t,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=Ki(n),r.type!==Gi&&r.type!==qi||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=Vi(r.bounds)),r.type){case Gi:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=zi;break;case qi:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Wi}return r}return t(n,e),n}(wa),Zi=function(e){function n(t,n){var r=e.call(this,t,n)||this,s=n.options[n.selectedIndex||0];return r.value=s&&s.text||"",r}return t(n,e),n}(wa),$i=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(wa),eo=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=so(t,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?ur(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):hr.TRANSPARENT,a=n.contentWindow.document.body?ur(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):hr.TRANSPARENT;r.backgroundColor=rr(s)?rr(a)?r.styles.backgroundColor:a:s}}catch(Rt){}return r}return t(n,e),n}(wa),to=["OL","UL","MENU"],no=function(e,t,n,r){for(var s=t.firstChild,a=void 0;s;s=a)if(a=s.nextSibling,oo(s)&&s.data.trim().length>0)n.textNodes.push(new Di(e,s,n.styles));else if(lo(s))if(Bo(s)&&s.assignedNodes)s.assignedNodes().forEach(function(t){return no(e,t,n,r)});else{var i=ro(e,s);i.styles.isVisible()&&(ao(s,i,r)?i.flags|=4:io(i.styles)&&(i.flags|=2),-1!==to.indexOf(s.tagName)&&(i.flags|=8),n.elements.push(i),s.slot,s.shadowRoot?no(e,s.shadowRoot,i,r):jo(s)||mo(s)||Co(s)||no(e,s,i,r))}},ro=function(e,t){return bo(t)?new Ui(e,t):xo(t)?new Oi(e,t):mo(t)?new Mi(e,t):ho(t)?new Qi(e,t):Ao(t)?new Hi(e,t):fo(t)?new Ji(e,t):Co(t)?new Zi(e,t):jo(t)?new $i(e,t):yo(t)?new eo(e,t):new wa(e,t)},so=function(e,t){var n=ro(e,t);return n.flags|=4,no(e,t,n,n),n},ao=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||go(e)&&n.styles.isTransparent()},io=function(e){return e.isPositioned()||e.isFloating()},oo=function(e){return e.nodeType===Node.TEXT_NODE},lo=function(e){return e.nodeType===Node.ELEMENT_NODE},co=function(e){return lo(e)&&"undefined"!==typeof e.style&&!uo(e)},uo=function(e){return"object"===typeof e.className},ho=function(e){return"LI"===e.tagName},Ao=function(e){return"OL"===e.tagName},fo=function(e){return"INPUT"===e.tagName},po=function(e){return"HTML"===e.tagName},mo=function(e){return"svg"===e.tagName},go=function(e){return"BODY"===e.tagName},xo=function(e){return"CANVAS"===e.tagName},vo=function(e){return"VIDEO"===e.tagName},bo=function(e){return"IMG"===e.tagName},yo=function(e){return"IFRAME"===e.tagName},wo=function(e){return"STYLE"===e.tagName},No=function(e){return"SCRIPT"===e.tagName},jo=function(e){return"TEXTAREA"===e.tagName},Co=function(e){return"SELECT"===e.tagName},Bo=function(e){return"SLOT"===e.tagName},ko=function(e){return e.tagName.indexOf("-")>0},So=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach(function(e){return t.counters[e].pop()})},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,s=!0;null!==n&&n.forEach(function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(s=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)});var a=[];return s&&r.forEach(function(e){var n=t.counters[e.counter];a.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)}),a},e}(),_o={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Eo={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},Fo={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},To={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},Io=function(e,t,n,r,s,a){return e<t||e>n?Ko(e,s,a.length>0):r.integers.reduce(function(t,n,s){for(;e>=n;)e-=n,t+=r.values[s];return t},"")+a},Do=function(e,t,n,r){var s="";do{n||e--,s=r(e)+s,e/=t}while(e*t>=t);return s},Lo=function(e,t,n,r,s){var a=n-t+1;return(e<0?"-":"")+(Do(Math.abs(e),a,r,function(e){return d(Math.floor(e%a)+t)})+s)},Po=function(e,t,n){void 0===n&&(n=". ");var r=t.length;return Do(Math.abs(e),r,!1,function(e){return t[Math.floor(e%r)]})+n},Ro=1,Uo=2,Oo=4,Mo=8,Qo=function(e,t,n,r,s,a){if(e<-9999||e>9999)return Ko(e,4,s.length>0);var i=Math.abs(e),o=s;if(0===i)return t[0]+o;for(var l=0;i>0&&l<=4;l++){var c=i%10;0===c&&sa(a,Ro)&&""!==o?o=t[c]+o:c>1||1===c&&0===l||1===c&&1===l&&sa(a,Uo)||1===c&&1===l&&sa(a,Oo)&&e>100||1===c&&l>1&&sa(a,Mo)?o=t[c]+(l>0?n[l-1]:"")+o:1===c&&l>0&&(o=n[l-1]+o),i=Math.floor(i/10)}return(e<0?r:"")+o},Ho="\u5341\u767e\u5343\u842c",zo="\u62fe\u4f70\u4edf\u842c",Wo="\u30de\u30a4\u30ca\u30b9",Vo="\ub9c8\uc774\ub108\uc2a4",Ko=function(e,t,n){var r=n?". ":"",s=n?"\u3001":"",a=n?", ":"",i=n?" ":"";switch(t){case 0:return"\u2022"+i;case 1:return"\u25e6"+i;case 2:return"\u25fe"+i;case 5:var o=Lo(e,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return Po(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",s);case 6:return Io(e,1,3999,_o,3,r).toLowerCase();case 7:return Io(e,1,3999,_o,3,r);case 8:return Lo(e,945,969,!1,r);case 9:return Lo(e,97,122,!1,r);case 10:return Lo(e,65,90,!1,r);case 11:return Lo(e,1632,1641,!0,r);case 12:case 49:return Io(e,1,9999,Eo,3,r);case 35:return Io(e,1,9999,Eo,3,r).toLowerCase();case 13:return Lo(e,2534,2543,!0,r);case 14:case 30:return Lo(e,6112,6121,!0,r);case 15:return Po(e,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",s);case 16:return Po(e,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",s);case 17:case 48:return Qo(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Ho,"\u8ca0",s,Uo|Oo|Mo);case 47:return Qo(e,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396",zo,"\u8ca0",s,Ro|Uo|Oo|Mo);case 42:return Qo(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Ho,"\u8d1f",s,Uo|Oo|Mo);case 41:return Qo(e,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396",zo,"\u8d1f",s,Ro|Uo|Oo|Mo);case 26:return Qo(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07",Wo,s,0);case 25:return Qo(e,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07",Wo,s,Ro|Uo|Oo);case 31:return Qo(e,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",Vo,a,Ro|Uo|Oo);case 33:return Qo(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",Vo,a,0);case 32:return Qo(e,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",Vo,a,Ro|Uo|Oo);case 18:return Lo(e,2406,2415,!0,r);case 20:return Io(e,1,19999,To,3,r);case 21:return Lo(e,2790,2799,!0,r);case 22:return Lo(e,2662,2671,!0,r);case 22:return Io(e,1,10999,Fo,3,r);case 23:return Po(e,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return Po(e,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return Lo(e,3302,3311,!0,r);case 28:return Po(e,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",s);case 29:return Po(e,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",s);case 34:return Lo(e,3792,3801,!0,r);case 37:return Lo(e,6160,6169,!0,r);case 38:return Lo(e,4160,4169,!0,r);case 39:return Lo(e,2918,2927,!0,r);case 40:return Lo(e,1776,1785,!0,r);case 43:return Lo(e,3046,3055,!0,r);case 44:return Lo(e,3174,3183,!0,r);case 45:return Lo(e,3664,3673,!0,r);case 46:return Lo(e,3872,3881,!0,r);default:return Lo(e,48,57,!0,r)}},Go="data-html2canvas-ignore",qo=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new So,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,a=Yo(e,t);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=a.contentWindow,c=l.document,d=$o(a).then(function(){return r(n,void 0,void 0,function(){var e,n;return s(this,function(r){switch(r.label){case 0:return this.scrolledElements.forEach(sl),l&&(l.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.scrollY===t.top&&l.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-t.left,l.scrollY-t.top,0,0))),e=this.options.onclone,"undefined"===typeof(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Zo(c)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"===typeof e?[2,Promise.resolve().then(function(){return e(c,n)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(nl(document.doctype)+"<html></html>"),rl(this.referenceElement.ownerDocument,i,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),d},e.prototype.createElementClone=function(e){if(ya(e,2),xo(e))return this.createCanvasClone(e);if(vo(e))return this.createVideoClone(e);if(wo(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return bo(t)&&(bo(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),ko(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return tl(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(e,t){return t&&"string"===typeof t.cssText?e+t.cssText:e},""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(Rt){if(this.context.logger.error("Unable to access cssRules property",Rt),"SecurityError"!==Rt.name)throw Rt}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(Rt){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var s=e.getContext("2d"),a=r.getContext("2d");if(a)if(!this.options.allowTaint&&s)a.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var i=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(i){var o=i.getContextAttributes();!1===(null===o||void 0===o?void 0:o.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return r}catch(Rt){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(Rt){this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){lo(t)&&(No(t)||t.hasAttribute(Go)||"function"===typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&lo(t)&&wo(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(lo(s)&&Bo(s)&&"function"===typeof s.assignedNodes){var a=s.assignedNodes();a.length&&a.forEach(function(e){return r.appendChildNode(t,e,n)})}else this.appendChildNode(t,s,n)},e.prototype.cloneNode=function(e,t){if(oo(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&lo(e)&&(co(e)||uo(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var s=n.getComputedStyle(e),a=n.getComputedStyle(e,":before"),i=n.getComputedStyle(e,":after");this.referenceElement===e&&co(r)&&(this.clonedReferenceElement=r),go(r)&&dl(r);var o=this.counters.parse(new ga(this.context,s)),l=this.resolvePseudoContent(e,r,a,Va.BEFORE);ko(e)&&(t=!0),vo(e)||this.cloneChildNodes(e,r,t),l&&r.insertBefore(l,r.firstChild);var c=this.resolvePseudoContent(e,r,i,Va.AFTER);return c&&r.appendChild(c),this.counters.pop(o),(s&&(this.options.copyStyles||uo(e))&&!yo(e)||t)&&tl(s,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(jo(e)||Co(e))&&(jo(r)||Co(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var s=this;if(n){var a=n.content,i=t.ownerDocument;if(i&&a&&"none"!==a&&"-moz-alt-content"!==a&&"none"!==n.display){this.counters.parse(new ga(this.context,n));var o=new ma(this.context,n),l=i.createElement("html2canvaspseudoelement");tl(n,l),o.content.forEach(function(t){if(0===t.type)l.appendChild(i.createTextNode(t.value));else if(22===t.type){var n=i.createElement("img");n.src=t.value,n.style.opacity="1",l.appendChild(n)}else if(18===t.type){if("attr"===t.name){var r=t.values.filter(In);r.length&&l.appendChild(i.createTextNode(e.getAttribute(r[0].value)||""))}else if("counter"===t.name){var a=t.values.filter(Rn),c=a[0],d=a[1];if(c&&In(c)){var u=s.counters.getCounterValue(c.value),h=d&&In(d)?js.parse(s.context,d.value):3;l.appendChild(i.createTextNode(Ko(u,h,!1)))}}else if("counters"===t.name){var A=t.values.filter(Rn),f=(c=A[0],A[1]);if(d=A[2],c&&In(c)){var p=s.counters.getCounterValues(c.value),m=d&&In(d)?js.parse(s.context,d.value):3,g=f&&0===f.type?f.value:"",x=p.map(function(e){return Ko(e,m,!1)}).join(g);l.appendChild(i.createTextNode(x))}}}else if(20===t.type)switch(t.value){case"open-quote":l.appendChild(i.createTextNode(da(o.quotes,s.quoteDepth++,!0)));break;case"close-quote":l.appendChild(i.createTextNode(da(o.quotes,--s.quoteDepth,!1)));break;default:l.appendChild(i.createTextNode(t.value))}}),l.className=ol+" "+ll;var c=r===Va.BEFORE?" "+ol:" "+ll;return uo(t)?t.className.baseValue+=c:t.className+=c,l}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(Va||(Va={}));var Xo,Yo=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(Go,"true"),e.body.appendChild(n),n},Jo=function(e){return new Promise(function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()})},Zo=function(e){return Promise.all([].slice.call(e.images,0).map(Jo))},$o=function(e){return new Promise(function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval(function(){s.body.childNodes.length>0&&"complete"===s.readyState&&(clearInterval(n),t(e))},50)}})},el=["all","d","content"],tl=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);-1===el.indexOf(r)&&t.style.setProperty(r,e.getPropertyValue(r))}return t},nl=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},rl=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},sl=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},al=":before",il=":after",ol="___html2canvas___pseudoelement_before",ll="___html2canvas___pseudoelement_after",cl='{\n    content: "" !important;\n    display: none !important;\n}',dl=function(e){ul(e,"."+ol+al+cl+"\n         ."+ll+il+cl)},ul=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},hl=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),Al=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:bl(e)||gl(e)?((this._cache[e]=this.loadImage(e)).catch(function(){}),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return r(this,void 0,void 0,function(){var t,n,r,a,i=this;return s(this,function(s){switch(s.label){case 0:return t=hl.isSameOrigin(e),n=!xl(e)&&!0===this._options.useCORS&&ji.SUPPORT_CORS_IMAGES&&!t,r=!xl(e)&&!t&&!bl(e)&&"string"===typeof this._options.proxy&&ji.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||xl(e)||bl(e)||r||n?(a=e,r?[4,this.proxy(a)]:[3,2]):[2];case 1:a=s.sent(),s.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(vl(a)||n)&&(r.crossOrigin="anonymous"),r.src=a,!0===r.complete&&setTimeout(function(){return e(r)},500),i._options.imageTimeout>0&&setTimeout(function(){return t("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,s.sent()]}})})},e.prototype.has=function(e){return"undefined"!==typeof this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise(function(s,a){var i=ji.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(200===o.status)if("text"===i)s(o.response);else{var e=new FileReader;e.addEventListener("load",function(){return s(e.result)},!1),e.addEventListener("error",function(e){return a(e)},!1),e.readAsDataURL(o.response)}else a("Failed to proxy resource "+r+" with status code "+o.status)},o.onerror=a;var l=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+l+"url="+encodeURIComponent(e)+"&responseType="+i),"text"!==i&&o instanceof XMLHttpRequest&&(o.responseType=i),t._options.imageTimeout){var c=t._options.imageTimeout;o.timeout=c,o.ontimeout=function(){return a("Timed out ("+c+"ms) proxying "+r)}}o.send()})},e}(),fl=/^data:image\/svg\+xml/i,pl=/^data:image\/.*;base64,/i,ml=/^data:image\/.*/i,gl=function(e){return ji.SUPPORT_SVG_DRAWING||!yl(e)},xl=function(e){return ml.test(e)},vl=function(e){return pl.test(e)},bl=function(e){return"blob"===e.substr(0,4)},yl=function(e){return"svg"===e.substr(-3).toLowerCase()||fl.test(e)},wl=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),Nl=function(e,t,n){return new wl(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},jl=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=Nl(this.start,this.startControl,t),s=Nl(this.startControl,this.endControl,t),a=Nl(this.endControl,this.end,t),i=Nl(r,s,t),o=Nl(s,a,t),l=Nl(i,o,t);return n?new e(this.start,r,i,l):new e(l,o,a,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Cl=function(e){return 1===e.type},Bl=function(){function e(e){var t=e.styles,n=e.bounds,r=Kn(t.borderTopLeftRadius,n.width,n.height),s=r[0],a=r[1],i=Kn(t.borderTopRightRadius,n.width,n.height),o=i[0],l=i[1],c=Kn(t.borderBottomRightRadius,n.width,n.height),d=c[0],u=c[1],h=Kn(t.borderBottomLeftRadius,n.width,n.height),A=h[0],f=h[1],p=[];p.push((s+o)/n.width),p.push((A+d)/n.width),p.push((a+f)/n.height),p.push((l+u)/n.height);var m=Math.max.apply(Math,p);m>1&&(s/=m,a/=m,o/=m,l/=m,d/=m,u/=m,A/=m,f/=m);var g=n.width-o,x=n.height-u,v=n.width-d,b=n.height-f,y=t.borderTopWidth,w=t.borderRightWidth,N=t.borderBottomWidth,j=t.borderLeftWidth,C=Gn(t.paddingTop,e.bounds.width),B=Gn(t.paddingRight,e.bounds.width),k=Gn(t.paddingBottom,e.bounds.width),S=Gn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||a>0?kl(n.left+j/3,n.top+y/3,s-j/3,a-y/3,Xo.TOP_LEFT):new wl(n.left+j/3,n.top+y/3),this.topRightBorderDoubleOuterBox=s>0||a>0?kl(n.left+g,n.top+y/3,o-w/3,l-y/3,Xo.TOP_RIGHT):new wl(n.left+n.width-w/3,n.top+y/3),this.bottomRightBorderDoubleOuterBox=d>0||u>0?kl(n.left+v,n.top+x,d-w/3,u-N/3,Xo.BOTTOM_RIGHT):new wl(n.left+n.width-w/3,n.top+n.height-N/3),this.bottomLeftBorderDoubleOuterBox=A>0||f>0?kl(n.left+j/3,n.top+b,A-j/3,f-N/3,Xo.BOTTOM_LEFT):new wl(n.left+j/3,n.top+n.height-N/3),this.topLeftBorderDoubleInnerBox=s>0||a>0?kl(n.left+2*j/3,n.top+2*y/3,s-2*j/3,a-2*y/3,Xo.TOP_LEFT):new wl(n.left+2*j/3,n.top+2*y/3),this.topRightBorderDoubleInnerBox=s>0||a>0?kl(n.left+g,n.top+2*y/3,o-2*w/3,l-2*y/3,Xo.TOP_RIGHT):new wl(n.left+n.width-2*w/3,n.top+2*y/3),this.bottomRightBorderDoubleInnerBox=d>0||u>0?kl(n.left+v,n.top+x,d-2*w/3,u-2*N/3,Xo.BOTTOM_RIGHT):new wl(n.left+n.width-2*w/3,n.top+n.height-2*N/3),this.bottomLeftBorderDoubleInnerBox=A>0||f>0?kl(n.left+2*j/3,n.top+b,A-2*j/3,f-2*N/3,Xo.BOTTOM_LEFT):new wl(n.left+2*j/3,n.top+n.height-2*N/3),this.topLeftBorderStroke=s>0||a>0?kl(n.left+j/2,n.top+y/2,s-j/2,a-y/2,Xo.TOP_LEFT):new wl(n.left+j/2,n.top+y/2),this.topRightBorderStroke=s>0||a>0?kl(n.left+g,n.top+y/2,o-w/2,l-y/2,Xo.TOP_RIGHT):new wl(n.left+n.width-w/2,n.top+y/2),this.bottomRightBorderStroke=d>0||u>0?kl(n.left+v,n.top+x,d-w/2,u-N/2,Xo.BOTTOM_RIGHT):new wl(n.left+n.width-w/2,n.top+n.height-N/2),this.bottomLeftBorderStroke=A>0||f>0?kl(n.left+j/2,n.top+b,A-j/2,f-N/2,Xo.BOTTOM_LEFT):new wl(n.left+j/2,n.top+n.height-N/2),this.topLeftBorderBox=s>0||a>0?kl(n.left,n.top,s,a,Xo.TOP_LEFT):new wl(n.left,n.top),this.topRightBorderBox=o>0||l>0?kl(n.left+g,n.top,o,l,Xo.TOP_RIGHT):new wl(n.left+n.width,n.top),this.bottomRightBorderBox=d>0||u>0?kl(n.left+v,n.top+x,d,u,Xo.BOTTOM_RIGHT):new wl(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=A>0||f>0?kl(n.left,n.top+b,A,f,Xo.BOTTOM_LEFT):new wl(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||a>0?kl(n.left+j,n.top+y,Math.max(0,s-j),Math.max(0,a-y),Xo.TOP_LEFT):new wl(n.left+j,n.top+y),this.topRightPaddingBox=o>0||l>0?kl(n.left+Math.min(g,n.width-w),n.top+y,g>n.width+w?0:Math.max(0,o-w),Math.max(0,l-y),Xo.TOP_RIGHT):new wl(n.left+n.width-w,n.top+y),this.bottomRightPaddingBox=d>0||u>0?kl(n.left+Math.min(v,n.width-j),n.top+Math.min(x,n.height-N),Math.max(0,d-w),Math.max(0,u-N),Xo.BOTTOM_RIGHT):new wl(n.left+n.width-w,n.top+n.height-N),this.bottomLeftPaddingBox=A>0||f>0?kl(n.left+j,n.top+Math.min(b,n.height-N),Math.max(0,A-j),Math.max(0,f-N),Xo.BOTTOM_LEFT):new wl(n.left+j,n.top+n.height-N),this.topLeftContentBox=s>0||a>0?kl(n.left+j+S,n.top+y+C,Math.max(0,s-(j+S)),Math.max(0,a-(y+C)),Xo.TOP_LEFT):new wl(n.left+j+S,n.top+y+C),this.topRightContentBox=o>0||l>0?kl(n.left+Math.min(g,n.width+j+S),n.top+y+C,g>n.width+j+S?0:o-j+S,l-(y+C),Xo.TOP_RIGHT):new wl(n.left+n.width-(w+B),n.top+y+C),this.bottomRightContentBox=d>0||u>0?kl(n.left+Math.min(v,n.width-(j+S)),n.top+Math.min(x,n.height+y+C),Math.max(0,d-(w+B)),u-(N+k),Xo.BOTTOM_RIGHT):new wl(n.left+n.width-(w+B),n.top+n.height-(N+k)),this.bottomLeftContentBox=A>0||f>0?kl(n.left+j+S,n.top+b,Math.max(0,A-(j+S)),f-(N+k),Xo.BOTTOM_LEFT):new wl(n.left+j+S,n.top+n.height-(N+k))}return e}();!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(Xo||(Xo={}));var kl=function(e,t,n,r,s){var a=(Math.sqrt(2)-1)/3*4,i=n*a,o=r*a,l=e+n,c=t+r;switch(s){case Xo.TOP_LEFT:return new jl(new wl(e,c),new wl(e,c-o),new wl(l-i,t),new wl(l,t));case Xo.TOP_RIGHT:return new jl(new wl(e,t),new wl(e+i,t),new wl(l,c-o),new wl(l,c));case Xo.BOTTOM_RIGHT:return new jl(new wl(l,t),new wl(l,t+o),new wl(e+i,c),new wl(e,c));case Xo.BOTTOM_LEFT:default:return new jl(new wl(l,c),new wl(l-i,c),new wl(e,t+o),new wl(e,t))}},Sl=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},_l=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},El=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Fl=function(){function e(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return e}(),Tl=function(){function e(e,t){this.path=e,this.target=t,this.type=1}return e}(),Il=function(){function e(e){this.opacity=e,this.type=2,this.target=6}return e}(),Dl=function(e){return 0===e.type},Ll=function(e){return 1===e.type},Pl=function(e){return 2===e.type},Rl=function(e,t){return e.length===t.length&&e.some(function(e,n){return e===t[n]})},Ul=function(e,t,n,r,s){return e.map(function(e,a){switch(a){case 0:return e.add(t,n);case 1:return e.add(t+r,n);case 2:return e.add(t+r,n+s);case 3:return e.add(t,n+s)}return e})},Ol=function(){function e(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Ml=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Bl(this.container),this.container.styles.opacity<1&&this.effects.push(new Il(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new Fl(n,r,s))}if(0!==this.container.styles.overflowX){var a=Sl(this.curves),i=El(this.curves);Rl(a,i)?this.effects.push(new Tl(a,6)):(this.effects.push(new Tl(a,2)),this.effects.push(new Tl(i,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var s=n.effects.filter(function(e){return!Ll(e)});if(t||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,s),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var a=Sl(n.curves),i=El(n.curves);Rl(a,i)||r.unshift(new Tl(i,6))}}else r.unshift.apply(r,s);n=n.parent}return r.filter(function(t){return sa(t.target,e)})},e}(),Ql=function(e,t,n,r){e.container.elements.forEach(function(s){var a=sa(s.flags,4),i=sa(s.flags,2),o=new Ml(s,e);sa(s.styles.display,2048)&&r.push(o);var l=sa(s.flags,8)?[]:r;if(a||i){var c=a||s.styles.isPositioned()?n:t,d=new Ol(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var u=s.styles.zIndex.order;if(u<0){var h=0;c.negativeZIndex.some(function(e,t){return u>e.element.container.styles.zIndex.order?(h=t,!1):h>0}),c.negativeZIndex.splice(h,0,d)}else if(u>0){var A=0;c.positiveZIndex.some(function(e,t){return u>=e.element.container.styles.zIndex.order?(A=t+1,!1):A>0}),c.positiveZIndex.splice(A,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);Ql(o,d,a?d:n,l)}else s.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),Ql(o,t,n,l);sa(s.flags,8)&&Hl(s,l)})},Hl=function(e,t){for(var n=e instanceof Hi?e.start:1,r=e instanceof Hi&&e.reversed,s=0;s<t.length;s++){var a=t[s];a.container instanceof Qi&&"number"===typeof a.container.value&&0!==a.container.value&&(n=a.container.value),a.listValue=Ko(n,a.container.styles.listStyleType,!0),n+=r?-1:1}},zl=function(e){var t=new Ml(e,null),n=new Ol(t),r=[];return Ql(t,n,n,r),Hl(t.container,r),n},Wl=function(e,t){switch(t){case 0:return Xl(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Xl(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Xl(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return Xl(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Vl=function(e,t){switch(t){case 0:return Xl(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Xl(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Xl(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return Xl(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Kl=function(e,t){switch(t){case 0:return Xl(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Xl(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Xl(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return Xl(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Gl=function(e,t){switch(t){case 0:return ql(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return ql(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return ql(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return ql(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},ql=function(e,t){var n=[];return Cl(e)?n.push(e.subdivide(.5,!1)):n.push(e),Cl(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Xl=function(e,t,n,r){var s=[];return Cl(e)?s.push(e.subdivide(.5,!1)):s.push(e),Cl(n)?s.push(n.subdivide(.5,!0)):s.push(n),Cl(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),Cl(t)?s.push(t.subdivide(.5,!1).reverse()):s.push(t),s},Yl=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Jl=function(e){var t=e.styles,n=e.bounds,r=Gn(t.paddingLeft,n.width),s=Gn(t.paddingRight,n.width),a=Gn(t.paddingTop,n.width),i=Gn(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,a+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+s),-(t.borderTopWidth+t.borderBottomWidth+a+i))},Zl=function(e,t){return 0===e?t.bounds:2===e?Jl(t):Yl(t)},$l=function(e,t){return 0===e?t.bounds:2===e?Jl(t):Yl(t)},ec=function(e,t,n){var r=Zl(sc(e.styles.backgroundOrigin,t),e),s=$l(sc(e.styles.backgroundClip,t),e),a=rc(sc(e.styles.backgroundSize,t),n,r),i=a[0],o=a[1],l=Kn(sc(e.styles.backgroundPosition,t),r.width-i,r.height-o);return[ac(sc(e.styles.backgroundRepeat,t),l,a,r,s),Math.round(r.left+l[0]),Math.round(r.top+l[1]),i,o]},tc=function(e){return In(e)&&e.value===Pr.AUTO},nc=function(e){return"number"===typeof e},rc=function(e,t,n){var r=t[0],s=t[1],a=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(Qn(i)&&o&&Qn(o))return[Gn(i,n.width),Gn(o,n.height)];var l=nc(a);if(In(i)&&(i.value===Pr.CONTAIN||i.value===Pr.COVER))return nc(a)?n.width/n.height<a!==(i.value===Pr.COVER)?[n.width,n.width/a]:[n.height*a,n.height]:[n.width,n.height];var c=nc(r),d=nc(s),u=c||d;if(tc(i)&&(!o||tc(o)))return c&&d?[r,s]:l||u?u&&l?[c?r:s*a,d?s:r/a]:[c?r:n.width,d?s:n.height]:[n.width,n.height];if(l){var h=0,A=0;return Qn(i)?h=Gn(i,n.width):Qn(o)&&(A=Gn(o,n.height)),tc(i)?h=A*a:o&&!tc(o)||(A=h/a),[h,A]}var f=null,p=null;if(Qn(i)?f=Gn(i,n.width):o&&Qn(o)&&(p=Gn(o,n.height)),null===f||o&&!tc(o)||(p=c&&d?f/r*s:n.height),null!==p&&tc(i)&&(f=c&&d?p/s*r:n.width),null!==f&&null!==p)return[f,p];throw new Error("Unable to calculate background-size for element")},sc=function(e,t){var n=e[t];return"undefined"===typeof n?e[0]:n},ac=function(e,t,n,r,s){var a=t[0],i=t[1],o=n[0],l=n[1];switch(e){case 2:return[new wl(Math.round(r.left),Math.round(r.top+i)),new wl(Math.round(r.left+r.width),Math.round(r.top+i)),new wl(Math.round(r.left+r.width),Math.round(l+r.top+i)),new wl(Math.round(r.left),Math.round(l+r.top+i))];case 3:return[new wl(Math.round(r.left+a),Math.round(r.top)),new wl(Math.round(r.left+a+o),Math.round(r.top)),new wl(Math.round(r.left+a+o),Math.round(r.height+r.top)),new wl(Math.round(r.left+a),Math.round(r.height+r.top))];case 1:return[new wl(Math.round(r.left+a),Math.round(r.top+i)),new wl(Math.round(r.left+a+o),Math.round(r.top+i)),new wl(Math.round(r.left+a+o),Math.round(r.top+i+l)),new wl(Math.round(r.left+a),Math.round(r.top+i+l))];default:return[new wl(Math.round(s.left),Math.round(s.top)),new wl(Math.round(s.left+s.width),Math.round(s.top)),new wl(Math.round(s.left+s.width),Math.round(s.height+s.top)),new wl(Math.round(s.left),Math.round(s.height+s.top))]}},ic="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",oc="Hidden Text",lc=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),s=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),r.src=ic,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(oc)),n.appendChild(s),n.appendChild(r);var i=r.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(oc)),n.style.lineHeight="normal",r.style.verticalAlign="super";var o=r.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:i,middle:o}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return"undefined"===typeof this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),cc=function(){function e(e,t){this.context=e,this.options=t}return e}(),dc=1e4,uc=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new lc(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return t(n,e),n.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach(function(e){return t.applyEffect(e)})},n.prototype.applyEffect=function(e){this.ctx.save(),Pl(e)&&(this.ctx.globalAlpha=e.opacity),Dl(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),Ll(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.renderNode=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return sa(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},n.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):_i(e.text).reduce(function(t,s){return r.ctx.fillText(s,t,e.bounds.top+n),t+r.ctx.measureText(s).width},e.bounds.left)},n.prototype.createFontStyle=function(e){var t=e.fontVariant.filter(function(e){return"normal"===e||"small-caps"===e}).join(""),n=mc(e.fontFamily).join(", "),r=Fn(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},n.prototype.renderTextNode=function(e,t){return r(this,void 0,void 0,function(){var n,r,a,i,o,l,c,d,u=this;return s(this,function(s){return n=this.createFontStyle(t),r=n[0],a=n[1],i=n[2],this.ctx.font=r,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(a,i),l=o.baseline,c=o.middle,d=t.paintOrder,e.textBounds.forEach(function(e){d.forEach(function(n){switch(n){case 0:u.ctx.fillStyle=sr(t.color),u.renderTextWithLetterSpacing(e,t.letterSpacing,l);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach(function(n){u.ctx.shadowColor=sr(n.color),u.ctx.shadowOffsetX=n.offsetX.number*u.options.scale,u.ctx.shadowOffsetY=n.offsetY.number*u.options.scale,u.ctx.shadowBlur=n.blur.number,u.renderTextWithLetterSpacing(e,t.letterSpacing,l)}),u.ctx.shadowColor="",u.ctx.shadowOffsetX=0,u.ctx.shadowOffsetY=0,u.ctx.shadowBlur=0),t.textDecorationLine.length&&(u.ctx.fillStyle=sr(t.textDecorationColor||t.color),t.textDecorationLine.forEach(function(t){switch(t){case 1:u.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+l),e.bounds.width,1);break;case 2:u.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:u.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+c),e.bounds.width,1)}}));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(u.ctx.strokeStyle=sr(t.webkitTextStrokeColor),u.ctx.lineWidth=t.webkitTextStrokeWidth,u.ctx.lineJoin=window.chrome?"miter":"round",u.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+l)),u.ctx.strokeStyle="",u.ctx.lineWidth=0,u.ctx.lineJoin="miter"}})}),[2]})})},n.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=Jl(e),s=El(t);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,function(){var t,r,a,o,l,c,d,u,h,A,f,p,m,g,x,v,b,y;return s(this,function(s){switch(s.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,r=e.curves,a=t.styles,o=0,l=t.textNodes,s.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,a)]):[3,4];case 2:s.sent(),s.label=3;case 3:return o++,[3,1];case 4:if(!(t instanceof Ui))return[3,8];s.label=5;case 5:return s.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return x=s.sent(),this.renderReplacedElement(t,r,x),[3,8];case 7:return s.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof Oi&&this.renderReplacedElement(t,r,t.canvas),!(t instanceof Mi))return[3,12];s.label=9;case 9:return s.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return x=s.sent(),this.renderReplacedElement(t,r,x),[3,12];case 11:return s.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof eo&&t.tree?[4,new n(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:d=s.sent(),t.width&&t.height&&this.ctx.drawImage(d,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),s.label=14;case 14:if(t instanceof Ji&&(u=Math.min(t.bounds.width,t.bounds.height),t.type===Gi?t.checked&&(this.ctx.save(),this.path([new wl(t.bounds.left+.39363*u,t.bounds.top+.79*u),new wl(t.bounds.left+.16*u,t.bounds.top+.5549*u),new wl(t.bounds.left+.27347*u,t.bounds.top+.44071*u),new wl(t.bounds.left+.39694*u,t.bounds.top+.5649*u),new wl(t.bounds.left+.72983*u,t.bounds.top+.23*u),new wl(t.bounds.left+.84*u,t.bounds.top+.34085*u),new wl(t.bounds.left+.39363*u,t.bounds.top+.79*u)]),this.ctx.fillStyle=sr(Yi),this.ctx.fill(),this.ctx.restore()):t.type===qi&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+u/2,t.bounds.top+u/2,u/4,0,2*Math.PI,!0),this.ctx.fillStyle=sr(Yi),this.ctx.fill(),this.ctx.restore())),hc(t)&&t.value.length){switch(h=this.createFontStyle(a),b=h[0],A=h[1],f=this.fontMetrics.getMetrics(b,A).baseline,this.ctx.font=b,this.ctx.fillStyle=sr(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=fc(t.styles.textAlign),y=Jl(t),p=0,t.styles.textAlign){case 1:p+=y.width/2;break;case 2:p+=y.width}m=y.add(p,0,0,-y.height/2+1),this.ctx.save(),this.path([new wl(y.left,y.top),new wl(y.left+y.width,y.top),new wl(y.left+y.width,y.top+y.height),new wl(y.left,y.top+y.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ci(t.value,m),a.letterSpacing,f),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!sa(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(g=t.styles.listStyleImage).type)return[3,18];x=void 0,v=g.url,s.label=15;case 15:return s.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return x=s.sent(),this.ctx.drawImage(x,t.bounds.left-(x.width+10),t.bounds.top),[3,18];case 17:return s.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(b=this.createFontStyle(a)[0],this.ctx.font=b,this.ctx.fillStyle=sr(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",y=new i(t.bounds.left,t.bounds.top+Gn(t.styles.paddingTop,t.bounds.width),t.bounds.width,ys(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ci(e.listValue,y),a.letterSpacing,ys(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),s.label=20;case 20:return[2]}})})},n.prototype.renderStackContent=function(e){return r(this,void 0,void 0,function(){var t,n,r,a,i,o,l,c,d,u,h,A,f,p,m;return s(this,function(s){switch(s.label){case 0:return sa(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:s.sent(),t=0,n=e.negativeZIndex,s.label=2;case 2:return t<n.length?(m=n[t],[4,this.renderStack(m)]):[3,5];case 3:s.sent(),s.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:s.sent(),r=0,a=e.nonInlineLevel,s.label=7;case 7:return r<a.length?(m=a[r],[4,this.renderNode(m)]):[3,10];case 8:s.sent(),s.label=9;case 9:return r++,[3,7];case 10:i=0,o=e.nonPositionedFloats,s.label=11;case 11:return i<o.length?(m=o[i],[4,this.renderStack(m)]):[3,14];case 12:s.sent(),s.label=13;case 13:return i++,[3,11];case 14:l=0,c=e.nonPositionedInlineLevel,s.label=15;case 15:return l<c.length?(m=c[l],[4,this.renderStack(m)]):[3,18];case 16:s.sent(),s.label=17;case 17:return l++,[3,15];case 18:d=0,u=e.inlineLevel,s.label=19;case 19:return d<u.length?(m=u[d],[4,this.renderNode(m)]):[3,22];case 20:s.sent(),s.label=21;case 21:return d++,[3,19];case 22:h=0,A=e.zeroOrAutoZIndexOrTransformedOrOpacity,s.label=23;case 23:return h<A.length?(m=A[h],[4,this.renderStack(m)]):[3,26];case 24:s.sent(),s.label=25;case 25:return h++,[3,23];case 26:f=0,p=e.positiveZIndex,s.label=27;case 27:return f<p.length?(m=p[f],[4,this.renderStack(m)]):[3,30];case 28:s.sent(),s.label=29;case 29:return f++,[3,27];case 30:return[2]}})})},n.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},n.prototype.formatPath=function(e){var t=this;e.forEach(function(e,n){var r=Cl(e)?e.start:e;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),Cl(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})},n.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},n.prototype.resizeImage=function(e,t,n){var r;if(e.width===t&&e.height===n)return e;var s=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return s.width=Math.max(1,t),s.height=Math.max(1,n),s.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),s},n.prototype.renderBackgroundImage=function(e){return r(this,void 0,void 0,function(){var t,n,r,a,i,o;return s(this,function(l){switch(l.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var a,i,o,l,c,d,u,h,A,f,p,m,g,x,v,b,y,w,N,j,C,B,k,S,_,E,F,T,I,D,L;return s(this,function(s){switch(s.label){case 0:if(0!==n.type)return[3,5];a=void 0,i=n.url,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.context.cache.match(i)];case 2:return a=s.sent(),[3,4];case 3:return s.sent(),r.context.logger.error("Error loading background-image "+i),[3,4];case 4:return a&&(o=ec(e,t,[a.width,a.height,a.width/a.height]),b=o[0],B=o[1],k=o[2],N=o[3],j=o[4],x=r.ctx.createPattern(r.resizeImage(a,N,j),"repeat"),r.renderRepeat(b,x,B,k)),[3,6];case 5:Tr(n)?(l=ec(e,t,[null,null,null]),b=l[0],B=l[1],k=l[2],N=l[3],j=l[4],c=xr(n.angle,N,j),d=c[0],u=c[1],h=c[2],A=c[3],f=c[4],(p=document.createElement("canvas")).width=N,p.height=j,m=p.getContext("2d"),g=m.createLinearGradient(u,A,h,f),mr(n.stops,d).forEach(function(e){return g.addColorStop(e.stop,sr(e.color))}),m.fillStyle=g,m.fillRect(0,0,N,j),N>0&&j>0&&(x=r.ctx.createPattern(p,"repeat"),r.renderRepeat(b,x,B,k))):Ir(n)&&(v=ec(e,t,[null,null,null]),b=v[0],y=v[1],w=v[2],N=v[3],j=v[4],C=0===n.position.length?[Wn]:n.position,B=Gn(C[0],N),k=Gn(C[C.length-1],j),S=yr(n,B,k,N,j),_=S[0],E=S[1],_>0&&E>0&&(F=r.ctx.createRadialGradient(y+B,w+k,0,y+B,w+k,_),mr(n.stops,2*_).forEach(function(e){return F.addColorStop(e.stop,sr(e.color))}),r.path(b),r.ctx.fillStyle=F,_!==E?(T=e.bounds.left+.5*e.bounds.width,I=e.bounds.top+.5*e.bounds.height,L=1/(D=E/_),r.ctx.save(),r.ctx.translate(T,I),r.ctx.transform(1,0,0,D,0,0),r.ctx.translate(-T,-I),r.ctx.fillRect(y,L*(w-I)+I,N,j*L),r.ctx.restore()):r.ctx.fill())),s.label=6;case 6:return t--,[2]}})},r=this,a=0,i=e.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return a<i.length?(o=i[a],[5,n(o)]):[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},n.prototype.renderSolidBorder=function(e,t,n){return r(this,void 0,void 0,function(){return s(this,function(r){return this.path(Wl(n,t)),this.ctx.fillStyle=sr(e),this.ctx.fill(),[2]})})},n.prototype.renderDoubleBorder=function(e,t,n,a){return r(this,void 0,void 0,function(){var r,i;return s(this,function(s){switch(s.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,a)]:[3,2];case 1:return s.sent(),[2];case 2:return r=Vl(a,n),this.path(r),this.ctx.fillStyle=sr(e),this.ctx.fill(),i=Kl(a,n),this.path(i),this.ctx.fill(),[2]}})})},n.prototype.renderNodeBackgroundAndBorders=function(e){return r(this,void 0,void 0,function(){var t,n,r,a,i,o,l,c,d=this;return s(this,function(s){switch(s.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!rr(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],a=Ac(sc(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),rr(t.backgroundColor)||(this.ctx.fillStyle=sr(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:s.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach(function(t){d.ctx.save();var n=Sl(e.curves),r=t.inset?0:dc,s=Ul(n,-r+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(d.path(n),d.ctx.clip(),d.mask(s)):(d.mask(n),d.ctx.clip(),d.path(s)),d.ctx.shadowOffsetX=t.offsetX.number+r,d.ctx.shadowOffsetY=t.offsetY.number,d.ctx.shadowColor=sr(t.color),d.ctx.shadowBlur=t.blur.number,d.ctx.fillStyle=t.inset?sr(t.color):"rgba(0,0,0,1)",d.ctx.fill(),d.ctx.restore()}),s.label=2;case 2:i=0,o=0,l=r,s.label=3;case 3:return o<l.length?0!==(c=l[o]).style&&!rr(c.color)&&c.width>0?2!==c.style?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,i,e.curves,2)]:[3,11]:[3,13];case 4:return s.sent(),[3,11];case 5:return 3!==c.style?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,i,e.curves,3)];case 6:return s.sent(),[3,11];case 7:return 4!==c.style?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,i,e.curves)];case 8:return s.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,i,e.curves)];case 10:s.sent(),s.label=11;case 11:i++,s.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},n.prototype.renderDashedDottedBorder=function(e,t,n,a,i){return r(this,void 0,void 0,function(){var r,o,l,c,d,u,h,A,f,p,m,g,x,v,b,y;return s(this,function(s){return this.ctx.save(),r=Gl(a,n),o=Wl(a,n),2===i&&(this.path(o),this.ctx.clip()),Cl(o[0])?(l=o[0].start.x,c=o[0].start.y):(l=o[0].x,c=o[0].y),Cl(o[1])?(d=o[1].end.x,u=o[1].end.y):(d=o[1].x,u=o[1].y),h=0===n||2===n?Math.abs(l-d):Math.abs(c-u),this.ctx.beginPath(),3===i?this.formatPath(r):this.formatPath(o.slice(0,2)),A=t<3?3*t:2*t,f=t<3?2*t:t,3===i&&(A=t,f=t),p=!0,h<=2*A?p=!1:h<=2*A+f?(A*=m=h/(2*A+f),f*=m):(g=Math.floor((h+f)/(A+f)),x=(h-g*A)/(g-1),f=(v=(h-(g+1)*A)/g)<=0||Math.abs(f-x)<Math.abs(f-v)?x:v),p&&(3===i?this.ctx.setLineDash([0,A+f]):this.ctx.setLineDash([A,f])),3===i?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=sr(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===i&&(Cl(o[0])&&(b=o[3],y=o[0],this.ctx.beginPath(),this.formatPath([new wl(b.end.x,b.end.y),new wl(y.start.x,y.start.y)]),this.ctx.stroke()),Cl(o[1])&&(b=o[1],y=o[2],this.ctx.beginPath(),this.formatPath([new wl(b.end.x,b.end.y),new wl(y.start.x,y.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},n.prototype.render=function(e){return r(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=sr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=zl(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},n}(cc),hc=function(e){return e instanceof $i||e instanceof Zi||e instanceof Ji&&e.type!==qi&&e.type!==Gi},Ac=function(e,t){switch(e){case 0:return Sl(t);case 2:return _l(t);default:return El(t)}},fc=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},pc=["-apple-system","system-ui"],mc=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(e){return-1===pc.indexOf(e)}):e},gc=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return t(n,e),n.prototype.render=function(e){return r(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return t=wi(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,xc(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=sr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},n}(cc),xc=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},vc=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.debug?console.debug.apply(console,a([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!==typeof window&&window.console&&"function"===typeof console.info&&console.info.apply(console,a([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.warn?console.warn.apply(console,a([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.error?console.error.apply(console,a([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),bc=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new vc({id:this.instanceName,enabled:t.logging}),this.cache=null!==(r=t.cache)&&void 0!==r?r:new Al(this,t)}return e.instanceCount=1,e}(),yc=function(e,t){return void 0===t&&(t={}),wc(e,t)};"undefined"!==typeof window&&hl.setContext(window);var wc=function(e,t){return r(void 0,void 0,void 0,function(){var r,a,c,d,u,h,A,f,p,m,g,x,v,b,y,w,N,j,C,B,k,S,_,E,F,T,I,D,L,P,R,U,O,M,Q,H,z,W;return s(this,function(s){switch(s.label){case 0:if(!e||"object"!==typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(r=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(a=r.defaultView))throw new Error("Document is not attached to a Window");return c={allowTaint:null!==(S=t.allowTaint)&&void 0!==S&&S,imageTimeout:null!==(_=t.imageTimeout)&&void 0!==_?_:15e3,proxy:t.proxy,useCORS:null!==(E=t.useCORS)&&void 0!==E&&E},d=n({logging:null===(F=t.logging)||void 0===F||F,cache:t.cache},c),u={windowWidth:null!==(T=t.windowWidth)&&void 0!==T?T:a.innerWidth,windowHeight:null!==(I=t.windowHeight)&&void 0!==I?I:a.innerHeight,scrollX:null!==(D=t.scrollX)&&void 0!==D?D:a.pageXOffset,scrollY:null!==(L=t.scrollY)&&void 0!==L?L:a.pageYOffset},h=new i(u.scrollX,u.scrollY,u.windowWidth,u.windowHeight),A=new bc(d,h),f=null!==(P=t.foreignObjectRendering)&&void 0!==P&&P,p={allowTaint:null!==(R=t.allowTaint)&&void 0!==R&&R,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:f,copyStyles:f},A.logger.debug("Starting document clone with size "+h.width+"x"+h.height+" scrolled to "+-h.left+","+-h.top),m=new qo(A,e,p),(g=m.clonedReferenceElement)?[4,m.toIFrame(r,h)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return x=s.sent(),v=go(g)||po(g)?l(g.ownerDocument):o(A,g),b=v.width,y=v.height,w=v.left,N=v.top,j=Nc(A,g,t.backgroundColor),C={canvas:t.canvas,backgroundColor:j,scale:null!==(O=null!==(U=t.scale)&&void 0!==U?U:a.devicePixelRatio)&&void 0!==O?O:1,x:(null!==(M=t.x)&&void 0!==M?M:0)+w,y:(null!==(Q=t.y)&&void 0!==Q?Q:0)+N,width:null!==(H=t.width)&&void 0!==H?H:Math.ceil(b),height:null!==(z=t.height)&&void 0!==z?z:Math.ceil(y)},f?(A.logger.debug("Document cloned, using foreign object rendering"),[4,new gc(A,C).render(g)]):[3,3];case 2:return B=s.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+w+","+N+" with size "+b+"x"+y+" using computed rendering"),A.logger.debug("Starting DOM parsing"),k=so(A,g),j===k.styles.backgroundColor&&(k.styles.backgroundColor=hr.TRANSPARENT),A.logger.debug("Starting renderer for element at "+C.x+","+C.y+" with size "+C.width+"x"+C.height),[4,new uc(A,C).render(k)];case 4:B=s.sent(),s.label=5;case 5:return(null===(W=t.removeContainer)||void 0===W||W)&&(qo.destroy(x)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,B]}})})},Nc=function(e,t,n){var r=t.ownerDocument,s=r.documentElement?ur(e,getComputedStyle(r.documentElement).backgroundColor):hr.TRANSPARENT,a=r.body?ur(e,getComputedStyle(r.body).backgroundColor):hr.TRANSPARENT,i="string"===typeof n?ur(e,n):null===n?hr.TRANSPARENT:4294967295;return t===r.documentElement?rr(s)?rr(a)?i:a:s:i};return yc}()},1352:(e,t,n)=>{"use strict";var r=n(7119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1591:()=>{},1761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<a(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,i=s>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,n))c<s&&0>a(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>a(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,A=3,f=!1,p=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function y(e){if(m=!1,b(e),!p)if(null!==r(c))p=!0,I(w);else{var t=r(d);null!==t&&D(y,t.startTime-e)}}function w(e,n){p=!1,m&&(m=!1,x(B),B=-1),f=!0;var a=A;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!_());){var i=h.callback;if("function"===typeof i){h.callback=null,A=h.priorityLevel;var o=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),b(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&D(y,u.startTime-n),l=!1}return l}finally{h=null,A=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,j=!1,C=null,B=-1,k=5,S=-1;function _(){return!(t.unstable_now()-S<k)}function E(){if(null!==C){var e=t.unstable_now();S=e;var n=!0;try{n=C(!0,e)}finally{n?N():(j=!1,C=null)}}else j=!1}if("function"===typeof v)N=function(){v(E)};else if("undefined"!==typeof MessageChannel){var F=new MessageChannel,T=F.port2;F.port1.onmessage=E,N=function(){T.postMessage(null)}}else N=function(){g(E,0)};function I(e){C=e,j||(j=!0,N())}function D(e,n){B=g(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,I(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,s,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,n(d,e),null===r(c)&&e===r(d)&&(m?(x(B),B=-1):m=!0,D(y,a-i))):(e.sortIndex=o,n(c,e),p||f||(p=!0,I(w))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},1766:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),s=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},a.apply(this,arguments)},i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};function o(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise(function(n,r){t.call(navigator,e,n,r)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var l=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return s(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,o()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(o()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),s=e.minScreenshotWidth!==t.minScreenshotWidth,a=e.minScreenshotHeight!==t.minScreenshotHeight;(r||s||a)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map(function(t){e.removeTrack(t),t.stop()}),e.getAudioTracks().map(function(t){e.removeTrack(t),t.stop()})):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,s=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var a=r/s;s=(r=n.minScreenshotWidth||this.video.clientWidth)/a,n.minScreenshotHeight&&s<n.minScreenshotHeight&&(r=(s=n.minScreenshotHeight)*a)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||s,this.ctx=this.canvas.getContext("2d")}var i=this.ctx,o=this.canvas;return i&&o&&(o.width=(null===e||void 0===e?void 0:e.width)||o.width,o.height=(null===e||void 0===e?void 0:e.height)||o.height,n.mirrored&&(i.translate(o.width,0),i.scale(-1,1)),i.imageSmoothingEnabled=n.imageSmoothing,i.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||o.width,(null===e||void 0===e?void 0:e.height)||o.height),n.mirrored&&(i.scale(-1,1),i.translate(-o.width,0))),o},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,s){var a={video:"undefined"===typeof s||s};n.audio&&(a.audio="undefined"===typeof r||r),e.requestUserMediaId++;var i=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(a).then(function(n){e.unmounted||i!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)}).catch(function(t){e.handleUserMedia(t)})};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var s=function(e){return{optional:[{sourceId:e}]}},a=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources(function(e){var t=null,i=null;e.forEach(function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(i=e.id)});var o=a(n.audioConstraints);o&&(t=o);var l=a(n.videoConstraints);l&&(i=l),r(s(t),s(i))})}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,s=n.audio,o=(n.forceScreenshotSourceSize,n.disablePictureInPicture),l=(n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),c=n.style,d=void 0===c?{}:c,u=n.children,h=i(n,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),A=l?a(a({},d),{transform:(d.transform||"")+" scaleX(-1)"}):d,f={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",a({autoPlay:!0,disablePictureInPicture:o,src:t.src,muted:!s,playsInline:!0,ref:function(t){e.video=t},style:A},h)),u&&u(f))},t.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=l},react:function(t,n){t.exports=e}}).default},e.exports=r(n(9950))},2049:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),A=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function x(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=g.prototype;var b=v.prototype=new x;b.constructor=v,p(b,g.prototype),b.isPureReactComponent=!0;var y=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var s,a={},i=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,s)&&!j.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===a[s]&&(a[s]=l[s]);return{$$typeof:n,type:e,key:i,ref:o,props:a,_owner:N.current}}function B(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function _(e,t,s,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===a?"."+S(l,0):a,y(i)?(s="",null!=e&&(s=e.replace(k,"$&/")+"/"),_(i,t,s,"",function(e){return e})):null!=i&&(B(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(k,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",y(e))for(var c=0;c<e.length;c++){var d=a+S(o=e[c],c);l+=_(o,t,s,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=_(o=o.value,t,s,d=a+S(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function E(e,t,n){if(null==e)return e;var r=[],s=0;return _(e,r,"","",function(e){return t.call(n,e,s++)}),r}function F(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},I={transition:null},D={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:I,ReactCurrentOwner:N};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:E,forEach:function(e,t,n){E(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return E(e,function(){t++}),t},toArray:function(e){return E(e,function(e){return e})||[]},only:function(e){if(!B(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=s,t.Profiler=i,t.PureComponent=v,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=p({},e.props),a=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=N.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!j.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:n,type:e.type,key:a,ref:i,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=B,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:F}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,n){return T.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,n){return T.current.useReducer(e,t,n)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},2284:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},2654:(e,t,n)=>{"use strict";var r=n(9950),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},3826:(e,t,n)=>{"use strict";var r=n(4414),s=n(9950),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},a.apply(this,arguments)};function i(e,t){var n,r;switch(t.type){case"TYPE":return a(a({},e),{speed:t.speed,text:null===(n=t.payload)||void 0===n?void 0:n.substring(0,e.text.length+1)});case"DELAY":return a(a({},e),{speed:t.payload});case"DELETE":return a(a({},e),{speed:t.speed,text:null===(r=t.payload)||void 0===r?void 0:r.substring(0,e.text.length-1)});case"COUNT":return a(a({},e),{count:e.count+1});default:return e}}var o=function(e){var t=e.words,n=void 0===t?["Hello World!","This is","a simple Typewriter"]:t,r=e.loop,a=void 0===r?1:r,o=e.typeSpeed,l=void 0===o?80:o,c=e.deleteSpeed,d=void 0===c?50:c,u=e.delaySpeed,h=void 0===u?1500:u,A=e.onLoopDone,f=e.onType,p=e.onDelete,m=e.onDelay,g=s.useReducer(i,{speed:l,text:"",count:0}),x=g[0],v=x.speed,b=x.text,y=x.count,w=g[1],N=s.useRef(0),j=s.useRef(!1),C=s.useRef(!1),B=s.useRef(!1),k=s.useRef(!1),S=s.useCallback(function(){var e=y%n.length,t=n[e];C.current?(w({type:"DELETE",payload:t,speed:d}),""===b&&(C.current=!1,w({type:"COUNT"}))):(w({type:"TYPE",payload:t,speed:l}),B.current=!0,b===t&&(w({type:"DELAY",payload:h}),B.current=!1,k.current=!0,setTimeout(function(){k.current=!1,C.current=!0},h),a>0&&(N.current+=1,N.current/n.length===a&&(k.current=!1,j.current=!0)))),B.current&&f&&f(N.current),C.current&&p&&p(),k.current&&m&&m()},[y,h,d,a,l,n,b,f,p,m]);return s.useEffect(function(){var e=setTimeout(S,v);return j.current&&clearTimeout(e),function(){return clearTimeout(e)}},[S,v]),s.useEffect(function(){A&&j.current&&A()},[A]),[b,{isType:B.current,isDelay:k.current,isDelete:C.current,isDone:j.current}]};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===n&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}(".styles-module_blinkingCursor__yugAC{color:inherit;font:inherit;left:3px;line-height:inherit;opacity:1;position:relative;top:0}.styles-module_blinking__9VXRT{animation-duration:.8s;animation-iteration-count:infinite;animation-name:styles-module_blink__rqfaf}@keyframes styles-module_blink__rqfaf{0%{opacity:1}to{opacity:0}}");var l=s.memo(function(e){var t=e.cursorBlinking,n=void 0===t||t,s=e.cursorStyle,i=void 0===s?"|":s,o=e.cursorColor,l=void 0===o?"inherit":o;return r.jsx("span",a({style:{color:l},className:"".concat("styles-module_blinkingCursor__yugAC"," ").concat(n?"styles-module_blinking__9VXRT":"")},{children:i}))});t.d1=o},4414:(e,t,n)=>{"use strict";e.exports=n(2654)},4980:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(2284);function s(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=(0,r.A)(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}function a(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},5340:(e,t,n)=>{"use strict";e.exports=n(1761)},5612:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AcroForm:()=>Pa,AcroFormAppearance:()=>Da,AcroFormButton:()=>ka,AcroFormCheckBox:()=>Fa,AcroFormChoiceField:()=>Na,AcroFormComboBox:()=>Ca,AcroFormEditBox:()=>Ba,AcroFormListBox:()=>ja,AcroFormPasswordField:()=>Ia,AcroFormPushButton:()=>Sa,AcroFormRadioButton:()=>_a,AcroFormTextField:()=>Ta,GState:()=>Vs,ShadingPattern:()=>Gs,TilingPattern:()=>qs,default:()=>Xs,jsPDF:()=>Xs});var r=n(2284),s=Uint8Array,a=Uint16Array,i=Int32Array,o=new s([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new s([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new s([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=function(e,t){for(var n=new a(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var s=new i(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)s[o]=o-n[r]<<5|r;return{b:n,r:s}},u=d(o,2),h=u.b,A=u.r;h[28]=258,A[258]=28;for(var f=d(l,0),p=(f.b,f.r),m=new a(32768),g=0;g<32768;++g){var x=(43690&g)>>1|(21845&g)<<1;x=(61680&(x=(52428&x)>>2|(13107&x)<<2))>>4|(3855&x)<<4,m[g]=((65280&x)>>8|(255&x)<<8)>>1}var v=function(e,t,n){for(var r=e.length,s=0,i=new a(t);s<r;++s)e[s]&&++i[e[s]-1];var o,l=new a(t);for(s=1;s<t;++s)l[s]=l[s-1]+i[s-1]<<1;if(n){o=new a(1<<t);var c=15-t;for(s=0;s<r;++s)if(e[s])for(var d=s<<4|e[s],u=t-e[s],h=l[e[s]-1]++<<u,A=h|(1<<u)-1;h<=A;++h)o[m[h]>>c]=d}else for(o=new a(r),s=0;s<r;++s)e[s]&&(o[s]=m[l[e[s]-1]++]>>15-e[s]);return o},b=new s(288);for(g=0;g<144;++g)b[g]=8;for(g=144;g<256;++g)b[g]=9;for(g=256;g<280;++g)b[g]=7;for(g=280;g<288;++g)b[g]=8;var y=new s(32);for(g=0;g<32;++g)y[g]=5;var w=v(b,9,0),N=v(y,5,0),j=function(e){return(e+7)/8|0},C=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new s(e.subarray(t,n))},B=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},k=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},S=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return{t:L,l:0};if(1==i){var l=new s(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var c=n[0],d=n[1],u=0,h=1,A=2;for(n[0]={s:-1,f:c.f+d.f,l:c,r:d};h!=i-1;)c=n[n[u].f<n[A].f?u++:A++],d=n[u!=h&&n[u].f<n[A].f?u++:A++],n[h++]={s:-1,f:c.f+d.f,l:c,r:d};var f=o[0].s;for(r=1;r<i;++r)o[r].s>f&&(f=o[r].s);var p=new a(f+1),m=_(n[h-1],p,0);if(m>t){r=0;var g=0,x=m-t,v=1<<x;for(o.sort(function(e,t){return p[t.s]-p[e.s]||e.f-t.f});r<i;++r){var b=o[r].s;if(!(p[b]>t))break;g+=v-(1<<m-p[b]),p[b]=t}for(g>>=x;g>0;){var y=o[r].s;p[y]<t?g-=1<<t-p[y]++-1:++r}for(;r>=0&&g;--r){var w=o[r].s;p[w]==t&&(--p[w],++g)}m=t}return{t:new s(p),l:m}},_=function(e,t,n){return-1==e.s?Math.max(_(e.l,t,n+1),_(e.r,t,n+1)):t[e.s]=n},E=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new a(++t),r=0,s=e[0],i=1,o=function(e){n[r++]=e},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:n.subarray(0,r),n:t}},F=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},T=function(e,t,n){var r=n.length,s=j(t+2);e[s]=255&r,e[s+1]=r>>8,e[s+2]=255^e[s],e[s+3]=255^e[s+1];for(var a=0;a<r;++a)e[s+a+4]=n[a];return 8*(s+4+r)},I=function(e,t,n,r,s,i,d,u,h,A,f){B(t,f++,n),++s[256];for(var p=S(s,15),m=p.t,g=p.l,x=S(i,15),j=x.t,C=x.l,_=E(m),I=_.c,D=_.n,L=E(j),P=L.c,R=L.n,U=new a(19),O=0;O<I.length;++O)++U[31&I[O]];for(O=0;O<P.length;++O)++U[31&P[O]];for(var M=S(U,7),Q=M.t,H=M.l,z=19;z>4&&!Q[c[z-1]];--z);var W,V,K,G,q=A+5<<3,X=F(s,b)+F(i,y)+d,Y=F(s,m)+F(i,j)+d+14+3*z+F(U,Q)+2*U[16]+3*U[17]+7*U[18];if(h>=0&&q<=X&&q<=Y)return T(t,f,e.subarray(h,h+A));if(B(t,f,1+(Y<X)),f+=2,Y<X){W=v(m,g,0),V=m,K=v(j,C,0),G=j;var J=v(Q,H,0);B(t,f,D-257),B(t,f+5,R-1),B(t,f+10,z-4),f+=14;for(O=0;O<z;++O)B(t,f+3*O,Q[c[O]]);f+=3*z;for(var Z=[I,P],$=0;$<2;++$){var ee=Z[$];for(O=0;O<ee.length;++O){var te=31&ee[O];B(t,f,J[te]),f+=Q[te],te>15&&(B(t,f,ee[O]>>5&127),f+=ee[O]>>12)}}}else W=w,V=b,K=N,G=y;for(O=0;O<u;++O){var ne=r[O];if(ne>255){k(t,f,W[(te=ne>>18&31)+257]),f+=V[te+257],te>7&&(B(t,f,ne>>23&31),f+=o[te]);var re=31&ne;k(t,f,K[re]),f+=G[re],re>3&&(k(t,f,ne>>5&8191),f+=l[re])}else k(t,f,W[ne]),f+=V[ne]}return k(t,f,W[256]),f+V[256]},D=new i([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),L=new s(0),P=function(e,t,n,r,c,d){var u=d.z||e.length,h=new s(r+u+5*(1+Math.ceil(u/7e3))+c),f=h.subarray(r,h.length-c),m=d.l,g=7&(d.r||0);if(t){g&&(f[0]=d.r>>3);for(var x=D[t-1],v=x>>13,b=8191&x,y=(1<<n)-1,w=d.p||new a(32768),N=d.h||new a(y+1),B=Math.ceil(n/3),k=2*B,S=function(t){return(e[t]^e[t+1]<<B^e[t+2]<<k)&y},_=new i(25e3),E=new a(288),F=new a(32),L=0,P=0,R=d.i||0,U=0,O=d.w||0,M=0;R+2<u;++R){var Q=S(R),H=32767&R,z=N[Q];if(w[H]=z,N[Q]=H,O<=R){var W=u-R;if((L>7e3||U>24576)&&(W>423||!m)){g=I(e,f,0,_,E,F,P,U,M,R-M,g),U=L=P=0,M=R;for(var V=0;V<286;++V)E[V]=0;for(V=0;V<30;++V)F[V]=0}var K=2,G=0,q=b,X=H-z&32767;if(W>2&&Q==S(R-X))for(var Y=Math.min(v,W)-1,J=Math.min(32767,R),Z=Math.min(258,W);X<=J&&--q&&H!=z;){if(e[R+K]==e[R+K-X]){for(var $=0;$<Z&&e[R+$]==e[R+$-X];++$);if($>K){if(K=$,G=X,$>Y)break;var ee=Math.min(X,$-2),te=0;for(V=0;V<ee;++V){var ne=R-X+V&32767,re=ne-w[ne]&32767;re>te&&(te=re,z=ne)}}}X+=(H=z)-(z=w[H])&32767}if(G){_[U++]=268435456|A[K]<<18|p[G];var se=31&A[K],ae=31&p[G];P+=o[se]+l[ae],++E[257+se],++F[ae],O=R+K,++L}else _[U++]=e[R],++E[e[R]]}}for(R=Math.max(R,O);R<u;++R)_[U++]=e[R],++E[e[R]];g=I(e,f,m,_,E,F,P,U,M,R-M,g),m||(d.r=7&g|f[g/8|0]<<3,g-=7,d.h=N,d.p=w,d.i=R,d.w=O)}else{for(R=d.w||0;R<u+m;R+=65535){var ie=R+65535;ie>=u&&(f[g/8|0]=m,ie=u),g=T(f,g+1,e.subarray(R,ie))}d.i=u}return C(h,0,r+j(g)+c)},R=function(){var e=1,t=0;return{p:function(n){for(var r=e,s=t,a=0|n.length,i=0;i!=a;){for(var o=Math.min(i+2655,a);i<o;++i)s+=r+=n[i];r=(65535&r)+15*(r>>16),s=(65535&s)+15*(s>>16)}e=r,t=s},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},U=function(e,t,n,r,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new s(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return P(e,null==t.level?6:t.level,null==t.mem?a.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,a)},O=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},M=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=R();s.p(t.dictionary),O(e,2,s.d())}};function Q(e,t){t||(t={});var n=R();n.p(e);var r=U(e,t,t.dictionary?6:2,4);return M(r,t),O(r,r.length-4,n.d()),r}var H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(L,{stream:!0})}catch(Wi){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a,i,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,s=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var V=n(4980);function K(e){return new TextDecoder(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8").decode(e)}const G=new TextEncoder;const q=(()=>{const e=new Uint8Array(4);return!((new Uint32Array(e.buffer)[0]=1)&e[0])})(),X={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Y{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8192,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,V.A)(this,"buffer",void 0),(0,V.A)(this,"byteLength",void 0),(0,V.A)(this,"byteOffset",void 0),(0,V.A)(this,"length",void 0),(0,V.A)(this,"offset",void 0),(0,V.A)(this,"lastWrittenByte",void 0),(0,V.A)(this,"littleEndian",void 0),(0,V.A)(this,"_data",void 0),(0,V.A)(this,"_mark",void 0),(0,V.A)(this,"_marks",void 0);let n=!1;"number"===typeof e?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const r=t.offset?t.offset>>>0:0,s=e.byteLength-r;let a=r;(ArrayBuffer.isView(e)||e instanceof Y)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+r),e=e.buffer),this.lastWrittenByte=n?s:0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+=e,this}back(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(void 0===e)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.available(e)){const t=2*(this.offset+e),n=new Uint8Array(t);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=t,this.byteLength=t,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.readArray(e,"uint8")}readArray(e,t){const n=X[t].BYTES_PER_ELEMENT*e,r=this.byteOffset+this.offset,s=this.buffer.slice(r,r+n);if(this.littleEndian===q&&"uint8"!==t&&"int8"!==t){const e=new Uint8Array(this.buffer.slice(r,r+n));e.reverse();const s=new X[t](e.buffer);return this.offset+=n,s.reverse(),s}const a=new X[t](s);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return K(this.readBytes(e))}decodeText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return K(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(function(e){return G.encode(e)}(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function J(e){let t=e.length;for(;--t>=0;)e[t]=0}const Z=256,$=286,ee=30,te=15,ne=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),re=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),se=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ae=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ie=new Array(576);J(ie);const oe=new Array(60);J(oe);const le=new Array(512);J(le);const ce=new Array(256);J(ce);const de=new Array(29);J(de);const ue=new Array(ee);function he(e,t,n,r,s){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=s,this.has_stree=e&&e.length}let Ae,fe,pe;function me(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}J(ue);const ge=e=>e<256?le[e]:le[256+(e>>>7)],xe=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ve=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,xe(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},be=(e,t,n)=>{ve(e,n[2*t],n[2*t+1])},ye=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},we=(e,t,n)=>{const r=new Array(16);let s,a,i=0;for(s=1;s<=te;s++)i=i+n[s-1]<<1,r[s]=i;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=ye(r[t]++,t))}},Ne=e=>{let t;for(t=0;t<$;t++)e.dyn_ltree[2*t]=0;for(t=0;t<ee;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},je=e=>{e.bi_valid>8?xe(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Ce=(e,t,n,r)=>{const s=2*t,a=2*n;return e[s]<e[a]||e[s]===e[a]&&r[t]<=r[n]},Be=(e,t,n)=>{const r=e.heap[n];let s=n<<1;for(;s<=e.heap_len&&(s<e.heap_len&&Ce(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!Ce(t,r,e.heap[s],e.depth));)e.heap[n]=e.heap[s],n=s,s<<=1;e.heap[n]=r},ke=(e,t,n)=>{let r,s,a,i,o=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+o++],r+=(255&e.pending_buf[e.sym_buf+o++])<<8,s=e.pending_buf[e.sym_buf+o++],0===r?be(e,s,t):(a=ce[s],be(e,a+Z+1,t),i=ne[a],0!==i&&(s-=de[a],ve(e,s,i)),r--,a=ge(r),be(e,a,n),i=re[a],0!==i&&(r-=ue[a],ve(e,r,i)))}while(o<e.sym_next);be(e,256,t)},Se=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.elems;let i,o,l,c=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<a;i++)0!==n[2*i]?(e.heap[++e.heap_len]=c=i,e.depth[i]=0):n[2*i+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,s&&(e.static_len-=r[2*l+1]);for(t.max_code=c,i=e.heap_len>>1;i>=1;i--)Be(e,n,i);l=a;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Be(e,n,1),o=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=o,n[2*l]=n[2*i]+n[2*o],e.depth[l]=(e.depth[i]>=e.depth[o]?e.depth[i]:e.depth[o])+1,n[2*i+1]=n[2*o+1]=l,e.heap[1]=l++,Be(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,i=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,d,u,h,A,f,p=0;for(h=0;h<=te;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)d=e.heap[c],h=n[2*n[2*d+1]+1]+1,h>l&&(h=l,p++),n[2*d+1]=h,d>r||(e.bl_count[h]++,A=0,d>=o&&(A=i[d-o]),f=n[2*d],e.opt_len+=f*(h+A),a&&(e.static_len+=f*(s[2*d+1]+A)));if(0!==p){do{for(h=l-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,p-=2}while(p>0);for(h=l;0!==h;h--)for(d=e.bl_count[h];0!==d;)u=e.heap[--c],u>r||(n[2*u+1]!==h&&(e.opt_len+=(h-n[2*u+1])*n[2*u],n[2*u+1]=h),d--)}})(e,t),we(n,c,e.bl_count)},_e=(e,t,n)=>{let r,s,a=-1,i=t[1],o=0,l=7,c=4;for(0===i&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)s=i,i=t[2*(r+1)+1],++o<l&&s===i||(o<c?e.bl_tree[2*s]+=o:0!==s?(s!==a&&e.bl_tree[2*s]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=s,0===i?(l=138,c=3):s===i?(l=6,c=3):(l=7,c=4))},Ee=(e,t,n)=>{let r,s,a=-1,i=t[1],o=0,l=7,c=4;for(0===i&&(l=138,c=3),r=0;r<=n;r++)if(s=i,i=t[2*(r+1)+1],!(++o<l&&s===i)){if(o<c)do{be(e,s,e.bl_tree)}while(0!==--o);else 0!==s?(s!==a&&(be(e,s,e.bl_tree),o--),be(e,16,e.bl_tree),ve(e,o-3,2)):o<=10?(be(e,17,e.bl_tree),ve(e,o-3,3)):(be(e,18,e.bl_tree),ve(e,o-11,7));o=0,a=s,0===i?(l=138,c=3):s===i?(l=6,c=3):(l=7,c=4)}};let Fe=!1;const Te=(e,t,n,r)=>{ve(e,0+(r?1:0),3),je(e),xe(e,n),xe(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var Ie=e=>{Fe||((()=>{let e,t,n,r,s;const a=new Array(16);for(n=0,r=0;r<28;r++)for(de[r]=n,e=0;e<1<<ne[r];e++)ce[n++]=r;for(ce[n-1]=r,s=0,r=0;r<16;r++)for(ue[r]=s,e=0;e<1<<re[r];e++)le[s++]=r;for(s>>=7;r<ee;r++)for(ue[r]=s<<7,e=0;e<1<<re[r]-7;e++)le[256+s++]=r;for(t=0;t<=te;t++)a[t]=0;for(e=0;e<=143;)ie[2*e+1]=8,e++,a[8]++;for(;e<=255;)ie[2*e+1]=9,e++,a[9]++;for(;e<=279;)ie[2*e+1]=7,e++,a[7]++;for(;e<=287;)ie[2*e+1]=8,e++,a[8]++;for(we(ie,287,a),e=0;e<ee;e++)oe[2*e+1]=5,oe[2*e]=ye(e,5);Ae=new he(ie,ne,257,$,te),fe=new he(oe,re,0,ee,te),pe=new he(new Array(0),se,0,19,7)})(),Fe=!0),e.l_desc=new me(e.dyn_ltree,Ae),e.d_desc=new me(e.dyn_dtree,fe),e.bl_desc=new me(e.bl_tree,pe),e.bi_buf=0,e.bi_valid=0,Ne(e)},De=(e,t,n,r)=>{let s,a,i=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<Z;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),Se(e,e.l_desc),Se(e,e.d_desc),i=(e=>{let t;for(_e(e,e.dyn_ltree,e.l_desc.max_code),_e(e,e.dyn_dtree,e.d_desc.max_code),Se(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*ae[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),s=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=s&&(s=a)):s=a=n+5,n+4<=s&&-1!==t?Te(e,t,n,r):4===e.strategy||a===s?(ve(e,2+(r?1:0),3),ke(e,ie,oe)):(ve(e,4+(r?1:0),3),((e,t,n,r)=>{let s;for(ve(e,t-257,5),ve(e,n-1,5),ve(e,r-4,4),s=0;s<r;s++)ve(e,e.bl_tree[2*ae[s]+1],3);Ee(e,e.dyn_ltree,t-1),Ee(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),ke(e,e.dyn_ltree,e.dyn_dtree)),Ne(e),r&&je(e)},Le=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ce[n]+Z+1)]++,e.dyn_dtree[2*ge(t)]++),e.sym_next===e.sym_end),Pe=e=>{ve(e,2,3),be(e,256,ie),(e=>{16===e.bi_valid?(xe(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},Re={_tr_init:Ie,_tr_stored_block:Te,_tr_flush_block:De,_tr_tally:Le,_tr_align:Pe};var Ue=(e,t,n,r)=>{let s=65535&e,a=e>>>16&65535,i=0;for(;0!==n;){i=n>2e3?2e3:n,n-=i;do{s=s+t[r++]|0,a=a+s|0}while(--i);s%=65521,a%=65521}return s|a<<16};const Oe=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Me=(e,t,n,r)=>{const s=Oe,a=r+n;e^=-1;for(let i=r;i<a;i++)e=e>>>8^s[255&(e^t[i])];return-1^e},Qe={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},He={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ze,_tr_stored_block:We,_tr_flush_block:Ve,_tr_tally:Ke,_tr_align:Ge}=Re,{Z_NO_FLUSH:qe,Z_PARTIAL_FLUSH:Xe,Z_FULL_FLUSH:Ye,Z_FINISH:Je,Z_BLOCK:Ze,Z_OK:$e,Z_STREAM_END:et,Z_STREAM_ERROR:tt,Z_DATA_ERROR:nt,Z_BUF_ERROR:rt,Z_DEFAULT_COMPRESSION:st,Z_FILTERED:at,Z_HUFFMAN_ONLY:it,Z_RLE:ot,Z_FIXED:lt,Z_DEFAULT_STRATEGY:ct,Z_UNKNOWN:dt,Z_DEFLATED:ut}=He,ht=258,At=262,ft=42,pt=113,mt=666,gt=(e,t)=>(e.msg=Qe[t],t),xt=e=>2*e-(e>4?9:0),vt=e=>{let t=e.length;for(;--t>=0;)e[t]=0},bt=e=>{let t,n,r,s=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=s?n-s:0}while(--t);t=s,r=t;do{n=e.prev[--r],e.prev[r]=n>=s?n-s:0}while(--t)};let yt=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const wt=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Nt=(e,t)=>{Ve(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,wt(e.strm)},jt=(e,t)=>{e.pending_buf[e.pending++]=t},Ct=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Bt=(e,t,n,r)=>{let s=e.avail_in;return s>r&&(s=r),0===s?0:(e.avail_in-=s,t.set(e.input.subarray(e.next_in,e.next_in+s),n),1===e.state.wrap?e.adler=Ue(e.adler,t,s,n):2===e.state.wrap&&(e.adler=Me(e.adler,t,s,n)),e.next_in+=s,e.total_in+=s,s)},kt=(e,t)=>{let n,r,s=e.max_chain_length,a=e.strstart,i=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-At?e.strstart-(e.w_size-At):0,c=e.window,d=e.w_mask,u=e.prev,h=e.strstart+ht;let A=c[a+i-1],f=c[a+i];e.prev_length>=e.good_match&&(s>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,c[n+i]===f&&c[n+i-1]===A&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<h);if(r=ht-(h-a),a=h-ht,r>i){if(e.match_start=t,i=r,r>=o)break;A=c[a+i-1],f=c[a+i]}}}while((t=u[t&d])>l&&0!==--s);return i<=e.lookahead?i:e.lookahead},St=e=>{const t=e.w_size;let n,r,s;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-At)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),bt(e),r+=t),0===e.strm.avail_in)break;if(n=Bt(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=yt(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=yt(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<At&&0!==e.strm.avail_in)},_t=(e,t)=>{let n,r,s,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,i=0,o=e.strm.avail_in;do{if(n=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s)break;if(s=e.strm.avail_out-s,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>s&&(n=s),n<a&&(0===n&&t!==Je||t===qe||n!==r+e.strm.avail_in))break;i=t===Je&&n===r+e.strm.avail_in?1:0,We(e,0,0,i),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,wt(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Bt(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===i);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),i?4:t!==qe&&t!==Je&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(Bt(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,a=s>e.w_size?e.w_size:s,r=e.strstart-e.block_start,(r>=a||(r||t===Je)&&t!==qe&&0===e.strm.avail_in&&r<=s)&&(n=r>s?s:r,i=t===Je&&0===e.strm.avail_in&&n===r?1:0,We(e,e.block_start,n,i),e.block_start+=n,wt(e.strm)),i?3:1)},Et=(e,t)=>{let n,r;for(;;){if(e.lookahead<At){if(St(e),e.lookahead<At&&t===qe)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=yt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-At&&(e.match_length=kt(e,n)),e.match_length>=3)if(r=Ke(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=yt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=yt(e,e.ins_h,e.window[e.strstart+1]);else r=Ke(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Nt(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Je?(Nt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Nt(e,!1),0===e.strm.avail_out)?1:2},Ft=(e,t)=>{let n,r,s;for(;;){if(e.lookahead<At){if(St(e),e.lookahead<At&&t===qe)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=yt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-At&&(e.match_length=kt(e,n),e.match_length<=5&&(e.strategy===at||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-3,r=Ke(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=s&&(e.ins_h=yt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Nt(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=Ke(e,0,e.window[e.strstart-1]),r&&Nt(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Ke(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Je?(Nt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Nt(e,!1),0===e.strm.avail_out)?1:2};function Tt(e,t,n,r,s){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=s}const It=[new Tt(0,0,0,0,_t),new Tt(4,4,8,4,Et),new Tt(4,5,16,8,Et),new Tt(4,6,32,32,Et),new Tt(4,4,16,16,Ft),new Tt(8,16,32,32,Ft),new Tt(8,16,128,128,Ft),new Tt(8,32,128,256,Ft),new Tt(32,128,258,1024,Ft),new Tt(32,258,258,4096,Ft)];function Dt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ut,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),vt(this.dyn_ltree),vt(this.dyn_dtree),vt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),vt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),vt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Lt=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==ft&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==pt&&t.status!==mt?1:0},Pt=e=>{if(Lt(e))return gt(e,tt);e.total_in=e.total_out=0,e.data_type=dt;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?ft:pt,e.adler=2===t.wrap?0:1,t.last_flush=-2,ze(t),$e},Rt=e=>{const t=Pt(e);return t===$e&&(e=>{e.window_size=2*e.w_size,vt(e.head),e.max_lazy_match=It[e.level].max_lazy,e.good_match=It[e.level].good_length,e.nice_match=It[e.level].nice_length,e.max_chain_length=It[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},Ut=(e,t,n,r,s,a)=>{if(!e)return tt;let i=1;if(t===st&&(t=6),r<0?(i=0,r=-r):r>15&&(i=2,r-=16),s<1||s>9||n!==ut||r<8||r>15||t<0||t>9||a<0||a>lt||8===r&&1!==i)return gt(e,tt);8===r&&(r=9);const o=new Dt;return e.state=o,o.strm=e,o.status=ft,o.wrap=i,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=a,o.method=n,Rt(e)};var Ot=(e,t)=>{if(Lt(e)||t>Ze||t<0)return e?gt(e,tt):tt;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===mt&&t!==Je)return gt(e,0===e.avail_out?rt:tt);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(wt(e),0===e.avail_out)return n.last_flush=-1,$e}else if(0===e.avail_in&&xt(t)<=xt(r)&&t!==Je)return gt(e,rt);if(n.status===mt&&0!==e.avail_in)return gt(e,rt);if(n.status===ft&&0===n.wrap&&(n.status=pt),n.status===ft){let t=ut+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=it||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,Ct(n,t),0!==n.strstart&&(Ct(n,e.adler>>>16),Ct(n,65535&e.adler)),e.adler=1,n.status=pt,wt(e),0!==n.pending)return n.last_flush=-1,$e}if(57===n.status)if(e.adler=0,jt(n,31),jt(n,139),jt(n,8),n.gzhead)jt(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),jt(n,255&n.gzhead.time),jt(n,n.gzhead.time>>8&255),jt(n,n.gzhead.time>>16&255),jt(n,n.gzhead.time>>24&255),jt(n,9===n.level?2:n.strategy>=it||n.level<2?4:0),jt(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(jt(n,255&n.gzhead.extra.length),jt(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Me(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(jt(n,0),jt(n,0),jt(n,0),jt(n,0),jt(n,0),jt(n,9===n.level?2:n.strategy>=it||n.level<2?4:0),jt(n,3),n.status=pt,wt(e),0!==n.pending)return n.last_flush=-1,$e;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=Me(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=s,wt(e),0!==n.pending)return n.last_flush=-1,$e;t=0,r-=s}let s=new Uint8Array(n.gzhead.extra);n.pending_buf.set(s.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=Me(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Me(e.adler,n.pending_buf,n.pending-r,r)),wt(e),0!==n.pending)return n.last_flush=-1,$e;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,jt(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Me(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Me(e.adler,n.pending_buf,n.pending-r,r)),wt(e),0!==n.pending)return n.last_flush=-1,$e;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,jt(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Me(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(wt(e),0!==n.pending))return n.last_flush=-1,$e;jt(n,255&e.adler),jt(n,e.adler>>8&255),e.adler=0}if(n.status=pt,wt(e),0!==n.pending)return n.last_flush=-1,$e}if(0!==e.avail_in||0!==n.lookahead||t!==qe&&n.status!==mt){let r=0===n.level?_t(n,t):n.strategy===it?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(St(e),0===e.lookahead)){if(t===qe)return 1;break}if(e.match_length=0,n=Ke(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Nt(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Je?(Nt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Nt(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===ot?((e,t)=>{let n,r,s,a;const i=e.window;for(;;){if(e.lookahead<=ht){if(St(e),e.lookahead<=ht&&t===qe)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(s=e.strstart-1,r=i[s],r===i[++s]&&r===i[++s]&&r===i[++s])){a=e.strstart+ht;do{}while(r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&s<a);e.match_length=ht-(a-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Ke(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ke(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Nt(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Je?(Nt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Nt(e,!1),0===e.strm.avail_out)?1:2})(n,t):It[n.level].func(n,t);if(3!==r&&4!==r||(n.status=mt),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),$e;if(2===r&&(t===Xe?Ge(n):t!==Ze&&(We(n,0,0,!1),t===Ye&&(vt(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),wt(e),0===e.avail_out))return n.last_flush=-1,$e}return t!==Je?$e:n.wrap<=0?et:(2===n.wrap?(jt(n,255&e.adler),jt(n,e.adler>>8&255),jt(n,e.adler>>16&255),jt(n,e.adler>>24&255),jt(n,255&e.total_in),jt(n,e.total_in>>8&255),jt(n,e.total_in>>16&255),jt(n,e.total_in>>24&255)):(Ct(n,e.adler>>>16),Ct(n,65535&e.adler)),wt(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?$e:et)},Mt=(e,t)=>{let n=t.length;if(Lt(e))return tt;const r=e.state,s=r.wrap;if(2===s||1===s&&r.status!==ft||r.lookahead)return tt;if(1===s&&(e.adler=Ue(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===s&&(vt(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const a=e.avail_in,i=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,St(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=yt(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,St(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=i,e.input=o,e.avail_in=a,r.wrap=s,$e},Qt={deflateInit:(e,t)=>Ut(e,t,ut,15,8,ct),deflateInit2:Ut,deflateReset:Rt,deflateResetKeep:Pt,deflateSetHeader:(e,t)=>Lt(e)||2!==e.state.wrap?tt:(e.state.gzhead=t,$e),deflate:Ot,deflateEnd:e=>{if(Lt(e))return tt;const t=e.state.status;return e.state=null,t===pt?gt(e,nt):$e},deflateSetDictionary:Mt,deflateInfo:"pako deflate (from Nodeca project)"};const Ht=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var zt=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Ht(n,t)&&(e[t]=n[t])}}return e},Wt=e=>{let t=0;for(let r=0,s=e.length;r<s;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,s=0,a=e.length;r<a;r++){let t=e[r];n.set(t,s),s+=t.length}return n};let Vt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Vi){Vt=!1}const Kt=new Uint8Array(256);for(let Ki=0;Ki<256;Ki++)Kt[Ki]=Ki>=252?6:Ki>=248?5:Ki>=240?4:Ki>=224?3:Ki>=192?2:1;Kt[254]=Kt[254]=1;var Gt=e=>{if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,s,a,i=e.length,o=0;for(s=0;s<i;s++)n=e.charCodeAt(s),55296===(64512&n)&&s+1<i&&(r=e.charCodeAt(s+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),s++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),a=0,s=0;a<o;s++)n=e.charCodeAt(s),55296===(64512&n)&&s+1<i&&(r=e.charCodeAt(s+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),s++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},qt=(e,t)=>{const n=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,s;const a=new Array(2*n);for(s=0,r=0;r<n;){let t=e[r++];if(t<128){a[s++]=t;continue}let i=Kt[t];if(i>4)a[s++]=65533,r+=i-1;else{for(t&=2===i?31:3===i?15:7;i>1&&r<n;)t=t<<6|63&e[r++],i--;i>1?a[s++]=65533:t<65536?a[s++]=t:(t-=65536,a[s++]=55296|t>>10&1023,a[s++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Vt)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(a,s)},Xt=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128===(192&e[n]);)n--;return n<0||0===n?t:n+Kt[e[n]]>t?n:t};var Yt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Jt=Object.prototype.toString,{Z_NO_FLUSH:Zt,Z_SYNC_FLUSH:$t,Z_FULL_FLUSH:en,Z_FINISH:tn,Z_OK:nn,Z_STREAM_END:rn,Z_DEFAULT_COMPRESSION:sn,Z_DEFAULT_STRATEGY:an,Z_DEFLATED:on}=He;function ln(e){this.options=zt({level:sn,method:on,chunkSize:16384,windowBits:15,memLevel:8,strategy:an},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Yt,this.strm.avail_out=0;let n=Qt.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==nn)throw new Error(Qe[n]);if(t.header&&Qt.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"===typeof t.dictionary?Gt(t.dictionary):"[object ArrayBuffer]"===Jt.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Qt.deflateSetDictionary(this.strm,e),n!==nn)throw new Error(Qe[n]);this._dict_set=!0}}function cn(e,t){const n=new ln(t);if(n.push(e,!0),n.err)throw n.msg||Qe[n.err];return n.result}ln.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let s,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?tn:Zt,"string"===typeof e?n.input=Gt(e):"[object ArrayBuffer]"===Jt.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===$t||a===en)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(s=Qt.deflate(n,a),s===rn)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),s=Qt.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===nn;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},ln.prototype.onData=function(e){this.chunks.push(e)},ln.prototype.onEnd=function(e){e===nn&&(this.result=Wt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var dn={Deflate:ln,deflate:cn,deflateRaw:function(e,t){return(t=t||{}).raw=!0,cn(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,cn(e,t)},constants:He};const un=16209;var hn=function(e,t){let n,r,s,a,i,o,l,c,d,u,h,A,f,p,m,g,x,v,b,y,w,N,j,C;const B=e.state;n=e.next_in,j=e.input,r=n+(e.avail_in-5),s=e.next_out,C=e.output,a=s-(t-e.avail_out),i=s+(e.avail_out-257),o=B.dmax,l=B.wsize,c=B.whave,d=B.wnext,u=B.window,h=B.hold,A=B.bits,f=B.lencode,p=B.distcode,m=(1<<B.lenbits)-1,g=(1<<B.distbits)-1;e:do{A<15&&(h+=j[n++]<<A,A+=8,h+=j[n++]<<A,A+=8),x=f[h&m];t:for(;;){if(v=x>>>24,h>>>=v,A-=v,v=x>>>16&255,0===v)C[s++]=65535&x;else{if(!(16&v)){if(0===(64&v)){x=f[(65535&x)+(h&(1<<v)-1)];continue t}if(32&v){B.mode=16191;break e}e.msg="invalid literal/length code",B.mode=un;break e}b=65535&x,v&=15,v&&(A<v&&(h+=j[n++]<<A,A+=8),b+=h&(1<<v)-1,h>>>=v,A-=v),A<15&&(h+=j[n++]<<A,A+=8,h+=j[n++]<<A,A+=8),x=p[h&g];n:for(;;){if(v=x>>>24,h>>>=v,A-=v,v=x>>>16&255,!(16&v)){if(0===(64&v)){x=p[(65535&x)+(h&(1<<v)-1)];continue n}e.msg="invalid distance code",B.mode=un;break e}if(y=65535&x,v&=15,A<v&&(h+=j[n++]<<A,A+=8,A<v&&(h+=j[n++]<<A,A+=8)),y+=h&(1<<v)-1,y>o){e.msg="invalid distance too far back",B.mode=un;break e}if(h>>>=v,A-=v,v=s-a,y>v){if(v=y-v,v>c&&B.sane){e.msg="invalid distance too far back",B.mode=un;break e}if(w=0,N=u,0===d){if(w+=l-v,v<b){b-=v;do{C[s++]=u[w++]}while(--v);w=s-y,N=C}}else if(d<v){if(w+=l+d-v,v-=d,v<b){b-=v;do{C[s++]=u[w++]}while(--v);if(w=0,d<b){v=d,b-=v;do{C[s++]=u[w++]}while(--v);w=s-y,N=C}}}else if(w+=d-v,v<b){b-=v;do{C[s++]=u[w++]}while(--v);w=s-y,N=C}for(;b>2;)C[s++]=N[w++],C[s++]=N[w++],C[s++]=N[w++],b-=3;b&&(C[s++]=N[w++],b>1&&(C[s++]=N[w++]))}else{w=s-y;do{C[s++]=C[w++],C[s++]=C[w++],C[s++]=C[w++],b-=3}while(b>2);b&&(C[s++]=C[w++],b>1&&(C[s++]=C[w++]))}break}}break}}while(n<r&&s<i);b=A>>3,n-=b,A-=b<<3,h&=(1<<A)-1,e.next_in=n,e.next_out=s,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=s<i?i-s+257:257-(s-i),B.hold=h,B.bits=A};const An=15,fn=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),pn=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),mn=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),gn=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var xn=(e,t,n,r,s,a,i,o)=>{const l=o.bits;let c,d,u,h,A,f,p=0,m=0,g=0,x=0,v=0,b=0,y=0,w=0,N=0,j=0,C=null;const B=new Uint16Array(16),k=new Uint16Array(16);let S,_,E,F=null;for(p=0;p<=An;p++)B[p]=0;for(m=0;m<r;m++)B[t[n+m]]++;for(v=l,x=An;x>=1&&0===B[x];x--);if(v>x&&(v=x),0===x)return s[a++]=20971520,s[a++]=20971520,o.bits=1,0;for(g=1;g<x&&0===B[g];g++);for(v<g&&(v=g),w=1,p=1;p<=An;p++)if(w<<=1,w-=B[p],w<0)return-1;if(w>0&&(0===e||1!==x))return-1;for(k[1]=0,p=1;p<An;p++)k[p+1]=k[p]+B[p];for(m=0;m<r;m++)0!==t[n+m]&&(i[k[t[n+m]]++]=m);if(0===e?(C=F=i,f=20):1===e?(C=fn,F=pn,f=257):(C=mn,F=gn,f=0),j=0,m=0,p=g,A=a,b=v,y=0,u=-1,N=1<<v,h=N-1,1===e&&N>852||2===e&&N>592)return 1;for(;;){S=p-y,i[m]+1<f?(_=0,E=i[m]):i[m]>=f?(_=F[i[m]-f],E=C[i[m]-f]):(_=96,E=0),c=1<<p-y,d=1<<b,g=d;do{d-=c,s[A+(j>>y)+d]=S<<24|_<<16|E}while(0!==d);for(c=1<<p-1;j&c;)c>>=1;if(0!==c?(j&=c-1,j+=c):j=0,m++,0===--B[p]){if(p===x)break;p=t[n+i[m]]}if(p>v&&(j&h)!==u){for(0===y&&(y=v),A+=g,b=p-y,w=1<<b;b+y<x&&(w-=B[b+y],!(w<=0));)b++,w<<=1;if(N+=1<<b,1===e&&N>852||2===e&&N>592)return 1;u=j&h,s[u]=v<<24|b<<16|A-a}}return 0!==j&&(s[A+j]=p-y<<24|64<<16),o.bits=v,0};const{Z_FINISH:vn,Z_BLOCK:bn,Z_TREES:yn,Z_OK:wn,Z_STREAM_END:Nn,Z_NEED_DICT:jn,Z_STREAM_ERROR:Cn,Z_DATA_ERROR:Bn,Z_MEM_ERROR:kn,Z_BUF_ERROR:Sn,Z_DEFLATED:_n}=He,En=16180,Fn=16190,Tn=16191,In=16192,Dn=16194,Ln=16199,Pn=16200,Rn=16206,Un=16209,On=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Mn(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Qn=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<En||t.mode>16211?1:0},Hn=e=>{if(Qn(e))return Cn;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=En,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,wn},zn=e=>{if(Qn(e))return Cn;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Hn(e)},Wn=(e,t)=>{let n;if(Qn(e))return Cn;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Cn:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,zn(e))},Vn=(e,t)=>{if(!e)return Cn;const n=new Mn;e.state=n,n.strm=e,n.window=null,n.mode=En;const r=Wn(e,t);return r!==wn&&(e.state=null),r};let Kn,Gn,qn=!0;const Xn=e=>{if(qn){Kn=new Int32Array(512),Gn=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(xn(1,e.lens,0,288,Kn,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;xn(2,e.lens,0,32,Gn,0,e.work,{bits:5}),qn=!1}e.lencode=Kn,e.lenbits=9,e.distcode=Gn,e.distbits=5},Yn=(e,t,n,r)=>{let s;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>r&&(s=r),a.window.set(t.subarray(n-r,n-r+s),a.wnext),(r-=s)?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0};var Jn=(e,t)=>{let n,r,s,a,i,o,l,c,d,u,h,A,f,p,m,g,x,v,b,y,w,N,j=0;const C=new Uint8Array(4);let B,k;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Qn(e)||!e.output||!e.input&&0!==e.avail_in)return Cn;n=e.state,n.mode===Tn&&(n.mode=In),i=e.next_out,s=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,c=n.hold,d=n.bits,u=o,h=l,N=wn;e:for(;;)switch(n.mode){case En:if(0===n.wrap){n.mode=In;break}for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,C[0]=255&c,C[1]=c>>>8&255,n.check=Me(n.check,C,2,0),c=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Un;break}if((15&c)!==_n){e.msg="unknown compression method",n.mode=Un;break}if(c>>>=4,d-=4,w=8+(15&c),0===n.wbits&&(n.wbits=w),w>15||w>n.wbits){e.msg="invalid window size",n.mode=Un;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:Tn,c=0,d=0;break;case 16181:for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(n.flags=c,(255&n.flags)!==_n){e.msg="unknown compression method",n.mode=Un;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Un;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Me(n.check,C,2,0)),c=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,n.check=Me(n.check,C,4,0)),c=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Me(n.check,C,2,0)),c=0,d=0,n.mode=16184;case 16184:if(1024&n.flags){for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Me(n.check,C,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(A=n.length,A>o&&(A=o),A&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+A),w)),512&n.flags&&4&n.wrap&&(n.check=Me(n.check,r,A,a)),o-=A,a+=A,n.length-=A),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break e;A=0;do{w=r[a+A++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&A<o);if(512&n.flags&&4&n.wrap&&(n.check=Me(n.check,r,A,a)),o-=A,a+=A,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break e;A=0;do{w=r[a+A++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&A<o);if(512&n.flags&&4&n.wrap&&(n.check=Me(n.check,r,A,a)),o-=A,a+=A,w)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Un;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Tn;break;case 16189:for(;d<32;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}e.adler=n.check=On(c),c=0,d=0,n.mode=Fn;case Fn:if(0===n.havedict)return e.next_out=i,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=c,n.bits=d,jn;e.adler=n.check=1,n.mode=Tn;case Tn:if(t===bn||t===yn)break e;case In:if(n.last){c>>>=7&d,d-=7&d,n.mode=Rn;break}for(;d<3;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}switch(n.last=1&c,c>>>=1,d-=1,3&c){case 0:n.mode=16193;break;case 1:if(Xn(n),n.mode=Ln,t===yn){c>>>=2,d-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Un}c>>>=2,d-=2;break;case 16193:for(c>>>=7&d,d-=7&d;d<32;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if((65535&c)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Un;break}if(n.length=65535&c,c=0,d=0,n.mode=Dn,t===yn)break e;case Dn:n.mode=16195;case 16195:if(A=n.length,A){if(A>o&&(A=o),A>l&&(A=l),0===A)break e;s.set(r.subarray(a,a+A),i),o-=A,a+=A,l-=A,i+=A,n.length-=A;break}n.mode=Tn;break;case 16196:for(;d<14;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(n.nlen=257+(31&c),c>>>=5,d-=5,n.ndist=1+(31&c),c>>>=5,d-=5,n.ncode=4+(15&c),c>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Un;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.lens[S[n.have++]]=7&c,c>>>=3,d-=3}for(;n.have<19;)n.lens[S[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,B={bits:n.lenbits},N=xn(0,n.lens,0,19,n.lencode,0,n.work,B),n.lenbits=B.bits,N){e.msg="invalid code lengths set",n.mode=Un;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;j=n.lencode[c&(1<<n.lenbits)-1],m=j>>>24,g=j>>>16&255,x=65535&j,!(m<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(x<16)c>>>=m,d-=m,n.lens[n.have++]=x;else{if(16===x){for(k=m+2;d<k;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(c>>>=m,d-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=Un;break}w=n.lens[n.have-1],A=3+(3&c),c>>>=2,d-=2}else if(17===x){for(k=m+3;d<k;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}c>>>=m,d-=m,w=0,A=3+(7&c),c>>>=3,d-=3}else{for(k=m+7;d<k;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}c>>>=m,d-=m,w=0,A=11+(127&c),c>>>=7,d-=7}if(n.have+A>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Un;break}for(;A--;)n.lens[n.have++]=w}}if(n.mode===Un)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Un;break}if(n.lenbits=9,B={bits:n.lenbits},N=xn(1,n.lens,0,n.nlen,n.lencode,0,n.work,B),n.lenbits=B.bits,N){e.msg="invalid literal/lengths set",n.mode=Un;break}if(n.distbits=6,n.distcode=n.distdyn,B={bits:n.distbits},N=xn(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,B),n.distbits=B.bits,N){e.msg="invalid distances set",n.mode=Un;break}if(n.mode=Ln,t===yn)break e;case Ln:n.mode=Pn;case Pn:if(o>=6&&l>=258){e.next_out=i,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=c,n.bits=d,hn(e,h),i=e.next_out,s=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,c=n.hold,d=n.bits,n.mode===Tn&&(n.back=-1);break}for(n.back=0;j=n.lencode[c&(1<<n.lenbits)-1],m=j>>>24,g=j>>>16&255,x=65535&j,!(m<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(g&&0===(240&g)){for(v=m,b=g,y=x;j=n.lencode[y+((c&(1<<v+b)-1)>>v)],m=j>>>24,g=j>>>16&255,x=65535&j,!(v+m<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}c>>>=v,d-=v,n.back+=v}if(c>>>=m,d-=m,n.back+=m,n.length=x,0===g){n.mode=16205;break}if(32&g){n.back=-1,n.mode=Tn;break}if(64&g){e.msg="invalid literal/length code",n.mode=Un;break}n.extra=15&g,n.mode=16201;case 16201:if(n.extra){for(k=n.extra;d<k;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;j=n.distcode[c&(1<<n.distbits)-1],m=j>>>24,g=j>>>16&255,x=65535&j,!(m<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(0===(240&g)){for(v=m,b=g,y=x;j=n.distcode[y+((c&(1<<v+b)-1)>>v)],m=j>>>24,g=j>>>16&255,x=65535&j,!(v+m<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}c>>>=v,d-=v,n.back+=v}if(c>>>=m,d-=m,n.back+=m,64&g){e.msg="invalid distance code",n.mode=Un;break}n.offset=x,n.extra=15&g,n.mode=16203;case 16203:if(n.extra){for(k=n.extra;d<k;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Un;break}n.mode=16204;case 16204:if(0===l)break e;if(A=h-l,n.offset>A){if(A=n.offset-A,A>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Un;break}A>n.wnext?(A-=n.wnext,f=n.wsize-A):f=n.wnext-A,A>n.length&&(A=n.length),p=n.window}else p=s,f=i-n.offset,A=n.length;A>l&&(A=l),l-=A,n.length-=A;do{s[i++]=p[f++]}while(--A);0===n.length&&(n.mode=Pn);break;case 16205:if(0===l)break e;s[i++]=n.length,l--,n.mode=Pn;break;case Rn:if(n.wrap){for(;d<32;){if(0===o)break e;o--,c|=r[a++]<<d,d+=8}if(h-=l,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?Me(n.check,s,h,i-h):Ue(n.check,s,h,i-h)),h=l,4&n.wrap&&(n.flags?c:On(c))!==n.check){e.msg="incorrect data check",n.mode=Un;break}c=0,d=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;d<32;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Un;break}c=0,d=0}n.mode=16208;case 16208:N=Nn;break e;case Un:N=Bn;break e;case 16210:return kn;default:return Cn}return e.next_out=i,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=c,n.bits=d,(n.wsize||h!==e.avail_out&&n.mode<Un&&(n.mode<Rn||t!==vn))&&Yn(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?Me(n.check,s,h,e.next_out-h):Ue(n.check,s,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Tn?128:0)+(n.mode===Ln||n.mode===Dn?256:0),(0===u&&0===h||t===vn)&&N===wn&&(N=Sn),N},Zn={inflateReset:zn,inflateReset2:Wn,inflateResetKeep:Hn,inflateInit:e=>Vn(e,15),inflateInit2:Vn,inflate:Jn,inflateEnd:e=>{if(Qn(e))return Cn;let t=e.state;return t.window&&(t.window=null),e.state=null,wn},inflateGetHeader:(e,t)=>{if(Qn(e))return Cn;const n=e.state;return 0===(2&n.wrap)?Cn:(n.head=t,t.done=!1,wn)},inflateSetDictionary:(e,t)=>{const n=t.length;let r,s,a;return Qn(e)?Cn:(r=e.state,0!==r.wrap&&r.mode!==Fn?Cn:r.mode===Fn&&(s=1,s=Ue(s,t,n,0),s!==r.check)?Bn:(a=Yn(e,t,n,n),a?(r.mode=16210,kn):(r.havedict=1,wn)))},inflateInfo:"pako inflate (from Nodeca project)"};var $n=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const er=Object.prototype.toString,{Z_NO_FLUSH:tr,Z_FINISH:nr,Z_OK:rr,Z_STREAM_END:sr,Z_NEED_DICT:ar,Z_STREAM_ERROR:ir,Z_DATA_ERROR:or,Z_MEM_ERROR:lr}=He;function cr(e){this.options=zt({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Yt,this.strm.avail_out=0;let n=Zn.inflateInit2(this.strm,t.windowBits);if(n!==rr)throw new Error(Qe[n]);if(this.header=new $n,Zn.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=Gt(t.dictionary):"[object ArrayBuffer]"===er.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Zn.inflateSetDictionary(this.strm,t.dictionary),n!==rr)))throw new Error(Qe[n])}function dr(e,t){const n=new cr(t);if(n.push(e),n.err)throw n.msg||Qe[n.err];return n.result}cr.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let a,i,o;if(this.ended)return!1;for(i=t===~~t?t:!0===t?nr:tr,"[object ArrayBuffer]"===er.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Zn.inflate(n,i),a===ar&&s&&(a=Zn.inflateSetDictionary(n,s),a===rr?a=Zn.inflate(n,i):a===or&&(a=ar));n.avail_in>0&&a===sr&&n.state.wrap>0&&0!==e[n.next_in];)Zn.inflateReset(n),a=Zn.inflate(n,i);switch(a){case ir:case or:case ar:case lr:return this.onEnd(a),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||a===sr))if("string"===this.options.to){let e=Xt(n.output,n.next_out),t=n.next_out-e,s=qt(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(s)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==rr||0!==o){if(a===sr)return a=Zn.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},cr.prototype.onData=function(e){this.chunks.push(e)},cr.prototype.onEnd=function(e){e===rr&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Wt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ur={Inflate:cr,inflate:dr,inflateRaw:function(e,t){return(t=t||{}).raw=!0,dr(e,t)},ungzip:dr,constants:He};const{Deflate:hr,deflate:Ar,deflateRaw:fr,gzip:pr}=dn,{Inflate:mr,inflate:gr,inflateRaw:xr,ungzip:vr}=ur;var br=mr,yr=gr;const wr=[];for(let Ki=0;Ki<256;Ki++){let e=Ki;for(let t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;wr[Ki]=e}const Nr=4294967295;function jr(e,t){return(function(e,t,n){let r=e;for(let s=0;s<n;s++)r=wr[255&(r^t[s])]^r>>>8;return r}(Nr,e,t)^Nr)>>>0}function Cr(e,t,n){const r=e.readUint32(),s=jr(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(s!==r)throw new Error("CRC mismatch for chunk ".concat(n,". Expected ").concat(r,", found ").concat(s))}function Br(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function kr(e,t,n,r){let s=0;for(;s<r;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+t[s-r]&255}function Sr(e,t,n,r){let s=0;if(0===n.length)for(;s<r;s++)t[s]=e[s];else for(;s<r;s++)t[s]=e[s]+n[s]&255}function _r(e,t,n,r,s){let a=0;if(0===n.length){for(;a<s;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+(t[a-s]>>1)&255}else{for(;a<s;a++)t[a]=e[a]+(n[a]>>1)&255;for(;a<r;a++)t[a]=e[a]+(t[a-s]+n[a]>>1)&255}}function Er(e,t,n,r,s){let a=0;if(0===n.length){for(;a<s;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-s]&255}else{for(;a<s;a++)t[a]=e[a]+n[a]&255;for(;a<r;a++)t[a]=e[a]+Fr(t[a-s],n[a],n[a-s])&255}}function Fr(e,t,n){const r=e+t-n,s=Math.abs(r-e),a=Math.abs(r-t),i=Math.abs(r-n);return s<=a&&s<=i?e:a<=i?t:n}function Tr(e,t,n,r,s,a){switch(e){case 0:Br(t,n,s);break;case 1:kr(t,n,s,a);break;case 2:Sr(t,n,r,s);break;case 3:_r(t,n,r,s,a);break;case 4:Er(t,n,r,s,a);break;default:throw new Error("Unsupported filter: ".concat(e))}}const Ir=new Uint16Array([255]),Dr=255===new Uint8Array(Ir.buffer)[0];function Lr(e){return(255&e)<<8|e>>8&255}const Pr=new Uint16Array([255]),Rr=255===new Uint8Array(Pr.buffer)[0],Ur=new Uint8Array(0);function Or(e){const{data:t,width:n,height:r,channels:s,depth:a}=e,i=Math.ceil(a/8)*s,o=Math.ceil(a/8*s*n),l=new Uint8Array(r*o);let c,d,u=Ur,h=0;for(let A=0;A<r;A++){switch(c=t.subarray(h+1,h+1+o),d=l.subarray(A*o,(A+1)*o),t[h]){case 0:Br(c,d,o);break;case 1:kr(c,d,o,i);break;case 2:Sr(c,d,u,o);break;case 3:_r(c,d,u,o,i);break;case 4:Er(c,d,u,o,i);break;default:throw new Error("Unsupported filter: ".concat(t[h]))}u=d,h+=o+1}if(16===a){const e=new Uint16Array(l.buffer);if(Rr)for(let t=0;t<e.length;t++)e[t]=Mr(e[t]);return e}return l}function Mr(e){return(255&e)<<8|e>>8&255}const Qr=Uint8Array.of(137,80,78,71,13,10,26,10);function Hr(e){if(!function(e){if(e.length<Qr.length)return!1;for(let t=0;t<Qr.length;t++)if(e[t]!==Qr[t])return!1;return!0}(e.readBytes(Qr.length)))throw new Error("wrong PNG signature")}const zr="tEXt",Wr=new TextDecoder("latin1");function Vr(e){if(Gr(e),0===e.length||e.length>79)throw new Error("keyword length must be between 1 and 79")}const Kr=/^[\u0000-\u00FF]*$/;function Gr(e){if(!Kr.test(e))throw new Error("invalid latin1 text")}function qr(e,t,n){const r=Xr(t);e[r]=function(e,t){return Wr.decode(e.readBytes(t))}(t,n-r.length-1)}function Xr(e){for(e.mark();0!==e.readByte(););const t=e.offset;e.reset();const n=Wr.decode(e.readBytes(t-e.offset-1));return e.skip(1),Vr(n),n}const Yr=-1,Jr=0,Zr=2,$r=3,es=4,ts=6,ns=-1,rs=0,ss=-1,as=0,is=-1,os=0,ls=1,cs=0,ds=1,us=2,hs=0,As=1;class fs extends Y{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),(0,V.A)(this,"_checkCrc",void 0),(0,V.A)(this,"_inflator",void 0),(0,V.A)(this,"_png",void 0),(0,V.A)(this,"_apng",void 0),(0,V.A)(this,"_end",void 0),(0,V.A)(this,"_hasPalette",void 0),(0,V.A)(this,"_palette",void 0),(0,V.A)(this,"_hasTransparency",void 0),(0,V.A)(this,"_transparency",void 0),(0,V.A)(this,"_compressionMethod",void 0),(0,V.A)(this,"_filterMethod",void 0),(0,V.A)(this,"_interlaceMethod",void 0),(0,V.A)(this,"_colorType",void 0),(0,V.A)(this,"_isAnimated",void 0),(0,V.A)(this,"_numberOfFrames",void 0),(0,V.A)(this,"_numberOfPlays",void 0),(0,V.A)(this,"_frames",void 0),(0,V.A)(this,"_writingDataChunks",void 0);const{checkCrc:n=!1}=t;this._checkCrc=n,this._inflator=new br,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=ns,this._filterMethod=ss,this._interlaceMethod=is,this._colorType=Yr,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Hr(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(Hr(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const n=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case zr:qr(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e)}if(this.offset-n!==e)throw new Error("Length mismatch while decoding chunk ".concat(t));this._checkCrc?Cr(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const n=this.offset;switch("fdAT"!==t&&"IDAT"!==t&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=n+e}if(this.offset-n!==e)throw new Error("Length mismatch while decoding chunk ".concat(t));this._checkCrc?Cr(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=function(e){if(1!==e&&2!==e&&4!==e&&8!==e&&16!==e)throw new Error("invalid bit depth: ".concat(e));return e}(this.readUint8());const t=this.readUint8();let n;switch(this._colorType=t,t){case Jr:n=1;break;case Zr:n=3;break;case $r:n=1;break;case es:n=2;break;case ts:n=4;break;default:throw new Error("Unknown color type: ".concat(t))}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==rs)throw new Error("Unsupported compression method: ".concat(this._compressionMethod));this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError("PLTE field length must be a multiple of 3. Got ".concat(e));const t=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let r=0;r<t;r++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,n=this.offset+this.byteOffset;if(n+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));this.skip(e)}decodetRNS(e){switch(this._colorType){case Jr:case Zr:if(e%2!==0)throw new RangeError("tRNS chunk length must be a multiple of 2. Got ".concat(e));if(e/2>this._png.width*this._png.height)throw new Error("tRNS chunk contains more alpha values than there are pixels (".concat(e/2," vs ").concat(this._png.width*this._png.height,")"));this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break;case $r:{if(e>this._palette.length)throw new Error("tRNS chunk contains more alpha values than there are palette colors (".concat(e," vs ").concat(this._palette.length,")"));let t=0;for(;t<e;t++){const e=this.readByte();this._palette[t].push(e)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}default:throw new Error("tRNS chunk is not supported for color type ".concat(this._colorType))}}decodeiCCP(e){const t=Xr(this),n=this.readUint8();if(n!==rs)throw new Error("Unsupported iCCP compression method: ".concat(n));const r=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:yr(r)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:t,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:8===this._apng.depth?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=Or({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),0===e||0===n.xOffset&&0===n.yOffset&&n.width===this._png.width&&n.height===this._png.height)t.data=n.data;else{const r=this._apng.frames.at(e-1);this.disposeFrame(n,r,t),this.addFrameDataToCanvas(t,n)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,n){switch(e.disposeOp){case cs:break;case ds:for(let t=0;t<this._png.height;t++)for(let r=0;r<this._png.width;r++){const s=(t*e.width+r)*this._png.channels;for(let e=0;e<this._png.channels;e++)n.data[s+e]=0}break;case us:n.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const n=1<<this._png.depth,r=(e,n)=>({index:((e+t.yOffset)*this._png.width+t.xOffset+n)*this._png.channels,frameIndex:(e*t.width+n)*this._png.channels});switch(t.blendOp){case hs:for(let n=0;n<t.height;n++)for(let s=0;s<t.width;s++){const{index:a,frameIndex:i}=r(n,s);for(let n=0;n<this._png.channels;n++)e.data[a+n]=t.data[i+n]}break;case As:for(let s=0;s<t.height;s++)for(let a=0;a<t.width;a++){const{index:i,frameIndex:o}=r(s,a);for(let r=0;r<this._png.channels;r++){const s=t.data[o+this._png.channels-1]/n,a=r%(this._png.channels-1)===0?1:t.data[o+r],l=Math.floor(s*a+(1-s)*e.data[i+r]);e.data[i+r]+=l}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var e;if(this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));const t=this._isAnimated?(null===(e=this._frames)||void 0===e?void 0:e.at(0)).data:this._inflator.result;if(this._filterMethod!==as)throw new Error("Filter method ".concat(this._filterMethod," not supported"));if(this._interlaceMethod===os)this._png.data=Or({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else{if(this._interlaceMethod!==ls)throw new Error("Interlace method ".concat(this._interlaceMethod," not supported"));this._png.data=function(e){const{data:t,width:n,height:r,channels:s,depth:a}=e,i=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*s,l=new Uint8Array(r*n*o);let c=0;for(let d=0;d<7;d++){const e=i[d],s=Math.ceil((n-e.x)/e.xStep),a=Math.ceil((r-e.y)/e.yStep);if(s<=0||a<=0)continue;const u=s*o,h=new Uint8Array(u);for(let i=0;i<a;i++){const a=t[c++],d=t.subarray(c,c+u);c+=u;const A=new Uint8Array(u);Tr(a,d,A,h,u,o),h.set(A);for(let t=0;t<s;t++){const s=e.x+t*e.xStep,a=e.y+i*e.yStep;if(!(s>=n||a>=r))for(let e=0;e<o;e++)l[(a*n+s)*o+e]=A[t*o+e]}}}if(16===a){const e=new Uint16Array(l.buffer);if(Dr)for(let t=0;t<e.length;t++)e[t]=Lr(e[t]);return e}return l}({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth})}this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:cs,blendOp:hs,data:e}),this._inflator=new br,this._writingDataChunks=!1}}n(9379);var ps;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"}(ps||(ps={}));var ms=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function gs(){ms.console&&"function"==typeof ms.console.log&&ms.console.log.apply(ms.console,arguments)}var xs={log:gs,warn:function(e){ms.console&&("function"==typeof ms.console.warn?ms.console.warn.apply(ms.console,arguments):gs.call(null,arguments))},error:function(e){ms.console&&("function"==typeof ms.console.error?ms.console.error.apply(ms.console,arguments):gs(e))}};function vs(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){ws(r.response,t,n)},r.onerror=function(){xs.error("could not download file")},r.send()}function bs(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return t.status>=200&&t.status<=299}function ys(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ws=ms.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,r.A)(window))||window!==ms?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=ms.URL||ms.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener","string"==typeof e?(s.href=e,s.origin!==location.origin?bs(s.href)?vs(e,t,n):ys(s,s.target="_blank"):ys(s)):(s.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){ys(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(bs(e))vs(e,t,n);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){ys(s)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,r.A)(t)&&(xs.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return vs(e,t,n);var a="application/octet-stream"===e.type,i=/constructor/i.test(ms.HTMLElement)||ms.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&"object"===("undefined"==typeof FileReader?"undefined":(0,r.A)(FileReader))){var l=new FileReader;l.onloadend=function(){var e=l.result;e=o?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},l.readAsDataURL(e)}else{var c=ms.URL||ms.webkitURL,d=c.createObjectURL(e);s?s.location=d:location.href=d,s=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});function Ns(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,a=n[r].process,i=s.exec(e);i&&(t=a(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}var js=ms.atob.bind(ms),Cs=ms.btoa.bind(ms);function Bs(e,t){var n=e[0],r=e[1],s=e[2],a=e[3];n=Ss(n,r,s,a,t[0],7,-680876936),a=Ss(a,n,r,s,t[1],12,-389564586),s=Ss(s,a,n,r,t[2],17,606105819),r=Ss(r,s,a,n,t[3],22,-1044525330),n=Ss(n,r,s,a,t[4],7,-176418897),a=Ss(a,n,r,s,t[5],12,1200080426),s=Ss(s,a,n,r,t[6],17,-1473231341),r=Ss(r,s,a,n,t[7],22,-45705983),n=Ss(n,r,s,a,t[8],7,1770035416),a=Ss(a,n,r,s,t[9],12,-1958414417),s=Ss(s,a,n,r,t[10],17,-42063),r=Ss(r,s,a,n,t[11],22,-1990404162),n=Ss(n,r,s,a,t[12],7,1804603682),a=Ss(a,n,r,s,t[13],12,-40341101),s=Ss(s,a,n,r,t[14],17,-1502002290),n=_s(n,r=Ss(r,s,a,n,t[15],22,1236535329),s,a,t[1],5,-165796510),a=_s(a,n,r,s,t[6],9,-1069501632),s=_s(s,a,n,r,t[11],14,643717713),r=_s(r,s,a,n,t[0],20,-373897302),n=_s(n,r,s,a,t[5],5,-701558691),a=_s(a,n,r,s,t[10],9,38016083),s=_s(s,a,n,r,t[15],14,-660478335),r=_s(r,s,a,n,t[4],20,-405537848),n=_s(n,r,s,a,t[9],5,568446438),a=_s(a,n,r,s,t[14],9,-1019803690),s=_s(s,a,n,r,t[3],14,-187363961),r=_s(r,s,a,n,t[8],20,1163531501),n=_s(n,r,s,a,t[13],5,-1444681467),a=_s(a,n,r,s,t[2],9,-51403784),s=_s(s,a,n,r,t[7],14,1735328473),n=Es(n,r=_s(r,s,a,n,t[12],20,-1926607734),s,a,t[5],4,-378558),a=Es(a,n,r,s,t[8],11,-2022574463),s=Es(s,a,n,r,t[11],16,1839030562),r=Es(r,s,a,n,t[14],23,-35309556),n=Es(n,r,s,a,t[1],4,-1530992060),a=Es(a,n,r,s,t[4],11,1272893353),s=Es(s,a,n,r,t[7],16,-155497632),r=Es(r,s,a,n,t[10],23,-1094730640),n=Es(n,r,s,a,t[13],4,681279174),a=Es(a,n,r,s,t[0],11,-358537222),s=Es(s,a,n,r,t[3],16,-722521979),r=Es(r,s,a,n,t[6],23,76029189),n=Es(n,r,s,a,t[9],4,-640364487),a=Es(a,n,r,s,t[12],11,-421815835),s=Es(s,a,n,r,t[15],16,530742520),n=Fs(n,r=Es(r,s,a,n,t[2],23,-995338651),s,a,t[0],6,-198630844),a=Fs(a,n,r,s,t[7],10,1126891415),s=Fs(s,a,n,r,t[14],15,-1416354905),r=Fs(r,s,a,n,t[5],21,-57434055),n=Fs(n,r,s,a,t[12],6,1700485571),a=Fs(a,n,r,s,t[3],10,-1894986606),s=Fs(s,a,n,r,t[10],15,-1051523),r=Fs(r,s,a,n,t[1],21,-2054922799),n=Fs(n,r,s,a,t[8],6,1873313359),a=Fs(a,n,r,s,t[15],10,-30611744),s=Fs(s,a,n,r,t[6],15,-1560198380),r=Fs(r,s,a,n,t[13],21,1309151649),n=Fs(n,r,s,a,t[4],6,-145523070),a=Fs(a,n,r,s,t[11],10,-1120210379),s=Fs(s,a,n,r,t[2],15,718787259),r=Fs(r,s,a,n,t[9],21,-343485551),e[0]=Os(n,e[0]),e[1]=Os(r,e[1]),e[2]=Os(s,e[2]),e[3]=Os(a,e[3])}function ks(e,t,n,r,s,a){return t=Os(Os(t,e),Os(r,a)),Os(t<<s|t>>>32-s,n)}function Ss(e,t,n,r,s,a,i){return ks(t&n|~t&r,e,t,s,a,i)}function _s(e,t,n,r,s,a,i){return ks(t&r|n&~r,e,t,s,a,i)}function Es(e,t,n,r,s,a,i){return ks(t^n^r,e,t,s,a,i)}function Fs(e,t,n,r,s,a,i){return ks(n^(t|~r),e,t,s,a,i)}function Ts(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Bs(r,Is(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(Bs(r,s),t=0;t<16;t++)s[t]=0;return s[14]=8*n,Bs(r,s),r}function Is(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var Ds="0123456789abcdef".split("");function Ls(e){for(var t="",n=0;n<4;n++)t+=Ds[e>>8*n+4&15]+Ds[e>>8*n&15];return t}function Ps(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Rs(e){return Ts(e).map(Ps).join("")}var Us="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=Ls(e[t]);return e.join("")}(Ts("hello"));function Os(e,t){if(Us){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function Ms(e,t){var n,r,s,a;if(e!==n){for(var i=(s=e,a=1+(256/e.length|0),new Array(a+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+i.charCodeAt(l))%256,o[l]=o[c],o[c]=d}n=e,r=o}else o=r;var u=t.length,h=0,A=0,f="";for(l=0;l<u;l++)A=(A+(d=o[h=(h+1)%256]))%256,o[h]=o[A],o[A]=d,i=o[(o[h]+o[A])%256],f+=String.fromCharCode(t.charCodeAt(l)^i);return f}var Qs={print:4,modify:8,copy:16,"annot-forms":32};function Hs(e,t,n,r){this.v=1,this.r=2;var s=192;e.forEach(function(e){if(void 0!==Qs.perm)throw new Error("Invalid permission: "+e);s+=Qs[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var a=(t+this.padding).substr(0,32),i=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,i),this.P=-(1+(255^s)),this.encryptionKey=Rs(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Ms(this.encryptionKey,this.padding)}function zs(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var s=e.charCodeAt(r);t+=s<33||35===s||37===s||40===s||41===s||47===s||60===s||62===s||91===s||93===s||123===s||125===s||s>126?"#"+("0"+s.toString(16)).slice(-2):e[r]}return t}function Ws(e){if("object"!==(0,r.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var s=Math.random().toString(35);return t[e][s]=[n,!!r],s},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var a in t[n]){var i=t[n][a];try{i[0].apply(e,r)}catch(ys){ms.console&&xs.error("jsPDF PubSub Error",ys.message,ys)}i[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Vs(e){if(!(this instanceof Vs))return new Vs(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Ks(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Gs(e,t,n,r,s){if(!(this instanceof Gs))return new Gs(e,t,n,r,s);this.type="axial"===e?2:3,this.coords=t,this.colors=n,Ks.call(this,r,s)}function qs(e,t,n,r,s){if(!(this instanceof qs))return new qs(e,t,n,r,s);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Ks.call(this,r,s)}function Xs(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",s=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;"object"===(0,r.A)(e=e||{})&&(n=e.orientation,s=e.unit||s,a=e.format||a,i=e.compress||e.compressPdf||i,null!==(u=e.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(!0===i?["FlateEncode"]:o),s=s||"mm",n=(""+(n||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,A={},f={internal:{},__private__:{}};f.__private__.PubSub=Ws;var p="1.3",m=f.__private__.getPdfVersion=function(){return p};f.__private__.setPdfVersion=function(e){p=e};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return g};var x=f.__private__.getPageFormat=function(e){return g[e]};a=a||"a4";var v="compat",b="advanced",y=v;function w(){this.saveGraphicsState(),Z(new Te(Ae,0,0,-Ae,0,dn()*Ae).toString()+" cm"),this.setFontSize(this.getFontSize()/Ae),d="n",y=b}function N(){this.restoreGraphicsState(),d="S",y=v}var j=f.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};f.advancedAPI=function(e){var t=y===v;return t&&w.call(this),"function"!=typeof e||(e(this),t&&N.call(this)),this},f.compatAPI=function(e){var t=y===b;return t&&N.call(this),"function"!=typeof e||(e(this),t&&w.call(this)),this},f.isAdvancedAPI=function(){return y===b};var C,B=function(e){if(y!==b)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=f.roundToPrecision=f.__private__.roundToPrecision=function(e,n){var r=t||n;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};C=f.hpf=f.__private__.hpf="number"==typeof c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return k(e,c)}:"smart"===c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return k(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return k(e,16)};var S=f.f2=f.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return k(e,2)},_=f.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return k(e,3)},E=f.scale=f.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return y===v?e*Ae:y===b?e:void 0},F=function(e){return E(function(e){return y===v?dn()-e:y===b?e:void 0}(e))};f.__private__.setPrecision=f.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var T,I="00000000000000000000000000000000",D=f.__private__.getFileId=function(){return I},L=f.__private__.setFileId=function(e){return I=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():I.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==u&&(vt=new Hs(u.userPermissions,u.userPassword,u.ownerPassword,I)),I};f.setFileId=function(e){return L(e),this},f.getFileId=function(){return D()};var P=f.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),s=Math.abs(t%60),a=[n,Q(r),"'",Q(s),"'"].join("");return["D:",e.getFullYear(),Q(e.getMonth()+1),Q(e.getDate()),Q(e.getHours()),Q(e.getMinutes()),Q(e.getSeconds()),a].join("")},R=f.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),i=parseInt(e.substr(14,2),10);return new Date(t,n,r,s,a,i,0)},U=f.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=P(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return T=t},O=f.__private__.getCreationDate=function(e){var t=T;return"jsDate"===e&&(t=R(T)),t};f.setCreationDate=function(e){return U(e),this},f.getCreationDate=function(e){return O(e)};var M,Q=f.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},H=f.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},z=0,W=[],V=[],K=0,G=[],q=[],X=!1,Y=V;f.__private__.setCustomOutputDestination=function(e){X=!0,Y=e};var J=function(e){X||(Y=e)};f.__private__.resetCustomOutputDestination=function(){X=!1,Y=V};var Z=f.__private__.out=function(e){return e=e.toString(),K+=e.length+1,Y.push(e),Y},$=f.__private__.write=function(e){return Z(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},ee=f.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},te=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return te};var ne=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(e){return ne=y===b?e/Ae:e,this};var re,se=f.__private__.getFontSize=f.getFontSize=function(){return y===v?ne:ne*Ae},ae=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(e){return ae=e,this},f.__private__.getR2L=f.getR2L=function(){return ae};var ie,oe=f.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))re=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');re=e}else re=parseInt(e,10)};f.__private__.getZoomMode=function(){return re};var le,ce=f.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');ie=e};f.__private__.getPageMode=function(){return ie};var de=f.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');le=e};f.__private__.getLayoutMode=function(){return le},f.__private__.setDisplayMode=f.setDisplayMode=function(e,t,n){return oe(e),de(t),ce(n),this};var ue={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ue[e]},f.__private__.getDocumentProperties=function(){return ue},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(e){for(var t in ue)ue.hasOwnProperty(t)&&e[t]&&(ue[t]=e[t]);return this},f.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ue[e]=t};var he,Ae,fe,pe,me,ge={},xe={},ve=[],be={},ye={},we={},Ne={},je=null,Ce=0,Be=[],ke=new Ws(f),Se=e.hotfixes||[],_e={},Ee={},Fe=[],Te=function e(t,n,r,s,a,i){if(!(this instanceof e))return new e(t,n,r,s,a,i);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(s)&&(s=1),isNaN(a)&&(a=0),isNaN(i)&&(i=0),this._matrix=[t,n,r,s,a,i]};Object.defineProperty(Te.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Te.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Te.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Te.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Te.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Te.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Te.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Te.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Te.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Te.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Te.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Te.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Te.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Te.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Te.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Te.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Te.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(e)},Te.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,s=e.shx*this.shy+e.sy*this.sy,a=e.tx*this.sx+e.ty*this.shx+this.tx,i=e.tx*this.shy+e.ty*this.sy+this.ty;return new Te(t,n,r,s,a,i)},Te.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,s=this.tx,a=this.ty,i=Math.sqrt(e*e+t*t),o=(e/=i)*n+(t/=i)*r;n-=e*o,r-=t*o;var l=Math.sqrt(n*n+r*r);return o/=l,e*(r/=l)<t*(n/=l)&&(e=-e,t=-t,o=-o,i=-i),{scale:new Te(i,0,0,l,0,0),translate:new Te(1,0,0,1,s,a),rotate:new Te(e,t,-t,e,0,0),skew:new Te(1,0,o,1,0,0)}},Te.prototype.toString=function(e){return this.join(" ")},Te.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,s=this.tx,a=this.ty,i=1/(e*r-t*n),o=r*i,l=-t*i,c=-n*i,d=e*i;return new Te(o,l,c,d,-o*s-c*a,-l*s-d*a)},Te.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new nn(t,n)},Te.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new nn(e.x+e.w,e.y+e.h));return new rn(t.x,t.y,n.x-t.x,n.y-t.y)},Te.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,s=this.tx,a=this.ty;return new Te(e,t,n,r,s,a)},f.Matrix=Te;var Ie=f.matrixMult=function(e,t){return t.multiply(e)},De=new Te(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=De;var Le=function(e,t){if(!ye[e]){var n=(t instanceof Gs?"Sh":"P")+(Object.keys(be).length+1).toString(10);t.id=n,ye[e]=n,be[n]=t,ke.publish("addPattern",t)}};f.ShadingPattern=Gs,f.TilingPattern=qs,f.addShadingPattern=function(e,t){return B("addShadingPattern()"),Le(e,t),this},f.beginTilingPattern=function(e){B("beginTilingPattern()"),an(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},f.endTilingPattern=function(e,t){B("endTilingPattern()"),t.stream=q[M].join("\n"),Le(e,t),ke.publish("endTilingPattern",t),Fe.pop().restore()};var Pe,Re=f.__private__.newObject=function(){var e=Ue();return Oe(e,!0),e},Ue=f.__private__.newObjectDeferred=function(){return z++,W[z]=function(){return K},z},Oe=function(e,t){return t="boolean"==typeof t&&t,W[e]=K,t&&Z(e+" 0 obj"),e},Me=f.__private__.newAdditionalObject=function(){var e={objId:Ue(),content:""};return G.push(e),e},Qe=Ue(),He=Ue(),ze=f.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var r="#",s=0;s<3;s++)r+=("0"+Math.floor(255*parseFloat(t[s])).toString(16)).slice(-2);return r},We=f.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,s=e.ch2,a=e.ch3,i=e.ch4,o="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var l=new Ns(n);if(l.ok)n=l.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var c=parseInt(n.substr(1),16);n=c>>16&255,s=c>>8&255,a=255&c}if(void 0===s||void 0===i&&n===s&&s===a)t="string"==typeof n?n+" "+o[0]:2===e.precision?S(n/255)+" "+o[0]:_(n/255)+" "+o[0];else if(void 0===i||"object"===(0,r.A)(i)){if(i&&!isNaN(i.a)&&0===i.a)return["1.","1.","1.",o[1]].join(" ");t="string"==typeof n?[n,s,a,o[1]].join(" "):2===e.precision?[S(n/255),S(s/255),S(a/255),o[1]].join(" "):[_(n/255),_(s/255),_(a/255),o[1]].join(" ")}else t="string"==typeof n?[n,s,a,i,o[2]].join(" "):2===e.precision?[S(n),S(s),S(a),S(i),o[2]].join(" "):[_(n),_(s),_(a),_(i),o[2]].join(" ");return t},Ve=f.__private__.getFilters=function(){return o},Ke=f.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||Ve(),r=e.alreadyAppliedFilters||[],s=e.addLength1||!1,a=t.length,i=e.objectId,o=function(e){return e};if(null!==u&&void 0===i)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(o=vt.encryptor(i,0));var l={};!0===n&&(n=["FlateEncode"]);var c=e.additionalKeyValues||[],d=(l=void 0!==Xs.API.processDataByFilters?Xs.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===s&&c.push({key:"Length1",value:a})),0!=d.length)if(d.split("/").length-1==1)c.push({key:"Filter",value:d});else{c.push({key:"Filter",value:"["+d+"]"});for(var h=0;h<c.length;h+=1)if("DecodeParms"===c[h].key){for(var A=[],f=0;f<l.reverseChain.split("/").length-1;f+=1)A.push("null");A.push(c[h].value),c[h].value="["+A.join(" ")+"]"}}Z("<<");for(var p=0;p<c.length;p++)Z("/"+c[p].key+" "+c[p].value);Z(">>"),0!==l.data.length&&(Z("stream"),Z(o(l.data)),Z("endstream"))},Ge=f.__private__.putPage=function(e){var t=e.number,n=e.data,r=e.objId,s=e.contentsObjId;Oe(r,!0),Z("<</Type /Page"),Z("/Parent "+e.rootDictionaryObjId+" 0 R"),Z("/Resources "+e.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(C(e.mediaBox.bottomLeftX))+" "+parseFloat(C(e.mediaBox.bottomLeftY))+" "+C(e.mediaBox.topRightX)+" "+C(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&Z("/CropBox ["+C(e.cropBox.bottomLeftX)+" "+C(e.cropBox.bottomLeftY)+" "+C(e.cropBox.topRightX)+" "+C(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&Z("/BleedBox ["+C(e.bleedBox.bottomLeftX)+" "+C(e.bleedBox.bottomLeftY)+" "+C(e.bleedBox.topRightX)+" "+C(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&Z("/TrimBox ["+C(e.trimBox.bottomLeftX)+" "+C(e.trimBox.bottomLeftY)+" "+C(e.trimBox.topRightX)+" "+C(e.trimBox.topRightY)+"]"),null!==e.artBox&&Z("/ArtBox ["+C(e.artBox.bottomLeftX)+" "+C(e.artBox.bottomLeftY)+" "+C(e.artBox.topRightX)+" "+C(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&Z("/UserUnit "+e.userUnit),ke.publish("putPage",{objId:r,pageContext:Be[t],pageNumber:t,page:n}),Z("/Contents "+s+" 0 R"),Z(">>"),Z("endobj");var a=n.join("\n");return y===b&&(a+="\nQ"),Oe(s,!0),Ke({data:a,filters:Ve(),objectId:s}),Z("endobj"),r},qe=f.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=Ce;e++)Be[e].objId=Ue(),Be[e].contentsObjId=Ue();for(e=1;e<=Ce;e++)n.push(Ge({number:e,data:q[e],objId:Be[e].objId,contentsObjId:Be[e].contentsObjId,mediaBox:Be[e].mediaBox,cropBox:Be[e].cropBox,bleedBox:Be[e].bleedBox,trimBox:Be[e].trimBox,artBox:Be[e].artBox,userUnit:Be[e].userUnit,rootDictionaryObjId:Qe,resourceDictionaryObjId:He}));Oe(Qe,!0),Z("<</Type /Pages");var r="/Kids [";for(t=0;t<Ce;t++)r+=n[t]+" 0 R ";Z(r+"]"),Z("/Count "+Ce),Z(">>"),Z("endobj"),ke.publish("postPutPages")},Xe=function(e){ke.publish("putFont",{font:e,out:Z,newObject:Re,putStream:Ke}),!0!==e.isAlreadyPutted&&(e.objectNumber=Re(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+zs(e.postScriptName)),Z("/Subtype /Type1"),"string"==typeof e.encoding&&Z("/Encoding /"+e.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},Ye=function(e){e.objectNumber=Re();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[C(e.x),C(e.y),C(e.x+e.width),C(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");Ke({data:n,additionalKeyValues:t,objectId:e.objectNumber}),Z("endobj")},Je=function(e,t){t||(t=21);var n=Re(),r=function(e,t){var n,r=[],s=1/(t-1);for(n=0;n<1;n+=s)r.push(n);if(r.push(1),0!=e[0].offset){var a={offset:0,color:e[0].color};e.unshift(a)}if(1!=e[e.length-1].offset){var i={offset:1,color:e[e.length-1].color};e.push(i)}for(var o="",l=0,c=0;c<r.length;c++){for(n=r[c];n>e[l+1].offset;)l++;var d=e[l].offset,u=(n-d)/(e[l+1].offset-d),h=e[l].color,A=e[l+1].color;o+=H(Math.round((1-u)*h[0]+u*A[0]).toString(16))+H(Math.round((1-u)*h[1]+u*A[1]).toString(16))+H(Math.round((1-u)*h[2]+u*A[2]).toString(16))}return o.trim()}(e.colors,t),s=[];s.push({key:"FunctionType",value:"0"}),s.push({key:"Domain",value:"[0.0 1.0]"}),s.push({key:"Size",value:"["+t+"]"}),s.push({key:"BitsPerSample",value:"8"}),s.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),s.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke({data:r,additionalKeyValues:s,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Z("endobj"),e.objectNumber=Re(),Z("<< /ShadingType "+e.type),Z("/ColorSpace /DeviceRGB");var a="/Coords ["+C(parseFloat(e.coords[0]))+" "+C(parseFloat(e.coords[1]))+" ";2===e.type?a+=C(parseFloat(e.coords[2]))+" "+C(parseFloat(e.coords[3])):a+=C(parseFloat(e.coords[2]))+" "+C(parseFloat(e.coords[3]))+" "+C(parseFloat(e.coords[4]))+" "+C(parseFloat(e.coords[5])),Z(a+="]"),e.matrix&&Z("/Matrix ["+e.matrix.toString()+"]"),Z("/Function "+n+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},Ze=function(e,t){var n=Ue(),r=Re();t.push({resourcesOid:n,objectOid:r}),e.objectNumber=r;var s=[];s.push({key:"Type",value:"/Pattern"}),s.push({key:"PatternType",value:"1"}),s.push({key:"PaintType",value:"1"}),s.push({key:"TilingType",value:"1"}),s.push({key:"BBox",value:"["+e.boundingBox.map(C).join(" ")+"]"}),s.push({key:"XStep",value:C(e.xStep)}),s.push({key:"YStep",value:C(e.yStep)}),s.push({key:"Resources",value:n+" 0 R"}),e.matrix&&s.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),Ke({data:e.stream,additionalKeyValues:s,objectId:e.objectNumber}),Z("endobj")},$e=function(e){for(var t in e.objectNumber=Re(),Z("<<"),e)switch(t){case"opacity":Z("/ca "+S(e[t]));break;case"stroke-opacity":Z("/CA "+S(e[t]))}Z(">>"),Z("endobj")},et=function(e){Oe(e.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in Z("/Font <<"),ge)ge.hasOwnProperty(e)&&(!1===h||!0===h&&A.hasOwnProperty(e))&&Z("/"+e+" "+ge[e].objectNumber+" 0 R");Z(">>")}(),function(){if(Object.keys(be).length>0){for(var e in Z("/Shading <<"),be)be.hasOwnProperty(e)&&be[e]instanceof Gs&&be[e].objectNumber>=0&&Z("/"+e+" "+be[e].objectNumber+" 0 R");ke.publish("putShadingPatternDict"),Z(">>")}}(),function(e){if(Object.keys(be).length>0){for(var t in Z("/Pattern <<"),be)be.hasOwnProperty(t)&&be[t]instanceof f.TilingPattern&&be[t].objectNumber>=0&&be[t].objectNumber<e&&Z("/"+t+" "+be[t].objectNumber+" 0 R");ke.publish("putTilingPatternDict"),Z(">>")}}(e.objectOid),function(){if(Object.keys(we).length>0){var e;for(e in Z("/ExtGState <<"),we)we.hasOwnProperty(e)&&we[e].objectNumber>=0&&Z("/"+e+" "+we[e].objectNumber+" 0 R");ke.publish("putGStateDict"),Z(">>")}}(),function(){for(var e in Z("/XObject <<"),_e)_e.hasOwnProperty(e)&&_e[e].objectNumber>=0&&Z("/"+e+" "+_e[e].objectNumber+" 0 R");ke.publish("putXobjectDict"),Z(">>")}(),Z(">>"),Z("endobj")},tt=function(e){xe[e.fontName]=xe[e.fontName]||{},xe[e.fontName][e.fontStyle]=e.id},nt=function(e,t,n,r,s){var a={id:"F"+(Object.keys(ge).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:r,isStandardFont:s||!1,metadata:{}};return ke.publish("addFont",{font:a,instance:this}),ge[a.id]=a,tt(a),a.id},rt=f.__private__.pdfEscape=f.pdfEscape=function(e,t){return function(e,t){var n,r,s,a,i,o,l,c,d;if(s=(t=t||{}).sourceEncoding||"Unicode",i=t.outputEncoding,(t.autoencode||i)&&ge[he].metadata&&ge[he].metadata[s]&&ge[he].metadata[s].encoding&&(a=ge[he].metadata[s].encoding,!i&&ge[he].encoding&&(i=ge[he].encoding),!i&&a.codePages&&(i=a.codePages[0]),"string"==typeof i&&(i=a[i]),i)){for(l=!1,o=[],n=0,r=e.length;n<r;n++)(c=i[e.charCodeAt(n)])?o.push(String.fromCharCode(c)):o.push(e[n]),o[n].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(o=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if((d=(c=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(d),o.push(c-(d<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},st=f.__private__.beginPage=function(e){q[++Ce]=[],Be[Ce]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},ot(Ce),J(q[M])},at=function(e,t){var r,s,i;switch(n=t||n,"string"==typeof e&&(r=x(e.toLowerCase()),Array.isArray(r)&&(s=r[0],i=r[1])),Array.isArray(e)&&(s=e[0]*Ae,i=e[1]*Ae),isNaN(s)&&(s=a[0],i=a[1]),(s>14400||i>14400)&&(xs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),s=Math.min(14400,s),i=Math.min(14400,i)),a=[s,i],n.substr(0,1)){case"l":i>s&&(a=[i,s]);break;case"p":s>i&&(a=[i,s])}st(a),Ot(Rt),Z(Gt),0!==$t&&Z($t+" J"),0!==en&&Z(en+" j"),ke.publish("addPage",{pageNumber:Ce})},it=function(e){e>0&&e<=Ce&&(q.splice(e,1),Be.splice(e,1),Ce--,M>Ce&&(M=Ce),this.setPage(M))},ot=function(e){e>0&&e<=Ce&&(M=e)},lt=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return q.length-1},ct=function(e,t,n){var r,s=void 0;return n=n||{},e=void 0!==e?e:ge[he].fontName,t=void 0!==t?t:ge[he].fontStyle,r=e.toLowerCase(),void 0!==xe[r]&&void 0!==xe[r][t]?s=xe[r][t]:void 0!==xe[e]&&void 0!==xe[e][t]?s=xe[e][t]:!1===n.disableWarning&&xs.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),s||n.noFallback||null==(s=xe.times[t])&&(s=xe.times.normal),s},dt=f.__private__.putInfo=function(){var e=Re(),t=function(e){return e};for(var n in null!==u&&(t=vt.encryptor(e,0)),Z("<<"),Z("/Producer ("+rt(t("jsPDF "+Xs.version))+")"),ue)ue.hasOwnProperty(n)&&ue[n]&&Z("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+rt(t(ue[n]))+")");Z("/CreationDate ("+rt(t(T))+")"),Z(">>"),Z("endobj")},ut=f.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Qe;switch(Re(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+t+" 0 R"),re||(re="fullwidth"),re){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+re;"%"===n.substr(n.length-1)&&(re=parseInt(re)/100),"number"==typeof re&&Z("/OpenAction [3 0 R /XYZ null null "+S(re)+"]")}switch(le||(le="continuous"),le){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}ie&&Z("/PageMode /"+ie),ke.publish("putCatalog"),Z(">>"),Z("endobj")},ht=f.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(z+1)),Z("/Root "+z+" 0 R"),Z("/Info "+(z-1)+" 0 R"),null!==u&&Z("/Encrypt "+vt.oid+" 0 R"),Z("/ID [ <"+I+"> <"+I+"> ]"),Z(">>")},At=f.__private__.putHeader=function(){Z("%PDF-"+p),Z("%\xba\xdf\xac\xe0")},ft=f.__private__.putXRef=function(){var e="0000000000";Z("xref"),Z("0 "+(z+1)),Z("0000000000 65535 f ");for(var t=1;t<=z;t++)"function"==typeof W[t]?Z((e+W[t]()).slice(-10)+" 00000 n "):void 0!==W[t]?Z((e+W[t]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},pt=f.__private__.buildDocument=function(){var e;z=0,K=0,V=[],W=[],G=[],Qe=Ue(),He=Ue(),J(V),ke.publish("buildDocument"),At(),qe(),function(){ke.publish("putAdditionalObjects");for(var e=0;e<G.length;e++){var t=G[e];Oe(t.objId,!0),Z(t.content),Z("endobj")}ke.publish("postPutAdditionalObjects")}(),e=[],function(){for(var e in ge)ge.hasOwnProperty(e)&&(!1===h||!0===h&&A.hasOwnProperty(e))&&Xe(ge[e])}(),function(){var e;for(e in we)we.hasOwnProperty(e)&&$e(we[e])}(),function(){for(var e in _e)_e.hasOwnProperty(e)&&Ye(_e[e])}(),function(e){var t;for(t in be)be.hasOwnProperty(t)&&(be[t]instanceof Gs?Je(be[t]):be[t]instanceof qs&&Ze(be[t],e))}(e),ke.publish("putResources"),e.forEach(et),et({resourcesOid:He,objectOid:Number.MAX_SAFE_INTEGER}),ke.publish("postPutResources"),null!==u&&(vt.oid=Re(),Z("<<"),Z("/Filter /Standard"),Z("/V "+vt.v),Z("/R "+vt.r),Z("/U <"+vt.toHexString(vt.U)+">"),Z("/O <"+vt.toHexString(vt.O)+">"),Z("/P "+vt.P),Z(">>"),Z("endobj")),dt(),ut();var t=K;return ft(),ht(),Z("startxref"),Z(""+t),Z("%%EOF"),J(q[M]),V.join("\n")},mt=f.__private__.getBlob=function(e){return new Blob([ee(e)],{type:"application/pdf"})},gt=f.output=f.__private__.output=(Pe=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return pt();case"save":f.save(t.filename);break;case"arraybuffer":return ee(pt());case"blob":return mt(pt());case"bloburi":case"bloburl":if(void 0!==ms.URL&&"function"==typeof ms.URL.createObjectURL)return ms.URL&&ms.URL.createObjectURL(mt(pt()))||void 0;xs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=pt();try{n=Cs(r)}catch(u){n=Cs(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(ms)){var s="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",a=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(s=t.pdfObjectUrl,a="");var i='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+s+'"'+a+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=ms.open();return null!==o&&o.document.write(i),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(ms)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=ms.open();if(null!==c){c.document.write(l);var d=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(d.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(ms))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',A=ms.open();if(null!==A&&(A.document.write(h),A.document.title=t.filename),A||"undefined"==typeof safari)return A;break;case"datauri":case"dataurl":return ms.document.location.href=this.output("datauristring",t);default:return null}},Pe.foo=function(){try{return Pe.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var n="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!ms.console)throw new Error(n);ms.console.error(n,t),ms.alert&&alert(n)}},Pe.foo.bar=Pe,Pe.foo),xt=function(e){return!0===Array.isArray(Se)&&Se.indexOf(e)>-1};switch(s){case"pt":Ae=1;break;case"mm":Ae=72/25.4;break;case"cm":Ae=72/2.54;break;case"in":Ae=72;break;case"px":Ae=1==xt("px_scaling")?.75:96/72;break;case"pc":case"em":Ae=12;break;case"ex":Ae=6;break;default:if("number"!=typeof s)throw new Error("Invalid unit: "+s);Ae=s}var vt=null;U(),L();var bt=f.__private__.getPageInfo=f.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Be[e].objId,pageNumber:e,pageContext:Be[e]}},yt=f.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Be)if(Be[t].objId===e)break;return bt(t)},wt=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Be[M].objId,pageNumber:M,pageContext:Be[M]}};f.addPage=function(){return at.apply(this,arguments),this},f.setPage=function(){return ot.apply(this,arguments),J.call(this,q[M]),this},f.insertPage=function(e){return this.addPage(),this.movePage(M,e),this},f.movePage=function(e,t){var n,r;if(e>t){n=q[e],r=Be[e];for(var s=e;s>t;s--)q[s]=q[s-1],Be[s]=Be[s-1];q[t]=n,Be[t]=r,this.setPage(t)}else if(e<t){n=q[e],r=Be[e];for(var a=e;a<t;a++)q[a]=q[a+1],Be[a]=Be[a+1];q[t]=n,Be[t]=r,this.setPage(t)}return this},f.deletePage=function(){return it.apply(this,arguments),this},f.__private__.text=f.text=function(e,t,n,s,a){var i,o,l,c,d,u,h,f,p,m=(s=s||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var g=n;n=t,t=e,e=g}if(arguments[3]instanceof Te==0?(l=arguments[4],c=arguments[5],"object"===(0,r.A)(h=arguments[3])&&null!==h||("string"==typeof l&&(c=l,l=null),"string"==typeof h&&(c=h,h=null),"number"==typeof h&&(l=h,h=null),s={flags:h,angle:l,align:c})):(B("The transform parameter of text() with a Matrix value"),p=a),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return m;var x,v="",w="number"==typeof s.lineHeightFactor?s.lineHeightFactor:Pt,N=m.internal.scaleFactor;function j(e){return e=e.split("\t").join(Array(s.TabLen||9).join(" ")),rt(e,h)}function k(e){for(var t,n=e.concat(),r=[],s=n.length;s--;)"string"==typeof(t=n.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function S(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var r,s,a=e.concat(),i=[],o=a.length;o--;)"string"==typeof(r=a.shift())?i.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(s=t(r[0],r[1],r[2]),i.push([s[0],s[1],s[2]]));n=i}return n}var _=!1,F=!0;if("string"==typeof e)_=!0;else if(Array.isArray(e)){var T=e.concat();o=[];for(var I,D=T.length;D--;)("string"!=typeof(I=T.shift())||Array.isArray(I)&&"string"!=typeof I[0])&&(F=!1);_=F}if(!1===_)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var L=ne/m.internal.scaleFactor,P=L*(w-1);switch(s.baseline){case"bottom":n-=P;break;case"top":n+=L-P;break;case"hanging":n+=L-2*P;break;case"middle":n+=L/2-P}if((u=s.maxWidth||0)>0&&("string"==typeof e?e=m.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(m.splitTextToSize(t,u))},[]))),i={text:e,x:t,y:n,options:s,mutex:{pdfEscape:rt,activeFontKey:he,fonts:ge,activeFontSize:ne}},ke.publish("preProcessText",i),e=i.text,l=(s=i.options).angle,p instanceof Te==0&&l&&"number"==typeof l){l*=Math.PI/180,0===s.rotationDirection&&(l=-l),y===b&&(l=-l);var R=Math.cos(l),U=Math.sin(l);p=new Te(R,U,-U,R,0,0)}else l&&l instanceof Te&&(p=l);y!==b||p||(p=De),void 0!==(d=s.charSpace||Jt)&&(v+=C(E(d))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(f=s.horizontalScale)&&(v+=C(100*f)+" Tz\n"),s.lang;var O=-1,M=void 0!==s.renderingMode?s.renderingMode:s.stroke,Q=m.internal.getCurrentPageInfo().pageContext;switch(M){case 0:case!1:case"fill":O=0;break;case 1:case!0:case"stroke":O=1;break;case 2:case"fillThenStroke":O=2;break;case 3:case"invisible":O=3;break;case 4:case"fillAndAddForClipping":O=4;break;case 5:case"strokeAndAddPathForClipping":O=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":O=6;break;case 7:case"addToPathForClipping":O=7}var H=void 0!==Q.usedRenderingMode?Q.usedRenderingMode:-1;-1!==O?v+=O+" Tr\n":-1!==H&&(v+="0 Tr\n"),-1!==O&&(Q.usedRenderingMode=O),c=s.align||"left";var z,W=ne*w,V=m.internal.pageSize.getWidth(),K=ge[he];d=s.charSpace||Jt,u=s.maxWidth||0,h=Object.assign({autoencode:!0,noBOM:!0},s.flags);var G=[],q=function(e){return m.getStringUnitWidth(e,{font:K,charSpace:d,fontSize:ne,doKerning:!1})*ne/N};if("[object Array]"===Object.prototype.toString.call(e)){var X;o=k(e),"left"!==c&&(z=o.map(q));var Y,J=0;if("right"===c){t-=z[0],e=[],D=o.length;for(var $=0;$<D;$++)0===$?(Y=zt(t),X=Wt(n)):(Y=E(J-z[$]),X=-W),e.push([o[$],Y,X]),J=z[$]}else if("center"===c){t-=z[0]/2,e=[],D=o.length;for(var ee=0;ee<D;ee++)0===ee?(Y=zt(t),X=Wt(n)):(Y=E((J-z[ee])/2),X=-W),e.push([o[ee],Y,X]),J=z[ee]}else if("left"===c){e=[],D=o.length;for(var te=0;te<D;te++)e.push(o[te])}else if("justify"===c&&"Identity-H"===K.encoding){e=[],D=o.length,u=0!==u?u:V;for(var re=0,se=0;se<D;se++)if(X=0===se?Wt(n):-W,Y=0===se?zt(t):re,se<D-1){var ie=E((u-z[se])/(o[se].split(" ").length-1)),oe=o[se].split(" ");e.push([oe[0]+" ",Y,X]),re=0;for(var le=1;le<oe.length;le++){var ce=(q(oe[le-1]+" "+oe[le])-q(oe[le]))*N+ie;le==oe.length-1?e.push([oe[le],ce,0]):e.push([oe[le]+" ",ce,0]),re-=ce}}else e.push([o[se],Y,X]);e.push(["",re,0])}else{if("justify"!==c)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],D=o.length,u=0!==u?u:V,se=0;se<D;se++)X=0===se?Wt(n):-W,Y=0===se?zt(t):0,se<D-1?G.push(C(E((u-z[se])/(o[se].split(" ").length-1)))):G.push(0),e.push([o[se],Y,X])}}!0===("boolean"==typeof s.R2L?s.R2L:ae)&&(e=S(e,function(e,t,n){return[e.split("").reverse().join(""),t,n]})),i={text:e,x:t,y:n,options:s,mutex:{pdfEscape:rt,activeFontKey:he,fonts:ge,activeFontSize:ne}},ke.publish("postProcessText",i),e=i.text,x=i.mutex.isHex||!1;var de=ge[he].encoding;"WinAnsiEncoding"!==de&&"StandardEncoding"!==de||(e=S(e,function(e,t,n){return[j(e),t,n]})),o=k(e),e=[];for(var ue,Ae,fe,pe=Array.isArray(o[0])?1:0,me="",xe=function(e,t,n){var r="";return n instanceof Te?(n="number"==typeof s.angle?Ie(n,new Te(1,0,0,1,e,t)):Ie(new Te(1,0,0,1,e,t),n),y===b&&(n=Ie(new Te(1,0,0,-1,0,0),n)),r=n.join(" ")+" Tm\n"):r=C(e)+" "+C(t)+" Td\n",r},ve=0;ve<o.length;ve++){switch(me="",pe){case 1:fe=(x?"<":"(")+o[ve][0]+(x?">":")"),ue=parseFloat(o[ve][1]),Ae=parseFloat(o[ve][2]);break;case 0:fe=(x?"<":"(")+o[ve]+(x?">":")"),ue=zt(t),Ae=Wt(n)}void 0!==G&&void 0!==G[ve]&&(me=G[ve]+" Tw\n"),0===ve?e.push(me+xe(ue,Ae,p)+fe):0===pe?e.push(me+fe):1===pe&&e.push(me+xe(ue,Ae,p)+fe)}e=0===pe?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var be="BT\n/";return be+=he+" "+ne+" Tf\n",be+=C(ne*w)+" TL\n",be+=Xt+"\n",be+=v,be+=e,Z(be+="ET"),A[he]=!0,m};var Nt=f.__private__.clip=f.clip=function(e){return Z("evenodd"===e?"W*":"W"),this};f.clipEvenOdd=function(){return Nt("evenodd")},f.__private__.discardPath=f.discardPath=function(){return Z("n"),this};var jt=f.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(e){return jt(e)&&(d=e),this};var Ct=f.__private__.getStyle=f.getStyle=function(e){var t=d;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Bt=f.close=function(){return Z("h"),this};f.stroke=function(){return Z("S"),this},f.fill=function(e){return kt("f",e),this},f.fillEvenOdd=function(e){return kt("f*",e),this},f.fillStroke=function(e){return kt("B",e),this},f.fillStrokeEvenOdd=function(e){return kt("B*",e),this};var kt=function(e,t){"object"===(0,r.A)(t)?Et(t,e):Z(e)},St=function(e){null===e||y===b&&void 0===e||(e=Ct(e),Z(e))};function _t(e,t,n,r,s){var a=new qs(t||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,s||this.matrix);a.stream=this.stream;var i=e+"$$"+this.cloneIndex+++"$$";return Le(i,a),a}var Et=function(e,t){var n=ye[e.key],r=be[n];if(r instanceof Gs)Z("q"),Z(Ft(t)),r.gState&&f.setGState(r.gState),Z(e.matrix.toString()+" cm"),Z("/"+n+" sh"),Z("Q");else if(r instanceof qs){var s=new Te(1,0,0,-1,0,dn());e.matrix&&(s=s.multiply(e.matrix||De),n=_t.call(r,e.key,e.boundingBox,e.xStep,e.yStep,s).id),Z("q"),Z("/Pattern cs"),Z("/"+n+" scn"),r.gState&&f.setGState(r.gState),Z(t),Z("Q")}},Ft=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Tt=f.moveTo=function(e,t){return Z(C(E(e))+" "+C(F(t))+" m"),this},It=f.lineTo=function(e,t){return Z(C(E(e))+" "+C(F(t))+" l"),this},Dt=f.curveTo=function(e,t,n,r,s,a){return Z([C(E(e)),C(F(t)),C(E(n)),C(F(r)),C(E(s)),C(F(a)),"c"].join(" ")),this};f.__private__.line=f.line=function(e,t,n,r,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!jt(s))throw new Error("Invalid arguments passed to jsPDF.line");return y===v?this.lines([[n-e,r-t]],e,t,[1,1],s||"S"):this.lines([[n-e,r-t]],e,t,[1,1]).stroke()},f.__private__.lines=f.lines=function(e,t,n,r,s,a){var i,o,l,c,d,u,h,A,f,p,m,g;if("number"==typeof e&&(g=n,n=t,t=e,e=g),r=r||[1,1],a=a||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(r)||!jt(s)||"boolean"!=typeof a)throw new Error("Invalid arguments passed to jsPDF.lines");for(Tt(t,n),i=r[0],o=r[1],c=e.length,p=t,m=n,l=0;l<c;l++)2===(d=e[l]).length?(p=d[0]*i+p,m=d[1]*o+m,It(p,m)):(u=d[0]*i+p,h=d[1]*o+m,A=d[2]*i+p,f=d[3]*o+m,p=d[4]*i+p,m=d[5]*o+m,Dt(u,h,A,f,p,m));return a&&Bt(),St(s),this},f.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.c;switch(n.op){case"m":Tt(r[0],r[1]);break;case"l":It(r[0],r[1]);break;case"c":Dt.apply(this,r);break;case"h":Bt()}}return this},f.__private__.rect=f.rect=function(e,t,n,r,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!jt(s))throw new Error("Invalid arguments passed to jsPDF.rect");return y===v&&(r=-r),Z([C(E(e)),C(F(t)),C(E(n)),C(E(r)),"re"].join(" ")),St(s),this},f.__private__.triangle=f.triangle=function(e,t,n,r,s,a,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(s)||isNaN(a)||!jt(i))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,r-t],[s-n,a-r],[e-s,t-a]],e,t,[1,1],i,!0),this},f.__private__.roundedRect=f.roundedRect=function(e,t,n,r,s,a,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(s)||isNaN(a)||!jt(i))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return s=Math.min(s,.5*n),a=Math.min(a,.5*r),this.lines([[n-2*s,0],[s*o,0,s,a-a*o,s,a],[0,r-2*a],[0,a*o,-s*o,a,-s,a],[2*s-n,0],[-s*o,0,-s,-a*o,-s,-a],[0,2*a-r],[0,-a*o,s*o,-a,s,-a]],e+s,t,[1,1],i,!0),this},f.__private__.ellipse=f.ellipse=function(e,t,n,r,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!jt(s))throw new Error("Invalid arguments passed to jsPDF.ellipse");var a=4/3*(Math.SQRT2-1)*n,i=4/3*(Math.SQRT2-1)*r;return Tt(e+n,t),Dt(e+n,t-i,e+a,t-r,e,t-r),Dt(e-a,t-r,e-n,t-i,e-n,t),Dt(e-n,t+i,e-a,t+r,e,t+r),Dt(e+a,t+r,e+n,t+i,e+n,t),St(s),this},f.__private__.circle=f.circle=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||!jt(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,r)},f.setFont=function(e,t,n){return n&&(t=j(t,n)),he=ct(e,t,{disableWarning:!1}),this};var Lt=f.__private__.getFont=f.getFont=function(){return ge[ct.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var e,t,n={};for(e in xe)if(xe.hasOwnProperty(e))for(t in n[e]=[],xe[e])xe[e].hasOwnProperty(t)&&n[e].push(t);return n},f.addFont=function(e,t,n,r,s){var a=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==a.indexOf(arguments[3])?s=arguments[3]:arguments[3]&&-1==a.indexOf(arguments[3])&&(n=j(n,r)),nt.call(this,e,t,n,s=s||"Identity-H")};var Pt,Rt=e.lineWidth||.200025,Ut=f.__private__.getLineWidth=f.getLineWidth=function(){return Rt},Ot=f.__private__.setLineWidth=f.setLineWidth=function(e){return Rt=e,Z(C(E(e))+" w"),this};f.__private__.setLineDash=Xs.API.setLineDash=Xs.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return C(E(e))}).join(" "),t=C(E(t)),Z("["+e+"] "+t+" d"),this};var Mt=f.__private__.getLineHeight=f.getLineHeight=function(){return ne*Pt};f.__private__.getLineHeight=f.getLineHeight=function(){return ne*Pt};var Qt=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Pt=e),this},Ht=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Pt};Qt(e.lineHeight);var zt=f.__private__.getHorizontalCoordinate=function(e){return E(e)},Wt=f.__private__.getVerticalCoordinate=function(e){return y===b?e:Be[M].mediaBox.topRightY-Be[M].mediaBox.bottomLeftY-E(e)},Vt=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(e){return C(zt(e))},Kt=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(e){return C(Wt(e))},Gt=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return ze(Gt)},f.__private__.setStrokeColor=f.setDrawColor=function(e,t,n,r){return Gt=We({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),Z(Gt),this};var qt=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return ze(qt)},f.__private__.setFillColor=f.setFillColor=function(e,t,n,r){return qt=We({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),Z(qt),this};var Xt=e.textColor||"0 g",Yt=f.__private__.getTextColor=f.getTextColor=function(){return ze(Xt)};f.__private__.setTextColor=f.setTextColor=function(e,t,n,r){return Xt=We({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var Jt=e.charSpace,Zt=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Jt||0)};f.__private__.setCharSpace=f.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Jt=e,this};var $t=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(e){var t=f.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $t=t,Z(t+" J"),this};var en=0;f.__private__.setLineJoin=f.setLineJoin=function(e){var t=f.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return en=t,Z(t+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(C(E(e))+" M"),this},f.GState=Vs,f.setGState=function(e){(e="string"==typeof e?we[Ne[e]]:tn(null,e)).equals(je)||(Z("/"+e.id+" gs"),je=e)};var tn=function(e,t){if(!e||!Ne[e]){var n=!1;for(var r in we)if(we.hasOwnProperty(r)&&we[r].equals(t)){n=!0;break}if(n)t=we[r];else{var s="GS"+(Object.keys(we).length+1).toString(10);we[s]=t,t.id=s}return e&&(Ne[e]=t.id),ke.publish("addGState",t),t}};f.addGState=function(e,t){return tn(e,t),this},f.saveGraphicsState=function(){return Z("q"),ve.push({key:he,size:ne,color:Xt}),this},f.restoreGraphicsState=function(){Z("Q");var e=ve.pop();return he=e.key,ne=e.size,Xt=e.color,je=null,this},f.setCurrentTransformationMatrix=function(e){return Z(e.toString()+" cm"),this},f.comment=function(e){return Z("#"+e),this};var nn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var s="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return s},set:function(e){s=e.toString()}}),this},rn=function(e,t,n,r){nn.call(this,e,t),this.type="rect";var s=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return s},set:function(e){isNaN(e)||(s=parseFloat(e))}});var a=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}}),this},sn=function(){this.page=Ce,this.currentPage=M,this.pages=q.slice(0),this.pagesContext=Be.slice(0),this.x=fe,this.y=pe,this.matrix=me,this.width=ln(M),this.height=dn(M),this.outputDestination=Y,this.id="",this.objectNumber=-1};sn.prototype.restore=function(){Ce=this.page,M=this.currentPage,Be=this.pagesContext,q=this.pages,fe=this.x,pe=this.y,me=this.matrix,cn(M,this.width),un(M,this.height),Y=this.outputDestination};var an=function(e,t,n,r,s){Fe.push(new sn),Ce=M=0,q=[],fe=e,pe=t,me=s,st([n,r])};for(var on in f.beginFormObject=function(e,t,n,r,s){return an(e,t,n,r,s),this},f.endFormObject=function(e){return function(e){if(Ee[e])Fe.pop().restore();else{var t=new sn,n="Xo"+(Object.keys(_e).length+1).toString(10);t.id=n,Ee[e]=n,_e[n]=t,ke.publish("addFormObject",t),Fe.pop().restore()}}(e),this},f.doFormObject=function(e,t){var n=_e[Ee[e]];return Z("q"),Z(t.toString()+" cm"),Z("/"+n.id+" Do"),Z("Q"),this},f.getFormObject=function(e){var t=_e[Ee[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},f.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(ws(mt(pt()),e),"function"==typeof ws.unload&&ms.setTimeout&&setTimeout(ws.unload,911),this):new Promise(function(t,n){try{var r=ws(mt(pt()),e);"function"==typeof ws.unload&&ms.setTimeout&&setTimeout(ws.unload,911),t(r)}catch(s){n(s.message)}})},Xs.API)Xs.API.hasOwnProperty(on)&&("events"===on&&Xs.API.events.length?function(e,t){var n,r,s;for(s=t.length-1;-1!==s;s--)n=t[s][0],r=t[s][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(ke,Xs.API.events):f[on]=Xs.API[on]);var ln=f.getPageWidth=function(e){return(Be[e=e||M].mediaBox.topRightX-Be[e].mediaBox.bottomLeftX)/Ae},cn=f.setPageWidth=function(e,t){Be[e].mediaBox.topRightX=t*Ae+Be[e].mediaBox.bottomLeftX},dn=f.getPageHeight=function(e){return(Be[e=e||M].mediaBox.topRightY-Be[e].mediaBox.bottomLeftY)/Ae},un=f.setPageHeight=function(e,t){Be[e].mediaBox.topRightY=t*Ae+Be[e].mediaBox.bottomLeftY};return f.internal={pdfEscape:rt,getStyle:Ct,getFont:Lt,getFontSize:se,getCharSpace:Zt,getTextColor:Yt,getLineHeight:Mt,getLineHeightFactor:Ht,getLineWidth:Ut,write:$,getHorizontalCoordinate:zt,getVerticalCoordinate:Wt,getCoordinateString:Vt,getVerticalCoordinateString:Kt,collections:{},newObject:Re,newAdditionalObject:Me,newObjectDeferred:Ue,newObjectDeferredBegin:Oe,getFilters:Ve,putStream:Ke,events:ke,scaleFactor:Ae,pageSize:{getWidth:function(){return ln(M)},setWidth:function(e){cn(M,e)},getHeight:function(){return dn(M)},setHeight:function(e){un(M,e)}},encryptionOptions:u,encryption:vt,getEncryptor:function(e){return null!==u?vt.encryptor(e,0):function(e){return e}},output:gt,getNumberOfPages:lt,pages:q,out:Z,f2:S,f3:_,getPageInfo:bt,getPageInfoByObjId:yt,getCurrentPageInfo:wt,getPDFVersion:m,Point:nn,Rectangle:rn,Matrix:Te,hasHotfix:xt},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return ln(M)},set:function(e){cn(M,e)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return dn(M)},set:function(e){un(M,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=te.length;t<n;t++){var r=nt.call(this,e[t][0],e[t][1],e[t][2],te[t][3],!0);!1===h&&(A[r]=!0);var s=e[t][0].split("-");tt({id:r,fontName:s[0],fontStyle:s[1]||""})}ke.publish("addFonts",{fonts:ge,dictionary:xe})}.call(f,te),he="F1",at(a,n),ke.publish("initialized"),f}Hs.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Hs.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Hs.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Hs.prototype.processOwnerPassword=function(e,t){return Ms(Rs(t).substr(0,5),e)},Hs.prototype.encryptor=function(e,t){var n=Rs(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return Ms(n,e)}},Vs.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,r.A)(e)!==(0,r.A)(this))return!1;var s=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&s--;return 0===s},Xs.API={events:[]},Xs.version="3.0.2";var Ys=Xs.API,Js=1,Zs=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$s=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ea=function(e){return e.toFixed(2)},ta=function(e){return e.toFixed(5)};Ys.__acroform__={};var na=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},ra=function(e){return e*Js},sa=function(e){var t=new ba,n=Da.internal.getHeight(e)||0,r=Da.internal.getWidth(e)||0;return t.BBox=[0,0,Number(ea(r)),Number(ea(n))],t},aa=Ys.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},ia=Ys.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},oa=Ys.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},la=Ys.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return oa(e,t-1)},ca=Ys.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return aa(e,t-1)},da=Ys.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ia(e,t-1)},ua=Ys.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,s=e[0],a=e[1],i=e[2],o=e[3],l={};return l.lowerLeft_X=n(s)||0,l.lowerLeft_Y=r(a+o)||0,l.upperRight_X=n(s+i)||0,l.upperRight_Y=r(a)||0,[Number(ea(l.lowerLeft_X)),Number(ea(l.lowerLeft_Y)),Number(ea(l.upperRight_X)),Number(ea(l.upperRight_Y))]},ha=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=Aa(e,n),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+ea(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=sa(e);return a.scope=e.scope,a.stream=t.join("\n"),a}},Aa=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},s=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(e){return e.split("\n")}):s.map(function(e){return[e]});var a=n,i=Da.internal.getHeight(e)||0;i=i<0?-i:i;var o=Da.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,n,r){if(t+1<s.length){var a=n+" "+s[t+1][0];return fa(a,e,r).width<=o-4}return!1};a++;e:for(;a>0;){t="",a--;var c,d,u=fa("3",e,a).height,h=e.multiline?i-a:(i-u)/2,A=h+=2,f=0,p=0,m=0;if(a<=0){t="(...) Tj\n",t+="% Width of Text: "+fa(t,e,a=12).width+", FieldWidth:"+o+"\n";break}for(var g="",x=0,v=0;v<s.length;v++)if(s.hasOwnProperty(v)){var b=!1;if(1!==s[v].length&&m!==s[v].length-1){if((u+2)*(x+2)+2>i)continue e;g+=s[v][m],b=!0,p=v,v--}else{g=" "==(g+=s[v][m]+" ").substr(g.length-1)?g.substr(0,g.length-1):g;var y=parseInt(v),w=l(y,g,a),N=v>=s.length-1;if(w&&!N){g+=" ",m=0;continue}if(w||N){if(N)p=y;else if(e.multiline&&(u+2)*(x+2)+2>i)continue e}else{if(!e.multiline)continue e;if((u+2)*(x+2)+2>i)continue e;p=y}}for(var j="",C=f;C<=p;C++){var B=s[C];if(e.multiline){if(C===p){j+=B[m]+" ",m=(m+1)%B.length;continue}if(C===f){j+=B[B.length-1]+" ";continue}}j+=B[0]+" "}switch(j=" "==j.substr(j.length-1)?j.substr(0,j.length-1):j,d=fa(j,e,a).width,e.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}t+=ea(c)+" "+ea(A)+" Td\n",t+="("+Zs(j)+") Tj\n",t+=-ea(c)+" 0 Td\n",A=-(a+2),d=0,f=b?p:p+1,x++,g=""}break}return r.text=t,r.fontSize=a,r},fa=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},pa={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ma=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===n.type&&e.object===n.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},ga=Ys.__acroform__.arrayToPdfArray=function(e,t,n){var s=function(e){return e};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(0!==i&&(a+=" "),(0,r.A)(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":"/"!==e[i].substr(0,1)?(void 0!==t&&n&&(s=n.internal.getEncryptor(t)),a+="("+Zs(s(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},xa=function(e,t,n){var r=function(e){return e};return void 0!==t&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Zs(r(e))+")"},va=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};va.prototype.toString=function(){return this.objId+" 0 R"},va.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},va.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var r=t[n],s=this[r];s&&(Array.isArray(s)?e.push({key:r,value:ga(s,this.objId,this.scope)}):s instanceof va?(s.scope=this.scope,e.push({key:r,value:s.objId+" 0 R"})):"function"!=typeof s&&e.push({key:r,value:s}))}return e};var ba=function(){va.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};na(ba,va);var ya=function(){va.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Zs(t(e))+")"}},set:function(t){e=t}})};na(ya,va);var wa=function e(){va.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(t,3))},set:function(e){!0===Boolean(e)?this.F=ca(t,3):this.F=da(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Ea)return;a="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Zs(t(a))+")"},set:function(e){a=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/Js:c},set:function(e){c=e}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=e}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof Ea||this instanceof Ta))return xa(u,this.objId,this.scope)},set:function(e){e=e.toString(),u=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof ka==0?xa(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof ka==0?"("===e.substr(0,1)?$s(e.substr(1,e.length-2)):$s(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ka==1?$s(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof ka==1?"/"+e:e}});var A=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(A)return A},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof ka==0?xa(A,this.objId,this.scope):A},set:function(e){e=e.toString(),A=this instanceof ka==0?"("===e.substr(0,1)?$s(e.substr(1,e.length-2)):$s(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ka==1?$s(A.substr(1,A.length-1)):A},set:function(e){e=e.toString(),A=this instanceof ka==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var f,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(e){e=Boolean(e),p=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(f)return f},set:function(e){f=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,1):this.Ff=da(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,2):this.Ff=da(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,3):this.Ff=da(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==m)return m},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');m=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(m){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:m=2;break;case"center":case 1:m=1;break;default:m=0}}})};na(wa,va);var Na=function(){wa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ga(t,this.objId,this.scope)},set:function(e){var n,r;r=[],"string"==typeof(n=e)&&(r=function(e,t,n){n||(n=1);for(var r,s=[];r=t.exec(e);)s.push(r[n]);return s}(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,18):this.Ff=da(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=ca(this.Ff,19):this.Ff=da(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=ca(this.Ff,20),t.sort()):this.Ff=da(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,22):this.Ff=da(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,23):this.Ff=da(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,27):this.Ff=da(this.Ff,27)}}),this.hasAppearanceStream=!1};na(Na,wa);var ja=function(){Na.call(this),this.fontName="helvetica",this.combo=!1};na(ja,Na);var Ca=function(){ja.call(this),this.combo=!0};na(Ca,ja);var Ba=function(){Ca.call(this),this.edit=!0};na(Ba,Ca);var ka=function(){wa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,15):this.Ff=da(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,16):this.Ff=da(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,17):this.Ff=da(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,26):this.Ff=da(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+Zs(e(t[n]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===(0,r.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};na(ka,wa);var Sa=function(){ka.call(this),this.pushButton=!0};na(Sa,ka);var _a=function(){ka.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};na(_a,ka);var Ea=function(){var e,t;wa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),s)n.push("/"+t+" ("+Zs(e(s[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,r.A)(e)&&(s=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(e){"string"==typeof e&&(s.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Da.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};na(Ea,wa),_a.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},_a.prototype.createOption=function(e){var t=new Ea;return t.Parent=this,t.optionName=e,this.Kids.push(t),La.call(this.scope,t),t};var Fa=function(){ka.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Da.CheckBox.createAppearanceStream()};na(Fa,ka);var Ta=function(){wa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,13):this.Ff=da(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,21):this.Ff=da(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,23):this.Ff=da(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,24):this.Ff=da(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,25):this.Ff=da(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,26):this.Ff=da(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};na(Ta,wa);var Ia=function(){Ta.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(la(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=ca(this.Ff,14):this.Ff=da(this.Ff,14)}}),this.password=!0};na(Ia,Ta);var Da={CheckBox:{createAppearanceStream:function(){return{N:{On:Da.CheckBox.YesNormal},D:{On:Da.CheckBox.YesPushDown,Off:Da.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),a=Aa(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+ea(Da.internal.getWidth(e))+" "+ea(Da.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+ea(a.fontSize)+" Tf "+s),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=sa(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),s=[],a=Da.internal.getHeight(e),i=Da.internal.getWidth(e),o=Aa(e,e.caption);return s.push("1 g"),s.push("0 0 "+ea(i)+" "+ea(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+ea(i-1)+" "+ea(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+ea(o.fontSize)+" Tf "+r),s.push(o.text),s.push("ET"),s.push("Q"),t.stream=s.join("\n"),t},OffPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ea(Da.internal.getWidth(e))+" "+ea(Da.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Da.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Da.RadioButton.Circle.YesNormal,t.D[e]=Da.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=sa(e);t.scope=e.scope;var n=[],r=Da.internal.getWidth(e)<=Da.internal.getHeight(e)?Da.internal.getWidth(e)/4:Da.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Da.internal.Bezier_C,a=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+ta(Da.internal.getWidth(e)/2)+" "+ta(Da.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[],r=Da.internal.getWidth(e)<=Da.internal.getHeight(e)?Da.internal.getWidth(e)/4:Da.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*Da.internal.Bezier_C).toFixed(5)),i=Number((r*Da.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ta(Da.internal.getWidth(e)/2)+" "+ta(Da.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+ta(Da.internal.getWidth(e)/2)+" "+ta(Da.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[],r=Da.internal.getWidth(e)<=Da.internal.getHeight(e)?Da.internal.getWidth(e)/4:Da.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*Da.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ta(Da.internal.getWidth(e)/2)+" "+ta(Da.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Da.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Da.RadioButton.Cross.YesNormal,t.D[e]=Da.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=sa(e);t.scope=e.scope;var n=[],r=Da.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+ea(Da.internal.getWidth(e)-2)+" "+ea(Da.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(ea(r.x1.x)+" "+ea(r.x1.y)+" m"),n.push(ea(r.x2.x)+" "+ea(r.x2.y)+" l"),n.push(ea(r.x4.x)+" "+ea(r.x4.y)+" m"),n.push(ea(r.x3.x)+" "+ea(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=Da.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+ea(Da.internal.getWidth(e))+" "+ea(Da.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ea(Da.internal.getWidth(e)-2)+" "+ea(Da.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(ea(n.x1.x)+" "+ea(n.x1.y)+" m"),r.push(ea(n.x2.x)+" "+ea(n.x2.y)+" l"),r.push(ea(n.x4.x)+" "+ea(n.x4.y)+" m"),r.push(ea(n.x3.x)+" "+ea(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ea(Da.internal.getWidth(e))+" "+ea(Da.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Da.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Da.internal.getWidth(e),n=Da.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Da.internal.getWidth=function(e){var t=0;return"object"===(0,r.A)(e)&&(t=ra(e.Rect[2])),t},Da.internal.getHeight=function(e){var t=0;return"object"===(0,r.A)(e)&&(t=ra(e.Rect[3])),t};var La=Ys.addField=function(e){if(function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(wa.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(pa)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Js=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new ya,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.objId=void 0,r.hasAnnotation&&ma(r,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var n=!e;for(var s in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(s)){var a=e[s],i=[],o=a.Rect;if(a.Rect&&(a.Rect=ua(a.Rect,t)),t.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Da.createDefaultAppearanceStream(a),"object"===(0,r.A)(a)&&"function"==typeof a.getKeyValueListForStream&&(i=a.getKeyValueListForStream()),a.Rect=o,a.hasAppearanceStream&&!a.appearanceStreamContent){var l=ha(a);i.push({key:"AP",value:"<</N "+l+">>"}),t.internal.acroformPlugin.xForms.push(l)}if(a.appearanceStreamContent){var c="";for(var d in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(d)){var u=a.appearanceStreamContent[d];if(c+="/"+d+" ",c+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var s in u)if(u.hasOwnProperty(s)){var h=u[s];"function"==typeof h&&(h=h.call(t,a)),c+="/"+s+" "+h+" ",t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h)}}else"function"==typeof(h=u)&&(h=h.call(t,a)),c+="/"+s+" "+h,t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h);c+=">>"}i.push({key:"AP",value:"<<\n"+c+">>"})}t.internal.putStream({additionalKeyValues:i,objectId:a.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var s=n,a=e[n];t.internal.newObjectDeferredBegin(a.objId,!0),"object"===(0,r.A)(a)&&"function"==typeof a.putStream&&a.putStream(),delete e[s]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}}(this,e),!(e instanceof wa))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ys.AcroFormChoiceField=Na,Ys.AcroFormListBox=ja,Ys.AcroFormComboBox=Ca,Ys.AcroFormEditBox=Ba,Ys.AcroFormButton=ka,Ys.AcroFormPushButton=Sa,Ys.AcroFormRadioButton=_a,Ys.AcroFormCheckBox=Fa,Ys.AcroFormTextField=Ta,Ys.AcroFormPasswordField=Ia,Ys.AcroFormAppearance=Da,Ys.AcroForm={ChoiceField:Na,ListBox:ja,ComboBox:Ca,EditBox:Ba,Button:ka,PushButton:Sa,RadioButton:_a,CheckBox:Fa,TextField:Ta,PasswordField:Ia,Appearance:Da},Xs.AcroForm={ChoiceField:Na,ListBox:ja,ComboBox:Ca,EditBox:Ba,Button:ka,PushButton:Sa,RadioButton:_a,CheckBox:Fa,TextField:Ta,PasswordField:Ia,Appearance:Da};var Pa=Xs.AcroForm;function Ra(e){return e.reduce(function(e,t,n){return e[t]=n,e},{})}!function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(e,t){var r,a,i,o,l,c=n;if("RGBA"===(t=t||n)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(N(e))for(l in s)for(i=s[l],r=0;r<i.length;r+=1){for(o=!0,a=0;a<i[r].length;a+=1)if(void 0!==i[r][a]&&i[r][a]!==e[a]){o=!1;break}if(!0===o){c=l;break}}else for(l in s)for(i=s[l],r=0;r<i.length;r+=1){for(o=!0,a=0;a<i[r].length;a+=1)if(void 0!==i[r][a]&&i[r][a]!==e.charCodeAt(a)){o=!1;break}if(!0===o){c=l;break}}return c===n&&t!==n&&(c=t),c},i=function e(t){for(var n=this.internal.write,r=this.internal.putStream,s=(0,this.internal.getFilters)();-1!==s.indexOf("FlateEncode");)s.splice(s.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var a=[];if(a.push({key:"Type",value:"/XObject"}),a.push({key:"Subtype",value:"/Image"}),a.push({key:"Width",value:t.width}),a.push({key:"Height",value:t.height}),t.colorSpace===x.INDEXED?a.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(a.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===x.DEVICE_CMYK&&a.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),a.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&a.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var i="",o=0,l=t.transparency.length;o<l;o++)i+=t.transparency[o]+" "+t.transparency[o]+" ";a.push({key:"Mask",value:"["+i+"]"})}void 0!==t.sMask&&a.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:a,alreadyAppliedFilters:c,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var d=(null!=t.predictor?"/Predictor "+t.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+t.width,u={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:d,data:t.sMask};"filter"in t&&(u.filter=t.filter),e.call(this,u)}if(t.colorSpace===x.INDEXED){var h=this.internal.newObject();r({data:C(new Uint8Array(t.palette)),objectId:h}),n("endobj")}},o=function(){var e=this.internal.collections[t+"images"];for(var n in e)i.call(this,e[n])},l=function(){var e,n=this.internal.collections[t+"images"],r=this.internal.write;for(var s in n)r("/I"+(e=n[s]).index,e.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var e=this.internal.collections[t+"images"];return c.call(this),e},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},h=function(t){return"function"==typeof e["process"+t.toUpperCase()]},A=function(e){return"object"===(0,r.A)(e)&&1===e.nodeType},f=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return js(unescape(r).split("base64,").pop());var s=e.loadFile(r,!0);if(void 0!==s)return s}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var a;switch(n){case"PNG":a="image/png";break;case"WEBP":a="image/webp";break;default:a="image/jpeg"}return js(t.toDataURL(a,1).split("base64,").pop())}},p=function(e){var n=this.internal.collections[t+"images"];if(n)for(var r in n)if(e===n[r].alias)return n[r]},m=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},g=function(e,t,n,r,s,a){var i=m.call(this,n,r,s),o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=d.call(this);if(n=i[0],r=i[1],c[s.index]=s,a){a*=Math.PI/180;var u=Math.cos(a),h=Math.sin(a),A=function(e){return e.toFixed(4)},f=[A(u),A(h),A(-1*h),A(u),0,0,"cm"]}this.internal.write("q"),a?(this.internal.write([1,"0","0",1,o(e),l(t+r),"cm"].join(" ")),this.internal.write(f.join(" ")),this.internal.write([o(n),"0","0",o(r),"0","0","cm"].join(" "))):this.internal.write([o(n),"0","0",o(r),o(e),l(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+s.index+" Do"),this.internal.write("Q")},x=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(e){var t,n,r=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(N(e))for(n=e.byteLength/2,t=0;t<n;t++)r=(r<<5)-r+e[t],r|=0;return r},y=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},w=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null};e.__addimage__.isArrayBuffer=function(e){return e instanceof ArrayBuffer};var N=e.__addimage__.isArrayBufferView=function(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array},j=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},C=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=N(e)?e:new Uint8Array(e),r=0;r<n.length;r+=8192)t+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return t};e.addImage=function(){var e,t,s,a,i,o,l,d,u;if("number"==typeof arguments[1]?(t=n,s=arguments[1],a=arguments[2],i=arguments[3],o=arguments[4],l=arguments[5],d=arguments[6],u=arguments[7]):(t=arguments[1],s=arguments[2],a=arguments[3],i=arguments[4],o=arguments[5],l=arguments[6],d=arguments[7],u=arguments[8]),"object"===(0,r.A)(e=arguments[0])&&!A(e)&&"imageData"in e){var h=e;e=h.imageData,t=h.format||t||n,s=h.x||s||0,a=h.y||a||0,i=h.w||h.width||i,o=h.h||h.height||o,l=h.alias||l,d=h.compression||d,u=h.rotation||h.angle||u}var f=this.internal.getFilters();if(void 0===d&&-1!==f.indexOf("FlateEncode")&&(d="SLOW"),isNaN(s)||isNaN(a))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var p=B.call(this,e,t,l,d);return g.call(this,s,a,i,o,p,u),this};var B=function(t,r,s,i){var o,l,c;if("string"==typeof t&&a(t)===n){t=unescape(t);var d=k(t,!1);(""!==d||void 0!==(d=e.loadFile(t,!0)))&&(t=d)}if(A(t)&&(t=f(t,r)),r=a(t,r),!h(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if((null==(c=s)||0===c.length)&&(s=function(e){return"string"==typeof e||N(e)?b(e):N(e.data)?b(e.data):null}(t)),(o=p.call(this,s))||(t instanceof Uint8Array||"RGBA"===r||(l=t,t=j(t)),o=this["process"+r.toUpperCase()](t,u.call(this),s,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:v.NONE}(i),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},k=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var n,r="";if("string"==typeof e){var s;n=null!==(s=w(e))&&void 0!==s?s:e;try{r=js(n)}catch(a){if(t)throw y(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+a.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};e.getImageProperties=function(t){var r,s,i="";if(A(t)&&(t=f(t)),"string"==typeof t&&a(t)===n&&(""===(i=k(t,!1))&&(i=e.loadFile(t)||""),t=i),s=a(t),!h(s))throw new Error("addImage does not support files of type '"+s+"', please ensure that a plugin for '"+s+"' support is added.");if(t instanceof Uint8Array||(t=j(t)),!(r=this["process"+s.toUpperCase()](t)))throw new Error("An unknown error occurred whilst processing the image");return r.fileType=s,r}}(Xs.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};Xs.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,r,s,a=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,d=0;d<l.length&&!c;d++)switch((n=l[d]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var u=0;u<l.length;u++){n=l[u];var h=this.internal.pdfEscape,A=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),m=this.internal.getEncryptor(f.objId),g=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(r="/Rect ["+a(n.bounds.x)+" "+i(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+i(n.bounds.y)+"] ")+"/Contents ("+h(m(n.contents))+")",s+=" /Popup "+p.objId+" 0 R",s+=" /P "+o.objId+" 0 R",s+=" /T ("+h(m(g))+") >>",f.content=s;var x=f.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+a(n.bounds.x+30)+" "+i(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+i(n.bounds.y)+"] ")+" /Parent "+x,n.open&&(s+=" /Open true"),s+=" >>",p.content=s,this.internal.write(f.objId,"0 R",p.objId,"0 R");break;case"freetext":r="/Rect ["+a(n.bounds.x)+" "+i(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+i(n.bounds.y+n.bounds.h)+"] ";var v=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+h(A(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+v+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var b=this.annotations._nameMap[n.options.name];n.options.pageNumber=b.page,n.options.top=b.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+h(A(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var y=i(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+y+" "+n.options.zoom+"]"}""!=s&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,r,s){var a=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:i(e),y:o(t),w:i(e+n),h:o(t+r)},options:s,type:"link"})},e.textWithLink=function(e,t,n,r){var s,a,i=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){a=r.maxWidth;var l=this.splitTextToSize(e,a).length;s=Math.ceil(o*l)}else a=i,s=o;return this.text(e,t,n,r),n+=.2*o,"center"===r.align&&(t-=i/2),"right"===r.align&&(t-=i),this.link(t,n-o,a,s,r),i},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(Xs.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},i=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return i(e)&&a(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return i(e)&&s.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return i(e)&&a(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return i(e)&&a(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return i(e)&&a(e)&&t[e.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return i(e)&&a(e)&&4==t[e.charCodeAt(0)].length},u=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=n,s="",a=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(a++,"number"==typeof(r=r[e.charCodeAt(t)])&&(s+=String.fromCharCode(r),r=n,a=0),t===e.length-1&&(r=n,s+=e.charAt(t-(a-1)),t-=a-1,a=0)):(r=n,s+=e.charAt(t-a),t-=a,a=0);return s};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,n){return i(e)?!1===a(e)?-1:!c(e)||!i(t)&&!i(n)||!i(n)&&o(t)||o(e)&&!i(t)||o(e)&&l(t)||o(e)&&o(t)?0:d(e)&&i(t)&&!o(t)&&i(n)&&c(n)?3:o(e)||!i(n)?1:2:-1},A=function(e){var n=0,r=0,s=0,a="",o="",l="",c=(e=e||"").split("\\s+"),d=[];for(n=0;n<c.length;n+=1){for(d.push(""),r=0;r<c[n].length;r+=1)a=c[n][r],o=c[n][r-1],l=c[n][r+1],i(a)?(s=h(a,o,l),d[n]+=-1!==s?String.fromCharCode(t[a.charCodeAt(0)][s]):a):d[n]+=a;d[n]=u(d[n])}return d.join(" ")},f=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?n.push([A(t[r][0]),t[r][1],t[r][2]]):n.push([A(t[r])]);e=n}else e=A(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",f])}(Xs.API),Xs.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform","javascript"===e.variant?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(e){s=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Xs.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,s=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var s=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return s},set:function(e){s=e}});var a=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var i=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return i},set:function(e){i=e}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return s.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){s.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),r=t.font||this.getFont(),a=t.scaleFactor||this.internal.scaleFactor,i=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var d=t.maxWidth;d>0?"string"==typeof e?e=this.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,d))},[])):e=Array.isArray(e)?e:[e];for(var u=0;u<e.length;u++)i<(l=this.getStringUnitWidth(e[u],{font:r})*n)&&(i=l);return 0!==i&&(o=e.length),{w:i/=a,h:Math.max((o*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/a,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var e;e=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var r=this.internal.__cell__.lastCell,a=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==r.lineNumber&&(r.lineNumber===e.lineNumber?(e.x=(r.x||0)+(r.width||0),e.y=r.y||0):r.y+r.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=r.y+r.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-a,e.y+a,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+a,{align:"center",baseline:"top",maxWidth:e.width-a-a}):this.text(e.text,e.x+a,e.y+a,{align:"left",baseline:"top",maxWidth:e.width-a-a})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,c,d,u){if(s.call(this),!c)throw new Error("No data for PDF table.");var h,A,f,p,m=[],g=[],x=[],v={},b={},y=[],w=[],N=(u=u||{}).autoSize||!1,j=!1!==u.printHeaders,C=u.css&&void 0!==u.css["font-size"]?16*u.css["font-size"]:u.fontSize||12,B=u.margins||Object.assign({width:this.getPageWidth()},t),k="number"==typeof u.padding?u.padding:3,S=u.headerBackgroundColor||"#c8c8c8",_=u.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=C,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=S,this.internal.__cell__.headerTextColor=_,this.setFontSize(C),null==d)g=m=Object.keys(c[0]),x=m.map(function(){return"left"});else if(Array.isArray(d)&&"object"===(0,r.A)(d[0]))for(m=d.map(function(e){return e.name}),g=d.map(function(e){return e.prompt||e.name||""}),x=d.map(function(e){return e.align||"left"}),h=0;h<d.length;h+=1)b[d[h].name]=.7499990551181103*d[h].width;else Array.isArray(d)&&"string"==typeof d[0]&&(g=m=d,x=m.map(function(){return"left"}));if(N||Array.isArray(d)&&"string"==typeof d[0])for(h=0;h<m.length;h+=1){for(v[p=m[h]]=c.map(function(e){return e[p]}),this.setFont(void 0,"bold"),y.push(this.getTextDimensions(g[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),A=v[p],this.setFont(void 0,"normal"),f=0;f<A.length;f+=1)y.push(this.getTextDimensions(A[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);b[p]=Math.max.apply(null,y)+k+k,y=[]}if(j){var E={};for(h=0;h<m.length;h+=1)E[m[h]]={},E[m[h]].text=g[h],E[m[h]].align=x[h];var F=l.call(this,E,b);w=m.map(function(t){return new i(e,n,b[t],F,E[t].text,void 0,E[t].align)}),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var T=d.reduce(function(e,t){return e[t.name]=t.align,e},{});for(h=0;h<c.length;h+=1){"rowStart"in u&&u.rowStart instanceof Function&&u.rowStart({row:h,data:c[h]},this);var I=l.call(this,c[h],b);for(f=0;f<m.length;f+=1){var D=c[h][m[f]];"cellStart"in u&&u.cellStart instanceof Function&&u.cellStart({row:h,col:f,data:D},this),o.call(this,new i(e,n,b[m[f]],I,D,h+2,T[m[f]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var l=function(e,t){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,s=this.internal.scaleFactor;return Object.keys(e).map(function(r){var s=e[r];return this.splitTextToSize(s.hasOwnProperty("text")?s.text:s,t[r]-n-n)},this).map(function(e){return this.getLineHeightFactor()*e.length*r/s+n+n},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){s.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var r;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var a=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(a[0],a[1],a[2],a[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){r=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(r.y=this.internal.__cell__.margins.top||0,l.push(r)),r.lineNumber=e;var d=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,r),this.setTextColor(d)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(Xs.API);var Ua={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Oa=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ma=Ra(Oa),Qa=[100,200,300,400,500,600,700,800,900],Ha=Ra(Qa);function za(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return Ua[e=e||"normal"]?e:"normal"}(e.style),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),s=function(e){return"number"==typeof Ma[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,n,r].join(" ")}}}function Wa(e,t,n,r){var s;for(s=n;s>=0&&s<t.length;s+=r)if(e[t[s]])return e[t[s]];for(s=n;s>=0&&s<t.length;s-=r)if(e[t[s]])return e[t[s]]}var Va={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Ka={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Ga(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function qa(e){return e.trimLeft()}function Xa(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Ya(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var Ja,Za,$a,ei,ti,ni,ri,si,ai,ii=["times"];function oi(e,t,n,r){var s=4,a=di;switch(r){case Xs.API.image_compression.FAST:s=1,a=ci;break;case Xs.API.image_compression.MEDIUM:s=6,a=ui;break;case Xs.API.image_compression.SLOW:s=9,a=hi}e=function(e,t,n,r){for(var s,a=e.length/t,i=new Uint8Array(e.length+a),o=[li,ci,di,ui,hi],l=0;l<a;l+=1){var c=l*t,d=e.subarray(c,c+t);if(r)i.set(r(d,n,s),c+l);else{for(var u=o.length,h=[],A=0;A<u;A+=1)h[A]=o[A](d,n,s);var f=fi(h.concat());i.set(h[f],c+l)}s=d}return i}(e,t,n,a);var i=Q(e,{level:s});return Xs.API.__addimage__.arrayBufferToBinaryString(i)}function li(e){var t=Array.apply([],e);return t.unshift(0),t}function ci(e,t){var n=e.length,r=[];r[0]=1;for(var s=0;s<n;s+=1){var a=e[s-t]||0;r[s+1]=e[s]-a+256&255}return r}function di(e,t,n){var r=e.length,s=[];s[0]=2;for(var a=0;a<r;a+=1){var i=n&&n[a]||0;s[a+1]=e[a]-i+256&255}return s}function ui(e,t,n){var r=e.length,s=[];s[0]=3;for(var a=0;a<r;a+=1){var i=e[a-t]||0,o=n&&n[a]||0;s[a+1]=e[a]+256-(i+o>>>1)&255}return s}function hi(e,t,n){var r=e.length,s=[];s[0]=4;for(var a=0;a<r;a+=1){var i=Ai(e[a-t]||0,n&&n[a]||0,n&&n[a-t]||0);s[a+1]=e[a]-i+256&255}return s}function Ai(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),s=Math.abs(e-n),a=Math.abs(e+t-n-n);return r<=s&&r<=a?e:s<=a?t:n}function fi(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))}function pi(e,t,n){var r=t*n,s=Math.floor(r/8),a=16-(r-8*s+n),i=(1<<n)-1;return gi(e,s)>>a&i}function mi(e,t,n,r){var s=n*r,a=Math.floor(s/8),i=16-(s-8*a+r),o=(1<<r)-1,l=(t&o)<<i;!function(e,t,n){if(t+1<e.byteLength)e.setUint16(t,n,!1);else{var r=n>>8&255;e.setUint8(t,r)}}(e,a,gi(e,a)&~(o<<i)&65535|l)}function gi(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function xi(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,s=e[t++],a=s>>7,i=1<<1+(7&s);e[t++],e[t++];var o=null,l=null;a&&(o=t,l=i,t+=3*i);var c=!0,d=[],u=0,h=null,A=0,f=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,f=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(0===k)break;t+=k}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var p=e[t++];u=e[t++]|e[t++]<<8,h=e[t++],1&p||(h=null),A=p>>2&7,t++;break;case 254:for(;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(0===k)break;t+=k}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var m=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++],y=b>>6&1,w=1<<1+(7&b),N=o,j=l,C=!1;b>>7&&(C=!0,N=t,j=w,t+=3*w);var B=t;for(t++;;){var k;if(!((k=e[t++])>=0))throw Error("Invalid block size");if(0===k)break;t+=k}d.push({x:m,y:g,width:x,height:v,has_local_palette:C,palette_offset:N,palette_size:j,data_offset:B,data_length:t-B,transparent_index:h,interlaced:!!y,delay:u,disposal:A});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return f},this.frameInfo=function(e){if(e<0||e>=d.length)throw new Error("Frame index out of range.");return d[e]},this.decodeAndBlitFrameBGRA=function(t,r){var s=this.frameInfo(t),a=s.width*s.height,i=new Uint8Array(a);vi(e,s.data_offset,i,a);var o=s.palette_offset,l=s.transparent_index;null===l&&(l=256);var c=s.width,d=n-c,u=c,h=4*(s.y*n+s.x),A=4*((s.y+s.height)*n+s.x),f=h,p=4*d;!0===s.interlaced&&(p+=4*n*7);for(var m=8,g=0,x=i.length;g<x;++g){var v=i[g];if(0===u&&(u=c,(f+=p)>=A&&(p=4*d+4*n*(m-1),f=h+(c+d)*(m<<1),m>>=1)),v===l)f+=4;else{var b=e[o+3*v],y=e[o+3*v+1],w=e[o+3*v+2];r[f++]=w,r[f++]=y,r[f++]=b,r[f++]=255}--u}},this.decodeAndBlitFrameRGBA=function(t,r){var s=this.frameInfo(t),a=s.width*s.height,i=new Uint8Array(a);vi(e,s.data_offset,i,a);var o=s.palette_offset,l=s.transparent_index;null===l&&(l=256);var c=s.width,d=n-c,u=c,h=4*(s.y*n+s.x),A=4*((s.y+s.height)*n+s.x),f=h,p=4*d;!0===s.interlaced&&(p+=4*n*7);for(var m=8,g=0,x=i.length;g<x;++g){var v=i[g];if(0===u&&(u=c,(f+=p)>=A&&(p=4*d+4*n*(m-1),f=h+(c+d)*(m<<1),m>>=1)),v===l)f+=4;else{var b=e[o+3*v],y=e[o+3*v+1],w=e[o+3*v+2];r[f++]=b,r[f++]=y,r[f++]=w,r[f++]=255}--u}}}function vi(e,t,n,r){for(var s=e[t++],a=1<<s,i=a+1,o=i+1,l=s+1,c=(1<<l)-1,d=0,u=0,h=0,A=e[t++],f=new Int32Array(4096),p=null;;){for(;d<16&&0!==A;)u|=e[t++]<<d,d+=8,1===A?A=e[t++]:--A;if(d<l)break;var m=u&c;if(u>>=l,d-=l,m!==a){if(m===i)break;for(var g=m<o?m:p,x=0,v=g;v>a;)v=f[v]>>8,++x;var b=v;if(h+x+(g!==m?1:0)>r)return void xs.log("Warning, gif stream longer than expected.");n[h++]=b;var y=h+=x;for(g!==m&&(n[h++]=b),v=g;x--;)v=f[v],n[--y]=255&v,v>>=8;null!==p&&o<4096&&(f[o++]=p<<8|b,o>=c+1&&l<12&&(++l,c=c<<1|1)),p=m}else o=i+1,c=(1<<(l=s+1))-1,p=null}return h!==r&&xs.log("Warning, gif stream shorter than expected."),n}function bi(e){var t,n,r,s,a,i=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(65535),h=new Array(65535),A=new Array(64),f=new Array(64),p=[],m=0,g=7,x=new Array(64),v=new Array(64),b=new Array(64),y=new Array(256),w=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],_=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],F=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function T(e,t){for(var n=0,r=0,s=new Array,a=1;a<=16;a++){for(var i=1;i<=e[a];i++)s[t[r]]=[],s[t[r]][0]=n,s[t[r]][1]=a,r++,n++;n*=2}return s}function I(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(m|=1<<g),n--,--g<0&&(255==m?(D(255),D(0)):D(m),g=7,m=0)}function D(e){p.push(e)}function L(e){D(e>>8&255),D(255&e)}function P(e,t,n,r,s){for(var a,i=s[0],o=s[240],l=function(e,t){var n,r,s,a,i,o,l,c,d,u,h=0;for(d=0;d<8;++d){n=e[h],r=e[h+1],s=e[h+2],a=e[h+3],i=e[h+4],o=e[h+5],l=e[h+6];var f=n+(c=e[h+7]),p=n-c,m=r+l,g=r-l,x=s+o,v=s-o,b=a+i,y=a-i,w=f+b,N=f-b,j=m+x,C=m-x;e[h]=w+j,e[h+4]=w-j;var B=.707106781*(C+N);e[h+2]=N+B,e[h+6]=N-B;var k=.382683433*((w=y+v)-(C=g+p)),S=.5411961*w+k,_=1.306562965*C+k,E=.707106781*(j=v+g),F=p+E,T=p-E;e[h+5]=T+S,e[h+3]=T-S,e[h+1]=F+_,e[h+7]=F-_,h+=8}for(h=0,d=0;d<8;++d){n=e[h],r=e[h+8],s=e[h+16],a=e[h+24],i=e[h+32],o=e[h+40],l=e[h+48];var I=n+(c=e[h+56]),D=n-c,L=r+l,P=r-l,R=s+o,U=s-o,O=a+i,M=a-i,Q=I+O,H=I-O,z=L+R,W=L-R;e[h]=Q+z,e[h+32]=Q-z;var V=.707106781*(W+H);e[h+16]=H+V,e[h+48]=H-V;var K=.382683433*((Q=M+U)-(W=P+D)),G=.5411961*Q+K,q=1.306562965*W+K,X=.707106781*(z=U+P),Y=D+X,J=D-X;e[h+40]=J+G,e[h+24]=J-G,e[h+8]=Y+q,e[h+56]=Y-q,h++}for(d=0;d<64;++d)u=e[d]*t[d],A[d]=u>0?u+.5|0:u-.5|0;return A}(e,t),c=0;c<64;++c)f[N[c]]=l[c];var d=f[0]-n;n=f[0],0==d?I(r[0]):(I(r[h[a=32767+d]]),I(u[a]));for(var p=63;p>0&&0==f[p];)p--;if(0==p)return I(i),n;for(var m,g=1;g<=p;){for(var x=g;0==f[g]&&g<=p;)++g;var v=g-x;if(v>=16){m=v>>4;for(var b=1;b<=m;++b)I(o);v&=15}a=32767+f[g],I(s[(v<<4)+h[a]]),I(u[a]),g++}return 63!=p&&I(i),n}function R(e){e=Math.min(Math.max(e,1),100),a!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=i((t[n]*e+50)/100);r=Math.min(Math.max(r,1),255),o[N[n]]=r}for(var s=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],a=0;a<64;a++){var u=i((s[a]*e+50)/100);u=Math.min(Math.max(u,1),255),l[N[a]]=u}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],A=0,f=0;f<8;f++)for(var p=0;p<8;p++)c[A]=1/(o[N[A]]*h[f]*h[p]*8),d[A]=1/(l[N[A]]*h[f]*h[p]*8),A++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),a=e)}this.encode=function(e,a){a&&R(a),p=new Array,m=0,g=7,L(65496),L(65504),L(16),D(74),D(70),D(73),D(70),D(0),D(1),D(1),D(0),L(1),L(1),D(0),D(0),function(){L(65499),L(132),D(0);for(var e=0;e<64;e++)D(o[e]);D(1);for(var t=0;t<64;t++)D(l[t])}(),function(e,t){L(65472),L(17),D(8),L(t),L(e),D(3),D(1),D(17),D(0),D(2),D(17),D(1),D(3),D(17),D(1)}(e.width,e.height),function(){L(65476),L(418),D(0);for(var e=0;e<16;e++)D(j[e+1]);for(var t=0;t<=11;t++)D(C[t]);D(16);for(var n=0;n<16;n++)D(B[n+1]);for(var r=0;r<=161;r++)D(k[r]);D(1);for(var s=0;s<16;s++)D(S[s+1]);for(var a=0;a<=11;a++)D(_[a]);D(17);for(var i=0;i<16;i++)D(E[i+1]);for(var o=0;o<=161;o++)D(F[o])}(),L(65498),L(12),D(3),D(1),D(0),D(2),D(17),D(3),D(17),D(0),D(63),D(0);var i=0,u=0,h=0;m=0,g=7,this.encode.displayName="_encode_";for(var A,f,y,N,T,U,O,M,Q,H=e.data,z=e.width,W=e.height,V=4*z,K=0;K<W;){for(A=0;A<V;){for(T=V*K+A,O=-1,M=0,Q=0;Q<64;Q++)U=T+(M=Q>>3)*V+(O=4*(7&Q)),K+M>=W&&(U-=V*(K+1+M-W)),A+O>=V&&(U-=A+O-V+4),f=H[U++],y=H[U++],N=H[U++],x[Q]=(w[f]+w[y+256|0]+w[N+512|0]>>16)-128,v[Q]=(w[f+768|0]+w[y+1024|0]+w[N+1280|0]>>16)-128,b[Q]=(w[f+1280|0]+w[y+1536|0]+w[N+1792|0]>>16)-128;i=P(x,c,i,t,r),u=P(v,d,u,n,s),h=P(b,d,h,n,s),A+=32}K+=8}if(g>=0){var G=[];G[1]=g+1,G[0]=(1<<g+1)-1,I(G)}return L(65497),new Uint8Array(p)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)y[t]=e(t)}(),t=T(j,C),n=T(S,_),r=T(B,k),s=T(E,F),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)h[32767+r]=n,u[32767+r]=[],u[32767+r][1]=n,u[32767+r][0]=r;for(var s=-(t-1);s<=-e;s++)h[32767+s]=n,u[32767+s]=[],u[32767+s][1]=n,u[32767+s][0]=t-1+s;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)w[e]=19595*e,w[e+256|0]=38470*e,w[e+512|0]=7471*e+32768,w[e+768|0]=-11059*e,w[e+1024|0]=-21709*e,w[e+1280|0]=32768*e+8421375,w[e+1536|0]=-27439*e,w[e+1792|0]=-5329*e}(),R(e)}function yi(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function wi(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var r=0;4>r;r++)if(e[t+r]!=n.charCodeAt(r))return!0;return!1}function r(e,t,n,r,s){for(var a=0;a<s;a++)e[t+a]=n[r+a]}function s(e,t,n,r){for(var s=0;s<r;s++)e[t+s]=n}function a(e){return new Int32Array(e)}function i(e,t){for(var n=[],r=0;r<e;r++)n.push(new t);return n}function o(e,t){var n=[];return function e(n,r,s){for(var a=s[r],i=0;i<a&&(n.push(s.length>r+1?[]:new t),!(s.length<r+1));i++)e(n[i],r+1,s)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function c(e,n,r,s,a){t(!(s%r));do{e[n+(s-=r)]=a}while(0<s)}function d(e,n,r,s,i){if(t(2328>=i),512>=i)var o=a(512);else if(null==(o=a(i)))return 0;return function(e,n,r,s,i,o){var d,h,A=n,f=1<<r,p=a(16),m=a(16);for(t(0!=i),t(null!=s),t(null!=e),t(0<r),h=0;h<i;++h){if(15<s[h])return 0;++p[s[h]]}if(p[0]==i)return 0;for(m[1]=0,d=1;15>d;++d){if(p[d]>1<<d)return 0;m[d+1]=m[d]+p[d]}for(h=0;h<i;++h)d=s[h],0<s[h]&&(o[m[d]++]=h);if(1==m[15])return(s=new u).g=0,s.value=o[0],c(e,A,1,f,s),f;var g,x=-1,v=f-1,b=0,y=1,w=1,N=1<<r;for(h=0,d=1,i=2;d<=r;++d,i<<=1){if(y+=w<<=1,0>(w-=p[d]))return 0;for(;0<p[d];--p[d])(s=new u).g=d,s.value=o[h++],c(e,A+b,i,N,s),b=l(b,d)}for(d=r+1,i=2;15>=d;++d,i<<=1){if(y+=w<<=1,0>(w-=p[d]))return 0;for(;0<p[d];--p[d]){if(s=new u,(b&v)!=x){for(A+=N,g=1<<(x=d)-r;15>x&&!(0>=(g-=p[x]));)++x,g<<=1;f+=N=1<<(g=x-r),e[n+(x=b&v)].g=g+r,e[n+x].value=A-n-x}s.g=d-r,s.value=o[h++],c(e,A+(b>>r),i,N,s),b=l(b,d)}}return y!=2*m[15]-1?0:f}(e,n,r,s,i,o)}function u(){this.value=this.g=0}function h(){this.value=this.g=0}function A(){this.G=i(5,u),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Un,h)}function f(e,n,r,s){t(null!=e),t(null!=n),t(2147483648>s),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=r,e.Jd=n,e.Yc=r+s,e.Zc=4<=s?r+s-4+1:r,B(e)}function p(e,t){for(var n=0;0<t--;)n|=S(e,128)<<t;return n}function m(e,t){var n=p(e,t);return k(e)?-n:n}function g(e,n,r,s){var a,i=0;for(t(null!=e),t(null!=n),t(4294967288>s),e.Sb=s,e.Ra=0,e.u=0,e.h=0,4<s&&(s=4),a=0;a<s;++a)i+=n[r+a]<<8*a;e.Ra=i,e.bb=s,e.oa=n,e.pa=r}function x(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Qn-8>>>0,++e.bb,e.u-=8;N(e)&&(e.h=1,e.u=0)}function v(e,n){if(t(0<=n),!e.h&&n<=Mn){var r=w(e)&On[n];return e.u+=n,x(e),r}return e.h=1,e.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function y(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function w(e){return e.Ra>>>(e.u&Qn-1)>>>0}function N(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Qn}function j(e,t){e.u=t,e.h=N(e)}function C(e){e.u>=Hn&&(t(e.u>=Hn),x(e))}function B(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function k(e){return p(e,1)}function S(e,t){var n=e.Ca;0>e.b&&B(e);var r=e.b,s=n*t>>>8,a=(e.I>>>r>s)+0;for(a?(n-=s,e.I-=s+1<<r>>>0):n=s+1,r=n,s=0;256<=r;)s+=8,r>>=8;return r=7^s+zn[r],e.b-=r,e.Ca=(n<<r)-1,a}function _(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function E(e,t){return e[t+0]|e[t+1]<<8}function F(e,t){return E(e,t)|e[t+2]<<16}function T(e,t){return E(e,t)|E(e,t+2)<<16}function I(e,n){var r=1<<n;return t(null!=e),t(0<n),e.X=a(r),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function D(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function L(){this.X=[],this.Xa=this.Mb=0}function P(e,n,r,s){t(null!=r),t(null!=s);var a=r[0],i=s[0];return 0==a&&(a=(e*i+n/2)/n),0==i&&(i=(n*a+e/2)/e),0>=a||0>=i?0:(r[0]=a,s[0]=i,1)}function R(e,t){return e+(1<<t)-1>>>t}function U(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function O(t,n){e[n]=function(n,r,s,a,i,o,l){var c;for(c=0;c<i;++c){var d=e[t](o[l+c-1],s,a+c);o[l+c]=U(n[r+c],d)}}}function M(){this.ud=this.hd=this.jd=0}function Q(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function H(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function z(e,t){return H(e+(e-t+.5>>1))}function W(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function V(e,t,n,r,s,a,i){for(r=a[i-1],n=0;n<s;++n)a[i+n]=r=U(e[t+n],r)}function K(e,t,n,r,s){var a;for(a=0;a<n;++a){var i=e[t+a],o=i>>8&255,l=16711935&(l=(l=16711935&i)+((o<<16)+o));r[s+a]=(4278255360&i)+l>>>0}}function G(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function q(e,t,n,r,s,a){var i;for(i=0;i<r;++i){var o=t[n+i],l=o>>>8,c=o,d=255&(d=(d=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(d<<24>>24)>>>5)),s[a+i]=(4278255360&o)+(d<<16)+c}}function X(t,n,r,s,a){e[n]=function(e,t,n,r,i,o,l,c,d){for(r=l;r<c;++r)for(l=0;l<d;++l)i[o++]=a(n[s(e[t++])])},e[t]=function(t,n,i,o,l,c,d){var u=8>>t.b,h=t.Ea,A=t.K[0],f=t.w;if(8>u)for(t=(1<<t.b)-1,f=(1<<u)-1;n<i;++n){var p,m=0;for(p=0;p<h;++p)p&t||(m=s(o[l++])),c[d++]=a(A[m&f]),m>>=u}else e["VP8LMapColor"+r](o,l,A,f,c,d,n,i,h)}}function Y(e,t,n,r,s){for(n=t+n;t<n;){var a=e[t++];r[s++]=a>>16&255,r[s++]=a>>8&255,r[s++]=255&a}}function J(e,t,n,r,s){for(n=t+n;t<n;){var a=e[t++];r[s++]=a>>16&255,r[s++]=a>>8&255,r[s++]=255&a,r[s++]=a>>24&255}}function Z(e,t,n,r,s){for(n=t+n;t<n;){var a=(i=e[t++])>>16&240|i>>12&15,i=240&i|i>>28&15;r[s++]=a,r[s++]=i}}function $(e,t,n,r,s){for(n=t+n;t<n;){var a=(i=e[t++])>>16&248|i>>13&7,i=i>>5&224|i>>3&31;r[s++]=a,r[s++]=i}}function ee(e,t,n,r,s){for(n=t+n;t<n;){var a=e[t++];r[s++]=255&a,r[s++]=a>>8&255,r[s++]=a>>16&255}}function te(e,t,n,s,a,i){if(0==i)for(n=t+n;t<n;)_(s,((i=e[t++])[0]>>24|i[1]>>8&65280|i[2]<<8&16711680|i[3]<<24)>>>0),a+=32;else r(s,a,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function re(e){return e==Hr||e==zr||e==Wr||e==Vr}function se(){this.eb=[],this.size=this.A=this.fb=0}function ae(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ie(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new se,this.f.kb=new ae,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function de(e,t){var n=e.T,s=t.ba.f.RGBA,a=s.eb,i=s.fb+e.ka*s.A,o=ms[t.ba.S],l=e.y,c=e.O,d=e.f,u=e.N,h=e.ea,A=e.W,f=t.cc,p=t.dc,m=t.Mc,g=t.Nc,x=e.ka,v=e.ka+e.T,b=e.U,y=b+1>>1;for(0==x?o(l,c,null,null,d,u,h,A,d,u,h,A,a,i,null,null,b):(o(t.ec,t.fc,l,c,f,p,m,g,d,u,h,A,a,i-s.A,a,i,b),++n);x+2<v;x+=2)f=d,p=u,m=h,g=A,u+=e.Rc,A+=e.Rc,i+=2*s.A,o(l,(c+=2*e.fa)-e.fa,l,c,f,p,m,g,d,u,h,A,a,i-s.A,a,i,b);return c+=e.fa,e.j+v<e.o?(r(t.ec,t.fc,l,c,b),r(t.cc,t.dc,d,u,y),r(t.Mc,t.Nc,h,A,y),n--):1&v||o(l,c,null,null,d,u,h,A,d,u,h,A,a,i+s.A,null,null,b),n}function ue(e,n,r){var s=e.F,a=[e.J];if(null!=s){var i=e.U,o=n.ba.S,l=o==Or||o==Wr;n=n.ba.f.RGBA;var c=[0],d=e.ka;c[0]=e.T,e.Kb&&(0==d?--c[0]:(--d,a[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-d));var u=n.eb;d=n.fb+d*n.A,e=jr(s,a[0],e.width,i,c,u,d+(l?0:3),n.A),t(r==c),e&&re(o)&&wr(u,d,l,i,c,n.A)}return 0}function he(e){var t=e.ma,n=t.ba.S,r=11>n,s=n==Pr||n==Ur||n==Or||n==Mr||12==n||re(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Ln(t.Oa,e,s?11:12))return 0;if(s&&re(n)&&xn(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=ce,e.Kb){if(n=e.U+1>>1,t.memory=a(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=de,xn()}}else alert("todo:EmitYUV");s&&(t.Jb=ue,r&&mn())}if(r&&!Es){for(e=0;256>e;++e)Fs[e]=89858*(e-128)+Cs>>js,Ds[e]=-22014*(e-128)+Cs,Is[e]=-45773*(e-128),Ts[e]=113618*(e-128)+Cs>>js;for(e=Bs;e<ks;++e)t=76283*(e-16)+Cs>>js,Ls[e-Bs]=Ve(t,255),Ps[e-Bs]=Ve(t+8>>4,15);Es=1}return 1}function Ae(e){var n=e.ma,r=e.U,s=e.T;return t(!(1&e.ka)),0>=r||0>=s?0:(r=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,r),n.Dc+=r,1)}function fe(e){e.ma.memory=null}function pe(e,t,n,r){return 47!=v(e,8)?0:(t[0]=v(e,14)+1,n[0]=v(e,14)+1,r[0]=v(e,1),0!=v(e,3)?0:!e.h)}function me(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+v(t,n)+1}function ge(e,t){return 120<t?t-120:1<=(n=((n=Jr[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function xe(e,t,n){var r=w(n),s=e[t+=255&r].g-8;return 0<s&&(j(n,n.u+8),r=w(n),t+=e[t].value,t+=r&(1<<s)-1),j(n,n.u+e[t].g),e[t].value}function ve(e,n,r){return r.g+=e.g,r.value+=e.value<<n>>>0,t(8>=r.g),e.g}function be(e,n,r){var s=e.xc;return t((n=0==s?0:e.vc[e.md*(r>>s)+(n>>s)])<e.Wb),e.Ya[n]}function ye(e,n,s,a){var i=e.ab,o=e.c*n,l=e.C;n=l+n;var c=s,d=a;for(a=e.Ta,s=e.Ua;0<i--;){var u=e.gc[i],h=l,A=n,f=c,p=d,m=(d=a,c=s,u.Ea);switch(t(h<A),t(A<=u.nc),u.hc){case 2:Kn(f,p,(A-h)*m,d,c);break;case 0:var g=h,x=A,v=d,b=c,y=(B=u).Ea;0==g&&(Wn(f,p,null,null,1,v,b),V(f,p+1,0,0,y-1,v,b+1),p+=y,b+=y,++g);for(var w=1<<B.b,N=w-1,j=R(y,B.b),C=B.K,B=B.w+(g>>B.b)*j;g<x;){var k=C,S=B,_=1;for(Vn(f,p,v,b-y,1,v,b);_<y;){var E=(_&~N)+w;E>y&&(E=y),(0,Jn[k[S++]>>8&15])(f,p+ +_,v,b+_-y,E-_,v,b+_),_=E}p+=y,b+=y,++g&N||(B+=j)}A!=u.nc&&r(d,c-m,d,c+(A-h-1)*m,m);break;case 1:for(m=f,x=p,y=(f=u.Ea)-(b=f&~(v=(p=1<<u.b)-1)),g=R(f,u.b),w=u.K,u=u.w+(h>>u.b)*g;h<A;){for(N=w,j=u,C=new M,B=x+b,k=x+f;x<B;)G(N[j++],C),Zn(C,m,x,p,d,c),x+=p,c+=p;x<k&&(G(N[j++],C),Zn(C,m,x,y,d,c),x+=y,c+=y),++h&v||(u+=g)}break;case 3:if(f==d&&p==c&&0<u.b){for(x=d,f=m=c+(A-h)*m-(b=(A-h)*R(u.Ea,u.b)),p=d,v=c,g=[],b=(y=b)-1;0<=b;--b)g[b]=p[v+b];for(b=y-1;0<=b;--b)x[f+b]=g[b];Gn(u,h,A,d,m,d,c)}else Gn(u,h,A,f,p,d,c)}c=a,d=s}d!=s&&r(a,s,c,d,o)}function we(e,n){var r=e.V,s=e.Ba+e.c*e.C,a=n-e.C;if(t(n<=e.l.o),t(16>=a),0<a){var i=e.l,o=e.Ta,l=e.Ua,c=i.width;if(ye(e,a,r,s),a=l=[l],t((r=e.C)<(s=n)),t(i.v<i.va),s>i.o&&(s=i.o),r<i.j){var d=i.j-r;r=i.j,a[0]+=d*c}if(r>=s?r=0:(a[0]+=4*i.v,i.ka=r-i.j,i.U=i.va-i.v,i.T=s-r,r=1),r){if(l=l[0],11>(r=e.ca).S){var u=r.f.RGBA,h=(s=r.S,a=i.U,i=i.T,d=u.eb,u.A),A=i;for(u=u.fb+e.Ma*u.A;0<A--;){var f=o,p=l,m=a,g=d,x=u;switch(s){case Lr:$n(f,p,m,g,x);break;case Pr:er(f,p,m,g,x);break;case Hr:er(f,p,m,g,x),wr(g,x,0,m,1,0);break;case Rr:rr(f,p,m,g,x);break;case Ur:te(f,p,m,g,x,1);break;case zr:te(f,p,m,g,x,1),wr(g,x,0,m,1,0);break;case Or:te(f,p,m,g,x,0);break;case Wr:te(f,p,m,g,x,0),wr(g,x,1,m,1,0);break;case Mr:tr(f,p,m,g,x);break;case Vr:tr(f,p,m,g,x),Nr(g,x,m,1,0);break;case Qr:nr(f,p,m,g,x);break;default:t(0)}l+=c,u+=h}e.Ma+=i}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=n,t(e.C<=e.i)}function Ne(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,r=e.Ya[t].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function je(e,n,r,s,a,i){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=ps[e.Z]);n<r;++n)ps[e.Z](o,l,s,a,s,a,i),o=s,l=a,a+=i;e.qd=o,e.rd=l}}function Ce(e,n){var r=e.l.ma,s=0==r.Z||1==r.Z?e.l.j:e.C;if(s=e.C<s?s:e.C,t(n<=e.l.o),n>s){var a=e.l.width,i=r.ca,o=r.tb+a*s,l=e.V,c=e.Ba+e.c*s,d=e.gc;t(1==e.ab),t(3==d[0].hc),Xn(d[0],s,n,l,c,i,o),je(r,s,n,i,o,a)}e.C=e.Ma=n}function Be(e,n,r,s,a,i,o){var l=e.$/s,c=e.$%s,d=e.m,u=e.s,h=r+e.$,A=h;a=r+s*a;var f=r+s*i,p=280+u.ua,m=e.Pb?l:16777216,g=0<u.ua?u.Wa:null,x=u.wc,v=h<f?be(u,c,l):null;t(e.C<i),t(f<=a);var b=!1;e:for(;;){for(;b||h<f;){var y=0;if(l>=m){var B=h-r;t((m=e).Pb),m.wd=m.m,m.xd=B,0<m.s.ua&&D(m.s.Wa,m.s.vb),m=l+$r}if(c&x||(v=be(u,c,l)),t(null!=v),v.Qb&&(n[h]=v.qb,b=!0),!b)if(C(d),v.jc){y=d,B=n;var k=h,S=v.pd[w(y)&Un-1];t(v.jc),256>S.g?(j(y,y.u+S.g),B[k]=S.value,y=0):(j(y,y.u+S.g-256),t(256<=S.value),y=S.value),0==y&&(b=!0)}else y=xe(v.G[0],v.H[0],d);if(d.h)break;if(b||256>y){if(!b)if(v.nd)n[h]=(v.qb|y<<8)>>>0;else{if(C(d),b=xe(v.G[1],v.H[1],d),C(d),B=xe(v.G[2],v.H[2],d),k=xe(v.G[3],v.H[3],d),d.h)break;n[h]=(k<<24|b<<16|y<<8|B)>>>0}if(b=!1,++h,++c>=s&&(c=0,++l,null!=o&&l<=i&&!(l%16)&&o(e,l),null!=g))for(;A<h;)y=n[A++],g.X[(506832829*y&4294967295)>>>g.Mb]=y}else if(280>y){if(y=me(y-256,d),B=xe(v.G[4],v.H[4],d),C(d),B=ge(s,B=me(B,d)),d.h)break;if(h-r<B||a-h<y)break e;for(k=0;k<y;++k)n[h+k]=n[h+k-B];for(h+=y,c+=y;c>=s;)c-=s,++l,null!=o&&l<=i&&!(l%16)&&o(e,l);if(t(h<=a),c&x&&(v=be(u,c,l)),null!=g)for(;A<h;)y=n[A++],g.X[(506832829*y&4294967295)>>>g.Mb]=y}else{if(!(y<p))break e;for(b=y-280,t(null!=g);A<h;)y=n[A++],g.X[(506832829*y&4294967295)>>>g.Mb]=y;y=h,t(!(b>>>(B=g).Xa)),n[y]=B.X[b],b=!0}b||t(d.h==N(d))}if(e.Pb&&d.h&&h<a)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&D(e.s.vb,e.s.Wa);else{if(d.h)break e;null!=o&&o(e,l>i?i:l),e.a=0,e.$=h-r}return 1}return e.a=3,0}function ke(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Se(){var t=new an;return null==t?null:(t.a=0,t.xb=fs,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Kn=K,Zn=q,$n=Y,er=J,tr=Z,nr=$,rr=ee,e.VP8LMapColor32b=qn,e.VP8LMapColor8b=Yn,t)}function _e(e,n,r,o,l){var c=1,h=[e],f=[n],p=o.m,m=o.s,g=null,x=0;e:for(;;){if(r)for(;c&&v(p,1);){var b=h,y=f,N=o,B=1,k=N.m,S=N.gc[N.ab],_=v(k,2);if(N.Oc&1<<_)c=0;else{switch(N.Oc|=1<<_,S.hc=_,S.Ea=b[0],S.nc=y[0],S.K=[null],++N.ab,t(4>=N.ab),_){case 0:case 1:S.b=v(k,3)+2,B=_e(R(S.Ea,S.b),R(S.nc,S.b),0,N,S.K),S.K=S.K[0];break;case 3:var E,F=v(k,8)+1,T=16<F?0:4<F?1:2<F?2:3;if(b[0]=R(S.Ea,T),S.b=T,E=B=_e(F,1,0,N,S.K)){var D,L=F,P=S,O=1<<(8>>P.b),M=a(O);if(null==M)E=0;else{var Q=P.K[0],H=P.w;for(M[0]=P.K[0][0],D=1;D<1*L;++D)M[D]=U(Q[H+D],M[D-1]);for(;D<4*O;++D)M[D]=0;P.K[0]=null,P.K[0]=M,E=1}}B=E;break;case 2:break;default:t(0)}c=B}}if(h=h[0],f=f[0],c&&v(p,1)&&!(c=1<=(x=v(p,4))&&11>=x)){o.a=3;break e}var z;if(z=c)t:{var W,V,K,G=o,q=h,X=f,Y=x,J=r,Z=G.m,$=G.s,ee=[null],te=1,ne=0,re=Zr[Y];n:for(;;){if(J&&v(Z,1)){var se=v(Z,3)+2,ae=R(q,se),ie=R(X,se),oe=ae*ie;if(!_e(ae,ie,0,G,ee))break n;for(ee=ee[0],$.xc=se,W=0;W<oe;++W){var le=ee[W]>>8&65535;ee[W]=le,le>=te&&(te=le+1)}}if(Z.h)break n;for(V=0;5>V;++V){var ce=qr[V];!V&&0<Y&&(ce+=1<<Y),ne<ce&&(ne=ce)}var de=i(te*re,u),ue=te,he=i(ue,A);if(null==he)var Ae=null;else t(65536>=ue),Ae=he;var fe=a(ne);if(null==Ae||null==fe||null==de){G.a=1;break n}var pe=de;for(W=K=0;W<te;++W){var me=Ae[W],ge=me.G,xe=me.H,be=0,ye=1,we=0;for(V=0;5>V;++V){ce=qr[V],ge[V]=pe,xe[V]=K,!V&&0<Y&&(ce+=1<<Y);r:{var Ne,je=ce,Ce=G,Se=fe,Ee=pe,Fe=K,Te=0,Ie=Ce.m,De=v(Ie,1);if(s(Se,0,0,je),De){var Le=v(Ie,1)+1,Pe=v(Ie,1),Re=v(Ie,0==Pe?1:8);Se[Re]=1,2==Le&&(Se[Re=v(Ie,8)]=1);var Ue=1}else{var Oe=a(19),Me=v(Ie,4)+4;if(19<Me){Ce.a=3;var Qe=0;break r}for(Ne=0;Ne<Me;++Ne)Oe[Yr[Ne]]=v(Ie,3);var He=void 0,ze=void 0,We=Ce,Ve=Oe,Ke=je,Ge=Se,qe=0,Xe=We.m,Ye=8,Je=i(128,u);s:for(;d(Je,0,7,Ve,19);){if(v(Xe,1)){var Ze=2+2*v(Xe,3);if((He=2+v(Xe,Ze))>Ke)break s}else He=Ke;for(ze=0;ze<Ke&&He--;){C(Xe);var $e=Je[0+(127&w(Xe))];j(Xe,Xe.u+$e.g);var et=$e.value;if(16>et)Ge[ze++]=et,0!=et&&(Ye=et);else{var tt=16==et,nt=et-16,rt=Gr[nt],st=v(Xe,Kr[nt])+rt;if(ze+st>Ke)break s;for(var at=tt?Ye:0;0<st--;)Ge[ze++]=at}}qe=1;break s}qe||(We.a=3),Ue=qe}(Ue=Ue&&!Ie.h)&&(Te=d(Ee,Fe,8,Se,je)),Ue&&0!=Te?Qe=Te:(Ce.a=3,Qe=0)}if(0==Qe)break n;if(ye&&1==Xr[V]&&(ye=0==pe[K].g),be+=pe[K].g,K+=Qe,3>=V){var it,ot=fe[0];for(it=1;it<ce;++it)fe[it]>ot&&(ot=fe[it]);we+=ot}}if(me.nd=ye,me.Qb=0,ye&&(me.qb=(ge[3][xe[3]+0].value<<24|ge[1][xe[1]+0].value<<16|ge[2][xe[2]+0].value)>>>0,0==be&&256>ge[0][xe[0]+0].value&&(me.Qb=1,me.qb+=ge[0][xe[0]+0].value<<8)),me.jc=!me.Qb&&6>we,me.jc){var lt,ct=me;for(lt=0;lt<Un;++lt){var dt=lt,ut=ct.pd[dt],ht=ct.G[0][ct.H[0]+dt];256<=ht.value?(ut.g=ht.g+256,ut.value=ht.value):(ut.g=0,ut.value=0,dt>>=ve(ht,8,ut),dt>>=ve(ct.G[1][ct.H[1]+dt],16,ut),dt>>=ve(ct.G[2][ct.H[2]+dt],0,ut),ve(ct.G[3][ct.H[3]+dt],24,ut))}}}$.vc=ee,$.Wb=te,$.Ya=Ae,$.yc=de,z=1;break t}z=0}if(!(c=z)){o.a=3;break e}if(0<x){if(m.ua=1<<x,!I(m.Wa,x)){o.a=1,c=0;break e}}else m.ua=0;var At=o,ft=h,pt=f,mt=At.s,gt=mt.xc;if(At.c=ft,At.i=pt,mt.md=R(ft,gt),mt.wc=0==gt?-1:(1<<gt)-1,r){o.xb=As;break e}if(null==(g=a(h*f))){o.a=1,c=0;break e}c=(c=Be(o,g,0,h,f,f,null))&&!p.h;break e}return c?(null!=l?l[0]=g:(t(null==g),t(r)),o.$=0,r||ke(m)):ke(m),c}function Ee(e,n){var r=e.c*e.i,s=r+n+16*n;return t(e.c<=n),e.V=a(s),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+n,1)}function Fe(e,n){var r=e.C,s=n-r,a=e.V,i=e.Ba+e.c*r;for(t(n<=e.l.o);0<s;){var o=16<s?16:s,l=e.l.ma,c=e.l.width,d=c*o,u=l.ca,h=l.tb+c*r,A=e.Ta,f=e.Ua;ye(e,o,a,i),Cr(A,f,u,h,d),je(l,r,r+o,u,h,c),s-=o,a+=o*e.c,r+=o}t(r==n),e.C=e.Ma=n}function Te(){this.ub=this.yd=this.td=this.Rb=0}function Ie(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function De(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Le(){this.Yb=function(){var e=[];return function e(t,n,r){for(var s=r[n],a=0;a<s&&(t.push(r.length>n+1?[]:0),!(r.length<n+1));a++)e(t[a],n+1,r)}(e,0,[3,11]),e}()}function Pe(){this.jb=a(3),this.Wc=o([4,8],Le),this.Xc=o([4,17],Le)}function Re(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Ue(){this.ld=this.La=this.dd=this.tc=0}function Oe(){this.Na=this.la=0}function Me(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Qe(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function He(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ue),this.Y=0,this.ya=Array(new Qe),this.aa=0,this.l=new Ke}function ze(){this.y=a(16),this.f=a(8),this.ea=a(8)}function We(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new Te,this.Kc=new Ie,this.ed=new Re,this.Qa=new De,this.Ic=this.$c=this.Aa=0,this.D=new He,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,b),this.ia=0,this.pb=i(4,Me),this.Pa=new Pe,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ze),this.Hd=0,this.rb=Array(new Oe),this.sb=0,this.wa=Array(new Ue),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Qe),this.L=this.aa=0,this.gd=o([4,2],Ue),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ve(e,t){return 0>e?0:e>t?t:e}function Ke(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ge(){var e=new We;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ns||(ns=Je)),e}function qe(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Xe(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Ye(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return qe(e,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,a=n.w,i=n.ha;if(4>i)return qe(e,7,"Truncated header.");var o=r[a+0]|r[a+1]<<8|r[a+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return qe(e,3,"Incorrect keyframe parameters.");if(!l.yd)return qe(e,4,"Frame not displayable.");a+=3,i-=3;var c=e.Kc;if(l.Rb){if(7>i)return qe(e,7,"cannot parse picture header");if(!Xe(r,a,i))return qe(e,3,"Bad code word");c.c=16383&(r[a+4]<<8|r[a+3]),c.Td=r[a+4]>>6,c.i=16383&(r[a+6]<<8|r[a+5]),c.Ud=r[a+6]>>6,a+=7,i-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,s((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,s(o.Zb,0,0,o.Zb.length),s(o.Lb,0,0,o.Lb)}if(l.ub>i)return qe(e,7,"bad partition length");f(o=e.m,r,a,l.ub),a+=l.ub,i-=l.ub,l.Rb&&(c.Ld=k(o),c.Kd=k(o)),c=e.Qa;var d,u=e.Pa;if(t(null!=o),t(null!=c),c.Cb=k(o),c.Cb){if(c.Bb=k(o),k(o)){for(c.Fb=k(o),d=0;4>d;++d)c.Zb[d]=k(o)?m(o,7):0;for(d=0;4>d;++d)c.Lb[d]=k(o)?m(o,6):0}if(c.Bb)for(d=0;3>d;++d)u.jb[d]=k(o)?p(o,8):255}else c.Bb=0;if(o.Ka)return qe(e,3,"cannot parse segment header");if((c=e.ed).zd=k(o),c.Tb=p(o,6),c.wb=p(o,3),c.Pc=k(o),c.Pc&&k(o)){for(u=0;4>u;++u)k(o)&&(c.vd[u]=m(o,6));for(u=0;4>u;++u)k(o)&&(c.od[u]=m(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return qe(e,3,"cannot parse filter header");var h=i;if(i=d=a,a=d+h,c=h,e.Xb=(1<<p(e.m,2))-1,h<3*(u=e.Xb))r=7;else{for(d+=3*u,c-=3*u,h=0;h<u;++h){var A=r[i+0]|r[i+1]<<8|r[i+2]<<16;A>c&&(A=c),f(e.Jc[+h],r,d,A),d+=A,c-=A,i+=3}f(e.Jc[+u],r,d,c),r=d<a?0:5}if(0!=r)return qe(e,r,"cannot parse partitions");for(r=p(d=e.m,7),i=k(d)?m(d,4):0,a=k(d)?m(d,4):0,c=k(d)?m(d,4):0,u=k(d)?m(d,4):0,d=k(d)?m(d,4):0,h=e.Qa,A=0;4>A;++A){if(h.Cb){var g=h.Zb[A];h.Fb||(g+=r)}else{if(0<A){e.pb[A]=e.pb[0];continue}g=r}var x=e.pb[A];x.Sc[0]=es[Ve(g+i,127)],x.Sc[1]=ts[Ve(g+0,127)],x.Eb[0]=2*es[Ve(g+a,127)],x.Eb[1]=101581*ts[Ve(g+c,127)]>>16,8>x.Eb[1]&&(x.Eb[1]=8),x.Qc[0]=es[Ve(g+u,117)],x.Qc[1]=ts[Ve(g+d,127)],x.lc=g+d}if(!l.Rb)return qe(e,4,"Not a key frame.");for(k(o),l=e.Pa,r=0;4>r;++r){for(i=0;8>i;++i)for(a=0;3>a;++a)for(c=0;11>c;++c)u=S(o,ls[r][i][a][c])?p(o,8):is[r][i][a][c],l.Wc[r][i].Yb[a][c]=u;for(i=0;17>i;++i)l.Xc[r][i]=l.Wc[r][cs[i]]}return e.kc=k(o),e.kc&&(e.Bd=p(o,8)),e.cb=1}function Je(e,t,n,r,s,a,i){var o=t[s].Yb[n];for(n=0;16>s;++s){if(!S(e,o[n+0]))return s;for(;!S(e,o[n+1]);)if(o=t[++s].Yb[0],n=0,16==s)return 16;var l=t[s+1].Yb;if(S(e,o[n+2])){var c=e,d=0;if(S(c,(h=o)[(u=n)+3]))if(S(c,h[u+6])){for(o=0,u=2*(d=S(c,h[u+8]))+(h=S(c,h[u+9+d])),d=0,h=rs[u];h[o];++o)d+=d+S(c,h[o]);d+=3+(8<<u)}else S(c,h[u+7])?(d=7+2*S(c,165),d+=S(c,145)):d=5+S(c,159);else d=S(c,h[u+4])?3+S(c,h[u+5]):2;o=l[2]}else d=1,o=l[1];l=i+ss[s],0>(c=e).b&&B(c);var u,h=c.b,A=(u=c.Ca>>1)-(c.I>>h)>>31;--c.b,c.Ca+=A,c.Ca|=1,c.I-=(u+1&A)<<h,a[l]=((d^A)-A)*r[(0<s)+0]}return 16}function Ze(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,s(e.zc,0,0,e.zc.length),e.ja=0}function $e(e,t,n,r,s){s=e[t+n+32*r]+(s>>3),e[t+n+32*r]=-256&s?0>s?0:255:s}function et(e,t,n,r,s,a){$e(e,t,0,n,r+s),$e(e,t,1,n,r+a),$e(e,t,2,n,r-a),$e(e,t,3,n,r-s)}function tt(e){return(20091*e>>16)+e}function nt(e,t,n,r){var s,i=0,o=a(16);for(s=0;4>s;++s){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],d=(35468*e[t+4]>>16)-tt(e[t+12]),u=tt(e[t+4])+(35468*e[t+12]>>16);o[i+0]=l+u,o[i+1]=c+d,o[i+2]=c-d,o[i+3]=l-u,i+=4,t++}for(s=i=0;4>s;++s)l=(e=o[i+0]+4)+o[i+8],c=e-o[i+8],d=(35468*o[i+4]>>16)-tt(o[i+12]),$e(n,r,0,0,l+(u=tt(o[i+4])+(35468*o[i+12]>>16))),$e(n,r,1,0,c+d),$e(n,r,2,0,c-d),$e(n,r,3,0,l-u),i++,r+=32}function rt(e,t,n,r){var s=e[t+0]+4,a=35468*e[t+4]>>16,i=tt(e[t+4]),o=35468*e[t+1]>>16;et(n,r,0,s+i,e=tt(e[t+1]),o),et(n,r,1,s+a,e,o),et(n,r,2,s-a,e,o),et(n,r,3,s-i,e,o)}function st(e,t,n,r,s){nt(e,t,n,r),s&&nt(e,t+16,n,r+4)}function at(e,t,n,r){ar(e,t+0,n,r,1),ar(e,t+32,n,r+128,1)}function it(e,t,n,r){var s;for(e=e[t+0]+4,s=0;4>s;++s)for(t=0;4>t;++t)$e(n,r,t,s,e)}function ot(e,t,n,r){e[t+0]&&lr(e,t+0,n,r),e[t+16]&&lr(e,t+16,n,r+4),e[t+32]&&lr(e,t+32,n,r+128),e[t+48]&&lr(e,t+48,n,r+128+4)}function lt(e,t,n,r){var s,i=a(16);for(s=0;4>s;++s){var o=e[t+0+s]+e[t+12+s],l=e[t+4+s]+e[t+8+s],c=e[t+4+s]-e[t+8+s],d=e[t+0+s]-e[t+12+s];i[0+s]=o+l,i[8+s]=o-l,i[4+s]=d+c,i[12+s]=d-c}for(s=0;4>s;++s)o=(e=i[0+4*s]+3)+i[3+4*s],l=i[1+4*s]+i[2+4*s],c=i[1+4*s]-i[2+4*s],d=e-i[3+4*s],n[r+0]=o+l>>3,n[r+16]=d+c>>3,n[r+32]=o-l>>3,n[r+48]=d-c>>3,r+=64}function ct(e,t,n){var r,s=t-32,a=Ir,i=255-e[s-1];for(r=0;r<n;++r){var o,l=a,c=i+e[t-1];for(o=0;o<n;++o)e[t+o]=l[c+e[s+o]];t+=32}}function dt(e,t){ct(e,t,4)}function ut(e,t){ct(e,t,8)}function ht(e,t){ct(e,t,16)}function At(e,t){var n;for(n=0;16>n;++n)r(e,t+32*n,e,t-32,16)}function ft(e,t){var n;for(n=16;0<n;--n)s(e,t,e[t-1],16),t+=32}function pt(e,t,n){var r;for(r=0;16>r;++r)s(t,n+32*r,e,16)}function mt(e,t){var n,r=16;for(n=0;16>n;++n)r+=e[t-1+32*n]+e[t+n-32];pt(r>>5,e,t)}function gt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t-1+32*n];pt(r>>4,e,t)}function xt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t+n-32];pt(r>>4,e,t)}function vt(e,t){pt(128,e,t)}function bt(e,t,n){return e+2*t+n+2>>2}function yt(e,t){var n,s=t-32;for(s=new Uint8Array([bt(e[s-1],e[s+0],e[s+1]),bt(e[s+0],e[s+1],e[s+2]),bt(e[s+1],e[s+2],e[s+3]),bt(e[s+2],e[s+3],e[s+4])]),n=0;4>n;++n)r(e,t+32*n,s,0,s.length)}function wt(e,t){var n=e[t-1],r=e[t-1+32],s=e[t-1+64],a=e[t-1+96];_(e,t+0,16843009*bt(e[t-1-32],n,r)),_(e,t+32,16843009*bt(n,r,s)),_(e,t+64,16843009*bt(r,s,a)),_(e,t+96,16843009*bt(s,a,a))}function Nt(e,t){var n,r=4;for(n=0;4>n;++n)r+=e[t+n-32]+e[t-1+32*n];for(r>>=3,n=0;4>n;++n)s(e,t+32*n,r,4)}function jt(e,t){var n=e[t-1+0],r=e[t-1+32],s=e[t-1+64],a=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=bt(r,s,e[t-1+96]),e[t+1+96]=e[t+0+64]=bt(n,r,s),e[t+2+96]=e[t+1+64]=e[t+0+32]=bt(a,n,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=bt(i,a,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=bt(o,i,a),e[t+3+32]=e[t+2+0]=bt(l,o,i),e[t+3+0]=bt(c,l,o)}function Ct(e,t){var n=e[t+1-32],r=e[t+2-32],s=e[t+3-32],a=e[t+4-32],i=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=bt(e[t+0-32],n,r),e[t+1+0]=e[t+0+32]=bt(n,r,s),e[t+2+0]=e[t+1+32]=e[t+0+64]=bt(r,s,a),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=bt(s,a,i),e[t+3+32]=e[t+2+64]=e[t+1+96]=bt(a,i,o),e[t+3+64]=e[t+2+96]=bt(i,o,l),e[t+3+96]=bt(o,l,l)}function Bt(e,t){var n=e[t-1+0],r=e[t-1+32],s=e[t-1+64],a=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=a+i+1>>1,e[t+1+0]=e[t+2+64]=i+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=bt(s,r,n),e[t+0+64]=bt(r,n,a),e[t+0+32]=e[t+1+96]=bt(n,a,i),e[t+1+32]=e[t+2+96]=bt(a,i,o),e[t+2+32]=e[t+3+96]=bt(i,o,l),e[t+3+32]=bt(o,l,c)}function kt(e,t){var n=e[t+0-32],r=e[t+1-32],s=e[t+2-32],a=e[t+3-32],i=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=n+r+1>>1,e[t+1+0]=e[t+0+64]=r+s+1>>1,e[t+2+0]=e[t+1+64]=s+a+1>>1,e[t+3+0]=e[t+2+64]=a+i+1>>1,e[t+0+32]=bt(n,r,s),e[t+1+32]=e[t+0+96]=bt(r,s,a),e[t+2+32]=e[t+1+96]=bt(s,a,i),e[t+3+32]=e[t+2+96]=bt(a,i,o),e[t+3+64]=bt(i,o,l),e[t+3+96]=bt(o,l,c)}function St(e,t){var n=e[t-1+0],r=e[t-1+32],s=e[t-1+64],a=e[t-1+96];e[t+0+0]=n+r+1>>1,e[t+2+0]=e[t+0+32]=r+s+1>>1,e[t+2+32]=e[t+0+64]=s+a+1>>1,e[t+1+0]=bt(n,r,s),e[t+3+0]=e[t+1+32]=bt(r,s,a),e[t+3+32]=e[t+1+64]=bt(s,a,a),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=a}function _t(e,t){var n=e[t-1+0],r=e[t-1+32],s=e[t-1+64],a=e[t-1+96],i=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=n+i+1>>1,e[t+0+32]=e[t+2+64]=r+n+1>>1,e[t+0+64]=e[t+2+96]=s+r+1>>1,e[t+0+96]=a+s+1>>1,e[t+3+0]=bt(o,l,c),e[t+2+0]=bt(i,o,l),e[t+1+0]=e[t+3+32]=bt(n,i,o),e[t+1+32]=e[t+3+64]=bt(r,n,i),e[t+1+64]=e[t+3+96]=bt(s,r,n),e[t+1+96]=bt(a,s,r)}function Et(e,t){var n;for(n=0;8>n;++n)r(e,t+32*n,e,t-32,8)}function Ft(e,t){var n;for(n=0;8>n;++n)s(e,t,e[t-1],8),t+=32}function Tt(e,t,n){var r;for(r=0;8>r;++r)s(t,n+32*r,e,8)}function It(e,t){var n,r=8;for(n=0;8>n;++n)r+=e[t+n-32]+e[t-1+32*n];Tt(r>>4,e,t)}function Dt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t+n-32];Tt(r>>3,e,t)}function Lt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t-1+32*n];Tt(r>>3,e,t)}function Pt(e,t){Tt(128,e,t)}function Rt(e,t,n){var r=e[t-n],s=e[t+0],a=3*(s-r)+Fr[1020+e[t-2*n]-e[t+n]],i=Tr[112+(a+4>>3)];e[t-n]=Ir[255+r+Tr[112+(a+3>>3)]],e[t+0]=Ir[255+s-i]}function Ut(e,t,n,r){var s=e[t+0],a=e[t+n];return Dr[255+e[t-2*n]-e[t-n]]>r||Dr[255+a-s]>r}function Ot(e,t,n,r){return 4*Dr[255+e[t-n]-e[t+0]]+Dr[255+e[t-2*n]-e[t+n]]<=r}function Mt(e,t,n,r,s){var a=e[t-3*n],i=e[t-2*n],o=e[t-n],l=e[t+0],c=e[t+n],d=e[t+2*n],u=e[t+3*n];return 4*Dr[255+o-l]+Dr[255+i-c]>r?0:Dr[255+e[t-4*n]-a]<=s&&Dr[255+a-i]<=s&&Dr[255+i-o]<=s&&Dr[255+u-d]<=s&&Dr[255+d-c]<=s&&Dr[255+c-l]<=s}function Qt(e,t,n,r){var s=2*r+1;for(r=0;16>r;++r)Ot(e,t+r,n,s)&&Rt(e,t+r,n)}function Ht(e,t,n,r){var s=2*r+1;for(r=0;16>r;++r)Ot(e,t+r*n,1,s)&&Rt(e,t+r*n,1)}function zt(e,t,n,r){var s;for(s=3;0<s;--s)Qt(e,t+=4*n,n,r)}function Wt(e,t,n,r){var s;for(s=3;0<s;--s)Ht(e,t+=4,n,r)}function Vt(e,t,n,r,s,a,i,o){for(a=2*a+1;0<s--;){if(Mt(e,t,n,a,i))if(Ut(e,t,n,o))Rt(e,t,n);else{var l=e,c=t,d=n,u=l[c-2*d],h=l[c-d],A=l[c+0],f=l[c+d],p=l[c+2*d],m=27*(x=Fr[1020+3*(A-h)+Fr[1020+u-f]])+63>>7,g=18*x+63>>7,x=9*x+63>>7;l[c-3*d]=Ir[255+l[c-3*d]+x],l[c-2*d]=Ir[255+u+g],l[c-d]=Ir[255+h+m],l[c+0]=Ir[255+A-m],l[c+d]=Ir[255+f-g],l[c+2*d]=Ir[255+p-x]}t+=r}}function Kt(e,t,n,r,s,a,i,o){for(a=2*a+1;0<s--;){if(Mt(e,t,n,a,i))if(Ut(e,t,n,o))Rt(e,t,n);else{var l=e,c=t,d=n,u=l[c-d],h=l[c+0],A=l[c+d],f=Tr[112+(4+(p=3*(h-u))>>3)],p=Tr[112+(p+3>>3)],m=f+1>>1;l[c-2*d]=Ir[255+l[c-2*d]+m],l[c-d]=Ir[255+u+p],l[c+0]=Ir[255+h-f],l[c+d]=Ir[255+A-m]}t+=r}}function Gt(e,t,n,r,s,a){Vt(e,t,n,1,16,r,s,a)}function qt(e,t,n,r,s,a){Vt(e,t,1,n,16,r,s,a)}function Xt(e,t,n,r,s,a){var i;for(i=3;0<i;--i)Kt(e,t+=4*n,n,1,16,r,s,a)}function Yt(e,t,n,r,s,a){var i;for(i=3;0<i;--i)Kt(e,t+=4,1,n,16,r,s,a)}function Jt(e,t,n,r,s,a,i,o){Vt(e,t,s,1,8,a,i,o),Vt(n,r,s,1,8,a,i,o)}function Zt(e,t,n,r,s,a,i,o){Vt(e,t,1,s,8,a,i,o),Vt(n,r,1,s,8,a,i,o)}function $t(e,t,n,r,s,a,i,o){Kt(e,t+4*s,s,1,8,a,i,o),Kt(n,r+4*s,s,1,8,a,i,o)}function en(e,t,n,r,s,a,i,o){Kt(e,t+4,1,s,8,a,i,o),Kt(n,r+4,1,s,8,a,i,o)}function tn(){this.ba=new ie,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sn(){this.ua=0,this.Wa=new L,this.vb=new L,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new A,this.yc=new u}function an(){this.xb=this.a=0,this.l=new Ke,this.ca=new ie,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new y,this.Pb=0,this.wd=new y,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sn,this.ab=0,this.gc=i(4,rn),this.Oc=0}function on(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ke,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ln(e,t,n,r,s,a,i){for(e=null==e?0:e[t+0],t=0;t<i;++t)s[a+t]=e+n[r+t]&255,e=s[a+t]}function cn(e,t,n,r,s,a,i){var o;if(null==e)ln(null,null,n,r,s,a,i);else for(o=0;o<i;++o)s[a+o]=e[t+o]+n[r+o]&255}function dn(e,t,n,r,s,a,i){if(null==e)ln(null,null,n,r,s,a,i);else{var o,l=e[t+0],c=l,d=l;for(o=0;o<i;++o)c=d+(l=e[t+o])-c,d=n[r+o]+(-256&c?0>c?0:255:c)&255,c=l,s[a+o]=d}}function un(e,n,s,i){var o=n.width,l=n.o;if(t(null!=e&&null!=n),0>s||0>=i||s+i>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new on,(c=null==e.ga)||(c=n.width*n.o,t(0==e.Gb.length),e.Gb=a(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var d=e.Fa,u=e.P,h=e.qc,A=e.mb,f=e.nb,p=u+1,m=h-1,x=c.l;if(t(null!=d&&null!=A&&null!=n),ps[0]=null,ps[1]=ln,ps[2]=cn,ps[3]=dn,c.ca=A,c.tb=f,c.c=n.width,c.i=n.height,t(0<c.c&&0<c.i),1>=h)n=0;else if(c.$a=3&d[u+0],c.Z=d[u+0]>>2&3,c.Lc=d[u+0]>>4&3,u=d[u+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||u)n=0;else if(x.put=Ae,x.ac=he,x.bc=fe,x.ma=c,x.width=n.width,x.height=n.height,x.Da=n.Da,x.v=n.v,x.va=n.va,x.j=n.j,x.o=n.o,c.$a)e:{t(1==c.$a),n=Se();t:for(;;){if(null==n){n=0;break e}if(t(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,g(n.m,d,p,m),!_e(c.c,c.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Ne(n.s)?(c.ic=1,d=n.c*n.i,n.Ta=null,n.Ua=0,n.V=a(d),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Ee(n,c.c)),!n)break t;n=1;break e}c.mc=null,n=0}else n=m>=c.c*c.i;c=!n}if(c)return null;1!=e.ga.Lc?e.Ga=0:i=l-s}t(null!=e.ga),t(s+i<=l);e:{if(n=(d=e.ga).c,l=d.l.o,0==d.$a){if(p=e.rc,m=e.Vc,x=e.Fa,u=e.P+1+s*n,h=e.mb,A=e.nb+s*n,t(u<=e.P+e.qc),0!=d.Z)for(t(null!=ps[d.Z]),c=0;c<i;++c)ps[d.Z](p,m,x,u,h,A,n),p=h,m=A,A+=n,u+=n;else for(c=0;c<i;++c)r(h,A,x,u,n),p=h,m=A,A+=n,u+=n;e.rc=p,e.Vc=m}else{if(t(null!=d.mc),n=s+i,t(null!=(c=d.mc)),t(n<=c.i),c.C>=n)n=1;else if(d.ic||mn(),d.ic){d=c.V,p=c.Ba,m=c.c;var v=c.i,b=(x=1,u=c.$/m,h=c.$%m,A=c.m,f=c.s,c.$),y=m*v,w=m*n,j=f.wc,B=b<w?be(f,h,u):null;t(b<=y),t(n<=v),t(Ne(f));t:for(;;){for(;!A.h&&b<w;){if(h&j||(B=be(f,h,u)),t(null!=B),C(A),256>(v=xe(B.G[0],B.H[0],A)))d[p+b]=v,++b,++h>=m&&(h=0,++u<=n&&!(u%16)&&Ce(c,u));else{if(!(280>v)){x=0;break t}v=me(v-256,A);var k,S=xe(B.G[4],B.H[4],A);if(C(A),!(b>=(S=ge(m,S=me(S,A)))&&y-b>=v)){x=0;break t}for(k=0;k<v;++k)d[p+b+k]=d[p+b+k-S];for(b+=v,h+=v;h>=m;)h-=m,++u<=n&&!(u%16)&&Ce(c,u);b<w&&h&j&&(B=be(f,h,u))}t(A.h==N(A))}Ce(c,u>n?n:u);break t}!x||A.h&&b<y?(x=0,c.a=A.h?5:3):c.$=b,n=x}else n=Be(c,c.V,c.Ba,c.c,c.i,n,Fe);if(!n){i=0;break e}}s+i>=l&&(e.Cc=1),i=1}if(!i)return null;if(e.Cc&&(null!=(i=e.ga)&&(i.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+s*o}function hn(e,t,n,r,s,a){for(;0<s--;){var i,o=e,l=t+(n?1:0),c=e,d=t+(n?0:3);for(i=0;i<r;++i){var u=c[d+4*i];255!=u&&(u*=32897,o[l+4*i+0]=o[l+4*i+0]*u>>23,o[l+4*i+1]=o[l+4*i+1]*u>>23,o[l+4*i+2]=o[l+4*i+2]*u>>23)}t+=a}}function An(e,t,n,r,s){for(;0<r--;){var a;for(a=0;a<n;++a){var i=e[t+2*a+0],o=15&(c=e[t+2*a+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*a+0]=(240&i|i>>4)*l>>16&240|(15&i|i<<4)*l>>16>>4&15,e[t+2*a+1]=240&c|o}t+=s}}function fn(e,t,n,r,s,a,i,o){var l,c,d=255;for(c=0;c<s;++c){for(l=0;l<r;++l){var u=e[t+l];a[i+4*l]=u,d&=u}t+=n,i+=o}return 255!=d}function pn(e,t,n,r,s){var a;for(a=0;a<s;++a)n[r+a]=e[t+a]>>8}function mn(){wr=hn,Nr=An,jr=fn,Cr=pn}function gn(n,r,s){e[n]=function(e,n,a,i,o,l,c,d,u,h,A,f,p,m,g,x,v){var b,y=v-1>>1,w=o[l+0]|c[d+0]<<16,N=u[h+0]|A[f+0]<<16;t(null!=e);var j=3*w+N+131074>>2;for(r(e[n+0],255&j,j>>16,p,m),null!=a&&(j=3*N+w+131074>>2,r(a[i+0],255&j,j>>16,g,x)),b=1;b<=y;++b){var C=o[l+b]|c[d+b]<<16,B=u[h+b]|A[f+b]<<16,k=w+C+N+B+524296,S=k+2*(C+N)>>3;j=S+w>>1,w=(k=k+2*(w+B)>>3)+C>>1,r(e[n+2*b-1],255&j,j>>16,p,m+(2*b-1)*s),r(e[n+2*b-0],255&w,w>>16,p,m+(2*b-0)*s),null!=a&&(j=k+N>>1,w=S+B>>1,r(a[i+2*b-1],255&j,j>>16,g,x+(2*b-1)*s),r(a[i+2*b+0],255&w,w>>16,g,x+(2*b+0)*s)),w=C,N=B}1&v||(j=3*w+N+131074>>2,r(e[n+v-1],255&j,j>>16,p,m+(v-1)*s),null!=a&&(j=3*N+w+131074>>2,r(a[i+v-1],255&j,j>>16,g,x+(v-1)*s)))}}function xn(){ms[Lr]=gs,ms[Pr]=vs,ms[Rr]=xs,ms[Ur]=bs,ms[Or]=ys,ms[Mr]=ws,ms[Qr]=Ns,ms[Hr]=vs,ms[zr]=bs,ms[Wr]=ys,ms[Vr]=ws}function vn(e){return e&~_s?0>e?0:255:e>>Ss}function bn(e,t){return vn((19077*e>>8)+(26149*t>>8)-14234)}function yn(e,t,n){return vn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function wn(e,t){return vn((19077*e>>8)+(33050*t>>8)-17685)}function Nn(e,t,n,r,s){r[s+0]=bn(e,n),r[s+1]=yn(e,t,n),r[s+2]=wn(e,t)}function jn(e,t,n,r,s){r[s+0]=wn(e,t),r[s+1]=yn(e,t,n),r[s+2]=bn(e,n)}function Cn(e,t,n,r,s){var a=yn(e,t,n);t=a<<3&224|wn(e,t)>>3,r[s+0]=248&bn(e,n)|a>>5,r[s+1]=t}function Bn(e,t,n,r,s){var a=240&wn(e,t)|15;r[s+0]=240&bn(e,n)|yn(e,t,n)>>4,r[s+1]=a}function kn(e,t,n,r,s){r[s+0]=255,Nn(e,t,n,r,s+1)}function Sn(e,t,n,r,s){jn(e,t,n,r,s),r[s+3]=255}function _n(e,t,n,r,s){Nn(e,t,n,r,s),r[s+3]=255}function Ve(e,t){return 0>e?0:e>t?t:e}function En(t,n,r){e[t]=function(e,t,s,a,i,o,l,c,d){for(var u=c+(-2&d)*r;c!=u;)n(e[t+0],s[a+0],i[o+0],l,c),n(e[t+1],s[a+0],i[o+0],l,c+r),t+=2,++a,++o,c+=2*r;1&d&&n(e[t+0],s[a+0],i[o+0],l,c)}}function Fn(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Tn(e,t,n,r,s){switch(e>>>30){case 3:ar(t,n,r,s,0);break;case 2:ir(t,n,r,s);break;case 1:lr(t,n,r,s)}}function In(e,t){var n,a,i=t.M,o=t.Nb,l=e.oc,c=e.pc+40,d=e.oc,u=e.pc+584,h=e.oc,A=e.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)d[u+32*n-1]=129,h[A+32*n-1]=129;for(0<i?l[c-1-32]=d[u-1-32]=h[A-1-32]=129:(s(l,c-32-1,127,21),s(d,u-32-1,127,9),s(h,A-32-1,127,9)),a=0;a<e.za;++a){var f=t.ya[t.aa+a];if(0<a){for(n=-1;16>n;++n)r(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)r(d,u+32*n-4,d,u+32*n+4,4),r(h,A+32*n-4,h,A+32*n+4,4)}var p=e.Gd,m=e.Hd+a,g=f.ad,x=f.Hc;if(0<i&&(r(l,c-32,p[m].y,0,16),r(d,u-32,p[m].f,0,8),r(h,A-32,p[m].ea,0,8)),f.Za){var v=l,b=c-32+16;for(0<i&&(a>=e.za-1?s(v,b,p[m].y[15],4):r(v,b,p[m+1].y,0,4)),n=0;4>n;n++)v[b+128+n]=v[b+256+n]=v[b+384+n]=v[b+0+n];for(n=0;16>n;++n,x<<=2)v=l,b=c+Rs[n],us[f.Ob[n]](v,b),Tn(x,g,16*+n,v,b)}else if(v=Fn(a,i,f.Ob[0]),ds[v](l,c),0!=x)for(n=0;16>n;++n,x<<=2)Tn(x,g,16*+n,l,c+Rs[n]);for(n=f.Gc,v=Fn(a,i,f.Dd),hs[v](d,u),hs[v](h,A),x=g,v=d,b=u,255&(f=0|n)&&(170&f?or(x,256,v,b):cr(x,256,v,b)),f=h,x=A,255&(n>>=8)&&(170&n?or(g,320,f,x):cr(g,320,f,x)),i<e.Ub-1&&(r(p[m].y,0,l,c+480,16),r(p[m].f,0,d,u+224,8),r(p[m].ea,0,h,A+224,8)),n=8*o*e.B,p=e.sa,m=e.ta+16*a+16*o*e.R,g=e.qa,f=e.ra+8*a+n,x=e.Ha,v=e.Ia+8*a+n,n=0;16>n;++n)r(p,m+n*e.R,l,c+32*n,16);for(n=0;8>n;++n)r(g,f+n*e.B,d,u+32*n,8),r(x,v+n*e.B,h,A+32*n,8)}}function Dn(e,r,s,a,i,o,l,c,d){var u=[0],h=[0],A=0,f=null!=d?d.kd:0,p=null!=d?d:new nn;if(null==e||12>s)return 7;p.data=e,p.w=r,p.ha=s,r=[r],s=[s],p.gb=[p.gb];e:{var m=r,x=s,v=p.gb;if(t(null!=e),t(null!=x),t(null!=v),v[0]=0,12<=x[0]&&!n(e,m[0],"RIFF")){if(n(e,m[0]+8,"WEBP")){v=3;break e}var b=T(e,m[0]+4);if(12>b||4294967286<b){v=3;break e}if(f&&b>x[0]-8){v=7;break e}v[0]=b,m[0]+=12,x[0]-=12}v=0}if(0!=v)return v;for(b=0<p.gb[0],s=s[0];;){e:{var w=e;x=r,v=s;var N=u,j=h,C=m=[0];if((S=A=[A])[0]=0,8>v[0])v=7;else{if(!n(w,x[0],"VP8X")){if(10!=T(w,x[0]+4)){v=3;break e}if(18>v[0]){v=7;break e}var B=T(w,x[0]+8),k=1+F(w,x[0]+12);if(2147483648<=k*(w=1+F(w,x[0]+15))){v=3;break e}null!=C&&(C[0]=B),null!=N&&(N[0]=k),null!=j&&(j[0]=w),x[0]+=18,v[0]-=18,S[0]=1}v=0}}if(A=A[0],m=m[0],0!=v)return v;if(x=!!(2&m),!b&&A)return 3;if(null!=o&&(o[0]=!!(16&m)),null!=l&&(l[0]=x),null!=c&&(c[0]=0),l=u[0],m=h[0],A&&x&&null==d){v=0;break}if(4>s){v=7;break}if(b&&A||!b&&!A&&!n(e,r[0],"ALPH")){s=[s],p.na=[p.na],p.P=[p.P],p.Sa=[p.Sa];e:{B=e,v=r,b=s;var S=p.gb;N=p.na,j=p.P,C=p.Sa,k=22,t(null!=B),t(null!=b),w=v[0];var _=b[0];for(t(null!=N),t(null!=C),N[0]=null,j[0]=null,C[0]=0;;){if(v[0]=w,b[0]=_,8>_){v=7;break e}var E=T(B,w+4);if(4294967286<E){v=3;break e}var I=8+E+1&-2;if(k+=I,0<S&&k>S){v=3;break e}if(!n(B,w,"VP8 ")||!n(B,w,"VP8L")){v=0;break e}if(_[0]<I){v=7;break e}n(B,w,"ALPH")||(N[0]=B,j[0]=w+8,C[0]=E),w+=I,_-=I}}if(s=s[0],p.na=p.na[0],p.P=p.P[0],p.Sa=p.Sa[0],0!=v)break}s=[s],p.Ja=[p.Ja],p.xa=[p.xa];e:if(S=e,v=r,b=s,N=p.gb[0],j=p.Ja,C=p.xa,B=v[0],w=!n(S,B,"VP8 "),k=!n(S,B,"VP8L"),t(null!=S),t(null!=b),t(null!=j),t(null!=C),8>b[0])v=7;else{if(w||k){if(S=T(S,B+4),12<=N&&S>N-12){v=3;break e}if(f&&S>b[0]-8){v=7;break e}j[0]=S,v[0]+=8,b[0]-=8,C[0]=k}else C[0]=5<=b[0]&&47==S[B+0]&&!(S[B+4]>>5),j[0]=b[0];v=0}if(s=s[0],p.Ja=p.Ja[0],p.xa=p.xa[0],r=r[0],0!=v)break;if(4294967286<p.Ja)return 3;if(null==c||x||(c[0]=p.xa?2:1),l=[l],m=[m],p.xa){if(5>s){v=7;break}c=l,f=m,x=o,null==e||5>s?e=0:5<=s&&47==e[r+0]&&!(e[r+4]>>5)?(b=[0],S=[0],N=[0],g(j=new y,e,r,s),pe(j,b,S,N)?(null!=c&&(c[0]=b[0]),null!=f&&(f[0]=S[0]),null!=x&&(x[0]=N[0]),e=1):e=0):e=0}else{if(10>s){v=7;break}c=m,null==e||10>s||!Xe(e,r+3,s-3)?e=0:(f=e[r+0]|e[r+1]<<8|e[r+2]<<16,x=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&f||3<(f>>1&7)||!(f>>4&1)||f>>5>=p.Ja||!x||!e?e=0:(l&&(l[0]=x),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],m=m[0],A&&(u[0]!=l||h[0]!=m))return 3;null!=d&&(d[0]=p,d.offset=r-d.w,t(4294967286>r-d.w),t(d.offset==d.ha-s));break}return 0==v||7==v&&A&&null==d?(null!=o&&(o[0]|=null!=p.na&&0<p.na.length),null!=a&&(a[0]=l),null!=i&&(i[0]=m),0):v}function Ln(e,t,n){var r=t.width,s=t.height,a=0,i=0,o=r,l=s;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,a=e.v,i=e.j,11>n||(a&=-2,i&=-2),0>a||0>i||0>=o||0>=l||a+o>r||i+l>s))return 0;if(t.v=a,t.j=i,t.va=a+o,t.o=i+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!P(o,l,n=[e.ib],a=[e.hb]))return 0;t.ib=n[0],t.hb=a[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*s/4,t.Kb=0),1}function Pn(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Rn(e,t,n,r){if(null==r||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var s=n.cd,i=n.bd,o=-2&n.v,l=-2&n.j;if(0>o||0>l||0>=s||0>=i||o+s>e||l+i>t)return 2;e=s,t=i}if(n.da){if(!P(e,t,s=[n.ib],i=[n.hb]))return 2;e=s[0],t=i[0]}}r.width=e,r.height=t;e:{var c=r.width,d=r.height;if(e=r.S,0>=c||0>=d||!(e>=Lr&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){o=i=s=t=0;var u=(l=c*Ms[e])*d;if(11>e||(i=(d+1)/2*(t=(c+1)/2),12==e&&(o=(s=c)*d)),null==(d=a(u+2*i+o))){e=1;break e}r.sd=d,11>e?((c=r.f.RGBA).eb=d,c.fb=0,c.A=l,c.size=u):((c=r.f.kb).y=d,c.O=0,c.fa=l,c.Fd=u,c.f=d,c.N=0+u,c.Ab=t,c.Cd=i,c.ea=d,c.W=0+u+i,c.Db=t,c.Ed=i,12==e&&(c.F=d,c.J=0+u+2*i),c.Tc=o,c.lb=s)}if(t=1,s=r.S,i=r.width,o=r.height,s>=Lr&&13>s)if(11>s)e=r.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+i<=e.size,t&=l>=i*Ms[s],t&=null!=e.eb;else{e=r.f.kb,l=(i+1)/2,u=(o+1)/2,c=Math.abs(e.fa),d=Math.abs(e.Ab);var h=Math.abs(e.Db),A=Math.abs(e.lb),f=A*(o-1)+i;t&=c*(o-1)+i<=e.Fd,t&=d*(u-1)+l<=e.Cd,t=(t&=h*(u-1)+l<=e.Ed)&c>=i&d>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==s&&(t&=A>=i,t&=f<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Pn(r)),e}var Un=64,On=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Mn=24,Qn=32,Hn=8,zn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];O("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return Q(Q(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return Q(e,t[n-1])},e.Predictor7=function(e,t,n){return Q(e,t[n+0])},e.Predictor8=function(e,t,n){return Q(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return Q(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return Q(Q(e,t[n-1]),Q(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var r=t[n+0];return 0>=W(r>>24&255,e>>24&255,(t=t[n-1])>>24&255)+W(r>>16&255,e>>16&255,t>>16&255)+W(r>>8&255,e>>8&255,t>>8&255)+W(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,n){var r=t[n+0];return(H((e>>24&255)+(r>>24&255)-((t=t[n-1])>>24&255))<<24|H((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|H((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|H((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var r=t[n-1];return(z((e=Q(e,t[n+0]))>>24&255,r>>24&255)<<24|z(e>>16&255,r>>16&255)<<16|z(e>>8&255,r>>8&255)<<8|z(255&e,255&r))>>>0};var Wn=e.PredictorAdd0;e.PredictorAdd1=V,O("Predictor2","PredictorAdd2"),O("Predictor3","PredictorAdd3"),O("Predictor4","PredictorAdd4"),O("Predictor5","PredictorAdd5"),O("Predictor6","PredictorAdd6"),O("Predictor7","PredictorAdd7"),O("Predictor8","PredictorAdd8"),O("Predictor9","PredictorAdd9"),O("Predictor10","PredictorAdd10"),O("Predictor11","PredictorAdd11"),O("Predictor12","PredictorAdd12"),O("Predictor13","PredictorAdd13");var Vn=e.PredictorAdd2;X("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),X("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Kn,Gn=e.ColorIndexInverseTransform,qn=e.MapARGB,Xn=e.VP8LColorIndexInverseTransformAlpha,Yn=e.MapAlpha,Jn=e.VP8LPredictorsAdd=[];Jn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Zn,$n,er,tr,nr,rr,sr,ar,ir,or,lr,cr,dr,ur,hr,Ar,fr,pr,mr,gr,xr,vr,br,yr,wr,Nr,jr,Cr,Br=a(511),kr=a(2041),Sr=a(225),_r=a(767),Er=0,Fr=kr,Tr=Sr,Ir=_r,Dr=Br,Lr=0,Pr=1,Rr=2,Ur=3,Or=4,Mr=5,Qr=6,Hr=7,zr=8,Wr=9,Vr=10,Kr=[2,3,7],Gr=[3,3,11],qr=[280,256,256,256,40],Xr=[0,1,1,1,0],Yr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$r=8,es=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ts=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ns=null,rs=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ss=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],as=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],is=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],os=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ls=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],cs=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ds=[],us=[],hs=[],As=1,fs=2,ps=[],ms=[];gn("UpsampleRgbLinePair",Nn,3),gn("UpsampleBgrLinePair",jn,3),gn("UpsampleRgbaLinePair",_n,4),gn("UpsampleBgraLinePair",Sn,4),gn("UpsampleArgbLinePair",kn,4),gn("UpsampleRgba4444LinePair",Bn,2),gn("UpsampleRgb565LinePair",Cn,2);var gs=e.UpsampleRgbLinePair,xs=e.UpsampleBgrLinePair,vs=e.UpsampleRgbaLinePair,bs=e.UpsampleBgraLinePair,ys=e.UpsampleArgbLinePair,ws=e.UpsampleRgba4444LinePair,Ns=e.UpsampleRgb565LinePair,js=16,Cs=1<<js-1,Bs=-227,ks=482,Ss=6,_s=(256<<Ss)-1,Es=0,Fs=a(256),Ts=a(256),Is=a(256),Ds=a(256),Ls=a(ks-Bs),Ps=a(ks-Bs);En("YuvToRgbRow",Nn,3),En("YuvToBgrRow",jn,3),En("YuvToRgbaRow",_n,4),En("YuvToBgraRow",Sn,4),En("YuvToArgbRow",kn,4),En("YuvToRgba4444Row",Bn,2),En("YuvToRgb565Row",Cn,2);var Rs=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Us=[0,2,8],Os=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(e,n,o,l,c){var d=Pr,u=new tn,h=new ie;u.ba=h,h.S=d,h.width=[h.width],h.height=[h.height];var A=h.width,f=h.height,p=new oe;if(null==p||null==e)var m=2;else t(null!=p),m=Dn(e,n,o,p.width,p.height,p.Pd,p.Qd,p.format,null);if(0!=m?A=0:(null!=A&&(A[0]=p.width[0]),null!=f&&(f[0]=p.height[0]),A=1),A){h.width=h.width[0],h.height=h.height[0],null!=l&&(l[0]=h.width),null!=c&&(c[0]=h.height);e:{if(l=new Ke,(c=new nn).data=e,c.w=n,c.ha=o,c.kd=1,n=[0],t(null!=c),(0==(e=Dn(c.data,c.w,c.ha,null,null,null,n,null,c))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=u),l.data=c.data,l.w=c.w+c.offset,l.ha=c.ha-c.offset,l.put=Ae,l.ac=he,l.bc=fe,l.ma=u,c.xa){if(null==(e=Se())){u=1;break e}if(function(e,n){var r=[0],s=[0],a=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,g(e.m,n.data,n.w,n.ha),!pe(e.m,r,s,a)){e.a=3;break t}if(e.xb=fs,n.width=r[0],n.height=s[0],!_e(r[0],s[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,l)){if(l=0==(n=Rn(l.width,l.height,u.Oa,u.ba))){t:{l=e;n:for(;;){if(null==l){l=0;break t}if(t(null!=l.s.yc),t(null!=l.s.Ya),t(0<l.s.Wb),t(null!=(o=l.l)),t(null!=(c=o.ma)),0!=l.xb){if(l.ca=c.ba,l.tb=c.tb,t(null!=l.ca),!Ln(c.Oa,o,Ur)){l.a=2;break n}if(!Ee(l,o.width))break n;if(o.da)break n;if((o.da||re(l.ca.S))&&mn(),11>l.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=l.ca.f.kb.F&&mn()),l.Pb&&0<l.s.ua&&null==l.s.vb.X&&!I(l.s.vb,l.s.Wa.Xa)){l.a=1;break n}l.xb=0}if(!Be(l,l.V,l.Ba,l.c,l.i,o.o,we))break n;c.Dc=l.Ma,l=1;break t}t(0!=l.a),l=0}l=!l}l&&(n=e.a)}else n=e.a}else{if(null==(e=new Ge)){u=1;break e}if(e.Fa=c.na,e.P=c.P,e.qc=c.Sa,Ye(e,l)){if(0==(n=Rn(l.width,l.height,u.Oa,u.ba))){if(e.Aa=0,o=u.Oa,t(null!=(c=e)),null!=o){if(0<(A=0>(A=o.Md)?0:100<A?255:255*A/100)){for(f=p=0;4>f;++f)12>(m=c.pb[f]).lc&&(m.ia=A*Os[0>m.lc?0:m.lc]>>3),p|=m.ia;p&&(alert("todo:VP8InitRandom"),c.ia=1)}c.Ga=o.Id,100<c.Ga?c.Ga=100:0>c.Ga&&(c.Ga=0)}(function(e,n){if(null==e)return 0;if(null==n)return qe(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Ye(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var o=Us[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-o>>4,e.zb=n.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+o>>4,e.Hb=n.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var d=e.Qa.Lb[o];e.Qa.Fb||(d+=l.Tb)}else d=l.Tb;for(c=0;1>=c;++c){var u=e.gd[o][c],h=d;if(l.Pc&&(h+=l.vd[0],c&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var A=h;0<l.wb&&(A=4<l.wb?A>>2:A>>1)>9-l.wb&&(A=9-l.wb),1>A&&(A=1),u.dd=A,u.tc=2*h+A,u.ld=40<=h?2:15<=h?1:0}else u.tc=0;u.La=c}}}o=0}else qe(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=1);t:{o=e.Ic,l=4*(A=e.za);var f=32*A,p=A+1,m=0<e.L?A*(0<e.Aa?2:1):0,g=(2==e.Aa?2:1)*A;if((u=l+832+(c=3*(16*o+Us[e.L])/2*f)+(d=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=u)o=0;else{if(u>e.Vb){if(e.Vb=0,e.Ec=a(u),e.Fc=0,null==e.Ec){o=qe(e,1,"no memory during frame initialization.");break t}e.Vb=u}u=e.Ec,h=e.Fc,e.Ac=u,e.Bc=h,h+=l,e.Gd=i(f,ze),e.Hd=0,e.rb=i(p+1,Oe),e.sb=1,e.wa=m?i(m,Ue):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=A),t(!0),e.oc=u,e.pc=h,h+=832,e.ya=i(g,Qe),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=A),e.R=16*A,e.B=8*A,A=(f=Us[e.L])*e.R,f=f/2*e.B,e.sa=u,e.ta=h+A,e.qa=e.sa,e.ra=e.ta+16*o*e.R+f,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+f,e.$c=0,h+=c,e.mb=d?u:null,e.nb=d?h:null,t(h+d<=e.Fc+e.Vb),Ze(e),s(e.Ac,e.Bc,0,l),o=1}}if(o){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Er){for(o=-255;255>=o;++o)Br[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)kr[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)Sr[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)_r[255+o]=0>o?0:255<o?255:o;Er=1}sr=lt,ar=st,or=at,lr=it,cr=ot,ir=rt,dr=Gt,ur=qt,hr=Jt,Ar=Zt,fr=Xt,pr=Yt,mr=$t,gr=en,xr=Qt,vr=Ht,br=zt,yr=Wt,us[0]=Nt,us[1]=dt,us[2]=yt,us[3]=wt,us[4]=jt,us[5]=Bt,us[6]=Ct,us[7]=kt,us[8]=_t,us[9]=St,ds[0]=mt,ds[1]=ht,ds[2]=At,ds[3]=ft,ds[4]=gt,ds[5]=xt,ds[6]=vt,hs[0]=It,hs[1]=ut,hs[2]=Et,hs[3]=Ft,hs[4]=Lt,hs[5]=Dt,hs[6]=Pt,o=1}else o=0}o&&(o=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var i,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(i=0;i<c.za;++i){var d=l,u=c,h=u.Ac,A=u.Bc+4*i,f=u.zc,p=u.ya[u.aa+i];if(u.Qa.Bb?p.$b=S(d,u.Pa.jb[0])?2+S(d,u.Pa.jb[2]):S(d,u.Pa.jb[1]):p.$b=0,u.kc&&(p.Ad=S(d,u.Bd)),p.Za=!S(d,145)+0,p.Za){var m=p.Ob,g=0;for(u=0;4>u;++u){var x,v=f[0+u];for(x=0;4>x;++x){v=os[h[A+x]][v];for(var b=as[S(d,v[0])];0<b;)b=as[2*b+S(d,v[b])];v=-b,h[A+x]=v}r(m,g,h,A,4),g+=4,f[0+u]=v}}else v=S(d,156)?S(d,128)?1:3:S(d,163)?2:0,p.Ob[0]=v,s(h,A,v,4),s(f,0,v,4);p.Dd=S(d,142)?S(d,114)?S(d,183)?1:3:2:0}if(c.m.Ka)return qe(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,d=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],i=l.ya[l.aa+l.ja],A=l.kc?i.Ad:0)d.la=h.la=0,i.Za||(d.Na=h.Na=0),i.Hc=0,i.Gc=0,i.ia=0;else{var y,w;if(d=h,h=c,A=l.Pa.Xc,f=l.ya[l.aa+l.ja],p=l.pb[f.$b],u=f.ad,m=0,g=l.rb[l.sb-1],v=x=0,s(u,m,0,384),f.Za)var N=0,j=A[3];else{b=a(16);var C=d.Na+g.Na;if(C=ns(h,A[1],C,p.Eb,0,b,0),d.Na=g.Na=(0<C)+0,1<C)sr(b,0,u,m);else{var B=b[0]+3>>3;for(b=0;256>b;b+=16)u[m+b]=B}N=1,j=A[0]}var k=15&d.la,_=15&g.la;for(b=0;4>b;++b){var E=1&_;for(B=w=0;4>B;++B)k=k>>1|(E=(C=ns(h,j,C=E+(1&k),p.Sc,N,u,m))>N)<<7,w=w<<2|(3<C?3:1<C?2:0!=u[m+0]),m+=16;k>>=4,_=_>>1|E<<7,x=(x<<8|w)>>>0}for(j=k,N=_>>4,y=0;4>y;y+=2){for(w=0,k=d.la>>4+y,_=g.la>>4+y,b=0;2>b;++b){for(E=1&_,B=0;2>B;++B)C=E+(1&k),k=k>>1|(E=0<(C=ns(h,A[2],C,p.Qc,0,u,m)))<<3,w=w<<2|(3<C?3:1<C?2:0!=u[m+0]),m+=16;k>>=2,_=_>>1|E<<5}v|=w<<4*y,j|=k<<4<<y,N|=(240&_)<<y}d.la=j,g.la=N,f.Hc=x,f.Gc=v,f.ia=43690&v?0:p.ia,A=!(x|v)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[i.$b][i.Za],l.wa[l.Y+l.ja].La|=!A),c.Ka)return qe(e,7,"Premature end-of-file encountered.")}if(Ze(e),l=n,c=1,i=(o=e).D,d=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)t:{if(i.M=o.M,i.uc=d,In(o,i),c=1,i=(w=o.D).Nb,d=(v=Us[o.L])*o.R,h=v/2*o.B,b=16*i*o.R,B=8*i*o.B,A=o.sa,f=o.ta-d+b,p=o.qa,u=o.ra-h+B,m=o.Ha,g=o.Ia-h+B,_=0==(k=w.M),x=k>=o.Va-1,2==o.Aa&&In(o,w),w.uc)for(E=(C=o).D.M,t(C.D.uc),w=C.yb;w<C.Hb;++w){N=w,j=E;var F=(T=(Q=C).D).Nb;y=Q.R;var T=T.wa[T.Y+N],I=Q.sa,D=Q.ta+16*F*y+16*N,L=T.dd,P=T.tc;if(0!=P)if(t(3<=P),1==Q.L)0<N&&vr(I,D,y,P+4),T.La&&yr(I,D,y,P),0<j&&xr(I,D,y,P+4),T.La&&br(I,D,y,P);else{var R=Q.B,U=Q.qa,O=Q.ra+8*F*R+8*N,M=Q.Ha,Q=Q.Ia+8*F*R+8*N;F=T.ld,0<N&&(ur(I,D,y,P+4,L,F),Ar(U,O,M,Q,R,P+4,L,F)),T.La&&(pr(I,D,y,P,L,F),gr(U,O,M,Q,R,P,L,F)),0<j&&(dr(I,D,y,P+4,L,F),hr(U,O,M,Q,R,P+4,L,F)),T.La&&(fr(I,D,y,P,L,F),mr(U,O,M,Q,R,P,L,F))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(w=16*k,k=16*(k+1),_?(l.y=o.sa,l.O=o.ta+b,l.f=o.qa,l.N=o.ra+B,l.ea=o.Ha,l.W=o.Ia+B):(w-=v,l.y=A,l.O=f,l.f=p,l.N=u,l.ea=m,l.W=g),x||(k-=v),k>l.o&&(k=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&w<k&&(l.J=un(o,l,w,k-w),l.F=o.mb,null==l.F&&0==l.F.length)){c=qe(o,3,"Could not decode alpha data.");break t}w<l.j&&(v=l.j-w,w=l.j,t(!(1&v)),l.O+=o.R*v,l.N+=o.B*(v>>1),l.W+=o.B*(v>>1),null!=l.F&&(l.J+=l.width*v)),w<k&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=w-l.j,l.U=l.va-l.v,l.T=k-w,c=l.put(l))}i+1!=o.Ic||x||(r(o.sa,o.ta-d,A,f+16*o.R,d),r(o.qa,o.ra-h,p,u+8*o.B,h),r(o.Ha,o.Ia-h,m,g+8*o.B,h))}if(!c)return qe(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),o&=1}return o?(e.cb=0,o):0})(e,l)||(n=e.a)}}else n=e.a}0==n&&null!=u.Oa&&u.Oa.fd&&(n=Pn(u.ba))}u=n}d=0!=u?null:11>d?h.f.RGBA.eb:h.f.kb.y}else d=null;return d};var Ms=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(e[t++]);return n}function d(e,t){return e[t+0]|e[t+1]<<8}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function h(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var A=[0],f=[0],p=[],m=new l,g=e,x=function(e,t){var n={},r=0,s=!1,a=0,i=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){for(h(e,t+=4),t+=8;t<e.length;){var o=c(e,t),l=h(e,t+=4);t+=4;var A=l+(1&l);switch(o){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(m=n.frames[r]).src_off=s?i:t-8,m.src_size=a+l+8,r++,s&&(s=!1,a=0,i=0);break;case"VP8X":(m=n.header={}).feature_flags=e[t];var f=t+4;m.canvas_width=1+u(e,f),f+=3,m.canvas_height=1+u(e,f),f+=3;break;case"ALPH":s=!0,a=A+8,i=t-8;break;case"ANIM":(m=n.header).bgcolor=h(e,t),f=t+4,m.loop_count=d(e,f),f+=2;break;case"ANMF":var p,m;(m=n.frames[r]={}).offset_x=2*u(e,t),t+=3,m.offset_y=2*u(e,t),t+=3,m.width=1+u(e,t),t+=3,m.height=1+u(e,t),t+=3,m.duration=u(e,t),t+=3,p=e[t++],m.dispose=1&p,m.blend=p>>1&1}"ANMF"!=o&&(t+=A)}return n}}(g,0);x.response=g,x.rgbaoutput=!0,x.dataurl=!1;var v=x.header?x.header:null,b=x.frames?x.frames:null;if(v){v.loop_counter=v.loop_count,A=[v.canvas_height],f=[v.canvas_width];for(var y=0;y<b.length&&0!=b[y].blend;y++);}var w=b[0],N=m.WebPDecodeRGBA(g,w.src_off,w.src_size,f,A);w.rgba=N,w.imgwidth=f[0],w.imgheight=A[0];for(var j=0;j<f[0]*A[0]*4;j++)p[j]=N[j];return this.width=f,this.height=A,this.data=p,this}!function(e){var t,n,s,a,i,o,l,c,d,u=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new c,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new o,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new o,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,n=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var s=0;Object.defineProperty(this,"posX",{get:function(){return s},set:function(e){isNaN(e)||(s=e)}});var a=0;Object.defineProperty(this,"posY",{get:function(){return a},set:function(e){isNaN(e)||(a=e)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),d.margin=t}});var i=!1;Object.defineProperty(this,"autoPaging",{get:function(){return i},set:function(e){i=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(e){e instanceof u&&(d=e)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(e){d.path=e}});var c=[];Object.defineProperty(this,"ctxStack",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=A(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=A(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var h=null,f=null;Object.defineProperty(this,"fontFaces",{get:function(){return f},set:function(e){h=null,f=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1];t[2];var r=t[3],s=t[4];t[5];var a=t[6],i=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(s)[2];s="px"===i?Math.floor(parseFloat(s)*this.pdf.internal.scaleFactor):"em"===i?Math.floor(parseFloat(s)*this.pdf.getFontSize()):Math.floor(parseFloat(s)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(s);var o=function(e){var t,n,r=[],s=e.trim();if(""===s)return ii;if(s in Ka)return[Ka[s]];for(;""!==s;){switch(n=null,t=(s=qa(s)).charAt(0)){case'"':case"'":n=Xa(s.substring(1),t);break;default:n=Ya(s)}if(null===n)return ii;if(r.push(n[0]),""!==(s=qa(n[1]))&&","!==s.charAt(0))return ii;s=s.replace(/^,/,"")}return r}(a);if(this.fontFaces){var l=function(e,t){if(null===h){var n=function(e){var t=[];return Object.keys(e).forEach(function(n){e[n].forEach(function(e){var r=null;switch(e){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:e},t.push(r))})}),t}(e.getFontList());h=function(e){for(var t={},n=0;n<e.length;++n){var r=za(e[n]),s=r.family,a=r.stretch,i=r.style,o=r.weight;t[s]=t[s]||{},t[s][a]=t[s][a]||{},t[s][a][i]=t[s][a][i]||{},t[s][a][i][o]=r}return t}(n.concat(t))}return h}(this.pdf,this.fontFaces),c=o.map(function(e){return{family:e,stretch:"normal",weight:r,style:n}}),d=function(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},Va,n.genericFontFamilies||{}),a=null,i=null,o=0;o<t.length;++o)if(s[(a=za(t[o])).family]&&(a.family=s[a.family]),e.hasOwnProperty(a.family)){i=e[a.family];break}if(!(i=i||e[r]))throw new Error("Could not find a font-family for the rule '"+Ga(a)+"' and default family '"+r+"'.");if(i=function(e,t){if(t[e])return t[e];var n=Ma[e],r=n<=Ma.normal?-1:1,s=Wa(t,Oa,n,r);if(!s)throw new Error("Could not find a matching font-stretch value for "+e);return s}(a.stretch,i),i=function(e,t){if(t[e])return t[e];for(var n=Ua[e],r=0;r<n.length;++r)if(t[n[r]])return t[n[r]];throw new Error("Could not find a matching font-style for "+e)}(a.style,i),!(i=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=Ha[e],r=Wa(t,Qa,n,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(a.weight,i)))throw new Error("Failed to resolve a font for the rule '"+Ga(a)+"'.");return i}(l,c);this.pdf.setFont(d.ref.name,d.ref.style)}else{var u="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(u="bold"),"italic"===n&&(u+="italic"),0===u.length&&(u="normal");for(var A="",f={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},p=0;p<o.length;p++){if(void 0!==this.pdf.internal.getFont(o[p],u,{noFallback:!0,disableWarning:!0})){A=o[p];break}if("bolditalic"===u&&void 0!==this.pdf.internal.getFont(o[p],"bold",{noFallback:!0,disableWarning:!0}))A=o[p],u="bold";else if(void 0!==this.pdf.internal.getFont(o[p],"normal",{noFallback:!0,disableWarning:!0})){A=o[p],u="normal";break}}if(""===A)for(var m=0;m<o.length;m++)if(f[o[m]]){A=f[o[m]];break}A=""===A?"Times":A,this.pdf.setFont(A,u)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,U.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,U.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};h.prototype.setLineDash=function(e){this.lineDash=e},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){y.call(this,"fill",!1)},h.prototype.stroke=function(){y.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw xs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(e,t)},h.prototype.closePath=function(){var e=new o(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,r.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new o(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(e.x,e.y)},h.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw xs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(n.x,n.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),y.call(this,null,!0)},h.prototype.quadraticCurveTo=function(e,t,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t))throw xs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var s=this.ctx.transform.applyToPoint(new o(n,r)),a=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"qct",x1:a.x,y1:a.y,x:s.x,y:s.y}),this.ctx.lastPoint=new o(s.x,s.y)},h.prototype.bezierCurveTo=function(e,t,n,r,s,a){if(isNaN(s)||isNaN(a)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw xs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var i=this.ctx.transform.applyToPoint(new o(s,a)),l=this.ctx.transform.applyToPoint(new o(e,t)),c=this.ctx.transform.applyToPoint(new o(n,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:i.x,y:i.y}),this.ctx.lastPoint=new o(i.x,i.y)},h.prototype.arc=function(e,t,n,r,s,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(s))throw xs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(a=Boolean(a),!this.ctx.transform.isIdentity){var i=this.ctx.transform.applyToPoint(new o(e,t));e=i.x,t=i.y;var l=this.ctx.transform.applyToPoint(new o(0,n)),c=this.ctx.transform.applyToPoint(new o(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(s-r)>=2*Math.PI&&(r=0,s=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:s,counterclockwise:a})},h.prototype.arcTo=function(e,t,n,r,s){throw new Error("arcTo not implemented.")},h.prototype.rect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw xs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},h.prototype.fillRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw xs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var s={};"butt"!==this.lineCap&&(s.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(s.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,r),this.fill(),s.hasOwnProperty("lineCap")&&(this.lineCap=s.lineCap),s.hasOwnProperty("lineJoin")&&(this.lineJoin=s.lineJoin)}},h.prototype.strokeRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw xs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(e,t,n,r),this.stroke())},h.prototype.clearRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw xs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,r))},h.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},h.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(e){var t,n,r,s;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,r=0,s=0;else{var a=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==a)t=parseInt(a[1]),n=parseInt(a[2]),r=parseInt(a[3]),s=1;else if(null!==(a=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(a[1]),n=parseInt(a[2]),r=parseInt(a[3]),s=parseFloat(a[4]);else{if(s=1,"string"==typeof e&&"#"!==e.charAt(0)){var i=new Ns(e);e=i.ok?i.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:t,g:n,b:r,a:s,style:e}},f=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},p=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};h.prototype.fillText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw xs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!f.call(this)){var s=L(this.ctx.transform.rotation),a=this.ctx.transform.scaleX;_.call(this,{text:e,x:t,y:n,scale:a,angle:s,align:this.textAlign,maxWidth:r})}},h.prototype.strokeText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw xs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){r=isNaN(r)?void 0:r;var s=L(this.ctx.transform.rotation),a=this.ctx.transform.scaleX;_.call(this,{text:e,x:t,y:n,scale:a,renderingMode:"stroke",angle:s,align:this.textAlign,maxWidth:r})}},h.prototype.measureText=function(e){if("string"!=typeof e)throw xs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),s=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:s*=Math.round(96*n/72*1e4)/1e4})},h.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw xs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new c(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.rotate=function(e){if(isNaN(e))throw xs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new c(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},h.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw xs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new c(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.transform=function(e,t,n,r,s,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(s)||isNaN(a))throw xs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var i=new c(e,t,n,r,s,a);this.ctx.transform=this.ctx.transform.multiply(i)},h.prototype.setTransform=function(e,t,n,r,s,a){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,r=isNaN(r)?1:r,s=isNaN(s)?0:s,a=isNaN(a)?0:a,this.ctx.transform=new c(e,t,n,r,s,a)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(e,t,n,r,s,a,i,o,d){var u=this.pdf.getImageProperties(e),h=1,A=1,f=1,p=1;void 0!==r&&void 0!==o&&(f=o/r,p=d/s,h=u.width/r*o/r,A=u.height/s*d/s),void 0===a&&(a=t,i=n,t=0,n=0),void 0!==r&&void 0===o&&(o=r,d=s),void 0===r&&void 0===o&&(o=u.width,d=u.height);for(var x,y=this.ctx.transform.decompose(),N=L(y.rotate.shx),j=new c,C=(j=(j=(j=j.multiply(y.translate)).multiply(y.skew)).multiply(y.scale)).applyToRectangle(new l(a-t*f,i-n*p,r*h,s*A)),B=g.call(this,C),k=[],S=0;S<B.length;S+=1)-1===k.indexOf(B[S])&&k.push(B[S]);if(b(k),this.autoPaging)for(var _=k[0],E=k[k.length-1],F=_;F<E+1;F++){this.pdf.setPage(F);var T=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],I=1===F?this.posY+this.margin[0]:this.margin[0],D=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],P=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],R=1===F?0:D+(F-2)*P;if(0!==this.ctx.clip_path.length){var U=this.path;x=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(x,this.posX+this.margin[3],-R+I+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=U}var O=JSON.parse(JSON.stringify(C));O=v([O],this.posX+this.margin[3],-R+I+this.ctx.prevPageLastElemOffset)[0];var M=(F>_||F<E)&&m.call(this);M&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],T,P,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",O.x,O.y,O.w,O.h,null,null,N),M&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",C.x,C.y,C.w,C.h,null,null,N)};var g=function(e,t,n){var r=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var s=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+s)/n)+1);break;case"arc":r.push(Math.floor((e.y+s-e.radius)/n)+1),r.push(Math.floor((e.y+s+e.radius)/n)+1);break;case"qct":var a=P(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((a.y+s)/n)+1),r.push(Math.floor((a.y+a.h+s)/n)+1);break;case"bct":var i=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((i.y+s)/n)+1),r.push(Math.floor((i.y+i.h+s)/n)+1);break;case"rect":r.push(Math.floor((e.y+s)/n)+1),r.push(Math.floor((e.y+e.h+s)/n)+1)}for(var o=0;o<r.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<r[o];)x.call(this);return r},x=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,r=this.lineCap,s=this.lineWidth,a=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=r,this.lineWidth=s,this.lineJoin=a},v=function(e,t,n){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=n;case"qct":e[r].x1+=t,e[r].y1+=n;default:e[r].x+=t,e[r].y+=n}return e},b=function(e){return e.sort(function(e,t){return e-t})},y=function(e,t){for(var n,r,s=this.fillStyle,a=this.strokeStyle,i=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,d=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),h=[],A=0;A<u.length;A++)if(void 0!==u[A].x)for(var f=g.call(this,u[A]),p=0;p<f.length;p+=1)-1===h.indexOf(f[p])&&h.push(f[p]);for(var y=0;y<h.length;y++)for(;this.pdf.internal.getNumberOfPages()<h[y];)x.call(this);if(b(h),this.autoPaging)for(var N=h[0],j=h[h.length-1],C=N;C<j+1;C++){this.pdf.setPage(C),this.fillStyle=s,this.strokeStyle=a,this.lineCap=i,this.lineWidth=l,this.lineJoin=c;var B=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],k=1===C?this.posY+this.margin[0]:this.margin[0],S=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],E=1===C?0:S+(C-2)*_;if(0!==this.ctx.clip_path.length){var F=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(n,this.posX+this.margin[3],-E+k+this.ctx.prevPageLastElemOffset),w.call(this,e,!0),this.path=F}if(r=JSON.parse(JSON.stringify(d)),this.path=v(r,this.posX+this.margin[3],-E+k+this.ctx.prevPageLastElemOffset),!1===t||0===C){var T=(C>N||C<j)&&m.call(this);T&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],B,_,null).clip().discardPath()),w.call(this,e,t),T&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,w.call(this,e,t),this.lineWidth=o;this.path=d},w=function(e,t){if(("stroke"!==e||t||!p.call(this))&&("stroke"===e||t||!f.call(this))){for(var n,r,s=[],a=this.path,i=0;i<a.length;i++){var o=a[i];switch(o.type){case"begin":s.push({begin:!0});break;case"close":s.push({close:!0});break;case"mt":s.push({start:o,deltas:[],abs:[]});break;case"lt":var l=s.length;if(a[i-1]&&!isNaN(a[i-1].x)&&(n=[o.x-a[i-1].x,o.y-a[i-1].y],l>0))for(;l>=0;l--)if(!0!==s[l-1].close&&!0!==s[l-1].begin){s[l-1].deltas.push(n),s[l-1].abs.push(o);break}break;case"bct":n=[o.x1-a[i-1].x,o.y1-a[i-1].y,o.x2-a[i-1].x,o.y2-a[i-1].y,o.x-a[i-1].x,o.y-a[i-1].y],s[s.length-1].deltas.push(n);break;case"qct":var c=a[i-1].x+2/3*(o.x1-a[i-1].x),d=a[i-1].y+2/3*(o.y1-a[i-1].y),u=o.x+2/3*(o.x1-o.x),h=o.y+2/3*(o.y1-o.y),A=o.x,m=o.y;n=[c-a[i-1].x,d-a[i-1].y,u-a[i-1].x,h-a[i-1].y,A-a[i-1].x,m-a[i-1].y],s[s.length-1].deltas.push(n);break;case"arc":s.push({deltas:[],abs:[],arc:!0}),Array.isArray(s[s.length-1].abs)&&s[s.length-1].abs.push(o)}}r=t?null:"stroke"===e?"stroke":"fill";for(var g=!1,x=0;x<s.length;x++)if(s[x].arc)for(var v=s[x].abs,b=0;b<v.length;b++){var y=v[b];"arc"===y.type?C.call(this,y.x,y.y,y.radius,y.startAngle,y.endAngle,y.counterclockwise,void 0,t,!g):E.call(this,y.x,y.y),g=!0}else if(!0===s[x].close)this.pdf.internal.out("h"),g=!1;else if(!0!==s[x].begin){var w=s[x].start.x,N=s[x].start.y;F.call(this,s[x].deltas,w,N),g=!0}r&&B.call(this,r),t&&k.call(this)}},N=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},j=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(e,t,n,r,s,a,i,o,l){for(var c=I.call(this,n,r,s,a),d=0;d<c.length;d++){var u=c[d];0===d&&(l?S.call(this,u.x1+e,u.y1+t):E.call(this,u.x1+e,u.y1+t)),T.call(this,e,t,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}o?k.call(this):B.call(this,i)},B=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},k=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(e,t){this.pdf.internal.out(n(e)+" "+s(t)+" m")},_=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),r=N.call(this,e.y),s=j.call(this,r)-n.h,a=this.ctx.transform.applyToPoint(new o(e.x,r)),i=this.ctx.transform.decompose(),d=new c;d=(d=(d=d.multiply(i.translate)).multiply(i.skew)).multiply(i.scale);for(var u,h,A,f=this.ctx.transform.applyToRectangle(new l(e.x,r,n.w,n.h)),p=d.applyToRectangle(new l(e.x,s,n.w,n.h)),x=g.call(this,p),y=[],C=0;C<x.length;C+=1)-1===y.indexOf(x[C])&&y.push(x[C]);if(b(y),this.autoPaging)for(var B=y[0],k=y[y.length-1],S=B;S<k+1;S++){this.pdf.setPage(S);var _=1===S?this.posY+this.margin[0]:this.margin[0],E=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],F=this.pdf.internal.pageSize.height-this.margin[2],T=F-this.margin[0],I=this.pdf.internal.pageSize.width-this.margin[1],D=I-this.margin[3],L=1===S?0:E+(S-2)*T;if(0!==this.ctx.clip_path.length){var P=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(u,this.posX+this.margin[3],-1*L+_),w.call(this,"fill",!0),this.path=P}var R=v([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-L+_+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),A=this.lineWidth,this.lineWidth=A*e.scale);var U="text"!==this.autoPaging;if(U||R.y+R.h<=F){if(U||R.y>=_&&R.x<=I){var O=U?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||I-R.x)[0],M=v([JSON.parse(JSON.stringify(f))],this.posX+this.margin[3],-L+_+this.ctx.prevPageLastElemOffset)[0],Q=U&&(S>B||S<k)&&m.call(this);Q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],D,T,null).clip().discardPath()),this.pdf.text(O,M.x,M.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),Q&&this.pdf.restoreGraphicsState()}}else R.y<F&&(this.ctx.prevPageLastElemOffset+=F-R.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=A)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),A=this.lineWidth,this.lineWidth=A*e.scale),this.pdf.text(e.text,a.x+this.posX,a.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=A)},E=function(e,t,r,a){r=r||0,a=a||0,this.pdf.internal.out(n(e+r)+" "+s(t+a)+" l")},F=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},T=function(e,n,r,s,o,l,c,d){this.pdf.internal.out([t(a(r+e)),t(i(s+n)),t(a(o+e)),t(i(l+n)),t(a(c+e)),t(i(d+n)),"c"].join(" "))},I=function(e,t,n,r){for(var s=2*Math.PI,a=Math.PI/2;t>n;)t-=s;var i=Math.abs(n-t);i<s&&r&&(i=s-i);for(var o=[],l=r?-1:1,c=t;i>1e-5;){var d=c+l*Math.min(i,a);o.push(D.call(this,e,c,d)),i-=Math.abs(d-c),c=d}return o},D=function(e,t,n){var r=(n-t)/2,s=e*Math.cos(r),a=e*Math.sin(r),i=s,o=-a,l=i*i+o*o,c=l+i*s+o*a,d=4/3*(Math.sqrt(2*l*c)-c)/(i*a-o*s),u=i-d*o,h=o+d*i,A=u,f=-h,p=r+t,m=Math.cos(p),g=Math.sin(p);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:u*m-h*g,y2:u*g+h*m,x3:A*m-f*g,y3:A*g+f*m,x4:e*Math.cos(n),y4:e*Math.sin(n)}},L=function(e){return 180*e/Math.PI},P=function(e,t,n,r,s,a){var i=e+.5*(n-e),o=t+.5*(r-t),c=s+.5*(n-s),d=a+.5*(r-a),u=Math.min(e,s,i,c),h=Math.max(e,s,i,c),A=Math.min(t,a,o,d),f=Math.max(t,a,o,d);return new l(u,A,h-u,f-A)},R=function(e,t,n,r,s,a,i,o){var c,d,u,h,A,f,p,m,g,x,v,b,y,w,N=n-e,j=r-t,C=s-n,B=a-r,k=i-s,S=o-a;for(d=0;d<41;d++)g=(p=(u=e+(c=d/40)*N)+c*((A=n+c*C)-u))+c*(A+c*(s+c*k-A)-p),x=(m=(h=t+c*j)+c*((f=r+c*B)-h))+c*(f+c*(a+c*S-f)-m),0==d?(v=g,b=x,y=g,w=x):(v=Math.min(v,g),b=Math.min(b,x),y=Math.max(y,g),w=Math.max(w,x));return new l(Math.round(v),Math.round(b),Math.round(y-v),Math.round(w-b))},U=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(Xs.API),function(e){var t=function(e){var t,n,r,s,a,i,o,l,c,d;for(/[^\x00-\xFF]/.test(e),n=[],r=0,s=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;s>r;r+=4)0!==(a=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(i=(a=((a=((a=((a=(a-(d=a%85))/85)-(c=a%85))/85)-(l=a%85))/85)-(o=a%85))/85)%85,n.push(i+33,o+33,l+33,c+33,d+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,r,s,a,i=String,o="length",l=255,c="charCodeAt",d="slice",u="replace";for(e[d](-2),e=e[d](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),r=[],s=0,a=(e+=t="uuuuu"[d](e[o]%5||5))[o];a>s;s+=5)n=52200625*(e[c](s)-33)+614125*(e[c](s+1)-33)+7225*(e[c](s+2)-33)+85*(e[c](s+3)-33)+(e[c](s+4)-33),r.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(r,t[o]),i.fromCharCode.apply(i,r)},r=function(e){return e.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",r=0;r<e.length;r+=2)n+=String.fromCharCode("0x"+(e[r]+e[r+1]));return n},a=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=Q(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,i){var o=0,l=e||"",c=[];for("string"==typeof(i=i||[])&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=s(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=r(l),c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Xs.API),(ai=Xs.API).loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(e,t,n){var r=new XMLHttpRequest,s=0,a=function(e){var t=e.length,n=[],r=String.fromCharCode;for(s=0;s<t;s+=1)n.push(r(255&e.charCodeAt(s)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?n(a(this.responseText)):n(void 0)}),r.send(null),t&&200===r.status)return a(r.responseText)}(e,t,n)}catch(g){}return r}(e,t,n)},ai.loadImageFile=ai.loadFile,function(e){function t(){return(ms.html2canvas?Promise.resolve(ms.html2canvas):Promise.resolve().then(n.t.bind(n,1052,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function s(){return(ms.DOMPurify?Promise.resolve(ms.DOMPurify):n.e(82).then(n.bind(n,7082))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var a=function(e){var t=(0,r.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},i=function(e,t){var n=document.createElement(e);for(var r in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[r]=t.style[r];return n},o=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),s=t.firstChild;s;s=s.nextSibling)!0!==n&&1===s.nodeType&&"SCRIPT"===s.nodeName||r.appendChild(e(s,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft},!0)),r},l=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),n);return(r=r.setProgress(1,e,1,[e])).set(t)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(e,t){return e.__proto__=t||l.prototype,e},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(a(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e),t){case"string":return this.then(s).then(function(t){return this.set({src:i("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},l.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,s=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete s.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var a=0;a<n.length;++a){var i=n[a],o=i.src.find(function(e){return"truetype"===e.format});o&&t.addFont(o.url,i.ref.name,i.ref.style)}return s.windowHeight=s.windowHeight||0,s.windowHeight=0==s.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):s.windowHeight,t.context2d.save(!0),e(this.prop.container,s)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},l.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},l.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},l.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(e){if("object"!==a(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in l.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},l.prototype.get=function(e,t){return this.then(function(){var n=e in l.template.prop?this.prop[e]:this.opt[e];return t?t(n):n})},l.prototype.setMargin=function(e){return this.then(function(){switch(a(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},l.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||Xs.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},l.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},l.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return n.updateProgress(null,e),t}).then(e,t).then(function(e){return n.updateProgress(1),e})})},l.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then;var r=this;e&&(e=e.bind(r)),t&&(t=t.bind(r));var s=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?r:l.convert(Object.assign({},r),Promise.prototype),a=n.call(s,e,t);return l.convert(a,r.__proto__)},l.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},l.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},l.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return l.convert(t,this)},l.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},l.prototype.error=function(e){return this.then(function(){throw new Error(e)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Xs.getPageSize=function(e,t,n){if("object"===(0,r.A)(e)){var s=e;e=s.orientation,t=s.unit||t,n=s.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var a,i=(""+n).toLowerCase(),o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":a=1;break;case"mm":a=72/25.4;break;case"cm":a=72/2.54;break;case"in":a=72;break;case"px":a=.75;break;case"pc":case"em":a=12;break;case"ex":a=6;break;default:throw"Invalid unit: "+t}var l,c=0,d=0;if(o.hasOwnProperty(i))c=o[i][1]/a,d=o[i][0]/a;else try{c=n[1],d=n[0]}catch(Ns){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",d>c&&(l=d,d=c,c=l);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",c>d&&(l=d,d=c,c=l)}return{width:d,height:c,unit:t,k:a,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(za):null;var n=new l(t);return t.worker?n:n.from(e).doCallback()}}(Xs.API),Xs.API.addJS=function(e){return $a=e,this.internal.events.subscribe("postPutResources",function(){Ja=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ja+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Za=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+$a+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==Ja&&void 0!==Za&&this.internal.out("/Names <</JavaScript "+Ja+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),s=0;s<r.length;s++){var a=r[s],i=n.exec(a);if(null!=i){var o=i[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(a)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(s=0;s<l;s++){var d=e.internal.newObject();c.push(d);var u=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<c.length;s++)e.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var s=t.children[r];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var i=e.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(Xs.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,r,s,a,i){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=a||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,o=function(e){for(var n,r=256*e.charCodeAt(4)+e.charCodeAt(5),s=e.length,a={width:0,height:0,numcomponents:1},i=4;i<s;i+=2){if(i+=r,-1!==t.indexOf(e.charCodeAt(i+1))){n=256*e.charCodeAt(i+5)+e.charCodeAt(i+6),a={width:256*e.charCodeAt(i+7)+e.charCodeAt(i+8),height:n,numcomponents:e.charCodeAt(i+9)};break}r=256*e.charCodeAt(i+2)+e.charCodeAt(i+3)}return a}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),o.numcomponents){case 1:i=this.color_spaces.DEVICE_GRAY;break;case 4:i=this.color_spaces.DEVICE_CMYK;break;case 3:i=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:i,bitsPerComponent:8,filter:l,index:n,alias:r}}return c}}(Xs.API),Xs.API.processPNG=function(e,t,n,r){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var s,a=new fs(e,{checkCrc:!0}).decode(),i=a.width,o=a.height,l=a.channels,c=a.palette,d=a.depth;s=c&&1===l?function(e){for(var t=e.width,n=e.height,r=e.data,s=e.palette,a=e.depth,i=!1,o=[],l=[],c=void 0,d=!1,u=0,h=0;h<s.length;h++){var A=W(s[h],4),f=A[0],p=A[1],m=A[2],g=A[3];o.push(f,p,m),null!=g&&(0===g?(u++,l.length<1&&l.push(h)):g<255&&(d=!0))}if(d||u>1){i=!0,l=void 0;var x=t*n;c=new Uint8Array(x);for(var v=new DataView(r.buffer),b=0;b<x;b++){var y=W(s[pi(v,b,a)],4)[3];c[b]=y}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:r,alphaBytes:c,needSMask:i,palette:o,mask:l}}(a):2===l||4===l?function(e){for(var t=e.data,n=e.width,r=e.height,s=e.channels,a=e.depth,i=2===s?"DeviceGray":"DeviceRGB",o=s-1,l=n*r,c=o,d=l*c,u=1*l,h=Math.ceil(d*a/8),A=Math.ceil(u*a/8),f=new Uint8Array(h),p=new Uint8Array(A),m=new DataView(t.buffer),g=new DataView(f.buffer),x=new DataView(p.buffer),v=!1,b=0;b<l;b++){for(var y=b*s,w=0;w<c;w++)mi(g,pi(m,y+w,a),b*c+w,a);var N=pi(m,y+c,a);N<(1<<a)-1&&(v=!0),mi(x,N,1*b,a)}return{colorSpace:i,colorsPerPixel:o,colorBytes:f,alphaBytes:p,needSMask:v}}(a):function(e){var t=e.data,n=1===e.channels?"DeviceGray":"DeviceRGB";return{colorSpace:n,colorsPerPixel:"DeviceGray"===n?1:3,colorBytes:t instanceof Uint8Array?t:new Uint8Array(t.buffer),needSMask:!1}}(a);var u,h,A,f=s,p=f.colorSpace,m=f.colorsPerPixel,g=f.colorBytes,x=f.alphaBytes,v=f.needSMask,b=f.palette,y=f.mask,w=null;return r!==Xs.API.image_compression.NONE?(w=function(e){var t;switch(e){case Xs.API.image_compression.FAST:t=11;break;case Xs.API.image_compression.MEDIUM:t=13;break;case Xs.API.image_compression.SLOW:t=14;break;default:t=12}return t}(r),u=this.decode.FLATE_DECODE,h="/Predictor ".concat(w," "),e=oi(g,i*m,m,r),v&&(A=oi(x,i,1,r))):(u=void 0,h="",e=g,v&&(A=x)),h+="/Colors ".concat(m," /BitsPerComponent ").concat(d," /Columns ").concat(i),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(A&&this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),{alias:n,data:e,index:t,filter:u,decodeParameters:h,transparency:y,palette:b,sMask:A,predictor:w,width:i,height:o,bitsPerComponent:d,colorSpace:p}}},function(e){e.processGIF89A=function(t,n,r,s){var a=new xi(t),i=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:i,height:o},d=new bi(100).encode(c,100);return e.processJPEG.call(this,d,n,r,s)},e.processGIF87A=e.processGIF89A}(Xs.API),yi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},yi.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){xs.log("bit decode error:"+n)}},yi.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}0!==n&&(this.pos+=4-n)}},yi.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<e;s++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*s*4,o=a>>4,l=15&a,c=this.palette[o];if(this.data[i]=c.blue,this.data[i+1]=c.green,this.data[i+2]=c.red,this.data[i+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[i+4]=c.blue,this.data[i+4+1]=c.green,this.data[i+4+2]=c.red,this.data[i+4+3]=255}0!==t&&(this.pos+=4-t)}},yi.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(s<this.palette.length){var i=this.palette[s];this.data[a]=i.red,this.data[a+1]=i.green,this.data[a+2]=i.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}0!==e&&(this.pos+=4-e)}},yi.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&t)/t*255|0,o=(a>>5&t)/t*255|0,l=(a>>10&t)/t*255|0,c=a>>15?255:0,d=r*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=c}this.pos+=e}},yi.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&n)/n*255|0,c=(i>>11)/t*255|0,d=s*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},yi.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*n;this.data[i]=a,this.data[i+1]=s,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},yi.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=a,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=i}},yi.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,s){var a=new yi(t,!1),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},c=new bi(100).encode(l,100);return e.processJPEG.call(this,c,n,r,s)}}(Xs.API),wi.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,s){var a=new wi(t),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},c=new bi(100).encode(l,100);return e.processJPEG.call(this,c,n,r,s)}}(Xs.API),Xs.API.processRGBA=function(e,t,n){for(var r=e.data,s=r.length,a=new Uint8Array(s/4*3),i=new Uint8Array(s/4),o=0,l=0,c=0;c<s;c+=4){var d=r[c],u=r[c+1],h=r[c+2],A=r[c+3];a[o++]=d,a[o++]=u,a[o++]=h,i[l++]=A}var f=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:f,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Xs.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ei=Xs.API,ti=ei.getCharWidthsArray=function(e,t){var n,s,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=!1!==t.doKerning,A=0,f=e.length,p=0,m=l[0]||c,g=[];for(n=0;n<f;n++)s=e.charCodeAt(n),"function"==typeof a.metadata.widthOfString?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+o*(1e3/i)||0)/1e3):(A=h&&"object"===(0,r.A)(d[s])&&!isNaN(parseInt(d[s][p],10))?d[s][p]/u:0,g.push((l[s]||m)/c+A)),p=s;return g},ni=ei.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return ei.processArabic&&(e=ei.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,n,s)/n:ti.apply(this,arguments).reduce(function(e,t){return e+t},0)},ri=function(e,t,n,r){for(var s=[],a=0,i=e.length,o=0;a!==i&&o+t[a]<n;)o+=t[a],a++;s.push(e.slice(0,a));var l=a;for(o=0;a!==i;)o+t[a]>r&&(s.push(e.slice(l,a)),o=0,l=a),o+=t[a],a++;return l!==a&&s.push(e.slice(l,a)),s},si=function(e,t,n){n||(n={});var r,s,a,i,o,l,c,d=[],u=[d],h=n.textIndent||0,A=0,f=0,p=e.split(" "),m=ti.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?p[0].length+2:n.lineIndent||0){var g=Array(l).join(" "),x=[];p.map(function(e){(e=e.split(/\s*\n/)).length>1?x=x.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):x.push(e[0])}),p=x,l=ni.apply(this,[g,n])}for(a=0,i=p.length;a<i;a++){var v=0;if(r=p[a],l&&"\n"==r[0]&&(r=r.substr(1),v=1),h+A+(f=(s=ti.apply(this,[r,n])).reduce(function(e,t){return e+t},0))>t||v){if(f>t){for(o=ri.apply(this,[r,s,t-(h+A),t]),d.push(o.shift()),d=[o.pop()];o.length;)u.push([o.shift()]);f=s.slice(r.length-(d[0]?d[0].length:0)).reduce(function(e,t){return e+t},0)}else d=[r];u.push(d),h=f+l,A=m}else d.push(r),h+=A+f,A=m}return c=l?function(e,t){return(t?g:"")+e.join(" ")}:function(e){return e.join(" ")},u.map(c)},ei.splitTextToSize=function(e,t,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),a=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle),n="Unicode";return t.metadata[n]?{widths:t.metadata[n].widths||{0:1},kerning:t.metadata[n].kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/s;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(si.apply(this,[r[o],i,a]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",s={},a={},i=0;i<16;i++)s[n[i]]=t[i],a[t[i]]=n[i];var o=function(e){return"0x"+parseInt(e,10).toString(16)},l=e.__fontmetrics__.compress=function(e){var t,n,s,i,c=["{"];for(var d in e){if(t=e[d],isNaN(parseInt(d,10))?n="'"+d+"'":(d=parseInt(d,10),n=(n=o(d).slice(2)).slice(0,-1)+a[n.slice(-1)]),"number"==typeof t)t<0?(s=o(t).slice(3),i="-"):(s=o(t).slice(2),i=""),s=i+s.slice(0,-1)+a[s.slice(-1)];else{if("object"!==(0,r.A)(t))throw new Error("Don't know what to do with value type "+(0,r.A)(t)+".");s=l(t)}c.push(n+s)}return c.push("}"),c.join("")},c=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,n,r,a,i={},o=1,l=i,c=[],d="",u="",h=e.length-1,A=1;A<h;A+=1)"'"==(a=e[A])?t?(r=t.join(""),t=void 0):t=[]:t?t.push(a):"{"==a?(c.push([l,r]),l={},r=void 0):"}"==a?((n=c.pop())[0][n[1]]=l,r=void 0,l=n[0]):"-"==a?o=-1:void 0===r?s.hasOwnProperty(a)?(d+=s[a],r=parseInt(d,16)*o,o=1,d=""):d+=a:s.hasOwnProperty(a)?(u+=s[a],l[r]=parseInt(u,16)*o,o=1,r=void 0,u=""):u+=a;return i},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},h={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=h.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var r=u.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}(Xs.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n};e.API.events.push(["addFont",function(n){var r=void 0,s=n.font,a=n.instance;if(!s.isStandardFont){if(void 0===a)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if("string"!=typeof(r=!1===a.existsFileInVFS(s.postScriptName)?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?t(r):t(js(r)),n.metadata=e.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(s,r)}}])}(Xs),Xs.API.addSvgAsImage=function(e,t,r,s,a,i,o,l){if(isNaN(t)||isNaN(r))throw xs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw xs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=a;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(ms.canvg?Promise.resolve(ms.canvg):n.e(239).then(n.bind(n,2239))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e}).then(function(t){return t.fromString(d,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(u)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),t,r,s,a,o,l)})},Xs.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(t,n);return this},Xs.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var s,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function A(e,t){var n,r=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var f=l.length;for(h=0;h<f;h+=1)n[l[h]].value=n[l[h]].defaultValue,n[l[h]].explicitSet=!1}if("object"===(0,r.A)(e))for(a in e)if(i=e[a],A(l,a)&&void 0!==i){if("boolean"===n[a].type&&"boolean"==typeof i)n[a].value=i;else if("name"===n[a].type&&A(n[a].valueSet,i))n[a].value=i;else if("integer"===n[a].type&&Number.isInteger(i))n[a].value=i;else if("array"===n[a].type){for(d=0;d<i.length;d+=1)if(s=!0,1===i[d].length&&"number"==typeof i[d][0])c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)"number"!=typeof i[d][u]&&(s=!1);!0===s&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}n[a].value="["+c.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),a=unescape(encodeURIComponent("</x:xmpmeta>")),i=n.length+r.length+s.length+t.length+a.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+i+" >>"),this.internal.write("stream"),this.internal.write(t+n+r+s+a),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Xs.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,r=t.metadata.Unicode.widths,s=["","0","00","000","0000"],a=[""],i=0,o=e.length;i<o;++i){if(n=t.metadata.characterToGlyph(e.charCodeAt(i)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(i),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return a.join("");n=n.toString(16),a.push(s[4-n.length],n)}return a.join("")},r=function(e){var t,n,r,s,a,i,o;for(a="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],i=0,o=(n=Object.keys(e).sort(function(e,t){return e-t})).length;i<o;i++)t=n[i],r.length>=100&&(a+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(s=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+s+">"));return r.length&&(a+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),a+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,s=t.out,a=t.newObject,i=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var o=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",d=0;d<l.length;d++)c+=String.fromCharCode(l[d]);var u=a();i({data:c,addLength1:!0,objectId:u}),s("endobj");var h=a();i({data:r(n.metadata.toUnicode),addLength1:!0,objectId:h}),s("endobj");var A=a();s("<<"),s("/Type /FontDescriptor"),s("/FontName /"+zs(n.fontName)),s("/FontFile2 "+u+" 0 R"),s("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),s("/Flags "+n.metadata.flags),s("/StemV "+n.metadata.stemV),s("/ItalicAngle "+n.metadata.italicAngle),s("/Ascent "+n.metadata.ascender),s("/Descent "+n.metadata.decender),s("/CapHeight "+n.metadata.capHeight),s(">>"),s("endobj");var f=a();s("<<"),s("/Type /Font"),s("/BaseFont /"+zs(n.fontName)),s("/FontDescriptor "+A+" 0 R"),s("/W "+e.API.PDFObject.convert(o)),s("/CIDToGIDMap /Identity"),s("/DW 1000"),s("/Subtype /CIDFontType2"),s("/CIDSystemInfo"),s("<<"),s("/Supplement 0"),s("/Registry (Adobe)"),s("/Ordering ("+n.encoding+")"),s(">>"),s(">>"),s("endobj"),n.objectNumber=a(),s("<<"),s("/Type /Font"),s("/Subtype /Type0"),s("/ToUnicode "+h+" 0 R"),s("/BaseFont /"+zs(n.fontName)),s("/Encoding /"+n.encoding),s("/DescendantFonts ["+f+" 0 R]"),s(">>"),s("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,s=t.out,a=t.newObject,i=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var o=n.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var d=a();i({data:l,addLength1:!0,objectId:d}),s("endobj");var u=a();i({data:r(n.metadata.toUnicode),addLength1:!0,objectId:u}),s("endobj");var h=a();s("<<"),s("/Descent "+n.metadata.decender),s("/CapHeight "+n.metadata.capHeight),s("/StemV "+n.metadata.stemV),s("/Type /FontDescriptor"),s("/FontFile2 "+d+" 0 R"),s("/Flags 96"),s("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),s("/FontName /"+zs(n.fontName)),s("/ItalicAngle "+n.metadata.italicAngle),s("/Ascent "+n.metadata.ascender),s(">>"),s("endobj"),n.objectNumber=a();for(var A=0;A<n.metadata.hmtx.widths.length;A++)n.metadata.hmtx.widths[A]=parseInt(n.metadata.hmtx.widths[A]*(1e3/n.metadata.head.unitsPerEm));s("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+zs(n.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),s("endobj"),n.isAlreadyPutted=!0}}(t)}]);var s=function(e){var t,r=e.text||"",s=e.x,a=e.y,i=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,d=o.fonts,u=c,h="",A=0,f="",p=d[u].encoding;if("Identity-H"!==d[u].encoding)return{text:r,x:s,y:a,options:i,mutex:o};for(f=r,u=c,Array.isArray(r)&&(f=r[0]),A=0;A<f.length;A+=1)d[u].metadata.hasOwnProperty("cmap")&&(t=d[u].metadata.cmap.unicode.codeMap[f[A].charCodeAt(0)]),t||f[A].charCodeAt(0)<256&&d[u].metadata.hasOwnProperty("Unicode")?h+=f[A]:h+="";var m="";return parseInt(u.slice(1))<14||"WinAnsiEncoding"===p?m=l(h,u).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===p&&(m=n(h,d[u])),o.isHex=!0,{text:m,x:s,y:a,options:i,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var a=0;for(a=0;a<t.length;a+=1)Array.isArray(t[a])&&3===t[a].length?n.push([s(Object.assign({},r,{text:t[a][0]})).text,t[a][1],t[a][2]]):n.push(s(Object.assign({},r,{text:t[a]})).text);e.text=n}else e.text=s(Object.assign({},r,{text:t})).text}])}(Xs),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(Xs.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,r,s,a,i,o,l,c=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},f=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],p=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,g=0;this.__bidiEngine__={};var x=function(e){var t=e.charCodeAt(),n=t>>8,r=A[n];return void 0!==r?c[256*r+(255&t)]:252===n||253===n?"AL":p.test(n)?"L":8===n?"R":"N"},v=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=x(e.charAt(n))))return!1;if("R"===t)return!0}return!1},b=function(e,t,i,o){var l,c,d,u,h=t[o];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"N":case"AN":break;case"EN":m&&(h="AN");break;case"AL":m=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=i[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?h="N":m&&(c="AN"),h=c===l?c:"N";break;case"ES":h="EN"===(l=o>0?i[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===i[o-1]){h="EN";break}if(m){h="N";break}for(d=o+1,u=t.length;d<u&&"ET"===t[d];)d++;h=d<u&&"EN"===t[d]?"EN":"N";break;case"NSM":if(s&&!a){for(u=t.length,d=o+1;d<u&&"NSM"===t[d];)d++;if(d<u){var A=e[o],f=A>=1425&&A<=2303||64286===A;if(l=t[d],f&&("R"===l||"AL"===l)){h="R";break}}}h=o<1||"B"===(l=t[o-1])?"N":i[o-1];break;case"B":m=!1,n=!0,h=g;break;case"S":r=!0,h="N"}return h},y=function(e,t,n){var r=e.split("");return n&&w(r,n,{hiLevel:g}),r.reverse(),t&&t.reverse(),r.join("")},w=function(e,t,s){var a,i,o,l,c,A=-1,f=e.length,p=0,v=[],y=g?u:d,w=[];for(m=!1,n=!1,r=!1,i=0;i<f;i++)w[i]=x(e[i]);for(o=0;o<f;o++){if(c=p,v[o]=b(e,w,v,o),a=240&(p=y[c][h[v[o]]]),p&=15,t[o]=l=y[p][5],a>0)if(16===a){for(i=A;i<o;i++)t[i]=1;A=-1}else A=-1;if(y[p][6])-1===A&&(A=o);else if(A>-1){for(i=A;i<o;i++)t[i]=l;A=-1}"B"===w[o]&&(t[o]=0),s.hiLevel|=l}r&&function(e,t,n){for(var r=0;r<n;r++)if("S"===e[r]){t[r]=g;for(var s=r-1;s>=0&&"WS"===e[s];s--)t[s]=g}}(w,t,f)},N=function(e,t,r,s,a){if(!(a.hiLevel<e)){if(1===e&&1===g&&!n)return t.reverse(),void(r&&r.reverse());for(var i,o,l,c,d=t.length,u=0;u<d;){if(s[u]>=e){for(l=u+1;l<d&&s[l]>=e;)l++;for(c=u,o=l-1;c<o;c++,o--)i=t[c],t[c]=t[o],t[o]=i,r&&(i=r[c],r[c]=r[o],r[o]=i);u=l}u++}}},j=function(e,t,n){var r=e.split(""),s={hiLevel:g};return n||(n=[]),w(r,n,s),function(e,t,n){if(0!==n.hiLevel&&l)for(var r,s=0;s<e.length;s++)1===t[s]&&(r=f.indexOf(e[s]))>=0&&(e[s]=f[r+1])}(r,n,s),N(2,r,t,n,s),N(1,r,t,n,s),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===a&&(a=v(e)),void 0===o&&(o=v(e))}(e,t),s||!i||o)if(s&&i&&a^o)g=a?1:0,e=y(e,t,n);else if(!s&&i&&o)g=a?1:0,e=j(e,t,n),e=y(e,t);else if(!s||a||i||o){if(s&&!i&&a^o)e=y(e,t),a?(g=0,e=j(e,t,n)):(g=1,e=j(e,t,n),e=y(e,t));else if(s&&a&&!i&&o)g=1,e=j(e,t,n),e=y(e,t);else if(!s&&!i&&a^o){var r=l;a?(g=1,e=j(e,t,n),g=0,l=!1,e=j(e,t,n),l=r):(g=0,e=j(e,t,n),e=y(e,t),g=1,l=!1,e=j(e,t,n),l=r,e=y(e,t))}}else g=0,e=j(e,t,n);else g=a?1:0,e=j(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(s=e.isInputVisual,i=e.isOutputVisual,a=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var r=e.options||{};e.mutex,r.lang;var s=[];if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var a=0;for(s=[],a=0;a<t.length;a+=1)"[object Array]"===Object.prototype.toString.call(t[a])?s.push([n.doBidiReorder(t[a][0]),t[a][1],t[a][2]]):s.push([n.doBidiReorder(t[a])]);e.text=s}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(Xs),Xs.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new ji(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new zi(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Ci(this.contents),this.head=new Si(this),this.name=new Li(this),this.cmap=new Ei(this),this.toUnicode={},this.hhea=new Fi(this),this.maxp=new Pi(this),this.hmtx=new Ri(this),this.post=new Ii(this),this.os2=new Ti(this),this.loca=new Hi(this),this.glyf=new Oi(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,r,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,r,s;for(s=[],t=0,n=(r=this.bbox).length;t<n;t++)e=r[t],s.push(Math.round(e*this.scaleFactor));return s}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),32768&(t=r>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(s=this.familyClass)||2===s||3===s||4===s||5===s||7===s,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var r,s,a,i;for(a=0,s=0,i=(e=""+e).length;0<=i?s<i:s>i;s=0<=i?++s:--s)r=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return a*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var Ni,ji=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,r,s,a,i,o;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^s)+65536*(255^a)+256*(255^i)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*s+65536*a+256*i+o},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,r,s;for(s=[],n=0,r=e.length;n<r;n++)t=e[n],s.push(this.writeByte(t));return s},e}(),Ci=function(){var e;function t(e){var t,n,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,r,s,a,i,o,l,c,d,u,h,A,f;for(f in h=Object.keys(t).length,o=Math.log(2),d=16*Math.floor(Math.log(h)/o),a=Math.floor(d/o),c=16*h-d,(r=new ji).writeInt(this.scalarType),r.writeShort(h),r.writeShort(d),r.writeShort(a),r.writeShort(c),s=16*h,l=r.pos+s,i=null,A=[],t)for(u=t[f],r.writeString(f),r.writeInt(e(u)),r.writeInt(l),r.writeInt(u.length),A=A.concat(u),"head"===f&&(i=l),l+=u.length;l%4;)A.push(0),l++;return r.write(A),n=2981146554-e(r.data),r.pos=i+8,r.writeUInt32(n),r.data},e=function(e){var t,n,r,s;for(e=Ui.call(e);e.length%4;)e.push(0);for(r=new ji(e),n=0,t=0,s=e.length;t<s;t=t+=4)n+=r.readUInt32();return 4294967295&n},t}(),Bi={}.hasOwnProperty,ki=function(e,t){for(var n in t)Bi.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Ni=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Si=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new ji).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),_i=function(){function e(e,t){var n,r,s,a,i,o,l,c,d,u,h,A,f,p,m,g,x;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(h=e.readUInt16(),u=h/2,e.pos+=6,s=function(){var t,n;for(n=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,f=function(){var t,n;for(n=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)n.push(e.readUInt16());return n}(),r=(this.length-e.pos+this.offset)/2,i=function(){var t,n;for(n=[],o=t=0;0<=r?t<r:t>r;o=0<=r?++t:--t)n.push(e.readUInt16());return n}(),o=m=0,x=s.length;m<x;o=++m)for(p=s[o],n=g=A=f[o];A<=p?g<=p:g>=p;n=A<=p?++g:--g)0===c[o]?a=n+l[o]:0!==(a=i[c[o]/2+(n-A)-(u-o)]||0)&&(a+=l[o]),this.codeMap[n]=65535&a}e.pos=d}return e.encode=function(e,t){var n,r,s,a,i,o,l,c,d,u,h,A,f,p,m,g,x,v,b,y,w,N,j,C,B,k,S,_,E,F,T,I,D,L,P,R,U,O,M,Q,H,z,W,V,K,G;switch(_=new ji,a=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(f=0,p=function(){var e=[];for(A=0;A<256;++A)e.push(0);return e}(),g={0:0},s={},E=0,D=a.length;E<D;E++)null==g[W=e[r=a[E]]]&&(g[W]=++f),s[r]={old:e[r],new:g[e[r]]},p[r]=g[e[r]];return _.writeUInt16(1),_.writeUInt16(0),_.writeUInt32(12),_.writeUInt16(0),_.writeUInt16(262),_.writeUInt16(0),_.write(p),{charMap:s,subtable:_.data,maxGlyphID:f+1};case"unicode":for(k=[],d=[],x=0,g={},n={},m=l=null,F=0,L=a.length;F<L;F++)null==g[b=e[r=a[F]]]&&(g[b]=++x),n[r]={old:b,new:g[b]},i=g[b]-r,null!=m&&i===l||(m&&d.push(m),k.push(r),l=i),m=r;for(m&&d.push(m),d.push(65535),k.push(65535),C=2*(j=k.length),N=2*Math.pow(Math.log(j)/Math.LN2,2),u=Math.log(N/2)/Math.LN2,w=2*j-N,o=[],y=[],h=[],A=T=0,P=k.length;T<P;A=++T){if(B=k[A],c=d[A],65535===B){o.push(0),y.push(0);break}if(B-(S=n[B].new)>=32768)for(o.push(0),y.push(2*(h.length+j-A)),r=I=B;B<=c?I<=c:I>=c;r=B<=c?++I:--I)h.push(n[r].new);else o.push(S-B),y.push(0)}for(_.writeUInt16(3),_.writeUInt16(1),_.writeUInt32(12),_.writeUInt16(4),_.writeUInt16(16+8*j+2*h.length),_.writeUInt16(0),_.writeUInt16(C),_.writeUInt16(N),_.writeUInt16(u),_.writeUInt16(w),H=0,R=d.length;H<R;H++)r=d[H],_.writeUInt16(r);for(_.writeUInt16(0),z=0,U=k.length;z<U;z++)r=k[z],_.writeUInt16(r);for(V=0,O=o.length;V<O;V++)i=o[V],_.writeUInt16(i);for(K=0,M=y.length;K<M;K++)v=y[K],_.writeUInt16(v);for(G=0,Q=h.length;G<Q;G++)f=h[G],_.writeUInt16(f);return{charMap:n,subtable:_.data,maxGlyphID:x+1}}},e}(),Ei=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new _i(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,r;return null==t&&(t="macroman"),n=_i.encode(e,t),(r=new ji).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),Fi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),Ti=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),Ii=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,r;for(r=[],s=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;s=0<=n?++t:--t)r.push(e.readUInt32());return r}.call(this)}},e}(),Di=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Li=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,r,s,a,i,o,l,c,d,u;for(e.pos=this.offset,e.readShort(),t=e.readShort(),i=e.readShort(),n=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+i+e.readShort()});for(o={},s=c=0,d=n.length;c<d;s=++c)r=n[s],e.pos=r.offset,l=e.readString(r.length),a=new Di(l,r),null==o[u=r.nameID]&&(o[u]=[]),o[r.nameID].push(a);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(js){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),Pi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),Ri=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,r,s,a,i,o;for(e.pos=this.offset,this.metrics=[],t=0,i=this.file.hhea.numberOfMetrics;0<=i?t<i:t>i;t=0<=i?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,s;for(s=[],t=n=0;0<=r?n<r:n>r;t=0<=r?++n:--n)s.push(e.readInt16());return s}(),this.widths=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.metrics).length;e<t;e++)s=n[e],r.push(s.advance);return r}.call(this),n=this.widths[this.widths.length-1],o=[],t=a=0;0<=r?a<r:a>r;t=0<=r?++a:--a)o.push(this.widths.push(n));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),Ui=[].slice,Oi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,r,s,a,i,o,l,c,d;return e in this.cache?this.cache[e]:(s=this.file.loca,t=this.file.contents,n=s.indexOf(e),0===(r=s.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,a=(i=new ji(t.read(r))).readShort(),l=i.readShort(),d=i.readShort(),o=i.readShort(),c=i.readShort(),this.cache[e]=-1===a?new Qi(i,l,d,o,c):new Mi(i,a,l,d,o,c),this.cache[e]))},e.prototype.encode=function(e,t,n){var r,s,a,i,o;for(a=[],s=[],i=0,o=t.length;i<o;i++)r=e[t[i]],s.push(a.length),r&&(a=a.concat(r.encode(n)));return s.push(a.length),{table:a,offsets:s}},e}(),Mi=function(){function e(e,t,n,r,s,a){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Qi=function(){function e(e,t,n,r,s){var a,i;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;i=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&i;)a.pos+=1&i?4:2,128&i?a.pos+=8:64&i?a.pos+=4:8&i&&(a.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new ji(Ui.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),Hi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=4)r.push(e.readUInt32());return r}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,s=0,a=0;a<n.length;++a)if(n[a]=r,s<t.length&&t[s]==a){++s,n[a]=r;var i=this.offsets[a],o=this.offsets[a+1]-i;o>0&&(r+=o)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),zi=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,r,s;for(t in r=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[t],e[t]=r[n];return e},e.prototype.glyphsFor=function(e){var t,n,r,s,a,i,o;for(r={},a=0,i=e.length;a<i;a++)r[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],r)(null!=(n=r[s])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(s in o=this.glyphsFor(t))n=o[s],r[s]=n;return r},e.prototype.encode=function(e,t){var n,r,s,a,i,o,l,c,d,u,h,A,f,p,m;for(r in n=Ei.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),h={0:0},m=n.charMap)h[(o=m[r]).old]=o.new;for(A in u=n.maxGlyphID,a)A in h||(h[A]=u++);return c=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(h),d=Object.keys(c).sort(function(e,t){return e-t}),f=function(){var e,t,n;for(n=[],e=0,t=d.length;e<t;e++)i=d[e],n.push(c[i]);return n}(),s=this.font.glyf.encode(a,f,h),l=this.font.loca.encode(s.offsets,f),p={cmap:this.font.cmap.raw(),glyf:s.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},e}();Xs.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var r,s,a,i;if(Array.isArray(n))return"["+function(){var e,s,a;for(a=[],e=0,s=n.length;e<s;e++)r=n[e],a.push(t.convert(r));return a}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(s in a=["<<"],n)i=n[s],a.push("/"+s+" "+t.convert(i));return a.push(">>"),a.join("\n")}return""+n},t}()},7119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(8345)},7307:(e,t,n)=>{var r;self,r=function(e,t){return function(){var r={"./src/plugin/hyperlinks.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/core-js/modules/web.dom-collections.for-each.js"),n("./node_modules/core-js/modules/es.string.link.js");var r=n("./src/worker.js"),s=n("./src/utils.js"),a=[],i={toContainer:r.default.prototype.toContainer,toPdf:r.default.prototype.toPdf};r.default.prototype.toContainer=function(){return i.toContainer.call(this).then(function(){if(this.opt.enableLinks){var e=this.prop.container,t=e.querySelectorAll("a"),n=(0,s.unitConvert)(e.getBoundingClientRect(),this.prop.pageSize.k);a=[],Array.prototype.forEach.call(t,function(e){for(var t=e.getClientRects(),r=0;r<t.length;r++){var i=(0,s.unitConvert)(t[r],this.prop.pageSize.k);i.left-=n.left,i.top-=n.top;var o=Math.floor(i.top/this.prop.pageSize.inner.height)+1,l=this.opt.margin[0]+i.top%this.prop.pageSize.inner.height,c=this.opt.margin[1]+i.left;a.push({page:o,top:l,left:c,clientRect:i,link:e})}},this)}})},r.default.prototype.toPdf=function(){return i.toPdf.call(this).then(function(){if(this.opt.enableLinks){a.forEach(function(e){this.prop.pdf.setPage(e.page),this.prop.pdf.link(e.left,e.top,e.clientRect.width,e.clientRect.height,{url:e.link.href})},this);var e=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(e)}})}},"./src/plugin/jspdf-plugin.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/core-js/modules/es.symbol.js"),n("./node_modules/core-js/modules/es.symbol.description.js"),n("./node_modules/core-js/modules/es.object.to-string.js"),n("./node_modules/core-js/modules/es.symbol.iterator.js"),n("./node_modules/core-js/modules/es.array.iterator.js"),n("./node_modules/core-js/modules/es.string.iterator.js"),n("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("jspdf");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}r.jsPDF.getPageSize=function(e,t,n){if("object"===s(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var a=(""+n).toLowerCase(),i={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":var o=1;break;case"mm":o=72/25.4;break;case"cm":o=72/2.54;break;case"in":o=72;break;case"px":o=.75;break;case"pc":case"em":o=12;break;case"ex":o=6;break;default:throw"Invalid unit: "+t}if(i.hasOwnProperty(a))var l=i[a][1]/o,c=i[a][0]/o;else try{l=n[1],c=n[0]}catch(u){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e){if(e="p",c>l){var d=c;c=l,l=d}}else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(d=c,c=l,l=d)}return{width:c,height:l,unit:t,k:o}},t.default=r.jsPDF},"./src/plugin/pagebreaks.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/core-js/modules/es.array.concat.js"),n("./node_modules/core-js/modules/es.array.slice.js"),n("./node_modules/core-js/modules/es.array.join.js"),n("./node_modules/core-js/modules/web.dom-collections.for-each.js"),n("./node_modules/core-js/modules/es.object.keys.js");var r=n("./src/worker.js"),s=n("./src/utils.js"),a={toContainer:r.default.prototype.toContainer};r.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},r.default.prototype.toContainer=function(){return a.toContainer.call(this).then(function(){var e=this.prop.container,t=this.prop.pageSize.inner.px.height,n=[].concat(this.opt.pagebreak.mode),r={avoidAll:-1!==n.indexOf("avoid-all"),css:-1!==n.indexOf("css"),legacy:-1!==n.indexOf("legacy")},a={},i=this;["before","after","avoid"].forEach(function(t){var n=r.avoidAll&&"avoid"===t;a[t]=n?[]:[].concat(i.opt.pagebreak[t]||[]),a[t].length>0&&(a[t]=Array.prototype.slice.call(e.querySelectorAll(a[t].join(", "))))});var o=e.querySelectorAll(".html2pdf__page-break");o=Array.prototype.slice.call(o);var l=e.querySelectorAll("*");Array.prototype.forEach.call(l,function(e){var n={before:!1,after:r.legacy&&-1!==o.indexOf(e),avoid:r.avoidAll};if(r.css){var i=window.getComputedStyle(e),l=["always","page","left","right"];n={before:n.before||-1!==l.indexOf(i.breakBefore||i.pageBreakBefore),after:n.after||-1!==l.indexOf(i.breakAfter||i.pageBreakAfter),avoid:n.avoid||-1!==["avoid","avoid-page"].indexOf(i.breakInside||i.pageBreakInside)}}Object.keys(n).forEach(function(t){n[t]=n[t]||-1!==a[t].indexOf(e)});var c=e.getBoundingClientRect();if(n.avoid&&!n.before){var d=Math.floor(c.top/t),u=Math.floor(c.bottom/t),h=Math.abs(c.bottom-c.top)/t;u!==d&&h<=1&&(n.before=!0)}if(n.before){var A=(0,s.createElement)("div",{style:{display:"block",height:t-c.top%t+"px"}});e.parentNode.insertBefore(A,e)}n.after&&(A=(0,s.createElement)("div",{style:{display:"block",height:t-c.bottom%t+"px"}}),e.parentNode.insertBefore(A,e.nextSibling))})})}},"./src/utils.js":function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.r(t),n.d(t,{objType:function(){return s},createElement:function(){return a},cloneNode:function(){return i},unitConvert:function(){return o},toPx:function(){return l}}),n("./node_modules/core-js/modules/es.number.constructor.js"),n("./node_modules/core-js/modules/es.symbol.js"),n("./node_modules/core-js/modules/es.symbol.description.js"),n("./node_modules/core-js/modules/es.object.to-string.js"),n("./node_modules/core-js/modules/es.symbol.iterator.js"),n("./node_modules/core-js/modules/es.array.iterator.js"),n("./node_modules/core-js/modules/es.string.iterator.js"),n("./node_modules/core-js/modules/web.dom-collections.iterator.js");var s=function(e){var t=r(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},a=function(e,t){var n=document.createElement(e);if(t.className&&(n.className=t.className),t.innerHTML){n.innerHTML=t.innerHTML;for(var r=n.getElementsByTagName("script"),s=r.length;s-- >0;null)r[s].parentNode.removeChild(r[s])}for(var a in t.style)n.style[a]=t.style[a];return n},i=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),s=t.firstChild;s;s=s.nextSibling)!0!==n&&1===s.nodeType&&"SCRIPT"===s.nodeName||r.appendChild(e(s,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft},!0)),r},o=function(e,t){if("number"===s(e))return 72*e/96/t;var n={};for(var r in e)n[r]=72*e[r]/96/t;return n},l=function(e,t){return Math.floor(e*t/72*96)}},"./src/worker.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/core-js/modules/es.object.assign.js"),n("./node_modules/core-js/modules/es.array.map.js"),n("./node_modules/core-js/modules/es.object.keys.js"),n("./node_modules/core-js/modules/es.array.concat.js"),n("./node_modules/core-js/modules/es.object.to-string.js"),n("./node_modules/core-js/modules/es.regexp.to-string.js"),n("./node_modules/core-js/modules/es.function.name.js"),n("./node_modules/core-js/modules/web.dom-collections.for-each.js");var r=n("jspdf"),s=n("html2canvas"),a=n("./src/utils.js"),i=n("./node_modules/es6-promise/dist/es6-promise.js"),o=n.n(i)().Promise,l=function e(t){var n=Object.assign(e.convert(o.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(o.resolve(),n);return r=(r=r.setProgress(1,e,1,[e])).set(t)};(l.prototype=Object.create(o.prototype)).constructor=l,l.convert=function(e,t){return e.__proto__=t||l.prototype,e},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},l.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch((0,a.objType)(e)){case"string":return"string";case"element":return e.nodeName.toLowerCase&&"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e),t){case"string":return this.set({src:(0,a.createElement)("div",{innerHTML:e})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},l.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},t={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};e.opacity=0;var n=(0,a.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,a.createElement)("div",{className:"html2pdf__overlay",style:e}),this.prop.container=(0,a.createElement)("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(n),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)})},l.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(function(){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,s(this.prop.container,e)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},l.prototype.toPdf=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e=this.prop.canvas,t=this.opt,n=e.height,s=Math.floor(e.width*this.prop.pageSize.inner.ratio),a=Math.ceil(n/s),i=this.prop.pageSize.inner.height,o=document.createElement("canvas"),l=o.getContext("2d");o.width=e.width,o.height=s,this.prop.pdf=this.prop.pdf||new r.jsPDF(t.jsPDF);for(var c=0;c<a;c++){c===a-1&&n%s!==0&&(o.height=n%s,i=o.height*this.prop.pageSize.inner.width/o.width);var d=o.width,u=o.height;l.fillStyle="white",l.fillRect(0,0,d,u),l.drawImage(e,0,c*s,d,u,0,0,d,u),c&&this.prop.pdf.addPage();var h=o.toDataURL("image/"+t.image.type,t.image.quality);this.prop.pdf.addImage(h,t.image.type,t.margin[1],t.margin[0],this.prop.pageSize.inner.width,i)}})},l.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},l.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},l.prototype.outputImg=function(e,t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},l.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.set=function(e){if("object"!==(0,a.objType)(e))return this;var t=Object.keys(e||{}).map(function(t){switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return t in l.template.prop?function(){this.prop[t]=e[t]}:function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},l.prototype.get=function(e,t){return this.then(function(){var n=e in l.template.prop?this.prop[e]:this.opt[e];return t?t(n):n})},l.prototype.setMargin=function(e){return this.then(function(){switch((0,a.objType)(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},l.prototype.setPageSize=function(e){return this.then(function(){(e=e||r.jsPDF.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:(0,a.toPx)(e.inner.width,e.k),height:(0,a.toPx)(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},l.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},l.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,function(e,t){return n.updateProgress(null,null,1,[e]),o.prototype.then.call(this,function(t){return n.updateProgress(null,e),t}).then(e,t).then(function(e){return n.updateProgress(1),e})})},l.prototype.thenCore=function(e,t,n){n=n||o.prototype.then;var r=this;e&&(e=e.bind(r)),t&&(t=t.bind(r));var s=-1!==o.toString().indexOf("[native code]")&&"Promise"===o.name?r:l.convert(Object.assign({},r),o.prototype),a=n.call(s,e,t);return l.convert(a,r.__proto__)},l.prototype.thenExternal=function(e,t){return o.prototype.then.call(this,e,t)},l.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},l.prototype.catch=function(e){e&&(e=e.bind(this));var t=o.prototype.catch.call(this,e);return l.convert(t,this)},l.prototype.catchExternal=function(e){return o.prototype.catch.call(this,e)},l.prototype.error=function(e){return this.then(function(){throw new Error(e)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,t.default=l},"./node_modules/core-js/internals/a-function.js":function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"./node_modules/core-js/internals/a-possible-prototype.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"./node_modules/core-js/internals/add-to-unscopables.js":function(e,t,n){var r=n("./node_modules/core-js/internals/well-known-symbol.js"),s=n("./node_modules/core-js/internals/object-create.js"),a=n("./node_modules/core-js/internals/object-define-property.js"),i=r("unscopables"),o=Array.prototype;void 0==o[i]&&a.f(o,i,{configurable:!0,value:s(null)}),e.exports=function(e){o[i][e]=!0}},"./node_modules/core-js/internals/an-object.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},"./node_modules/core-js/internals/array-for-each.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/array-iteration.js").forEach,s=n("./node_modules/core-js/internals/array-method-is-strict.js")("forEach");e.exports=s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-indexed-object.js"),s=n("./node_modules/core-js/internals/to-length.js"),a=n("./node_modules/core-js/internals/to-absolute-index.js"),i=function(e){return function(t,n,i){var o,l=r(t),c=s(l.length),d=a(i,c);if(e&&n!=n){for(;c>d;)if((o=l[d++])!=o)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},"./node_modules/core-js/internals/array-iteration.js":function(e,t,n){var r=n("./node_modules/core-js/internals/function-bind-context.js"),s=n("./node_modules/core-js/internals/indexed-object.js"),a=n("./node_modules/core-js/internals/to-object.js"),i=n("./node_modules/core-js/internals/to-length.js"),o=n("./node_modules/core-js/internals/array-species-create.js"),l=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,d=4==e,u=6==e,h=7==e,A=5==e||u;return function(f,p,m,g){for(var x,v,b=a(f),y=s(b),w=r(p,m,3),N=i(y.length),j=0,C=g||o,B=t?C(f,N):n||h?C(f,0):void 0;N>j;j++)if((A||j in y)&&(v=w(x=y[j],j,b),e))if(t)B[j]=v;else if(v)switch(e){case 3:return!0;case 5:return x;case 6:return j;case 2:l.call(B,x)}else switch(e){case 4:return!1;case 7:l.call(B,x)}return u?-1:c||d?d:B}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js"),s=n("./node_modules/core-js/internals/well-known-symbol.js"),a=n("./node_modules/core-js/internals/engine-v8-version.js"),i=s("species");e.exports=function(e){return a>=51||!r(function(){var t=[];return(t.constructor={})[i]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},"./node_modules/core-js/internals/array-method-is-strict.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/fails.js");e.exports=function(e,t){var n=[][e];return!!n&&r(function(){n.call(null,t||function(){throw 1},1)})}},"./node_modules/core-js/internals/array-species-constructor.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js"),s=n("./node_modules/core-js/internals/is-array.js"),a=n("./node_modules/core-js/internals/well-known-symbol.js")("species");e.exports=function(e){var t;return s(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!s(t.prototype)?r(t)&&null===(t=t[a])&&(t=void 0):t=void 0),void 0===t?Array:t}},"./node_modules/core-js/internals/array-species-create.js":function(e,t,n){var r=n("./node_modules/core-js/internals/array-species-constructor.js");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},"./node_modules/core-js/internals/classof-raw.js":function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-string-tag-support.js"),s=n("./node_modules/core-js/internals/classof-raw.js"),a=n("./node_modules/core-js/internals/well-known-symbol.js")("toStringTag"),i="Arguments"==s(function(){return arguments}());e.exports=r?s:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),a))?n:i?s(t):"Object"==(r=s(t))&&"function"==typeof t.callee?"Arguments":r}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(e,t,n){var r=n("./node_modules/core-js/internals/has.js"),s=n("./node_modules/core-js/internals/own-keys.js"),a=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),i=n("./node_modules/core-js/internals/object-define-property.js");e.exports=function(e,t){for(var n=s(t),o=i.f,l=a.f,c=0;c<n.length;c++){var d=n[c];r(e,d)||o(e,d,l(t,d))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js");e.exports=!r(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},"./node_modules/core-js/internals/create-html.js":function(e,t,n){var r=n("./node_modules/core-js/internals/require-object-coercible.js"),s=n("./node_modules/core-js/internals/to-string.js"),a=/"/g;e.exports=function(e,t,n,i){var o=s(r(e)),l="<"+t;return""!==n&&(l+=" "+n+'="'+s(i).replace(a,"&quot;")+'"'),l+">"+o+"</"+t+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,s=n("./node_modules/core-js/internals/object-create.js"),a=n("./node_modules/core-js/internals/create-property-descriptor.js"),i=n("./node_modules/core-js/internals/set-to-string-tag.js"),o=n("./node_modules/core-js/internals/iterators.js"),l=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=s(r,{next:a(1,n)}),i(e,c,!1,!0),o[c]=l,e}},"./node_modules/core-js/internals/create-non-enumerable-property.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/object-define-property.js"),a=n("./node_modules/core-js/internals/create-property-descriptor.js");e.exports=r?function(e,t,n){return s.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},"./node_modules/core-js/internals/create-property-descriptor.js":function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"./node_modules/core-js/internals/create-property.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/to-property-key.js"),s=n("./node_modules/core-js/internals/object-define-property.js"),a=n("./node_modules/core-js/internals/create-property-descriptor.js");e.exports=function(e,t,n){var i=r(t);i in e?s.f(e,i,a(0,n)):e[i]=n}},"./node_modules/core-js/internals/define-iterator.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/create-iterator-constructor.js"),a=n("./node_modules/core-js/internals/object-get-prototype-of.js"),i=n("./node_modules/core-js/internals/object-set-prototype-of.js"),o=n("./node_modules/core-js/internals/set-to-string-tag.js"),l=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),c=n("./node_modules/core-js/internals/redefine.js"),d=n("./node_modules/core-js/internals/well-known-symbol.js"),u=n("./node_modules/core-js/internals/is-pure.js"),h=n("./node_modules/core-js/internals/iterators.js"),A=n("./node_modules/core-js/internals/iterators-core.js"),f=A.IteratorPrototype,p=A.BUGGY_SAFARI_ITERATORS,m=d("iterator"),g="keys",x="values",v="entries",b=function(){return this};e.exports=function(e,t,n,d,A,y,w){s(n,t,d);var N,j,C,B=function(e){if(e===A&&F)return F;if(!p&&e in _)return _[e];switch(e){case g:case x:case v:return function(){return new n(this,e)}}return function(){return new n(this)}},k=t+" Iterator",S=!1,_=e.prototype,E=_[m]||_["@@iterator"]||A&&_[A],F=!p&&E||B(A),T="Array"==t&&_.entries||E;if(T&&(N=a(T.call(new e)),f!==Object.prototype&&N.next&&(u||a(N)===f||(i?i(N,f):"function"!=typeof N[m]&&l(N,m,b)),o(N,k,!0,!0),u&&(h[k]=b))),A==x&&E&&E.name!==x&&(S=!0,F=function(){return E.call(this)}),u&&!w||_[m]===F||l(_,m,F),h[t]=F,A)if(j={values:B(x),keys:y?F:B(g),entries:B(v)},w)for(C in j)(p||S||!(C in _))&&c(_,C,j[C]);else r({target:t,proto:!0,forced:p||S},j);return j}},"./node_modules/core-js/internals/define-well-known-symbol.js":function(e,t,n){var r=n("./node_modules/core-js/internals/path.js"),s=n("./node_modules/core-js/internals/has.js"),a=n("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),i=n("./node_modules/core-js/internals/object-define-property.js").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});s(t,e)||i(t,e,{value:a.f(e)})}},"./node_modules/core-js/internals/descriptors.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js");e.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},"./node_modules/core-js/internals/document-create-element.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/is-object.js"),a=r.document,i=s(a)&&s(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},"./node_modules/core-js/internals/dom-iterables.js":function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":function(e,t,n){var r=n("./node_modules/core-js/internals/get-built-in.js");e.exports=r("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":function(e,t,n){var r,s,a=n("./node_modules/core-js/internals/global.js"),i=n("./node_modules/core-js/internals/engine-user-agent.js"),o=a.process,l=a.Deno,c=o&&o.versions||l&&l.version,d=c&&c.v8;d?s=(r=d.split("."))[0]<4?1:r[0]+r[1]:i&&(!(r=i.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=i.match(/Chrome\/(\d+)/))&&(s=r[1]),e.exports=s&&+s},"./node_modules/core-js/internals/enum-bug-keys.js":function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,a=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),i=n("./node_modules/core-js/internals/redefine.js"),o=n("./node_modules/core-js/internals/set-global.js"),l=n("./node_modules/core-js/internals/copy-constructor-properties.js"),c=n("./node_modules/core-js/internals/is-forced.js");e.exports=function(e,t){var n,d,u,h,A,f=e.target,p=e.global,m=e.stat;if(n=p?r:m?r[f]||o(f,{}):(r[f]||{}).prototype)for(d in t){if(h=t[d],u=e.noTargetGet?(A=s(n,d))&&A.value:n[d],!c(p?d:f+(m?".":"#")+d,e.forced)&&void 0!==u){if(typeof h===typeof u)continue;l(h,u)}(e.sham||u&&u.sham)&&a(h,"sham",!0),i(n,d,h,e)}}},"./node_modules/core-js/internals/fails.js":function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"./node_modules/core-js/internals/function-bind-context.js":function(e,t,n){var r=n("./node_modules/core-js/internals/a-function.js");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,s){return e.call(t,n,r,s)}}return function(){return e.apply(t,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js");e.exports=function(e,t){return arguments.length<2?"function"==typeof(n=r[e])?n:void 0:r[e]&&r[e][t];var n}},"./node_modules/core-js/internals/global.js":function(e){var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-object.js"),s={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return s.call(r(e),t)}},"./node_modules/core-js/internals/hidden-keys.js":function(e){e.exports={}},"./node_modules/core-js/internals/html.js":function(e,t,n){var r=n("./node_modules/core-js/internals/get-built-in.js");e.exports=r("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/fails.js"),a=n("./node_modules/core-js/internals/document-create-element.js");e.exports=!r&&!s(function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},"./node_modules/core-js/internals/indexed-object.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js"),s=n("./node_modules/core-js/internals/classof-raw.js"),a="".split;e.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==s(e)?a.call(e,""):Object(e)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js"),s=n("./node_modules/core-js/internals/object-set-prototype-of.js");e.exports=function(e,t,n){var a,i;return s&&"function"==typeof(a=t.constructor)&&a!==n&&r(i=a.prototype)&&i!==n.prototype&&s(e,i),e}},"./node_modules/core-js/internals/inspect-source.js":function(e,t,n){var r=n("./node_modules/core-js/internals/shared-store.js"),s=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return s.call(e)}),e.exports=r.inspectSource},"./node_modules/core-js/internals/internal-state.js":function(e,t,n){var r,s,a,i=n("./node_modules/core-js/internals/native-weak-map.js"),o=n("./node_modules/core-js/internals/global.js"),l=n("./node_modules/core-js/internals/is-object.js"),c=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),d=n("./node_modules/core-js/internals/has.js"),u=n("./node_modules/core-js/internals/shared-store.js"),h=n("./node_modules/core-js/internals/shared-key.js"),A=n("./node_modules/core-js/internals/hidden-keys.js"),f="Object already initialized",p=o.WeakMap;if(i||u.state){var m=u.state||(u.state=new p),g=m.get,x=m.has,v=m.set;r=function(e,t){if(x.call(m,e))throw new TypeError(f);return t.facade=e,v.call(m,e,t),t},s=function(e){return g.call(m,e)||{}},a=function(e){return x.call(m,e)}}else{var b=h("state");A[b]=!0,r=function(e,t){if(d(e,b))throw new TypeError(f);return t.facade=e,c(e,b,t),t},s=function(e){return d(e,b)?e[b]:{}},a=function(e){return d(e,b)}}e.exports={set:r,get:s,has:a,enforce:function(e){return a(e)?s(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=s(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},"./node_modules/core-js/internals/is-array.js":function(e,t,n){var r=n("./node_modules/core-js/internals/classof-raw.js");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"./node_modules/core-js/internals/is-forced.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js"),s=/#|\.prototype\./,a=function(e,t){var n=o[i(e)];return n==c||n!=l&&("function"==typeof t?r(t):!!t)},i=a.normalize=function(e){return String(e).replace(s,".").toLowerCase()},o=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},"./node_modules/core-js/internals/is-object.js":function(e){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},"./node_modules/core-js/internals/is-pure.js":function(e){e.exports=!1},"./node_modules/core-js/internals/is-symbol.js":function(e,t,n){var r=n("./node_modules/core-js/internals/get-built-in.js"),s=n("./node_modules/core-js/internals/use-symbol-as-uid.js");e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return"function"==typeof t&&Object(e)instanceof t}},"./node_modules/core-js/internals/iterators-core.js":function(e,t,n){"use strict";var r,s,a,i=n("./node_modules/core-js/internals/fails.js"),o=n("./node_modules/core-js/internals/object-get-prototype-of.js"),l=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),c=n("./node_modules/core-js/internals/has.js"),d=n("./node_modules/core-js/internals/well-known-symbol.js"),u=n("./node_modules/core-js/internals/is-pure.js"),h=d("iterator"),A=!1;[].keys&&("next"in(a=[].keys())?(s=o(o(a)))!==Object.prototype&&(r=s):A=!0);var f=void 0==r||i(function(){var e={};return r[h].call(e)!==e});f&&(r={}),u&&!f||c(r,h)||l(r,h,function(){return this}),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:A}},"./node_modules/core-js/internals/iterators.js":function(e){e.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(e,t,n){var r=n("./node_modules/core-js/internals/engine-v8-version.js"),s=n("./node_modules/core-js/internals/fails.js");e.exports=!!Object.getOwnPropertySymbols&&!s(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41})},"./node_modules/core-js/internals/native-weak-map.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/inspect-source.js"),a=r.WeakMap;e.exports="function"===typeof a&&/native code/.test(s(a))},"./node_modules/core-js/internals/object-assign.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/fails.js"),a=n("./node_modules/core-js/internals/object-keys.js"),i=n("./node_modules/core-js/internals/object-get-own-property-symbols.js"),o=n("./node_modules/core-js/internals/object-property-is-enumerable.js"),l=n("./node_modules/core-js/internals/to-object.js"),c=n("./node_modules/core-js/internals/indexed-object.js"),d=Object.assign,u=Object.defineProperty;e.exports=!d||s(function(){if(r&&1!==d({b:1},d(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),s="abcdefghijklmnopqrst";return e[n]=7,s.split("").forEach(function(e){t[e]=e}),7!=d({},e)[n]||a(d({},t)).join("")!=s})?function(e,t){for(var n=l(e),s=arguments.length,d=1,u=i.f,h=o.f;s>d;)for(var A,f=c(arguments[d++]),p=u?a(f).concat(u(f)):a(f),m=p.length,g=0;m>g;)A=p[g++],r&&!h.call(f,A)||(n[A]=f[A]);return n}:d},"./node_modules/core-js/internals/object-create.js":function(e,t,n){var r,s=n("./node_modules/core-js/internals/an-object.js"),a=n("./node_modules/core-js/internals/object-define-properties.js"),i=n("./node_modules/core-js/internals/enum-bug-keys.js"),o=n("./node_modules/core-js/internals/hidden-keys.js"),l=n("./node_modules/core-js/internals/html.js"),c=n("./node_modules/core-js/internals/document-create-element.js"),d=n("./node_modules/core-js/internals/shared-key.js"),u="prototype",h="script",A=d("IE_PROTO"),f=function(){},p=function(e){return"<"+h+">"+e+"</"+h+">"},m=function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}g=document.domain&&r?m(r):function(){var e,t=c("iframe"),n="java"+h+":";if(t.style)return t.style.display="none",l.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F}()||m(r);for(var e=i.length;e--;)delete g[u][i[e]];return g()};o[A]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f[u]=s(e),n=new f,f[u]=null,n[A]=e):n=g(),void 0===t?n:a(n,t)}},"./node_modules/core-js/internals/object-define-properties.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/object-define-property.js"),a=n("./node_modules/core-js/internals/an-object.js"),i=n("./node_modules/core-js/internals/object-keys.js");e.exports=r?Object.defineProperties:function(e,t){a(e);for(var n,r=i(t),o=r.length,l=0;o>l;)s.f(e,n=r[l++],t[n]);return e}},"./node_modules/core-js/internals/object-define-property.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/ie8-dom-define.js"),a=n("./node_modules/core-js/internals/an-object.js"),i=n("./node_modules/core-js/internals/to-property-key.js"),o=Object.defineProperty;t.f=r?o:function(e,t,n){if(a(e),t=i(t),a(n),s)try{return o(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/object-property-is-enumerable.js"),a=n("./node_modules/core-js/internals/create-property-descriptor.js"),i=n("./node_modules/core-js/internals/to-indexed-object.js"),o=n("./node_modules/core-js/internals/to-property-key.js"),l=n("./node_modules/core-js/internals/has.js"),c=n("./node_modules/core-js/internals/ie8-dom-define.js"),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=i(e),t=o(t),c)try{return d(e,t)}catch(n){}if(l(e,t))return a(!s.f.call(e,t),e[t])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-indexed-object.js"),s=n("./node_modules/core-js/internals/object-get-own-property-names.js").f,a={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return i&&"[object Window]"==a.call(e)?function(e){try{return s(e)}catch(t){return i.slice()}}(e):s(r(e))}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(e,t,n){var r=n("./node_modules/core-js/internals/object-keys-internal.js"),s=n("./node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,s)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(e,t){t.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(e,t,n){var r=n("./node_modules/core-js/internals/has.js"),s=n("./node_modules/core-js/internals/to-object.js"),a=n("./node_modules/core-js/internals/shared-key.js"),i=n("./node_modules/core-js/internals/correct-prototype-getter.js"),o=a("IE_PROTO"),l=Object.prototype;e.exports=i?Object.getPrototypeOf:function(e){return e=s(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(e,t,n){var r=n("./node_modules/core-js/internals/has.js"),s=n("./node_modules/core-js/internals/to-indexed-object.js"),a=n("./node_modules/core-js/internals/array-includes.js").indexOf,i=n("./node_modules/core-js/internals/hidden-keys.js");e.exports=function(e,t){var n,o=s(e),l=0,c=[];for(n in o)!r(i,n)&&r(o,n)&&c.push(n);for(;t.length>l;)r(o,n=t[l++])&&(~a(c,n)||c.push(n));return c}},"./node_modules/core-js/internals/object-keys.js":function(e,t,n){var r=n("./node_modules/core-js/internals/object-keys-internal.js"),s=n("./node_modules/core-js/internals/enum-bug-keys.js");e.exports=Object.keys||function(e){return r(e,s)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,s=r&&!n.call({1:2},1);t.f=s?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},"./node_modules/core-js/internals/object-set-prototype-of.js":function(e,t,n){var r=n("./node_modules/core-js/internals/an-object.js"),s=n("./node_modules/core-js/internals/a-possible-prototype.js");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(a){}return function(n,a){return r(n),s(a),t?e.call(n,a):n.__proto__=a,n}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/to-string-tag-support.js"),s=n("./node_modules/core-js/internals/classof.js");e.exports=r?{}.toString:function(){return"[object "+s(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js");e.exports=function(e,t){var n,s;if("string"===t&&"function"==typeof(n=e.toString)&&!r(s=n.call(e)))return s;if("function"==typeof(n=e.valueOf)&&!r(s=n.call(e)))return s;if("string"!==t&&"function"==typeof(n=e.toString)&&!r(s=n.call(e)))return s;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":function(e,t,n){var r=n("./node_modules/core-js/internals/get-built-in.js"),s=n("./node_modules/core-js/internals/object-get-own-property-names.js"),a=n("./node_modules/core-js/internals/object-get-own-property-symbols.js"),i=n("./node_modules/core-js/internals/an-object.js");e.exports=r("Reflect","ownKeys")||function(e){var t=s.f(i(e)),n=a.f;return n?t.concat(n(e)):t}},"./node_modules/core-js/internals/path.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js");e.exports=r},"./node_modules/core-js/internals/redefine.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),a=n("./node_modules/core-js/internals/has.js"),i=n("./node_modules/core-js/internals/set-global.js"),o=n("./node_modules/core-js/internals/inspect-source.js"),l=n("./node_modules/core-js/internals/internal-state.js"),c=l.get,d=l.enforce,u=String(String).split("String");(e.exports=function(e,t,n,o){var l,c=!!o&&!!o.unsafe,h=!!o&&!!o.enumerable,A=!!o&&!!o.noTargetGet;"function"==typeof n&&("string"!=typeof t||a(n,"name")||s(n,"name",t),(l=d(n)).source||(l.source=u.join("string"==typeof t?t:""))),e!==r?(c?!A&&e[t]&&(h=!0):delete e[t],h?e[t]=n:s(e,t,n)):h?e[t]=n:i(t,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&c(this).source||o(this)})},"./node_modules/core-js/internals/regexp-flags.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/an-object.js");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"./node_modules/core-js/internals/require-object-coercible.js":function(e){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"./node_modules/core-js/internals/set-global.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js");e.exports=function(e,t){try{Object.defineProperty(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},"./node_modules/core-js/internals/set-to-string-tag.js":function(e,t,n){var r=n("./node_modules/core-js/internals/object-define-property.js").f,s=n("./node_modules/core-js/internals/has.js"),a=n("./node_modules/core-js/internals/well-known-symbol.js")("toStringTag");e.exports=function(e,t,n){e&&!s(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},"./node_modules/core-js/internals/shared-key.js":function(e,t,n){var r=n("./node_modules/core-js/internals/shared.js"),s=n("./node_modules/core-js/internals/uid.js"),a=r("keys");e.exports=function(e){return a[e]||(a[e]=s(e))}},"./node_modules/core-js/internals/shared-store.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/set-global.js"),a="__core-js_shared__",i=r[a]||s(a,{});e.exports=i},"./node_modules/core-js/internals/shared.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-pure.js"),s=n("./node_modules/core-js/internals/shared-store.js");(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.16.0",mode:r?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js");e.exports=function(e){return r(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})}},"./node_modules/core-js/internals/string-multibyte.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-integer.js"),s=n("./node_modules/core-js/internals/to-string.js"),a=n("./node_modules/core-js/internals/require-object-coercible.js"),i=function(e){return function(t,n){var i,o,l=s(a(t)),c=r(n),d=l.length;return c<0||c>=d?e?"":void 0:(i=l.charCodeAt(c))<55296||i>56319||c+1===d||(o=l.charCodeAt(c+1))<56320||o>57343?e?l.charAt(c):i:e?l.slice(c,c+2):o-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},"./node_modules/core-js/internals/string-trim.js":function(e,t,n){var r=n("./node_modules/core-js/internals/require-object-coercible.js"),s=n("./node_modules/core-js/internals/to-string.js"),a="["+n("./node_modules/core-js/internals/whitespaces.js")+"]",i=RegExp("^"+a+a+"*"),o=RegExp(a+a+"*$"),l=function(e){return function(t){var n=s(r(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},"./node_modules/core-js/internals/to-absolute-index.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-integer.js"),s=Math.max,a=Math.min;e.exports=function(e,t){var n=r(e);return n<0?s(n+t,0):a(n,t)}},"./node_modules/core-js/internals/to-indexed-object.js":function(e,t,n){var r=n("./node_modules/core-js/internals/indexed-object.js"),s=n("./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return r(s(e))}},"./node_modules/core-js/internals/to-integer.js":function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},"./node_modules/core-js/internals/to-length.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-integer.js"),s=Math.min;e.exports=function(e){return e>0?s(r(e),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(e,t,n){var r=n("./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return Object(r(e))}},"./node_modules/core-js/internals/to-primitive.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js"),s=n("./node_modules/core-js/internals/is-symbol.js"),a=n("./node_modules/core-js/internals/ordinary-to-primitive.js"),i=n("./node_modules/core-js/internals/well-known-symbol.js")("toPrimitive");e.exports=function(e,t){if(!r(e)||s(e))return e;var n,o=e[i];if(void 0!==o){if(void 0===t&&(t="default"),n=o.call(e,t),!r(n)||s(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},"./node_modules/core-js/internals/to-property-key.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-primitive.js"),s=n("./node_modules/core-js/internals/is-symbol.js");e.exports=function(e){var t=r(e,"string");return s(t)?t:String(t)}},"./node_modules/core-js/internals/to-string-tag-support.js":function(e,t,n){var r={};r[n("./node_modules/core-js/internals/well-known-symbol.js")("toStringTag")]="z",e.exports="[object z]"===String(r)},"./node_modules/core-js/internals/to-string.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-symbol.js");e.exports=function(e){if(r(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},"./node_modules/core-js/internals/uid.js":function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":function(e,t,n){var r=n("./node_modules/core-js/internals/native-symbol.js");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":function(e,t,n){var r=n("./node_modules/core-js/internals/well-known-symbol.js");t.f=r},"./node_modules/core-js/internals/well-known-symbol.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/shared.js"),a=n("./node_modules/core-js/internals/has.js"),i=n("./node_modules/core-js/internals/uid.js"),o=n("./node_modules/core-js/internals/native-symbol.js"),l=n("./node_modules/core-js/internals/use-symbol-as-uid.js"),c=s("wks"),d=r.Symbol,u=l?d:d&&d.withoutSetter||i;e.exports=function(e){return a(c,e)&&(o||"string"==typeof c[e])||(o&&a(d,e)?c[e]=d[e]:c[e]=u("Symbol."+e)),c[e]}},"./node_modules/core-js/internals/whitespaces.js":function(e){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},"./node_modules/core-js/modules/es.array.concat.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/fails.js"),a=n("./node_modules/core-js/internals/is-array.js"),i=n("./node_modules/core-js/internals/is-object.js"),o=n("./node_modules/core-js/internals/to-object.js"),l=n("./node_modules/core-js/internals/to-length.js"),c=n("./node_modules/core-js/internals/create-property.js"),d=n("./node_modules/core-js/internals/array-species-create.js"),u=n("./node_modules/core-js/internals/array-method-has-species-support.js"),h=n("./node_modules/core-js/internals/well-known-symbol.js"),A=n("./node_modules/core-js/internals/engine-v8-version.js"),f=h("isConcatSpreadable"),p=9007199254740991,m="Maximum allowed index exceeded",g=A>=51||!s(function(){var e=[];return e[f]=!1,e.concat()[0]!==e}),x=u("concat"),v=function(e){if(!i(e))return!1;var t=e[f];return void 0!==t?!!t:a(e)};r({target:"Array",proto:!0,forced:!g||!x},{concat:function(e){var t,n,r,s,a,i=o(this),u=d(i,0),h=0;for(t=-1,r=arguments.length;t<r;t++)if(v(a=-1===t?i:arguments[t])){if(h+(s=l(a.length))>p)throw TypeError(m);for(n=0;n<s;n++,h++)n in a&&c(u,h,a[n])}else{if(h>=p)throw TypeError(m);c(u,h++,a)}return u.length=h,u}})},"./node_modules/core-js/modules/es.array.iterator.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/to-indexed-object.js"),s=n("./node_modules/core-js/internals/add-to-unscopables.js"),a=n("./node_modules/core-js/internals/iterators.js"),i=n("./node_modules/core-js/internals/internal-state.js"),o=n("./node_modules/core-js/internals/define-iterator.js"),l="Array Iterator",c=i.set,d=i.getterFor(l);e.exports=o(Array,"Array",function(e,t){c(this,{type:l,target:r(e),index:0,kind:t})},function(){var e=d(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values"),a.Arguments=a.Array,s("keys"),s("values"),s("entries")},"./node_modules/core-js/modules/es.array.join.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/indexed-object.js"),a=n("./node_modules/core-js/internals/to-indexed-object.js"),i=n("./node_modules/core-js/internals/array-method-is-strict.js"),o=[].join,l=s!=Object,c=i("join",",");r({target:"Array",proto:!0,forced:l||!c},{join:function(e){return o.call(a(this),void 0===e?",":e)}})},"./node_modules/core-js/modules/es.array.map.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/array-iteration.js").map;r({target:"Array",proto:!0,forced:!n("./node_modules/core-js/internals/array-method-has-species-support.js")("map")},{map:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/is-object.js"),a=n("./node_modules/core-js/internals/is-array.js"),i=n("./node_modules/core-js/internals/to-absolute-index.js"),o=n("./node_modules/core-js/internals/to-length.js"),l=n("./node_modules/core-js/internals/to-indexed-object.js"),c=n("./node_modules/core-js/internals/create-property.js"),d=n("./node_modules/core-js/internals/well-known-symbol.js"),u=n("./node_modules/core-js/internals/array-method-has-species-support.js")("slice"),h=d("species"),A=[].slice,f=Math.max;r({target:"Array",proto:!0,forced:!u},{slice:function(e,t){var n,r,d,u=l(this),p=o(u.length),m=i(e,p),g=i(void 0===t?p:t,p);if(a(u)&&("function"!=typeof(n=u.constructor)||n!==Array&&!a(n.prototype)?s(n)&&null===(n=n[h])&&(n=void 0):n=void 0,n===Array||void 0===n))return A.call(u,m,g);for(r=new(void 0===n?Array:n)(f(g-m,0)),d=0;m<g;m++,d++)m in u&&c(r,d,u[m]);return r.length=d,r}})},"./node_modules/core-js/modules/es.function.name.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/object-define-property.js").f,a=Function.prototype,i=a.toString,o=/^\s*function ([^ (]*)/,l="name";r&&!(l in a)&&s(a,l,{configurable:!0,get:function(){try{return i.call(this).match(o)[1]}catch(e){return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/global.js"),a=n("./node_modules/core-js/internals/is-forced.js"),i=n("./node_modules/core-js/internals/redefine.js"),o=n("./node_modules/core-js/internals/has.js"),l=n("./node_modules/core-js/internals/classof-raw.js"),c=n("./node_modules/core-js/internals/inherit-if-required.js"),d=n("./node_modules/core-js/internals/is-symbol.js"),u=n("./node_modules/core-js/internals/to-primitive.js"),h=n("./node_modules/core-js/internals/fails.js"),A=n("./node_modules/core-js/internals/object-create.js"),f=n("./node_modules/core-js/internals/object-get-own-property-names.js").f,p=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,m=n("./node_modules/core-js/internals/object-define-property.js").f,g=n("./node_modules/core-js/internals/string-trim.js").trim,x="Number",v=s[x],b=v.prototype,y=l(A(b))==x,w=function(e){if(d(e))throw TypeError("Cannot convert a Symbol value to a number");var t,n,r,s,a,i,o,l,c=u(e,"number");if("string"==typeof c&&c.length>2)if(43===(t=(c=g(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,s=49;break;case 79:case 111:r=8,s=55;break;default:return+c}for(i=(a=c.slice(2)).length,o=0;o<i;o++)if((l=a.charCodeAt(o))<48||l>s)return NaN;return parseInt(a,r)}return+c};if(a(x,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var N,j=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof j&&(y?h(function(){b.valueOf.call(n)}):l(n)!=x)?c(new v(w(t)),n,j):w(t)},C=r?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),B=0;C.length>B;B++)o(v,N=C[B])&&!o(j,N)&&m(j,N,p(v,N));j.prototype=b,b.constructor=j,i(s,x,j)}},"./node_modules/core-js/modules/es.object.assign.js":function(e,t,n){var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/object-assign.js");r({target:"Object",stat:!0,forced:Object.assign!==s},{assign:s})},"./node_modules/core-js/modules/es.object.keys.js":function(e,t,n){var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/to-object.js"),a=n("./node_modules/core-js/internals/object-keys.js");r({target:"Object",stat:!0,forced:n("./node_modules/core-js/internals/fails.js")(function(){a(1)})},{keys:function(e){return a(s(e))}})},"./node_modules/core-js/modules/es.object.to-string.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-string-tag-support.js"),s=n("./node_modules/core-js/internals/redefine.js"),a=n("./node_modules/core-js/internals/object-to-string.js");r||s(Object.prototype,"toString",a,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/redefine.js"),s=n("./node_modules/core-js/internals/an-object.js"),a=n("./node_modules/core-js/internals/to-string.js"),i=n("./node_modules/core-js/internals/fails.js"),o=n("./node_modules/core-js/internals/regexp-flags.js"),l="toString",c=RegExp.prototype,d=c[l],u=i(function(){return"/a/b"!=d.call({source:"a",flags:"b"})}),h=d.name!=l;(u||h)&&r(RegExp.prototype,l,function(){var e=s(this),t=a(e.source),n=e.flags;return"/"+t+"/"+a(void 0===n&&e instanceof RegExp&&!("flags"in c)?o.call(e):n)},{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/string-multibyte.js").charAt,s=n("./node_modules/core-js/internals/to-string.js"),a=n("./node_modules/core-js/internals/internal-state.js"),i=n("./node_modules/core-js/internals/define-iterator.js"),o="String Iterator",l=a.set,c=a.getterFor(o);i(String,"String",function(e){l(this,{type:o,string:s(e),index:0})},function(){var e,t=c(this),n=t.string,s=t.index;return s>=n.length?{value:void 0,done:!0}:(e=r(n,s),t.index+=e.length,{value:e,done:!1})})},"./node_modules/core-js/modules/es.string.link.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/create-html.js");r({target:"String",proto:!0,forced:n("./node_modules/core-js/internals/string-html-forced.js")("link")},{link:function(e){return s(this,"a","href",e)}})},"./node_modules/core-js/modules/es.symbol.description.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/descriptors.js"),a=n("./node_modules/core-js/internals/global.js"),i=n("./node_modules/core-js/internals/has.js"),o=n("./node_modules/core-js/internals/is-object.js"),l=n("./node_modules/core-js/internals/object-define-property.js").f,c=n("./node_modules/core-js/internals/copy-constructor-properties.js"),d=a.Symbol;if(s&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof h?new d(e):void 0===e?d():d(e);return""===e&&(u[t]=!0),t};c(h,d);var A=h.prototype=d.prototype;A.constructor=h;var f=A.toString,p="Symbol(test)"==String(d("test")),m=/^Symbol\((.*)\)[^)]+$/;l(A,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=f.call(e);if(i(u,e))return"";var n=p?t.slice(7,-1):t.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:h})}},"./node_modules/core-js/modules/es.symbol.iterator.js":function(e,t,n){n("./node_modules/core-js/internals/define-well-known-symbol.js")("iterator")},"./node_modules/core-js/modules/es.symbol.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/global.js"),a=n("./node_modules/core-js/internals/get-built-in.js"),i=n("./node_modules/core-js/internals/is-pure.js"),o=n("./node_modules/core-js/internals/descriptors.js"),l=n("./node_modules/core-js/internals/native-symbol.js"),c=n("./node_modules/core-js/internals/fails.js"),d=n("./node_modules/core-js/internals/has.js"),u=n("./node_modules/core-js/internals/is-array.js"),h=n("./node_modules/core-js/internals/is-object.js"),A=n("./node_modules/core-js/internals/is-symbol.js"),f=n("./node_modules/core-js/internals/an-object.js"),p=n("./node_modules/core-js/internals/to-object.js"),m=n("./node_modules/core-js/internals/to-indexed-object.js"),g=n("./node_modules/core-js/internals/to-property-key.js"),x=n("./node_modules/core-js/internals/to-string.js"),v=n("./node_modules/core-js/internals/create-property-descriptor.js"),b=n("./node_modules/core-js/internals/object-create.js"),y=n("./node_modules/core-js/internals/object-keys.js"),w=n("./node_modules/core-js/internals/object-get-own-property-names.js"),N=n("./node_modules/core-js/internals/object-get-own-property-names-external.js"),j=n("./node_modules/core-js/internals/object-get-own-property-symbols.js"),C=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),B=n("./node_modules/core-js/internals/object-define-property.js"),k=n("./node_modules/core-js/internals/object-property-is-enumerable.js"),S=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),_=n("./node_modules/core-js/internals/redefine.js"),E=n("./node_modules/core-js/internals/shared.js"),F=n("./node_modules/core-js/internals/shared-key.js"),T=n("./node_modules/core-js/internals/hidden-keys.js"),I=n("./node_modules/core-js/internals/uid.js"),D=n("./node_modules/core-js/internals/well-known-symbol.js"),L=n("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),P=n("./node_modules/core-js/internals/define-well-known-symbol.js"),R=n("./node_modules/core-js/internals/set-to-string-tag.js"),U=n("./node_modules/core-js/internals/internal-state.js"),O=n("./node_modules/core-js/internals/array-iteration.js").forEach,M=F("hidden"),Q="Symbol",H="prototype",z=D("toPrimitive"),W=U.set,V=U.getterFor(Q),K=Object[H],G=s.Symbol,q=a("JSON","stringify"),X=C.f,Y=B.f,J=N.f,Z=k.f,$=E("symbols"),ee=E("op-symbols"),te=E("string-to-symbol-registry"),ne=E("symbol-to-string-registry"),re=E("wks"),se=s.QObject,ae=!se||!se[H]||!se[H].findChild,ie=o&&c(function(){return 7!=b(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=X(K,t);r&&delete K[t],Y(e,t,n),r&&e!==K&&Y(K,t,r)}:Y,oe=function(e,t){var n=$[e]=b(G[H]);return W(n,{type:Q,tag:e,description:t}),o||(n.description=t),n},le=function(e,t,n){e===K&&le(ee,t,n),f(e);var r=g(t);return f(n),d($,r)?(n.enumerable?(d(e,M)&&e[M][r]&&(e[M][r]=!1),n=b(n,{enumerable:v(0,!1)})):(d(e,M)||Y(e,M,v(1,{})),e[M][r]=!0),ie(e,r,n)):Y(e,r,n)},ce=function(e,t){f(e);var n=m(t),r=y(n).concat(Ae(n));return O(r,function(t){o&&!de.call(n,t)||le(e,t,n[t])}),e},de=function(e){var t=g(e),n=Z.call(this,t);return!(this===K&&d($,t)&&!d(ee,t))&&(!(n||!d(this,t)||!d($,t)||d(this,M)&&this[M][t])||n)},ue=function(e,t){var n=m(e),r=g(t);if(n!==K||!d($,r)||d(ee,r)){var s=X(n,r);return!s||!d($,r)||d(n,M)&&n[M][r]||(s.enumerable=!0),s}},he=function(e){var t=J(m(e)),n=[];return O(t,function(e){d($,e)||d(T,e)||n.push(e)}),n},Ae=function(e){var t=e===K,n=J(t?ee:m(e)),r=[];return O(n,function(e){!d($,e)||t&&!d(K,e)||r.push($[e])}),r};l||(G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?x(arguments[0]):void 0,t=I(e),n=function(e){this===K&&n.call(ee,e),d(this,M)&&d(this[M],t)&&(this[M][t]=!1),ie(this,t,v(1,e))};return o&&ae&&ie(K,t,{configurable:!0,set:n}),oe(t,e)},_(G[H],"toString",function(){return V(this).tag}),_(G,"withoutSetter",function(e){return oe(I(e),e)}),k.f=de,B.f=le,C.f=ue,w.f=N.f=he,j.f=Ae,L.f=function(e){return oe(D(e),e)},o&&(Y(G[H],"description",{configurable:!0,get:function(){return V(this).description}}),i||_(K,"propertyIsEnumerable",de,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:G}),O(y(re),function(e){P(e)}),r({target:Q,stat:!0,forced:!l},{for:function(e){var t=x(e);if(d(te,t))return te[t];var n=G(t);return te[t]=n,ne[n]=t,n},keyFor:function(e){if(!A(e))throw TypeError(e+" is not a symbol");if(d(ne,e))return ne[e]},useSetter:function(){ae=!0},useSimple:function(){ae=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!o},{create:function(e,t){return void 0===t?b(e):ce(b(e),t)},defineProperty:le,defineProperties:ce,getOwnPropertyDescriptor:ue}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:he,getOwnPropertySymbols:Ae}),r({target:"Object",stat:!0,forced:c(function(){j.f(1)})},{getOwnPropertySymbols:function(e){return j.f(p(e))}}),q&&r({target:"JSON",stat:!0,forced:!l||c(function(){var e=G();return"[null]"!=q([e])||"{}"!=q({a:e})||"{}"!=q(Object(e))})},{stringify:function(e,t,n){for(var r,s=[e],a=1;arguments.length>a;)s.push(arguments[a++]);if(r=t,(h(t)||void 0!==e)&&!A(e))return u(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!A(t))return t}),s[1]=t,q.apply(null,s)}}),G[H][z]||S(G[H],z,G[H].valueOf),R(G,Q),T[M]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/dom-iterables.js"),a=n("./node_modules/core-js/internals/array-for-each.js"),i=n("./node_modules/core-js/internals/create-non-enumerable-property.js");for(var o in s){var l=r[o],c=l&&l.prototype;if(c&&c.forEach!==a)try{i(c,"forEach",a)}catch(d){c.forEach=a}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/dom-iterables.js"),a=n("./node_modules/core-js/modules/es.array.iterator.js"),i=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),o=n("./node_modules/core-js/internals/well-known-symbol.js"),l=o("iterator"),c=o("toStringTag"),d=a.values;for(var u in s){var h=r[u],A=h&&h.prototype;if(A){if(A[l]!==d)try{i(A,l,d)}catch(p){A[l]=d}if(A[c]||i(A,c,u),s[u])for(var f in a)if(A[f]!==a[f])try{i(A,f,a[f])}catch(p){A[f]=a[f]}}}},"./node_modules/es6-promise/dist/es6-promise.js":function(e){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"===typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=0,a=void 0,i=void 0,o=function(e,t){b[s]=e,b[s+1]=t,2===(s+=2)&&(i?i(y):N())};function l(e){i=e}function c(e){o=e}var d="undefined"!==typeof window?window:void 0,u=d||{},h=u.MutationObserver||u.WebKitMutationObserver,A="undefined"===typeof self&&"undefined"!==typeof process&&"[object process]"==={}.toString.call(process),f="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel;function p(){return function(){return process.nextTick(y)}}function m(){return"undefined"!==typeof a?function(){a(y)}:v()}function g(){var e=0,t=new h(y),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function x(){var e=new MessageChannel;return e.port1.onmessage=y,function(){return e.port2.postMessage(0)}}function v(){var e=setTimeout;return function(){return e(y,1)}}var b=new Array(1e3);function y(){for(var e=0;e<s;e+=2)(0,b[e])(b[e+1]),b[e]=void 0,b[e+1]=void 0;s=0}function w(){try{var e=Function("return this")().require("vertx");return a=e.runOnLoop||e.runOnContext,m()}catch(t){return v()}}var N=void 0;function j(e,t){var n=this,r=new this.constructor(k);void 0===r[B]&&G(r);var s=n._state;if(s){var a=arguments[s-1];o(function(){return z(s,r,a,n._result)})}else Q(n,r,e,t);return r}function C(e){var t=this;if(e&&"object"===typeof e&&e.constructor===t)return e;var n=new t(k);return R(n,e),n}N=A?p():h?g():f?x():void 0===d?w():v();var B=Math.random().toString(36).substring(2);function k(){}var S=void 0,_=1,E=2;function F(){return new TypeError("You cannot resolve a promise with itself")}function T(){return new TypeError("A promises callback cannot return that same promise.")}function I(e,t,n,r){try{e.call(t,n,r)}catch(s){return s}}function D(e,t,n){o(function(e){var r=!1,s=I(n,t,function(n){r||(r=!0,t!==n?R(e,n):O(e,n))},function(t){r||(r=!0,M(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&s&&(r=!0,M(e,s))},e)}function L(e,t){t._state===_?O(e,t._result):t._state===E?M(e,t._result):Q(t,void 0,function(t){return R(e,t)},function(t){return M(e,t)})}function P(e,n,r){n.constructor===e.constructor&&r===j&&n.constructor.resolve===C?L(e,n):void 0===r?O(e,n):t(r)?D(e,n,r):O(e,n)}function R(t,n){if(t===n)M(t,F());else if(e(n)){var r=void 0;try{r=n.then}catch(s){return void M(t,s)}P(t,n,r)}else O(t,n)}function U(e){e._onerror&&e._onerror(e._result),H(e)}function O(e,t){e._state===S&&(e._result=t,e._state=_,0!==e._subscribers.length&&o(H,e))}function M(e,t){e._state===S&&(e._state=E,e._result=t,o(U,e))}function Q(e,t,n,r){var s=e._subscribers,a=s.length;e._onerror=null,s[a]=t,s[a+_]=n,s[a+E]=r,0===a&&e._state&&o(H,e)}function H(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,s=void 0,a=e._result,i=0;i<t.length;i+=3)r=t[i],s=t[i+n],r?z(n,r,s,a):s(a);e._subscribers.length=0}}function z(e,n,r,s){var a=t(r),i=void 0,o=void 0,l=!0;if(a){try{i=r(s)}catch(c){l=!1,o=c}if(n===i)return void M(n,T())}else i=s;n._state!==S||(a&&l?R(n,i):!1===l?M(n,o):e===_?O(n,i):e===E&&M(n,i))}function W(e,t){try{t(function(t){R(e,t)},function(t){M(e,t)})}catch(n){M(e,n)}}var V=0;function K(){return V++}function G(e){e[B]=V++,e._state=void 0,e._result=void 0,e._subscribers=[]}function q(){return new Error("Array Methods must be provided an Array")}var X=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(k),this.promise[B]||G(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&O(this.promise,this._result))):M(this.promise,q())}return e.prototype._enumerate=function(e){for(var t=0;this._state===S&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===C){var s=void 0,a=void 0,i=!1;try{s=e.then}catch(l){i=!0,a=l}if(s===j&&e._state!==S)this._settledAt(e._state,t,e._result);else if("function"!==typeof s)this._remaining--,this._result[t]=e;else if(n===te){var o=new n(k);i?M(o,a):P(o,e,s),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===S&&(this._remaining--,e===E?M(r,n):this._result[t]=n),0===this._remaining&&O(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;Q(e,void 0,function(e){return n._settledAt(_,t,e)},function(e){return n._settledAt(E,t,e)})},e}();function Y(e){return new X(this,e).promise}function J(e){var t=this;return r(e)?new t(function(n,r){for(var s=e.length,a=0;a<s;a++)t.resolve(e[a]).then(n,r)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})}function Z(e){var t=new this(k);return M(t,e),t}function $(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function e(t){this[B]=K(),this._result=this._state=void 0,this._subscribers=[],k!==t&&("function"!==typeof t&&$(),this instanceof e?W(this,t):ee())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var n=this,r=n.constructor;return t(e)?n.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):n.then(e,e)},e}();function ne(){var e=void 0;if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof self)e=self;else try{e=Function("return this")()}catch(s){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(s){}if("[object Promise]"===r&&!t.cast)return}e.Promise=te}return te.prototype.then=j,te.all=Y,te.race=J,te.resolve=C,te.reject=Z,te._setScheduler=l,te._setAsap=c,te._asap=o,te.polyfill=ne,te.Promise=te,te}()},html2canvas:function(e){"use strict";e.exports=t},jspdf:function(t){"use strict";t.exports=e}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return r[e].call(n.exports,n,n.exports,a),n.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return function(){"use strict";a.r(i);var e=a("./src/worker.js"),t=(a("./src/plugin/jspdf-plugin.js"),a("./src/plugin/pagebreaks.js"),a("./src/plugin/hyperlinks.js"),function e(t,n){var r=new e.Worker(n);return t?r.from(t).save():r});t.Worker=e.default,i.default=t}(),i=i.default}()},e.exports=r(n(5612),n(1052))},7318:()=>{},8082:()=>{},8345:(e,t,n)=>{"use strict";var r=n(9950),s=n(5340);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},f={};function p(e,t,n,r,s,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function v(e,t,n,r){var s=m.hasOwnProperty(t)?m[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!u.call(f,e)||!u.call(A,e)&&(h.test(e)?f[e]=!0:(A[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,x);m[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,x);m[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,x);m[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),k=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var P,R=Object.assign;function U(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var O=!1;function M(e,t){if(!e||O)return"";O=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),a=r.stack.split("\n"),i=s.length-1,o=a.length-1;1<=i&&0<=o&&s[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||s[i]!==a[o]){var l="\n"+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{O=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function Q(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=M(e.type,!1);case 11:return e=M(e.type.render,!1);case 1:return e=M(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case C:return"Profiler";case j:return"StrictMode";case _:return"Suspense";case E:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case B:return(e._context.displayName||"Context")+".Provider";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case F:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ae={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||Ae.hasOwnProperty(e)&&Ae[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(Ae).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ae[t]=Ae[e]})});var ge=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function ye(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,je=null;function Ce(e){if(e=vs(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=ys(t),we(e.stateNode,e.type,t))}}function Be(e){Ne?je?je.push(e):je=[e]:Ne=e}function ke(){if(Ne){var e=Ne,t=je;if(je=Ne=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Se(e,t){return e(t)}function _e(){}var Ee=!1;function Fe(e,t,n){if(Ee)return e(t,n);Ee=!0;try{return Se(e,t,n)}finally{Ee=!1,(null!==Ne||null!==je)&&(_e(),ke())}}function Te(e,t){var n=e.stateNode;if(null===n)return null;var r=ys(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ie=!1;if(d)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(de){Ie=!1}function Le(e,t,n,r,s,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Pe=!1,Re=null,Ue=!1,Oe=null,Me={onError:function(e){Pe=!0,Re=e}};function Qe(e,t,n,r,s,a,i,o,l){Pe=!1,Re=null,Le.apply(Me,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(a(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return We(s),e;if(i===r)return We(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=s.unstable_scheduleCallback,qe=s.unstable_cancelCallback,Xe=s.unstable_shouldYield,Ye=s.unstable_requestPaint,Je=s.unstable_now,Ze=s.unstable_getCurrentPriorityLevel,$e=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~s;0!==o?r=ut(o):0!==(a&=i)&&(r=ut(a))}else 0!==(i=n&~s)?r=ut(i):0!==a&&(r=ut(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(a=t&-t)||16===s&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-it(t)),r|=e[n],t&=~s;return r}function At(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var yt,wt,Nt,jt,Ct,Bt=!1,kt=[],St=null,_t=null,Et=null,Ft=new Map,Tt=new Map,It=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":Ft.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Pt(e,t,n,r,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=vs(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Rt(e){var t=xs(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Ct(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vs(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ot(e,t,n){Ut(e)&&n.delete(t)}function Mt(){Bt=!1,null!==St&&Ut(St)&&(St=null),null!==_t&&Ut(_t)&&(_t=null),null!==Et&&Ut(Et)&&(Et=null),Ft.forEach(Ot),Tt.forEach(Ot)}function Qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Bt||(Bt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Mt)))}function Ht(e){function t(t){return Qt(t,e)}if(0<kt.length){Qt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==St&&Qt(St,e),null!==_t&&Qt(_t,e),null!==Et&&Qt(Et,e),Ft.forEach(t),Tt.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Rt(n),null===n.blockedOn&&It.shift()}var zt=b.ReactCurrentBatchConfig,Wt=!0;function Vt(e,t,n,r){var s=vt,a=zt.transition;zt.transition=null;try{vt=1,Gt(e,t,n,r)}finally{vt=s,zt.transition=a}}function Kt(e,t,n,r){var s=vt,a=zt.transition;zt.transition=null;try{vt=4,Gt(e,t,n,r)}finally{vt=s,zt.transition=a}}function Gt(e,t,n,r){if(Wt){var s=Xt(e,t,n,r);if(null===s)Wr(e,t,r,qt,n),Lt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return St=Pt(St,e,t,n,r,s),!0;case"dragenter":return _t=Pt(_t,e,t,n,r,s),!0;case"mouseover":return Et=Pt(Et,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Ft.set(a,Pt(Ft.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Tt.set(a,Pt(Tt.get(a)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==s;){var a=vs(s);if(null!==a&&yt(a),null===(a=Xt(e,t,n,r))&&Wr(e,t,r,qt,n),a===s)break;s=a}null!==s&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var qt=null;function Xt(e,t,n,r){if(qt=null,null!==(e=xs(e=ye(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,s="value"in Jt?Jt.value:Jt.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[a-t];t++);return $t=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),un=R({},cn,{view:0,detail:0}),hn=sn(un),An=R({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=sn(An),pn=sn(R({},An,{dataTransfer:0})),mn=sn(R({},un,{relatedTarget:0})),gn=sn(R({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=R({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=sn(xn),bn=sn(R({},cn,{data:0})),yn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Cn(){return jn}var Bn=R({},un,{key:function(e){if(e.key){var t=yn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=sn(Bn),Sn=sn(R({},An,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=sn(R({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),En=sn(R({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Fn=R({},An,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=sn(Fn),In=[9,13,27,32],Dn=d&&"CompositionEvent"in window,Ln=null;d&&"documentMode"in document&&(Ln=document.documentMode);var Pn=d&&"TextEvent"in window&&!Ln,Rn=d&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),On=!1;function Mn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Vn(e,t,n,r){Be(r),0<(t=Kr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function qn(e){Ur(e,0)}function Xn(e){if(G(bs(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(d){var Zn;if(d){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Xn(Gn)){var t=[];Vn(t,Gn,e,ye(e)),Fe(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Gn)}function ar(e,t){if("click"===e)return Xn(t)}function ir(e,t){if("input"===e||"change"===e)return Xn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!u.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function Ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&Ar(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=void 0===r.end?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=dr(n,a);var i=dr(n,r);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=d&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,xr=null,vr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==mr||mr!==q(r)||("selectionStart"in(r=mr)&&Ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&lr(xr,r)||(xr=r,0<(r=Kr(gr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function yr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:yr("Animation","AnimationEnd"),animationiteration:yr("Animation","AnimationIteration"),animationstart:yr("Animation","AnimationStart"),transitionend:yr("Transition","TransitionEnd")},Nr={},jr={};function Cr(e){if(Nr[e])return Nr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in jr)return Nr[e]=n[t];return e}d&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Br=Cr("animationend"),kr=Cr("animationiteration"),Sr=Cr("animationstart"),_r=Cr("transitionend"),Er=new Map,Fr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){Er.set(e,t),l(t,[e])}for(var Ir=0;Ir<Fr.length;Ir++){var Dr=Fr[Ir];Tr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Tr(Br,"onAnimationEnd"),Tr(kr,"onAnimationIteration"),Tr(Sr,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(_r,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Rr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,i,o,l,c){if(Qe.apply(this,arguments),Pe){if(!Pe)throw Error(a(198));var d=Re;Pe=!1,Re=null,Ue||(Ue=!0,Oe=d)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;Rr(s,o,c),a=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;Rr(s,o,c),a=l}}}if(Ue)throw e=Oe,Ue=!1,Oe=null,e}function Or(e,t){var n=t[ps];void 0===n&&(n=t[ps]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Mr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Qr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Qr]){e[Qr]=!0,i.forEach(function(t){"selectionchange"!==t&&(Pr.has(t)||Mr(t,!1,e),Mr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Qr]||(t[Qr]=!0,Mr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Yt(t)){case 1:var s=Vt;break;case 4:s=Kt;break;default:s=Gt}n=s.bind(null,t,n,e),s=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,s){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;i=i.return}for(;null!==o;){if(null===(i=xs(o)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}o=o.parentNode}}r=r.return}Fe(function(){var r=a,s=ye(n),i=[];e:{var o=Er.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_n;break;case Br:case kr:case Sr:l=gn;break;case _r:l=En;break;case"scroll":l=hn;break;case"wheel":l=Tn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Sn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var A,f=r;null!==f;){var p=(A=f).stateNode;if(5===A.tag&&null!==p&&(A=p,null!==h&&(null!=(p=Te(f,h))&&d.push(Vr(f,p,A)))),u)break;f=f.return}0<d.length&&(o=new l(o,c,null,n,s),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!xs(c)&&!c[fs])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xs(c):null)&&(c!==(u=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=fn,p="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=Sn,p="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?o:bs(l),A=null==c?o:bs(c),(o=new d(p,f+"leave",l,n,s)).target=u,o.relatedTarget=A,p=null,xs(s)===r&&((d=new d(h,f+"enter",c,n,s)).target=A,d.relatedTarget=u,p=d),u=p,l&&c)e:{for(h=c,f=0,A=d=l;A;A=Gr(A))f++;for(A=0,p=h;p;p=Gr(p))A++;for(;0<f-A;)d=Gr(d),f--;for(;0<A-f;)h=Gr(h),A--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Gr(d),h=Gr(h)}d=null}else d=null;null!==l&&qr(i,o,l,d,!1),null!==c&&null!==u&&qr(i,u,c,d,!0)}if("select"===(l=(o=r?bs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Yn;else if(Wn(o))if(Jn)m=ir;else{m=sr;var g=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=ar);switch(m&&(m=m(e,r))?Vn(i,m,n,s):(g&&g(e,o,r),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=r?bs(r):window,e){case"focusin":(Wn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,xr=null);break;case"focusout":xr=gr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(i,n,s);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(i,n,s)}var x;if(Dn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Hn?Mn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Rn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Hn&&(x=en()):(Zt="value"in(Jt=s)?Jt.value:Jt.textContent,Hn=!0)),0<(g=Kr(r,v)).length&&(v=new bn(v,e,null,n,s),i.push({event:v,listeners:g}),x?v.data=x:null!==(x=Qn(n))&&(v.data=x))),(x=Pn?function(e,t){switch(e){case"compositionend":return Qn(t);case"keypress":return 32!==t.which?null:(On=!0,Un);case"textInput":return(e=t.data)===Un&&On?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Dn&&Mn(e,t)?(e=en(),$t=Zt=Jt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,n,s),i.push({event:s,listeners:r}),s.data=x))}Ur(i,t)})}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=Te(e,n))&&r.unshift(Vr(e,a,s)),null!=(a=Te(e,t))&&r.push(Vr(e,a,s))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,s){for(var a=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Te(n,a))&&i.unshift(Vr(n,l,o)):s||null!=(l=Te(n,a))&&i.push(Vr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function $r(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,as="function"===typeof Promise?Promise:void 0,is="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof as?function(e){return as.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Ht(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),hs="__reactFiber$"+us,As="__reactProps$"+us,fs="__reactContainer$"+us,ps="__reactEvents$"+us,ms="__reactListeners$"+us,gs="__reactHandles$"+us;function xs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fs]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ds(e);null!==e;){if(n=e[hs])return n;e=ds(e)}return t}n=(e=n).parentNode}return null}function vs(e){return!(e=e[hs]||e[fs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ys(e){return e[As]||null}var ws=[],Ns=-1;function js(e){return{current:e}}function Cs(e){0>Ns||(e.current=ws[Ns],ws[Ns]=null,Ns--)}function Bs(e,t){Ns++,ws[Ns]=e.current,e.current=t}var ks={},Ss=js(ks),_s=js(!1),Es=ks;function Fs(e,t){var n=e.type.contextTypes;if(!n)return ks;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in n)a[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ts(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Is(){Cs(_s),Cs(Ss)}function Ds(e,t,n){if(Ss.current!==ks)throw Error(a(168));Bs(Ss,t),Bs(_s,n)}function Ls(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(a(108,z(e)||"Unknown",s));return R({},n,r)}function Ps(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ks,Es=Ss.current,Bs(Ss,e),Bs(_s,_s.current),!0}function Rs(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ls(e,t,Es),r.__reactInternalMemoizedMergedChildContext=e,Cs(_s),Cs(Ss),Bs(Ss,e)):Cs(_s),Bs(_s,n)}var Us=null,Os=!1,Ms=!1;function Qs(e){null===Us?Us=[e]:Us.push(e)}function Hs(){if(!Ms&&null!==Us){Ms=!0;var e=0,t=vt;try{var n=Us;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Us=null,Os=!1}catch(s){throw null!==Us&&(Us=Us.slice(e+1)),Ge($e,Hs),s}finally{vt=t,Ms=!1}}return null}var zs=[],Ws=0,Vs=null,Ks=0,Gs=[],qs=0,Xs=null,Ys=1,Js="";function Zs(e,t){zs[Ws++]=Ks,zs[Ws++]=Vs,Vs=e,Ks=t}function $s(e,t,n){Gs[qs++]=Ys,Gs[qs++]=Js,Gs[qs++]=Xs,Xs=e;var r=Ys;e=Js;var s=32-it(r)-1;r&=~(1<<s),n+=1;var a=32-it(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Ys=1<<32-it(t)+s|n<<s|r,Js=a+e}else Ys=1<<a|n<<s|r,Js=e}function ea(e){null!==e.return&&(Zs(e,1),$s(e,1,0))}function ta(e){for(;e===Vs;)Vs=zs[--Ws],zs[Ws]=null,Ks=zs[--Ws],zs[Ws]=null;for(;e===Xs;)Xs=Gs[--qs],Gs[qs]=null,Js=Gs[--qs],Gs[qs]=null,Ys=Gs[--qs],Gs[qs]=null}var na=null,ra=null,sa=!1,aa=null;function ia(e,t){var n=Fc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xs?{id:Ys,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Fc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(sa){var t=ra;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=cs(n.nextSibling);var r=na;t&&oa(e,t)?ia(r,n):(e.flags=-4097&e.flags|2,sa=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,sa=!1,na=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ua(e){if(e!==na)return!1;if(!sa)return da(e),sa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)ia(e,t),t=cs(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?cs(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=cs(e.nextSibling)}function Aa(){ra=na=null,sa=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var pa=b.ReactCurrentBatchConfig;function ma(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var s=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=s.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xa(e){return(0,e._init)(e._payload)}function va(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Rc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===N?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===T&&xa(a)===t.type)?((r=s(t,n.props)).ref=ma(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=ma(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Rc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case y:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=ma(e,null,t),n.return=e,n;case w:return(t=Uc(t,e.mode,n)).return=e,t;case T:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;ga(e,t)}return null}function A(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case y:return n.key===s?c(e,t,n,r):null;case w:return n.key===s?d(e,t,n,r):null;case T:return A(e,t,(s=n._init)(n._payload),r)}if(te(n)||L(n))return null!==s?null:u(e,t,n,r,null);ga(e,n)}return null}function f(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case y:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case w:return d(t,e=e.get(null===r.key?n:r.key)||null,r,s);case T:return f(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||L(r))return u(t,e=e.get(n)||null,r,s,null);ga(t,r)}return null}function p(s,a,o,l){for(var c=null,d=null,u=a,p=a=0,m=null;null!==u&&p<o.length;p++){u.index>p?(m=u,u=null):m=u.sibling;var g=A(s,u,o[p],l);if(null===g){null===u&&(u=m);break}e&&u&&null===g.alternate&&t(s,u),a=i(g,a,p),null===d?c=g:d.sibling=g,d=g,u=m}if(p===o.length)return n(s,u),sa&&Zs(s,p),c;if(null===u){for(;p<o.length;p++)null!==(u=h(s,o[p],l))&&(a=i(u,a,p),null===d?c=u:d.sibling=u,d=u);return sa&&Zs(s,p),c}for(u=r(s,u);p<o.length;p++)null!==(m=f(u,s,p,o[p],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?p:m.key),a=i(m,a,p),null===d?c=m:d.sibling=m,d=m);return e&&u.forEach(function(e){return t(s,e)}),sa&&Zs(s,p),c}function m(s,o,l,c){var d=L(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,p=o,m=o=0,g=null,x=l.next();null!==p&&!x.done;m++,x=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=A(s,p,x.value,c);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(s,p),o=i(v,o,m),null===u?d=v:u.sibling=v,u=v,p=g}if(x.done)return n(s,p),sa&&Zs(s,m),d;if(null===p){for(;!x.done;m++,x=l.next())null!==(x=h(s,x.value,c))&&(o=i(x,o,m),null===u?d=x:u.sibling=x,u=x);return sa&&Zs(s,m),d}for(p=r(s,p);!x.done;m++,x=l.next())null!==(x=f(p,s,m,x.value,c))&&(e&&null!==x.alternate&&p.delete(null===x.key?m:x.key),o=i(x,o,m),null===u?d=x:u.sibling=x,u=x);return e&&p.forEach(function(e){return t(s,e)}),sa&&Zs(s,m),d}return function e(r,a,i,l){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case y:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===N){if(7===d.tag){n(r,d.sibling),(a=s(d,i.props.children)).return=r,r=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===T&&xa(c)===d.type){n(r,d.sibling),(a=s(d,i.props)).ref=ma(r,d,i),a.return=r,r=a;break e}n(r,d);break}t(r,d),d=d.sibling}i.type===N?((a=Lc(i.props.children,r.mode,l,i.key)).return=r,r=a):((l=Dc(i.type,i.key,i.props,null,r.mode,l)).ref=ma(r,a,i),l.return=r,r=l)}return o(r);case w:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=s(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(i,r.mode,l)).return=r,r=a}return o(r);case T:return e(r,a,(d=i._init)(i._payload),l)}if(te(i))return p(r,a,i,l);if(L(i))return m(r,a,i,l);ga(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=s(a,i)).return=r,r=a):(n(r,a),(a=Rc(i,r.mode,l)).return=r,r=a),o(r)):n(r,a)}}var ba=va(!0),ya=va(!1),wa=js(null),Na=null,ja=null,Ca=null;function Ba(){Ca=ja=Na=null}function ka(e){var t=wa.current;Cs(wa),e._currentValue=t}function Sa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _a(e,t){Na=e,Ca=ja=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vo=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(Ca!==e)if(e={context:e,memoizedValue:t,next:null},null===ja){if(null===Na)throw Error(a(308));ja=e,Na.dependencies={lanes:0,firstContext:e}}else ja=ja.next=e;return t}var Fa=null;function Ta(e){null===Fa?Fa=[e]:Fa.push(e)}function Ia(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Ta(t)):(n.next=s.next,s.next=n),t.interleaved=n,Da(e,r)}function Da(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var La=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ua(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Sl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Da(e,n)}return null===(s=r.interleaved)?(t.next=t,Ta(r)):(t.next=s.next,s.next=t),r.interleaved=t,Da(e,n)}function Ma(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}function Qa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?s=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ha(e,t,n,r){var s=e.updateQueue;La=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=s.baseState;for(i=0,d=c=l=null,o=a;;){var h=o.lane,A=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:A,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,p=o;switch(h=t,A=n,p.tag){case 1:if("function"===typeof(f=p.payload)){u=f.call(A,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=p.payload)?f.call(A,u,h):f)||void 0===h)break e;u=R({},u,h);break e;case 2:La=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else A={eventTime:A,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=A,l=u):d=d.next=A,i|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);Pl|=i,e.lanes=i,e.memoizedState=u}}function za(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(a(191,s));s.call(r)}}}var Wa={},Va=js(Wa),Ka=js(Wa),Ga=js(Wa);function qa(e){if(e===Wa)throw Error(a(174));return e}function Xa(e,t){switch(Bs(Ga,t),Bs(Ka,e),Bs(Va,Wa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cs(Va),Bs(Va,t)}function Ya(){Cs(Va),Cs(Ka),Cs(Ga)}function Ja(e){qa(Ga.current);var t=qa(Va.current),n=le(t,e.type);t!==n&&(Bs(Ka,e),Bs(Va,n))}function Za(e){Ka.current===e&&(Cs(Va),Cs(Ka))}var $a=js(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=b.ReactCurrentDispatcher,si=b.ReactCurrentBatchConfig,ai=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function Ai(){throw Error(a(321))}function fi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function pi(e,t,n,r,s,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Zi:$i,e=n(r,s),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(a(301));i+=1,li=oi=null,t.updateQueue=null,ri.current=eo,e=n(r,s)}while(di)}if(ri.current=Ji,t=null!==oi&&null!==oi.next,ai=0,li=oi=ii=null,ci=!1,t)throw Error(a(300));return e}function mi(){var e=0!==ui;return ui=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function xi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function vi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=xi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=oi,s=r.baseQueue,i=n.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(null!==s){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ai&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ii.lanes|=u,Pl|=u}d=d.next}while(null!==d&&d!==i);null===c?o=r:c.next=l,or(r,t.memoizedState)||(vo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{i=s.lane,ii.lanes|=i,Pl|=i,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function yi(e){var t=xi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);or(i,t.memoizedState)||(vo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function wi(){}function Ni(e,t){var n=ii,r=xi(),s=t(),i=!or(r.memoizedState,s);if(i&&(r.memoizedState=s,vo=!0),r=r.queue,Li(Bi.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Ei(9,Ci.bind(null,n,r,s,t),void 0,null),null===_l)throw Error(a(349));0!==(30&ai)||ji(n,t,s)}return s}function ji(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ci(e,t,n,r){t.value=n,t.getSnapshot=r,ki(t)&&Si(e)}function Bi(e,t,n){return n(function(){ki(t)&&Si(e)})}function ki(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Si(e){var t=Da(e,1);null!==t&&nc(t,e,1,-1)}function _i(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[t.memoizedState,e]}function Ei(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fi(){return xi().memoizedState}function Ti(e,t,n,r){var s=gi();ii.flags|=e,s.memoizedState=Ei(1|t,n,void 0,void 0===r?null:r)}function Ii(e,t,n,r){var s=xi();r=void 0===r?null:r;var a=void 0;if(null!==oi){var i=oi.memoizedState;if(a=i.destroy,null!==r&&fi(r,i.deps))return void(s.memoizedState=Ei(t,n,a,r))}ii.flags|=e,s.memoizedState=Ei(1|t,n,a,r)}function Di(e,t){return Ti(8390656,8,e,t)}function Li(e,t){return Ii(2048,8,e,t)}function Pi(e,t){return Ii(4,2,e,t)}function Ri(e,t){return Ii(4,4,e,t)}function Ui(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Oi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ii(4,4,Ui.bind(null,t,e),n)}function Mi(){}function Qi(e,t){var n=xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hi(e,t){var n=xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zi(e,t,n){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=n):(or(n,t)||(n=pt(),ii.lanes|=n,Pl|=n,e.baseState=!0),t)}function Wi(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=si.transition;si.transition={};try{e(!1),t()}finally{vt=n,si.transition=r}}function Vi(){return xi().memoizedState}function Ki(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qi(e))Xi(t,n);else if(null!==(n=Ia(e,t,n,r))){nc(n,e,r,ec()),Yi(n,t,r)}}function Gi(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qi(e))Xi(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,i)){var l=t.interleaved;return null===l?(s.next=s,Ta(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Ia(e,t,s,r))&&(nc(n,e,r,s=ec()),Yi(n,t,r))}}function qi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Xi(e,t){di=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}var Ji={readContext:Ea,useCallback:Ai,useContext:Ai,useEffect:Ai,useImperativeHandle:Ai,useInsertionEffect:Ai,useLayoutEffect:Ai,useMemo:Ai,useReducer:Ai,useRef:Ai,useState:Ai,useDebugValue:Ai,useDeferredValue:Ai,useTransition:Ai,useMutableSource:Ai,useSyncExternalStore:Ai,useId:Ai,unstable_isNewReconciler:!1},Zi={readContext:Ea,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:Di,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ti(4194308,4,Ui.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ti(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ti(4,2,e,t)},useMemo:function(e,t){var n=gi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:_i,useDebugValue:Mi,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=_i(!1),t=e[0];return e=Wi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ii,s=gi();if(sa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===_l)throw Error(a(349));0!==(30&ai)||ji(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Di(Bi.bind(null,r,i,e),[e]),r.flags|=2048,Ei(9,Ci.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=gi(),t=_l.identifierPrefix;if(sa){var n=Js;t=":"+t+"R"+(n=(Ys&~(1<<32-it(Ys)-1)).toString(32)+n),0<(n=ui++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$i={readContext:Ea,useCallback:Qi,useContext:Ea,useEffect:Li,useImperativeHandle:Oi,useInsertionEffect:Pi,useLayoutEffect:Ri,useMemo:Hi,useReducer:bi,useRef:Fi,useState:function(){return bi(vi)},useDebugValue:Mi,useDeferredValue:function(e){return zi(xi(),oi.memoizedState,e)},useTransition:function(){return[bi(vi)[0],xi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Vi,unstable_isNewReconciler:!1},eo={readContext:Ea,useCallback:Qi,useContext:Ea,useEffect:Li,useImperativeHandle:Oi,useInsertionEffect:Pi,useLayoutEffect:Ri,useMemo:Hi,useReducer:yi,useRef:Fi,useState:function(){return yi(vi)},useDebugValue:Mi,useDeferredValue:function(e){var t=xi();return null===oi?t.memoizedState=e:zi(t,oi.memoizedState,e)},useTransition:function(){return[yi(vi)[0],xi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Vi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=R({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:R({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),a=Ua(r,s);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,s))&&(nc(t,e,s,r),Ma(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),a=Ua(r,s);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,s))&&(nc(t,e,s,r),Ma(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=Ua(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Oa(e,s,r))&&(nc(t,e,r,n),Ma(t,e,r))}};function so(e,t,n,r,s,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,a))}function ao(e,t,n){var r=!1,s=ks,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(s=Ts(t)?Es:Ss.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Fs(e,s):ks),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function io(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?s.context=Ea(a):(a=Ts(t)?Es:Ss.current,s.context=Fs(e,a)),s.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(no(e,t,a,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),Ha(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=Q(r),r=r.return}while(r);var s=n}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function Ao(e,t,n){(n=Ua(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Vl=r),uo(0,t)},n}function fo(e,t,n){(n=Ua(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ua(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var xo=b.ReactCurrentOwner,vo=!1;function bo(e,t,n,r){t.child=null===e?ya(t,null,n,r):ba(t,e.child,n,r)}function yo(e,t,n,r,s){n=n.render;var a=t.ref;return _a(t,s),r=pi(e,t,n,r,a,s),n=mi(),null===e||vo?(sa&&n&&ea(t),t.flags|=1,bo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function wo(e,t,n,r,s){if(null===e){var a=n.type;return"function"!==typeof a||Tc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,No(e,t,a,r,s))}if(a=e.child,0===(e.lanes&s)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Wo(e,t,s)}return t.flags|=1,(e=Ic(a,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,s){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(vo=!1,t.pendingProps=r=a,0===(e.lanes&s))return t.lanes=e.lanes,Wo(e,t,s);0!==(131072&e.flags)&&(vo=!0)}}return Bo(e,t,n,r,s)}function jo(e,t,n){var r=t.pendingProps,s=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bs(Il,Tl),Tl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Bs(Il,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Bs(Il,Tl),Tl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Bs(Il,Tl),Tl|=r;return bo(e,t,s,n),t.child}function Co(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Bo(e,t,n,r,s){var a=Ts(n)?Es:Ss.current;return a=Fs(t,a),_a(t,s),n=pi(e,t,n,r,a,s),r=mi(),null===e||vo?(sa&&r&&ea(t),t.flags|=1,bo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function ko(e,t,n,r,s){if(Ts(n)){var a=!0;Ps(t)}else a=!1;if(_a(t,s),null===t.stateNode)zo(e,t),ao(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Fs(t,c=Ts(n)?Es:Ss.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&io(t,i,r,c),La=!1;var h=t.memoizedState;i.state=h,Ha(t,r,i,s),l=t.memoizedState,o!==r||h!==l||_s.current||La?("function"===typeof d&&(no(t,n,d,r),l=t.memoizedState),(o=La||so(t,n,o,r,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ra(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ea(l):l=Fs(t,l=Ts(n)?Es:Ss.current);var A=n.getDerivedStateFromProps;(d="function"===typeof A||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,r,l),La=!1,h=t.memoizedState,i.state=h,Ha(t,r,i,s);var f=t.memoizedState;o!==u||h!==f||_s.current||La?("function"===typeof A&&(no(t,n,A,r),f=t.memoizedState),(c=La||so(t,n,c,r,h,f,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return So(e,t,n,r,a,s)}function So(e,t,n,r,s,a){Co(e,t);var i=0!==(128&t.flags);if(!r&&!i)return s&&Rs(t,n,!1),Wo(e,t,a);r=t.stateNode,xo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,o,a)):bo(e,t,o,a),t.memoizedState=r.state,s&&Rs(t,n,!0),t.child}function _o(e){var t=e.stateNode;t.pendingContext?Ds(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ds(0,t.context,!1),Xa(e,t.containerInfo)}function Eo(e,t,n,r,s){return Aa(),fa(s),t.flags|=256,bo(e,t,n,r),t.child}var Fo,To,Io,Do,Lo={dehydrated:null,treeContext:null,retryLane:0};function Po(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ro(e,t,n){var r,s=t.pendingProps,i=$a.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Bs($a,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Pc(l,s,0,null),e=Lc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Po(n),t.memoizedState=Lo,e):Uo(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,s,i,o){if(n)return 256&t.flags?(t.flags&=-257,Oo(e,t,o,r=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Pc({mode:"visible",children:r.children},s,0,null),(i=Lc(i,s,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&ba(t,e.child,null,o),t.child.memoizedState=Po(o),t.memoizedState=Lo,i);if(0===(1&t.mode))return Oo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Oo(e,t,o,r=co(i=Error(a(419)),r,void 0))}if(l=0!==(o&e.childLanes),vo||l){if(null!==(r=_l)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==i.retryLane&&(i.retryLane=s,Da(e,s),nc(r,e,s,-1))}return pc(),Oo(e,t,o,r=co(Error(a(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=kc.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ra=cs(s.nextSibling),na=t,sa=!0,aa=null,null!==e&&(Gs[qs++]=Ys,Gs[qs++]=Js,Gs[qs++]=Xs,Ys=e.id,Js=e.overflow,Xs=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,i,n);if(o){o=s.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==i?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Ic(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Ic(r,o):(o=Lc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Po(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,s}return e=(o=e.child).sibling,s=Ic(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Uo(e,t){return(t=Pc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Oo(e,t,n,r){return null!==r&&fa(r),ba(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Sa(e.return,t,n)}function Qo(e,t,n,r,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Ho(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=$a.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mo(e,n,t);else if(19===e.tag)Mo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Bs($a,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Qo(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ei(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Qo(t,!0,n,null,a);break;case"together":Qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Pl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Ts(t.type)&&Is(),Ko(t),null;case 3:return r=t.stateNode,Ya(),Cs(_s),Cs(Ss),ni(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),To(e,t),Ko(t),null;case 5:Za(t);var s=qa(Ga.current);if(n=t.type,null!==e&&null!=t.stateNode)Io(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ko(t),null}if(e=qa(Va.current),ua(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[hs]=t,r[As]=i,e=0!==(1&t.mode),n){case"dialog":Or("cancel",r),Or("close",r);break;case"iframe":case"object":case"embed":Or("load",r);break;case"video":case"audio":for(s=0;s<Lr.length;s++)Or(Lr[s],r);break;case"source":Or("error",r);break;case"img":case"image":case"link":Or("error",r),Or("load",r);break;case"details":Or("toggle",r);break;case"input":Y(r,i),Or("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Or("invalid",r);break;case"textarea":se(r,i),Or("invalid",r)}for(var l in xe(n,i),s=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Or("scroll",r)}switch(n){case"input":K(r),$(r,i,!0);break;case"textarea":K(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=$r)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[As]=r,Fo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Or("cancel",e),Or("close",e),s=r;break;case"iframe":case"object":case"embed":Or("load",e),s=r;break;case"video":case"audio":for(s=0;s<Lr.length;s++)Or(Lr[s],e);s=r;break;case"source":Or("error",e),s=r;break;case"img":case"image":case"link":Or("error",e),Or("load",e),s=r;break;case"details":Or("toggle",e),s=r;break;case"input":Y(e,r),s=X(e,r),Or("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=R({},r,{value:void 0}),Or("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Or("invalid",e)}for(i in xe(n,s),c=s)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?me(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Or("scroll",e):null!=d&&v(e,i,d,l))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=qa(Ga.current),qa(Va.current),ua(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(i=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Ko(t),null;case 13:if(Cs($a),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sa&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),Aa(),t.flags|=98560,i=!1;else if(i=ua(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[hs]=t}else Aa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$a.current)?0===Dl&&(Dl=3):pc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Ya(),To(e,t),null===e&&Hr(t.stateNode.containerInfo),Ko(t),null;case 10:return ka(t.type._context),Ko(t),null;case 19:if(Cs($a),null===(i=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Vo(i,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Vo(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Bs($a,1&$a.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Hl&&(t.flags|=128,r=!0,Vo(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!sa)return Ko(t),null}else 2*Je()-i.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Vo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=$a.current,Bs($a,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function qo(e,t){switch(ta(t),t.tag){case 1:return Ts(t.type)&&Is(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ya(),Cs(_s),Cs(Ss),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(Cs($a),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Aa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cs($a),null;case 4:return Ya(),null;case 10:return ka(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Fo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},To=function(){},Io=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,qa(Va.current);var a,i=null;switch(n){case"input":s=X(e,s),r=X(e,r),i=[];break;case"select":s=R({},s,{value:void 0}),r=R({},r,{value:void 0}),i=[];break;case"textarea":s=re(e,s),r=re(e,r),i=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(d in xe(n,r),n=null,s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=s?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Or("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xo=!1,Yo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){jc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){jc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&el(t,n,a)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[As],delete t[ps],delete t[ms],delete t[gs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Yo||$o(n,t);case 6:var r=dl,s=ul;dl=null,hl(e,t,n),ul=s,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Ht(e)):ls(dl,n.stateNode));break;case 4:r=dl,s=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=s;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(n,t,i),s=s.next}while(s!==r)}hl(e,t,n);break;case 1:if(!Yo&&($o(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){jc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,hl(e,t,n),Yo=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var r=Sc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));Al(i,o,s),dl=null,ul=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){jc(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),gl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){jc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){jc(e,e.return,m)}}break;case 1:pl(t,e),gl(e),512&r&&null!==n&&$o(n,n.return);break;case 5:if(pl(t,e),gl(e),512&r&&null!==n&&$o(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(m){jc(e,e.return,m)}}if(4&r&&null!=(s=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&J(s,i),ve(l,o);var d=ve(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?me(s,h):"dangerouslySetInnerHTML"===u?ue(s,h):"children"===u?he(s,h):v(s,u,h,d)}switch(l){case"input":Z(s,i);break;case"textarea":ae(s,i);break;case"select":var A=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?ne(s,!!i.multiple,f,!1):A!==!!i.multiple&&(null!=i.defaultValue?ne(s,!!i.multiple,i.defaultValue,!0):ne(s,!!i.multiple,i.multiple?[]:"",!1))}s[As]=i}catch(m){jc(e,e.return,m)}}break;case 6:if(pl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(a(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(m){jc(e,e.return,m)}}break;case 3:if(pl(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(m){jc(e,e.return,m)}break;case 4:default:pl(t,e),gl(e);break;case 13:pl(t,e),gl(e),8192&(s=e.child).flags&&(i=null!==s.memoizedState,s.stateNode.isHidden=i,!i||null!==s.alternate&&null!==s.alternate.memoizedState||(Ql=Je())),4&r&&fl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(d=Yo)||u,pl(t,e),Yo=d):pl(t,e),gl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Zo=e,u=e.child;null!==u;){for(h=Zo=u;null!==Zo;){switch(f=(A=Zo).child,A.tag){case 0:case 11:case 14:case 15:nl(4,A,A.return);break;case 1:$o(A,A.return);var p=A.stateNode;if("function"===typeof p.componentWillUnmount){r=A,n=A.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){jc(r,n,m)}}break;case 5:$o(A,A.return);break;case 22:if(null!==A.memoizedState){yl(h);continue}}null!==f?(f.return=A,Zo=f):yl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{s=h.stateNode,d?"function"===typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(m){jc(e,e.return,m)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(m){jc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),gl(e),4&r&&fl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(a(161))}}catch(o){jc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Zo=e,vl(e,t,n)}function vl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var s=Zo,a=s.child;if(22===s.tag&&r){var i=null!==s.memoizedState||Xo;if(!i){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Xo;var c=Yo;if(Xo=i,(Yo=l)&&!c)for(Zo=s;null!==Zo;)l=(i=Zo).child,22===i.tag&&null!==i.memoizedState?wl(s):null!==l?(l.return=i,Zo=l):wl(s);for(;null!==a;)Zo=a,vl(a,t,n),a=a.sibling;Zo=s,Xo=o,Yo=c}bl(e)}else 0!==(8772&s.subtreeFlags)&&null!==a?(a.return=s,Zo=a):bl(e)}}function bl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&za(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}za(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(a(163))}Yo||512&t.flags&&sl(t)}catch(A){jc(t,t.return,A)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function yl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function wl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){jc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){jc(t,s,l)}}var a=t.return;try{sl(t)}catch(l){jc(t,a,l)}break;case 5:var i=t.return;try{sl(t)}catch(l){jc(t,i,l)}}}catch(l){jc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Nl,jl=Math.ceil,Cl=b.ReactCurrentDispatcher,Bl=b.ReactCurrentOwner,kl=b.ReactCurrentBatchConfig,Sl=0,_l=null,El=null,Fl=0,Tl=0,Il=js(0),Dl=0,Ll=null,Pl=0,Rl=0,Ul=0,Ol=null,Ml=null,Ql=0,Hl=1/0,zl=null,Wl=!1,Vl=null,Kl=null,Gl=!1,ql=null,Xl=0,Yl=0,Jl=null,Zl=-1,$l=0;function ec(){return 0!==(6&Sl)?Je():-1!==Zl?Zl:Zl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Sl)&&0!==Fl?Fl&-Fl:null!==pa.transition?(0===$l&&($l=pt()),$l):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(a(185));gt(e,n,r),0!==(2&Sl)&&e===_l||(e===_l&&(0===(2&Sl)&&(Rl|=n),4===Dl&&oc(e,Fl)),rc(e,r),1===n&&0===Sl&&0===(1&t.mode)&&(Hl=Je()+500,Os&&Hs()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),o=1<<i,l=s[i];-1===l?0!==(o&n)&&0===(o&r)||(s[i]=At(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ht(e,e===_l?Fl:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Os=!0,Qs(e)}(lc.bind(null,e)):Qs(lc.bind(null,e)),is(function(){0===(6&Sl)&&Hs()}),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=_c(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,$l=0,0!==(6&Sl))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===_l?Fl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var s=Sl;Sl|=2;var i=fc();for(_l===e&&Fl===t||(zl=null,Hl=Je()+500,hc(e,t));;)try{xc();break}catch(l){Ac(e,l)}Ba(),Cl.current=i,Sl=s,null!==El?t=0:(_l=null,Fl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(s=ft(e))&&(r=s,t=ac(e,s))),1===t)throw n=Ll,hc(e,0),oc(e,r),rc(e,Je()),n;if(6===t)oc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!or(a(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=mc(e,r))&&(0!==(i=ft(e))&&(r=i,t=ac(e,i))),1===t))throw n=Ll,hc(e,0),oc(e,r),rc(e,Je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:yc(e,Ml,zl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Ql+500-Je())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(yc.bind(null,e,Ml,zl),t);break}yc(e,Ml,zl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>s&&(s=o),r&=~i}if(r=s,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jl(r/1960))-r)){e.timeoutHandle=rs(yc.bind(null,e,Ml,zl),r);break}yc(e,Ml,zl);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function ac(e,t){var n=Ol;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Ml,Ml=n,null!==t&&ic(t)),e}function ic(e){null===Ml?Ml=e:Ml.push.apply(Ml,e)}function oc(e,t){for(t&=~Ul,t&=~Rl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Sl))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ll,hc(e,0),oc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yc(e,Ml,zl),rc(e,Je()),null}function cc(e,t){var n=Sl;Sl|=1;try{return e(t)}finally{0===(Sl=n)&&(Hl=Je()+500,Os&&Hs())}}function dc(e){null!==ql&&0===ql.tag&&0===(6&Sl)&&wc();var t=Sl;Sl|=1;var n=kl.transition,r=vt;try{if(kl.transition=null,vt=1,e)return e()}finally{vt=r,kl.transition=n,0===(6&(Sl=t))&&Hs()}}function uc(){Tl=Il.current,Cs(Il)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==El)for(n=El.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Is();break;case 3:Ya(),Cs(_s),Cs(Ss),ni();break;case 5:Za(r);break;case 4:Ya();break;case 13:case 19:Cs($a);break;case 10:ka(r.type._context);break;case 22:case 23:uc()}n=n.return}if(_l=e,El=e=Ic(e.current,null),Fl=Tl=t,Dl=0,Ll=null,Ul=Rl=Pl=0,Ml=Ol=null,null!==Fa){for(t=0;t<Fa.length;t++)if(null!==(r=(n=Fa[t]).interleaved)){n.interleaved=null;var s=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=s,r.next=i}n.pending=r}Fa=null}return e}function Ac(e,t){for(;;){var n=El;try{if(Ba(),ri.current=Ji,ci){for(var r=ii.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ci=!1}if(ai=0,li=oi=ii=null,di=!1,ui=0,Bl.current=null,null===n||null===n.return){Dl=1,Ll=t,El=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Fl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var A=u.alternate;A?(u.updateQueue=A.updateQueue,u.memoizedState=A.memoizedState,u.lanes=A.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=mo(o);if(null!==f){f.flags&=-257,go(f,o,l,0,t),1&f.mode&&po(i,d,t),c=d;var p=(t=f).updateQueue;if(null===p){var m=new Set;m.add(c),t.updateQueue=m}else p.add(c);break e}if(0===(1&t)){po(i,d,t),pc();break e}c=Error(a(426))}else if(sa&&1&l.mode){var g=mo(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),go(g,o,l,0,t),fa(lo(c,l));break e}}i=c=lo(c,l),4!==Dl&&(Dl=2),null===Ol?Ol=[i]:Ol.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Qa(i,Ao(0,c,t));break e;case 1:l=c;var x=i.type,v=i.stateNode;if(0===(128&i.flags)&&("function"===typeof x.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Kl||!Kl.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,Qa(i,fo(i,l,t));break e}}i=i.return}while(null!==i)}bc(n)}catch(b){t=b,El===n&&null!==n&&(El=n=n.return);continue}break}}function fc(){var e=Cl.current;return Cl.current=Ji,null===e?Ji:e}function pc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===_l||0===(268435455&Pl)&&0===(268435455&Rl)||oc(_l,Fl)}function mc(e,t){var n=Sl;Sl|=2;var r=fc();for(_l===e&&Fl===t||(zl=null,hc(e,t));;)try{gc();break}catch(s){Ac(e,s)}if(Ba(),Sl=n,Cl.current=r,null!==El)throw Error(a(261));return _l=null,Fl=0,Dl}function gc(){for(;null!==El;)vc(El)}function xc(){for(;null!==El&&!Xe();)vc(El)}function vc(e){var t=Nl(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?bc(e):El=t,Bl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Tl)))return void(El=n)}else{if(null!==(n=qo(n,t)))return n.flags&=32767,void(El=n);if(null===e)return Dl=6,void(El=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(El=t);El=t=e}while(null!==t);0===Dl&&(Dl=5)}function yc(e,t,n){var r=vt,s=kl.transition;try{kl.transition=null,vt=1,function(e,t,n,r){do{wc()}while(null!==ql);if(0!==(6&Sl))throw Error(a(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-it(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}(e,i),e===_l&&(El=_l=null,Fl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,_c(tt,function(){return wc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=kl.transition,kl.transition=null;var o=vt;vt=1;var l=Sl;Sl|=4,Bl.current=null,function(e,t){if(es=Wt,Ar(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(y){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,A=null;t:for(;;){for(var f;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)A=h,h=f;for(;;){if(h===e)break t;if(A===n&&++d===s&&(l=o),A===i&&++u===r&&(c=o),null!==(f=h.nextSibling))break;A=(h=A).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Wt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,g=p.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),g);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(y){jc(t,t.return,y)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}p=tl,tl=!1}(e,n),ml(n,e),fr(ts),Wt=!!es,ts=es=null,e.current=n,xl(n,e,s),Ye(),Sl=l,vt=o,kl.transition=i}else e.current=n;if(Gl&&(Gl=!1,ql=e,Xl=s),i=e.pendingLanes,0===i&&(Kl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,e=Vl,Vl=null,e;0!==(1&Xl)&&0!==e.tag&&wc(),i=e.pendingLanes,0!==(1&i)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,Hs()}(e,t,n,r)}finally{kl.transition=s,vt=r}return null}function wc(){if(null!==ql){var e=bt(Xl),t=kl.transition,n=vt;try{if(kl.transition=null,vt=16>e?16:e,null===ql)var r=!1;else{if(e=ql,ql=null,Xl=0,0!==(6&Sl))throw Error(a(331));var s=Sl;for(Sl|=4,Zo=e.current;null!==Zo;){var i=Zo,o=i.child;if(0!==(16&Zo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Zo=d;null!==Zo;){var u=Zo;switch(u.tag){case 0:case 11:case 15:nl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Zo=h;else for(;null!==Zo;){var A=(u=Zo).sibling,f=u.return;if(al(u),u===d){Zo=null;break}if(null!==A){A.return=f,Zo=A;break}Zo=f}}}var p=i.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Zo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(i=Zo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var x=i.sibling;if(null!==x){x.return=i.return,Zo=x;break e}Zo=i.return}}var v=e.current;for(Zo=v;null!==Zo;){var b=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Zo=b;else e:for(o=v;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){jc(l,l.return,w)}if(l===o){Zo=null;break e}var y=l.sibling;if(null!==y){y.return=l.return,Zo=y;break e}Zo=l.return}}if(Sl=s,Hs(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(st,e)}catch(w){}r=!0}return r}finally{vt=n,kl.transition=t}}return!1}function Nc(e,t,n){e=Oa(e,t=Ao(0,t=lo(n,t),1),1),t=ec(),null!==e&&(gt(e,1,t),rc(e,t))}function jc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Oa(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,_l===e&&(Fl&n)===n&&(4===Dl||3===Dl&&(130023424&Fl)===Fl&&500>Je()-Ql?hc(e,0):Ul|=n),rc(e,t)}function Bc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Da(e,t))&&(gt(e,t,n),rc(e,n))}function kc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Bc(e,n)}function Sc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Bc(e,n)}function _c(e,t){return Ge(e,t)}function Ec(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fc(e,t,n,r){return new Ec(e,t,n,r)}function Tc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Fc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,s,i){var o=2;if(r=e,"function"===typeof e)Tc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Lc(n.children,s,i,t);case j:o=8,s|=8;break;case C:return(e=Fc(12,n,t,2|s)).elementType=C,e.lanes=i,e;case _:return(e=Fc(13,n,t,s)).elementType=_,e.lanes=i,e;case E:return(e=Fc(19,n,t,s)).elementType=E,e.lanes=i,e;case I:return Pc(n,s,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case B:o=10;break e;case k:o=9;break e;case S:o=11;break e;case F:o=14;break e;case T:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Fc(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function Lc(e,t,n,r){return(e=Fc(7,e,r,t)).lanes=n,e}function Pc(e,t,n,r){return(e=Fc(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Rc(e,t,n){return(e=Fc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Fc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Oc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mc(e,t,n,r,s,a,i,o,l){return e=new Oc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Fc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Qc(e){if(!e)return ks;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ts(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ts(n))return Ls(e,n,t)}return t}function Hc(e,t,n,r,s,a,i,o,l){return(e=Mc(n,r,!0,e,0,a,0,o,l)).context=Qc(null),n=e.current,(a=Ua(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,s),e.current.lanes=s,gt(e,s,r),rc(e,r),e}function zc(e,t,n,r){var s=t.current,a=ec(),i=tc(s);return n=Qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ua(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(s,t,i))&&(nc(e,s,i,a),Ma(e,s,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_s.current)vo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vo=!1,function(e,t,n){switch(t.tag){case 3:_o(t),Aa();break;case 5:Ja(t);break;case 1:Ts(t.type)&&Ps(t);break;case 4:Xa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Bs(wa,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Bs($a,1&$a.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ro(e,t,n):(Bs($a,1&$a.current),null!==(e=Wo(e,t,n))?e.sibling:null);Bs($a,1&$a.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ho(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Bs($a,$a.current),r)break;return null;case 22:case 23:return t.lanes=0,jo(e,t,n)}return Wo(e,t,n)}(e,t,n);vo=0!==(131072&e.flags)}else vo=!1,sa&&0!==(1048576&t.flags)&&$s(t,Ks,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zo(e,t),e=t.pendingProps;var s=Fs(t,Ss.current);_a(t,n),s=pi(null,t,r,e,s,n);var i=mi();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ts(r)?(i=!0,Ps(t)):i=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Pa(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=So(null,t,r,!0,i,n)):(t.tag=0,sa&&i&&ea(t),bo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Tc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===S)return 11;if(e===F)return 14}return 2}(r),e=to(r,e),s){case 0:t=Bo(null,t,r,e,n);break e;case 1:t=ko(null,t,r,e,n);break e;case 11:t=yo(null,t,r,e,n);break e;case 14:t=wo(null,t,r,to(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Bo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,ko(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(_o(t),null===e)throw Error(a(387));r=t.pendingProps,s=(i=t.memoizedState).element,Ra(e,t),Ha(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Eo(e,t,r,n,s=lo(Error(a(423)),t));break e}if(r!==s){t=Eo(e,t,r,n,s=lo(Error(a(424)),t));break e}for(ra=cs(t.stateNode.containerInfo.firstChild),na=t,sa=!0,aa=null,n=ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Aa(),r===s){t=Wo(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Ja(t),null===e&&ca(t),r=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==i&&ns(r,i)&&(t.flags|=32),Co(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Ro(e,t,n);case 4:return Xa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ba(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,yo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Bs(wa,r._currentValue),r._currentValue=o,null!==i)if(or(i.value,o)){if(i.children===s.children&&!_s.current){t=Wo(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Ua(-1,n&-n)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Sa(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Sa(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,_a(t,n),r=r(s=Ea(s)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),wo(e,t,r,s=to(r.type,s),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),zo(e,t),t.tag=1,Ts(r)?(e=!0,Ps(t)):e=!1,_a(t,n),ao(t,r,s),oo(t,r,s,n),So(null,t,r,!0,e,n);case 19:return Ho(e,t,n);case 22:return jo(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function qc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function $c(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof s){var o=s;s=function(){var e=Wc(i);o.call(e)}}zc(t,i,e,s)}else i=function(e,t,n,r,s){if(s){if("function"===typeof r){var a=r;r=function(){var e=Wc(i);a.call(e)}}var i=Hc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=i,e[fs]=i.current,Hr(8===e.nodeType?e.parentNode:e),dc(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=Mc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fs]=l.current,Hr(8===e.nodeType?e.parentNode:e),dc(function(){zc(t,l,n,r)}),l}(n,t,e,s,r);return Wc(i)}Xc.prototype.render=qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zc(e,t,null,null)},Xc.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){zc(null,e,null,null)}),t[fs]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=jt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Rt(e)}},yt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(xt(t,1|n),rc(t,Je()),0===(6&Sl)&&(Hl=Je()+500,Hs()))}break;case 13:dc(function(){var t=Da(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},wt=function(e){if(13===e.tag){var t=Da(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),n=Da(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},jt=function(){return vt},Ct=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},we=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ys(r);if(!s)throw Error(a(90));G(r),Z(r,s)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Se=cc,_e=dc;var ed={usingClientEntryPoint:!1,Events:[vs,bs,ys,Be,ke,cc]},td={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{st=rd.inject(nd),at=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",s=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Mc(e,1,!1,null,0,n,0,r,s),e[fs]=t.current,Hr(8===e.nodeType?e.parentNode:e),new qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,s=!1,i="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,s,0,i,o),e[fs]=t.current,Hr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[fs]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},9379:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(4980);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},9950:(e,t,n)=>{"use strict";e.exports=n(2049)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,n.d(a,i),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{82:"8aa65602",239:"6b7f098d"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";n.l=(r,s,a,i)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+a){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[s];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(A);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(e=>e(n)),t)return t(n)},A=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var a=new Promise((n,r)=>s=e[t]=[n,r]);r.push(s[2]=a);var i=n.p+n.u(t),o=new Error;n.l(i,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,s[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var s,a,i=r[0],o=r[1],l=r[2],c=0;if(i.some(t=>0!==e[t])){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkfrontend=self.webpackChunkfrontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>tr,hasStandardBrowserEnv:()=>rr,hasStandardBrowserWebWorkerEnv:()=>sr,navigator:()=>nr,origin:()=>ar});var t,r=n(9950),s=n.t(r,2),a=n(1352);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const o="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Ua){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,r){return void 0===n&&(n=null),i({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?A(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function A(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function f(e,n,r,s){void 0===s&&(s={});let{window:a=document.defaultView,v5Compat:c=!1}=s,A=a.history,f=t.Pop,p=null,m=g();function g(){return(A.state||{idx:null}).idx}function x(){f=t.Pop;let e=g(),n=null==e?null:e-m;m=e,p&&p({action:f,location:b.location,delta:n})}function v(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,A.replaceState(i({},A.state,{idx:m}),""));let b={get action(){return f},get location(){return e(a,A)},listen(e){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(o,x),p=e,()=>{a.removeEventListener(o,x),p=null}},createHref:e=>n(a,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;let s=u(b.location,e,n);r&&r(s,e),m=g()+1;let i=d(s,m),o=b.createHref(s);try{A.pushState(i,"",o)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;a.location.assign(o)}c&&p&&p({action:f,location:b.location,delta:1})},replace:function(e,n){f=t.Replace;let s=u(b.location,e,n);r&&r(s,e),m=g();let a=d(s,m),i=b.createHref(s);A.replaceState(a,"",i),c&&p&&p({action:f,location:b.location,delta:0})},go:e=>A.go(e)};return b}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){return void 0===n&&(n="/"),g(e,t,n,!1)}function g(e,t,n,r){let s=F(("string"===typeof t?A(t):t).pathname||"/",n);if(null==s)return null;let a=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let o=0;null==i&&o<a.length;++o){let e=E(s);i=S(a[o],e,r)}return i}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(l(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let o=P([r,i.relativePath]),c=n.concat(i);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),x(e.children,t,c,o)),(null!=e.path||e.index)&&t.push({path:o,score:k(o,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of v(e.path))s(e,t,r);else s(e,t)}),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return s?[a,""]:[a];let i=v(r.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const b=/^:[\w-]+$/,y=3,w=2,N=1,j=10,C=-2,B=e=>"*"===e;function k(e,t){let n=e.split("/"),r=n.length;return n.some(B)&&(r+=C),t&&(r+=w),n.filter(e=>!B(e)).reduce((e,t)=>e+(b.test(t)?y:""===t?N:j),r)}function S(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},a="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",d=_({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=_({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:P([a,d.pathname]),pathnameBase:R(P([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=P([a,d.pathnameBase]))}return i}function _(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let a=new RegExp(s,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:a,pathnameBase:i,pattern:e}}function E(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function F(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function T(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function I(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function D(e,t){let n=I(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=A(e):(s=i({},e),l(!s.pathname||!s.pathname.includes("?"),T("?","pathname","search",s)),l(!s.pathname||!s.pathname.includes("#"),T("#","pathname","hash",s)),l(!s.search||!s.search.includes("#"),T("#","search","hash",s)));let a,o=""===e||""===s.pathname,c=o?"/":s.pathname;if(null==c)a=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?A(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:U(r),hash:O(s)}}(s,a),u=c&&"/"!==c&&c.endsWith("/"),h=(o||"."===c)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const P=e=>e.join("/").replace(/\/\/+/g,"/"),R=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",O=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function M(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Q=["post","put","patch","delete"],H=(new Set(Q),["get",...Q]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z.apply(this,arguments)}const W=r.createContext(null);const V=r.createContext(null);const K=r.createContext(null);const G=r.createContext(null);const q=r.createContext({outlet:null,matches:[],isDataRoute:!1});const X=r.createContext(null);function Y(){return null!=r.useContext(G)}function J(){return Y()||l(!1),r.useContext(G).location}function Z(e){r.useContext(K).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(q);return e?function(){let{router:e}=de(le.UseNavigateStable),t=he(ce.UseNavigateStable),n=r.useRef(!1);Z(()=>{n.current=!0});let s=r.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,z({fromRouteId:t},s)))},[e,t]);return s}():function(){Y()||l(!1);let e=r.useContext(W),{basename:t,future:n,navigator:s}=r.useContext(K),{matches:a}=r.useContext(q),{pathname:i}=J(),o=JSON.stringify(D(a,n.v7_relativeSplatPath)),c=r.useRef(!1);Z(()=>{c.current=!0});let d=r.useCallback(function(n,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof n)return void s.go(n);let a=L(n,JSON.parse(o),i,"path"===r.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:P([t,a.pathname])),(r.replace?s.replace:s.push)(a,r.state,r)},[t,s,o,i,e]);return d}()}function te(e,t){let{relative:n}=void 0===t?{}:t,{future:s}=r.useContext(K),{matches:a}=r.useContext(q),{pathname:i}=J(),o=JSON.stringify(D(a,s.v7_relativeSplatPath));return r.useMemo(()=>L(e,JSON.parse(o),i,"path"===n),[e,o,i,n])}function ne(e,n,s,a){Y()||l(!1);let{navigator:i}=r.useContext(K),{matches:o}=r.useContext(q),c=o[o.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,f=J();if(n){var p;let e="string"===typeof n?A(n):n;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||l(!1),h=e}else h=f;let g=h.pathname||"/",x=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=m(e,{pathname:x});let b=oe(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:P([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:P([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,s,a);return n&&b?r.createElement(G.Provider,{value:{location:z({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},b):b}function re(){let e=function(){var e;let t=r.useContext(X),n=ue(ce.UseRouteError),s=he(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[s]}(),t=M(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}const se=r.createElement(re,null);class ae extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(q.Provider,{value:this.props.routeContext},r.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:t,match:n,children:s}=e,a=r.useContext(W);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(q.Provider,{value:t},s)}function oe(e,t,n,s){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===s&&(s=null),null==e){var i;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(i=s)&&i.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,c=null==(a=n)?void 0:a.errors;if(null!=c){let e=o.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||l(!1),o=o.slice(0,Math.min(o.length,e+1))}let d=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){d=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,s,a)=>{let i,l=!1,h=null,A=null;var f;n&&(i=c&&s.route.id?c[s.route.id]:void 0,h=s.route.errorElement||se,d&&(u<0&&0===a?(f="route-fallback",!1||Ae[f]||(Ae[f]=!0),l=!0,A=null):u===a&&(l=!0,A=s.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,a+1)),m=()=>{let t;return t=i?h:l?A:s.route.Component?r.createElement(s.route.Component,null):s.route.element?s.route.element:e,r.createElement(ie,{match:s,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===a)?r.createElement(ae,{location:n.location,revalidation:n.revalidation,component:h,error:i,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function de(e){let t=r.useContext(W);return t||l(!1),t}function ue(e){let t=r.useContext(V);return t||l(!1),t}function he(e){let t=function(){let e=r.useContext(q);return e||l(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||l(!1),n.route.id}const Ae={};function fe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function pe(e){let{to:t,replace:n,state:s,relative:a}=e;Y()||l(!1);let{future:i,static:o}=r.useContext(K),{matches:c}=r.useContext(q),{pathname:d}=J(),u=ee(),h=L(t,D(c,i.v7_relativeSplatPath),d,"path"===a),A=JSON.stringify(h);return r.useEffect(()=>u(JSON.parse(A),{replace:n,state:s,relative:a}),[u,A,a,n,s]),null}function me(e){l(!1)}function ge(e){let{basename:n="/",children:s=null,location:a,navigationType:i=t.Pop,navigator:o,static:c=!1,future:d}=e;Y()&&l(!1);let u=n.replace(/^\/*/,"/"),h=r.useMemo(()=>({basename:u,navigator:o,static:c,future:z({v7_relativeSplatPath:!1},d)}),[u,d,o,c]);"string"===typeof a&&(a=A(a));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:x="default"}=a,v=r.useMemo(()=>{let e=F(f,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:x},navigationType:i}},[u,f,p,m,g,x,i]);return null==v?null:r.createElement(K.Provider,{value:h},r.createElement(G.Provider,{children:s,value:v}))}function xe(e){let{children:t,location:n}=e;return ne(ve(t),n)}new Promise(()=>{});r.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,s)=>{if(!r.isValidElement(e))return;let a=[...t,s];if(e.type===r.Fragment)return void n.push.apply(n,ve(e.props.children,a));e.type!==me&&l(!1),e.props.index&&e.props.children&&l(!1);let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ve(e.props.children,a)),n.push(i)}),n}var be={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ye=r.createContext&&r.createContext(be),we=["attr","size","title"];function Ne(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(this,arguments)}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach(function(t){ke(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ke(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e){return e&&e.map((e,t)=>r.createElement(e.tag,Be({key:t},e.attr),Se(e.child)))}function _e(e){return t=>r.createElement(Ee,je({attr:Be({},e.attr)},t),Se(e.child))}function Ee(e){var t=t=>{var n,{attr:s,size:a,title:i}=e,o=Ne(e,we),l=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",je({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,o,{className:n,style:Be(Be({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&r.createElement("title",null,i),e.children)};return void 0!==ye?r.createElement(ye.Consumer,null,e=>t(e)):t(be)}function Fe(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"20",height:"5",x:"2",y:"3",rx:"1"},child:[]},{tag:"path",attr:{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"},child:[]},{tag:"path",attr:{d:"M10 12h4"},child:[]}]})(e)}function Te(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 9h6V5l7 7-7 7v-4H6V9z"},child:[]}]})(e)}function Ie(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 5v14"},child:[]},{tag:"path",attr:{d:"m19 12-7 7-7-7"},child:[]}]})(e)}function De(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 19-7-7 7-7"},child:[]},{tag:"path",attr:{d:"M19 12H5"},child:[]}]})(e)}function Le(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m5 12 7-7 7 7"},child:[]},{tag:"path",attr:{d:"M12 19V5"},child:[]}]})(e)}function Pe(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z"},child:[]},{tag:"path",attr:{d:"m7 16.5-4.74-2.85"},child:[]},{tag:"path",attr:{d:"m7 16.5 5-3"},child:[]},{tag:"path",attr:{d:"M7 16.5v5.17"},child:[]},{tag:"path",attr:{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z"},child:[]},{tag:"path",attr:{d:"m17 16.5-5-3"},child:[]},{tag:"path",attr:{d:"m17 16.5 4.74-2.85"},child:[]},{tag:"path",attr:{d:"M17 16.5v5.17"},child:[]},{tag:"path",attr:{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z"},child:[]},{tag:"path",attr:{d:"M12 8 7.26 5.15"},child:[]},{tag:"path",attr:{d:"m12 8 4.74-2.85"},child:[]},{tag:"path",attr:{d:"M12 13.5V8"},child:[]}]})(e)}function Re(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M9 22v-4h6v4"},child:[]},{tag:"path",attr:{d:"M8 6h.01"},child:[]},{tag:"path",attr:{d:"M16 6h.01"},child:[]},{tag:"path",attr:{d:"M12 6h.01"},child:[]},{tag:"path",attr:{d:"M12 10h.01"},child:[]},{tag:"path",attr:{d:"M12 14h.01"},child:[]},{tag:"path",attr:{d:"M16 10h.01"},child:[]},{tag:"path",attr:{d:"M16 14h.01"},child:[]},{tag:"path",attr:{d:"M8 10h.01"},child:[]},{tag:"path",attr:{d:"M8 14h.01"},child:[]}]})(e)}function Ue(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 2v4"},child:[]},{tag:"path",attr:{d:"M16 2v4"},child:[]},{tag:"rect",attr:{width:"18",height:"18",x:"3",y:"4",rx:"2"},child:[]},{tag:"path",attr:{d:"M3 10h18"},child:[]}]})(e)}function Oe(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"3"},child:[]}]})(e)}function Me(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 3v16a2 2 0 0 0 2 2h16"},child:[]},{tag:"path",attr:{d:"M7 16h8"},child:[]},{tag:"path",attr:{d:"M7 11h12"},child:[]},{tag:"path",attr:{d:"M7 6h3"},child:[]}]})(e)}function Qe(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z"},child:[]},{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]}]})(e)}function He(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 6 9 17l-5-5"},child:[]}]})(e)}function ze(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m6 9 6 6 6-6"},child:[]}]})(e)}function We(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m9 18 6-6-6-6"},child:[]}]})(e)}function Ve(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"8",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",x2:"12.01",y1:"16",y2:"16"},child:[]}]})(e)}function Ke(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"m9 12 2 2 4-4"},child:[]}]})(e)}function Ge(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"},child:[]},{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"path",attr:{d:"m9 14 2 2 4-4"},child:[]}]})(e)}function qe(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function Xe(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",x2:"12",y1:"2",y2:"22"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function Ye(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"15",y2:"3"},child:[]}]})(e)}function Je(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"},child:[]}]})(e)}function Ze(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function $e(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"},child:[]},{tag:"path",attr:{d:"M14 2v4a2 2 0 0 0 2 2h4"},child:[]},{tag:"path",attr:{d:"m9 15 2 2 4-4"},child:[]}]})(e)}function et(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3"},child:[]},{tag:"path",attr:{d:"M14 2v4a2 2 0 0 0 2 2h4"},child:[]},{tag:"circle",attr:{cx:"8",cy:"16",r:"6"},child:[]},{tag:"path",attr:{d:"M9.5 17.5 8 16.25V14"},child:[]}]})(e)}function tt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"},child:[]},{tag:"path",attr:{d:"M14 2v4a2 2 0 0 0 2 2h4"},child:[]},{tag:"path",attr:{d:"M10 9H8"},child:[]},{tag:"path",attr:{d:"M16 13H8"},child:[]},{tag:"path",attr:{d:"M16 17H8"},child:[]}]})(e)}function nt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function rt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"},child:[]},{tag:"path",attr:{d:"M3 3v5h5"},child:[]},{tag:"path",attr:{d:"M12 7v5l4 2"},child:[]}]})(e)}function st(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 16 12 14 15 10 15 8 12 2 12"},child:[]},{tag:"path",attr:{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"},child:[]}]})(e)}function at(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 3h12"},child:[]},{tag:"path",attr:{d:"M6 8h12"},child:[]},{tag:"path",attr:{d:"m6 13 8.5 8"},child:[]},{tag:"path",attr:{d:"M6 13h3"},child:[]},{tag:"path",attr:{d:"M9 13c6.667 0 6.667-10 0-10"},child:[]}]})(e)}function it(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M12 16v-4"},child:[]},{tag:"path",attr:{d:"M12 8h.01"},child:[]}]})(e)}function ot(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"7",height:"9",x:"3",y:"3",rx:"1"},child:[]},{tag:"rect",attr:{width:"7",height:"5",x:"14",y:"3",rx:"1"},child:[]},{tag:"rect",attr:{width:"7",height:"9",x:"14",y:"12",rx:"1"},child:[]},{tag:"rect",attr:{width:"7",height:"5",x:"3",y:"16",rx:"1"},child:[]}]})(e)}function lt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12a9 9 0 1 1-6.219-8.56"},child:[]}]})(e)}function ct(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",x2:"9",y1:"12",y2:"12"},child:[]}]})(e)}function dt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"4",x2:"20",y1:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"4",x2:"20",y1:"6",y2:"6"},child:[]},{tag:"line",attr:{x1:"4",x2:"20",y1:"18",y2:"18"},child:[]}]})(e)}function ut(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"},child:[]},{tag:"path",attr:{d:"m7.5 4.27 9 5.15"},child:[]},{tag:"polyline",attr:{points:"3.29 7 12 12 20.71 7"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"m17 13 5 5m-5 0 5-5"},child:[]}]})(e)}function ht(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"},child:[]},{tag:"path",attr:{d:"M12 22V12"},child:[]},{tag:"path",attr:{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7"},child:[]},{tag:"path",attr:{d:"m7.5 4.27 9 5.15"},child:[]}]})(e)}function At(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"},child:[]},{tag:"path",attr:{d:"m15 5 4 4"},child:[]}]})(e)}function ft(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12h14"},child:[]},{tag:"path",attr:{d:"M12 5v14"},child:[]}]})(e)}function pt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"},child:[]},{tag:"path",attr:{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"},child:[]},{tag:"rect",attr:{x:"6",y:"14",width:"12",height:"8",rx:"1"},child:[]}]})(e)}function mt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"},child:[]},{tag:"path",attr:{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"},child:[]},{tag:"path",attr:{d:"M12 17.5v-11"},child:[]}]})(e)}function gt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"},child:[]},{tag:"path",attr:{d:"M21 3v5h-5"},child:[]},{tag:"path",attr:{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"},child:[]},{tag:"path",attr:{d:"M8 16H3v5"},child:[]}]})(e)}function xt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"path",attr:{d:"m21 21-4.3-4.3"},child:[]}]})(e)}function vt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"},child:[]},{tag:"path",attr:{d:"m21.854 2.147-10.94 10.939"},child:[]}]})(e)}function bt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function yt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"},child:[]},{tag:"path",attr:{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"},child:[]},{tag:"path",attr:{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"},child:[]},{tag:"path",attr:{d:"M2 7h20"},child:[]},{tag:"path",attr:{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7"},child:[]}]})(e)}function wt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 6h18"},child:[]},{tag:"path",attr:{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"},child:[]},{tag:"path",attr:{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",x2:"10",y1:"11",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",x2:"14",y1:"11",y2:"17"},child:[]}]})(e)}function Nt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 17 13.5 8.5 8.5 13.5 2 7"},child:[]},{tag:"polyline",attr:{points:"16 17 22 17 22 11"},child:[]}]})(e)}function jt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 7 13.5 15.5 8.5 10.5 2 17"},child:[]},{tag:"polyline",attr:{points:"16 7 22 7 22 13"},child:[]}]})(e)}function Ct(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"},child:[]},{tag:"path",attr:{d:"M12 9v4"},child:[]},{tag:"path",attr:{d:"M12 17h.01"},child:[]}]})(e)}function Bt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"},child:[]},{tag:"path",attr:{d:"M15 18H9"},child:[]},{tag:"path",attr:{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"},child:[]},{tag:"circle",attr:{cx:"17",cy:"18",r:"2"},child:[]},{tag:"circle",attr:{cx:"7",cy:"18",r:"2"},child:[]}]})(e)}function kt(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"3",y2:"15"},child:[]}]})(e)}function St(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"16 11 18 13 22 9"},child:[]}]})(e)}function _t(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"19",x2:"19",y1:"8",y2:"14"},child:[]},{tag:"line",attr:{x1:"22",x2:"16",y1:"11",y2:"11"},child:[]}]})(e)}function Et(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Ft(e){return _e({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 6 6 18"},child:[]},{tag:"path",attr:{d:"m6 6 12 12"},child:[]}]})(e)}var Tt=n(7119),It=n.t(Tt,2);function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dt.apply(this,arguments)}function Lt(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Pt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Rt=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(Ua){}const Ut=r.createContext({isTransitioning:!1});new Map;const Ot=s.startTransition;It.flushSync,s.useId;function Mt(e){let{basename:t,children:n,future:s,window:a}=e,i=r.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:a,v5Compat:!0})&&(o={}),f(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return u("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:h(t)},null,o)));let l=i.current,[c,d]=r.useState({action:l.action,location:l.location}),{v7_startTransition:A}=s||{},p=r.useCallback(e=>{A&&Ot?Ot(()=>d(e)):d(e)},[d,A]);return r.useLayoutEffect(()=>l.listen(p),[l,p]),r.useEffect(()=>fe(s),[s]),r.createElement(ge,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:s})}const Qt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ht=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zt=r.forwardRef(function(e,t){let n,{onClick:s,relative:a,reloadDocument:i,replace:o,state:c,target:d,to:u,preventScrollReset:A,viewTransition:f}=e,p=Lt(e,Pt),{basename:m}=r.useContext(K),g=!1;if("string"===typeof u&&Ht.test(u)&&(n=u,Qt))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=F(t.pathname,m);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:g=!0}catch(Ua){}let x=function(e,t){let{relative:n}=void 0===t?{}:t;Y()||l(!1);let{basename:s,navigator:a}=r.useContext(K),{hash:i,pathname:o,search:c}=te(e,{relative:n}),d=o;return"/"!==s&&(d="/"===o?s:P([s,o])),a.createHref({pathname:d,search:c,hash:i})}(u,{relative:a}),v=function(e,t){let{target:n,replace:s,state:a,preventScrollReset:i,relative:o,viewTransition:l}=void 0===t?{}:t,c=ee(),d=J(),u=te(e,{relative:o});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==s?s:h(d)===h(u);c(e,{replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,s,a,n,e,i,o,l])}(u,{replace:o,state:c,target:d,preventScrollReset:A,relative:a,viewTransition:f});return r.createElement("a",Dt({},p,{href:n||x,onClick:g||i?s:function(e){s&&s(e),e.defaultPrevented||v(e)},ref:t,target:d}))});const Wt=r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:s=!1,className:a="",end:i=!1,style:o,to:c,viewTransition:d,children:u}=e,h=Lt(e,Rt),A=te(c,{relative:h.relative}),f=J(),p=r.useContext(V),{navigator:m,basename:g}=r.useContext(K),x=null!=p&&function(e,t){void 0===t&&(t={});let n=r.useContext(Ut);null==n&&l(!1);let{basename:s}=Gt(Vt.useViewTransitionState),a=te(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=F(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=F(n.nextLocation.pathname,s)||n.nextLocation.pathname;return null!=_(a.pathname,o)||null!=_(a.pathname,i)}(A)&&!0===d,v=m.encodeLocation?m.encodeLocation(A).pathname:A.pathname,b=f.pathname,y=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;s||(b=b.toLowerCase(),y=y?y.toLowerCase():null,v=v.toLowerCase()),y&&g&&(y=F(y,g)||y);const w="/"!==v&&v.endsWith("/")?v.length-1:v.length;let N,j=b===v||!i&&b.startsWith(v)&&"/"===b.charAt(w),C=null!=y&&(y===v||!i&&y.startsWith(v)&&"/"===y.charAt(v.length)),B={isActive:j,isPending:C,isTransitioning:x},k=j?n:void 0;N="function"===typeof a?a(B):[a,j?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let S="function"===typeof o?o(B):o;return r.createElement(zt,Dt({},h,{"aria-current":k,className:N,ref:t,style:S,to:c,viewTransition:d}),"function"===typeof u?u(B):u)});var Vt,Kt;function Gt(e){let t=r.useContext(W);return t||l(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Vt||(Vt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Kt||(Kt={}));function qt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Xt}=Object.prototype,{getPrototypeOf:Yt}=Object,{iterator:Jt,toStringTag:Zt}=Symbol,$t=(en=Object.create(null),e=>{const t=Xt.call(e);return en[t]||(en[t]=t.slice(8,-1).toLowerCase())});var en;const tn=e=>(e=e.toLowerCase(),t=>$t(t)===e),nn=e=>t=>typeof t===e,{isArray:rn}=Array,sn=nn("undefined");function an(e){return null!==e&&!sn(e)&&null!==e.constructor&&!sn(e.constructor)&&cn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const on=tn("ArrayBuffer");const ln=nn("string"),cn=nn("function"),dn=nn("number"),un=e=>null!==e&&"object"===typeof e,hn=e=>{if("object"!==$t(e))return!1;const t=Yt(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Zt in e)&&!(Jt in e)},An=tn("Date"),fn=tn("File"),pn=tn("Blob"),mn=tn("FileList"),gn=tn("URLSearchParams"),[xn,vn,bn,yn]=["ReadableStream","Request","Response","Headers"].map(tn);function wn(e,t){let n,r,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),rn(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(an(e))return;const r=s?Object.getOwnPropertyNames(e):Object.keys(e),a=r.length;let i;for(n=0;n<a;n++)i=r[n],t.call(null,e[i],i,e)}}function Nn(e,t){if(an(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,s=n.length;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const jn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Cn=e=>!sn(e)&&e!==jn;const Bn=(kn="undefined"!==typeof Uint8Array&&Yt(Uint8Array),e=>kn&&e instanceof kn);var kn;const Sn=tn("HTMLFormElement"),_n=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),En=tn("RegExp"),Fn=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};wn(n,(n,s)=>{let a;!1!==(a=t(n,s,e))&&(r[s]=a||n)}),Object.defineProperties(e,r)};const Tn=tn("AsyncFunction"),In=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],jn.addEventListener("message",e=>{let{source:t,data:s}=e;t===jn&&s===n&&r.length&&r.shift()()},!1),e=>{r.push(e),jn.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,cn(jn.postMessage)),Dn="undefined"!==typeof queueMicrotask?queueMicrotask.bind(jn):"undefined"!==typeof process&&process.nextTick||In,Ln={isArray:rn,isArrayBuffer:on,isBuffer:an,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||cn(e.append)&&("formdata"===(t=$t(e))||"object"===t&&cn(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&on(e.buffer),t},isString:ln,isNumber:dn,isBoolean:e=>!0===e||!1===e,isObject:un,isPlainObject:hn,isEmptyObject:e=>{if(!un(e)||an(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Ua){return!1}},isReadableStream:xn,isRequest:vn,isResponse:bn,isHeaders:yn,isUndefined:sn,isDate:An,isFile:fn,isBlob:pn,isRegExp:En,isFunction:cn,isStream:e=>un(e)&&cn(e.pipe),isURLSearchParams:gn,isTypedArray:Bn,isFileList:mn,forEach:wn,merge:function e(){const{caseless:t}=Cn(this)&&this||{},n={},r=(r,s)=>{const a=t&&Nn(n,s)||s;hn(n[a])&&hn(r)?n[a]=e(n[a],r):hn(r)?n[a]=e({},r):rn(r)?n[a]=r.slice():n[a]=r};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&wn(arguments[s],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return wn(t,(t,r)=>{n&&cn(t)?e[r]=qt(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let s,a,i;const o={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)i=s[a],r&&!r(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==n&&Yt(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:$t,kindOfTest:tn,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(rn(e))return e;let t=e.length;if(!dn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Jt]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Sn,hasOwnProperty:_n,hasOwnProp:_n,reduceDescriptors:Fn,freezeMethods:e=>{Fn(e,(t,n)=>{if(cn(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];cn(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return rn(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Nn,global:jn,isContextDefined:Cn,isSpecCompliantForm:function(e){return!!(e&&cn(e.append)&&"FormData"===e[Zt]&&e[Jt])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(un(e)){if(t.indexOf(e)>=0)return;if(an(e))return e;if(!("toJSON"in e)){t[r]=e;const s=rn(e)?[]:{};return wn(e,(e,t)=>{const a=n(e,r+1);!sn(a)&&(s[t]=a)}),t[r]=void 0,s}}return e};return n(e,0)},isAsyncFn:Tn,isThenable:e=>e&&(un(e)||cn(e))&&cn(e.then)&&cn(e.catch),setImmediate:In,asap:Dn,isIterable:e=>null!=e&&cn(e[Jt])};function Pn(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Ln.inherits(Pn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ln.toJSONObject(this.config),code:this.code,status:this.status}}});const Rn=Pn.prototype,Un={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Un[e]={value:e}}),Object.defineProperties(Pn,Un),Object.defineProperty(Rn,"isAxiosError",{value:!0}),Pn.from=(e,t,n,r,s,a)=>{const i=Object.create(Rn);return Ln.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),Pn.call(i,e.message,t,n,r,s),i.cause=e,i.name=e.name,a&&Object.assign(i,a),i};const On=Pn;function Mn(e){return Ln.isPlainObject(e)||Ln.isArray(e)}function Qn(e){return Ln.endsWith(e,"[]")?e.slice(0,-2):e}function Hn(e,t,n){return e?e.concat(t).map(function(e,t){return e=Qn(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const zn=Ln.toFlatObject(Ln,{},null,function(e){return/^is[A-Z]/.test(e)});const Wn=function(e,t,n){if(!Ln.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Ln.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Ln.isUndefined(t[e])})).metaTokens,s=n.visitor||c,a=n.dots,i=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Ln.isSpecCompliantForm(t);if(!Ln.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Ln.isDate(e))return e.toISOString();if(Ln.isBoolean(e))return e.toString();if(!o&&Ln.isBlob(e))throw new On("Blob is not supported. Use a Buffer instead.");return Ln.isArrayBuffer(e)||Ln.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let o=e;if(e&&!s&&"object"===typeof e)if(Ln.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Ln.isArray(e)&&function(e){return Ln.isArray(e)&&!e.some(Mn)}(e)||(Ln.isFileList(e)||Ln.endsWith(n,"[]"))&&(o=Ln.toArray(e)))return n=Qn(n),o.forEach(function(e,r){!Ln.isUndefined(e)&&null!==e&&t.append(!0===i?Hn([n],r,a):null===i?n:n+"[]",l(e))}),!1;return!!Mn(e)||(t.append(Hn(s,n,a),l(e)),!1)}const d=[],u=Object.assign(zn,{defaultVisitor:c,convertValue:l,isVisitable:Mn});if(!Ln.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Ln.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),Ln.forEach(n,function(n,a){!0===(!(Ln.isUndefined(n)||null===n)&&s.call(t,n,Ln.isString(a)?a.trim():a,r,u))&&e(n,r?r.concat(a):[a])}),d.pop()}}(e),t};function Vn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Kn(e,t){this._pairs=[],e&&Wn(e,this,t)}const Gn=Kn.prototype;Gn.append=function(e,t){this._pairs.push([e,t])},Gn.toString=function(e){const t=e?function(t){return e.call(this,t,Vn)}:Vn;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const qn=Kn;function Xn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Yn(e,t,n){if(!t)return e;const r=n&&n.encode||Xn;Ln.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(a=s?s(t,n):Ln.isURLSearchParams(t)?t.toString():new qn(t,n).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const Jn=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ln.forEach(this.handlers,function(t){null!==t&&e(t)})}},Zn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var $n=n(9379);const er={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:qn,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},tr="undefined"!==typeof window&&"undefined"!==typeof document,nr="object"===typeof navigator&&navigator||void 0,rr=tr&&(!nr||["ReactNative","NativeScript","NS"].indexOf(nr.product)<0),sr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ar=tr&&window.location.href||"http://localhost",ir=(0,$n.A)((0,$n.A)({},e),er);const or=function(e){function t(e,n,r,s){let a=e[s++];if("__proto__"===a)return!0;const i=Number.isFinite(+a),o=s>=e.length;if(a=!a&&Ln.isArray(r)?r.length:a,o)return Ln.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!i;r[a]&&Ln.isObject(r[a])||(r[a]=[]);return t(e,n,r[a],s)&&Ln.isArray(r[a])&&(r[a]=function(e){const t={},n=Object.keys(e);let r;const s=n.length;let a;for(r=0;r<s;r++)a=n[r],t[a]=e[a];return t}(r[a])),!i}if(Ln.isFormData(e)&&Ln.isFunction(e.entries)){const n={};return Ln.forEachEntry(e,(e,r)=>{t(function(e){return Ln.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const lr={transitional:Zn,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=Ln.isObject(e);s&&Ln.isHTMLForm(e)&&(e=new FormData(e));if(Ln.isFormData(e))return r?JSON.stringify(or(e)):e;if(Ln.isArrayBuffer(e)||Ln.isBuffer(e)||Ln.isStream(e)||Ln.isFile(e)||Ln.isBlob(e)||Ln.isReadableStream(e))return e;if(Ln.isArrayBufferView(e))return e.buffer;if(Ln.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Wn(e,new ir.classes.URLSearchParams,(0,$n.A)({visitor:function(e,t,n,r){return ir.isNode&&Ln.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=Ln.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Wn(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e,t,n){if(Ln.isString(e))try{return(t||JSON.parse)(e),Ln.trim(e)}catch(Ua){if("SyntaxError"!==Ua.name)throw Ua}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||lr.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Ln.isResponse(e)||Ln.isReadableStream(e))return e;if(e&&Ln.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Ua){if(n){if("SyntaxError"===Ua.name)throw On.from(Ua,On.ERR_BAD_RESPONSE,this,null,this.response);throw Ua}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ir.classes.FormData,Blob:ir.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ln.forEach(["delete","get","head","post","put","patch"],e=>{lr.headers[e]={}});const cr=lr,dr=Ln.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ur=Symbol("internals");function hr(e){return e&&String(e).trim().toLowerCase()}function Ar(e){return!1===e||null==e?e:Ln.isArray(e)?e.map(Ar):String(e)}function fr(e,t,n,r,s){return Ln.isFunction(r)?r.call(this,t,n):(s&&(t=n),Ln.isString(t)?Ln.isString(r)?-1!==t.indexOf(r):Ln.isRegExp(r)?r.test(t):void 0:void 0)}class pr{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(e,t,n){const s=hr(t);if(!s)throw new Error("header name must be a non-empty string");const a=Ln.findKey(r,s);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=Ar(e))}const a=(e,t)=>Ln.forEach(e,(e,n)=>s(e,n,t));if(Ln.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Ln.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let n,r,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!n||t[n]&&dr[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(Ln.isObject(e)&&Ln.isIterable(e)){let n,r,s={};for(const t of e){if(!Ln.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[r=t[0]]=(n=s[r])?Ln.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}a(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=hr(e)){const n=Ln.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Ln.isFunction(t))return t.call(this,e,n);if(Ln.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=hr(e)){const n=Ln.findKey(this,e);return!(!n||void 0===this[n]||t&&!fr(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function s(e){if(e=hr(e)){const s=Ln.findKey(n,e);!s||t&&!fr(0,n[s],s,t)||(delete n[s],r=!0)}}return Ln.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];e&&!fr(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return Ln.forEach(this,(r,s)=>{const a=Ln.findKey(n,s);if(a)return t[a]=Ar(r),void delete t[s];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(s):String(s).trim();i!==s&&delete t[s],t[i]=Ar(r),n[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Ln.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Ln.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[ur]=this[ur]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=hr(e);t[r]||(!function(e,t){const n=Ln.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:!0})})}(n,e),t[r]=!0)}return Ln.isArray(e)?e.forEach(r):r(e),this}}pr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ln.reduceDescriptors(pr.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),Ln.freezeMethods(pr);const mr=pr;function gr(e,t){const n=this||cr,r=t||n,s=mr.from(r.headers);let a=r.data;return Ln.forEach(e,function(e){a=e.call(n,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function xr(e){return!(!e||!e.__CANCEL__)}function vr(e,t,n){On.call(this,null==e?"canceled":e,On.ERR_CANCELED,t,n),this.name="CanceledError"}Ln.inherits(vr,On,{__CANCEL__:!0});const br=vr;function yr(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new On("Request failed with status code "+n.status,[On.ERR_BAD_REQUEST,On.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const wr=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s,a=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[i];s||(s=l),n[a]=o,r[a]=l;let d=i,u=0;for(;d!==a;)u+=n[d++],d%=e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const Nr=function(e,t){let n,r,s=0,a=1e3/t;const i=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=a,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=a?i(l,e):(n=l,r||(r=setTimeout(()=>{r=null,i(n)},a-t)))},()=>n&&i(n)]},jr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const s=wr(50,250);return Nr(n=>{const a=n.loaded,i=n.lengthComputable?n.total:void 0,o=a-r,l=s(o);r=a;e({loaded:a,total:i,progress:i?a/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&a<=i?(i-a)/l:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})},n)},Cr=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Br=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ln.asap(()=>e(...n))},kr=ir.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ir.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ir.origin),ir.navigator&&/(msie|trident)/i.test(ir.navigator.userAgent)):()=>!0,Sr=ir.hasStandardBrowserEnv?{write(e,t,n,r,s,a){const i=[e+"="+encodeURIComponent(t)];Ln.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),Ln.isString(r)&&i.push("path="+r),Ln.isString(s)&&i.push("domain="+s),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function _r(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Er=e=>e instanceof mr?(0,$n.A)({},e):e;function Fr(e,t){t=t||{};const n={};function r(e,t,n,r){return Ln.isPlainObject(e)&&Ln.isPlainObject(t)?Ln.merge.call({caseless:r},e,t):Ln.isPlainObject(t)?Ln.merge({},t):Ln.isArray(t)?t.slice():t}function s(e,t,n,s){return Ln.isUndefined(t)?Ln.isUndefined(e)?void 0:r(void 0,e,0,s):r(e,t,0,s)}function a(e,t){if(!Ln.isUndefined(t))return r(void 0,t)}function i(e,t){return Ln.isUndefined(t)?Ln.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,s,a){return a in t?r(n,s):a in e?r(void 0,n):void 0}const l={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,n)=>s(Er(e),Er(t),0,!0)};return Ln.forEach(Object.keys((0,$n.A)((0,$n.A)({},e),t)),function(r){const a=l[r]||s,i=a(e[r],t[r],r);Ln.isUndefined(i)&&a!==o||(n[r]=i)}),n}const Tr=e=>{const t=Fr({},e);let n,{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=mr.from(o),t.url=Yn(_r(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Ln.isFormData(r))if(ir.hasStandardBrowserEnv||ir.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(ir.hasStandardBrowserEnv&&(s&&Ln.isFunction(s)&&(s=s(t)),s||!1!==s&&kr(t.url))){const e=a&&i&&Sr.read(i);e&&o.set(a,e)}return t},Ir="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=Tr(e);let s=r.data;const a=mr.from(r.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:A}=r;function f(){c&&c(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let p=new XMLHttpRequest;function m(){if(!p)return;const r=mr.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());yr(function(e){t(e),f()},function(e){n(e),f()},{data:u&&"text"!==u&&"json"!==u?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p}),p=null}p.open(r.method.toUpperCase(),r.url,!0),p.timeout=r.timeout,"onloadend"in p?p.onloadend=m:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(m)},p.onabort=function(){p&&(n(new On("Request aborted",On.ECONNABORTED,e,p)),p=null)},p.onerror=function(){n(new On("Network Error",On.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const s=r.transitional||Zn;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new On(t,s.clarifyTimeoutError?On.ETIMEDOUT:On.ECONNABORTED,e,p)),p=null},void 0===s&&a.setContentType(null),"setRequestHeader"in p&&Ln.forEach(a.toJSON(),function(e,t){p.setRequestHeader(t,e)}),Ln.isUndefined(r.withCredentials)||(p.withCredentials=!!r.withCredentials),u&&"json"!==u&&(p.responseType=r.responseType),A&&([l,d]=jr(A,!0),p.addEventListener("progress",l)),h&&p.upload&&([o,c]=jr(h),p.upload.addEventListener("progress",o),p.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(i=t=>{p&&(n(!t||t.type?new br(null,e,p):t),p.abort(),p=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);g&&-1===ir.protocols.indexOf(g)?n(new On("Unsupported protocol "+g+":",On.ERR_BAD_REQUEST,e)):p.send(s||null)})},Dr=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const s=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof On?t:new br(t instanceof Error?t.message:t))}};let a=t&&setTimeout(()=>{a=null,s(new On("timeout ".concat(t," of ms exceeded"),On.ETIMEDOUT))},t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:o}=r;return o.unsubscribe=()=>Ln.asap(i),o}};function Lr(e,t){this.v=e,this.k=t}function Pr(e){return function(){return new Rr(e.apply(this,arguments))}}function Rr(e){var t,n;function r(t,n){try{var a=e[t](n),i=a.value,o=i instanceof Lr;Promise.resolve(o?i.v:i).then(function(n){if(o){var l="return"===t?"return":"next";if(!i.k||n.done)return r(l,n);n=e[l](n).value}s(a.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){s("throw",e)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,s){return new Promise(function(a,i){var o={key:e,arg:s,resolve:a,reject:i,next:null};n?n=n.next=o:(t=n=o,r(e,s))})},"function"!=typeof e.return&&(this.return=void 0)}function Ur(e){return new Lr(e,0)}function Or(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise(function(n){n(e[t](r))}),{done:!1,value:new Lr(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function Mr(e){var t,n,r,s=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);s--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Qr(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Qr(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Qr=function(e){this.s=e,this.n=e.next},Qr.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Qr(e)}Rr.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Rr.prototype.next=function(e){return this._invoke("next",e)},Rr.prototype.throw=function(e){return this._invoke("throw",e)},Rr.prototype.return=function(e){return this._invoke("return",e)};const Hr=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,s=0;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},zr=function(){var e=Pr(function*(e,t){var n,r=!1,s=!1;try{for(var a,i=Mr(Wr(e));r=!(a=yield Ur(i.next())).done;r=!1){const e=a.value;yield*Or(Mr(Hr(e,t)))}}catch(o){s=!0,n=o}finally{try{r&&null!=i.return&&(yield Ur(i.return()))}finally{if(s)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),Wr=function(){var e=Pr(function*(e){if(e[Symbol.asyncIterator])return void(yield*Or(Mr(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Ur(t.read());if(e)break;yield n}}finally{yield Ur(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Vr=(e,t,n,r)=>{const s=zr(e,t);let a,i=0,o=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await s.next();if(t)return o(),void e.close();let a=r.byteLength;if(n){let e=i+=a;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),s.return())},{highWaterMark:2})},Kr="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Gr=Kr&&"function"===typeof ReadableStream,qr=Kr&&("function"===typeof TextEncoder?(Xr=new TextEncoder,e=>Xr.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Xr;const Yr=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(Ua){return!1}},Jr=Gr&&Yr(()=>{let e=!1;const t=new Request(ir.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Zr=Gr&&Yr(()=>Ln.isReadableStream(new Response("").body)),$r={stream:Zr&&(e=>e.body)};var es;Kr&&(es=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!$r[e]&&($r[e]=Ln.isFunction(es[e])?t=>t[e]():(t,n)=>{throw new On("Response type '".concat(e,"' is not supported"),On.ERR_NOT_SUPPORT,n)})}));const ts=async(e,t)=>{const n=Ln.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Ln.isBlob(e))return e.size;if(Ln.isSpecCompliantForm(e)){const t=new Request(ir.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Ln.isArrayBufferView(e)||Ln.isArrayBuffer(e)?e.byteLength:(Ln.isURLSearchParams(e)&&(e+=""),Ln.isString(e)?(await qr(e)).byteLength:void 0)})(t):n},ns=Kr&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:a,timeout:i,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=Tr(e);c=c?(c+"").toLowerCase():"text";let A,f=Dr([s,a&&a.toAbortSignal()],i);const p=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let m;try{if(l&&Jr&&"get"!==n&&"head"!==n&&0!==(m=await ts(d,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Ln.isFormData(r)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=Cr(m,jr(Br(l)));r=Vr(n.body,65536,e,t)}}Ln.isString(u)||(u=u?"include":"omit");const s="credentials"in Request.prototype;A=new Request(t,(0,$n.A)((0,$n.A)({},h),{},{signal:f,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:s?u:void 0}));let a=await fetch(A,h);const i=Zr&&("stream"===c||"response"===c);if(Zr&&(o||i&&p)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=a[t]});const t=Ln.toFiniteNumber(a.headers.get("content-length")),[n,r]=o&&Cr(t,jr(Br(o),!0))||[];a=new Response(Vr(a.body,65536,n,()=>{r&&r(),p&&p()}),e)}c=c||"text";let g=await $r[Ln.findKey($r,c)||"text"](a,e);return!i&&p&&p(),await new Promise((t,n)=>{yr(t,n,{data:g,headers:mr.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:A})})}catch(g){if(p&&p(),g&&"TypeError"===g.name&&/Load failed|fetch/i.test(g.message))throw Object.assign(new On("Network Error",On.ERR_NETWORK,e,A),{cause:g.cause||g});throw On.from(g,g&&g.code,e,A)}}),rs={http:null,xhr:Ir,fetch:ns};Ln.forEach(rs,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Ua){}Object.defineProperty(e,"adapterName",{value:t})}});const ss=e=>"- ".concat(e),as=e=>Ln.isFunction(e)||null===e||!1===e,is=e=>{e=Ln.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let a=0;a<t;a++){let t;if(n=e[a],r=n,!as(n)&&(r=rs[(t=String(n)).toLowerCase()],void 0===r))throw new On("Unknown adapter '".concat(t,"'"));if(r)break;s[t||"#"+a]=r}if(!r){const e=Object.entries(s).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let n=t?e.length>1?"since :\n"+e.map(ss).join("\n"):" "+ss(e[0]):"as no adapter specified";throw new On("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function os(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new br(null,e)}function ls(e){os(e),e.headers=mr.from(e.headers),e.data=gr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return is(e.adapter||cr.adapter)(e).then(function(t){return os(e),t.data=gr.call(e,e.transformResponse,t),t.headers=mr.from(t.headers),t},function(t){return xr(t)||(os(e),t&&t.response&&(t.response.data=gr.call(e,e.transformResponse,t.response),t.response.headers=mr.from(t.response.headers))),Promise.reject(t)})}const cs="1.11.0",ds={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ds[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const us={};ds.transitional=function(e,t,n){function r(e,t){return"[Axios v"+cs+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,a)=>{if(!1===e)throw new On(r(s," has been removed"+(t?" in "+t:"")),On.ERR_DEPRECATED);return t&&!us[s]&&(us[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,a)}},ds.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const hs={assertOptions:function(e,t,n){if("object"!==typeof e)throw new On("options must be an object",On.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const a=r[s],i=t[a];if(i){const t=e[a],n=void 0===t||i(t,a,e);if(!0!==n)throw new On("option "+a+" must be "+n,On.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new On("Unknown option "+a,On.ERR_BAD_OPTION)}},validators:ds},As=hs.validators;class fs{constructor(e){this.defaults=e||{},this.interceptors={request:new Jn,response:new Jn}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Ua){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Fr(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;void 0!==n&&hs.assertOptions(n,{silentJSONParsing:As.transitional(As.boolean),forcedJSONParsing:As.transitional(As.boolean),clarifyTimeoutError:As.transitional(As.boolean)},!1),null!=r&&(Ln.isFunction(r)?t.paramsSerializer={serialize:r}:hs.assertOptions(r,{encode:As.function,serialize:As.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),hs.assertOptions(t,{baseUrl:As.spelling("baseURL"),withXsrfToken:As.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&Ln.merge(s.common,s[t.method]);s&&Ln.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=mr.concat(a,s);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[ls.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(u=0;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(A){t.call(this,A);break}}try{c=ls.call(this,h)}catch(A){return Promise.reject(A)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return Yn(_r((e=Fr(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Ln.forEach(["delete","get","head","options"],function(e){fs.prototype[e]=function(t,n){return this.request(Fr(n||{},{method:e,url:t,data:(n||{}).data}))}}),Ln.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,s){return this.request(Fr(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}fs.prototype[e]=t(),fs.prototype[e+"Form"]=t(!0)});const ps=fs;class ms{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,s){n.reason||(n.reason=new br(e,r,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new ms(function(t){e=t});return{token:t,cancel:e}}}const gs=ms;const xs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xs).forEach(e=>{let[t,n]=e;xs[n]=t});const vs=xs;const bs=function e(t){const n=new ps(t),r=qt(ps.prototype.request,n);return Ln.extend(r,ps.prototype,n,{allOwnKeys:!0}),Ln.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Fr(t,n))},r}(cr);bs.Axios=ps,bs.CanceledError=br,bs.CancelToken=gs,bs.isCancel=xr,bs.VERSION=cs,bs.toFormData=Wn,bs.AxiosError=On,bs.Cancel=bs.CanceledError,bs.all=function(e){return Promise.all(e)},bs.spread=function(e){return function(t){return e.apply(null,t)}},bs.isAxiosError=function(e){return Ln.isObject(e)&&!0===e.isAxiosError},bs.mergeConfig=Fr,bs.AxiosHeaders=mr,bs.formToJSON=e=>or(Ln.isHTMLForm(e)?new FormData(e):e),bs.getAdapter=is,bs.HttpStatusCode=vs,bs.default=bs;const ys=bs.create({baseURL:"http://localhost:5001/api"});ys.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),ys.interceptors.response.use(e=>e,e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(console.log("401 Unauthorized - Removing token from localStorage"),localStorage.removeItem("token"),localStorage.removeItem("role")),Promise.reject(e)});const ws=ys;var Ns=n(4414);const js=(0,r.createContext)(),Cs=e=>{let{children:t}=e;const[n,s]=(0,r.useState)({token:null,role:null}),a=ee();(0,r.useEffect)(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("role");e&&t&&s({token:e,role:t})},[]);return(0,Ns.jsx)(js.Provider,{value:{authState:n,login:(e,t)=>{console.log("Logging in with token and role:",{token:e,role:t}),localStorage.setItem("token",e),localStorage.setItem("role",t),s({token:e,role:t})},logout:()=>{console.log("Logging out - clearing localStorage"),localStorage.removeItem("token"),localStorage.removeItem("role"),s({token:null,role:null}),a("/")}},children:t})},Bs=e=>{let{isOpen:t,onClose:n,onConfirm:r}=e;if(!t)return null;const s=(0,Ns.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Ns.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:n}),(0,Ns.jsx)("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 z-10",children:(0,Ns.jsxs)("div",{className:"p-6",children:[(0,Ns.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full",children:(0,Ns.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,Ns.jsxs)("div",{className:"mt-4 text-center",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Confirm Logout"}),(0,Ns.jsx)("div",{className:"mt-2",children:(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to logout? You will need to sign in again to access the system."})})]}),(0,Ns.jsxs)("div",{className:"mt-6 flex justify-center space-x-4",children:[(0,Ns.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:n,children:"Cancel"}),(0,Ns.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",onClick:r,children:"Logout"})]})]})})]});return(0,Tt.createPortal)(s,document.body)},ks=()=>{const[e,t]=(0,r.useState)(0),[n,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(0),[c,d]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/admin/products/stock-alerts/count");t(e.data.totalCount)}catch(e){console.error("Failed to fetch total stock alert count:",e)}})()},[]),(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/admin/warehouse/material-stock-alerts");l(e.data.length)}catch(e){console.error("Failed to fetch material stock alert count:",e)}})()},[]);const u="text-gray-700",h="text-gray-500",A="hover:bg-gray-50",f="bg-red-500 text-white shadow-sm",p="text-gray-400",m="text-white",g="bg-yellow-400 text-gray-800",{logout:x}=(0,r.useContext)(js),[v,b]=(0,r.useState)(!1);return(0,Ns.jsxs)("div",{className:"h-screen w-64 ".concat("bg-white"," ").concat(u," flex flex-col border-r ").concat("border-gray-200"," overflow-hidden shadow-sm relative"),children:[(0,Ns.jsx)("div",{className:"absolute inset-0 z-0 pointer-events-none"}),(0,Ns.jsxs)("div",{className:"p-6 border-b border-gray-100 relative z-10",children:[(0,Ns.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3",children:[(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"h-16 w-auto animate-cottonCandy",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}),(0,Ns.jsxs)("div",{className:"absolute h-20 w-20 rounded-full animate-[orbit_4s_linear_infinite]",children:[(0,Ns.jsx)("span",{className:"absolute top-0 left-1/2 -ml-1 w-2 h-2 bg-primary rounded-full"}),(0,Ns.jsx)("span",{className:"absolute left-0 top-1/2 -mt-1 w-2 h-2 bg-accent-cyan rounded-full"}),(0,Ns.jsx)("span",{className:"absolute bottom-0 left-1/2 -ml-1 w-2 h-2 bg-accent-green rounded-full"}),(0,Ns.jsx)("span",{className:"absolute right-0 top-1/2 -mt-1 w-2 h-2 bg-accent-orange rounded-full"})]})]}),(0,Ns.jsx)("div",{className:"hidden bg-red-500 text-white px-4 py-2 rounded-lg transform rotate-12 shadow-lg",children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("span",{className:"text-green-400 font-bold text-lg mr-1",children:"H"}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("div",{className:"text-sm font-bold leading-tight",children:"THE"}),(0,Ns.jsx)("div",{className:"text-lg font-bold leading-tight",children:"SWEET"}),(0,Ns.jsx)("div",{className:"text-lg font-bold leading-tight",children:"HUB"})]})]})})]}),(0,Ns.jsx)("div",{className:"flex items-center space-x-3",children:(0,Ns.jsxs)("div",{className:"text-left",children:[(0,Ns.jsx)("div",{className:"".concat("text-gray-800"," font-bold text-lg leading-tight"),children:"Sweet Hub"}),(0,Ns.jsx)("div",{className:"".concat(h," text-sm"),children:"Admin Panel"})]})})]}),(0,Ns.jsx)("button",{className:"lg:hidden absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none",onClick:()=>window.dispatchEvent(new CustomEvent("close-sidebar")),children:(0,Ns.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Ns.jsxs)("nav",{className:"flex-1 px-4 py-6 space-y-2 relative z-10 overflow-y-auto",children:[(0,Ns.jsx)(Wt,{to:"/admin/dashboard",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg ".concat(t?f:"".concat(u," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:e=>{let{isActive:t}=e;return(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(ot,{className:"mr-3 text-lg ".concat(t?m:p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Dashboard"})]})}}),(0,Ns.jsxs)("details",{className:"group",children:[(0,Ns.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer ".concat(A," ").concat(u," list-none"),children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(Et,{className:"mr-3 text-lg ".concat(p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Workers"})]}),(0,Ns.jsx)(We,{className:"w-4 h-4 text-gray-400"})]}),(0,Ns.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Ns.jsx)(Wt,{to:"/admin/workers/add",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Add Worker"})}),(0,Ns.jsx)(Wt,{to:"/admin/workers/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"View Workers"})}),(0,Ns.jsx)(Wt,{to:"/admin/workers/attendance",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Attendance"})}),(0,Ns.jsx)(Wt,{to:"/admin/workers/salary",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Salary Report"})}),(0,Ns.jsx)(Wt,{to:"/admin/workers/holidays",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Holidays"})})]})]}),(0,Ns.jsxs)("details",{className:"group",children:[(0,Ns.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer ".concat(A," ").concat(u," list-none"),children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(Re,{className:"mr-3 text-lg ".concat(p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Departments"})]}),(0,Ns.jsx)(We,{className:"w-4 h-4 text-gray-400"})]}),(0,Ns.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Ns.jsx)(Wt,{to:"/admin/departments/create",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Create Department"})}),(0,Ns.jsx)(Wt,{to:"/admin/departments/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"View Departments"})})]})]}),(0,Ns.jsxs)("details",{className:"group",open:n,onToggle:()=>{s(!n)},children:[(0,Ns.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer ".concat(A," ").concat(u," list-none"),children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(Pe,{className:"mr-3 text-lg ".concat(p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Products"})]}),(0,Ns.jsxs)("div",{className:"flex items-center space-x-2",children:[!n&&e>0&&(0,Ns.jsx)("span",{className:"".concat(g," text-xs font-bold px-1.5 py-0.5 rounded-full"),children:e}),(0,Ns.jsx)(We,{className:"w-4 h-4 text-gray-400"})]})]}),(0,Ns.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Ns.jsx)(Wt,{to:"/admin/products/add-category",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Add Category"})}),(0,Ns.jsx)(Wt,{to:"/admin/products/add",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Add Product"})}),(0,Ns.jsx)(Wt,{to:"/admin/products/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"View Products"})}),(0,Ns.jsx)(Wt,{to:"/admin/warehouse/track-stock",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Track Stock"})}),(0,Ns.jsxs)(Wt,{to:"/admin/warehouse/stock-alerts",className:e=>{let{isActive:t}=e;return"flex items-center justify-between px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Stock Alerts"}),n&&e>0&&(0,Ns.jsx)("span",{className:"".concat(g," text-xs font-bold px-1.5 py-0.5 rounded-full"),children:e})]})]})]}),(0,Ns.jsxs)("details",{className:"group",open:a,onToggle:()=>{i(!a)},children:[(0,Ns.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer ".concat(A," ").concat(u," list-none"),children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(Fe,{className:"mr-3 text-lg ".concat(p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Warehouse"})]}),(0,Ns.jsxs)("div",{className:"flex items-center space-x-2",children:[!a&&o>0&&(0,Ns.jsx)("span",{className:"".concat(g," text-xs font-bold px-1.5 py-0.5 rounded-full"),children:o}),(0,Ns.jsx)(We,{className:"w-4 h-4 text-gray-400"})]})]}),(0,Ns.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Ns.jsx)(Wt,{to:"/admin/warehouse/store-room",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Store Room"})}),(0,Ns.jsx)("div",{className:"px-3 py-2 text-xs text-gray-400 font-semibold uppercase tracking-wider",children:"Packing Materials"}),(0,Ns.jsx)(Wt,{to:"/admin/warehouse/packing-materials/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A)," ml-4")},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"- View Materials"})}),(0,Ns.jsx)(Wt,{to:"/admin/warehouse/packing-materials/outgoing",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A)," ml-4")},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"- Outgoing Materials"})}),(0,Ns.jsx)(Wt,{to:"/admin/warehouse/packing-materials/alerts",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A)," ml-4")},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"- Alert Materials"})}),(0,Ns.jsx)(Wt,{to:"/admin/warehouse/raw-materials",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Raw Materials"})}),(0,Ns.jsx)(Wt,{to:"/admin/warehouse/manufacturing",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Manufacturing"})}),(0,Ns.jsx)(Wt,{to:"/admin/warehouse/daily-schedule",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:e=>{let{isActive:t}=e;return(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(et,{className:"mr-2 text-lg ".concat(t?m:p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Daily Schedule"})]})}}),(0,Ns.jsx)(Wt,{to:"/admin/warehouse/outgoing-materials",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Outgoing Materials"})}),(0,Ns.jsx)(Wt,{to:"/admin/warehouse/production-schedules",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Production Schedules"})}),(0,Ns.jsx)(Wt,{to:"/admin/warehouse/material-stock-alerts",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Material Stock Alerts"})})]})]}),(0,Ns.jsxs)("details",{className:"group",children:[(0,Ns.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer ".concat(A," ").concat(u," list-none"),children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(yt,{className:"mr-3 text-lg ".concat(p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Shops"})]}),(0,Ns.jsx)(We,{className:"w-4 h-4 text-gray-400"})]}),(0,Ns.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Ns.jsx)(Wt,{to:"/admin/shops/add",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Add Shop"})}),(0,Ns.jsx)(Wt,{to:"/admin/shops/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"View Shops"})})]})]}),(0,Ns.jsxs)("details",{className:"group",children:[(0,Ns.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer ".concat(A," ").concat(u," list-none"),children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(Ge,{className:"mr-3 text-lg ".concat(p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Tasks"})]}),(0,Ns.jsx)(We,{className:"w-4 h-4 text-gray-400"})]}),(0,Ns.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Ns.jsx)(Wt,{to:"/admin/tasks/daily",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Daily Tasks"})}),(0,Ns.jsx)(Wt,{to:"/admin/tasks/completed",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Completed Tasks"})})]})]}),(0,Ns.jsxs)("details",{className:"group",children:[(0,Ns.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer ".concat(A," ").concat(u," list-none"),children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(tt,{className:"mr-3 text-lg ".concat(p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Billing"})]}),(0,Ns.jsx)(We,{className:"w-4 h-4 text-gray-400"})]}),(0,Ns.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Ns.jsx)(Wt,{to:"/admin/bills/create",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Create Bill"})}),(0,Ns.jsx)(Wt,{to:"/admin/bills/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"View Bills"})})]})]}),(0,Ns.jsxs)("details",{className:"group",children:[(0,Ns.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer ".concat(A," ").concat(u," list-none"),children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(Bt,{className:"mr-3 text-lg ".concat(p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"E-Way Bills"})]}),(0,Ns.jsx)(We,{className:"w-4 h-4 text-gray-400"})]}),(0,Ns.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Ns.jsx)(Wt,{to:"/admin/eway-bills/create",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Create E-Way Bill"})}),(0,Ns.jsx)(Wt,{to:"/admin/eway-bills/history",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?f:"".concat(h," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"E-Way Bills History"})})]})]}),(0,Ns.jsx)(Wt,{to:"/admin/invoices/history",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg ".concat(t?f:"".concat(u," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:e=>{let{isActive:t}=e;return(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(tt,{className:"mr-3 text-lg ".concat(t?m:p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Invoice History"})]})}}),(0,Ns.jsx)(Wt,{to:"/admin/warehouse/return-products",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg ".concat(t?f:"".concat(u," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:e=>{let{isActive:t}=e;return(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(gt,{className:"mr-3 text-lg ".concat(t?m:p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Return Products"})]})}}),(0,Ns.jsx)(Wt,{to:"/admin/expenses",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg ".concat(t?f:"".concat(u," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:e=>{let{isActive:t}=e;return(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(mt,{className:"mr-3 text-lg ".concat(t?m:p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Expenses"})]})}}),(0,Ns.jsx)(Wt,{to:"/admin/profit-loss",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg ".concat(t?f:"".concat(u," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:e=>{let{isActive:t}=e;return(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(Me,{className:"mr-3 text-lg ".concat(t?m:p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Profit & Loss"})]})}}),(0,Ns.jsx)(Wt,{to:"/admin/settings",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg ".concat(t?f:"".concat(u," ").concat(A))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:e=>{let{isActive:t}=e;return(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(bt,{className:"mr-3 text-lg ".concat(t?m:p)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Settings"})]})}})]}),(0,Ns.jsx)("div",{className:"px-4 py-6 border-t border-gray-200 relative z-10",children:(0,Ns.jsxs)("button",{onClick:()=>{b(!0)},className:"flex items-center w-full px-3 py-2.5 rounded-lg ".concat(u," ").concat(A," font-medium"),children:[(0,Ns.jsx)(ct,{className:"mr-3 text-lg ".concat(p)}),(0,Ns.jsx)("span",{children:"Logout"})]})}),(0,Ns.jsx)(Bs,{isOpen:v,onClose:()=>{b(!1)},onConfirm:()=>{b(!1),x()}})]})};var Ss=n(3826);const _s={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Es(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Fs={date:Es({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Es({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Es({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Ts={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Is(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const Ds={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Is({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Is({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Is({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Is({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Is({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Ls(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const i=a[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(i)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}const Ps={ordinalNumber:(Rs={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(Rs.matchPattern);if(!n)return null;const r=n[0],s=e.match(Rs.parsePattern);if(!s)return null;let a=Rs.valueCallback?Rs.valueCallback(s[0]):s[0];return a=t.valueCallback?t.valueCallback(a):a,{value:a,rest:e.slice(r.length)}}),era:Ls({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Ls({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ls({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Ls({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Ls({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var Rs;const Us={code:"en-US",formatDistance:(e,t,n)=>{let r;const s=_s[e];return r="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Fs,formatRelative:(e,t,n,r)=>Ts[e],localize:Ds,match:Ps,options:{weekStartsOn:0,firstWeekContainsDate:1}};let Os={};function Ms(){return Os}Math.pow(10,8);const Qs=6048e5,Hs=Symbol.for("constructDateFrom");function zs(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&Hs in e?e[Hs](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ws(e,t){return zs(t||e,e)}function Vs(e){const t=Ws(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Ks(e,t){const n=Ws(e,null===t||void 0===t?void 0:t.in);return n.setHours(0,0,0,0),n}function Gs(e,t,n){const[r,s]=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=zs.bind(null,e||n.find(e=>"object"===typeof e));return n.map(s)}(null===n||void 0===n?void 0:n.in,e,t),a=Ks(r),i=Ks(s),o=+a-Vs(a),l=+i-Vs(i);return Math.round((o-l)/864e5)}function qs(e,t){const n=Ws(e,null===t||void 0===t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Xs(e,t){const n=Ws(e,null===t||void 0===t?void 0:t.in);return Gs(n,qs(n))+1}function Ys(e,t){var n,r,s,a,i,o;const l=Ms(),c=null!==(n=null!==(r=null!==(s=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==s?s:l.weekStartsOn)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==n?n:0,d=Ws(e,null===t||void 0===t?void 0:t.in),u=d.getDay(),h=(u<c?7:0)+u-c;return d.setDate(d.getDate()-h),d.setHours(0,0,0,0),d}function Js(e,t){return Ys(e,(0,$n.A)((0,$n.A)({},t),{},{weekStartsOn:1}))}function Zs(e,t){const n=Ws(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),s=zs(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Js(s),i=zs(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Js(i);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function $s(e,t){const n=Zs(e,t),r=zs((null===t||void 0===t?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Js(r)}function ea(e,t){const n=Ws(e,null===t||void 0===t?void 0:t.in),r=+Js(n)-+$s(n);return Math.round(r/Qs)+1}function ta(e,t){var n,r,s,a,i,o;const l=Ws(e,null===t||void 0===t?void 0:t.in),c=l.getFullYear(),d=Ms(),u=null!==(n=null!==(r=null!==(s=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==s?s:d.firstWeekContainsDate)&&void 0!==r?r:null===(o=d.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,h=zs((null===t||void 0===t?void 0:t.in)||e,0);h.setFullYear(c+1,0,u),h.setHours(0,0,0,0);const A=Ys(h,t),f=zs((null===t||void 0===t?void 0:t.in)||e,0);f.setFullYear(c,0,u),f.setHours(0,0,0,0);const p=Ys(f,t);return+l>=+A?c+1:+l>=+p?c:c-1}function na(e,t){var n,r,s,a,i,o;const l=Ms(),c=null!==(n=null!==(r=null!==(s=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==s?s:l.firstWeekContainsDate)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,d=ta(e,t),u=zs((null===t||void 0===t?void 0:t.in)||e,0);u.setFullYear(d,0,c),u.setHours(0,0,0,0);return Ys(u,t)}function ra(e,t){const n=Ws(e,null===t||void 0===t?void 0:t.in),r=+Ys(n,t)-+na(n,t);return Math.round(r/Qs)+1}function sa(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const aa={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return sa("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):sa(n+1,2)},d:(e,t)=>sa(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>sa(e.getHours()%12||12,t.length),H:(e,t)=>sa(e.getHours(),t.length),m:(e,t)=>sa(e.getMinutes(),t.length),s:(e,t)=>sa(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return sa(Math.trunc(r*Math.pow(10,n-3)),t.length)}},ia="midnight",oa="noon",la="morning",ca="afternoon",da="evening",ua="night",ha={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return aa.y(e,t)},Y:function(e,t,n,r){const s=ta(e,r),a=s>0?s:1-s;if("YY"===t){return sa(a%100,2)}return"Yo"===t?n.ordinalNumber(a,{unit:"year"}):sa(a,t.length)},R:function(e,t){return sa(Zs(e),t.length)},u:function(e,t){return sa(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return sa(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return sa(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return aa.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return sa(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=ra(e,r);return"wo"===t?n.ordinalNumber(s,{unit:"week"}):sa(s,t.length)},I:function(e,t,n){const r=ea(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):sa(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):aa.d(e,t)},D:function(e,t,n){const r=Xs(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):sa(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return sa(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return sa(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=0===r?7:r;switch(t){case"i":return String(s);case"ii":return sa(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(s=12===r?oa:0===r?ia:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(s=r>=17?da:r>=12?ca:r>=4?la:ua,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return aa.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):aa.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):sa(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):sa(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):aa.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):aa.s(e,t)},S:function(e,t){return aa.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return fa(r);case"XXXX":case"XX":return pa(r);default:return pa(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return fa(r);case"xxxx":case"xx":return pa(r);default:return pa(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Aa(r,":");default:return"GMT"+pa(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Aa(r,":");default:return"GMT"+pa(r,":")}},t:function(e,t,n){return sa(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return sa(+e,t.length)}};function Aa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),a=r%60;return 0===a?n+String(s):n+String(s)+t+sa(a,2)}function fa(e,t){if(e%60===0){return(e>0?"-":"+")+sa(Math.abs(e)/60,2)}return pa(e,t)}function pa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+sa(Math.trunc(r/60),2)+t+sa(r%60,2)}const ma=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},ga=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},xa={p:ga,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return ma(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",ma(r,t)).replace("{{time}}",ga(s,t))}},va=/^D+$/,ba=/^Y+$/,ya=["D","DD","YY","YYYY"];function wa(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Na(e){return!(!wa(e)&&"number"!==typeof e||isNaN(+Ws(e)))}const ja=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ca=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ba=/^'([^]*?)'?$/,ka=/''/g,Sa=/[a-zA-Z]/;function _a(e,t,n){var r,s,a,i,o,l,c,d,u,h,A,f,p,m;const g=Ms(),x=null!==(r=null!==(s=null===n||void 0===n?void 0:n.locale)&&void 0!==s?s:g.locale)&&void 0!==r?r:Us,v=null!==(a=null!==(i=null!==(o=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==o?o:g.firstWeekContainsDate)&&void 0!==i?i:null===(d=g.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==a?a:1,b=null!==(u=null!==(h=null!==(A=null!==(f=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==f?f:null===n||void 0===n||null===(p=n.locale)||void 0===p||null===(p=p.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==A?A:g.weekStartsOn)&&void 0!==h?h:null===(m=g.locale)||void 0===m||null===(m=m.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==u?u:0,y=Ws(e,null===n||void 0===n?void 0:n.in);if(!Na(y))throw new RangeError("Invalid time value");let w=t.match(Ca).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,xa[t])(e,x.formatLong)}return e}).join("").match(ja).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Ea(e)};if(ha[t])return{isToken:!0,value:e};if(t.match(Sa))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});x.localize.preprocessor&&(w=x.localize.preprocessor(y,w));const N={firstWeekContainsDate:v,weekStartsOn:b,locale:x};return w.map(r=>{if(!r.isToken)return r.value;const s=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!function(e){return ba.test(e)}(s))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return va.test(e)}(s))||function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),ya.includes(e))throw new RangeError(r)}(s,t,String(e));return(0,ha[s[0]])(y,s,x.localize,N)}).join("")}function Ea(e){const t=e.match(Ba);return t?t[1].replace(ka,"'"):e}function Fa(e,t){const n=Ws(e,null===t||void 0===t?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Ta(e,t){var n,r,s,a,i,o;const l=Ms(),c=null!==(n=null!==(r=null!==(s=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==s?s:l.weekStartsOn)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==n?n:0,d=Ws(e,null===t||void 0===t?void 0:t.in),u=d.getDay(),h=6+(u<c?-7:0)-(u-c);return d.setDate(d.getDate()+h),d.setHours(23,59,59,999),d}function Ia(e,t){const n=Ws(e,null===t||void 0===t?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}const Da=()=>{const e=ee(),[t,n]=(0,r.useState)({workers:{total:0,active:0,onLeave:0},departments:{total:0,activeProjects:0},products:{total:0,lowStock:0,outOfStock:0},storeRoom:{total:0,lowStock:0,totalValue:0},shops:{total:0,revenue:0},tasks:{total:0,pending:0,completed:0,overdue:0},returns:{total:0,pending:0,approved:0,thisMonth:0}}),[s,a]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(""),[h,A]=(0,r.useState)(_a(Fa(new Date),"yyyy-MM-dd")),[f,p]=(0,r.useState)(_a(new Date,"yyyy-MM-dd")),[m]=(0,Ss.d1)({words:["Welcome To SweetHub Admin Panel"],loop:1,typeSpeed:70,deleteSpeed:50,delaySpeed:1e3});(0,r.useEffect)(()=>{(async()=>{try{const[e,t,r,s,a,i]=await Promise.all([ws.get("/admin/workers").catch(()=>({data:[]})),ws.get("/admin/departments").catch(()=>({data:[]})),ws.get("/admin/products",{params:{showAdmin:!0}}).catch(()=>({data:[]})),ws.get("/admin/warehouse/store-room").catch(()=>({data:[]})),ws.get("/admin/shops").catch(()=>({data:[]})),ws.get("/admin/warehouse/returns").catch(()=>({data:[]}))]),o=s.data,l=o.filter(e=>e.quantity<=(e.stockAlertThreshold||5)),c=o.reduce((e,t)=>e+t.quantity*t.price,0),d=r.data,u=d.filter(e=>e.stockLevel<=10),h=d.filter(e=>0===e.stockLevel),A=i.data,f=A.filter(e=>!e.isApproved),p=A.filter(e=>e.isApproved),m=A.filter(e=>{const t=new Date(e.dateOfReturn),n=new Date;return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()});n({workers:{total:e.data.length,active:e.data.filter(e=>"active"===e.status).length||e.data.length,onLeave:e.data.filter(e=>"on-leave"===e.status).length||0},departments:{total:t.data.length,activeProjects:t.data.filter(e=>!1!==e.isActive).length||t.data.length},products:{total:d.length,lowStock:u.length,outOfStock:h.length},storeRoom:{total:o.length,lowStock:l.length,totalValue:c},shops:{total:a.data.length,revenue:0},tasks:{total:0,pending:0,completed:0,overdue:0},returns:{total:A.length,pending:f.length,approved:p.length,thisMonth:m.length}})}catch(e){console.error("Error fetching dashboard data:",e)}finally{a(!1)}})()},[]),(0,r.useEffect)(()=>{(async()=>{if(h&&f){c(!0),u("");try{const e=await ws.get("/admin/revenue/summary",{params:{startDate:h,endDate:f},withCredentials:!0});o(e.data)}catch(e){u("Failed to fetch revenue data."),console.error(e)}finally{c(!1)}}})()},[h,f]);const g=t=>{let{title:n,mainCount:r,subtitle:s,subCount:a,icon:i,color:o,bgColor:l,route:c,alert:d=!1}=t;return(0,Ns.jsx)("div",{onClick:()=>e(c),className:"".concat(l," rounded-xl shadow-lg p-4 sm:p-6 cursor-pointer transform hover:scale-105 transition-all duration-300 hover:shadow-xl border-l-4 ").concat(o),children:(0,Ns.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:n}),d&&(0,Ns.jsx)(Ct,{className:"w-5 h-5 text-red-500"})]}),(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:r}),s&&(0,Ns.jsxs)("p",{className:"text-sm text-gray-600",children:[s,": ",(0,Ns.jsx)("span",{className:"font-medium",children:a})]})]})]}),(0,Ns.jsx)("div",{className:"p-3 rounded-full ".concat(o.replace("border-","bg-")," bg-opacity-10"),children:(0,Ns.jsx)(i,{className:"w-8 h-8 ".concat(o.replace("border-","text-"))})})]})})};return s?(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col items-center justify-center h-64",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-16 h-16 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-10 h-10"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading dashboard..."})]}):(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:[(0,Ns.jsxs)("h3",{className:"text-lg sm:text-xl font-semibold mb-4 flex items-center",children:[(0,Ns.jsx)(jt,{className:"w-6 h-6 mr-2 text-green-500"}),"Quick Overview"]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Ns.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Store Value"}),(0,Ns.jsxs)("p",{className:"text-base sm:text-lg font-bold text-blue-600",children:["\u20b9",t.storeRoom.totalValue.toLocaleString()]})]}),(0,Ns.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Active Workers"}),(0,Ns.jsx)("p",{className:"text-base sm:text-lg font-bold text-green-600",children:t.workers.active})]}),(0,Ns.jsxs)("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Pending Returns"}),(0,Ns.jsx)("p",{className:"text-base sm:text-lg font-bold text-orange-600",children:t.returns.pending})]}),(0,Ns.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Total Shops"}),(0,Ns.jsx)("p",{className:"text-base sm:text-lg font-bold text-purple-600",children:t.shops.total})]})]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[(0,Ns.jsx)(g,{title:"Workers",mainCount:t.workers.total,subtitle:"Active",subCount:t.workers.active,icon:Et,color:"border-blue-500",bgColor:"bg-white",route:"/admin/workers/view"}),(0,Ns.jsx)(g,{title:"Departments",mainCount:t.departments.total,subtitle:"Active Projects",subCount:t.departments.activeProjects,icon:Re,color:"border-green-500",bgColor:"bg-white",route:"/admin/departments/view"}),(0,Ns.jsx)(g,{title:"Products",mainCount:t.products.total,subtitle:"Low Stock",subCount:t.products.lowStock,icon:Pe,color:"border-purple-500",bgColor:"bg-white",route:"/admin/products/view",alert:t.products.outOfStock>0}),(0,Ns.jsx)(g,{title:"Store Room",mainCount:t.storeRoom.total,subtitle:"Low Stock Items",subCount:t.storeRoom.lowStock,icon:Fe,color:"border-orange-500",bgColor:"bg-white",route:"/admin/warehouse/store-room",alert:t.storeRoom.lowStock>0}),(0,Ns.jsx)(g,{title:"Shops",mainCount:t.shops.total,subtitle:"Total Revenue",subCount:"\u20b9".concat(t.shops.revenue.toLocaleString()),icon:yt,color:"border-pink-500",bgColor:"bg-white",route:"/admin/shops/view"}),(0,Ns.jsx)(g,{title:"Daily Tasks",mainCount:t.tasks.total,subtitle:"Pending",subCount:t.tasks.pending,icon:Ge,color:"border-yellow-500",bgColor:"bg-white",route:"/admin/tasks/daily"}),(0,Ns.jsx)(g,{title:"Returns",mainCount:t.returns.total,subtitle:"This Month",subCount:t.returns.thisMonth,icon:ht,color:"border-red-500",bgColor:"bg-white",route:"/admin/warehouse/return-products/history",alert:t.returns.pending>0})]}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:[(0,Ns.jsxs)("h3",{className:"text-lg sm:text-xl font-semibold mb-4 flex items-center",children:[(0,Ns.jsx)(Xe,{className:"w-6 h-6 mr-2 text-green-500"}),"Revenue & Profit Summary"]}),(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,Ns.jsx)("input",{type:"date",value:h,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,Ns.jsx)("input",{type:"date",value:f,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,Ns.jsxs)("div",{className:"flex items-end gap-2",children:[(0,Ns.jsx)("button",{onClick:()=>{A(_a(Ys(new Date),"yyyy-MM-dd")),p(_a(Ta(new Date),"yyyy-MM-dd"))},className:"px-3 py-2 bg-secondary text-white rounded-lg hover:bg-secondary-dark text-sm",children:"This Week"}),(0,Ns.jsx)("button",{onClick:()=>{A(_a(Fa(new Date),"yyyy-MM-dd")),p(_a(Ia(new Date),"yyyy-MM-dd"))},className:"px-3 py-2 bg-secondary text-white rounded-lg hover:bg-secondary-dark text-sm",children:"This Month"})]})]}),l?(0,Ns.jsx)("p",{children:"Loading revenue data..."}):d?(0,Ns.jsx)("p",{className:"text-red-500",children:d}):i&&(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[(0,Ns.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Ns.jsx)("h4",{className:"text-sm font-semibold text-green-800",children:"Total Revenue"}),(0,Ns.jsxs)("p",{className:"text-2xl font-bold text-green-700",children:["\u20b9",i.overallTotalRevenue.toLocaleString()]})]}),(0,Ns.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Ns.jsx)("h4",{className:"text-sm font-semibold text-blue-800",children:"Total Profit"}),(0,Ns.jsxs)("p",{className:"text-2xl font-bold text-blue-700",children:["\u20b9",i.overallTotalProfit.toLocaleString()]})]})]}),(0,Ns.jsx)("h4",{className:"text-base font-semibold text-gray-700 mt-6 mb-2",children:"Breakdown by Shop"}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Shop"}),(0,Ns.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),(0,Ns.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Profit"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.revenueByShop.map(e=>(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:e.shopName}),(0,Ns.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-600 text-right",children:["\u20b9",e.totalRevenue.toLocaleString()]}),(0,Ns.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-600 text-right",children:["\u20b9",e.totalProfit.toLocaleString()]})]},e.shopId||"admin"))})]})})]})]})]})};var La=n(1766),Pa=n.n(La),Ra=function(e,t){return(Ra=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Ua(e,t){function n(){this.constructor=e}Ra(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Oa(e,t,n,r){return new(n||(n=Promise))(function(s,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(i,o)}l((r=r.apply(e,t||[])).next())})}function Ma(e,t){var n,r,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){i.label=a[1];break}if(6===a[0]&&i.label<s[1]){i.label=s[1],s=a;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(a);break}s[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}var Qa=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(n,t[0],t[1]),t.join("=")}),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach(function(t){var n=t.split(":"),r=n[0],s=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,s)})}},e}();function Ha(){return za}var za=null,Wa=new Map,Va=new Map;function Ka(e,t){var n=Ya(e,t);return Wa.get(n)}function Ga(e){for(var t=Wa.entries(),n=[];;){var r=t.next(),s=r.done,a=r.value;if(s)break;var i=a[0],o=a[1];i.split("_")[0]===e&&n.push(o)}return n}function qa(e){var t=e.kernelName,n=e.backendName,r=Ya(t,n);if(Wa.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");Wa.set(r,e)}function Xa(e){var t=e.kernelName;Va.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),Va.set(t,e)}function Ya(e,t){return t+"_"+e}function Ja(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function Za(e,t,n){return Math.max(e,Math.min(t,n))}function $a(e){return e%2==0?e:e+1}function ei(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function ti(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function ni(e,t,n){void 0===n&&(n=""),ti(ii(e,t),function(){return n+" Shapes "+e+" and "+t+" must match"})}function ri(e){ti(null!=e,function(){return"The input to the tensor constructor must be a non-null value."})}function si(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||bi(e)&&!n)for(var r=0;r<e.length;++r)si(e[r],t,n);else t.push(e);return t}function ai(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function ii(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function oi(e){return e%1==0}function li(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function ci(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function di(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function ui(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise(function(r,s){var a=0,i=function(){if(e())r();else{a++;var o=t(a);null!=n&&a>=n?s():setTimeout(i,o)}};i()})}function hi(e,t){for(var n=1,r=-1,s=0;s<e.length;++s)if(e[s]>=0)n*=e[s];else if(-1===e[s]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+s);r=s}else if(e[s]<0)throw Error("Shapes can not be < 0. Found "+e[s]+" at dim "+s);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var a=e.slice();return a[r]=t/n,a}function Ai(e,t){var n=t.length;return ti((e=null==e?t.map(function(e,t){return t}):[].concat(e)).every(function(e){return e>=-n&&e<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e}),ti(e.every(function(e){return oi(e)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(e){return e<0?n+e:e})}function fi(e,t){for(var n=[],r=[],s=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||s?null:Ai(t,e).sort(),i=0,o=0;o<e.length;++o){if(null!=a){if(a[i]===o&&1!==e[o])throw new Error("Can't squeeze axis "+o+" since its dim '"+e[o]+"' is not 1");(null==a[i]||a[i]>o)&&1===e[o]&&(n.push(e[o]),r.push(o)),a[i]<=o&&i++}1!==e[o]&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function pi(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function mi(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function gi(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function xi(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function vi(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function bi(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function yi(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function wi(e){if(null==e)return 0;var t=0;return e.forEach(function(e){return t+=e.length}),t}function Ni(e){return"string"==typeof e||e instanceof String}function ji(e){return"boolean"==typeof e}function Ci(e){return"number"==typeof e}function Bi(e){return Array.isArray(e)?Bi(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":Ci(e)?"float32":Ni(e)?"string":ji(e)?"bool":"float32"}function ki(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Si(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function _i(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Ei(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=si(e)),n&&gi(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),s=0;s<r.length;++s)0!==Math.round(e[s])&&(r[s]=1);return r}throw new Error("Unknown data type "+t)}function Fi(e,t){if(0===e.length)return t[0];var n=e.reduce(function(e,t){return e*t});if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var s=new Array;if(1===n.length)for(var a=n[0],i=0;i<a;i++)s[i]=r[t+i];else{a=n[0];var o=n.slice(1),l=o.reduce(function(e,t){return e*t});for(i=0;i<a;i++)s[i]=e(t+i*l,o,r)}return s}(0,e,t)}function Ti(e,t){for(var n=Ii(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Ii(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Di(){return Ha().platform.now()}function Li(e){e.forEach(function(t){ti(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function Pi(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Ha().platform.encode(e,t)}function Ri(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Ha().platform.decode(e,t)}function Ui(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],s=0;s<e.length-1;++s)r+=n[s]*e[s];return r}function Oi(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),s=0;s<r.length-1;++s)r[s]=Math.floor(e/n[s]),e-=r[s]*n[s];return r[r.length-1]=e,r}Object.freeze({shuffle:Ja,clamp:Za,nearestLargerEven:$a,sum:ei,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var s=Number(e[r])-Number(t[r]);n+=s*s}return n},assert:ti,assertShapesMatch:ni,assertNonNull:ri,flatten:si,sizeFromShape:ai,isScalarShape:function(e){return 0===e.length},arraysEqual:ii,isInt:oi,tanh:li,sizeToSquarishShape:ci,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return Ja(t),t},rightPad:di,repeatedTry:ui,inferFromImplicitShape:hi,parseAxisParam:Ai,squeezeShape:fi,getTypedArrayFromDType:pi,getArrayFromDType:mi,checkConversionForErrors:gi,isValidDtype:xi,hasEncodingLoss:vi,isTypedArray:bi,bytesPerElement:yi,bytesFromStringArray:wi,isString:Ni,isBoolean:ji,isNumber:Ci,inferDtype:Bi,isFunction:ki,nearestDivisor:Si,computeStrides:_i,toTypedArray:Ei,toNestedArray:Fi,makeOnesTypedArray:Ti,makeZerosTypedArray:Ii,now:Di,assertNonNegativeIntegerDimensions:Li,fetch:function(e,t){return Ha().platform.fetch(e,t)},encodeString:Pi,decodeString:Ri,locToIndex:Ui,indexToLoc:Oi});var Mi=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Qi)}return e.prototype.profileKernel=function(e,t,n){var r,s=this,a=this.backendTimer.time(function(){r=n()});return r.forEach(function(n){n.data().then(function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var s=e[r];if(isNaN(s)||!isFinite(s))return console.warn("Found "+s+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),a.then(function(a){var i="";null!=a.getExtraProfileInfo&&(i=a.getExtraProfileInfo()),s.logger.logKernelProfile(e,n,r,a.kernelMs,t,i)})})}),r},e}(),Qi=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,s,a){var i="number"==typeof r?di(r+"ms",9):r.error,o=di(e,25),l=t.rank,c=t.size,d=di(t.shape.toString(),14),u="";for(var h in s){var A=s[h].shape||t.shape,f=A.length;u+=h+": "+f+"D "+(f>0?A:"")+" "}console.log("%c"+o+"\t%c"+i+"\t%c"+l+"D "+d+"\t%c"+c+"\t%c"+u+"\t%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();function Hi(e,t,n){return di(Array.isArray(e)?parseFloat(e[0].toFixed(7))+" + "+parseFloat(e[1].toFixed(7))+"j":Ni(e)?"'"+e+"'":"bool"===n?zi(e):parseFloat(e.toFixed(7)).toString(),t)}function zi(e){return 0===e?"false":"true"}function Wi(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Vi=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=ai(e),null!=n){var s=n.length;ti(s===this.size,function(){return"Length of values '"+s+"' does not match the size inferred by the shape '"+r.size+"'."})}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||mi(t,this.size),this.strides=_i(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),ti(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"});var s=this.locToIndex(n);this.values[s]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,s=e;r<s.length;r++){var a=s[r];if(a<0||a>=this.shape[n]){var i="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(i)}n++}for(var o=e[e.length-1],l=0;l<e.length-1;++l)o+=this.strides[l]*e[l];return this.values[o]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Ki().makeTensor(this.values,this.shape,this.dtype)},e}(),Ki=null,Gi=null,qi=null,Xi=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=ai(e),this.strides=_i(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),ti(1===this.size,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,s){return this.throwIfDisposed(),this.reshape([e,t,n,r,s])},e.prototype.asType=function(e){return this.throwIfDisposed(),Gi.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Oa(this,void 0,void 0,function(){var e;return Ma(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Gi.buffer(this.shape,this.dtype,e)]}})})},e.prototype.bufferSync=function(){return Gi.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Oa(this,void 0,void 0,function(){var e;return Ma(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Fi(this.shape,e)]}})})},e.prototype.arraySync=function(){return Fi(this.shape,this.dataSync())},e.prototype.data=function(){return Oa(this,void 0,void 0,function(){var e,t;return Ma(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=Ki().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map(function(e){return Ri(e)})]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}case 2:return[2,e]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var e=Ki().readSync(this.dataId);if("string"===this.dtype)try{return e.map(function(e){return Ri(e)})}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return Oa(this,void 0,void 0,function(){var e;return Ma(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,Ki().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(Ki().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),Gi.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),Gi.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),Gi.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),Gi.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),Gi.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),Gi.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),Gi.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var s=_i(t),a=function(e,t,n,r){var s=ai(t),a=r[r.length-1],i=new Array(a).fill(0),o=t.length,l="complex64"===n?Wi(e):e;if(o>1)for(var c=0;c<s/a;c++)for(var d=c*a,u=0;u<a;u++)i[u]=Math.max(i[u],Hi(l[d+u],0,n).length);return i}(e,t,n,s),i=t.length,o=function e(t,n,r,s,a,i){void 0===i&&(i=!0);var o="complex64"===r?2:1,l=n[0],c=n.length;if(0===c)return"complex64"===r?[Hi(Wi(t)[0],0,r)]:"bool"===r?[zi(t[0])]:[t[0].toString()];if(1===c){if(l>20){var d=3*o,u=Array.from(t.slice(0,d)),h=Array.from(t.slice((l-3)*o,l*o));return"complex64"===r&&(u=Wi(u),h=Wi(h)),["["+u.map(function(e,t){return Hi(e,a[t],r)}).join(", ")+", ..., "+h.map(function(e,t){return Hi(e,a[l-3+t],r)}).join(", ")+"]"]}return["["+("complex64"===r?Wi(t):Array.from(t)).map(function(e,t){return Hi(e,a[t],r)}).join(", ")+"]"]}var A=n.slice(1),f=s.slice(1),p=s[0]*o,m=[];if(l>20){for(var g=0;g<3;g++){var x=(v=g*p)+p;m.push.apply(m,e(t.slice(v,x),A,r,f,a,!1))}for(m.push("..."),g=l-3;g<l;g++)x=(v=g*p)+p,m.push.apply(m,e(t.slice(v,x),A,r,f,a,g===l-1))}else for(g=0;g<l;g++){var v;x=(v=g*p)+p,m.push.apply(m,e(t.slice(v,x),A,r,f,a,g===l-1))}var b=2===c?",":"";for(m[0]="["+m[0]+b,g=1;g<m.length-1;g++)m[g]=" "+m[g]+b;var y=",\n";for(g=2;g<c;g++)y+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(i?"":y),m}(e,t,n,s,a),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+i),l.push("  shape: ["+t+"]"),l.push("  values:")),l.push(o.map(function(e){return"    "+e}).join("\n")),l.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),Gi.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Gi.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),Gi.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),Gi.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),Gi.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),Gi.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),Gi.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),Gi.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Gi.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),Gi.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),Gi.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),Gi.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,s){return void 0===n&&(n=.001),qi("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,s,r,n)},e.prototype.batchNorm=function(e,t,n,r,s){return void 0===s&&(s=.001),this.throwIfDisposed(),Gi.batchNorm(this,e,t,n,r,s)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Gi.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Gi.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Gi.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Gi.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Gi.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Gi.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Gi.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Gi.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Gi.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Gi.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),Gi.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),Gi.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),Gi.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),Gi.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),Gi.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),Gi.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),Gi.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),Gi.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),Gi.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),Gi.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),Gi.div(this,e)},e.prototype.divNoNan=function(e){return this.throwIfDisposed(),Gi.divNoNan(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),Gi.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),Gi.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),Gi.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),Gi.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),Gi.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),Gi.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),Gi.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),Gi.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),Gi.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),Gi.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),Gi.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),Gi.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),Gi.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),Gi.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),Gi.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),Gi.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),Gi.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),Gi.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),Gi.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),Gi.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),Gi.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),Gi.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),Gi.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),Gi.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),Gi.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),Gi.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),Gi.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),Gi.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),Gi.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),Gi.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),Gi.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),Gi.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),Gi.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),Gi.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),Gi.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),Gi.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),Gi.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),Gi.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),Gi.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),Gi.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),Gi.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),Gi.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),Gi.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Gi.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),Gi.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),Gi.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),Gi.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),Gi.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),Gi.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),Gi.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),Gi.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),Gi.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),Gi.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),Gi.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),Gi.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),Gi.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),Gi.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),Gi.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),Gi.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),Gi.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),Gi.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),Gi.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),Gi.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),Gi.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),Gi.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),Gi.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),Gi.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),Gi.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),Gi.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),Gi.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Gi.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Gi.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Gi.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Gi.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,s,a){return void 0===r&&(r="NWC"),void 0===s&&(s=1),this.throwIfDisposed(),Gi.conv1d(this,e,t,n,r,s,a)},e.prototype.conv2d=function(e,t,n,r,s,a){return void 0===r&&(r="NHWC"),void 0===s&&(s=[1,1]),this.throwIfDisposed(),Gi.conv2d(this,e,t,n,r,s,a)},e.prototype.conv2dTranspose=function(e,t,n,r,s){return this.throwIfDisposed(),Gi.conv2dTranspose(this,e,t,n,r,s)},e.prototype.depthwiseConv2D=function(e,t,n,r,s,a){return void 0===r&&(r="NHWC"),void 0===s&&(s=[1,1]),this.throwIfDisposed(),Gi.depthwiseConv2d(this,e,t,n,r,s,a)},e.prototype.separableConv2d=function(e,t,n,r,s,a){return void 0===s&&(s=[1,1]),void 0===a&&(a="NHWC"),this.throwIfDisposed(),Gi.separableConv2d(this,e,t,n,r,s,a)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Gi.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Gi.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),Gi.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,s){return this.throwIfDisposed(),Gi.pool(this,e,t,n,r,s)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),Ki().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Gi.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Gi.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Gi.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),Gi.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,s,a,i,o){return void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=0),this.throwIfDisposed(),Gi.stridedSlice(this,e,t,n,r,s,a,i,o)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Gi.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),Gi.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),Gi.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),Gi.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),Gi.spectral.irfft(this)},e}();Object.defineProperty(Xi,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var Yi,Ji,Zi,$i,eo,to=function(e){function t(t,n,r,s){var a=e.call(this,t.shape,t.dtype,t.dataId,s)||this;return a.trainable=n,a.name=r,a}return Ua(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!ii(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Ki().disposeTensor(this),this.dataId=e.dataId,Ki().incRef(this,null)},t.prototype.dispose=function(){Ki().disposeVariable(this),this.isDisposedInternal=!0},t}(Xi);Object.defineProperty(to,Symbol.hasInstance,{value:function(e){return e instanceof Xi&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Yi||(Yi={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Ji||(Ji={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Zi||(Zi={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}($i||($i={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(eo||(eo={}));var no={float32:$i,int32:Ji,bool:Zi,complex64:eo};function ro(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return no[e][t]}function so(e){return ro(e,"int32")}function ao(e,t){if(e.dtype===t.dtype)return[e,t];var n=ro(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function io(e,t){ti(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function oo(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof Xi)n.push(t);else if(s=t,Array.isArray(s)||"object"==typeof s){var s,a=t;for(var i in a){var o=a[i];r.has(o)||(r.add(o),e(o,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:ao,assertTypesMatch:io,isTensorInList:function(e,t){return t.some(function(t){return t.id===e.id})},getTensorsInContainer:oo});var lo,co=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),uo=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new co}return e.prototype.ready=function(){return Oa(this,void 0,void 0,function(){var e,t,n;return Ma(this,function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then(function(){})];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return Oa(this,void 0,void 0,function(){var t,n,r;return Ma(this,function(s){switch(s.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=s.sent(),[3,3];case 2:r=n,s.label=3;case 3:if(!r)return[2,!1];s.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Mi(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var e=this;Ga(this.backendName).forEach(function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)})},e.prototype.disposeRegisteredKernels=function(e){var t=this;Ga(e).forEach(function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])})},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var s=++this.pendingBackendInitId,a=r.then(function(n){return!(s<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)}).catch(function(n){return!(s<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),s=r.success,a=r.asyncInit;if(a||s)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,s=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,s,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,s=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=e}return this.scopedRun(function(){return r.startScope(s)},function(){return r.endScope(n)},function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n})},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],function(e){return{x:function(){return e.toFloat()}}},[]),t},e.prototype.runKernel=function(e,t,n,r,s){return this.runKernelFunc(null,t,null,e,n,r,s)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),s=0;n.forEach(function(e){s+="complex64"===e.dtype?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-s-a;if(i>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+i+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,s,a,i){var o,l=this;void 0===a&&(a=[]),void 0===i&&(i=[]);var c=[],d=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var u,h=function(e){d&&(c=e.map(function(e){return l.keep(l.clone(e))}))},A=this.state.numBytes,f=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var p,m=Ka(r,this.backendName);return u=null!=m?function(){var e=l.backend.numDataIds();p=m.kernelFunc({inputs:t,attrs:s,backend:l.backend});var n=Array.isArray(p)?p:[p];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(r,e,n);var o=n.map(function(e){var t=e.dataId,n=e.shape,r=e.dtype;return l.makeTensorFromDataId(t,n,r)}),c=o.filter(function(e,t){return i[t]});return h((a||[]).slice().concat(c)),o}:function(){var t=l.backend.numDataIds();p=l.tidy(function(){return e(l.backend,h)});var n=Array.isArray(p)?p:[p];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(r,t,n),n},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){o=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(r,t,function(){return u()}):u()}),d&&this.addTapeNode(r,t,o,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-A,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-f,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(e){return t[e].shape}),outputShapes:o.map(function(e){return e.shape})}),Array.isArray(p)?o:o[0]},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var s=e;"string"===n&&Ni(e[0])&&(s=e.map(function(e){return Pi(e)}));var a=r.write(s,t,n),i=new Xi(t,n,a,this.nextTensorId());if(this.incRef(i,r),"string"===n){var o=this.state.tensorInfo.get(a),l=wi(s);this.state.numBytes+=l-o.bytes,o.bytes=l}return i},e.prototype.makeTensorFromDataId=function(e,t,n,r){var s=new Xi(t,n=n||"float32",e,this.nextTensorId());return this.incRef(s,r),s},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var s=new to(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[s.name])throw new Error("Variable with name "+s.name+" was already registered");return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*yi(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof to||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return Oa(this,void 0,void 0,function(){var t,n;return Ma(this,function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(e){return e.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,s){var a=this,i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:s},o=function(e){return Va.get(e)}(e);null!=o&&(r=o.gradFunc),null!=r&&(i.gradient=function(e){return e=e.map(function(e,t){if(null==e){var r=n[t],s=Ii(r.size,r.dtype);return a.makeTensor(s,r.shape,r.dtype)}return e}),r(e.length>1?e:e[0],s)}),this.state.activeTape.push(i)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=oo(e),r=new Set(n.map(function(e){return e.id})),s=0;s<this.state.activeScope.track.length;s++){var a=this.state.activeScope.track[s];a.kept||r.has(a.id)||a.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(e){e.kept||e.scopeId!==i.id||t.track(e)})},e.prototype.gradients=function(e,t,n,r){var s=this;if(void 0===r&&(r=!1),ti(t.length>0,function(){return"gradients() received an empty list of xs."}),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var a=this.scopedRun(function(){return s.startTape()},function(){return s.endTape()},function(){return s.tidy("forward",e)});ti(a instanceof Xi,function(){return"The result y returned by f() must be a tensor."});var i=function(e,t,n){for(var r={},s={},a=0;a<t.length;a++)r[t[a].id]=!0;for(a=0;a<e.length;a++){var i=(f=e[a]).inputs;for(var o in i){for(var l=i[o],c=!1,d=0;d<t.length;d++)if(r[l.id]){f.outputs.forEach(function(e){return r[e.id]=!0}),c=!0,s[f.id]=!0;break}if(c)break}}var u={};u[n.id]=!0;var h={};for(a=e.length-1;a>=0;a--)for(i=(f=e[a]).inputs,d=0;d<f.outputs.length;d++)if(u[f.outputs[d].id]){for(var o in i)u[i[o].id]=!0,h[f.id]=!0;break}var A=[];for(a=0;a<e.length;a++){var f;if(s[(f=e[a]).id]&&h[f.id]){var p={};for(var o in f.inputs){var m=f.inputs[o];r[m.id]&&(p[o]=m)}var g=Object.assign({},f);g.inputs=p,g.outputs=f.outputs,A.push(g)}}return A}(this.state.activeTape,t,a);if(!r&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var e,r,o={};o[a.id]=null==n?(r=Ti(ai(e=a.shape),"float32"),ho.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var s=t[r],a=[];if(s.outputs.forEach(function(t){var n=e[t.id];null!=n?a.push(n):a.push(null)}),null==s.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+s.kernelName+".");var i=s.gradient(a),o=function(t){if(!(t in i))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(i)+".");var r=n(function(){return i[t]()});if("float32"!==r.dtype)throw new Error("Error in gradient for op "+s.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var a=s.inputs[t];if(!ii(r.shape,a.shape))throw new Error("Error in gradient for op "+s.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+a.shape+"'");if(null==e[a.id])e[a.id]=r;else{var o=e[a.id];e[a.id]=o.add(r),o.dispose()}};for(var l in s.inputs)o(l)},s=t.length-1;s>=0;s--)r(s)}(o,i,function(e){return s.tidy(e)});var l=t.map(function(e){return o[e.id]});return 0===s.state.gradientDepth&&(s.state.activeTape.forEach(function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()}),s.state.activeTape=null),{value:a,grads:l}})},e.prototype.customGrad=function(e){var t=this;return ti(ki(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];ti(r.every(function(e){return e instanceof Xi}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return r.forEach(function(e,t){a[t]=e}),t.runKernelFunc(function(t,s){return ti((n=e.apply(void 0,r.concat([s]))).value instanceof Xi,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),ti(ki(n.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),n.value},a,function(e,t){var s=n.gradFunc(e,t),a=Array.isArray(s)?s:[s];ti(a.length===r.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),ti(a.every(function(e){return e instanceof Xi}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var i={};return a.forEach(function(e,t){i[t]=function(){return e}}),i})}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return Oa(this,void 0,void 0,function(){var t,n;return Ma(this,function(r){switch(r.label){case 0:return t=Di(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=Di()-t,[2,n]}})})},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new co,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),ho=function(){var e=function(){if(null==lo){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}lo=e}return lo}();if(null==e._tfengine){var t=new Qa(e);e._tfengine=new uo(t)}return function(e){za=e}(e._tfengine.ENV),Ki=function(){return e._tfengine},e._tfengine}();function Ao(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var fo=Ha();fo.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),fo.registerFlag("IS_BROWSER",function(){return Ao()}),fo.registerFlag("IS_NODE",function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}),fo.registerFlag("IS_CHROME",function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),fo.registerFlag("PROD",function(){return!1}),fo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return fo.getBool("DEBUG")}),fo.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),fo.registerFlag("IS_TEST",function(){return!1});var po,mo,go,xo={},vo={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function bo(e,t){xo[e]=t}function yo(e){e in xo||(xo[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",function(t){t.preventDefault(),delete xo[e]},!1),1===e?t.getContext("webgl",vo)||t.getContext("experimental-webgl",vo):t.getContext("webgl2",vo)}(e));var t=xo[e];return t.isContextLost()?(delete xo[e],yo(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),xo[e])}function wo(e,t){return[t,e]}function No(e){var t=ai(e);return ci(Math.ceil(t/4))}function jo(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Co(e,t){var n,r,s,a,i,o,l,c,d,u=e;return 2===Ha().getNumber("WEBGL_VERSION")?(n=u.R32F,r=u.R16F,s=u.RGBA16F,a=u.RGBA32F,i=u.RED,o=4,l=1,c=u.HALF_FLOAT,d=u.FLOAT):(n=e.RGBA,r=e.RGBA,s=e.RGBA,a=u.RGBA,i=e.RGBA,o=4,l=4,c=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:o,defaultNumChannels:l,textureTypeHalfFloat:c,textureTypeFloat:d}}function Bo(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+So(e,t))}(e),r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(po||(po={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(mo||(mo={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(go||(go={}));function ko(e){return!!(Ha().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function So(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function _o(e,t,n){return Zo(e,t,function(){return e.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function Eo(e,t,n){var r=Zo(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Bo(e,t,function(){return e.shaderSource(r,n)}),Bo(e,t,function(){return e.compileShader(r)}),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Fo(e,t,n){var r=Zo(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Bo(e,t,function(){return e.shaderSource(r,n)}),Bo(e,t,function(){return e.compileShader(r)}),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=Do.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],s=e.split("\n"),a=s.length.toString().length+2,i=s.map(function(e,t){return di((t+1).toString(),a)+e}),o=0,l=0;l<i.length;l++)o=Math.max(i[l].length,o);var c=i.slice(0,r-1),d=i.slice(r-1,r),u=i.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+di(d[0],o),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var To,Io,Do=/ERROR: [0-9]+:([0-9]+):/g;function Lo(e,t){return Zo(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function Po(e,t,n){if(Bo(e,t,function(){return e.linkProgram(n)}),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Ro(e,t,n){if(Bo(e,t,function(){return e.validateProgram(n)}),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function Uo(e,t,n){var r=Zo(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Bo(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),Bo(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function Oo(e,t,n){var r=Zo(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Bo(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),Bo(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function Mo(e,t){return Zo(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function Qo(e,t){var n=Ha().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function Ho(e,t){return Zo(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function zo(e,t,n,r,s,a,i,o){var l=e.getAttribLocation(n,r);return-1!==l&&(Bo(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,s)}),Bo(e,t,function(){return e.vertexAttribPointer(l,a,e.FLOAT,!1,i,o)}),Bo(e,t,function(){return e.enableVertexAttribArray(l)}),!0)}function Wo(e,t,n,r){$o(e,r),Bo(e,t,function(){return e.activeTexture(e.TEXTURE0+r)}),Bo(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)})}function Vo(e,t,n,r){return Zo(e,t,function(){return e.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function Ko(e,t,n){return e.getUniformLocation(t,n)}function Go(e,t,n,r,s,a){Bo(e,t,function(){return Wo(e,t,r,a)}),Bo(e,t,function(){return e.uniform1i(s,a)})}function qo(e,t,n,r){Bo(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),Bo(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)})}function Xo(e,t,n){Bo(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),Bo(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function Yo(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Jo(e,t))}function Jo(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Zo(e,t,n,r){var s=Bo(e,t,function(){return n()});if(null==s)throw new Error(r);return s}function $o(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function el(e,t){return void 0===t&&(t=2),ai(e.slice(0,e.length-t))}function tl(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function nl(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[el(e)].concat(tl(e))),t}function rl(e,t){var n;void 0===t&&(t=!1);var r=Ha().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map(function(t,n){return n>=e.length-2?$a(e[n]):e[n]})).length&&(e=[2,e[0]])),2!==e.length){var s=fi(e);e=s.newShape}var a=ai(e);if(e.length<=1&&a<=r)return[1,a];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var i=el(e),o=2,l=2;return e.length&&(o=(n=tl(e))[0],l=n[1]),ci(a=i*(o/2)*(l/2)).map(function(e){return 2*e})}return ci(a)}function sl(e){return e%2==0}function al(e,t){if(ii(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(sl(n)&&sl(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&sl(e[0])&&sl(t[0])}function il(e){if(null==To){var t=yo(e);To=t.getParameter(t.MAX_TEXTURE_SIZE)}return To}function ol(e){if(null==Io){var t=yo(e);Io=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Io)}function ll(e){if(0===e)return 0;var t=yo(e);return cl(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:cl(t,"EXT_disjoint_timer_query")?1:0}function cl(e,t){return null!=e.getExtension(t)}function dl(e){try{if(null!=yo(e))return!0}catch(e){return!1}return!1}function ul(e){if(0===e)return!1;var t=yo(e);if(1===e){if(!cl(t,"OES_texture_float"))return!1}else if(!cl(t,"EXT_color_buffer_float"))return!1;return Al(t)}function hl(e){if(0===e)return!1;var t=yo(e);if(1!==e){if(cl(t,"EXT_color_buffer_float"))return Al(t);if(cl(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=Co(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(s),a}(t,n)}return!1}return!!cl(t,"OES_texture_float")&&!!cl(t,"WEBGL_color_buffer_float")&&Al(t)}function Al(e){var t=Co(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),s}function fl(e){return 2===e&&null!=yo(e).fenceSync}var pl=Object.freeze({callAndCheck:Bo,canBeRepresented:ko,getWebGLErrorMessage:So,getExtensionOrThrow:_o,createVertexShader:Eo,createFragmentShader:Fo,createProgram:Lo,linkProgram:Po,validateProgram:Ro,createStaticVertexBuffer:Uo,createStaticIndexBuffer:Oo,getNumChannels:function(){return 2===Ha().getNumber("WEBGL_VERSION")?1:4},createTexture:Mo,validateTextureSize:Qo,createFramebuffer:Ho,bindVertexBufferToProgramAttribute:zo,bindTextureUnit:Wo,unbindTextureUnit:function(e,t,n){$o(e,n),Bo(e,t,function(){return e.activeTexture(e.TEXTURE0+n)}),Bo(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:Vo,getProgramUniformLocation:Ko,bindTextureToProgramUniformSampler:Go,bindCanvasToFramebuffer:function(e,t){Bo(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Bo(e,t,function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)}),Bo(e,t,function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)})},bindColorTextureToFramebuffer:qo,unbindColorTextureFromFramebuffer:Xo,validateFramebuffer:Yo,getFramebufferErrorMessage:Jo,getBatchDim:el,getRowsCols:tl,getShapeAs3D:nl,getTextureShapeFromLogicalShape:rl,isReshapeFree:al,getWebGLMaxTextureSize:il,resetMaxTextureSize:function(){To=null},resetMaxTexturesInShader:function(){Io=null},getMaxTexturesInShader:ol,getWebGLDisjointQueryTimerVersion:ll,hasExtension:cl,isWebGLVersionEnabled:dl,isCapableOfRenderingToFloatTexture:ul,isDownloadFloatTextureEnabled:hl,isWebGLFenceEnabled:fl}),ml=Ha();function gl(e){Ha().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function xl(e,t){return ho.tidy(e,t)}function vl(e){oo(e).forEach(function(e){return e.dispose()})}function bl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ha().getBool("IS_TEST")||console.warn.apply(console,e)}function yl(e,t){var n=e;if(bi(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||bi(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Ha().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||bi(t)){ti(n.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"}),ti(t.length===n[0],function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"});for(var s=n.slice(1),a=0;a<t.length;++a)e(t[a],s,r.concat(a))}else ti(0===n.length,function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"})}(e,r,[]),r}function wl(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function Nl(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof Xi)return wl(r,e.dtype,t,n),e;var s=Bi(e);if("string"!==s&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),wl(r,s,t,n),null==e||!bi(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var a=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var i=yl(e,s);bi(e)||Array.isArray(e)||(e=[e]);var o="string"!==s?Ei(e,s,Ha().getBool("DEBUG")):si(e,[],!0);return ho.makeTensor(o,i,s)}function jl(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(e,r){return Nl(e,t+"["+r+"]",n)},r)}function Cl(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Bl(e,t,n){for(var r=e.length+t.length,s=[],a=0,i=0,o=0;o<r;o++)-1===n.indexOf(o)?s.push(e[a++]):s.push(t[i++]);return s}function kl(e,t){for(var n=[],r=e.length,s=0;s<r;s++)-1===t.indexOf(s)&&n.push(e[s]);return[n,t.map(function(t){return e[t]})]}function Sl(e,t){return Bl(e,t.map(function(e){return 1}),t)}function _l(e,t,n){ti(Cl(t,n),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."})}function El(e,t){if(Cl(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(function(e){return n.push(e)}),n}function Fl(e){return e.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function Tl(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function Il(e,t){var n=e[0].length;e.forEach(function(e,t){ti(e.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"})}),ti(t>=0&&t<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=e[0];e.forEach(function(e,s){for(var a=0;a<n;a++)ti(a===t||e[a]===r[a],function(){return"Error in concat"+n+"D: Shape of tensors["+s+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+s+"."})})}function Dl(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function Ll(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ho.startScope(n);try{var s=r.apply(void 0,e);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ho.endScope(s),s}catch(e){throw ho.endScope(null),e}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}ml.registerFlag("HAS_WEBGL",function(){return ml.getNumber("WEBGL_VERSION")>0}),ml.registerFlag("WEBGL_VERSION",function(){return dl(2)?2:dl(1)?1:0}),ml.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return 2===ml.get("WEBGL_VERSION")}),ml.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),ml.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),ml.registerFlag("WEBGL_PACK",function(){return ml.getBool("HAS_WEBGL")}),ml.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return ml.getBool("WEBGL_PACK")}),ml.registerFlag("WEBGL_PACK_CLIP",function(){return ml.getBool("WEBGL_PACK")}),ml.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),ml.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return ml.getBool("WEBGL_PACK")}),ml.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return ml.getBool("WEBGL_PACK")}),ml.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return ml.getBool("WEBGL_PACK")}),ml.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return ml.getBool("WEBGL_PACK")}),ml.registerFlag("WEBGL_PACK_REDUCE",function(){return ml.getBool("WEBGL_PACK")}),ml.registerFlag("WEBGL_LAZILY_UNPACK",function(){return ml.getBool("WEBGL_PACK")}),ml.registerFlag("WEBGL_CONV_IM2COL",function(){return ml.getBool("WEBGL_PACK")}),ml.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return il(ml.getNumber("WEBGL_VERSION"))}),ml.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return ol(ml.getNumber("WEBGL_VERSION"))}),ml.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=ml.getNumber("WEBGL_VERSION");return 0===e?0:ll(e)}),ml.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return ml.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),ml.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return ul(ml.getNumber("WEBGL_VERSION"))}),ml.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!ml.getBool("WEBGL_FORCE_F16_TEXTURES")&&ml.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),ml.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return hl(ml.getNumber("WEBGL_VERSION"))}),ml.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return fl(ml.getNumber("WEBGL_VERSION"))}),ml.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return ml.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),qi=gl;var Pl=Ll({complex_:function(e,t){var n=Nl(e,"real","complex"),r=Nl(t,"imag","complex");return ni(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),ho.runKernelFunc(function(e){return e.complex(n,r)},{$real:n,$imag:r})}}),Rl=Ll({real_:function(e){var t=Nl(e,"input","real");return ho.runKernelFunc(function(e){return e.real(t)},{$input:t})}}),Ul=Ll({imag_:function(e){var t=Nl(e,"input","imag");return ho.runKernelFunc(function(e){return e.imag(t)},{$input:t})}});function Ol(e,t,n){return Ml(e,t,yl(e,n),n)}function Ml(e,t,n,r){if(null==r&&(r=Bi(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!bi(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Li(t);var s=ai(t),a=ai(n);ti(s===a,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+s+" values but has "+a});for(var i=0;i<n.length;++i){var o=n[i],l=i!==n.length-1||o!==ai(t.slice(i));ti(n[i]===t[i]||!l,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "})}}return bi(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?Ei(e,r,Ha().getBool("DEBUG")):si(e,[],!0),ho.makeTensor(e,t,r)}function Ql(e,t){if((bi(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&bi(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ml(e,[],[],t)}function Hl(e,t){ri(e);var n=yl(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ml(e,null,n,t)}function zl(e,t,n){if(ri(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=yl(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ml(e,t,r,n)}function Wl(e,t,n){if(ri(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=yl(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ml(e,t,r,n)}function Vl(e,t,n){if(ri(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=yl(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ml(e,t,r,n)}function Kl(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Kl(e,"float32"),r=Gl(e,"float32");return Pl(n,r)}var s=Ti(ai(e),t);return ho.makeTensor(s,e,t)}function Gl(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Gl(e,"float32"),r=Gl(e,"float32");return Pl(n,r)}var s=Ii(ai(e),t);return ho.makeTensor(s,e,t)}function ql(e,t,n){return ho.runKernelFunc(function(r){return r.fill(e,t,n)},{})}function Xl(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Gl([0],r);var s=Ii(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),s[0]=e;for(var a=1;a<s.length;a++)s[a]=s[a-1]+n;return Hl(s,r)}var Yl=Ll({onesLike_:function(e){var t=Nl(e,"x","onesLike");if("complex64"===t.dtype){var n=Yl(Rl(t)),r=Jl(Ul(t));return Pl(n,r)}return ho.runKernelFunc(function(e){return e.onesLike(t)},{$x:t},function(e,t){return{$x:function(){return Jl(e)}}})}}),Jl=Ll({zerosLike_:function(e){var t=Nl(e,"x","zerosLike");return ho.runKernelFunc(function(e){return e.zerosLike(t)},{$x:t},function(e,t){return{$x:function(){return Jl(e)}}})}}),Zl=Ll({concat_:function(e,t){void 0===t&&(t=0),ti(e.length>=1,function(){return"Pass at least one tensor to concat"});var n=jl(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach(function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")}),t=Ai(t,n[0].shape)[0];var r=Dl(n.map(function(e){return e.shape}),t);if(0===ai(r))return Ol([],r);if(1===(n=n.filter(function(e){return e.size>0})).length)return n[0];var s=n.map(function(e){return e.shape});Il(s,t);var a=n,i={axis:t};return ho.runKernelFunc(function(e){return e.concat(n,t)},a,function(e){var n=s.map(function(e){return e[t]});return rc(e,n,t).map(function(e){return function(){return e}})},"Concat",i)}}),$l=Ll({concat1d_:function(e){return Zl(e,0)}}),ec=Ll({concat2d_:function(e,t){return Zl(e,t)}}),tc=Ll({concat3d_:function(e,t){return Zl(e,t)}}),nc=Ll({concat4d_:function(e,t){return Zl(e,t)}}),rc=Ll({split_:function(e,t,n){void 0===n&&(n=0);var r,s=Nl(e,"x","split");return n=Ai(n,s.shape)[0],"number"==typeof t?(ti(s.shape[n]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(s.shape[n]/t)):(ti(s.shape[n]===t.reduce(function(e,t){return e+t}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),ho.runKernelFunc(function(e){return e.split(s,r,n)},{$x:s},function(e){return{$x:function(){return Zl(e,n)}}})}});function sc(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;var ac=sc(function(e){!function(e,t){function n(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function r(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var s=new n(e),a=t&&t.state,i=s.next;return i.int32=function(){return 4294967296*s.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,a&&("object"==typeof a&&r(a,s),i.state=function(){return r(s,{})}),i}t&&t.exports?t.exports=s:this.alea=s}(0,e)}),ic=sc(function(e){!function(e,t){function n(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var s=new n(e),a=t&&t.state,i=function(){return(s.next()>>>0)/4294967296};return i.double=function(){do{var e=((s.next()>>>11)+(s.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=s.next,i.quick=i,a&&("object"==typeof a&&r(a,s),i.state=function(){return r(s,{})}),i}t&&t.exports?t.exports=s:this.xor128=s}(0,e)}),oc=sc(function(e){!function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var s=new n(e),a=t&&t.state,i=function(){return(s.next()>>>0)/4294967296};return i.double=function(){do{var e=((s.next()>>>11)+(s.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=s.next,i.quick=i,a&&("object"==typeof a&&r(a,s),i.state=function(){return r(s,{})}),i}t&&t.exports?t.exports=s:this.xorwow=s}(0,e)}),lc=sc(function(e){!function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.x,s=t.i;return e=r[s],n=(e^=e>>>7)^e<<24,n^=(e=r[s+1&7])^e>>>10,n^=(e=r[s+3&7])^e>>>3,n^=(e=r[s+4&7])^e<<7,e=r[s+7&7],n^=(e^=e<<13)^e<<9,r[s]=n,t.i=s+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function r(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var s=new n(e),a=t&&t.state,i=function(){return(s.next()>>>0)/4294967296};return i.double=function(){do{var e=((s.next()>>>11)+(s.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=s.next,i.quick=i,a&&(a.x&&r(a,s),i.state=function(){return r(s,{})}),i}t&&t.exports?t.exports=s:this.xorshift7=s}(0,e)}),cc=sc(function(e){!function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.w,s=t.X,a=t.i;return t.w=r=r+1640531527|0,n=s[a+34&127],e=s[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=s[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,s,a,i,o=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),s=0,a=-32;a<l;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,s=0==(n=o[127&a]^=r+i)?s+1:0);for(s>=128&&(o[127&(t&&t.length||0)]=-1),s=127,a=512;a>0;--a)r=o[s+34&127],n=o[s=s+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,o[s]=r^n;e.w=i,e.X=o,e.i=s}(t,e)}function r(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var s=new n(e),a=t&&t.state,i=function(){return(s.next()>>>0)/4294967296};return i.double=function(){do{var e=((s.next()>>>11)+(s.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=s.next,i.quick=i,a&&(a.X&&r(a,s),i.state=function(){return r(s,{})}),i}t&&t.exports?t.exports=s:this.xor4096=s}(0,e)}),dc=sc(function(e){!function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,s=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^s,s=s-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^s,t.a=s-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var s=new n(e),a=t&&t.state,i=function(){return(s.next()>>>0)/4294967296};return i.double=function(){do{var e=((s.next()>>>11)+(s.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=s.next,i.quick=i,a&&("object"==typeof a&&r(a,s),i.state=function(){return r(s,{})}),i}t&&t.exports?t.exports=s:this.tychei=s}(0,e)}),uc=sc(function(e){!function(t,r){var s,a=this,i=256,o="random",l=r.pow(i,6),c=r.pow(2,52),d=2*c,u=255;function h(e,n,u){var h=[],g=p(function e(t,n){var r,s=[],a=typeof t;if(n&&"object"==a)for(r in t)try{s.push(e(t[r],n-1))}catch(e){}return s.length?s:"string"==a?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,m(t)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(i):(e=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(e)),m(e)}catch(e){var n=a.navigator,r=n&&n.plugins;return[+new Date,a,r,a.screen,m(t)]}}():e,3),h),x=new A(h),v=function(){for(var e=x.g(6),t=l,n=0;e<c;)e=(e+n)*i,t*=i,n=x.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return v.int32=function(){return 0|x.g(4)},v.quick=function(){return x.g(4)/4294967296},v.double=v,p(m(x.S),t),(n.pass||u||function(e,t,n,s){return s&&(s.S&&f(s,x),e.state=function(){return f(x,{})}),n?(r[o]=e,t):e})(v,g,"global"in n?n.global:this==r,n.state)}function A(e){var t,n=e.length,r=this,s=0,a=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);s<i;)o[s]=s++;for(s=0;s<i;s++)o[s]=o[a=u&a+e[s%n]+(t=o[s])],o[a]=t;(r.g=function(e){for(var t,n=0,s=r.i,a=r.j,o=r.S;e--;)t=o[s=u&s+1],n=n*i+o[u&(o[s]=o[a=u&a+t])+(o[a]=t)];return r.i=s,r.j=a,n})(i)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){for(var n,r=e+"",s=0;s<r.length;)t[u&s]=u&(n^=19*t[u&s])+r.charCodeAt(s++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(r["seed"+o]=h,p(r.random(),t),e.exports){e.exports=h;try{s=n(8082)}catch(e){}}}([],Math)});uc.alea=ac,uc.xor128=ic,uc.xorwow=oc,uc.xorshift7=lc,uc.xor4096=cc,uc.tychei=dc;var hc=uc.alea,Ac=function(){function e(e,t,n,r,s){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=s||Math.random();this.random=hc(a.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var s=void 0,a=void 0,i=void 0;do{i=(s=2*this.random()-1)*s+(a=2*this.random()-1)*a}while(i>=1||0===i);var o=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*s*o,n=this.mean+this.stdDev*a*o,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),fc=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var s=r||Math.random();this.randu=hc(s.toString()),this.randn=new Ac(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,s,a;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-a+Math.log(a)),(s=this.randu())<t||Math.log(s)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),pc=function(){function e(e,t,n,r){var s=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==s.dtype||"float32"===s.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=hc(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function mc(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",Li(e),new Vi(e,t,n)}var gc=Ll({batchToSpaceND_:function(e,t,n){var r=Nl(e,"x","batchToSpaceND"),s=t.reduce(function(e,t){return e*t});return ti(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),ti(n.length===t.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length}),ti(r.shape[0]%s==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+s}),ho.runKernelFunc(function(e){return e.batchToSpaceND(r,t,n)},{$x:r},function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}})}}),xc=Ll({broadcastTo_:function(e,t){var n=Nl(e,"broadcastTo","x"),r=n.shape;if(t.some(function(e){return!(e>0)||e%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var s=n.shape.slice();s.length<t.length;)s.unshift(1);n=n.reshape(s)}for(var a=Array.from(t),i=t.length-1;i>=0;i--)if(n.shape[i]===t[i])a[i]=1;else if(1!==n.shape[i])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var o=a.map(function(e,t){return e>1?t:-1}).filter(function(e){return e>=0});return 0===o.length?n.clone():ho.runKernelFunc(function(e){return e.tile(n,a)},{input:n},function(e){return{input:function(){return e.sum(o,!0)}}})}}),vc=Ll({cast_:function(e,t){var n=Nl(e,"x","cast");if(!xi(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return ho.runKernelFunc(function(e){return e.cast(n,t)},{x:n},function(e){return{x:function(){return e.clone()}}},"Cast",r)}}),bc=Ll({clone_:function(e){var t=Nl(e,"x","clone",null);return ho.runKernelFunc(function(){return ho.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(e){return{$x:function(){return e.toFloat()}}})}}),yc=Ll({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var s=Nl(e,"x","cumsum"),a=El([t|=0],s.rank),i=s;null!=a&&(i=s.transpose(a));var o=Tl(1,s.rank)[0],l=ho.runKernelFunc(function(e){return e.cumsum(i,o,n,r)},{permutedX:i},function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}});return null!=a&&(l=l.transpose(a)),l}}),wc=Ll({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=Nl(e,"x","depthToSpace"),s="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];return ti(s*t>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+s+" and "+t+"  for depthToSpace with input shape\n      "+r.shape}),ti(a*t>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+" for depthToSpace with input shape\n          "+r.shape}),ti(i%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+i+" for depthToSpace with input shape "+r.shape}),ho.runKernelFunc(function(e){return e.depthToSpace(r,t,n)},{$x:r})}}),Nc=Ll({expandDims_:function(e,t){void 0===t&&(t=0);var n=Nl(e,"x","expandDims",null);ti(t<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return t<0&&(ti(-(n.rank+1)<=t,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),t=n.rank+t+1),r.splice(t,0,1),Pc(n,r)}}),jc=Ll({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var s=mc([e,t],r),a=e<=t?e:t,i=0;i<a;++i)s.set(1,i,i);var o=s.toTensor().as2D(e,t);if(null==n)return o;if(1===n.length)return Mc(Nc(o,0),[n[0],1,1]);if(2===n.length)return Mc(Nc(Nc(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return Mc(Nc(Nc(Nc(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),Cc=Ll({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var s=Nl(e,"logits","multinomial"),a=s.size,i=s.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var o=1===i?s.as2D(1,-1):s,l=ho.runKernelFunc(function(e){return e.multinomial(o,r,t,n)},{logits2D:o});return 1===i?l.as1D():l}}),Bc=Ll({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var s=Nl(e,"indices","oneHot","int32"),a=s.shape.concat([t]);return s=s.flatten(),ho.runKernelFunc(function(e){return e.oneHot(s,t,n,r)},{$indices:s},function(e){return{$indices:function(){return Gl(s.shape,"float32")}}}).reshape(a)}}),kc=Ll({pad_:function(e,t,n){void 0===n&&(n=0);var r=Nl(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var s={paddings:t,constantValue:n};return ho.runKernelFunc(function(e){return e.pad(r,t,n)},{x:r},function(e){var n=t.map(function(e){return e[0]});return{x:function(){return e.slice(n,r.shape)}}},"PadV2",s)}}),Sc=Ll({pad1d_:function(e,t,n){return void 0===n&&(n=0),ti(2===t.length,function(){return"Invalid number of paddings. Must be length of 2."}),kc(e,[t],n)}}),_c=Ll({pad2d_:function(e,t,n){return void 0===n&&(n=0),ti(2===t.length&&2===t[0].length&&2===t[1].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),kc(e,t,n)}}),Ec=Ll({pad3d_:function(e,t,n){return void 0===n&&(n=0),ti(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),kc(e,t,n)}}),Fc=Ll({pad4d_:function(e,t,n){return void 0===n&&(n=0),ti(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),kc(e,t,n)}}),Tc=Ll({rand_:function(e,t,n){var r=ai(e),s=null;if(null==n||"float32"===n)s=new Float32Array(r);else if("int32"===n)s=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);s=new Uint8Array(r)}for(var a=0;a<r;a++)s[a]=t();return ho.makeTensor(s,e,n)}}),Ic=Ll({randomNormal_:function(e,t,n,r,s){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new Ac(t,n,r,!1,s),i=mc(e,r),o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}}),Dc=Ll({randomGamma_:function(e,t,n,r,s){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var a=new fc(t,n,r,s),i=mc(e,r),o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}}),Lc=Ll({randomUniform_:function(e,t,n,r,s){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var a=mc(e,r),i=new pc(t,n,null,s),o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}}),Pc=Ll({reshape_:function(e,t){var n=Nl(e,"x","reshape",null);t=hi(t,n.size),ti(n.size===ai(t),function(){return"new shape and old shape must have the same number of elements."});var r={shape:t};return ho.runKernelFunc(function(e){return e.reshape(n,t)},{x:n},function(e){return{x:function(){return e.reshape(n.shape)}}},"Reshape",r)}}),Rc=Ll({spaceToBatchND_:function(e,t,n){var r=Nl(e,"x","spaceToBatchND");return ti(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),ti(n.length===t.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length}),ti(r.shape.reduce(function(e,r,s){return s>0&&s<=t.length?e&&(r+n[s-1][0]+n[s-1][1])%t[s-1]==0:e},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()}),ho.runKernelFunc(function(e){return e.spaceToBatchND(r,t,n)},{$x:r},function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}})}}),Uc=Ll({squeeze_:function(e,t){var n=Nl(e,"x","squeeze");return Pc(n,fi(n.shape,t).newShape)}}),Oc=Ll({stack_:function(e,t){void 0===t&&(t=0);var n=jl(e,"tensors","stack");if(ti(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),1===n.length)return n[0].expandDims(t);var r=n[0].rank,s=n[0].shape,a=n[0].dtype;ti(t<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(e){ni(s,e.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(e){ti(a===e.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var i=n.map(function(e){return e.expandDims(t)});return Zl(i,t)}}),Mc=Ll({tile_:function(e,t){var n=Nl(e,"x","tile",null);ti(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."});var r=[n],s={reps:t};return ho.runKernelFunc(function(e,r){var s=e.tile(n,t);return r([n]),s},{x:n},function(e,n){var r=n[0];return{x:function(){var n=Jl(r);if(1===r.rank)for(var s=0;s<t[0];++s)n=n.add(e.slice([s*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(s=0;s<t[0];++s)for(var a=0;a<t[1];++a)n=n.add(e.slice([s*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(s=0;s<t[0];++s)for(a=0;a<t[1];++a)for(var i=0;i<t[2];++i)n=n.add(e.slice([s*r.shape[0],a*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(s=0;s<t[0];++s)for(a=0;a<t[1];++a)for(i=0;i<t[2];++i)for(var o=0;o<t[3];++o)n=n.add(e.slice([s*r.shape[0],a*r.shape[1],i*r.shape[2],o*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}},"Tile",s,r)}}),Qc=Ll({truncatedNormal_:function(e,t,n,r,s){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new Ac(t,n,r,!0,s),i=mc(e,r),o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}}),Hc=Ll({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=Nl(e,"x","unstack");ti(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),t<0&&(t+=n.shape.length);var r={axis:t};return ho.runKernelFunc(function(e){return e.unstack(n,t)},{x:n},function(e){return{x:function(){return Oc(e,t)}}},"Unpack",r)}});function zc(e,t,n,r){void 0===r&&(r=!0);var s=[];if(r)(s=s.concat(t.slice(0))).push(e[0]/n),s=s.concat(e.slice(1));else{s=s.concat(e[0]);for(var a=t.length,i=0;i<a;++i)s=s.concat([e[i+1]/t[i],t[i]]);s=s.concat(e.slice(a+1))}return s}function Wc(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var s=t+1;s<e;++s)s<=2*t?(r.push(s),r.push(s-(t+1))):r.push(s)}else{var a=[],i=[];for(s=1;s<e;++s)s>=2*t+1||s%2==1?i.push(s):a.push(s);r.push.apply(r,a),r.push(0),r.push.apply(r,i)}return r}function Vc(e,t,n,r){void 0===r&&(r=!0);var s=[];r?s.push(e[0]/n):s.push(e[0]*n);for(var a=1;a<e.length;++a)a<=t.length?r?s.push(t[a-1]*e[a]):s.push(e[a]/t[a-1]):s.push(e[a]);return s}function Kc(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Gc(e,t,n){for(var r=e.slice(0,1),s=0;s<n;++s)r.push(e[s+1]-t[s][0]-t[s][1]);return r}function qc(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],s=1,a=0;a<n.length-1;++a)s*=n[a];var i=e.shape,o=n.slice();o.pop();var l=1;for(a=r;a<e.rank;++a)l*=i[a],o.push(i[a]);var c=_i(e.shape).map(function(e){return e/l}).concat([1]).slice(0,r);return[o,s,l,c]}Object.freeze({prepareAndValidate:qc});function Xc(e){return e<=30?e:Si(e,Math.floor(Math.sqrt(e)))}function Yc(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,s=t.rank>1?t.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+s+".";if(n.rank<s)throw new Error(a+" update.rank < "+s+". ");if(e.length<r+(n.rank-s))throw new Error(a+" Output shape length < "+(r+(n.rank-s)));if(n.rank!==s+e.length-r)throw new Error(a+" update.rank != "+(s+e.length-r));for(var i=0;i<s;++i)if(n.shape[i]!==t.shape[i])throw new Error(a+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+t.shape[i]+").");for(i=0;i<n.rank-s;++i)if(n.shape[i+s]!==e[i+r])throw new Error(a+" updates.shape["+(i+s)+"] ("+n.shape[i+s]+") != shape["+(i+s)+"] ("+e[i+s]+")")}function Jc(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}Yc(n,t,e)}function Zc(e,t,n){for(var r=t.shape.length,s=r>1?t.shape[r-1]:1,a=n.length,i=1,o=s;o<a;++o)i*=n[o];var l=s<1?1:s;return{sliceRank:s,numUpdates:ai(t.shape)/l,sliceSize:i,strides:_i(n.slice(0,s)).concat([1]),outputSize:ai(n)}}Object.freeze({validateUpdateShape:Yc,validateInput:Jc,calculateShapes:Zc});function $c(e,t,n){ti(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),ti(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."});for(var r=function(r){ti(t[r]+n[r]<=e.shape[r],function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"})},s=0;s<e.rank;++s)r(s)}function ed(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function td(e,t,n){for(var r=[],s=0;s<e.length;s++)r[s]=Math.ceil((t[s]-e[s])/n[s]);return r}function nd(e,t,n,r,s){var a=t[s],i=n[s]||1;(e&1<<s||null==a)&&(a=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var o=r[s];return a<0&&(a+=o),Za(0,a,o-1)}function rd(e,t,n,r,s){var a=t[s],i=n[s]||1;(e&1<<s||null==a)&&(a=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var o=r[s];return a<0&&(a+=o),i>0?Za(0,a,o):Za(-1,a,o-1)}function sd(e,t,n){for(var r=n.length,s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(s=r+1;s<n.length;s++)if(t[s]>0||n[s]!==e[s])return!1;return!0}function ad(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}Object.freeze({assertParamsValid:$c,maskToAxes:ed,computeOutShape:td,startForAxis:nd,stopForAxis:rd,isSliceContinous:sd,computeFlatOffset:ad});function id(e){return ho.customGrad(e)}var od=Ll({softmax_:function(e,t){void 0===t&&(t=-1);var n=Nl(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return ho.runKernelFunc(function(e,r){var s=e.softmax(n,t);return r([s]),s},{logits:n},function(e,n){var r=n[0],s=e.mul(r);return{logits:function(){return s.sub(s.sum([t],!0).mul(r))}}},"Softmax",{dim:t},[],[!0])}}),ld=Ll({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=Nl(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return id(function(e,n){var r=e.max(t,!0),s=e.sub(r),a=s.toFloat().sub(s.exp().sum(t,!0).log());return n([a]),{value:a,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}})(n)}}),cd=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),dd=function(){function e(){}return e.prototype.time=function(e){return ud("time")},e.prototype.read=function(e){return ud("read")},e.prototype.readSync=function(e){return ud("readSync")},e.prototype.numDataIds=function(){return ud("numDataIds")},e.prototype.disposeData=function(e){return ud("disposeData")},e.prototype.write=function(e,t,n){return ud("write")},e.prototype.move=function(e,t,n,r){return ud("move")},e.prototype.memory=function(){return ud("memory")},e.prototype.floatPrecision=function(){return ud("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return ud("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,ud("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return ud("slice")},e.prototype.stridedSlice=function(e,t,n,r){return ud("stridedSlice")},e.prototype.unstack=function(e,t){return ud("unstack")},e.prototype.reverse=function(e,t){return ud("reverse")},e.prototype.concat=function(e,t){return ud("concat")},e.prototype.neg=function(e){return ud("neg")},e.prototype.add=function(e,t){return ud("add")},e.prototype.addN=function(e){return ud("addN")},e.prototype.subtract=function(e,t){return ud("subtract")},e.prototype.multiply=function(e,t){return ud("multiply")},e.prototype.realDivide=function(e,t){return ud("realDivide")},e.prototype.floorDiv=function(e,t){return ud("floorDiv")},e.prototype.sum=function(e,t){return ud("sum")},e.prototype.prod=function(e,t){return ud("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return ud("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return ud("argMin")},e.prototype.argMax=function(e,t){return ud("argMax")},e.prototype.equal=function(e,t){return ud("equal")},e.prototype.notEqual=function(e,t){return ud("notEqual")},e.prototype.less=function(e,t){return ud("less")},e.prototype.lessEqual=function(e,t){return ud("lessEqual")},e.prototype.greater=function(e,t){return ud("greater")},e.prototype.greaterEqual=function(e,t){return ud("greaterEqual")},e.prototype.logicalNot=function(e){return ud("logicalNot")},e.prototype.logicalAnd=function(e,t){return ud("logicalAnd")},e.prototype.logicalOr=function(e,t){return ud("logicalOr")},e.prototype.where=function(e){return ud("where")},e.prototype.select=function(e,t,n){return ud("select")},e.prototype.topk=function(e,t,n){return ud("topk")},e.prototype.min=function(e,t){return ud("min")},e.prototype.minimum=function(e,t){return ud("minimum")},e.prototype.mod=function(e,t){return ud("mod")},e.prototype.max=function(e,t){return ud("max")},e.prototype.maximum=function(e,t){return ud("maximum")},e.prototype.all=function(e,t){return ud("all")},e.prototype.any=function(e,t){return ud("any")},e.prototype.squaredDifference=function(e,t){return ud("squaredDifference")},e.prototype.ceil=function(e){return ud("ceil")},e.prototype.floor=function(e){return ud("floor")},e.prototype.round=function(e){return ud("round")},e.prototype.sign=function(e){return ud("sign")},e.prototype.isNaN=function(e){return ud("isNaN")},e.prototype.isInf=function(e){return ud("isInf")},e.prototype.isFinite=function(e){return ud("isFinite")},e.prototype.pow=function(e,t){return ud("pow")},e.prototype.exp=function(e){return ud("exp")},e.prototype.expm1=function(e){return ud("expm1")},e.prototype.softmax=function(e,t){return ud("softmax")},e.prototype.log=function(e){return ud("log")},e.prototype.log1p=function(e){return ud("log1p")},e.prototype.sqrt=function(e){return ud("sqrt")},e.prototype.rsqrt=function(e){return ud("rsqrt")},e.prototype.square=function(e){return ud("square")},e.prototype.reciprocal=function(e){return ud("reciprocal")},e.prototype.relu=function(e){return ud("relu")},e.prototype.relu6=function(e){return ud("relu6")},e.prototype.prelu=function(e,t){return ud("prelu")},e.prototype.elu=function(e){return ud("elu")},e.prototype.eluDer=function(e,t){return ud("eluDer")},e.prototype.selu=function(e){return ud("selu")},e.prototype.int=function(e){return ud("int")},e.prototype.clip=function(e,t,n){return ud("clip")},e.prototype.abs=function(e){return ud("abs")},e.prototype.complexAbs=function(e){return ud("complexAbs")},e.prototype.sigmoid=function(e){return ud("sigmoid")},e.prototype.softplus=function(e){return ud("softplus")},e.prototype.sin=function(e){return ud("sin")},e.prototype.cos=function(e){return ud("cos")},e.prototype.tan=function(e){return ud("tan")},e.prototype.asin=function(e){return ud("asin")},e.prototype.acos=function(e){return ud("acos")},e.prototype.atan=function(e){return ud("atan")},e.prototype.atan2=function(e,t){return ud("atan2")},e.prototype.sinh=function(e){return ud("sinh")},e.prototype.cosh=function(e){return ud("cosh")},e.prototype.tanh=function(e){return ud("tanh")},e.prototype.asinh=function(e){return ud("asinh")},e.prototype.acosh=function(e){return ud("acosh")},e.prototype.atanh=function(e){return ud("atanh")},e.prototype.erf=function(e){return ud("erf")},e.prototype.step=function(e,t){return ud("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ud("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return ud("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return ud("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return ud("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ud("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return ud("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return ud("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return ud("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return ud("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return ud("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return ud("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return ud("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return ud("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return ud("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return ud("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return ud("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return ud("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return ud("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return ud("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return ud("reshape")},e.prototype.cast=function(e,t){return ud("cast")},e.prototype.tile=function(e,t){return ud("tile")},e.prototype.pad=function(e,t,n){return ud("pad")},e.prototype.transpose=function(e,t){return ud("transpose")},e.prototype.gather=function(e,t,n){return ud("gather")},e.prototype.gatherND=function(e,t){return ud("gatherND")},e.prototype.scatterND=function(e,t,n){return ud("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return ud("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return ud("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return ud("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return ud("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return ud("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return ud("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,s,a){return ud("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,s){return ud("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,s,a,i){return ud("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return ud("multinomial")},e.prototype.oneHot=function(e,t,n,r){return ud("oneHot")},e.prototype.cumsum=function(e,t,n,r){return ud("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,s){return ud("nonMaxSuppression")},e.prototype.fft=function(e){return ud("fft")},e.prototype.ifft=function(e){return ud("ifft")},e.prototype.complex=function(e,t){return ud("complex")},e.prototype.real=function(e){return ud("real")},e.prototype.imag=function(e){return ud("imag")},e.prototype.cropAndResize=function(e,t,n,r,s,a){return ud("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return ud("depthToSpace")},e.prototype.split=function(e,t,n){return ud("split")},e.prototype.sparseToDense=function(e,t,n,r){return ud("sparseToDense")},e.prototype.diag=function(e){return ud("diag")},e.prototype.fill=function(e,t,n){return ud("fill")},e.prototype.onesLike=function(e){return ud("onesLike")},e.prototype.zerosLike=function(e){return ud("zerosLike")},e.prototype.linspace=function(e,t,n){return ud("linspace")},e.prototype.dispose=function(){return ud("dispose")},e}();function ud(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function hd(e,t){for(var n=e.length,r=[],s=0;s<n;s++){var a=n-1-s,i=e[a]||1;(t[t.length-1-s]||1)>1&&1===i&&r.unshift(a)}return r}function Ad(e,t){for(var n=[],r=0;r<t.length;r++){var s=e[e.length-r-1],a=t.length-r-1,i=t[a];(null==s||1===s&&i>1)&&n.unshift(a)}return n}function fd(e,t){for(var n=[],r=Math.max(e.length,t.length),s=0;s<r;s++){var a=e[e.length-s-1];null==a&&(a=1);var i=t[t.length-s-1];if(null==i&&(i=1),1===a)n.unshift(i);else if(1===i)n.unshift(a);else{if(a!==i)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(a)}}return n}function pd(e,t,n,r,s,a,i){void 0===i&&(i="channelsLast");var o,l=bd(t),c=l[0],d=l[1];if("channelsLast"===i)o=[c,d,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);o=[c,d,e[1],e[1]]}return gd(e,o,n,r,s,a,!1,i)}function md(e,t,n,r,s,a,i){void 0===i&&(i="NDHWC");var o,l,c=yd(t),d=c[0],u=c[1],h=c[2];if("NDHWC"===i)l="channelsLast",o=[d,u,h,e[4],e[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat "+i);l="channelsFirst",o=[d,u,h,e[1],e[1]]}return xd(e,o,n,r,s,!1,l,a)}function gd(e,t,n,r,s,a,i,o){void 0===i&&(i=!1),void 0===o&&(o="channelsLast");var l=[-1,-1,-1,-1],c=l[0],d=l[1],u=l[2],h=l[3];if("channelsLast"===o)c=e[0],d=e[1],u=e[2],h=e[3];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);c=e[0],h=e[1],d=e[2],u=e[3]}var A,f=t[0],p=t[1],m=t[3],g=bd(n),x=g[0],v=g[1],b=bd(r),y=b[0],w=b[1],N=wd(f,y),j=wd(p,w),C=function(e,t,n,r,s,a,i,o){var l,c,d;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var u=function(e,t,n,r,s){null==r&&(r=vd(e,t,n));var a=e[1],i=Nd((e[0]-t+2*r)/n+1,s);ti(oi(i),function(){return"The output # of rows ("+i+") must be an integer. Change the stride and/or zero pad parameters"});var o=Nd((a-t+2*r)/n+1,s);return ti(oi(o),function(){return"The output # of columns ("+o+") must be an integer. Change the stride and/or zero pad parameters"}),[i,o]}([t,n],a,r,e,o);c=u[0],d=u[1]}else if("same"===e){c=Math.ceil(t/r),d=Math.ceil(n/s);var h=Math.max(0,(c-1)*r+a-t),A=Math.max(0,(d-1)*s+i-n),f=Math.floor(h/2),p=h-f,m=Math.floor(A/2);l={top:f,bottom:p,left:m,right:A-m,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-a+1)/r),d=Math.ceil((n-i+1)/s)}return{padInfo:l,outHeight:c,outWidth:d}}(s,d,u,x,v,N,j,a),B=C.padInfo,k=C.outHeight,S=C.outWidth,_=i?m*h:m;return"channelsFirst"===o?A=[c,_,k,S]:"channelsLast"===o&&(A=[c,k,S,_]),{batchSize:c,dataFormat:o,inHeight:d,inWidth:u,inChannels:h,outHeight:k,outWidth:S,outChannels:_,padInfo:B,strideHeight:x,strideWidth:v,filterHeight:f,filterWidth:p,effectiveFilterHeight:N,effectiveFilterWidth:j,dilationHeight:y,dilationWidth:w,inShape:e,outShape:A,filterShape:t}}function xd(e,t,n,r,s,a,i,o){void 0===a&&(a=!1),void 0===i&&(i="channelsLast");var l=[-1,-1,-1,-1,-1],c=l[0],d=l[1],u=l[2],h=l[3],A=l[4];if("channelsLast"===i)c=e[0],d=e[1],u=e[2],h=e[3],A=e[4];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);c=e[0],A=e[1],d=e[2],u=e[3],h=e[4]}var f,p=t[0],m=t[1],g=t[2],x=t[4],v=yd(n),b=v[0],y=v[1],w=v[2],N=yd(r),j=N[0],C=N[1],B=N[2],k=wd(p,j),S=wd(m,C),_=wd(g,B),E=function(e,t,n,r,s,a,i,o,l,c,d){var u,h,A,f;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var p=function(e,t,n,r,s,a){null==s&&(s=vd(e,t,r));var i=e[1],o=e[2],l=Nd((e[0]-t+2*s)/r+1,a);ti(oi(l),function(){return"The output # of depths ("+l+") must be an integer. Change the stride and/or zero pad parameters"});var c=Nd((i-t+2*s)/r+1,a);ti(oi(c),function(){return"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters"});var d=Nd((o-t+2*s)/r+1,a);return ti(oi(d),function(){return"The output # of columns ("+d+") must be an integer. Change the stride and/or zero pad parameters"}),[l,c,d,1]}([t,n,r,1],o,0,s,e,d);h=p[0],A=p[1],f=p[2]}else if("same"===e){var m=((h=Math.ceil(t/s))-1)*s+o-t,g=((A=Math.ceil(n/a))-1)*a+l-n,x=((f=Math.ceil(r/i))-1)*i+c-r,v=Math.floor(m/2),b=m-v,y=Math.floor(g/2),w=g-y,N=Math.floor(x/2);u={top:y,bottom:w,left:N,right:x-N,front:v,back:b,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);u={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-o+1)/s),A=Math.ceil((n-l+1)/a),f=Math.ceil((r-c+1)/i)}return{padInfo:u,outDepth:h,outHeight:A,outWidth:f}}(s,d,u,h,b,y,w,k,S,_,o),F=E.padInfo,T=E.outDepth,I=E.outHeight,D=E.outWidth,L=a?x*A:x;return"channelsFirst"===i?f=[c,L,T,I,D]:"channelsLast"===i&&(f=[c,T,I,D,L]),{batchSize:c,dataFormat:i,inDepth:d,inHeight:u,inWidth:h,inChannels:A,outDepth:T,outHeight:I,outWidth:D,outChannels:L,padInfo:F,strideDepth:b,strideHeight:y,strideWidth:w,filterDepth:p,filterHeight:m,filterWidth:g,effectiveFilterDepth:k,effectiveFilterHeight:S,effectiveFilterWidth:_,dilationDepth:j,dilationHeight:C,dilationWidth:B,inShape:e,outShape:f,filterShape:t}}function vd(e,t,n,r){void 0===r&&(r=1);var s=wd(t,r);return Math.floor((e[0]*(n-1)-n+s)/2)}function bd(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function yd(e){return"number"==typeof e?[e,e,e]:e}function wd(e,t){return t<=1?e:e+(e-1)*(t-1)}function Nd(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function jd(e){var t=bd(e),n=t[0],r=t[1],s=t[2];return 1===n&&1===r&&1===s}function Cd(e,t){return jd(e)||jd(t)}function Bd(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function kd(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=Gl(e.shape),s=e.toFloat(),a=n.complex(s,r);return r.dispose(),s.dispose(),a}if(!vi(e.dtype,t))return ho.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var i=n.real(e);return a=i.cast(t),i.dispose(),a}if("int32"===t)return n.int(e);if("bool"===t){var o=Ql(0,e.dtype);return a=n.notEqual(e,o),o.dispose(),a}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function Sd(e,t){return ho.makeTensorFromDataId(e.dataId,t,e.dtype)}function _d(e,t,n){var r=(t-e)/(n-1),s=Ii(n,"float32");s[0]=e;for(var a=1;a<s.length;a++)s[a]=s[a-1]+r;return Hl(s,"float32")}Object.freeze({castTensor:kd,reshapeTensor:Sd,linspaceImpl:_d,upcastType:ro,axesAreInnerMostDims:Cl,combineLocations:Bl,computeOutAndReduceShapes:kl,expandShapeToKeepDim:Sl,assertAxesAreInnerMostDims:_l,getAxesPermutation:El,getUndoAxesPermutation:Fl,getInnerMostAxes:Tl,getBroadcastDims:hd,getReductionAxes:Ad,assertAndGetBroadcastShape:fd,assertParamsConsistent:Il,computeOutShape:Dl,computePool2DInfo:pd,computePool3DInfo:md,computeConv2DInfo:gd,computeConv3DInfo:xd,computeDefaultPad:vd,tupleValuesAreOne:jd,eitherStridesOrDilationsAreOne:Cd,convertConv2DDataFormat:Bd,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:Xc});function Ed(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Fd(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Td(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Id(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Dd(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,s=e.length,a=0,i=!1;r<s;){var o=n(t,e[a=r+(s-r>>>1)]);o>0?r=a+1:(s=a,i=!o)}return i?r:-r-1}(e,t,n||Ld)}(e,t,n),s=r<0?-(r+1):r;e.splice(s,0,t)}function Ld(e,t){return e>t?1:e<t?-1:0}function Pd(e,t,n,r,s){return Ud(e,t,n,r,s,0).selectedIndices}function Rd(e,t,n,r,s,a){var i=Ud(e,t,n,r,s,a,!0);return i.numValidOutputs.dispose(),{selectedIndices:i.selectedIndices,selectedScores:i.selectedScores}}function Ud(e,t,n,r,s,a,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);for(var l=Array.from(t).map(function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}}).filter(function(e){return e.score>s}).sort(Qd),c=a>0?-.5/a:0,d=[],u=[];d.length<n&&l.length>0;){var h=l.pop(),A=h.score,f=h.boxIndex,p=h.suppressBeginIndex;if(A<s)break;for(var m=!1,g=d.length-1;g>=p;--g){var x=Od(e,f,d[g]);if(x>=r){m=!0;break}if(h.score=h.score*Md(r,c,x),h.score<=s)break}h.suppressBeginIndex=d.length,m||(h.score===A?(d.push(f),u.push(h.score)):h.score>s&&Dd(l,h,Qd))}var v=d.length;return o&&(d.fill(0,v),u.fill(0,v)),{selectedIndices:Hl(d,"int32"),selectedScores:Hl(u,"float32"),numValidOutputs:Ql(v,"int32")}}function Od(e,t,n){var r=e.subarray(4*t,4*t+4),s=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),d=Math.min(s[1],s[3]),u=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),A=(o-a)*(l-i),f=(u-c)*(h-d);if(A<=0||f<=0)return 0;var p=Math.max(a,c),m=Math.max(i,d),g=Math.min(o,u),x=Math.min(l,h),v=Math.max(g-p,0)*Math.max(x-m,0);return v/(A+f-v)}function Md(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function Qd(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Hd(e,t,n){var r=new Array(e.rank).fill(0),s=e.shape.slice();return t.map(function(t){s[n]=t;var a=e.slice(r,s);return r[n]+=t,a})}function zd(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var s=mc(n,e.dtype);for(r=0;r<s.values.length;++r){for(var a=s.indexToLoc(r),i=new Array(e.rank),o=0;o<i.length;o++)i[o]=a[o]%e.shape[o];var l=e.locToIndex(i);s.values[r]=e.values[l]}return s.toTensor()}function Wd(e,t,n,r,s){for(var a=t[t.length-1],i=[e.length/a,a],o=i[0],l=i[1],c=pi(n,o*r),d=pi("int32",o*r),u=0;u<o;u++){for(var h=u*l,A=e.subarray(h,h+l),f=[],p=0;p<A.length;p++)f.push({value:A[p],index:p});f.sort(function(e,t){return t.value-e.value});var m=u*r,g=c.subarray(m,m+r),x=d.subarray(m,m+r);for(p=0;p<r;p++)g[p]=f[p].value,x[p]=f[p].index}var v=t.slice();return v[v.length-1]=r,[Ol(c,v,n),Ol(d,v,"int32")]}function Vd(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var s=mc(e,"int32"),a=mc([n.length,e.length],"int32");for(r=0;r<n.length;r++){var i=s.indexToLoc(n[r]),o=r*e.length;a.values.set(i,o)}return a.toTensor()}var Kd=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(e,t){return"T"+t});var n=[];this.variableNames.forEach(function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")});var r=this.variableNames.map(function(e){return"v"+e}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},Gd=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(e,t){return"T"+t});var n=[];this.variableNames.forEach(function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")});var r=this.variableNames.map(function(e){return"v"+e}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},qd=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,s=e.batchSize,a=e.inSize,i=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[s,i];var o="max"===t?">":"<",l=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+l+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+o+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function Xd(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(t){return e+"."+t})}function Yd(e,t){return 1===t?[e]:Xd(e,t)}function Jd(){var e,t,n,r,s,a,i,o,l,c;return 2===Ha().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",s="texture",a="outputColor",i="out vec4 outputColor;",o="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",s="texture2D",a="gl_FragColor",i="",o="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:s,output:a,defineOutput:i,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}function Zd(e,t,n){void 0===n&&(n="index");var r=_i(t);return r.map(function(t,s){return"int "+e[s]+" = "+n+" / "+t+"; "+(s===r.length-1?"int "+e[s+1]+" = "+n+" - "+e[s]+" * "+t:"index -= "+e[s]+" * "+t)+";"}).join("")}function $d(e){var t=_i(e).map(function(e){return e.toString()});return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var eu="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function tu(e,t,n,r){var s=[];e.forEach(function(e){var t=ai(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?s.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(s.push("uniform sampler2D "+e.name+";"),s.push("uniform int offset"+e.name+";"))});var a,i,o=s.join("\n"),l=e.map(function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?ru(e):nu(e);var s=e.shapeInfo.logicalShape,a=t.logicalShape;return s.length<=a.length&&(r+=n?function(e,t){var n,r=e.name,s=r.charAt(0).toUpperCase()+r.slice(1),a="get"+s+"AtOutCoords",i=e.shapeInfo.logicalShape.length,o=t.logicalShape.length,l=hd(e.shapeInfo.logicalShape,t.logicalShape),c=du(o),d=o-i,u=["x","y","z","w","u","v"];n=0===i?"":o<2&&l.length>=1?"coords = 0;":l.map(function(e){return"coords."+u[e+d]+" = 0;"}).join("\n");var h;h=o<2&&i>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords."+u[t+d]}).join(", ");var A="return outputValue;",f=1===ai(e.shapeInfo.logicalShape),p=1===ai(t.logicalShape);if(1!==i||f||p){if(f&&!p)A=1===o?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){var m=i-2,g=i-1;l.indexOf(m)>-1&&l.indexOf(g)>-1?A="return vec4(outputValue.x);":l.indexOf(m)>-1?A="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(g)>-1&&(A="return vec4(outputValue.xx, outputValue.zz);")}}else A="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+a+"() {\n      "+c+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+s+"("+h+");\n      "+A+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",a=t.texShape,i=e.shapeInfo.texShape,o=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===l&&null==e.shapeInfo.flatOffset&&ii(i,a))return"\n      float "+s+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var c,d=du(l),u=hd(e.shapeInfo.logicalShape,t.logicalShape),h=l-o,A=["x","y","z","w","u","v"];c=0===o?"":l<2&&u.length>=1?"coords = 0;":u.map(function(e){return"coords."+A[e+h]+" = 0;"}).join("\n");var f;return f=l<2&&o>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords."+A[t+h]}).join(", "),"\n    float "+s+"() {\n      "+d+" coords = getOutputCoords();\n      "+c+"\n      return get"+r+"("+f+");\n    }\n  "}(e,t)),r}(e,t,r)}).join("\n"),c=t.texShape,d=Jd(),u=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(d),h=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+su+"\n    "+au+"\n    "+iu+"\n  "}(d);return t.isPacked?(a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(ii(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,s=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=(a=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+s[0]+", "+s[1]+"));\n      int index = resTexRC.x * "+s[1]+" + resTexRC.y;\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+a+");\n      int c = imod(index, "+a+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),s=r*Math.ceil(e[e.length-2]/2),a=s,i="",o="b, r, c",l=2;l<e.length-1;l++)i="\n      int b"+l+" = index / "+(a*=e[e.length-l-1])+";\n      index -= b"+l+" * "+a+";\n    "+i,o="b"+l+", "+o;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+i+"\n\n      int b = index / "+s+";\n      index -= b * "+s+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+o+");\n    }\n  "}(e,t)}var n,r,s,a,i}(t.logicalShape,c),i=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(d)):(a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return ii(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=Zd(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=Zd(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=Zd(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=Zd(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,c),i=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(d)),r&&(h+=ou),[h,u,i,o,a,l,n].join("\n")}function nu(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,s=r[0],a=r[1];if(1===s&&1===a)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var i=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+i[0]+", "+i[1]+", "+lu(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+cu(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,s=r[0],a=r[1];if(1===a&&1===s)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var i=lu(t);return 1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+i+") + 0.5) / "+s+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===s?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+i+") + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+s+", "+a+", index + "+i+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e.shapeInfo.texShape;if(null!=s&&ii(t,s)){var a=s[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+s[1]+".0, "+a+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var i=fi(t),o=i.newShape,l=i.keptDims,c=o;if(c.length<t.length)return"\n      "+nu(uu(e,c))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+hu(["row","col"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+cu(e)+"\n      }\n    ";var d=s[0],u=s[1],h=lu(n);return 1===u?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+d+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===d?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+u+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+h+";\n    vec2 uv = uvFromFlat("+d+", "+u+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t[1]*t[2],a=t[2],i=fi(t),o=i.newShape,l=i.keptDims,c=o;if(c.length<t.length)return"\n        "+nu(uu(e,c))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+hu(["row","col","depth"],l)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+s+", "+a+", 1)));\n        "+cu(e)+"\n      }\n    ";var d=e.shapeInfo.texShape,u=d[0],h=d[1],A=e.shapeInfo.flatOffset;return h===s&&null==A?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+a+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+h+".0, "+u+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":h===a&&null==A?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+".0, "+u+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+s+" + col * "+a+" + depth + "+lu(n)+";\n        vec2 uv = uvFromFlat("+u+", "+h+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t[3],a=t[2]*s,i=t[1]*a,o=fi(t),l=o.newShape,c=o.keptDims;if(l.length<t.length)return"\n      "+nu(uu(e,l))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+hu(["row","col","depth","depth2"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+i+", "+a+", "+s+", 1)));\n        "+cu(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,u=e.shapeInfo.texShape,h=u[0],A=u[1];return A===i&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+a+", "+s+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+A+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":A===s&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+A+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+i+" + col * "+a+" +\n          depth * "+s+" + depth2;\n      vec2 uv = uvFromFlat("+h+", "+A+", index + "+lu(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t[4],a=t[3]*s,i=t[2]*a,o=t[1]*i,l=fi(t),c=l.newShape,d=l.keptDims;if(c.length<t.length)return"\n      "+nu(uu(e,c))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+hu(["row","col","depth","depth2","depth3"],d)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+o+", "+i+", "+a+", "+s+")) +\n          depth3;\n        "+cu(e)+"\n      }\n    ";var u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,A=h[0],f=h[1];return f===o&&null==u?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+i+", "+a+", "+s+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+f+".0, "+A+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":f===s&&null==u?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+f+".0, "+A+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+o+" + col * "+i+" + depth * "+a+" +\n          depth2 * "+s+" + depth3 + "+lu(n)+";\n      vec2 uv = uvFromFlat("+A+", "+f+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=fi(t),a=s.newShape,i=s.keptDims;if(a.length<t.length)return"\n      "+nu(uu(e,a))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+hu(["row","col","depth","depth2","depth3","depth4"],i)+");\n      }\n    ";var o=t[5],l=t[4]*o,c=t[3]*l,d=t[2]*c,u=t[1]*d;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+u+", "+d+", "+c+", "+l+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+o+", 1)));\n        "+cu(e)+"\n      }\n    ";var h=e.shapeInfo.flatOffset,A=e.shapeInfo.texShape,f=A[0],p=A[1];return p===u&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+d+", "+c+", "+l+", "+o+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===o&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+u+" + col * "+d+" + depth * "+c+" +\n          depth2 * "+l+" + depth3 * "+o+" + depth4 + "+lu(n)+";\n      vec2 uv = uvFromFlat("+f+", "+p+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function ru(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1))+"() {\n      return "+Jd().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,s=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=Jd();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+s[0]+", "+s[1]+", index);\n      return "+a.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e.shapeInfo.texShape,a=s[0],i=s[1],o=Jd();if(null!=s&&ii(t,s))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+i+".0, "+a+".0);\n\n        return "+o.texture2D+"("+n+", uv);\n      }\n    ";var l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+l[0]+", "+l[1]+", row, col);\n      return "+o.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e.shapeInfo.texShape,a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(1===t[0])return"\n        "+ru(uu(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+hu(["b","row","col"],[1,2])+");\n        }\n      ";var i=a[0],o=a[1],l=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+i+", "+o+", "+l*Math.ceil(t[1]/2)+", "+l+", b, row, col);\n      return "+Jd().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],o=i[0],l=i[1],c=Math.ceil(t[n-1]/2),d=c*Math.ceil(t[n-2]/2),u="int b, int row, int col",h="b * "+d+" + (row / 2) * "+c+" + (col / 2)",A=2;A<n-1;A++)u="int b"+A+", "+u,h="b"+A+" * "+(d*=t[n-A-1])+" + "+h;return"\n    vec4 "+s+"("+u+") {\n      int index = "+h+";\n      int texR = index / "+l+";\n      int texC = index - texR * "+l+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+l+", "+o+");\n      return "+Jd().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var su="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",au="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",iu="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ou="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function lu(e){return"offset"+e}function cu(e){var t=e.name,n=ai(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function du(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function uu(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function hu(e,t){return t.map(function(t){return e[t]}).join(", ")}var Au=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,ti(e.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var s=e[e.length-1],a=Math.ceil(s/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var i,o,l=this.outputShape,c=l.length,d=du(c),u=Yd("coords",c);if(1===a){var h=du(o=c+1);i="\n        "+h+" sourceLocR = "+h+"("+u.join()+", 0);\n        ++"+u[c-1]+";\n        "+h+" sourceLocG = "+h+"("+u.join()+", 0);\n        ++"+u[c-2]+";\n        "+h+" sourceLocA = "+h+"("+u.join()+", 0);\n        --"+u[c-1]+";\n        "+h+" sourceLocB = "+h+"("+u.join()+", 0);\n        --"+u[c-2]+";"}else o=c,i="\n        "+d+" sourceLocR = coords;\n        ++"+u[c-1]+";\n        "+d+" sourceLocG = coords;\n        ++"+u[c-2]+";\n        "+d+" sourceLocA = coords;\n        --"+u[c-1]+";\n        "+d+" sourceLocB = coords;\n        --"+u[c-2]+";";var A=["x","y","z","w","u","v"].slice(0,o),f="."+A[o-1],p=A.map(function(e){return"int "+e}),m=Yd("sourceLocR",o-1).concat("inIdx.r"),g=Yd("sourceLocG",o-1).concat("inIdx.g"),x=Yd("sourceLocB",o-1).concat("inIdx.b"),v=Yd("sourceLocA",o-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",y=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+m.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+x.join()+"),\n                             getBestIndicesAChannel("+v.join()+")));",w="vec4(\n            getAChannel("+m.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+x.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+v.join()+") : 0.)",N=r?"":"\n      float getBestIndicesAChannel("+p.join()+") {\n        return getChannel(getBestIndicesA("+A.join()+"),\n                                          vec2("+A.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+p.join()+") {\n        return getChannel(getA("+A.join()+"),\n                               vec2("+A.slice(-2).join()+"));\n      }\n      "+N+"\n      void main() {\n        "+d+" coords = getOutputCoords();\n        bool hasNextCol = "+u[c-1]+" < "+(l[c-1]-1)+";\n        bool hasNextRow = "+u[c-2]+" < "+(l[c-2]-1)+";\n        "+i+"\n        ivec4 srcIdx = ivec4(sourceLocR"+f+", sourceLocG"+f+",\n          sourceLocB"+f+", sourceLocA"+f+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+w+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+y+"\n          vec4 candidate = "+w+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+b+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},fu=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,s=e.strideWidth,a=e.dilationHeight,i=e.dilationWidth,o=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=o-1-e.padInfo.top,d=l-1-e.padInfo.left,u=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+c+", "+d+");\n      const float avgMultiplier = float("+u+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+o+";\n            wR += "+a+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+l+";\n            wC+= "+i+") {\n            float dyC = float(dyCCorner + wC) / "+s+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},pu=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,s=e.strideDepth,a=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,u=e.effectiveFilterHeight,h=e.effectiveFilterWidth,A=d-1-e.padInfo.front,f=u-1-e.padInfo.top,p=h-1-e.padInfo.left,m=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+A+", "+f+", "+p+");\n      const float avgMultiplier = float("+m+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+d+";\n            wD += "+o+") {\n          float dyD = float(dyDCorner + wD) / "+s+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+l+") {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+h+";\n                wC += "+c+") {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},mu=function(e,t,n,r,s,a){this.outputShape=[],this.variableNames=["x","mean","variance"],fd(e,t),fd(e,n);var i="0.0";null!=r&&(fd(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var o="1.0";null!=s&&(fd(e,s),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+i+";\n        float scale = "+o+";\n        float inv = scale * inversesqrt(variance + float("+a+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},gu=function(e,t,n,r,s,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],fd(e,t),fd(e,n);var i="vec4(0.0)";null!=r&&(fd(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var o="vec4(1.0)";null!=s&&(fd(e,s),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+i+";\n        vec4 scale = "+o+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+a+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},xu=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=fd(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},vu="return a + b;",bu="return a - b;",yu="return a * b;",wu="return (a < 0.) ? b * a : a;",Nu=function(e,t,n){this.variableNames=["A","B"],this.outputShape=fd(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},ju="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",Cu=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=fd(t,n);var s=this.outputShape.length,a="";if(r)if(0===s||1===ai(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(a="\n          "+du(s)+" coords = getOutputCoords();\n        ",1===s)a+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var i=Yd("coords",s);a+="\n            bool nextRowOutOfBounds =\n              ("+i[s-2]+" + 1) >= "+this.outputShape[s-2]+";\n            bool nextColOutOfBounds =\n              ("+i[s-1]+" + 1) >= "+this.outputShape[s-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+a+"\n\n        setOutput(result);\n      }\n    "},Bu=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,s){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(s,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(s,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),ku=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,s){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(s,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(s,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),Su=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},_u=function(e){this.outputShape=[],this.outputShape=Dl(e,1),this.variableNames=e.map(function(e,t){return"T"+t});var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var s=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+s+"));")}var a=t.length,i=t[t.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+i+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},Eu=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Dl(e,t);var n=this.outputShape,r=n.length,s=du(r),a=Yd("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(function(e,t){return"T"+t});var o=new Array(e.length-1);o[0]=e[0][t];for(var l=1;l<o.length;l++)o[l]=o[l-1]+e[l][t];var c=i[t],d=i.slice(-2),u=i.join(),h="if ("+c+" < "+o[0]+") {\n        return getChannel(\n            getT0("+u+"), vec2("+d.join()+"));\n        }";for(l=1;l<o.length;l++){var A=o[l-1];h+="\n        if ("+c+" < "+o[l]+"  && "+c+" >= "+o[l-1]+") {\n          return getChannel(\n            getT"+l+"("+Fu(i,c,A)+"),\n            vec2("+Fu(d,c,A)+"));\n        }"}var f=o.length,p=o[o.length-1];h+="\n        return getChannel(\n          getT"+f+"("+Fu(i,c,p)+"),\n          vec2("+Fu(d,c,p)+"));",this.userCode="\n      float getValue("+i.map(function(e){return"int "+e})+") {\n        "+h+"\n      }\n\n      void main() {\n        "+s+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+a+"), 0., 0., 0.);\n\n        "+a[r-1]+" = "+a[r-1]+" + 1;\n        if ("+a[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+a+");\n        }\n\n        "+a[r-2]+" = "+a[r-2]+" + 1;\n        if ("+a[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+a+");\n        }\n\n        "+a[r-1]+" = "+a[r-1]+" - 1;\n        if ("+a[r-2]+" < "+n[r-2]+" &&\n            "+a[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+a+");\n        }\n        setOutput(result);\n      }\n    "};function Fu(e,t,n){var r=e.indexOf(t);return e.map(function(e,t){return t===r?e+" - "+n:e}).join()}var Tu=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,s=e.padInfo.left,a="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+s+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+a+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Iu=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,s=e.strideWidth,a="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,l=a?1:2,c=a?2:3,d=a?3:1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+d+"];\n\n        ivec2 dyCorner = ivec2(coords["+l+"], coords["+c+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+s+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+a+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Du=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,s=e.padInfo.front,a=e.padInfo.top,i=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+s+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+a+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+i+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Lu=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,s=e.strideDepth,a=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.front,l=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+o+", "+l+", "+c+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+s+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Pu=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,s=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+a+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+s+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ru=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,s=e.strideWidth,a=t-1-e.padInfo.top,i=n-1-e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+s+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+o+"; dm++) {\n              int d2 = d1 * "+o+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Uu=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var s=e.padInfo.top,a=e.padInfo.left,i=e.strideHeight,o=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,d=e.filterHeight,u=e.filterWidth,h=4*Math.floor(e.inChannels/4),A=e.inChannels%4,f="channelsLast"===e.dataFormat,p=f?1:2,m=f?2:3,g=f?3:1,x="",v="";n&&(x=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",v="result = activation(result);");var b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+x+"\n\n      const ivec2 strides = ivec2("+i+", "+o+");\n      const ivec2 pads = ivec2("+s+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+g+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+p+"], coords["+m+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+d+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+f+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===A)+") {\n\n              if ("+f+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+h+") *\n                    getW(wR, wC, "+h+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+h+", xR, xC) *\n                    getW(wR, wC, "+h+", d2);\n              }\n\n            } else if ("+(2===A)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2)\n              );\n\n              if ("+f+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===A)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2),\n                getW(wR, wC, "+h+" + 2, d2)\n              );\n\n              if ("+f+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1),\n                  getX(batch, xR, xC, "+h+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC),\n                  getX(batch, "+h+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+b+"\n        "+v+"\n        setOutput(result);\n      }\n    "},Ou=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,s=e.strideDepth,a=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,u=e.filterHeight,h=e.filterWidth,A=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+s+", "+a+", "+i+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+d+"; wF++) {\n          int xF = xFCorner + wF * "+o+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+u+"; wR++) {\n            int xR = xRCorner + wR * "+l+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+h+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+A+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===f)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+A+") *\n                  getW(wF, wR, wC, "+A+", d2);\n              } else if ("+(2===f)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+A+"),\n                  getX(batch, xF, xR, xC, "+A+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+A+", d2),\n                  getW(wF, wR, wC, "+A+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===f)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+A+"),\n                  getX(batch, xF, xR, xC, "+A+" + 1),\n                  getX(batch, xF, xR, xC, "+A+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+A+", d2),\n                  getW(wF, wR, wC, "+A+" + 1, d2),\n                  getW(wF, wR, wC, "+A+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Mu=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var s=e.inHeight,a=e.inWidth,i=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,d=e.dilationHeight,u=e.dilationWidth,h=e.filterHeight,A=e.filterWidth,f=e.outChannels/e.inChannels,p="",m="";n&&(p=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",m="result = activation(result);");var g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+p+"\n\n      const ivec2 strides = ivec2("+l+", "+c+");\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+f+";\n        int q = d2 - d1 * "+f+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+h+"; wR++) {\n          int xR = xRCorner + wR * "+d+";\n\n          if (xR < 0 || xR >= "+s+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+A+"; wC++) {\n            int xC = xCCorner + wC * "+u+";\n\n            if (xC < 0 || xC >= "+a+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+g+"\n        "+m+"\n        setOutput(result);\n      }\n    "},Qu=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var s=e.inHeight,a=e.inWidth,i=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,d=e.dilationHeight,u=e.dilationWidth,h=e.filterHeight,A=e.filterWidth,f=A,p="int xR; int xC; int xCOffset;",m=0;m<h;m++)for(var g=0;g<A;g++)p+="\n          vec4 xTexelR"+m+"C"+2*g+" = vec4(0.);\n          vec4 wR"+m+"C"+g+" = vec4(0.);\n          vec4 xR"+m+"C"+g+" = vec4(0.);";for(m=0;m<h;m++)for(var x=0;x<f;x++){if(p+="\n          xR = xRCorner + "+m*d+";\n          xC = xCCorner + "+(g=2*x)*u+";\n        ",1===c){if(g<A&&(p+=o%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+s+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    xTexelR"+m+"C"+g+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+s+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+m+"C"+g+" = vec4(previous.zw, xTexelR"+m+"C"+g+".xy);\n                } else {\n                  xR"+m+"C"+g+" = vec4(0, 0, xTexelR"+m+"C"+g+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+s+" && xC >= 0 && xC < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = xTexelR"+m+"C"+g+";\n              ",g+1<A)){var v=o%2==0?$a(u):u;u%2==0&&o%2==1||u%2!=0&&o%2!=1?(p+="\n                  xCOffset = xC + "+o%2+" + "+v+";\n\n                  if(xR >= 0 && xR < "+s+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",u>1&&(p+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+s+" &&\n                      xCOffset >= 0 && xCOffset < "+a+") {\n                      xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+m+"C"+g+" = vec4(0.);\n                    }\n                  "),p+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".xy);\n                "):p+="\n                  xCOffset = xC + "+v+";\n\n                  if(xR >= 0 && xR < "+s+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+m+"C"+(g+1)+" = xTexelR"+m+"C"+(g+2)+";\n                "}}else g<A&&(p+="\n              if(xR >= 0 && xR < "+s+") {\n            ",o%2==1?(p+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+a+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n              ",g+1<A&&(p+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+a+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+m+"C"+(g+1)+" = vec4(xTexelR"+m+"C"+(g+2)+".xy, final.xy);\n                ")):(p+="\n                if(xC >= 0 && xC < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".xy, xTexelR"+m+"C"+(g+2)+".xy);\n              ",g+1<A&&(p+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n                ")),p+="}");g<A&&(p+="\n            vec4 wTexelR"+m+"C"+g+" = getW("+m+", "+g+", d1, q);\n            wR"+m+"C"+g+" = vec4(wTexelR"+m+"C"+g+".xz, wTexelR"+m+"C"+g+".xz);\n          ",g+1<A&&(p+="\n              vec4 wTexelR"+m+"C"+(g+1)+" = getW("+m+", "+(g+1)+", d1, q);\n              wR"+m+"C"+(g+1)+" =\n                vec4(wTexelR"+m+"C"+(g+1)+".xz, wTexelR"+m+"C"+(g+1)+".xz);"))}for(m=0;m<h;m++)for(g=0;g<A;g++)p+="dotProd += xR"+m+"C"+g+" * wR"+m+"C"+g+";";var b="",y="";n&&(b=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",y="result = activation(result);");var w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+b+"\n\n      const ivec2 strides = ivec2("+l+", "+c+");\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+p+"\n\n        vec4 result = dotProd;\n        "+w+"\n        "+y+"\n        setOutput(result);\n      }\n    "},Hu=function(e,t,n,r,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],l=e[3],c=t[0],d=n[0],u=n[1];this.outputShape=[c,d,u,l];var h="bilinear"===r?1:0,A=[i-1+".0",o-1+".0"],f=A[0],p=A[1],m=d>1?[""+(i-1)/(d-1),"(y2-y1) * height_ratio","y1*"+f+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+f],g=m[0],x=m[1],v=m[2],b=u>1?[""+(o-1)/(u-1),"(x2-x1) * width_ratio","x1*"+p+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+p],y=b[0],w=b[1],N=b[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+y+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+a+") {\n          return;\n        }\n\n        float height_scale = "+x+";\n        float width_scale = "+w+";\n\n        float in_y = "+v+";\n        if( in_y < 0.0 || in_y > "+f+" ) {\n          setOutput(float("+s+"));\n          return;\n        }\n        float in_x = "+N+";\n        if( in_x < 0.0 || in_x > "+p+" ) {\n          setOutput(float("+s+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+h+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},zu=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,s=e[e.length-1],a=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+s+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+du(r)+" coords = getOutputCoords();\n        int end = "+Wu(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+s+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+a+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+Wu(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function Wu(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var Vu=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=po.DENSE;var t=No(e),n=Jd();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Zd(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},Ku=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=po.DENSE;var t=No(e),n=Jd();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Zd(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},Gu=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),qu=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},Xu=function(e){this.variableNames=["A"],this.outTexUsage=mo.DOWNLOAD;var t=Jd();this.outputShape=e,this.userCode="\n      "+eu+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},Yu=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=mo.DOWNLOAD;var t=Jd();this.outputShape=e,this.userCode="\n      "+eu+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},Ju=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=Jd(),s=t[0],a=t[1];this.outputShape=e;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode="\n      "+$d(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+a+";\n        int c = imod(flatIndex, "+a+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+s+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+i+", 0., 0., 0.);\n      }\n    "},Zu=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Jd(),s=t[0],a=t[1];this.outputShape=e;var i="",o="result";n&&(o="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var c=0;c<=1;c++){var d=2*l+c;i+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+e[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+l+" < "+e[1]+") {\n              localCoords[1] += "+l+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+a+";\n              c = imod(flatIndex, "+a+");\n              uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+s+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+d+"] = values[0];\n              } else if(offset == 1) {\n                result["+d+"] = values[1];\n              } else if(offset == 2) {\n                result["+d+"] = values[2];\n              } else {\n                result["+d+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+$d(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+i+"\n\n        "+r.output+" = "+o+";\n      }\n    "},$u=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var s=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+s+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+a+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},eh=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),th=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var s=du(this.rank),a=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],a=0;a<e.length;a++)a===t?s.push("int(getIndices("+r[a]+"))"):s.push(""+r[a]);return s.join()}(e,n);this.userCode="\n      void main() {\n        "+s+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},nh=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=du(t.length),s=du(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+s+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+a+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function rh(e,t){var n=Jd();return Eo(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function sh(e,t){return Uo(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function ah(e,t){return Oo(e,t,new Uint16Array([0,1,2,2,1,3]))}function ih(e,t,n,r,s,a,i){Qo(n,r);var o=Mo(e,t),l=e.TEXTURE_2D;return Bo(e,t,function(){return e.bindTexture(l,o)}),Bo(e,t,function(){return e.texParameteri(l,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),Bo(e,t,function(){return e.texParameteri(l,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),Bo(e,t,function(){return e.texParameteri(l,e.TEXTURE_MIN_FILTER,e.NEAREST)}),Bo(e,t,function(){return e.texParameteri(l,e.TEXTURE_MAG_FILTER,e.NEAREST)}),Bo(e,t,function(){return e.texImage2D(l,0,s,n,r,0,a,i,null)}),Bo(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),o}function oh(e,t,n,r,s){var a=wo(n,r);return ih(e,t,a[0],a[1],s.internalFormatFloat,s.textureFormatFloat,e.FLOAT)}function lh(e,t,n,r,s){var a=wo(n,r);return ih(e,t,a[0],a[1],s.internalFormatHalfFloat,s.textureFormatFloat,s.textureTypeHalfFloat)}function ch(e,t,n,r,s){var a=wo(n,r);return ih(e,t,a[0],a[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function dh(e,t,n,r,s){var a=jo(n,r);return ih(e,t,a[0],a[1],s.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function uh(e,t,n,r,s){var a=jo(n,r);return ih(e,t,a[0],a[1],s.internalFormatPackedHalfFloat,e.RGBA,s.textureTypeHalfFloat)}function hh(e,t,n,r){return Bo(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),zo(e,t,n,"clipSpacePos",r,3,20,0)&&zo(e,t,n,"uv",r,2,20,12)}function Ah(e,t,n,r,s,a,i){var o,l,c;Bo(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),a instanceof Uint8Array?(o=new Uint8Array(r*s*4),l=e.UNSIGNED_BYTE,c=e.RGBA):(o=new Float32Array(r*s*4),l=e.FLOAT,c=i.internalFormatPackedFloat),o.set(a),Bo(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,c,r,s,0,e.RGBA,l,o)}),Bo(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function fh(e,t,n,r){Bo(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),r.data instanceof Uint8Array?Bo(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):Bo(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),Bo(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function ph(e,t,n,r,s){var a=e.createBuffer();Bo(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)});var i=16*n*r;return Bo(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)}),Bo(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),Bo(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),a}function mh(e,t,n){var r=e,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function gh(e,t,n,r,s){var a=wo(n,r),i=a[0],o=a[1],l=new Uint8Array(n*r*4);return Bo(e,t,function(){return e.readPixels(0,0,i,o,s.downloadTextureFormat,e.UNSIGNED_BYTE,l)}),new Float32Array(l.buffer)}function xh(e,t,n,r,s,a,i,o){var l=e,c=new Float32Array(function(e,t){var n=jo(e,t);return n[0]*n[1]*4}(a,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function vh(e,t,n,r){var s=new Float32Array(n*r*4);return Bo(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,s)}),s}var bh=Object.freeze({createVertexShader:rh,createVertexBuffer:sh,createIndexBuffer:ah,createFloat32MatrixTexture:oh,createFloat16MatrixTexture:lh,createUnsignedBytesMatrixTexture:ch,createPackedMatrixTexture:dh,createFloat16PackedMatrixTexture:uh,bindVertexProgramAttributeStreams:hh,uploadDenseMatrixToTexture:Ah,uploadPixelDataToTexture:fh,createBufferFromOutputTexture:ph,downloadFloat32MatrixFromBuffer:mh,downloadByteEncodedFloatMatrixFromOutputTexture:gh,downloadPackedMatrixFromBuffer:xh,downloadMatrixFromPackedOutputTexture:vh}),yh=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=Ha().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,bo(t,e)):this.gl=yo(t);var n="WEBGL_color_buffer_float";if(1===Ha().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=_o(this.gl,this.debug,"OES_texture_float"),cl(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=_o(this.gl,this.debug,"OES_texture_half_float");else if(Ha().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),cl(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=_o(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Ha().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",cl(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!cl(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=sh(this.gl,this.debug),this.indexBuffer=ah(this.gl,this.debug),this.framebuffer=Ho(this.gl,this.debug),this.textureConfig=Co(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Ha().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Bo(t,this.debug,function(){return t.finish()}),Bo(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Bo(t,this.debug,function(){return t.deleteFramebuffer(e.framebuffer)}),Bo(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),Bo(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),Bo(t,this.debug,function(){return t.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),oh(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),lh(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),ch(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),fh(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),Ah(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),uh(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),dh(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Xo(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Bo(this.gl,this.debug,function(){return t.gl.deleteTexture(e)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return gh(r.gl,r.debug,t,n,r.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,s,a){return xh(this.gl,e,0,0,0,s,a,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return mh(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=ph(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(Ha().getBool("WEBGL_FENCE_API_ENABLED")){var s=e,a=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=s.clientWaitSync(a,0,0);return e===s.ALREADY_SIGNALED||e===s.CONDITION_SATISFIED},t=a}else Ha().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Ha().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return vh(r.gl,r.debug,t,n)})},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=Fo(t,this.debug,e),r=rh(t,this.debug),s=Lo(t,this.debug);return Bo(t,this.debug,function(){return t.attachShader(s,r)}),Bo(t,this.debug,function(){return t.attachShader(s,n)}),Po(t,this.debug,s),this.debug&&Ro(t,this.debug,s),this.vertexAttrsAreBound||(this.setProgram(s),this.vertexAttrsAreBound=hh(t,this.debug,this.program,this.vertexBuffer)),s},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&Bo(this.gl,this.debug,function(){return t.gl.deleteProgram(e)})},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Ro(this.gl,this.debug,this.program),Bo(this.gl,this.debug,function(){return t.gl.useProgram(e)})},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?Vo(this.gl,this.debug,e,t):Ko(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),Bo(this.gl,this.debug,function(){return n.gl.getAttribLocation(e,t)})},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Go(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=jo(t,n),s=r[0],a=r[1];this.setOutputMatrixTextureDriver(e,s,a)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&Ro(this.gl,this.debug,this.program),Yo(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Bo(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Bo(this.gl,this.debug,function(){return e.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=_o(this.gl,this.debug,2===Ha().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===Ha().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),s=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,s),s},e.prototype.endQuery=function(){if(2!==Ha().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return Oa(this,void 0,void 0,function(){var t=this;return Ma(this,function(n){switch(n.label){case 0:return[4,ui(function(){return t.disposed||t.isQueryAvailable(e,Ha().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(e,Ha().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),s=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}return s=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise(function(n){t.addItemToPoll(function(){return e.isFencePassed()},function(){return n()})})},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map(function(e){return e.isDoneFn})),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||ui(function(){return n.pollItems(),0===n.itemsToPoll.length})},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),qo(this.gl,this.debug,e,this.framebuffer),this.debug&&Yo(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(qo(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Yo(this.gl)):Xo(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;qo(r,this.debug,e,this.framebuffer),this.debug&&Yo(r),this.outputTexture=e,Bo(r,this.debug,function(){return r.viewport(0,0,t,n)}),Bo(r,this.debug,function(){return r.scissor(0,0,t,n)})},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var s=this;this.throwIfDisposed(),Bo(this.gl,this.debug,function(){return s.gl.scissor(e,t,n,r)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function wh(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(e,n){var r=e.logicalShape,s=t[n],a=s.shape;if(!ii(r,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+a+" must match");if(!e.isUniform||!s.isUniform){var i=e.texShape,o=s.isUniform?null:s.texData.texShape;if(!ii(i,o))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+i+" and "+o+" must match")}})}var Nh=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,s=n.inChannels,a=n.strideWidth,i=n.strideHeight,o=n.padInfo,l=n.outWidth,c=n.dilationWidth,d=n.dilationHeight,u=n.dataFormat,h=o.left,A=o.top,f=s*r,p=Jd(),m="channelsLast"===u,g=m?0:1,x=m?1:2,v="",b=0;b<=1;b++)for(var y=0;y<=1;y++)v+="\n          blockIndex = rc.y + "+y+";\n          pos = rc.x + "+b+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+l+")) * "+i+" - "+A+";\n            d0 = offsetY + "+d+" * (pos / "+f+");\n\n            if(d0 < "+t[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+l+".) * "+a+". - "+h+".);\n              d1 = offsetX + "+c+" * (int(mod(float(pos), "+f+".) / "+s+".));\n\n              if(d1 < "+t[x]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+s+".));\n\n                if ("+m+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*b+y)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*b+y)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+v+"\n\n        "+p.output+" = result;\n      }\n    "},jh=function(e,t,n,r,s){this.variableNames=["x"],this.outputShape=[];var a,i=t,o=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";a=.5===s?"inversesqrt("+l+")":1===s?"1.0/("+l+")":"exp(log("+l+") * float(-"+s+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+i+"; j <= "+i+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+o+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+a+";\n        setOutput(val);\n      }\n    "},Ch=function(e,t,n,r,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=s,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+s+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+s+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},Bh=function(e,t,n,r,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,i=t,o=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";a=.5===s?"inversesqrt("+l+")":1===s?"1.0/("+l+")":"exp(log("+l+") * float(-"+s+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+i+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+i+"; j <= "+i+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+o+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+a+";\n        setOutput(result);\n      }\n    "},kh=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,s=e.effectiveFilterHeight,a=e.effectiveFilterWidth,i=s-1-e.padInfo.top,o=a-1-e.padInfo.left,l=s*a-1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+a+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+l+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+a+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Sh=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,s=e.dilationDepth,a=e.dilationHeight,i=e.dilationWidth,o=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=o-1-e.padInfo.front,u=l-1-e.padInfo.top,h=c-1-e.padInfo.left,A=o*l*c-1;this.userCode="\n      const ivec3 pads = ivec3("+d+", "+u+", "+h+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+o+";\n           wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+l+";\n              wR += "+a+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+i+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+A+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+l+" * "+c+" +\n                  wR * "+c+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},_h=function(e,t,n,r,s,a,i){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===s&&(s=!1),void 0===a&&(a=null),void 0===i&&(i=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var o=n?e[1]:e[2],l=Math.ceil(o/2),c=n?"i * 2, rc.y":"rc.y, i * 2",d=r?"rc.z, i * 2":"i * 2, rc.z",u=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],A="",f="";a&&(A=i?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+a+"\n        }":"vec4 activation(vec4 x) {\n          "+a+"\n        }",f="result = activation(result);");var p=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+A+"\n\n      const float sharedDimension = "+l+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+l+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+c+");\n          vec4 b = getMatrixB(rc.x, "+d+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+u[0]+" * "+h[0]+");\n          result += ("+u[1]+" * "+h[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+p+"\n\n        "+f+"\n\n        setOutput(result);\n      }\n    "},Eh=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),Fh=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},Th=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Yd("rc",t),r=du(t),s=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",s=e-2;s<e;s++)r+=n[s]+" >= "+t[s],s<e-1&&(r+="||");return r}(t,e,n),a=function(e,t,n,r){if(1===e)return"";var s=r.slice(-2);return"\n    int r = "+s[0]+";\n    int c = "+s[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),i=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var s=0;s<=1;s++){for(var a=(0===r?"r":"rp1")+", "+(0===s?"c":"cp1"),i=2;i<e;i++)a=t[t.length-1-i]+","+a;n.push(a)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+s+") {\n            setOutput(vec4(0));\n          } else {\n            "+a+"\n\n            setOutput(vec4("+i+"));\n          }\n        }\n      "}},Ih=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]});var r=e.length,s=du(r),a=t.map(function(e){return e[0]}).join(","),i=t.map(function(t,n){return t[0]+e[n]}).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+s+" start = "+s+"("+a+");\n      "+s+" end = "+s+"("+i+");\n\n      void main() {\n        "+s+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+s+" coords = outC - start;\n          setOutput(getX("+o+"));\n        }\n      }\n    ":"\n        int start = "+a+";\n        int end = "+i+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Dh=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]});for(var r=e.length,s=du(r),a=t.map(function(e){return e[0]}).join(","),i=t.map(function(t,n){return t[0]+e[n]}).join(","),o=Yd("rc",r),l=Yd("source",r),c=o[r-1]+" < "+this.outputShape[r-1],d=1===r?"source":"vec2("+l.slice(-2).join()+")",u=[s+" rc = outputLoc;",o[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+o[r-2]+" += 1;\n       if("+o[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+o[r-1]+" += 1;\n         if("+c+") {"],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",A="",f=0,p=1===r?2:4;f<p;f++)A+="\n        "+u[f]+"\n        if ("+h+") {\n          result["+f+"] = float("+n+");\n        } else {\n          "+s+" source = rc - start;\n          result["+f+"] = getChannel(getX("+l.join()+"), "+d+");\n        }\n      ";A+=1===r?"} ":"}}",this.userCode="\n      const "+s+" start = "+s+"("+a+");\n      const "+s+" end = "+s+"("+i+");\n\n      void main() {\n        "+s+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+A+"\n        setOutput(result);\n      }\n    "},Lh=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,s=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=e.padInfo.top,u=e.padInfo.left;this.outputShape=e.outShape;var h="avg"===t,A="0.0";if(h||(A="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+s+", "+a+");\n        const ivec2 pads = ivec2("+d+", "+u+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+l+";\n              wR += "+i+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+o+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var f=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(f="avgValue / count");var p=4*Math.floor(r/4),m=r%4,g="\n      if ("+h+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+s+", "+a+");\n      const ivec2 pads = ivec2("+d+", "+u+");\n      const float initializationValue = "+A+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+A+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+l+";\n            wR += "+i+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+p+"; wC += 4) {\n            int xC = xCCorner + wC * "+o+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+o+", d),\n              getValue(batch, xR, xC + 2 * "+o+", d),\n              getValue(batch, xR, xC + 3 * "+o+", d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+p+";\n          if ("+(1===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(2===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+o+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+o+", d),\n              getValue(batch, xR, xC + 2 * "+o+", d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+f+");\n      }\n    "}},Ph=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,s=e.strideDepth,a=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,u=e.effectiveFilterHeight,h=e.effectiveFilterWidth,A=e.padInfo.front,f=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;var m="avg"===t,g="0.0";if(m||(g="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+s+", "+a+", "+i+");\n        const ivec3 pads = ivec3("+A+", "+f+", "+p+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+d+";\n              wD += "+o+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+u+";\n                wR += "+l+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+h+";\n                  wC += "+c+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+u+" * "+h+" +\n                      wR * "+h+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var x=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(x="avgValue / count");var v=4*Math.floor(r/4),b=r%4,y="\n      if ("+m+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+s+", "+a+", "+i+");\n      const ivec3 pads = ivec3("+A+", "+f+", "+p+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+d+";\n            wD += "+o+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+u+";\n            wR += "+l+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+v+"; wC += 4) {\n              int xC = xCCorner + wC * "+c+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+c+", ch)\n              );\n\n              "+y+"\n            }\n\n            int xC = xCCorner + "+v+";\n            if ("+(1===b)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+y+"\n            } else if ("+(2===b)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+y+"\n            } else if ("+(3===b)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                initializationValue\n              );\n\n              "+y+"\n            }\n          }\n          setOutput("+x+");\n        }\n      }\n    "}},Rh=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,s=e.inSize,a=Math.ceil(s/n);this.outputShape=[r,a];var i="0.0",o="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",o="min"):"max"===t&&(i="-1.0 / 1e-20",o="max");var l=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");var c=4*Math.floor(n/4),d=n%4,u="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+o+"(values, minMaxValue);\n      }\n    ",h="vec4";"all"===t?(i="1.0",u="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===t&&(i="0.0",u="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var A="";s%n>0&&(A="\n        if (inIdx < 0 || inIdx >= "+s+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+i+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+A+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+i+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+u+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===d)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+u+"\n        } else if ("+(2===d)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+u+"\n        } else if ("+(3===d)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+u+"\n        }\n        setOutput("+l+");\n      }\n    "},Uh=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var s="thisRC = rc;";r%2==1&&(s+="thisRC.z += 1;"),r>1&&(s+="thisRC.y += 1;"),n+="\n        "+s+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Zd(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+$d(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},Oh=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,s=r[1],a=r[2],i=e.shape,o=i[1],l=i[2],c=[n&&o>1?s-1:s,n&&l>1?a-1:a],d=[n&&o>1?o-1:o,n&&l>1?l-1:l],u=c[0]/d[0],h=c[1]/d[1],A=1/u,f=1/h,p=2*Math.ceil(A)+2,m=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+u+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+A+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+p+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+o+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+l+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(s-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(a-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Mh=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var s=e[0],a=e[1],i=e[2],o=e[3];this.outputShape=[s,t,n,o];var l=[r&&t>1?a-1:a,r&&n>1?i-1:i],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+l[0]/c[0]+",\n          "+l[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Qh=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var s=e[0],a=e[1],i=e[2],o=e[3];this.outputShape=[s,t,n,o];var l=[r&&t>1?a-1:a,r&&n>1?i-1:i],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+l[0]/c[0]+",\n          "+l[1]/c[1]+",\n          "+l[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+a+".0, "+i+".0,\n                                     "+i+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(o-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Hh=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,s=r[1],a=r[2],i=e.shape,o=i[1],l=i[2],c=[n&&o>1?s-1:s,n&&l>1?a-1:a],d=[n&&o>1?o-1:o,n&&l>1?l-1:l],u=c[0]/d[0],h=c[1]/d[1],A=1/u,f=1/h,p=2*Math.ceil(A)+2,m=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+u+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+A+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+p+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+o+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+l+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+d[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+d[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+s+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},zh=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var s=e[0],a=e[1],i=e[2],o=e[3];this.outputShape=[s,t,n,o];var l=[r&&t>1?a-1:a,r&&n>1?i-1:i],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+l[0]/c[0]+",\n          "+l[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+d+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Wh=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map(function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),s=du(n);this.userCode="\n      void main() {\n        "+s+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},Vh=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=Yd("rc",n),s=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],i=du(n);function o(n){var r=e.map(function(r,s){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(s,n)});return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+s+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+i+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return o(e)}(r.slice())+";\n          if("+s+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",o(e)}(r.slice())+";\n          }\n          if("+a+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",o(e)}(r.slice())+";\n            if("+s+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",o(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},Kh=function(e,t,n,r,s,a,i){void 0===i&&(i=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var o=du(s.length),l=du(a.length),c="";1===n?c="i":2===n&&(c="i, j");var d="getIndices("+c+")",u="";1===r?u="i":2===r&&(u="i, coords[1]");var h="getUpdates("+u+")",A=t>1?"strides[j]":"strides";this.userCode="\n        "+o+" strides = "+o+"("+s+");\n\n        void main() {\n          "+l+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+d+");\n              flattenedIndex += index * "+A+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+h+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Gh=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,s=e.inSize,a=e.numSegments,i=a*Math.ceil(s/n);this.outputShape=[r,i];var o=4*Math.floor(n/4),l=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",d="";s%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+s+") {\n          return initializationValue;\n        }\n      ");var u="";s%n>0&&(u="\n        if (inIdx < 0 || inIdx >= "+s+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+d+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+u+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+a+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+a+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+o+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+o+";\n        if ("+(1===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},qh=function(e,t,n){var r,s;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)s="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],o=[],l=0;l<t.length;l++)o.push(""+a[l]),l<e&&i.push(""+a[l]);r=i.join(),s=o.join()}var c=du(n);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+s+"));\n        } else {\n          setOutput(getB("+s+"));\n        }\n      }\n    "},Xh=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=du(this.rank),r="uniform int start["+this.rank+"];",s=function(e){if(1===e)return"sourceLoc";if(e<=6)return Yh.slice(0,e).map(function(e){return"sourceLoc."+e}).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map(function(e,t){return"sourceLoc."+Yh[t]+" = start["+t+"] + coords."+Yh[t]+";"}).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+s+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Yh=["x","y","z","w","u","v"],Jh=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=du(this.rank),n=Yd("coords",this.rank),r=Yd("sourceLoc",this.rank),s=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",a="getChannel(getSource("+r.join()+"), "+s+")",i="\n      result.x = "+a+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+a+";\n        --"+r[this.rank-1]+";\n      }\n    ",o=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+a+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+a+";\n        }\n      }\n    ",l=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map(function(e,t){return"start["+t+"]"}).join()+");":e.map(function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"}).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+l+"\n        vec4 result = vec4(0.);\n        "+i+"\n        "+o+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Zh=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,s=du(n.length),a=du(n.length),i="";if(1===r)i="coords * strides + begin";else{var o=0;i=n.map(function(e,t){return o++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(o-1)+"] * strides["+t+"] + begin["+t+"]"}).join(",")}this.userCode="\n      "+s+" begin = "+s+"("+e+");\n      "+s+" strides = "+s+"("+t+");\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+i+"));\n      }\n    "},$h=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,s=eA(t,n),a=tA(e,s,n);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var i=this.freeTextures[a].shift();return this.usedTextures[a].push(i),i}return this.numUsedTextures++,this.log(),s===go.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===go.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===go.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===go.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===go.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var s=tA(t,eA(n,r),r);s in this.freeTextures||(this.freeTextures[s]=[]),this.freeTextures[s].push(e),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[s],i=a.indexOf(e);if(i<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(i,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function eA(e,t){if(e===mo.UPLOAD)return go.PACKED_2X2_FLOAT32;if(e===mo.RENDER||null==e)return function(e){return Ha().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?go.PACKED_2X2_FLOAT32:go.UNPACKED_FLOAT32:e?go.PACKED_2X2_FLOAT16:go.UNPACKED_FLOAT16}(t);if(e===mo.DOWNLOAD||e===mo.PIXELS)return go.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function tA(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var nA=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var s=du(this.rank),a=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],s=0;s<e.length;s++)r.push("imod("+n[s]+", "+e[s]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+s+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},rA=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var s=du(this.rank),a=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),s=0;s<e.length;s++)r[e[s]]=n[s];return r.join()}(t);this.userCode="\n    void main() {\n      "+s+" resRC = getOutputCoords();\n      setOutput(getA("+a+"));\n    }\n    "},sA=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var s=du(this.rank),a=Xd("rc",this.rank),i=new Array(this.rank);for(r=0;r<t.length;r++)i[t[r]]=a[r];var o="vec2("+i.slice(-2).join()+")",l="++"+a[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+i.join()+"), "+o+")";this.userCode="\n    void main() {\n      "+s+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+l+") {\n        result[1] = "+c+";\n      }\n      --"+a[this.rank-1]+";\n      if(++"+a[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+l+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "},aA=1.7580993408473768,iA=1.0507009873554805,oA=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},lA="if (isnan(x)) return x;",cA="return abs(x);",dA=lA+"\n  return (x < 0.0) ? 0.0 : x;\n",uA=lA+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",hA="return (x >= 0.0) ? x : (exp(x) - 1.0);",AA="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+aA+";\n  float scale = "+iA+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",fA="return -x;",pA="return ceil(x);",mA="return floor(x);",gA="return exp(x);",xA="return exp(x) - 1.0;",vA=lA+"\n  return sin(x);\n",bA=lA+"\n  return cos(x);\n",yA=lA+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",wA=lA+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",NA=lA+"\n  return atan(x);\n",jA=lA+"return log(x + sqrt(x * x + 1.0));",CA=lA+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",BA=lA+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",kA="return x;",SA="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",_A="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",EA="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",FA=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},TA=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=Yd("rc",t),r=du(t),s=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),a=n.slice(-2),i=t<=1?"rc":"vec2("+a.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+s+");\n\n        setOutput(getChannel(packedInput, "+i+"));\n      }\n    "},IA={};function DA(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?SA:dA;if("elu"===e)return t?EA:hA;if("relu6"===e)return t?_A:uA;if("prelu"===e)return t?ju:wu;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var LA=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!Ha().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var s=yo(Ha().getNumber("WEBGL_VERSION"));r.binaryCache=((n=Ha().getNumber("WEBGL_VERSION"))in IA||(IA[n]={}),IA[n]),r.gpgpu=new yh(s),r.canvas=s.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new $h(r.gpgpu),r.numMBBeforeWarning=null==Ha().global.screen?1024:Ha().global.screen.height*Ha().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new cd(r,ho),r}return Ua(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(Ha().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:mo.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(Ha().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:mo.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,s=t.complexTensors,a=t.slice,i=t.shape,o=t.isPacked;if(null!=a){var l;l=o?new FA(i,kA):new oA(i,kA);var c=this.runWebGLProgram(l,[{dataId:e,shape:i,dtype:r}],r),d=this.readSync(c.dataId);return this.disposeData(c.dataId),d}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var u,h,A=null!=this.activeTimers;return A&&(u=Di()),h="complex64"===r?Ed(s.real.dataSync(),s.imag.dataSync()):this.getValuesFromTexture(e),A&&(this.downloadWaitMs+=Di()-u),this.convertAndCacheOnCPU(e,h)},t.prototype.read=function(e){return Oa(this,void 0,void 0,function(){var t,n,r,s,a,i,o,l,c,d,u,h,A,f,p,m,g,x,v,b,y,w;return Ma(this,function(N){switch(N.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise(function(e){return t.push(e)})];if(n=this.texData.get(e),r=n.values,s=n.shape,a=n.slice,i=n.dtype,o=n.complexTensors,l=n.isPacked,null!=a)return void 0,c=l?new FA(s,kA):new oA(s,kA),d=this.runWebGLProgram(c,[{dataId:e,shape:s,dtype:i}],i),u=this.read(d.dataId),this.disposeData(d.dataId),[2,u];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!Ha().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Ha().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return h=null,"complex64"!==i&&Ha().get("WEBGL_BUFFER_SUPPORTED")&&(A=this.decode(e),f=this.texData.get(A.dataId),h=(w=this.gpgpu).createBufferFromTexture.apply(w,[f.texture].concat(No(s)))),this.pendingRead.set(e,[]),"complex64"===i?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:N.sent(),N.label=2;case 2:return"complex64"!==i?[3,4]:[4,Promise.all([o.real.data(),o.imag.data()])];case 3:return m=N.sent(),g=m[0],x=m[1],p=Ed(g,x),[3,5];case 4:null==h?p=this.getValuesFromTexture(e):(v=ai(s),p=this.gpgpu.downloadFloat32MatrixFromBuffer(h,v)),N.label=5;case 5:return null!=A&&this.disposeData(A.dataId),b=this.convertAndCacheOnCPU(e,p),y=this.pendingRead.get(e),this.pendingRead.delete(e),y.forEach(function(e){return e(b)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,b]}})})},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!ko(n)){if(Ha().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,s=n.dtype,a=n.isPacked,i=ai(r);if(Ha().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o=this.decode(e),l=this.texData.get(o.dataId),c=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[l.texture].concat(No(r))).subarray(0,i);return this.disposeData(o.dataId),c}var d=Ha().getBool("WEBGL_PACK")&&!0===a,u=d?nl(r):r,h=d?new Yu(u):new Xu(u),A=this.runWebGLProgram(h,[{shape:u,dtype:s,dataId:e}],"float32"),f=this.texData.get(A.dataId),p=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(f.texture,f.texShape[0],f.texShape[1]).subarray(0,i);return this.disposeData(A.dataId),p},t.prototype.time=function(e){return Oa(this,void 0,void 0,function(){var t,n,r,s,a,i,o;return Ma(this,function(l){switch(l.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),s=si(this.activeTimers.map(function(e){return e.query})).filter(function(e){return null!=e}),a=si(this.activeTimers.map(function(e){return e.name})).filter(function(e){return null!=e}),this.activeTimers=t,r&&(this.programTimersStack=null),i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Ha().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(s)]:[3,2];case 1:return o=l.sent(),i.kernelMs=ei(o),i.getExtraProfileInfo=function(){return o.map(function(e,t){return{name:a[t],ms:e}}).map(function(e){return e.name+": "+e.ms}).join(", ")},[3,3];case 2:i.kernelMs={error:"WebGL query timers are not supported in this environment."},l.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,i]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return Ha().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Di(),endMs:null}},t.prototype.endTimer=function(e){return Ha().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Di(),e)},t.prototype.getQueryTime=function(e){return Oa(this,void 0,void 0,function(){var t;return Ma(this,function(n){return Ha().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]})})},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,s=t.texShape,a=t.usage,i=t.isPacked,o=t.slice,l=o&&o.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),null!=n&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,a,i)));var d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return Ha().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=ho.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every(function(e){return null==n.texData.get(e.dataId).texture&&e.size<t})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:ho.keep(e.clone()),imag:ho.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===ai(n))return Ol([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,s=sd(e.shape,t,n);if(r||!s){var a=Ha().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Jh(n):new Xh(n),i=a.getCustomSetupFunc(t);return this.compileAndRun(a,[e],null,i)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),s=this.makeOutput(n,e.dtype),a=this.texData.get(s.dataId);Object.assign(a,r),a.shape=n,a.dtype=e.dtype;var i=ad(t,e.strides);r.slice&&(i+=r.slice.flatOffset),a.slice={flatOffset:i,origDataId:r.slice&&r.slice.origDataId||e.dataId};var o=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,o+1),s},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var s=td(t,n,r);if(s.some(function(e){return 0===e}))return Ol([],s);var a=new Zh(t,r,s);return this.compileAndRun(a,[e])},t.prototype.reverse=function(e,t){var n=Ha().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Vh(e.shape,t):new Wh(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map(function(e){return Rl(e)}),r=e.map(function(e){return Ul(e)});return Pl(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>Ha().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var s=Math.floor(e.length/2),a=this.concat(e.slice(0,s),t),i=this.concat(e.slice(s),t);return this.concat([a,i],t)}if(Ha().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var o=new Eu(e.map(function(e){return e.shape}),t);return this.compileAndRun(o,e)}var l=Dl(e.map(function(e){return e.shape}),t),c=e.map(function(e){return e.as2D(-1,ai(e.shape.slice(t)))}),d=new _u(c.map(function(e){return e.shape}));return this.compileAndRun(d,c).reshape(l)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(Ha().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,fA,e.dtype);var t=new oA(e.shape,fA);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var s=n?e.shape[2]:e.shape[1],a=r?t.shape[1]:t.shape[2],i=n?e.shape[1]:e.shape[2],o=e.shape[0];if((1===s||1===a)&&i>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var l=1===a?e:e.as3D(o,i,1),c=1===a?2:1,d=1===a?t.as3D(o,1,i):t;return this.multiply(l,d).sum(c,!0)}var u=ro(e.dtype,t.dtype),h=new _h(e.shape,[o,s,a],n,r);return this.compileAndRun(h,[e,t],u)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,s=e.transposeB,a=e.bias,i=e.activation,o=e.preluActivationWeights,l=r?t.shape[2]:t.shape[1],c=s?n.shape[1]:n.shape[2],d=t.shape[0],u=ro(t.dtype,n.dtype),h=null!=a,A=null!=o,f=i?DA(i,!0):null,p=new _h(t.shape,[d,l,c],r,s,h,f,A),m=[t,n];return a&&m.push(a),o&&m.push(o),this.compileAndRun(p,m,u)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),s=new xu("return areal * breal - aimag * bimag;",e.shape,t.shape),a=new xu("return areal * bimag + aimag * breal;",e.shape,t.shape),i=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],o=this.compileAndRun(s,i),l=this.compileAndRun(a,i),c=this.complex(o,l);return o.dispose(),l.dispose(),c}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,yu,e.dtype);var d=new Nu(yu,e.shape,t.shape);return this.compileAndRun(d,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,s,a){var i=[e,t,n],o=null;null!=a&&(o=a.shape,i.push(a));var l=null;if(null!=s&&(l=s.shape,i.push(s)),Ha().getBool("WEBGL_PACK_NORMALIZATION")){var c=new gu(e.shape,t.shape,n.shape,o,l,r);return this.compileAndRun(c,i)}var d=new mu(e.shape,t.shape,n.shape,o,l,r);return this.compileAndRun(d,i)},t.prototype.localResponseNormalization4D=function(e,t,n,r,s){var a=Ha().getBool("WEBGL_PACK_NORMALIZATION")?new Bh(e.shape,t,n,r,s):new jh(e.shape,t,n,r,s);return this.compileAndRun(a,[e])},t.prototype.LRNGrad=function(e,t,n,r,s,a,i){var o=new Ch(t.shape,r,s,a,i);return this.compileAndRun(o,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map(function(e){return Ri(e)});return zd(mc(e.shape,e.dtype,n),t)}var r=new nA(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=Ha().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Dh(e.shape,t,n):new Ih(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=Ha().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sA(e.shape,t):new rA(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new th(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){ti(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var r=t.reduce(function(e,t){return e*t}),s=zc(e.shape,t,r),a=Wc(s.length,t.length),i=Vc(e.shape,t,r),o=Kc(n,t.length),l=Gc(i,n,t.length);return e.reshape(s).transpose(a).reshape(i).slice(o,l)},t.prototype.spaceToBatchND=function(e,t,n){ti(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var r=t.reduce(function(e,t){return e*t}),s=[[0,0]];s.push.apply(s,n);for(var a=1+t.length;a<e.shape.length;++a)s.push([0,0]);var i=e.pad(s),o=zc(i.shape,t,r,!1),l=Wc(o.length,t.length,!1),c=Vc(i.shape,t,r,!1);return i.reshape(o).transpose(l).reshape(c)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],s=e.shape[1],a=Xc(s),i=new Rh({windowSize:a,inSize:s,batchSize:r},t),o=this.compileAndRun(i,[e],n);return 1===o.shape[1]?o:this.reduce(o,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],s=e.shape[1];null!=n&&(r=n.shape[0],s=n.shape[1]);var a=Xc(s),i=new qd({windowSize:a,inSize:s,batchSize:r},t,null==n),o=[e];null!=n&&o.push(n);var l=this.compileAndRun(i,o,"int32");return 1===l.shape[1]?l:this.argReduce(e,t,l)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,s=Xc(r[r.length-1]),a=new Au(r,s,t,null==n),i=null==n?[e]:[e,n],o=this.compileAndRun(a,i,"int32");return o.rank===e.rank?this.argReducePacked(e,t,o):o},t.prototype.sum=function(e,t){_l("sum",t,e.rank);var n=kl(e.shape,t),r=n[0],s=ai(n[1]),a=e.as2D(-1,s),i=so(e.dtype);return this.reduce(a,"sum",i).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=kl(e.shape,t),r=n[0],s=ai(n[1]),a=e.as2D(-1,s),i=so(e.dtype);return this.reduce(a,"prod",i).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,s=El([r],e.rank),a=e;null!=s&&(a=e.transpose(s),r=Tl(1,e.rank)[0]);var i=function(e,t,n){for(var r=[],s=e.length,a=0;a<s;a++)a!==t?r.push(e[a]):r.push(n);return r}(a.shape,r,n),o=ai([a.shape[r]]),l=a.as2D(-1,o),c=so(e.dtype),d=this.segOpCompute(l,"unsortedSegmentSum",t,c,n).reshape(i);return null!=s&&(d=d.transpose(Fl(s))),d},t.prototype.segOpCompute=function(e,t,n,r,s){var a=e.shape[0],i=e.shape[1],o=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=Si(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Si(e,n+1);return n}(i,s),l=new Gh({windowSize:o,inSize:i,batchSize:a,numSegments:s},t),c=this.compileAndRun(l,[e,n],r);return c.shape[1]===s?c:(n=Xl(0,s).tile([i/o]),this.segOpCompute(c,t,n,r,s))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(_l("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!Ha().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var s=kl(e.shape,r),a=s[0],i=ai(s[1]),o=e.as2D(-1,i);return this.argReduce(o,n).reshape(a)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var s=new zu(e.shape,n,r);return this.compileAndRun(s,[e])},t.prototype.equal=function(e,t){if(Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new Nu("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new Nu("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new Nu("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new Nu("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new Nu("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new Nu("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new oA(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new Nu("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new Nu("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new qh(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],ro(t.dtype,n.dtype))},t.prototype.where=function(e){bl("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Vd(e.shape,t)},t.prototype.topk=function(e,t,n){return Wd(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){_l("min",t,e.rank);var n=kl(e.shape,t),r=n[0],s=ai(n[1]),a=e.as2D(-1,s);return this.reduce(a,"min",a.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cu("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Nu("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cu("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Nu("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);_l("max",t,e.rank);var n=kl(e.shape,t),r=n[0],s=ai(n[1]),a=e.as2D(-1,s);return this.reduce(a,"max",a.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cu("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Nu("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){_l("all",t,e.rank);var n=kl(e.shape,t),r=n[0],s=ai(n[1]),a=e.as2D(-1,s);return this.reduce(a,"all",a.dtype).reshape(r)},t.prototype.any=function(e,t){_l("any",t,e.rank);var n=kl(e.shape,t),r=n[0],s=ai(n[1]),a=e.as2D(-1,s);return this.reduce(a,"any",a.dtype).reshape(r)},t.prototype.realDivide=function(e,t){if(Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new Nu("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return this.compileAndRun(n,[e,t],"float32")},t.prototype.floorDiv=function(e,t){if(Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new Nu("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,vu);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=ro(e.dtype,t.dtype);if(Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,vu,n);var r=new Nu(vu,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new FA(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,s){void 0===s&&(s=!1);var a=new Cu(n,e.shape,t.shape,s);return this.compileAndRun(a,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,s=this.texData.get(e.dataId),a=this.texData.get(t.dataId),i=[[s.complexTensors.real,a.complexTensors.real],[s.complexTensors.imag,a.complexTensors.imag]].map(function(s){var a=s[0],i=s[1],o=r.makeComplexComponentTensorInfo(e,a),l=r.makeComplexComponentTensorInfo(t,i),c=new Nu(n,e.shape,t.shape);return r.compileAndRun(c,[o,l],ro(a.dtype,i.dtype))}),o=i[0],l=i[1],c=this.complex(o,l);return o.dispose(),l.dispose(),c},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>Ha().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var s=e.map(function(e){return e.dtype}).reduce(function(e,t){return ro(e,t)}),a=e.map(function(e){return e.shape}),i=Ha().getBool("WEBGL_PACK")?new Gd(e[0].shape,a):new Kd(e[0].shape,a);return this.compileAndRun(i,e,s)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,bu);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=ro(e.dtype,t.dtype);if(Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,bu,e.dtype);var r=new Nu(bu,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cu("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Nu("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=ro(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(Ha().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,pA,e.dtype);var t=new oA(e.shape,pA);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(Ha().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,mA,e.dtype);var t=new oA(e.shape,mA);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new oA(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new oA(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new oA(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new oA(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new oA(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(Ha().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,gA,e.dtype);var t=new oA(e.shape,gA);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(Ha().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,xA,e.dtype);var t=new oA(e.shape,xA);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=Ai([t],e.shape),r=this.max(e,n),s=Sl(r.shape,n),a=this.subtract(e,r.reshape(s)),i=this.exp(a),o=this.sum(i,n).reshape(s);return this.realDivide(i,o)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(Ha().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new oA(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new oA(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new oA(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new oA(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new oA(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=Ha().getBool("WEBGL_PACK")?new FA(e.shape,SA):new oA(e.shape,dA),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=Ha().getBool("WEBGL_PACK")?new FA(e.shape,_A):new oA(e.shape,uA),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cu(ju,e.shape,t.shape):new Nu(wu,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(Ha().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,EA,e.dtype);var t=new oA(e.shape,hA);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cu("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new Nu("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new oA(e.shape,AA);return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new oA(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,s=(r=Ha().getBool("WEBGL_PACK_CLIP")?new ku(e.shape):new Bu(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,s)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(Ha().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,cA,e.dtype);var t=new oA(e.shape,cA);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new Su(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new oA(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new oA(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new oA(e.shape,vA);return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new oA(e.shape,bA);return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new oA(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new oA(e.shape,yA);return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new oA(e.shape,wA);return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new oA(e.shape,NA);return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cu("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Nu("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new oA(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new oA(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new oA(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new oA(e.shape,jA);return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new oA(e.shape,CA);return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new oA(e.shape,BA);return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new oA(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new oA(e.shape,function(e){return void 0===e&&(e=0),lA+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,s,a){var i=e.shape,o=this.texData.get(e.dataId),l=n.inChannels,c=i[0]*i[1]*i[2],d=n.outChannels,u="channelsLast"===n.dataFormat,h=(1===c||1===d)&&l>1e3,A=i[2]%2!=0&&!!o.isPacked;if(h||!Ha().getBool("WEBGL_LAZILY_UNPACK")||!Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!A){var f=u?i[0]*i[1]*i[2]:i[0]*i[2]*i[3],p=this.reshape(e,[1,f,n.inChannels]),m=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:p,b:m,transposeA:!1,transposeB:!1,bias:r,activation:s,preluActivationWeights:a}),n.outShape)}var g=u?i[0]*i[1]*(i[2]+1):i[0]*i[2]*(i[3]+1),x={dataId:e.dataId,shape:[1,g,n.inChannels],dtype:e.dtype},v=o.shape;o.shape=o.shape.slice(),o.shape[o.shape.length-2]++,ti(al(o.shape,x.shape),function(){return"packed reshape "+o.shape+" to "+x.shape+" isn't free"});var b=this.reshape(t,[1,n.inChannels,n.outChannels]),y=this.fusedBatchMatMul({a:x,b:b,transposeA:!1,transposeB:!1,bias:r,activation:s,preluActivationWeights:a}),w=this.texData.get(y.dataId);return ti(w.isPacked,function(){return"batchMatMul result is expected to be packed"}),o.shape=v,w.shape=n.outShape,ho.makeTensorFromDataId(y.dataId,n.outShape,y.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,s,a){var i=n.filterWidth,o=n.filterHeight,l=n.inChannels,c=n.outWidth,d=n.outHeight,u="channelsLast"===n.dataFormat,h=i*o*l,A=d*c,f=[h,A],p=e.squeeze([0]),m=t.reshape([1,h,-1]),g=new Nh(f,p.shape,n),x=this.compileAndRun(g,[p]).reshape([1,f[0],f[1]]),v=null!=r,b=null!=a,y=s?DA(s,!0):null,w=new _h(x.shape,[1,A,n.outChannels],!0,!1,v,y,b),N=[x,m];r&&N.push(r),b&&N.push(a);var j=this.compileAndRun(w,N);return u?j.reshape([1,d,c,n.outChannels]):j.reshape([1,n.outChannels,d,c])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,s=e.bias,a=e.activation,i=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,s,a,i);if(Ha().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,s,a,i);var o=null!=s,l=null!=i,c=a?DA(a,!1):null,d=new Uu(r,o,c,l),u=[t,n];return s&&u.push(s),i&&u.push(i),this.compileAndRun(d,u)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(Ha().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new Uu(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new Iu(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new Tu(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,s=e.convInfo,a=e.bias,i=e.activation,o=e.preluActivationWeights,l=Ha().getBool("WEBGL_PACK_DEPTHWISECONV")&&s.strideWidth<=2&&s.outChannels/s.inChannels==1,c=i?DA(i,l):null,d=[n,r],u=null!=a,h=null!=o;return u&&d.push(a),h&&d.push(o),l?(t=new Qu(s,u,c,h),this.compileAndRun(t,d)):(t=new Mu(s,u,c,h),this.compileAndRun(t,d))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return Ha().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new Qu(n),this.compileAndRun(r,[e,t])):(r=new Mu(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new Ru(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new Pu(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new Ou(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new Lu(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new Du(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new Lh(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new Lh(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var s=new Lh(r,"max",!0),a=this.compileAndRun(s,[t]),i=new kh(r),o=this.compileAndRun(i,[e,a],t.dtype);return a.dispose(),o},t.prototype.avgPoolBackprop=function(e,t,n){var r=new fu(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return kd(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),s=0,a=0;a<e.rank;a++)a!==t&&(r[s++]=e.shape[a]);var i=new Array(e.rank).fill(0),o=e.shape.slice();o[t]=1;var l=new Array(n);for(a=0;a<l.length;a++)i[t]=a,l[a]=this.slice(e,i,o).reshape(r);return l},t.prototype.avgPool3d=function(e,t){var n=new Ph(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new pu(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new Ph(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var s=new Ph(r,"max",!0),a=this.compileAndRun(s,[t]),i=new Sh(r),o=this.compileAndRun(i,[e,a],t.dtype);return a.dispose(),o},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!al(e.shape,t)&&(null===n.texture||!al(n.shape,t))){var r=this.packedReshape(e,t);return ho.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return Sd(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var s=Ha().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Qh(e.shape,t,n,r):new Mh(e.shape,t,n,r);return this.compileAndRun(s,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new Oh(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var s=new zh(e.shape,t,n,r);return this.compileAndRun(s,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new Hh(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var s=t?e:od(e),a=s.shape[0],i=s.shape[1],o=new Eh(a,i,n),l=o.getCustomSetupFunc(r);return this.compileAndRun(o,[s],"int32",l)},t.prototype.oneHot=function(e,t,n,r){var s=new Fh(e.size,t,n,r);return this.compileAndRun(s,[e])},t.prototype.diag=function(e){var t=new qu(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,s){return bl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Pd(e.dataSync(),t.dataSync(),n,r,s)},t.prototype.cropAndResize=function(e,t,n,r,s,a){var i=new Hu(e.shape,t.shape,r,s,a);return this.compileAndRun(i,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){ti(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t});var r=e.shape[0],s="NHWC"===n?e.shape[1]:e.shape[2],a="NHWC"===n?e.shape[2]:e.shape[3],i="NHWC"===n?e.shape[3]:e.shape[1],o=s*t,l=a*t,c=i/(t*t),d=new Gu("NHWC"===n?[r,o,l,c]:[r,c,o,l],t,n);return this.compileAndRun(d,[e])},t.prototype.split=function(e,t,n){return Hd(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=Zc(0,e,n),s=r.sliceRank,a=r.numUpdates,i=r.sliceSize,o=r.strides,l=r.outputSize,c=[l/i,i],d=e.reshape([a,s]),u=t.reshape([a,i]);if(0===l)return Sd(Ol([]),n);var h=Ql(0),A=new Kh(a,s,d.rank,u.rank,o,c);return this.compileAndRun(A,[u,d,h]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var s=Zc(0,e,n),a=s.sliceRank,i=s.numUpdates,o=s.strides,l=s.outputSize,c=new Kh(i,a,e.rank,t.rank,o,[l,1],!1);return this.compileAndRun(c,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new $u("return real * expR - imag * expI;",e.shape,t),s=new $u("return real * expI + imag * expR;",e.shape,t),a=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],i=this.compileAndRun(r,a),o=this.compileAndRun(s,a),l=this.complex(i,o).as2D(e.shape[0],e.shape[1]);return i.dispose(),o.dispose(),l},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],s=qc(e,t),a=s[0],i=s[1],o=s[2],l=s[3],c=t.reshape([i,r]),d=e.reshape([e.size/o,o]),u=new nh(r,l,[i,o]);return this.compileAndRun(u,[d,c]).reshape(a)},t.prototype.fill=function(e,t,n){if("string"===(n=n||Bi(t))){var r=mi(n,ai(e));return r.fill(t),ho.makeTensor(r,e,n,this)}var s=new eh(e,t),a=s.getCustomSetupFunc(t);return this.compileAndRun(s,[],n,a)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return _d(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return ho.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new TA(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new Th(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[el(e.shape)].concat(tl(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},s=[el(t)].concat(tl(t)),a=new Uh(s,n),i=this.runWebGLProgram(a,[r],e.dtype,null,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,s=n.shape,a=n.dtype,i=nl(s);return t=r?new Ku(i):new Vu(i),{dtype:a,shape:s,dataId:this.runWebGLProgram(t,[{shape:i,dtype:a,dataId:e}],a,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,s){var a=this;void 0===s&&(s=!1);var i=this.makeTensorInfo(e.outputShape,n),o=this.texData.get(i.dataId);if(e.packedOutput&&(o.isPacked=!0),e.outPackingScheme===po.DENSE){var l=No(e.outputShape);o.texShape=l.map(function(e){return 2*e})}if(null!=e.outTexUsage&&(o.usage=e.outTexUsage),0===ai(i.shape))return o.values=pi(i.dtype,0),i;var c=[],d=t.map(function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&ai(t.shape)<=Ha().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),c.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!al(n.shape,t.shape)){var r=t,s=t.shape;t.shape=n.shape,t=a.packedReshape(t,s),c.push(t),n=a.texData.get(t.dataId),r.shape=s}return a.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(i.dataId);var u,h={shape:i.shape,texData:o,isUniform:!1},A=function(e,t,n){var r="";t.concat(n).forEach(function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t});var s=e.userCode;return e.constructor.name+"_"+r+"_"+s}(e,d,h),f=this.getAndSaveBinary(A,function(){return function(e,t,n,r){var s=t.userCode,a=n.map(function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),i=a.map(function(e){return e.shapeInfo}),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},l=tu(a,o,s,t.packedInputs),c=e.createProgram(l),d=null,u=e.getUniformLocation(c,"NAN",!1);1===Ha().getNumber("WEBGL_VERSION")&&(d=e.getUniformLocation(c,"INFINITY",!1));for(var h={},A=0;A<t.variableNames.length;A++){var f=t.variableNames[A];h[f]=e.getUniformLocation(c,f,!1),h["offset"+f]=e.getUniformLocation(c,"offset"+f,!1)}return{program:t,source:l,webGLProgram:c,uniformLocations:h,inShapeInfos:i,outShapeInfo:o,infLoc:d,nanLoc:u}}(a.gpgpu,e,d,h)}),p=null!=this.activeTimers;if(p&&(u=this.startTimer()),function(e,t,n,r,s){wh(t.inShapeInfos,n),wh([t.outShapeInfo],[r]);var a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a,i[0],i[1]):e.setOutputMatrixTexture(a,i[0],i[1]),e.setProgram(t.webGLProgram),1===Ha().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach(function(n,r){var s=t.program.variableNames[r],a=t.uniformLocations[s],i=t.uniformLocations["offset"+s];if(null!=a)if(n.isUniform)if(ai(n.shape)<2)e.gl.uniform1f(a,n.uniformValues[0]);else{var o=n.uniformValues;o instanceof Float32Array||(o=new Float32Array(o)),e.gl.uniform1fv(a,o)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,a,r)}),null!=s&&s(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,f,d,h,r),c.forEach(function(e){return a.disposeData(e.dataId)}),p&&(u=this.endTimer(u),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(u)})),!Ha().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&!1===s){var m=this.unpackTensor(i);return this.disposeData(i.dataId),m}return i},t.prototype.compileAndRun=function(e,t,n,r,s){void 0===s&&(s=!1),n=n||t[0].dtype;var a=this.runWebGLProgram(e,t,n,r,s);return ho.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(Ha().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=xl(function(){if(!Ha().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Ha().getBool("DEBUG");Ha().set("DEBUG",!1);var n=e.abs(Ql(1e-8)).dataSync()[0];if(Ha().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,s=n.dtype,a=n.values,i=n.texture,o=n.usage,l=n.isPacked;if(null==i){var c,d=null!=this.activeTimers;d&&(c=Di());var u=n.texShape;if(null==u&&(u=rl(r,l),n.texShape=u),null!=a){var h=nl(r),A=void 0,f=u[1],p=u[0],m=a instanceof Uint8Array;l?(f=(t=jo(u[0],u[1]))[0],p=t[1],A=new Zu(h,[p,f],m)):A=new Ju(h,[p,f],m);var g=this.makeTensorInfo([p,f],s);this.texData.get(g.dataId).usage=m?mo.PIXELS:mo.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),f,p,a);var x=this.runWebGLProgram(A,[g],s,null,!0),v=this.texData.get(x.dataId);n.texture=v.texture,n.texShape=v.texShape,n.isPacked=v.isPacked,n.usage=v.usage,this.disposeData(g.dataId),this.texData.delete(x.dataId),n.values=null,d&&(this.uploadWaitMs+=Di()-c)}else{var b=this.acquireTexture(u,o,s,l);n.texture=b}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+s+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*yi(t)},t}(dd);Ao()&&ho.registerBackend("webgl",function(){return new LA},2);var PA=Ll({square_:function(e){var t=Nl(e,"x","square"),n=[t];return ho.runKernelFunc(function(e,n){return n([t]),e.square(t)},{x:t},null,"Square",{},n,[])}}),RA="SquaredDifference",UA=Ll({squaredDifference_:function(e,t){var n,r=Nl(e,"a","squaredDifference"),s=Nl(t,"b","squaredDifference");n=ao(r,s),r=n[0],s=n[1],fd(r.shape,s.shape);var a={a:r,b:s},i=[r,s];return ho.runKernelFunc(function(e,t){var n=e.squaredDifference(r,s);return t([r,s]),n},a,function(e,t){var n=t[0],r=t[1],s=Ql(2);return{a:function(){return e.mul(n.sub(r).mul(s))},b:function(){return e.mul(r.sub(n).mul(s))}}},RA,{},i,[])}}),OA=Ll({abs_:function(e){var t=Nl(e,"x","abs");return"complex64"===t.dtype?ho.runKernelFunc(function(e){return e.complexAbs(t)},{$x:t}):ho.runKernelFunc(function(e,n){var r=e.abs(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}},"Abs")}}),MA=Ll({acos_:function(e){var t=Nl(e,"x","acos");return ho.runKernelFunc(function(e,n){var r=e.acos(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Ql(1).sub(n.toFloat().square()).sqrt()).neg()}}})}}),QA=Ll({acosh_:function(e){var t=Nl(e,"x","acosh");return ho.runKernelFunc(function(e,n){var r=e.acosh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}})}}),HA=Ll({asin_:function(e){var t=Nl(e,"x","asin");return ho.runKernelFunc(function(e,n){var r=e.asin(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Ql(1).sub(n.toFloat().square()).sqrt())}}})}}),zA=Ll({asinh_:function(e){var t=Nl(e,"x","asinh");return ho.runKernelFunc(function(e,n){var r=e.asinh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Ql(1).add(n.toFloat().square()).sqrt())}}})}}),WA=Ll({atan_:function(e){var t=Nl(e,"x","atan");return ho.runKernelFunc(function(e,n){var r=e.atan(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}})}}),VA=Ll({atanh_:function(e){var t=Nl(e,"x","atanh");return ho.runKernelFunc(function(e,n){var r=e.atanh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(Ql(1).sub(n.toFloat().square()))}}})}}),KA=Ll({ceil_:function(e){var t=Nl(e,"x","ceil");return ho.runKernelFunc(function(e){return e.ceil(t)},{$x:t},function(e){return{$x:function(){return Jl(e)}}})}}),GA=Ll({clipByValue_:function(e,t,n){var r=Nl(e,"x","clipByValue");ti(t<=n,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."});var s=[r],a={min:t,max:n};return ho.runKernelFunc(function(e,s){var a=e.clip(r,t,n);return s([r]),a},{x:r},function(e,r){var s=r[0];return{x:function(){return e.where(s.greaterEqual(t).logicalAnd(s.lessEqual(n)),Jl(e))}}},"ClipByValue",a,s)}}),qA=Ll({cos_:function(e){var t=Nl(e,"x","cos"),n=[t];return ho.runKernelFunc(function(e,n){var r=e.cos(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}},"Cos",{},n)}}),XA=Ll({cosh_:function(e){var t=Nl(e,"x","cosh");return ho.runKernelFunc(function(e,n){var r=e.cosh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}})}}),YA=Ll({erf_:function(e){var t=Nl(e,"x","erf");return ti("int32"===t.dtype||"float32"===t.dtype,function(){return"Input dtype must be `int32` or `float32`."}),"int32"===t.dtype&&(t=t.toFloat()),ho.runKernelFunc(function(e,n){var r=e.erf(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),JA=Ll({exp_:function(e){var t=Nl(e,"x","exp");return ho.runKernelFunc(function(e,n){var r=e.exp(t);return n([r]),r},{x:t},function(e,t){return{x:function(){return e.mulStrict(t[0])}}},"Exp",{},[],[!0])}}),ZA=Ll({expm1_:function(e){var t=Nl(e,"x","expm1");return ho.runKernelFunc(function(e,n){var r=e.expm1(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}})}}),$A=Ll({floor_:function(e){var t=Nl(e,"x","floor");return ho.runKernelFunc(function(e){return e.floor(t)},{$x:t},function(e){return{$x:function(){return Jl(e)}}})}}),ef=Ll({log_:function(e){var t=Nl(e,"x","log"),n=[t];return ho.runKernelFunc(function(e,n){var r=e.log(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}},"Log",{},n)}}),tf=Ll({log1p_:function(e){var t=Nl(e,"x","log1p");return ho.runKernelFunc(function(e,n){var r=e.log1p(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}})}}),nf=Ll({logSigmoid_:function(e){var t=Nl(e,"x","logSigmoid");return ho.runKernelFunc(function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}})}}),rf=Ll({neg_:function(e){var t=Nl(e,"x","neg"),n=[t];return ho.runKernelFunc(function(e){return e.neg(t)},{x:t},function(e){return{x:function(){return e.neg()}}},"Neg",{},n)}}),sf=Ll({reciprocal_:function(e){var t=Nl(e,"x","reciprocal");return ho.runKernelFunc(function(e,n){var r=e.reciprocal(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}})}}),af=Ll({round_:function(e){var t=Nl(e,"x","round");return ho.runKernelFunc(function(e){return e.round(t)},{$x:t},function(e){return{$x:function(){return Jl(e)}}})}}),of=Ll({rsqrt_:function(e){var t=Nl(e,"x","rsqrt"),n=[t];return ho.runKernelFunc(function(e,n){var r=e.rsqrt(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),lf=Ll({sigmoid_:function(e){var t=Nl(e,"x","sigmoid");return ho.runKernelFunc(function(e,n){var r=e.sigmoid(t);return n([r]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(Ql(1).sub(n)))}}},"Sigmoid")}}),cf=Ll({sign_:function(e){var t=Nl(e,"x","sign");return ho.runKernelFunc(function(e){return e.sign(t)},{$x:t},function(e){return{$x:function(){return Jl(e)}}})}}),df=Ll({isNaN_:function(e){var t=Nl(e,"x","isNaN");return ho.runKernelFunc(function(e){return e.isNaN(t)},{$x:t},function(e){return{$x:function(){return Jl(e)}}})}}),uf=Ll({isInf_:function(e){var t=Nl(e,"x","isInf");return ho.runKernelFunc(function(e){return e.isInf(t)},{$x:t},function(e){return{$x:function(){return Jl(e)}}})}}),hf=Ll({isFinite_:function(e){var t=Nl(e,"x","isFinite");return ho.runKernelFunc(function(e){return e.isFinite(t)},{$x:t},function(e){return{$x:function(){return Jl(e)}}})}}),Af=Ll({sin_:function(e){var t=Nl(e,"x","sin"),n=[t];return ho.runKernelFunc(function(e,n){var r=e.sin(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}},"Sin",{},n)}}),ff=Ll({sinh_:function(e){var t=Nl(e,"x","sinh");return ho.runKernelFunc(function(e,n){var r=e.sinh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}})}}),pf=Ll({softplus_:function(e){var t=Nl(e,"x","softplus");return ho.runKernelFunc(function(e,n){var r=e.softplus(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}})}}),mf=Ll({sqrt_:function(e){var t=Nl(e,"x","sqrt");return ho.runKernelFunc(function(e,n){var r=e.sqrt(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}})}}),gf=Ll({step_:function(e,t){void 0===t&&(t=0);var n=Nl(e,"x","step");return ho.runKernelFunc(function(e){return e.step(n,t)},{$x:n},function(e){return{$x:function(){return Jl(e)}}})}}),xf=Ll({tan_:function(e){var t=Nl(e,"x","tan");return ho.runKernelFunc(function(e,n){var r=e.tan(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}})}}),vf=Ll({tanh_:function(e){var t=Nl(e,"x","tanh");return ho.runKernelFunc(function(e,n){var r=e.tanh(t);return n([r]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return Ql(1).sub(n.square()).mulStrict(e)}}},"Tanh",{},null,[!0])}});function bf(e,t,n,r,s,a){var i,o,l=Nl(e,"x","batchNorm"),c=Nl(t,"mean","batchNorm"),d=Nl(n,"variance","batchNorm");return null!=s&&(i=Nl(s,"scale","batchNorm")),null!=r&&(o=Nl(r,"offset","batchNorm")),ti(2===l.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),ti(2===c.rank||1===c.rank,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),ti(2===d.rank||1===d.rank,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."}),null!=i&&ti(2===i.rank||1===i.rank,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."}),null!=o&&ti(2===o.rank||1===o.rank,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+o.rank+"."}),Nf(l,c,d,o,i,a)}function yf(e,t,n,r,s,a){var i,o,l=Nl(e,"x","batchNorm"),c=Nl(t,"mean","batchNorm"),d=Nl(n,"variance","batchNorm");return null!=s&&(i=Nl(s,"scale","batchNorm")),null!=r&&(o=Nl(r,"offset","batchNorm")),ti(3===l.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),ti(3===c.rank||1===c.rank,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),ti(3===d.rank||1===d.rank,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."}),null!=i&&ti(3===i.rank||1===i.rank,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."}),null!=o&&ti(3===o.rank||1===o.rank,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+o.rank+"."}),Nf(l,c,d,o,i,a)}function wf(e,t,n,r,s,a){var i,o,l=Nl(e,"x","batchNorm"),c=Nl(t,"mean","batchNorm"),d=Nl(n,"variance","batchNorm");return null!=s&&(i=Nl(s,"scale","batchNorm")),null!=r&&(o=Nl(r,"offset","batchNorm")),ti(4===l.rank,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+l.rank+"."}),ti(4===c.rank||1===c.rank,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),ti(4===d.rank||1===d.rank,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."}),null!=i&&ti(4===i.rank||1===i.rank,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."}),null!=o&&ti(4===o.rank||1===o.rank,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+o.rank+"."}),Nf(l,c,d,o,i,a)}function Nf(e,t,n,r,s,a){null==a&&(a=.001);var i,o,l,c=Nl(e,"x","batchNorm"),d=Nl(t,"mean","batchNorm"),u=Nl(n,"variance","batchNorm");null!=s&&(i=Nl(s,"scale","batchNorm")),null!=r&&(o=Nl(r,"offset","batchNorm")),ti(d.rank===u.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),ti(null==o||d.rank===o.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),ti(null==i||d.rank===i.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),l=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c;var h=[c,d,u,i];return ho.runKernelFunc(function(e,t){var n=e.batchNormalization(l,jf(d),jf(u),a,jf(i),jf(o));return t([c,d,u,i]),n},{x:c,mean:d,variance:u,scale:i,offset:o},function(e,t){var n=t,r=n[0],s=n[1],i=n[2],o=n[3],c=null==o?Ql(1):o,d=Ad(s.shape,l.shape),u=[];if(1===s.rank){for(var h=0;h<l.shape.length-1;++h)u.push(l.shape[h]);u.push(1)}var A=r.sub(s),f=e.mul(c),p=of(i.add(Ql(a))),m=p.mul(p).mul(p).mul(Ql(-.5));return{x:function(){return 1===s.rank?e.mul(Mc(p.as4D(1,1,1,s.shape[0]),u)).mul(c).reshape(r.shape):e.mul(p).mul(c).reshape(r.shape)},mean:function(){var e=p.mul(Ql(-1)).mul(f);return 1===s.rank&&(e=e.sum(d)),e.reshape(s.shape)},variance:function(){var e=m.mul(A).mul(f);return 1===s.rank&&(e=e.sum(d)),e.reshape(s.shape)},scale:function(){var t=A.mul(p),n=e.mul(t);return 1===s.rank&&(n=n.sum(d)),n.reshape(s.shape)},offset:function(){var t=e;return 1===s.rank&&(t=t.sum(d)),t.reshape(s.shape)}}},"BatchNormalization",{varianceEpsilon:a},h).reshape(c.shape)}function jf(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function Cf(){gl("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Bf=Ll({batchNormalization2d_:function(e,t,n,r,s,a){return void 0===r&&(r=.001),Cf(),bf(e,t,n,a,s,r)}}),kf=Ll({batchNormalization3d_:function(e,t,n,r,s,a){return void 0===r&&(r=.001),Cf(),yf(e,t,n,a,s,r)}}),Sf=Ll({batchNormalization4d_:function(e,t,n,r,s,a){return void 0===r&&(r=.001),Cf(),wf(e,t,n,a,s,r)}}),_f=Ll({batchNormalization_:function(e,t,n,r,s,a){return void 0===r&&(r=.001),Cf(),Nf(e,t,n,a,s,r)}}),Ef=Ll({batchNorm_:Nf}),Ff=Ll({batchNorm2d_:bf}),Tf=Ll({batchNorm3d_:yf}),If=Ll({batchNorm4d_:wf}),Df=Ll({logicalAnd_:function(e,t){var n=Nl(e,"a","logicalAnd","bool"),r=Nl(t,"b","logicalAnd","bool");return fd(n.shape,r.shape),ho.runKernelFunc(function(e){return e.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),Lf=Ll({logicalNot_:function(e){var t=Nl(e,"x","logicalNot","bool");return ho.runKernelFunc(function(e){return e.logicalNot(t)},{$x:t})}}),Pf=Ll({logicalOr_:function(e,t){var n=Nl(e,"a","logicalOr","bool"),r=Nl(t,"b","logicalOr","bool");return fd(n.shape,r.shape),ho.runKernelFunc(function(e){return e.logicalOr(n,r)},{$a:n,$b:r})}}),Rf=Ll({logicalXor_:function(e,t){var n=Nl(e,"a","logicalXor","bool"),r=Nl(t,"b","logicalXor","bool");return fd(n.shape,r.shape),Pf(e,t).logicalAnd(Df(e,t).logicalNot())}}),Uf=Ll({where_:function(e,t,n){var r=Nl(t,"a","where"),s=Nl(n,"b","where"),a=Nl(e,"condition","where","bool");return ni(r.shape,s.shape,"Error in where: "),1===a.rank?ti(a.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):ni(a.shape,s.shape,"Error in where: "),ho.runKernelFunc(function(e,t){var n=e.select(a,r,s);return t([a]),n},{$condition:a,$a:r,$b:s},function(e,t){var n=t[0];return{$condition:function(){return Jl(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}})}}),Of=function(e){return Oa(this,void 0,void 0,function(){var t,n,r;return Ma(this,function(s){switch(s.label){case 0:return[4,(t=Nl(e,"condition","whereAsync","bool")).data()];case 1:return n=s.sent(),r=Vd(t.shape,n),e!==t&&t.dispose(),[2,r]}})})},Mf=Ll({add_:function(e,t){var n,r=Nl(e,"a","add"),s=Nl(t,"b","add");n=ao(r,s),r=n[0],s=n[1];var a=fd(r.shape,s.shape);return ho.runKernelFunc(function(e){return e.add(r,s)},{a:r,b:s},function(e){return{a:function(){var t=e,n=Ad(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=Ad(s.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(s.shape)}}},"Add")}}),Qf=Ll({addN_:function(e){ti(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),ti(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(e,t){return Nl(e,"tensors"+t,"addN")}),n=t[0];t.forEach(function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(e){if(!ii(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return ho.runKernelFunc(function(e){return e.addN(t)},r,function(e){var n={};return t.forEach(function(t,r){n[r]=function(){return e.clone()}}),n},"AddN")}}),Hf=Ll({addStrict_:function(e,t){var n=Nl(e,"a","addStrict"),r=Nl(t,"b","addStrict");return ni(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),zf=Ll({atan2_:function(e,t){var n,r=Nl(e,"a","atan2"),s=Nl(t,"b","atan2");n=ao(r,s),r=n[0],s=n[1];var a=fd(r.shape,s.shape);return ho.runKernelFunc(function(e,t){var n=e.atan2(r,s);return t([r,s]),n},{$a:r,$b:s},function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Mf(n.square(),r.square()),s=e.mul(r.div(t)),i=Ad(n.shape,a);return i.length>0&&(s=s.sum(i)),s.reshape(n.shape)},$b:function(){var t=Mf(n.square(),r.square()),s=rf(e.mul(n.div(t))),i=Ad(r.shape,a);return i.length>0&&(s=s.sum(i)),s.reshape(r.shape)}}})}}),Wf=Ll({div_:function(e,t){var n,r=Nl(e,"a","div"),s=Nl(t,"b","div");if(n=ao(r,s),r=n[0],s=n[1],"int32"===r.dtype&&"int32"===s.dtype)return Gf(r,s);var a=fd(r.shape,s.shape);return ho.runKernelFunc(function(e,t){var n=e.realDivide(r,s);return t([r,s]),n},{a:r,b:s},function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),s=Ad(n.shape,a);return s.length>0?t.sum(s).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),s=Ad(r.shape,a);s.length>0&&(t=t.sum(s).reshape(r.shape));var i=r.square();return t.div(i.toFloat()).neg()}}},"Div")}}),Vf=Ll({divNoNan_:function(e,t){var n,r=Nl(e,"a","div"),s=Nl(t,"b","div");r=(n=ao(r,s))[0],s=n[1];var a=Wf(r,s),i=Jl(a),o=s.equal(i);return Uf(o,i,a)}}),Kf=Ll({divStrict_:function(e,t){var n=Nl(e,"a","div"),r=Nl(t,"b","div");return ni(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Gf=Ll({floorDiv_:function(e,t){var n,r=Nl(e,"a","floorDiv"),s=Nl(t,"b","floorDiv");n=ao(r,s),r=n[0],s=n[1];var a=fd(r.shape,s.shape);return ho.runKernelFunc(function(e,t){var n=e.floorDiv(r,s);return t([r,s]),n},{a:r,b:s},function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),s=Ad(n.shape,a);return s.length>0?t.sum(s).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),s=Ad(r.shape,a);s.length>0&&(t=t.sum(s).reshape(r.shape));var i=r.square();return t.div(i.toFloat()).neg()}}},"FloorDiv")}}),qf=Ll({maximum_:function(e,t){var n,r=Nl(e,"a","maximum"),s=Nl(t,"b","maximum");return n=ao(r,s),r=n[0],s=n[1],"bool"===r.dtype&&(r=r.toInt(),s=s.toInt()),fd(r.shape,s.shape),ho.runKernelFunc(function(e,t){var n=e.maximum(r,s);return t([r,s]),n},{a:r,b:s},function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}},"Maximum")}}),Xf=Ll({maximumStrict_:function(e,t){var n=Nl(e,"a","maximumStrict"),r=Nl(t,"b","maximumStrict");return ni(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Yf=Ll({minimum_:function(e,t){var n,r=Nl(e,"a","minimum"),s=Nl(t,"b","minimum");return n=ao(r,s),r=n[0],s=n[1],"bool"===r.dtype&&(r=r.toInt(),s=s.toInt()),fd(r.shape,s.shape),ho.runKernelFunc(function(e,t){var n=e.minimum(r,s);return t([r,s]),n},{a:r,b:s},function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}},"Minimum")}}),Jf=Ll({minimumStrict_:function(e,t){var n=Nl(e,"a","minimumStrict"),r=Nl(t,"b","minimumStrict");return ni(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Zf=Ll({mod_:function(e,t){var n,r=Nl(e,"a","mod"),s=Nl(t,"b","mod");n=ao(r,s),r=n[0],s=n[1];var a=fd(r.shape,s.shape);return ho.runKernelFunc(function(e,t){var n=e.mod(r,s);return t([r,s]),n},{$a:r,$b:s},function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Ad(n.shape,a);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),s=Ad(r.shape,a);return s.length>0?t.sum(s).reshape(r.shape):t}}})}}),$f=Ll({modStrict_:function(e,t){var n=Nl(e,"a","modStrict"),r=Nl(t,"b","modStrict");return ni(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),ep=Ll({mul_:function(e,t){var n,r=Nl(e,"a","mul"),s=Nl(t,"b","mul");n=ao(r,s),r=n[0],s=n[1];var a=fd(r.shape,s.shape);return ho.runKernelFunc(function(e,t){var n=e.multiply(r,s);return t([r,s]),n},{a:r,b:s},function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),s=Ad(n.shape,a);return s.length>0?t.sum(s).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),s=Ad(r.shape,a);return s.length>0?t.sum(s).reshape(r.shape):t}}},"Mul")}}),tp=Ll({mulStrict_:function(e,t){var n=Nl(e,"a","mul"),r=Nl(t,"b","mul");return ni(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),np=Ll({pow_:function(e,t){var n,r=Nl(e,"base","pow"),s=Nl(t,"exp","pow");n=ao(r,s),r=n[0],s=n[1];var a=fd(r.shape,s.shape),i=[r,s];return ho.runKernelFunc(function(e,t){var n=e.pow(r,s);return t([r,s,n]),n},{a:r,b:s},function(e,t){var n=t[0],r=t[1],s=t[2];return{a:function(){var t=r.toFloat(),s=e.mul(t.mul(n.pow(t.sub(Ql(1))))),i=Ad(n.shape,a);return i.length>0&&(s=s.sum(i)),s.reshape(n.shape)},b:function(){var t=n.greater(0),i=n.log().where(t,Jl(n)),o=e.mul(s.mul(i)),l=Ad(r.shape,a);return l.length>0&&(o=o.sum(l)),o.reshape(r.shape)}}},"Pow",{},i,[!0])}}),rp=Ll({powStrict_:function(e,t){return ni(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),sp=Ll({squaredDifferenceStrict_:function(e,t){var n=Nl(e,"a","squaredDifferenceStrict"),r=Nl(t,"b","squaredDifferenceStrict");return ni(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),ap=Ll({sub_:function(e,t){var n,r=Nl(e,"a","sub"),s=Nl(t,"b","sub");n=ao(r,s),r=n[0],s=n[1];var a=fd(r.shape,s.shape);return ho.runKernelFunc(function(e){return e.subtract(r,s)},{a:r,b:s},function(e){return{a:function(){var t=e,n=Ad(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=Ad(s.shape,a);return n.length>0&&(t=t.sum(n)),t.neg().reshape(s.shape)}}},"Sub")}}),ip=Ll({subStrict_:function(e,t){var n=Nl(e,"a","subStrict"),r=Nl(t,"b","subStrict");return ni(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),op=Ll({equal_:function(e,t){var n,r=Nl(e,"a","equal"),s=Nl(t,"b","equal");return n=ao(r,s),r=n[0],s=n[1],fd(r.shape,s.shape),ho.runKernelFunc(function(e){return e.equal(r,s)},{$a:r,$b:s})}}),lp=Ll({equalStrict_:function(e,t){var n=Nl(e,"a","equalStrict"),r=Nl(t,"b","equalStrict");return ni(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),cp=Ll({greater_:function(e,t){var n,r=Nl(e,"a","greater"),s=Nl(t,"b","greater");return n=ao(r,s),r=n[0],s=n[1],fd(r.shape,s.shape),ho.runKernelFunc(function(e){return e.greater(r,s)},{a:r,b:s},null,"Greater")}}),dp=Ll({greaterEqual_:function(e,t){var n,r=Nl(e,"a","greaterEqual"),s=Nl(t,"b","greaterEqual");return n=ao(r,s),r=n[0],s=n[1],fd(r.shape,s.shape),ho.runKernelFunc(function(e,t){var n=e.greaterEqual(r,s);return t([r,s]),n},{a:r,b:s},function(e,t){var n=t[0],r=t[1];return{a:function(){return Jl(n)},b:function(){return Jl(r)}}},"GreaterEqual")}}),up=Ll({greaterEqualStrict_:function(e,t){var n=Nl(e,"a","greaterEqualStrict"),r=Nl(t,"b","greaterEqualStrict");return ni(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),hp=Ll({greaterStrict_:function(e,t){var n=Nl(e,"a","greaterStrict"),r=Nl(t,"b","greaterStrict");return ni(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Ap=Ll({less_:function(e,t){var n,r=Nl(e,"a","less"),s=Nl(t,"b","less");return n=ao(r,s),r=n[0],s=n[1],fd(r.shape,s.shape),ho.runKernelFunc(function(e){return e.less(r,s)},{a:r,b:s},null,"Less")}}),fp=Ll({lessEqual_:function(e,t){var n,r=Nl(e,"a","lessEqual"),s=Nl(t,"b","lessEqual");return n=ao(r,s),r=n[0],s=n[1],fd(r.shape,s.shape),ho.runKernelFunc(function(e,t){var n=e.lessEqual(r,s);return t([r,s]),n},{a:r,b:s},null,"LessEqual")}}),pp=Ll({lessEqualStrict_:function(e,t){var n=Nl(e,"a","lessEqualStrict"),r=Nl(t,"b","lessEqualStrict");return ni(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),mp=Ll({lessStrict_:function(e,t){var n=Nl(e,"a","lessStrict"),r=Nl(t,"b","lessStrict");return ni(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),gp=Ll({notEqual_:function(e,t){var n,r=Nl(e,"a","notEqual"),s=Nl(t,"b","notEqual");return n=ao(r,s),r=n[0],s=n[1],fd(r.shape,s.shape),ho.runKernelFunc(function(e){return e.notEqual(r,s)},{a:r,b:s},null,"NotEqual")}}),xp=Ll({notEqualStrict_:function(e,t){var n=Nl(e,"a","notEqualStrict"),r=Nl(t,"b","notEqualStrict");return ni(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function vp(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function bp(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var yp=Ll({gather_:function(e,t,n){void 0===n&&(n=0);var r=Nl(e,"x","gather"),s=Nl(t,"indices","gather","int32");n=Ai(n,r.shape)[0];var a=function(e,t,n){for(var r=e.shape[n],s=[],a=1,i=1,o=0;o<n;o++)s.push(e.shape[o]),a*=e.shape[o];for(o=0;o<t.rank;o++)s.push(t.shape[o]);for(o=n+1;o<e.rank;o++)s.push(e.shape[o]),i*=e.shape[o];return{batchSize:a,sliceSize:i,dimSize:r,outputShape:s}}(r,s,n);return ho.runKernelFunc(function(e,t){var a=e.gather(r,s.flatten(),n);return t([s]),a},{x:r,indices:s},function(e,t){var s=t[0];return{x:function(){var t=r.shape,a=s.size,i=t.slice(0,n),o=i.length,l=t.slice(n,t.length).slice(1),c=l.length,d=vp(0,o),u=vp(o+1,o+1+c),h=bp([i,[a],l]),A=e.reshape(h),f=s.reshape([a]),p=bp([[o],d,u]),m=A.transpose(p),g=wp(m,f,r.shape[n]),x=Fl(p);return g.transpose(x)},indices:function(){return s}}},"Gather",{axis:n}).reshape(a.outputShape)}}),wp=Ll({unsortedSegmentSum_:function(e,t,n){var r=Nl(e,"x","unsortedSegmentSum"),s=Nl(t,"segmentIds","unsortedSegmentSum","int32");return ti(oi(n),function(){return"numSegments must be of dtype int"}),ho.runKernelFunc(function(e,t){var a=e.unsortedSegmentSum(r,s,n);return t([s]),a},{$x:r},function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=qf(t,Jl(t)),r=yp(e,n),s=dp(t,Ql(0,"int32")),a=r.rank-s.rank,i=0;i<a;++i)s=Nc(s,i+1);s=Df(s,Kl(r.shape,"bool"));var o=Jl(r);return Uf(s,r,o)}(e,n)}}})}});function Np(e,t,n,r,s,a,i){void 0===a&&(a="NHWC"),ti(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var o=e,l=t,c=!1;3===t.rank&&(c=!0,l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),o=[1,e[0],e[1],e[2]]),ti(4===o.length,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+o.length+"."}),ti(4===l.rank,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank}),ti(4===n.rank,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var d="NHWC"===a?o[3]:o[1],u="NHWC"===a?l.shape[3]:l.shape[1];ti(d===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+n.shape[2]+"."}),ti(u===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+u+") must match output depth for filter "+n.shape[3]+"."}),null!=i&&ti(oi(s),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+s+"."});var h=Bd(a),A=gd(o,n.shape,r,1,s,i,!1,h),f=ho.runKernelFunc(function(e,t){var r=e.conv2dDerInput(l,n,A);return t([n,l]),r},{dy4D:l,filter:n},function(e,t){var n=t[0],o=t[1];return{dy4D:function(){return kp(e,n,r,s,a,1,i)},filter:function(){return _p(e,o,n.shape,r,s,a,i)}}});return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function jp(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],s=t[2];return 1===n&&1===r&&1===s}function Cp(e,t,n,r,s){ti(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var a=e,i=t,o=!1;4===t.rank&&(o=!0,i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),a=[1,e[0],e[1],e[2],e[3]]);var l=a[4],c=i.shape[4];ti(5===a.length,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."}),ti(5===i.rank,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank}),ti(5===n.rank,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),ti(l===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[3]+"."}),ti(c===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."});var d=xd(a,n.shape,r,1,s),u=ho.runKernelFunc(function(e){return e.conv3dDerInput(i,n,d)},{dy5D:i});return o?u.as4D(u.shape[1],u.shape[2],u.shape[3],u.shape[4]):u}var Bp=Ll({conv1d_:function(e,t,n,r,s,a,i){void 0===s&&(s="NWC"),void 0===a&&(a=1);var o=Nl(e,"x","conv1d"),l=Nl(t,"filter","conv1d"),c=o,d=!1;2===o.rank&&(d=!0,c=o.as3D(1,o.shape[0],o.shape[1])),ti(3===c.rank,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),ti(3===l.rank,function(){return"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."}),null!=i&&ti(oi(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}),ti(c.shape[2]===l.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+l.shape[1]+"."}),ti(Cd(n,a),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"}),ti("NWC"===s,function(){return"Error in conv1d: got dataFormat of "+s+" but only NWC is currently supported."});var u=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),h=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),A=kp(h,u,[1,n],r,"NHWC",[1,a],i);return d?A.as2D(A.shape[2],A.shape[3]):A.as3D(A.shape[0],A.shape[2],A.shape[3])}}),kp=Ll({conv2d_:function(e,t,n,r,s,a,i){void 0===s&&(s="NHWC"),void 0===a&&(a=[1,1]);var o=Nl(e,"x","conv2d"),l=Nl(t,"filter","conv2d"),c=o,d=!1;3===o.rank&&(d=!0,c=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),ti(4===c.rank,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),ti(4===l.rank,function(){return"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."}),null!=i&&ti(oi(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var u="NHWC"===s?c.shape[3]:c.shape[1];ti(u===l.shape[2],function(){return"Error in conv2d: depth of input ("+u+") must match input depth for filter "+l.shape[2]+"."}),ti(Cd(n,a),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"});var h=Bd(s),A=gd(c.shape,l.shape,n,a,r,i,!1,h),f=[l,c],p=ho.runKernelFunc(function(e,t){var n=e.conv2d(c,l,A);return t([l,c]),n},{x:c,filter:l},function(e,t){var i=t,o=i[0],l=i[1];return ti(jd(a),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}),{x:function(){return Ep(l.shape,e,o,n,r,s)},filter:function(){return _p(l,e,o.shape,n,r,s)}}},"Conv2D",A,f);return d?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),Sp=Ll({conv3d_:function(e,t,n,r,s,a){void 0===s&&(s="NDHWC"),void 0===a&&(a=[1,1,1]);var i=Nl(e,"x","conv3d"),o=Nl(t,"filter","conv3d"),l=i,c=!1;4===i.rank&&(c=!0,l=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),ti(5===l.rank,function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."}),ti(5===o.rank,function(){return"Error in conv3d: filter must be rank 5, but got rank "+o.rank+"."}),ti(l.shape[4]===o.shape[3],function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match input depth for filter "+o.shape[3]+"."}),ti(function(e,t){return jp(e)||jp(t)}(n,a),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),ti("NDHWC"===s,function(){return"Error in conv3d: got dataFormat of "+s+" but only NDHWC is currently supported."});var d=xd(l.shape,o.shape,n,a,r),u=ho.runKernelFunc(function(e,t){var n=e.conv3d(l,o,d);return t([l,o]),n},{x:l,$filter:o},function(e,t){ti(jp(a),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"});var s=t[0],i=t[1];return{x:function(){return Cp(s.shape,e,i,n,r)},$filter:function(){return function(e,t,n,r,s){var a=e;4===e.rank&&(a=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var i=t;4===i.rank&&(i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),ti(5===a.rank,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+a.shape+"."}),ti(5===i.rank,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+i.shape+"."}),ti(5===n.length,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."}),ti(a.shape[4]===n[3],function(){return"Error in conv3dDerFilter: depth of input "+a.shape[4]+") must match input depth in filter ("+n[3]+"."}),ti(i.shape[4]===n[4],function(){return"Error in conv3dDerFilter: depth of dy ("+i.shape[4]+") must match output depth for filter ("+n[4]+")."});var o=xd(a.shape,n,r,1,s);return ho.runKernelFunc(function(e){return e.conv3dDerFilter(a,i,o)},{x5D:a,dy5D:i})}(s,e,i.shape,n,r)}}});return c?u.as4D(u.shape[1],u.shape[2],u.shape[3],u.shape[4]):u}}),_p=Ll({conv2dDerFilter_:function(e,t,n,r,s,a,i){void 0===a&&(a="NHWC");var o=e;3===e.rank&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var l=t;3===l.rank&&(l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),ti(4===o.rank,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+o.shape+"."}),ti(4===l.rank,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."}),ti(4===n.length,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var c="NHWC"===a?o.shape[3]:o.shape[1],d="NHWC"===a?l.shape[3]:l.shape[1];ti(c===n[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."}),ti(d===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+d+") must match output depth for filter ("+n[3]+")."}),null!=i&&ti(oi(s),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+s+"."});var u=Bd(a),h=gd(o.shape,n,r,1,s,i,!1,u);return ho.runKernelFunc(function(e){return e.conv2dDerFilter(o,l,h)},{x4D:o,dy4D:l})}}),Ep=Ll({conv2dDerInput_:Np}),Fp=Ll({depthwiseConv2d_:function(e,t,n,r,s,a,i){void 0===s&&(s="NHWC"),void 0===a&&(a=[1,1]);var o=Nl(e,"x","depthwiseConv2d"),l=Nl(t,"filter","depthwiseConv2d"),c=o,d=!1;3===o.rank&&(d=!0,c=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),ti(4===c.rank,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),ti(4===l.rank,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+l.rank+"."}),ti(c.shape[3]===l.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+l.shape[2]+"."}),null==a&&(a=[1,1]),ti(Cd(n,a),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),null!=i&&ti(oi(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var u=gd(c.shape,l.shape,n,a,r,i,!0),h=[c,l],A=ho.runKernelFunc(function(e,t){var n=e.depthwiseConv2D(c,l,u);return t([c,l]),n},{x:c,filter:l},function(e,t){ti(jd(a),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"});var n=t[0],r=t[1];return{x:function(){return Tp(n.shape,e,r,u)},filter:function(){return Ip(n,e,r.shape,u)}}},"DepthwiseConv2dNative",u,h);return d?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}}),Tp=Ll({depthwiseConv2dDerInput_:function(e,t,n,r){var s=t,a=!1;3===t.rank&&(a=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=ho.runKernelFunc(function(e){return e.depthwiseConv2DDerInput(s,n,r)},{dy4D:s});return a?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}}),Ip=Ll({depthwiseConv2dDerFilter_:function(e,t,n,r){var s=e;3===e.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=t;return 3===a.rank&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),ho.runKernelFunc(function(e){return e.depthwiseConv2DDerFilter(s,a,r)},{x4D:s,dy4D:a})}}),Dp=Ll({separableConv2d_:function(e,t,n,r,s,a,i){void 0===a&&(a=[1,1]),void 0===i&&(i="NHWC");var o=Nl(e,"x","separableConv2d"),l=Nl(t,"depthwiseFilter","separableConv2d"),c=Nl(n,"pointwiseFilter","separableConv2d"),d=o,u=!1;if(3===o.rank&&(u=!0,d=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ti(4===d.rank,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."}),ti(4===l.rank,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."}),ti(4===c.rank,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."}),ti(1===c.shape[0],function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),ti(1===c.shape[1],function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var h=l.shape[2],A=l.shape[3];ti(c.shape[2]===h*A,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*A+", but got "+c.shape[2]+"."});var f=Fp(d,l,r,s,i,a),p=kp(f,c,1,"valid",i);return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),Lp=Ll({conv2dTranspose_:function(e,t,n,r,s,a){return Np(n,Nl(e,"x","conv2dTranspose"),Nl(t,"filter","conv2dTranspose"),r,s,"NHWC",a)}}),Pp=Ll({conv3dTranspose_:function(e,t,n,r,s){return Cp(n,Nl(e,"x","conv3dTranspose"),Nl(t,"filter","conv3dTranspose"),r,s)}}),Rp=Ll({matMul_:function(e,t,n,r){var s;void 0===n&&(n=!1),void 0===r&&(r=!1);var a=Nl(e,"a","matMul"),i=Nl(t,"b","matMul");s=ao(a,i),a=s[0],i=s[1];var o=n?a.shape[a.rank-2]:a.shape[a.rank-1],l=r?i.shape[i.rank-1]:i.shape[i.rank-2],c=n?a.shape[a.rank-1]:a.shape[a.rank-2],d=r?i.shape[i.rank-2]:i.shape[i.rank-1],u=a.shape.slice(0,-2),h=i.shape.slice(0,-2),A=ai(u),f=ai(h);ti(a.rank>=2&&i.rank>=2&&a.rank===i.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+i.rank+"."}),ti(ii(u,h),function(){return"Error in matMul: outer dimensions ("+u+") and ("+h+") of Tensors with shapes "+a.shape+" and "+i.shape+" must match."}),ti(o===l,function(){return"Error in matMul: inner shapes ("+o+") and ("+l+") of Tensors with shapes "+a.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var p=a.shape.slice(0,-2).concat([c,d]),m=n?a.as3D(A,o,c):a.as3D(A,c,o),g=r?i.as3D(f,d,l):i.as3D(f,l,d),x={transposeA:n,transposeB:r};return ho.runKernelFunc(function(e,t){var s=e.batchMatMul(m,g,n,r);return t([m,g]),s},{a:m,b:g},function(e,t){var s=t,a=s[0],i=s[1];return n||r?!n&&r?{a:function(){return e.matMul(i,!1,!1)},b:function(){return e.matMul(a,!0,!1)}}:n&&!r?{a:function(){return i.matMul(e,!1,!0)},b:function(){return a.matMul(e,!1,!1)}}:{a:function(){return i.matMul(e,!0,!0)},b:function(){return e.matMul(a,!0,!0)}}:{a:function(){return e.matMul(i,!1,!0)},b:function(){return a.matMul(e,!0,!1)}}},"BatchMatMul",x).reshape(p)}}),Up=Ll({dot_:function(e,t){var n=Nl(e,"t1","dot"),r=Nl(t,"t2","dot");ti(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var s=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];return ti(s===a,function(){return"Error in dot: inner dimensions of inputs must match, but got "+s+" and "+a+"."}),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Op=Ll({outerProduct_:function(e,t){var n=Nl(e,"v1","outerProduct"),r=Nl(t,"v2","outerProduct");return ti(1===n.rank&&1===r.rank,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Mp=Ll({reverse_:function(e,t){var n=Nl(e,"x","reverse");if(0===n.rank)return n.clone();var r=Ai(t,n.shape);return ho.runKernelFunc(function(e){return e.reverse(n,r)},{$x:n},function(e){return{$x:function(){return e.reverse(r)}}}).reshapeAs(n)}}),Qp=Ll({reverse1d_:function(e){var t=Nl(e,"x","reverse");return ti(1===t.rank,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),Mp(t,0)}}),Hp=Ll({reverse2d_:function(e,t){var n=Nl(e,"x","reverse");return ti(2===n.rank,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),Mp(n,t)}}),zp=Ll({reverse3d_:function(e,t){var n=Nl(e,"x","reverse");return ti(3===n.rank,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),Mp(n,t)}}),Wp=Ll({reverse4d_:function(e,t){var n=Nl(e,"x","reverse");return ti(4===n.rank,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),Mp(n,t)}});function Vp(e,t,n,r,s,a){var i=Nl(e,"x","maxPool"),o=i,l=!1;3===i.rank&&(l=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),null==r&&(r=[1,1]),ti(4===o.rank,function(){return"Error in maxPool: input must be rank 4 but got rank "+o.rank+"."}),ti(Cd(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),null!=a&&ti(oi(s),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+s+"."});var c=pd(o.shape,t,n,r,s,a);if(1===c.filterWidth&&1===c.filterHeight&&ii(c.inShape,c.outShape))return i.clone();var d=[o],u=ho.runKernelFunc(function(e,t){var n=e.maxPool(o,c);return t([o,n]),n},{x:o},function(e,a){var i=a[0],o=a[1];return{x:function(){return function(e,t,n,r,s,a,i,o){var l=Nl(e,"dy","maxPoolBackprop"),c=Nl(t,"input","maxPoolBackprop"),d=Nl(n,"output","maxPoolBackprop");ti(c.rank===l.rank,function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+l.rank+")"}),null==a&&(a=[1,1]),ti(Cd(s,a),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+s+" and dilations '"+a+"'"}),ti(4===l.rank,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."}),ti(4===c.rank,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."});var u=pd(c.shape,r,s,a,i,o);return ho.runKernelFunc(function(e){return e.maxPoolBackprop(l,c,d,u)},{$dy:l,$input:c})}(e,i,o,t,n,r,s)}}},"MaxPool",c,d);return l?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}function Kp(e,t,n,r,s,a){var i=Nl(e,"x","avgPool","float32");null==r&&(r=[1,1]),ti(Cd(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var o=i,l=!1;3===i.rank&&(l=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),ti(4===o.rank,function(){return"Error in avgPool: x must be rank 4 but got rank "+o.rank+"."}),null!=a&&ti(oi(s),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+s+"."});var c=pd(o.shape,t,n,r,s,a);if(1===c.filterWidth&&1===c.filterHeight&&ii(c.inShape,c.outShape))return i.clone();var d=ho.runKernelFunc(function(e){return e.avgPool(o,c)},{x:o},function(e){return{x:function(){return function(e,t,n,r,s,a){var i=Nl(e,"dy","avgPoolBackprop"),o=Nl(t,"input","avgPoolBackprop");ti(o.rank===i.rank,function(){return"Rank of input ("+o.rank+") does not match rank of dy ("+i.rank+")"}),null==s&&(s=[1,1]),ti(Cd(r,s),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+s+"'"});var l=o,c=i,d=!1;3===o.rank&&(d=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]),c=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),ti(4===c.rank,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."}),ti(4===l.rank,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+l.rank+"."});var u=pd(l.shape,n,r,s,a),h=ho.runKernelFunc(function(e){return e.avgPoolBackprop(c,l,u)},{dy4D:c,input4D:l});return d?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}(e,o,t,n,r,s)}}},"AvgPool",c);return d=d.cast(i.dtype),l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}var Gp=Ll({maxPool_:function(e,t,n,r,s){return Vp(e,t,n,1,r,s)}}),qp=Ll({avgPool_:function(e,t,n,r,s){return Kp(e,t,n,1,r,s)}}),Xp=Ll({pool_:function(e,t,n,r,s,a){null==s&&(s=[1,1]),null==a&&(a=1),0===r&&(r="valid");var i=Nl(e,"x","maxPool"),o=i,l=!1;3===i.rank&&(l=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),ti(Cd(a,s),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+s+"'"});var c,d=pd(o.shape,t,a,s,r),u=[d.dilationHeight,d.dilationWidth];c="same"===r?function(e,t){var n=e.map(function(e,n){return e+(e-1)*(t[n]-1)}).map(function(e){return e-1}),r=n.map(function(e){return Math.floor(e/2)}),s=n.map(function(e,t){return e-r[t]});return n.map(function(e,t){return[r[t],s[t]]})}([d.filterHeight,d.filterWidth],u):[[0,0],[0,0]];var h=1===u[0]&&1===u[1],A=function(e,t,n){var r=n.map(function(e){return e[0]}),s=n.map(function(e){return e[1]}),a=e.concat(r,s),i=t.map(function(e,t){return(e-a[t]%e)%e}),o=s.map(function(e,t){return e+i[t]});return[t.map(function(e,t){return[r[t],o[t]]}),t.map(function(e,t){return[0,i[t]]})]}([d.inHeight,d.inWidth],u,c),f=A[0],p=A[1],m=h?r:"valid",g=h?o:Rc(o,u,f),x=("avg"===n?function(){return Kp(g,t,a,1,m)}:function(){return Vp(g,t,a,1,m)})(),v=h?x:gc(x,u,p);return l?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),Yp=Ll({maxPool3d_:function(e,t,n,r,s,a,i){void 0===a&&(a="NDHWC");var o=Nl(e,"x","maxPool3d"),l=o,c=!1;4===o.rank&&(c=!0,l=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),null==i&&(i=[1,1,1]),ti(5===l.rank,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+l.rank+"."}),ti("NDHWC"===a,function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),ti(Cd(n,i),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),null!=s&&ti(oi(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var d=md(l.shape,t,n,i,r,s,a),u=ho.runKernelFunc(function(e,t){var n=e.maxPool3d(l,d);return t([l,n]),n},{x:l},function(e,a){var o=a[0],l=a[1];return{x:function(){return function(e,t,n,r,s,a,i,o){var l=Nl(e,"dy","maxPool3dBackprop"),c=Nl(t,"input","maxPool3dBackprop"),d=Nl(n,"output","maxPool3dBackprop"),u=l,h=c,A=d,f=!1;4===c.rank&&(f=!0,u=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]),h=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]),A=d.as5D(1,d.shape[0],d.shape[1],d.shape[2],d.shape[3])),ti(5===u.rank,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+u.rank+"."}),ti(5===h.rank,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+h.rank+"."}),ti(5===A.rank,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+A.rank+"."}),null==a&&(a=[1,1,1]),ti(Cd(s,a),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+s+" and dilations '"+a+"'"}),null!=o&&ti(oi(i),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var p=md(h.shape,r,s,a,i,o),m=ho.runKernelFunc(function(e){return e.maxPool3dBackprop(u,h,A,p)},{dy5D:u,input5D:h});return f?m.as4D(m.shape[1],m.shape[2],m.shape[3],m.shape[4]):m}(e,o,l,t,n,i,r,s)}}});return c?u.as4D(u.shape[1],u.shape[2],u.shape[3],u.shape[4]):u}}),Jp=Ll({avgPool3d_:function(e,t,n,r,s,a,i){void 0===a&&(a="NDHWC");var o=Nl(e,"x","avgPool3d","float32"),l=o,c=!1;4===o.rank&&(c=!0,l=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),null==i&&(i=[1,1,1]),ti(5===l.rank,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+l.rank+"."}),ti("NDHWC"===a,function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),ti(Cd(n,i),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),null!=s&&ti(oi(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var d=md(l.shape,t,n,i,r,s,a),u=ho.runKernelFunc(function(e){return e.avgPool3d(l,d)},{x:l},function(e){return{x:function(){return function(e,t,n,r,s,a,i){var o=Nl(e,"dy","avgPool3dBackprop"),l=Nl(t,"input","avgPool3dBackprop"),c=o,d=l,u=!1;4===l.rank&&(u=!0,c=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]),d=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),ti(5===c.rank,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."}),ti(5===d.rank,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+d.rank+"."}),null==s&&(s=[1,1,1]),ti(Cd(r,s),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+s+"'"}),null!=i&&ti(oi(a),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var h=md(d.shape,n,r,s,a,i),A=ho.runKernelFunc(function(e){return e.avgPool3dBackprop(c,d,h)},{dy5D:c,input5D:d});return u?A.as4D(A.shape[1],A.shape[2],A.shape[3],A.shape[4]):A}(e,l,t,n,i,r,s)}}});return u=u.cast(l.dtype),c?u.as4D(u.shape[1],u.shape[2],u.shape[3],u.shape[4]):u}}),Zp=Ll({slice_:function(e,t,n){var r,s,a=Nl(e,"x","slice");if(0===a.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(a.rank-1).fill(0)):t.length<a.rank?t.concat(new Array(a.rank-t.length).fill(0)):t.slice()).forEach(function(e){ti(-1!==e,function(){return"slice() does not support negative begin indexing."})}),s=(s=null==n?new Array(a.rank).fill(-1):"number"==typeof n?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map(function(e,t){return e>=0?e:(ti(-1===e,function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."}),a.shape[t]-r[t])}),$c(a,r,s);var i=a.shape,o={begin:r,size:s};return ho.runKernelFunc(function(e){return e.slice(a,r,s)},{x:a},function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],i[n]-r[n]-s[n]]);return{x:function(){return e.pad(t)}}},"Slice",o)}}),$p=Ll({slice1d_:function(e,t,n){var r=Nl(e,"x","slice1d");return ti(1===r.rank,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Zp(r,[t],[n])}}),em=Ll({slice2d_:function(e,t,n){var r=Nl(e,"x","slice2d");return ti(2===r.rank,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Zp(r,t,n)}}),tm=Ll({slice3d_:function(e,t,n){var r=Nl(e,"x","slice3d");return ti(3===r.rank,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Zp(r,t,n)}}),nm=Ll({slice4d_:function(e,t,n){var r=Nl(e,"x","slice4d");return ti(4===r.rank,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Zp(r,t,n)}});function rm(e,t,n,r,s){return t.rank<n.rank&&(t=t.reshape(Sl(t.shape,r))),e.rank<n.rank&&(e=e.reshape(Sl(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==s?r:r.transpose(s)}}}var sm=Ll({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nl(e,"x","all","bool"),s=Ai(t,r.shape),a=s,i=El(a,r.rank);null!=i&&(r=r.transpose(i),a=Tl(a.length,r.rank));var o=ho.runKernelFunc(function(e){return e.all(r,a)},{$x:r});if(n){var l=Sl(o.shape,s);return o.reshape(l)}return o}}),am=Ll({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nl(e,"x","any","bool"),s=Ai(t,r.shape),a=s,i=El(a,r.rank);null!=i&&(r=r.transpose(i),a=Tl(a.length,r.rank));var o=ho.runKernelFunc(function(e){return e.any(r,a)},{$x:r});if(n){var l=Sl(o.shape,s);return o.reshape(l)}return o}}),im=Ll({argMax_:function(e,t){void 0===t&&(t=0);var n=Nl(e,"x","argMax");null==t&&(t=0);var r=Ai(t,n.shape),s=El(r,n.rank);null!=s&&(n=n.transpose(s),r=Tl(r.length,n.rank));var a={axis:r[0]},i=[n];return ho.runKernelFunc(function(e,t){var s=e.argMax(n,r[0]);return t([n]),s},{x:n},function(e,t){var n=t[0];return{x:function(){return Jl(n)}}},"ArgMax",a,i)}}),om=Ll({argMin_:function(e,t){void 0===t&&(t=0);var n=Nl(e,"x","argMin");null==t&&(t=0);var r=Ai(t,n.shape),s=El(r,n.rank);return null!=s&&(n=n.transpose(s),r=Tl(r.length,n.rank)),ho.runKernelFunc(function(e,t){var s=e.argMin(n,r[0]);return t([n]),s},{$x:n},function(e,t){var n=t[0];return{$x:function(){return Jl(n)}}})}}),lm=Ll({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nl(e,"x","logSumExp"),s=Ai(t,r.shape),a=r.max(s,!0),i=r.sub(a).exp().sum(s).log(),o=a.reshape(i.shape).add(i);if(n){var l=Sl(o.shape,s);return o.reshape(l)}return o}}),cm=Ll({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nl(e,"x","max"),s=r,a=Ai(t,r.shape),i=a,o=El(i,r.rank);null!=o&&(r=r.transpose(o),i=Tl(i.length,r.rank));var l=[r],c=ho.runKernelFunc(function(e,t){var n=e.max(r,i);return t([s,n]),n},{x:r},function(e,t){return rm(e,t[1],t[0],a,o)},"Max",{axes:i},l,[!0]);if(n){var d=Sl(c.shape,a);c=c.reshape(d)}return c}}),dm=Ll({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nl(e,"x","mean"),s=Ai(t,r.shape),a=ai(kl(r.shape,s)[1]);return id(function(e){var r=Ql(a);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return s.forEach(function(e){n[e]=1}),t.reshape(n).mul(Kl(e.shape,"float32")).div(a)}}})(r)}}),um=Ll({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nl(e,"x","min"),s=r,a=Ai(t,r.shape),i=a,o=El(i,r.rank);null!=o&&(r=r.transpose(o),i=Tl(i.length,r.rank));var l=[r],c=ho.runKernelFunc(function(e,t){var n=e.min(r,i);return t([s,n]),n},{x:r},function(e,t){return rm(e,t[1],t[0],a,o)},"Min",{axes:i},l,[!0]);if(n){var d=Sl(c.shape,a);c=c.reshape(d)}return c}}),hm=Ll({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ai(t,(e=Nl(e,"x","moments")).shape),s=e.mean(r,n),a=s.shape;n||(a=Sl(s.shape,r));var i=e.toFloat().sub(s.reshape(a)).square();return{mean:s,variance:i.mean(r,n)}}}),Am=Ll({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nl(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var s=Ai(t,r.shape);return id(function(e){var t=El(s,e.rank),r=s,a=e;null!=t&&(a=e.transpose(t),r=Tl(r.length,e.rank));var i=function(t){var n=e.shape.slice();return s.forEach(function(e){n[e]=1}),t.reshape(n).mul(Kl(e.shape,"float32"))},o={axes:r},l=ho.runKernelFunc(function(e){return e.sum(a,r)},{x:a},function(e){return{x:function(){return i(e)}}},"Sum",o);if(n){var c=Sl(l.shape,s);l=l.reshape(c)}return{value:l,gradFunc:i}})(r)}}),fm=Ll({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Nl(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var s=Ai(t,r.shape),a=El(s,r.rank),i=s,o=r;null!=a&&(o=r.transpose(a),i=Tl(i.length,r.rank));var l=ho.runKernelFunc(function(e){return e.prod(o,i)},{permutedX:o});if(n){var c=Sl(l.shape,s);l=l.reshape(c)}return l}}),pm=Ll({elu_:function(e){var t=Nl(e,"x","elu");return ho.runKernelFunc(function(e,n){var r=e.elu(t);return n([r]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return ho.runKernelFunc(function(t){return t.eluDer(e,n)},{dy:e,y:n})}}})}}),mm=Ll({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=Nl(e,"x","leakyRelu");return qf(Ql(t).mul(n),n)}}),gm=Ll({prelu_:function(e,t){var n=Nl(e,"x","prelu"),r=Nl(t,"alpha","prelu");return ho.runKernelFunc(function(e,t){var s=e.prelu(n,r);return t([n,r]),s},{x:n,alpha:r},function(e,t){var n=t[0],r=t[1],s=n.greater(0);return{x:function(){return Uf(s,e,e.mul(r))},alpha:function(){var t=Uf(s,Jl(e),e.mul(n)),a=Ad(r.shape,e.shape);return a.length>0&&(t=t.sum(a)),t.reshape(r.shape)}}},"Prelu")}}),xm=Ll({relu_:function(e){var t=Nl(e,"x","relu");return"bool"===t.dtype?t.toInt():ho.runKernelFunc(function(e,n){var r=e.relu(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}},"Relu")}}),vm=Ll({relu6_:function(e){var t=Nl(e,"x","relu6");return"bool"===t.dtype?t.toInt():ho.runKernelFunc(function(e,n){var r=e.relu6(t);return n([t]),r},{x:t},function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}},"Relu6")}}),bm=Ll({selu_:function(e){var t=Nl(e,"x","selu");return ho.runKernelFunc(function(e,n){var r=e.selu(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){var t=n.greater(Ql(0)),r=Ql(aA),s=Ql(iA),a=e.mul(s),i=e.mul(r).mul(n.toFloat().exp());return Uf(t,a,i)}}})}}),ym=Ll({transpose_:function(e,t){var n=Nl(e,"x","transpose");if(null==t&&(t=n.shape.map(function(e,t){return t}).reverse()),ti(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."}),t.forEach(function(e){ti(e>=0&&e<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t})}),n.rank<=1)return n.clone();var r={perm:t};return ho.runKernelFunc(function(e){return e.transpose(n,t)},{x:n},function(e){var n=Fl(t);return{x:function(){return e.transpose(n)}}},"Transpose",r)}}),wm=Ll({localResponseNormalization_:function(e,t,n,r,s){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===s&&(s=.5);var a=Nl(e,"x","localResponseNormalization");ti(4===a.rank||3===a.rank,function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+a.rank+"."}),ti(oi(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var i=a,o=!1;3===a.rank&&(o=!0,i=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var l=ho.runKernelFunc(function(e,a){var o=e.localResponseNormalization4D(i,t,n,r,s);return a([i,o]),o},{x4D:i},function(e,a){var i=a[0],o=a[1];return{x4D:function(){return ho.runKernelFunc(function(a){return a.LRNGrad(e,i,o,t,n,r,s)},{})}}});return o?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),Nm=Ll({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var s=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(Ql(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=Nl(e,"x","norm"),t,n),a=s.shape;if(r){var i=Ai(n,e.shape);a=Sl(s.shape,i)}return s.reshape(a)}}),jm=Ll({basicLSTMCell_:function(e,t,n,r,s,a){var i=Nl(e,"forgetBias","basicLSTMCell"),o=Nl(t,"lstmKernel","basicLSTMCell"),l=Nl(n,"lstmBias","basicLSTMCell"),c=Nl(r,"data","basicLSTMCell"),d=Nl(s,"c","basicLSTMCell"),u=Nl(a,"h","basicLSTMCell"),h=c.concat(u,1).matMul(o).add(l),A=h.shape[0],f=h.shape[1]/4,p=[A,f],m=h.slice([0,0],p),g=h.slice([0,f],p),x=h.slice([0,2*f],p),v=h.slice([0,3*f],p),b=m.sigmoid().mulStrict(g.tanh()).addStrict(d.mulStrict(i.add(x).sigmoid())),y=b.tanh().mulStrict(v.sigmoid());return[b,y]}}),Cm=Ll({multiRNNCell_:function(e,t,n,r){for(var s=Nl(t,"data","multiRNNCell"),a=jl(n,"c","multiRNNCell"),i=jl(r,"h","multiRNNCell"),o=s,l=[],c=0;c<e.length;c++){var d=e[c](o,a[c],i[c]);l.push(d[0]),l.push(d[1]),o=d[1]}var u=[],h=[];for(c=0;c<l.length;c+=2)u.push(l[c]),h.push(l[c+1]);return[u,h]}}),Bm=Ll({movingAverage_:function(e,t,n,r,s){void 0===s&&(s=!0);var a=Nl(e,"v","movingAverage"),i=Nl(t,"x","movingAverage"),o=Nl(n,"decay","movingAverage");io(a,i),ti(ii(a.shape,i.shape),function(){return"Shape mismatch in v and x"});var l=Ql(1),c=l.sub(o),d=i.sub(a).mul(c);if(s){ti(null!=r,function(){return"When using zeroDebias: true, step is required."});var u=Nl(r,"step","movingAverage");d=d.div(l.sub(np(o,u)))}return a.add(d)}}),km=Ll({stridedSlice_:function(e,t,n,r,s,a,i,o,l){if(void 0===s&&(s=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===l&&(l=0),null==r&&(r=new Array(t.length)),0!==i)throw new Error("ellipsis mask is not yet supported");var c=Nl(e,"x","stridedSlice"),d=ed(o),u=c.shape.slice();d.forEach(function(e){t[e]=0,n[e]=1,u.splice(e,0,1)}),c=c.reshape(u);for(var h=0;h<c.rank;h++)t[h]=nd(s,t,r,c.shape,h),n[h]=rd(a,n,r,c.shape,h),r[h]=r[h]||1;var A=ed(l);A.forEach(function(e){n[e]=t[e]+1,r[e]=1});var f=td(t,n,r),p=f.filter(function(e,t){return-1===A.indexOf(t)});return r.every(function(e){return 1===e})?Zp(c,t,f).reshape(p):ho.runKernelFunc(function(e){return e.stridedSlice(c,t,n,r)},{$x:c}).reshape(p)}}),Sm=Ll({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=Nl(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var s=r.shape[r.shape.length-1];if(t>s)throw new Error("'k' passed to topk() must be <= the last dimension ("+s+") but got "+t);var a=ho.runKernelFunc(function(e){return e.topk(r,t,n)},{$x:r});return{values:a[0],indices:a[1]}}}),_m=Ll({scatterND_:function(e,t,n){var r=Nl(e,"indices","scatterND","int32"),s=Nl(t,"updates","scatterND");return Jc(s,r,n),ho.runKernelFunc(function(e){return e.scatterND(r,s,n)},{indices:r,updates:s},null,"ScatterNd",{shape:n})}}),Em=Ll({fft_:function(e){ti("complex64"===e.dtype,function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return ho.runKernelFunc(function(e){return e.fft(r)},{input:e}).reshape(e.shape)}}),Fm=Ll({ifft_:function(e){ti("complex64"===e.dtype,function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return ho.runKernelFunc(function(e){return e.ifft(r)},{input:e}).reshape(e.shape)}}),Tm=Ll({rfft_:function(e,t){ti("float32"===e.dtype,function(){return"The dtype for rfft() must be real value but got "+e.dtype});var n,r=e.shape[e.shape.length-1],s=e.size/r;if(null!=t&&t<r){var a=e.shape.map(function(e){return 0}),i=e.shape.map(function(e){return e});i[e.shape.length-1]=t,n=e.slice(a,i),r=t}else if(null!=t&&t>r){var o=e.shape.map(function(e){return e});o[e.shape.length-1]=t-r,n=e.concat(Gl(o),e.shape.length-1),r=t}else n=e;var l=n.zerosLike(),c=Pl(n,l).as2D(s,r),d=Em(c),u=Math.floor(r/2)+1,h=Rl(d),A=Ul(d),f=h.split([u,r-u],h.shape.length-1),p=A.split([u,r-u],A.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=u,Pl(f[0],p[0]).reshape(m)}}),Im=Ll({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),s=Fm(r);return Rl(s)}var a=[n,2*(t-1)],i=Rl(e).as2D(n,t),o=Ul(e).as2D(n,t),l=i.slice([0,1],[n,t-2]).reverse(1),c=o.slice([0,1],[n,t-2]).reverse(1).mul(Ql(-1)),d=i.concat(l,1),u=o.concat(c,1);return r=Pl(d,u).as2D(a[0],a[1]),s=Fm(r),Rl(s)}}),Dm=Object.freeze({fft:Em,ifft:Fm,rfft:Tm,irfft:Im}),Lm=Ll({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var s=Nl(e,"sparseIndices","sparseToDense","int32"),a=Nl(t,"sparseValues","sparseToDense"),i=Nl(r,"defaultValue","sparseToDense",a.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var s=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(n.length!==a)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+a+".");var i=t.size;if(0!==t.rank&&(1!==t.rank||i!==s))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+s+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(s,a,n,i),ho.runKernelFunc(function(e){return e.sparseToDense(s,a,n,i)},{$sparseIndices:s,$sparseValues:a,$defaultValue:i})}}),Pm=Ll({gatherND_:function(e,t){var n=Nl(t,"indices","gatherND","int32"),r=Nl(e,"x","gatherND");return ho.runKernelFunc(function(e){return e.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),Rm=Ll({diag_:function(e){var t=Nl(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return ho.runKernelFunc(function(e){return e.diag(t)},{$x:t}).reshape(n)}}),Um=Ll({dropout_:function(e,t,n,r){var s=Nl(e,"x","dropout");if(ti("float32"===s.dtype,function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+s.dtype+" tensor instead."}),ti(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),0===t)return e instanceof Xi?s.clone():s;var a=function(e,t){if(null==t)return e.shape.slice();if(ii(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(s,n),i=1-t,o=Lc(a,0,1,"float32",r).add(i).floor().div(i);return s.mul(o)}});function Om(e,t,n){for(var r=1-e%2,s=new Float32Array(e),a=0;a<e;++a){var i=2*Math.PI*a/(e+r-1);s[a]=t-n*Math.cos(i)}return Hl(s,"float32")}var Mm,Qm=Ll({hannWindow_:function(e){return Om(e,.5,.5)}}),Hm=Ll({hammingWindow_:function(e){return Om(e,.54,.46)}}),zm=Ll({frame_:function(e,t,n,r,s){void 0===r&&(r=!1),void 0===s&&(s=0);for(var a=0,i=[];a+t<=e.size;)i.push(Zp(e,a,t)),a+=n;if(r)for(;a<e.size;){var o=a+t-e.size,l=Zl([Zp(e,a,t-o),ql([o],s)]);i.push(l),a+=n}return 0===i.length?zl([],[0,t]):Zl(i).as2D(i.length,t)}}),Wm=Ll({stft_:function(e,t,n,r,s){var a;void 0===s&&(s=Qm),null==r&&(a=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var i=zm(e,t,n),o=ep(i,s(t)),l=[],c=0;c<i.shape[0];c++)l.push(Tm(o.slice([c,0],[1,t]),r));return Zl(l)}}),Vm=Object.freeze({hannWindow:Qm,hammingWindow:Hm,frame:zm,stft:Wm});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Mm||(Mm={}));var Km=Ll({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=Mm.SUM_BY_NONZERO_WEIGHTS);var s=Nl(e,"labels","absoluteDifference"),a=Nl(t,"predictions","absoluteDifference"),i=null;null!=n&&(i=Nl(n,"weights","absoluteDifference")),ni(s.shape,a.shape,"Error in absoluteDifference: ");var o=s.sub(a).abs();return Gm(o,i,r)}}),Gm=Ll({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=Mm.SUM_BY_NONZERO_WEIGHTS);var r=Nl(e,"losses","computeWeightedLoss"),s=null;null!=t&&(s=Nl(t,"weights","computeWeightedLoss"));var a=null==s?r:r.mul(s);if(n===Mm.NONE)return a;if(n===Mm.SUM)return a.sum();if(n===Mm.MEAN){if(null==s)return a.mean();var i=r.size/s.size,o=a.sum().div(s.sum());return i>1?o.div(Ql(i)):o}if(n===Mm.SUM_BY_NONZERO_WEIGHTS){if(null==s)return a.sum().div(Ql(r.size));var l=s.mul(Kl(r.shape)).notEqual(Ql(0)).sum().toFloat();return a.sum().div(l)}throw Error("Unknown reduction: "+n)}}),qm=Ll({cosineDistance_:function(e,t,n,r,s){void 0===s&&(s=Mm.SUM_BY_NONZERO_WEIGHTS);var a=Nl(e,"labels","cosineDistance"),i=Nl(t,"predictions","cosineDistance"),o=null;null!=r&&(o=Nl(r,"weights","cosineDistance")),ni(a.shape,i.shape,"Error in cosineDistance: ");var l=Ql(1).sub(a.mul(i).sum(n,!0));return Gm(l,o,s)}}),Xm=Ll({hingeLoss_:function(e,t,n,r){void 0===r&&(r=Mm.SUM_BY_NONZERO_WEIGHTS);var s=Nl(e,"labels","hingeLoss"),a=Nl(t,"predictions","hingeLoss"),i=null;null!=n&&(i=Nl(n,"weights","hingeLoss")),ni(s.shape,a.shape,"Error in hingeLoss: ");var o=Ql(1);s=Ql(2).mul(s).sub(o);var l=o.sub(s.mul(a)).relu();return Gm(l,i,r)}}),Ym=Ll({huberLoss_:function(e,t,n,r,s){void 0===r&&(r=1),void 0===s&&(s=Mm.SUM_BY_NONZERO_WEIGHTS);var a=Nl(e,"labels","huberLoss"),i=Nl(t,"predictions","huberLoss"),o=null;null!=n&&(o=Nl(n,"weights","huberLoss")),ni(a.shape,i.shape,"Error in huberLoss: ");var l=Ql(r),c=i.sub(a).abs(),d=Yf(c,l),u=c.sub(d),h=Ql(.5).mul(d.square()).add(l.mul(u));return Gm(h,o,s)}}),Jm=Ll({logLoss_:function(e,t,n,r,s){void 0===r&&(r=1e-7),void 0===s&&(s=Mm.SUM_BY_NONZERO_WEIGHTS);var a=Nl(e,"labels","logLoss"),i=Nl(t,"predictions","logLoss"),o=null;null!=n&&(o=Nl(n,"weights","logLoss")),ni(a.shape,i.shape,"Error in logLoss: ");var l=Ql(1),c=Ql(r),d=a.mul(i.add(c).log()).neg().sub(l.sub(a).mul(l.sub(i).add(c).log()));return Gm(d,o,s)}}),Zm=Ll({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=Mm.SUM_BY_NONZERO_WEIGHTS);var s=Nl(e,"labels","meanSquaredError"),a=Nl(t,"predictions","meanSquaredError"),i=null;null!=n&&(i=Nl(n,"weights","meanSquaredError")),ni(s.shape,a.shape,"Error in meanSquaredError: ");var o=s.squaredDifference(a);return Gm(o,i,r)}}),$m=Ll({sigmoidCrossEntropy_:function(e,t,n,r,s){void 0===r&&(r=0),void 0===s&&(s=Mm.SUM_BY_NONZERO_WEIGHTS);var a=Nl(e,"multiClassLabels","sigmoidCrossEntropy"),i=Nl(t,"logits","sigmoidCrossEntropy"),o=null;if(null!=n&&(o=Nl(n,"weights","sigmoidCrossEntropy")),ni(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var l=Ql(r),c=Ql(1),d=Ql(.5);a=a.mul(c.sub(l)).add(d.mul(l))}var u=function(e,t){var n=Nl(e,"labels","sigmoidCrossEntropyWithLogits"),r=Nl(t,"logits","sigmoidCrossEntropyWithLogits");ni(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var s=r.relu(),a=r.mul(n),i=r.abs().neg().exp().log1p();return s.sub(a).add(i)}(a,i);return Gm(u,o,s)}}),eg=Ll({softmaxCrossEntropy_:function(e,t,n,r,s){void 0===r&&(r=0),void 0===s&&(s=Mm.SUM_BY_NONZERO_WEIGHTS);var a=Nl(e,"onehotLabels","softmaxCrossEntropy"),i=Nl(t,"logits","softmaxCrossEntropy"),o=null;if(null!=n&&(o=Nl(n,"weights","softmaxCrossEntropy")),ni(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var l=Ql(r),c=Ql(1),d=Ql(a.shape[1]);a=a.mul(c.sub(l)).add(l.div(d))}var u=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return id(function(e,t,r){var s=t.logSumExp([n],!0),a=t.toFloat().sub(s);return r([e,a]),{value:a.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],s=t[1],a=Sl(e.shape,[n]);return[e.reshape(a).mul(r.toFloat().sub(s.exp())),e.reshape(a).mul(s.exp().sub(r.toFloat()))]}}})(e,t)}(a,i);return Gm(u,o,s)}}),tg=Object.freeze({get Reduction(){return Mm},absoluteDifference:Km,computeWeightedLoss:Gm,cosineDistance:qm,hingeLoss:Xm,huberLoss:Ym,logLoss:Jm,meanSquaredError:Zm,sigmoidCrossEntropy:$m,softmaxCrossEntropy:eg});function ng(e,t){return void 0===t&&(t=!1),ho.tidy(function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],s=jc(n),a=e.clone(),i=zl([[1]],[1,1]),o=i.clone(),l=n>=r?r:n,c=function(e){var t,l=a,c=o,d=s;t=ho.tidy(function(){var t=a.slice([e,e],[n-e,1]),l=t.norm(),c=a.slice([e,e],[1,1]),d=zl([[-1]]).where(c.greater(0),zl([[1]])),u=c.sub(d.mul(l)),h=t.div(u);o=1===h.shape[0]?i.clone():i.concat(h.slice([1,0],[h.shape[0]-1,h.shape[1]]),0);var A=d.matMul(u).div(l).neg(),f=a.slice([e,0],[n-e,r]),p=A.mul(o);if(0===e)a=f.sub(p.matMul(o.transpose().matMul(f)));else{var m=f.sub(p.matMul(o.transpose().matMul(f)));a=a.slice([0,0],[e,r]).concat(m,0)}var g=s.slice([0,e],[n,s.shape[1]-e]);if(0===e)s=g.sub(g.matMul(o).matMul(p.transpose()));else{var x=g.sub(g.matMul(o).matMul(p.transpose()));s=s.slice([0,0],[n,e]).concat(x,1)}return[o,a,s]}),o=t[0],a=t[1],s=t[2],vl([l,c,d])},d=0;d<l;++d)c(d);return!t&&n>r&&(s=s.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[s,a]})}var rg=Ll({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=Nl(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var s=r.shape,a=r.shape.slice(-2),i=a[0],o=a[1];if(!(t<=i))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+i+").");if(!(n<=o))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+o+").");t<0&&(t=i),n<0&&(n=o);var l=Xl(0,i,1,"int32").reshape([-1,1]),c=Xl(0,o,1,"int32"),d=ap(l,c),u=Df(d.lessEqual(Ql(+t,"int32")),d.greaterEqual(Ql(-n,"int32"))),h=Gl([i,o],r.dtype);return Oc(Hc(r.reshape([-1,i,o])).map(function(e){return Uf(u,e,h)})).reshape(s)}}),sg=Ll({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,ti(null!=e&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=e[0].shape[0],r=function(t){ti(e[t].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"})},s=1;s<e.length;++s)r(s)}else t=!0,e=rc(e,e.shape[0],0).map(function(e){return Uc(e,[0])});ti(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var a=[],i=e,o=function(e){a.push(ho.tidy(function(){var t=i[e];if(e>0)for(var n=0;n<e;++n){var r=Am(a[n].mulStrict(t)).mul(a[n]);t=t.sub(r)}return t.div(Nm(t,"euclidean"))}))};for(s=0;s<e.length;++s)o(s);return t?Oc(a,0):a}}),ag=Ll({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return ng(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(e,t){return e*t}),r=Hc(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),s=[],a=[];return r.forEach(function(e){var n=ng(e,t),r=n[0],i=n[1];s.push(r),a.push(i)}),[Oc(s,0).reshape(e.shape),Oc(a,0).reshape(e.shape)]}}),ig=Object.freeze({bandPart:rg,gramSchmidt:sg,qr:ag});function og(e,t,n,r,s,a){null==r&&(r=.5),null==s&&(s=Number.NEGATIVE_INFINITY),null==a&&(a=0);var i=e.shape[0];return n=Math.min(n,i),ti(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),ti(2===e.rank,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),ti(4===e.shape[1],function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),ti(1===t.rank,function(){return"scores must be a 1D tensor"}),ti(t.shape[0]===i,function(){return"scores has incompatible shape with boxes. Expected "+i+", but was "+t.shape[0]}),ti(0<=a&&a<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:a}}var lg=Ll({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=Nl(e,"images","resizeBilinear");ti(3===r.rank||4===r.rank,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),ti(2===t.length,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var s=r,a=!1;3===r.rank&&(a=!0,s=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],o=t[1],l=ho.runKernelFunc(function(e,t){return t([s]),e.resizeBilinear(s,i,o,n)},{x:s},function(e,t){return{x:function(){return ho.runKernelFunc(function(r){return r.resizeBilinearBackprop(e,t[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:i,newWidth:o});return a?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),cg=Ll({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=Nl(e,"images","resizeNearestNeighbor");ti(3===r.rank||4===r.rank,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),ti(2===t.length,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),ti("float32"===r.dtype||"int32"===r.dtype,function(){return"`images` must have `int32` or `float32` as dtype"});var s=r,a=!1;3===r.rank&&(a=!0,s=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],o=t[1],l=ho.runKernelFunc(function(e,t){return t([s]),e.resizeNearestNeighbor(s,i,o,n)},{batchImages:s},function(e,t){return{batchImages:function(){return ho.runKernelFunc(function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)},{})}}});return a?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),dg=Ll({nonMaxSuppression_:function(e,t,n,r,s){void 0===r&&(r=.5),void 0===s&&(s=Number.NEGATIVE_INFINITY);var a=Nl(e,"boxes","nonMaxSuppression"),i=Nl(t,"scores","nonMaxSuppression"),o=og(a,i,n,r,s);n=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;var l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return ho.runKernelFunc(function(e){return e.nonMaxSuppression(a,i,n,r,s)},{boxes:a,scores:i},null,"NonMaxSuppressionV3",l)}}),ug=Ll({nonMaxSuppressionWithScore_:function(e,t,n,r,s,a){void 0===r&&(r=.5),void 0===s&&(s=Number.NEGATIVE_INFINITY),void 0===a&&(a=0);var i=Nl(e,"boxes","nonMaxSuppression"),o=Nl(t,"scores","nonMaxSuppression"),l=og(i,o,n,r,s,a),c={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:s=l.scoreThreshold,softNmsSigma:a=l.softNmsSigma},d=ho.runKernel("NonMaxSuppressionV5",{boxes:i,scores:o},c);return{selectedIndices:d[0],selectedScores:d[1]}}}),hg=Ll({cropAndResize_:function(e,t,n,r,s,a){var i=Nl(e,"image","cropAndResize"),o=Nl(t,"boxes","cropAndResize","float32"),l=Nl(n,"boxInd","cropAndResize","int32");s=s||"bilinear",a=a||0;var c=o.shape[0];return ti(4===i.rank,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."}),ti(2===o.rank&&4===o.shape[1],function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+o.shape+"."}),ti(1===l.rank&&l.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+o.shape+"."}),ti(2===r.length,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),ti(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),ti("bilinear"===s||"nearest"===s,function(){return"method must be bilinear or nearest, but was "+s}),ho.runKernelFunc(function(e,t){return e.cropAndResize(i,o,l,r,s,a)},{images:i,boxes:o,boxInd:l},null,"CropAndResize",{method:s,extrapolationValue:a,cropSize:r})}}),Ag=Object.freeze({resizeBilinear:lg,resizeNearestNeighbor:cg,nonMaxSuppression:dg,nonMaxSuppressionAsync:function(e,t,n,r,s){return void 0===r&&(r=.5),void 0===s&&(s=Number.NEGATIVE_INFINITY),Oa(this,void 0,void 0,function(){var a,i,o,l,c,d,u;return Ma(this,function(h){switch(h.label){case 0:return a=Nl(e,"boxes","nonMaxSuppressionAsync"),i=Nl(t,"scores","nonMaxSuppressionAsync"),o=og(a,i,n,r,s),n=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold,[4,Promise.all([a.data(),i.data()])];case 1:return l=h.sent(),c=l[0],d=l[1],u=Pd(c,d,n,r,s),a!==e&&a.dispose(),i!==t&&i.dispose(),[2,u]}})})},nonMaxSuppressionWithScore:ug,nonMaxSuppressionWithScoreAsync:function(e,t,n,r,s,a){return void 0===r&&(r=.5),void 0===s&&(s=Number.NEGATIVE_INFINITY),void 0===a&&(a=0),Oa(this,void 0,void 0,function(){var i,o,l,c,d,u,h;return Ma(this,function(A){switch(A.label){case 0:return i=Nl(e,"boxes","nonMaxSuppressionAsync"),o=Nl(t,"scores","nonMaxSuppressionAsync"),l=og(i,o,n,r,s,a),n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,a=l.softNmsSigma,[4,Promise.all([i.data(),o.data()])];case 1:return c=A.sent(),d=c[0],u=c[1],h=Rd(d,u,n,r,s,a),i!==e&&i.dispose(),o!==t&&o.dispose(),[2,h]}})})},cropAndResize:hg}),fg=function(e,t){return!(e>0)||"linear"===t},pg=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},mg=function(e,t){var n=t,r=Ad(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},gg=function(e,t,n){if("linear"===t)return e;if("relu"===t)return xm(e);if("elu"===t)return pm(e);if("relu6"===t)return vm(e);if("prelu"===t)return gm(e,n);throw new Error("Unknown fused activation "+t+".")},xg=Ll({fusedMatMul_:function(e){var t,n=e.a,r=e.b,s=e.transposeA,a=void 0!==s&&s,i=e.transposeB,o=void 0!==i&&i,l=e.bias,c=e.activation,d=void 0===c?"linear":c,u=e.preluActivationWeights;if(!1===fg(ho.state.gradientDepth,d)){var h=Rp(n,r,a,o);return null!=l&&(h=Mf(h,l)),gg(h,d,u)}var A=Nl(n,"a","fused matMul"),f=Nl(r,"b","fused matMul");t=ao(A,f),A=t[0],f=t[1];var p=a?A.shape[A.rank-2]:A.shape[A.rank-1],m=o?f.shape[f.rank-1]:f.shape[f.rank-2],g=a?A.shape[A.rank-1]:A.shape[A.rank-2],x=o?f.shape[f.rank-2]:f.shape[f.rank-1],v=A.shape.slice(0,-2),b=f.shape.slice(0,-2),y=ai(v),w=ai(b);ti(A.rank>=2&&f.rank>=2&&A.rank===f.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+A.rank+" and "+f.rank+"."}),ti(ii(v,b),function(){return"Error in fused matMul: outer dimensions ("+v+") and ("+b+") of Tensors with shapes "+A.shape+" and "+f.shape+" must match."}),ti(p===m,function(){return"Error in fused matMul: inner shapes ("+p+") and ("+m+") of Tensors with shapes "+A.shape+" and "+f.shape+" and transposeA="+a+" and transposeB="+o+" must match."});var N,j,C=A.shape.slice(0,-2).concat([g,x]),B=a?A.as3D(y,p,g):A.as3D(y,g,p),k=o?f.as3D(w,x,m):f.as3D(w,m,x);null!=l&&fd(C,(N=ao(N=Nl(l,"bias","fused matMul"),A)[0]).shape),null!=u&&(j=Nl(u,"prelu weights","fused matMul"));var S={a:B,b:k};null!=l&&(S.bias=N),null!=u&&(S.preluActivationWeights=j);var _=[B,k];return ho.runKernelFunc(function(e,t){var n=e.fusedBatchMatMul({a:B,b:k,transposeA:a,transposeB:o,bias:N,activation:d,preluActivationWeights:j});return t([B,k,n]),n},S,function(e,t){var n=t[0],r=t[1],s=t[2],i=pg(e,s,d),c={};return null!=l&&(c={bias:function(){return mg(N,i)}}),a||o?!a&&o?Object.assign({a:function(){return i.matMul(r,!1,!1)},b:function(){return i.matMul(n,!0,!1)}},c):a&&!o?Object.assign({a:function(){return r.matMul(i,!1,!0)},b:function(){return n.matMul(i,!1,!1)}},c):Object.assign({a:function(){return r.matMul(i,!0,!0)},b:function(){return i.matMul(n,!0,!0)}},c):Object.assign({a:function(){return i.matMul(r,!1,!0)},b:function(){return n.matMul(i,!0,!1)}},c)},"_FusedMatMul",{transposeA:a,transposeB:o,activation:d},_,[!0]).reshape(C)}}),vg=Ll({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,s=e.pad,a=e.dataFormat,i=void 0===a?"NHWC":a,o=e.dilations,l=void 0===o?[1,1]:o,c=e.dimRoundingMode,d=e.bias,u=e.activation,h=void 0===u?"linear":u,A=e.preluActivationWeights;if(h=h||"linear",!1===fg(ho.state.gradientDepth,h)){var f=kp(t,n,r,s,i,l,c);return null!=d&&(f=Mf(f,d)),gg(f,h,A)}var p=Nl(t,"x","conv2d"),m=Nl(n,"filter","conv2d"),g=p,x=!1;3===p.rank&&(x=!0,g=p.as4D(1,p.shape[0],p.shape[1],p.shape[2])),ti(4===g.rank,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."}),ti(4===m.rank,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+m.rank+"."}),null!=c&&ti(oi(s),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+s+"."}),ti(g.shape[3]===m.shape[2],function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+m.shape[2]+"."}),ti(Cd(r,l),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),ti("NHWC"===i,function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."});var v,b,y=gd(g.shape,m.shape,r,l,s,c);null!=d&&(v=ao(v=Nl(d,"bias","fused conv2d"),p)[0],fd(y.outShape,v.shape)),null!=A&&(b=Nl(A,"prelu weights","fused conv2d"));var w={x:g,filter:m};null!=d&&(w.bias=v),null!=A&&(w.preluActivationWeights=b);var N=[m,g],j=ho.runKernelFunc(function(e,t){var n=e.fusedConv2d({input:g,filter:m,convInfo:y,bias:v,activation:h,preluActivationWeights:b});return t([m,g,n]),n},w,function(e,t){var n=t,a=n[0],i=n[1],o=n[2],c=pg(e,o,h);ti(jd(l),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+l+"'"});var u={};return null!=d&&(u={bias:function(){return mg(v,c)}}),Object.assign({x:function(){return Ep(i.shape,c,a,r,s)},filter:function(){return _p(i,c,a.shape,r,s)}},u)},"FusedConv2D",{convInfo:y,activation:h},N,[!0]);return x?j.as3D(j.shape[1],j.shape[2],j.shape[3]):j}}),bg=Ll({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,s=e.pad,a=e.dataFormat,i=void 0===a?"NHWC":a,o=e.dilations,l=void 0===o?[1,1]:o,c=e.dimRoundingMode,d=e.bias,u=e.activation,h=void 0===u?"linear":u,A=e.preluActivationWeights;if(!1===fg(ho.state.gradientDepth,h)){var f=Fp(t,n,r,s,i,l,c);return null!=d&&(f=Mf(f,d)),gg(f,h,A)}var p=Nl(t,"x","depthwiseConv2d"),m=Nl(n,"filter","depthwiseConv2d"),g=p,x=!1;3===p.rank&&(x=!0,g=p.as4D(1,p.shape[0],p.shape[1],p.shape[2])),ti(4===g.rank,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."}),ti(4===m.rank,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+m.rank+"."}),ti(g.shape[3]===m.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+m.shape[2]+"."}),null==l&&(l=[1,1]),ti(Cd(r,l),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),null!=c&&ti(oi(s),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+s+"."});var v,b,y=gd(g.shape,m.shape,r,l,s,c,!0);null!=d&&(v=ao(v=Nl(d,"bias","fused conv2d"),p)[0],fd(y.outShape,v.shape)),null!=A&&(b=Nl(A,"prelu weights","fused depthwiseConv2d"));var w={x:g,filter:m};null!=d&&(w.bias=v),null!=A&&(w.preluActivationWeights=b);var N=[m,g],j=ho.runKernelFunc(function(e,t){var n=e.fusedDepthwiseConv2D({input:g,filter:m,convInfo:y,bias:v,activation:h,preluActivationWeights:b});return t([m,g,n]),n},w,function(e,t){ti(jd(l),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+l+"'"});var n=t[0],r=t[1],s=t[2],a=pg(e,s,h),i={};return null!=d&&(i={bias:function(){return mg(v,a)}}),Object.assign({x:function(){return Tp(r.shape,a,n,y)},filter:function(){return Ip(r,a,n.shape,y)}},i)},"FusedDepthwiseConv2D",{convInfo:y,activation:h},N,[!0]);return x?j.as3D(j.shape[1],j.shape[2],j.shape[3]):j}}),yg=Object.freeze({matMul:xg,conv2d:vg,depthwiseConv2d:bg}),wg=Object.freeze({image:Ag,linalg:ig,losses:tg,spectral:Dm,fused:yg,signal:Vm,square:PA,squaredDifference:UA,conv1d:Bp,conv2d:kp,conv3d:Sp,depthwiseConv2d:Fp,separableConv2d:Dp,conv2dTranspose:Lp,conv3dTranspose:Pp,op:Ll,batchNormalization2d:Bf,batchNormalization3d:kf,batchNormalization4d:Sf,batchNormalization:_f,batchNorm:Ef,batchNorm2d:Ff,batchNorm3d:Tf,batchNorm4d:If,booleanMaskAsync:function(e,t,n){return Oa(this,void 0,void 0,function(){var r,s,a,i,o,l,c,d,u,h,A,f,p;return Ma(this,function(m){switch(m.label){case 0:for(r=Nl(e,"tensor","boolMask"),s=Nl(t,"mask","boolMask","bool"),a=null==n?0:n,i=s.rank,o=r.shape,ti(i>0,function(){return"mask cannot be scalar"}),ni(o.slice(a,a+i),s.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,c=a;c<a+i;c++)l*=o[c];return d=o.slice(0,a).concat([l],o.slice(a+i)),u=r.reshape(d),h=s.reshape([-1]),[4,Of(h)];case 1:return A=m.sent(),f=A.squeeze([1]),p=yp(u,f,a),e!==r&&r.dispose(),t!==s&&s.dispose(),f.dispose(),u.dispose(),h.dispose(),A.dispose(),[2,p]}})})},complex:Pl,real:Rl,imag:Ul,concat:Zl,concat1d:$l,concat2d:ec,concat3d:tc,concat4d:nc,split:rc,matMul:Rp,dot:Up,outerProduct:Op,reverse:Mp,reverse1d:Qp,reverse2d:Hp,reverse3d:zp,reverse4d:Wp,maxPool:Gp,avgPool:qp,pool:Xp,maxPool3d:Yp,avgPool3d:Jp,slice:Zp,slice1d:$p,slice2d:em,slice3d:tm,slice4d:nm,abs:OA,acos:MA,acosh:QA,asin:HA,asinh:zA,atan:WA,atanh:VA,ceil:KA,clipByValue:GA,cos:qA,cosh:XA,erf:YA,exp:JA,expm1:ZA,floor:$A,log:ef,log1p:tf,logSigmoid:nf,neg:rf,reciprocal:sf,round:af,rsqrt:of,sigmoid:lf,sign:cf,isNaN:df,isInf:uf,isFinite:hf,sin:Af,sinh:ff,softplus:pf,sqrt:mf,step:gf,tan:xf,tanh:vf,all:sm,any:am,argMax:im,argMin:om,logSumExp:lm,max:cm,mean:dm,min:um,moments:hm,sum:Am,prod:fm,equal:op,equalStrict:lp,greater:cp,greaterEqual:dp,greaterEqualStrict:up,greaterStrict:hp,less:Ap,lessEqual:fp,lessEqualStrict:pp,lessStrict:mp,notEqual:gp,notEqualStrict:xp,add:Mf,addN:Qf,addStrict:Hf,atan2:zf,div:Wf,divNoNan:Vf,divStrict:Kf,floorDiv:Gf,maximum:qf,maximumStrict:Xf,minimum:Yf,minimumStrict:Jf,mod:Zf,modStrict:$f,mul:ep,mulStrict:tp,pow:np,powStrict:rp,squaredDifferenceStrict:sp,sub:ap,subStrict:ip,elu:pm,leakyRelu:mm,prelu:gm,relu:xm,relu6:vm,selu:bm,logicalAnd:Df,logicalNot:Lf,logicalOr:Pf,logicalXor:Rf,where:Uf,whereAsync:Of,buffer:mc,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:gc,broadcastTo:xc,cast:vc,clone:bc,cumsum:yc,depthToSpace:wc,expandDims:Nc,eye:jc,multinomial:Cc,oneHot:Bc,pad:kc,pad1d:Sc,pad2d:_c,pad3d:Ec,pad4d:Fc,rand:Tc,randomNormal:Ic,randomGamma:Dc,randomUniform:Lc,reshape:Pc,spaceToBatchND:Rc,squeeze:Uc,stack:Oc,tile:Mc,truncatedNormal:Qc,unstack:Hc,setdiff1dAsync:function(e,t){return Oa(this,void 0,void 0,function(){var n,r,s,a,i,o,l,c,d,u;return Ma(this,function(h){switch(h.label){case 0:return n=Nl(e,"x","setdiff1d"),r=Nl(t,"y","setdiff1d"),ti(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),ti(1===n.rank,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),ti(1===r.rank,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return s=h.sent(),[4,r.data()];case 2:for(a=h.sent(),i=new Set(a),o=0,d=0;d<s.length;d++)i.has(s[d])||o++;for(l=new Vi([o],n.dtype),c=new Vi([o],"int32"),d=0,u=0;d<s.length;d++)i.has(s[d])||(l.values[u]=s[d],c.values[u]=d,u++);return[2,[l.toTensor(),c.toTensor()]]}})})},fill:ql,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return ho.runKernelFunc(function(r){return r.linspace(e,t,n)},{})},ones:Kl,range:Xl,scalar:Ql,tensor:Ol,tensor1d:Hl,tensor2d:zl,tensor3d:Wl,tensor4d:Vl,tensor5d:function(e,t,n){if(ri(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=yl(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ml(e,t,r,n)},tensor6d:function(e,t,n){if(ri(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=yl(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Ml(e,t=t||r,r,n)},variable:function(e,t,n,r){return void 0===t&&(t=!0),ho.makeVariable(e,t,n,r)},zeros:Gl,onesLike:Yl,zerosLike:Jl,transpose:ym,softmax:od,logSoftmax:ld,localResponseNormalization:wm,norm:Nm,gather:yp,unsortedSegmentSum:wp,basicLSTMCell:jm,multiRNNCell:Cm,movingAverage:Bm,stridedSlice:km,topk:Sm,scatterND:_m,fft:Em,ifft:Fm,rfft:Tm,irfft:Im,sparseToDense:Lm,gatherND:Pm,diag:Rm,dropout:Um,hannWindow:Qm,hammingWindow:Hm,frame:zm,stft:Wm,inTopKAsync:function(e,t,n){return void 0===n&&(n=1),Oa(this,void 0,void 0,function(){var r,s,a,i,o,l,c,d,u,h,A,f,p,m;return Ma(this,function(g){switch(g.label){case 0:return r=Nl(e,"predictions","inTopK"),s=Nl(t,"targets","inTopK"),ti(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),ti(r.rank-1===s.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+s.rank}),ni(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],ti(n>0&&n<=a,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n}),[4,r.data()];case 1:return i=g.sent(),[4,s.data()];case 2:for(o=g.sent(),l=[i.length/a,a],d=l[1],u=pi("bool",c=l[0]),h=0;h<c;h++){for(A=h*d,f=i.subarray(A,A+d),p=[],m=0;m<f.length;m++)p.push({value:f[m],index:m});for(p.sort(function(e,t){return t.value-e.value}),u[h]=0,m=0;m<n;m++)if(p[m].index===o[h]){u[h]=1;break}}return e!==r&&r.dispose(),t!==s&&s.dispose(),[2,Ol(u,s.shape,"bool")]}})})}});function Ng(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(e){null!=e&&ti("complex64"!==e.dtype,function(){return t+" does not support complex64 tensors."})})}function jg(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var Cg=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new cd(t,ho),t}return Ua(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,Ha().get("IS_NODE")&&bl("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return Oa(this,void 0,void 0,function(){return Ma(this,function(t){return[2,this.readSync(e)]})})},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?Ed(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map(function(e){return Ri(e)})}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return mc(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return ho.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return Oa(this,void 0,void 0,function(){var t;return Ma(this,function(n){return t=Di(),e(),[2,{kernelMs:Di()-t}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:ho.keep(e.clone()),imag:ho.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(Ng(e,"slice"),sd(e.shape,t,n)){var r=ad(t,e.strides),s=ai(n);return Ol(this.readSync(e.dataId).subarray(r,r+s),n,e.dtype)}for(var a=mc(n,e.dtype),i=this.bufferSync(e),o=0;o<a.size;++o){var l=a.indexToLoc(o).map(function(e,n){return e+t[n]});a.values[o]=i.get.apply(i,l)}return a.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){Ng(e,"stridedSlice");var s=td(t,n,r);if(s.some(function(e){return 0===e}))return Ol([],s);for(var a=mc(s,e.dtype),i=this.bufferSync(e),o=0;o<a.size;o++){for(var l=a.indexToLoc(o),c=new Array(l.length),d=0;d<c.length;d++)c[d]=l[d]*r[d]+t[d];a.set.apply(a,[i.get.apply(i,c)].concat(l))}return a.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=mc([e.size,e.size],e.dtype),r=n.values,s=0;s<t.length;s++)r[s*e.size+s]=t[s];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),s=0,a=0;a<e.rank;a++)a!==t&&(r[s++]=e.shape[a]);var i=new Array(e.rank).fill(0),o=e.shape.slice();o[t]=1;var l=new Array(n);for(a=0;a<l.length;a++)i[t]=a,l[a]=this.slice(e,i,o).reshape(r);return l},t.prototype.reverse=function(e,t){Ng(e,"reverse");for(var n=mc(e.shape,e.dtype),r=this.bufferSync(e),s=function(s){var a=n.indexToLoc(s),i=a.slice();t.forEach(function(t){return i[t]=e.shape[t]-1-i[t]}),n.set.apply(n,[r.get.apply(r,i)].concat(a))},a=0;a<n.size;a++)s(a);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map(function(e){return Rl(e)}),s=e.map(function(e){return Ul(e)});return Pl(this.concat(r,t),this.concat(s,t))}var a=e.map(function(e){var n=ai(e.shape.slice(t));return e.as2D(-1,n)}),i=Dl(a.map(function(e){return e.shape}),1),o=mc(i,e[0].dtype).values;if(1===a[0].shape[0]){var l=0;a.forEach(function(e){o.set(n.readSync(e.dataId),l),l+=e.size})}else{var c=0;a.forEach(function(e){for(var t=n.readSync(e.dataId),r=0,s=0;s<e.shape[0];++s)for(var a=s*i[1]+c,l=0;l<e.shape[1];++l)o[a+l]=t[r++];c+=e.shape[1]})}var d=Dl(e.map(function(e){return e.shape}),t);return Ol(o,d,e[0].dtype)},t.prototype.neg=function(e){return Ng(e,"neg"),this.multiply(Ql(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e+n,imag:t+r}}):this.broadcastedBinaryOp(e,t,ro(e.dtype,t.dtype),function(e,t){return e+t})},t.prototype.addN=function(e){var t=this;Ng(e,"addN");for(var n=e.map(function(e){return t.readSync(e.dataId)}),r=mc(e[0].shape,e[0].dtype),s=r.values,a=0;a<e.length;a++)for(var i=n[a],o=0;o<s.length;o++)s[o]+=i[o];return r.toTensor()},t.prototype.softmax=function(e,t){var n=Ai([t],e.shape),r=this.max(e,n),s=Sl(r.shape,n),a=this.subtract(e,r.reshape(s)),i=this.exp(a),o=this.sum(i,n).reshape(s);return this.realDivide(i,o)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e-n,imag:t-r}}):this.broadcastedBinaryOp(e,t,ro(e.dtype,t.dtype),function(e,t){return e-t})},t.prototype.pow=function(e,t){return Ng([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.pow(e,t)})},t.prototype.batchMatMul=function(e,t,n,r){Ng([e,t],"matMul");for(var s=n?e.shape[1]:e.shape[2],a=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],o=e.shape[0],l=this.readSync(e.dataId),c=this.readSync(t.dataId),d=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],u=d[0],h=d[1],A=d[2],f=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],p=f[0],m=f[1],g=f[2],x=a*i,v=mc([o,a,i],e.dtype),b=v.values,y=this.blockSize,w=0;w<o;w++)for(var N=0;N<a;N+=y)for(var j=0;j<i;j+=y)for(var C=0;C<s;C+=y)for(var B=Math.min(N+y,a),k=Math.min(j+y,i),S=Math.min(C+y,s),_=N;_<B;_++)for(var E=j;E<k;E++){for(var F=0,T=C;T<S;T++)F+=l[w*u+_*h+T*A]*c[T*p+E*m+w*g];b[w*x+(_*i+E)]+=F}return v.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,s=e.transposeB,a=e.bias,i=e.activation,o=e.preluActivationWeights,l=this.batchMatMul(t,n,r,s);return a&&(l=this.add(l,a)),i&&(l=jg(this,l,i,o)),l},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}}):this.broadcastedBinaryOp(e,t,ro(e.dtype,t.dtype),function(e,t){return e*t})},t.prototype.realDivide=function(e,t){return Ng([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",function(e,t){return e/t})},t.prototype.floorDiv=function(e,t){return Ng([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",function(e,t){return Math.floor(e/t)})},t.prototype.sum=function(e,t){Ng(e,"sum"),_l("sum",t,e.rank);for(var n=kl(e.shape,t),r=n[0],s=n[1],a=Gl(r,ro(e.dtype,"int32")),i=ai(s),o=this.readSync(a.dataId),l=this.readSync(e.dataId),c=0;c<o.length;++c){for(var d=c*i,u=0,h=0;h<i;++h)u+=l[d+h];o[c]=u}return a},t.prototype.prod=function(e,t){Ng(e,"sum");for(var n=kl(e.shape,t),r=n[0],s=n[1],a=Gl(r,ro(e.dtype,"int32")),i=ai(s),o=this.readSync(a.dataId),l=this.readSync(e.dataId),c=0;c<o.length;++c){for(var d=c*i,u=1,h=0;h<i;++h)u*=l[d+h];o[c]=u}return a},t.prototype.unsortedSegmentSum=function(e,t,n){Ng(e,"unsortedSegmentSum");for(var r=[],s=e.rank-t.rank,a=0;a<s;++a)t=t.expandDims(a+1);for(a=0;a<n;++a){var i=Ql(a,"int32"),o=op(i,t).asType("float32").mul(e).sum(0);r.push(o)}return Oc(r)},t.prototype.argMin=function(e,t){Ng(e,"argMin");var n=[t];_l("argMin",n,e.rank);for(var r=kl(e.shape,n),s=r[0],a=r[1],i=Gl(s,"int32"),o=ai(a),l=this.readSync(i.dataId),c=this.readSync(e.dataId),d=0;d<l.length;++d){for(var u=d*o,h=c[u],A=0,f=0;f<o;++f){var p=c[u+f];p<h&&(h=p,A=f)}l[d]=A}return i},t.prototype.argMax=function(e,t){Ng(e,"argMax");var n=[t];_l("argMax",n,e.rank);for(var r=kl(e.shape,n),s=r[0],a=r[1],i=Gl(s,"int32"),o=ai(a),l=this.readSync(i.dataId),c=this.readSync(e.dataId),d=0;d<l.length;++d){for(var u=d*o,h=c[u],A=0,f=0;f<o;++f){var p=c[u+f];p>h&&(h=p,A=f)}l[d]=A}return i},t.prototype.cumsum=function(e,t,n,r){if(Ng(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var s=ro(e.dtype,"int32"),a=Gl(e.shape,s),i=this.readSync(a.dataId),o=this.readSync(e.dataId),l=e.shape[e.rank-1],c=r?function(e,t){return e+l-t-1}:function(e,t){return e+t},d=0;d<o.length;d+=l)for(var u=0;u<l;u++){var h=c(d,u);if(0===u)i[h]=n?0:o[h];else{var A=c(d,u-1);i[h]=n?o[A]+i[A]:o[h]+i[A]}}return a},t.prototype.equal=function(e,t){return Ng([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e===t?1:0})},t.prototype.notEqual=function(e,t){return Ng([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e!==t?1:0})},t.prototype.less=function(e,t){return Ng([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<t?1:0})},t.prototype.lessEqual=function(e,t){return Ng([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<=t?1:0})},t.prototype.greater=function(e,t){return Ng([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>t?1:0})},t.prototype.greaterEqual=function(e,t){return Ng([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>=t?1:0})},t.prototype.logicalNot=function(e){Ng(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return Ng([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e&&t})},t.prototype.logicalOr=function(e,t){return Ng([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e||t})},t.prototype.select=function(e,t,n){Ng([e,t,n],"select");for(var r=this.readSync(e.dataId),s=this.readSync(t.dataId),a=this.readSync(n.dataId),i=Gl(t.shape,ro(t.dtype,n.dtype)),o=this.readSync(i.dataId),l=0,c=0===e.rank||e.rank>1||1===t.rank?1:ai(t.shape.slice(1)),d=0;d<r.length;d++)for(var u=0;u<c;u++)1===r[d]?o[l++]=s[d]:o[l++]=a[d];return i},t.prototype.where=function(e){Ng([e],"where");var t=this.readSync(e.dataId);return Vd(e.shape,t)},t.prototype.topk=function(e,t,n){return Ng(e,"topk"),Wd(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){Ng(e,"min"),_l("min",t,e.rank);for(var n=kl(e.shape,t),r=n[0],s=n[1],a=Gl(r,e.dtype),i=ai(s),o=this.readSync(a.dataId),l=this.readSync(e.dataId),c=0;c<o.length;++c){for(var d=c*i,u=l[d],h=0;h<i;++h){var A=l[d+h];A<u&&(u=A)}o[c]=u}return a},t.prototype.minimum=function(e,t){return Ng([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.min(e,t)})},t.prototype.mod=function(e,t){return Ng([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})},t.prototype.max=function(e,t){Ng(e,"max"),_l("max",t,e.rank);for(var n=kl(e.shape,t),r=n[0],s=n[1],a=Gl(r,e.dtype),i=ai(s),o=this.readSync(a.dataId),l=this.readSync(e.dataId),c=0;c<o.length;++c){for(var d=c*i,u=l[d],h=0;h<i;++h){var A=l[d+h];A>u&&(u=A)}o[c]=u}return a},t.prototype.maximum=function(e,t){return Ng([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.max(e,t)})},t.prototype.all=function(e,t){Ng(e,"all"),_l("all",t,e.rank);for(var n=kl(e.shape,t),r=n[0],s=n[1],a=Gl(r,e.dtype),i=ai(s),o=this.readSync(a.dataId),l=this.readSync(e.dataId),c=0;c<o.length;++c){for(var d=c*i,u=l[d],h=0;h<i;++h){var A=l[d+h];u=u&&A}o[c]=u}return a},t.prototype.any=function(e,t){Ng(e,"any"),_l("any",t,e.rank);for(var n=kl(e.shape,t),r=n[0],s=n[1],a=Gl(r,e.dtype),i=ai(s),o=this.readSync(a.dataId),l=this.readSync(e.dataId),c=0;c<o.length;++c){for(var d=c*i,u=l[d],h=0;h<i;++h){var A=l[d+h];u=u||A}o[c]=u}return a},t.prototype.squaredDifference=function(e,t){return Ng([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e-t;return n*n})},t.prototype.ceil=function(e){Ng(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){Ng(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){Ng(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){Ng(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){Ng(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){Ng(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){Ng(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var s=Math.floor(t[r]);t[r]-s<.5?n[r]=Math.floor(t[r]):t[r]-s>.5?n[r]=Math.ceil(t[r]):n[r]=s%2==0?s:s+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){Ng(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){Ng(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){Ng(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var s=t[r];n[r]=Math.log(s)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){Ng(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var s=t[r];n[r]=Math.log1p(s)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){Ng(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var s=t[r];n[r]=Math.sqrt(s)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){Ng(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var s=t[r];n[r]=1/Math.sqrt(s)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){Ng(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){Ng(e,"relu");for(var t=Gl(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),s=0;s<r.length;++s)n[s]=Math.max(0,r[s]);return t},t.prototype.relu6=function(e){Ng(e,"relu");for(var t=Gl(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),s=0;s<r.length;++s)n[s]=Math.min(Math.max(0,r[s]),6);return t},t.prototype.prelu=function(e,t){return Ng([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return e<0?t*e:e})},t.prototype.elu=function(e){Ng(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var s=n[r];t[r]=s>=0?s:Math.exp(s)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){Ng([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),s=this.readSync(e.dataId),a=0;a<r.length;++a){var i=r[a];n[a]=i>=1?s[a]:s[a]*(i+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){Ng(e,"selu");for(var t=aA,n=iA,r=new Float32Array(e.size),s=this.readSync(e.dataId),a=0;a<s.length;++a){var i=s[a];r[a]=i>=0?n*i:t*(Math.exp(i)-1)}return this.makeOutput(r,e.shape,"float32")},t.prototype.clip=function(e,t,n){Ng(e,"clip");for(var r=new Float32Array(e.size),s=this.readSync(e.dataId),a=0;a<s.length;++a){var i=s[a];r[a]=i>n?n:i<t?t:i}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var s=n[2*r],a=n[2*r+1];t[r]=Math.hypot(s,a)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){Ng(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){Ng(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){Ng(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),s=0;s<r.length;++s){var a,i=r[s]>-t,o=r[s]<t,l=Math.exp(r[s]);a=o?l:i?r[s]:Math.log(1+l),n[s]=a}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){Ng(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){Ng(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){Ng(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){Ng(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){Ng(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){Ng(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return Ng([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.atan2(e,t)})},t.prototype.sinh=function(e){Ng(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){Ng(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){Ng(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=li(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){Ng(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){Ng(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){Ng(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){Ng(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var s=Math.sign(n[r]),a=Math.abs(n[r]),i=1/(1+.3275911*a);t[r]=s*(1-((((1.061405429*i-1.453152027)*i+1.421413741)*i-.284496736)*i+.254829592)*i*Math.exp(-a*a))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),Ng(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),s=0;s<r.length;++s){var a=r[s];isNaN(a)?n[s]=NaN:n[s]=a>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,s=e.bias,a=e.activation,i=e.preluActivationWeights,o=this.conv2d(t,n,r);return s&&(o=this.add(o,s)),a&&(o=jg(this,o,a,i)),o},t.prototype.conv2d=function(e,t,n){Ng([e,t],"conv2d");for(var r=n.filterHeight,s=n.filterWidth,a=n.dilationHeight,i=n.dilationWidth,o=n.padInfo.left,l=n.padInfo.top,c="channelsLast"===n.dataFormat,d=mc(n.outShape,e.dtype),u=e.strides[0],h=c?e.strides[1]:e.strides[2],A=c?e.strides[2]:1,f=c?1:e.strides[1],p=d.strides[0],m=c?d.strides[1]:d.strides[2],g=c?d.strides[2]:1,x=c?1:d.strides[1],v=this.readSync(e.dataId),b=this.readSync(t.dataId),y=d.values,w=0;w<n.batchSize;++w)for(var N=w*u,j=w*p,C=0;C<n.outHeight;++C)for(var B=j+C*m,k=C*n.strideHeight-l,S=0;S<r;S++){var _=k+S*a;if(!(_<0||_>=n.inHeight))for(var E=S*t.strides[0],F=N+_*h,T=0;T<n.outWidth;++T)for(var I=B+T*g,D=T*n.strideWidth-o,L=0;L<s;L++){var P=D+L*i;if(!(P<0||P>=n.inWidth))for(var R=F+P*A,U=E+L*t.strides[1],O=0;O<n.inChannels;++O){for(var M=v[R+O*f],Q=0;Q<n.outChannels;++Q)y[I+Q*x]+=M*b[U+Q];U+=n.outChannels}}}return d.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,s=n.filterHeight,a=n.filterWidth,i=n.dilationDepth,o=n.dilationHeight,l=n.dilationWidth,c=n.padInfo.front,d=n.padInfo.left,u=n.padInfo.top,h=mc(n.outShape,e.dtype),A=this.readSync(e.dataId),f=this.readSync(t.dataId),p=h.values,m=0;m<n.batchSize;++m)for(var g=m*e.strides[0],x=m*h.strides[0],v=0;v<n.outDepth;++v)for(var b=x+v*h.strides[1],y=v*n.strideDepth-c,w=0;w<r;w++){var N=y+w*i;if(!(N<0||N>=n.inDepth))for(var j=w*t.strides[0],C=g+N*e.strides[1],B=0;B<n.outHeight;++B)for(var k=b+B*h.strides[2],S=B*n.strideHeight-u,_=0;_<s;_++){var E=S+_*o;if(!(E<0||E>=n.inHeight))for(var F=j+_*t.strides[1],T=C+E*e.strides[2],I=0;I<n.outWidth;++I)for(var D=k+I*n.outChannels,L=I*n.strideWidth-d,P=0;P<a;P++){var R=L+P*l;if(!(R<0||R>=n.inWidth))for(var U=F+P*t.strides[2],O=T+R*n.inChannels,M=U,Q=0;Q<n.inChannels;++Q){for(var H=A[O+Q],z=0;z<n.outChannels;++z)p[D+z]+=H*f[M+z];M+=n.outChannels}}}}return h.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){Ng([e,t],"conv2dDerInput");for(var r=mc(n.inShape,"float32"),s=r.values,a=this.readSync(e.dataId),i=this.readSync(t.dataId),o=t.strides,l=o[0],c=o[1],d=o[2],u=n.batchSize,h=n.filterHeight,A=n.filterWidth,f=n.inChannels,p=n.inHeight,m=n.inWidth,g=n.outChannels,x=n.outHeight,v=n.outWidth,b=n.strideHeight,y=n.strideWidth,w=n.dataFormat,N=h-1-n.padInfo.top,j=A-1-n.padInfo.left,C="channelsLast"===w,B=r.strides[0],k=C?r.strides[1]:r.strides[2],S=C?r.strides[2]:1,_=C?1:r.strides[1],E=e.strides[0],F=C?e.strides[1]:e.strides[2],T=C?e.strides[2]:1,I=C?1:e.strides[1],D=0;D<u;++D)for(var L=0;L<f;++L)for(var P=0;P<p;++P)for(var R=P-N,U=Math.max(0,Math.ceil(R/b)),O=Math.min(x,(h+R)/b),M=0;M<m;++M){for(var Q=M-j,H=Math.max(0,Math.ceil(Q/y)),z=Math.min(v,(A+Q)/y),W=0,V=U;V<O;++V)for(var K=V*b-R,G=H;G<z;++G)for(var q=E*D+F*V+T*G,X=l*(h-1-K)+c*(A-1-(G*y-Q))+d*L,Y=0;Y<g;++Y)W+=a[q+I*Y]*i[X+Y];s[B*D+k*P+S*M+_*L]=W}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=mc(n.inShape,"float32"),s=r.values,a=r.strides,i=a[0],o=a[1],l=a[2],c=a[3],d=this.readSync(e.dataId),u=e.strides,h=u[0],A=u[1],f=u[2],p=u[3],m=this.readSync(t.dataId),g=t.strides,x=g[0],v=g[1],b=g[2],y=g[3],w=n.batchSize,N=n.filterDepth,j=n.filterHeight,C=n.filterWidth,B=n.inChannels,k=n.inDepth,S=n.inHeight,_=n.inWidth,E=n.outChannels,F=n.outDepth,T=n.outHeight,I=n.outWidth,D=n.strideDepth,L=n.strideHeight,P=n.strideWidth,R=N-1-n.padInfo.front,U=j-1-n.padInfo.top,O=C-1-n.padInfo.left,M=0;M<w;++M)for(var Q=0;Q<B;++Q)for(var H=0;H<k;++H)for(var z=H-R,W=Math.max(0,Math.ceil(z/D)),V=Math.min(F,(N+z)/D),K=0;K<S;++K)for(var G=K-U,q=Math.max(0,Math.ceil(G/L)),X=Math.min(T,(j+G)/L),Y=0;Y<_;++Y){for(var J=Y-O,Z=Math.max(0,Math.ceil(J/P)),$=Math.min(I,(C+J)/P),ee=0,te=W;te<V;++te)for(var ne=te*D-z,re=q;re<X;++re)for(var se=re*L-G,ae=Z;ae<$;++ae)for(var ie=h*M+A*te+f*re+p*ae,oe=x*(N-1-ne)+v*(j-1-se)+b*(C-1-(ae*P-J))+y*Q,le=0;le<E;++le)ee+=d[ie+le]*m[oe+le];s[i*M+o*H+l*K+c*Y+Q]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){Ng([e,t],"conv2dDerFilter");for(var r=n.strideHeight,s=n.strideWidth,a=n.filterHeight,i=n.filterWidth,o="channelsLast"===n.dataFormat,l=mc(n.filterShape,"float32"),c=n.padInfo.left,d=n.padInfo.top,u=this.bufferSync(e),h=this.bufferSync(t),A=0;A<a;++A)for(var f=Math.max(0,Math.ceil((d-A)/r)),p=Math.min(n.outHeight,(n.inHeight+d-A)/r),m=0;m<i;++m)for(var g=Math.max(0,Math.ceil((c-m)/s)),x=Math.min(n.outWidth,(n.inWidth+c-m)/s),v=0;v<n.inChannels;++v)for(var b=0;b<n.outChannels;++b){for(var y=0,w=0;w<n.batchSize;++w)for(var N=f;N<p;++N)for(var j=A+N*r-d,C=g;C<x;++C){var B=m+C*s-c;y+=o?u.get(w,j,B,v)*h.get(w,N,C,b):u.get(w,v,j,B)*h.get(w,b,N,C)}l.set(y,A,m,v,b)}return l.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,s=n.strideHeight,a=n.strideWidth,i=n.filterDepth,o=n.filterHeight,l=n.filterWidth,c=mc(n.filterShape,"float32"),d=c.values,u=c.strides,h=u[0],A=u[1],f=u[2],p=u[3],m=this.readSync(t.dataId),g=t.strides,x=g[0],v=g[1],b=g[2],y=g[3],w=this.readSync(e.dataId),N=e.strides,j=N[0],C=N[1],B=N[2],k=N[3],S=n.padInfo.front,_=n.padInfo.left,E=n.padInfo.top,F=0;F<i;++F)for(var T=Math.max(0,Math.ceil((S-F)/r)),I=Math.min(n.outDepth,(n.inDepth+S-F)/r),D=F*h,L=0;L<o;++L)for(var P=Math.max(0,Math.ceil((E-L)/s)),R=Math.min(n.outHeight,(n.inHeight+E-L)/s),U=L*A+D,O=0;O<l;++O)for(var M=Math.max(0,Math.ceil((_-O)/a)),Q=Math.min(n.outWidth,(n.inWidth+_-O)/a),H=O*f+U,z=0;z<n.inChannels;++z)for(var W=z*p+H,V=0;V<n.outChannels;++V){for(var K=0,G=0;G<n.batchSize;++G)for(var q=G*j,X=G*x,Y=T;Y<I;++Y)for(var J=(F+Y*r-S)*C+q,Z=Y*v+X,$=P;$<R;++$)for(var ee=(L+$*s-E)*B+J,te=$*b+Z,ne=M;ne<Q;++ne){var re=ne*y+te;K+=w[(O+ne*a-_)*k+ee+z]*m[re+V]}d[W+V]=K}return c.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,s=e.bias,a=e.activation,i=e.preluActivationWeights,o=this.depthwiseConv2D(t,n,r);return s&&(o=this.add(o,s)),a&&(o=jg(this,o,a,i)),o},t.prototype.depthwiseConv2D=function(e,t,n){Ng([e,t],"depthwiseConv2D");for(var r=n.filterHeight,s=n.filterWidth,a=n.dilationHeight,i=n.dilationWidth,o=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,d=mc(n.outShape,e.dtype),u=this.readSync(e.dataId),h=this.readSync(t.dataId),A=d.values,f=0;f<n.batchSize;++f)for(var p=f*e.strides[0],m=f*d.strides[0],g=0;g<n.outHeight;++g)for(var x=m+g*d.strides[1],v=g*n.strideHeight-o,b=0;b<r;++b){var y=v+b*a;if(!(y<0||y>=n.inHeight))for(var w=b*t.strides[0],N=p+y*e.strides[1],j=0;j<n.outWidth;++j)for(var C=x+j*d.strides[2],B=j*n.strideWidth-l,k=0;k<s;++k){var S=B+k*i;if(!(S<0||S>=n.inWidth))for(var _=w+k*t.strides[1],E=N+S*n.inChannels,F=C,T=_,I=0;I<n.inChannels;++I){for(var D=u[E+I],L=0;L<c;++L)A[F+L]+=D*h[T+L];F+=c,T+=c}}}return d.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){Ng([e,t],"depthwiseConv2DDerInput");for(var r=mc(n.inShape,"float32"),s=r.values,a=r.strides,i=a[0],o=a[1],l=a[2],c=this.readSync(e.dataId),d=e.strides,u=d[0],h=d[1],A=d[2],f=this.readSync(t.dataId),p=t.strides,m=p[0],g=p[1],x=p[2],v=n.batchSize,b=n.filterHeight,y=n.filterWidth,w=n.inChannels,N=n.inHeight,j=n.inWidth,C=n.outChannels,B=n.outHeight,k=n.outWidth,S=n.strideHeight,_=n.strideWidth,E=b-1-n.padInfo.top,F=y-1-n.padInfo.left,T=C/w,I=0;I<v;++I)for(var D=0;D<w;++D)for(var L=0;L<N;++L)for(var P=L-E,R=Math.max(0,Math.ceil(P/S)),U=Math.min(B,(b+P)/S),O=0;O<j;++O){for(var M=O-F,Q=Math.max(0,Math.ceil(M/_)),H=Math.min(k,(y+M)/_),z=0,W=R;W<U;++W)for(var V=W*S-P,K=Q;K<H;++K)for(var G=u*I+h*W+A*K,q=m*(b-1-V)+g*(y-1-(K*_-M))+x*D,X=0;X<T;++X)z+=c[G+(D*T+X)]*f[q+X];s[i*I+o*L+l*O+D]=z}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){Ng([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,s=n.strideWidth,a=n.filterHeight,i=n.filterWidth,o=mc(n.filterShape,"float32"),l=n.padInfo.left,c=n.padInfo.top,d=n.outChannels/n.inChannels,u=this.bufferSync(e),h=this.bufferSync(t),A=0;A<a;++A)for(var f=Math.max(0,Math.ceil((c-A)/r)),p=Math.min(n.outHeight,(n.inHeight+c-A)/r),m=0;m<i;++m)for(var g=Math.max(0,Math.ceil((l-m)/s)),x=Math.min(n.outWidth,(n.inWidth+l-m)/s),v=0;v<n.outChannels;++v){for(var b=Math.trunc(v/d),y=v%d,w=0,N=0;N<n.batchSize;++N)for(var j=f;j<p;++j)for(var C=A+j*r-c,B=g;B<x;++B){var k=m+B*s-l;w+=u.get(N,C,k,b)*h.get(N,j,B,v)}o.set(w,A,m,b,y)}return o.toTensor()},t.prototype.tile=function(e,t){return Ng(e,"tile"),zd(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){Ng(e,"pad");var r=t.map(function(t,n){return t[0]+e.shape[n]+t[1]}),s=t.map(function(e){return e[0]}),a=this.bufferSync(e),i=mc(r,e.dtype);0!==n&&i.values.fill(n);for(var o=0;o<e.size;o++){var l=a.indexToLoc(o),c=l.map(function(e,t){return e+s[t]});i.set.apply(i,[a.get.apply(a,l)].concat(c))}return i.toTensor()},t.prototype.transpose=function(e,t){Ng(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var s=this.readSync(e.dataId),a=mc(n,e.dtype),i=this.bufferSync(e);for(r=0;r<e.size;++r){for(var o=i.indexToLoc(r),l=new Array(o.length),c=0;c<l.length;c++)l[c]=o[t[c]];var d=a.locToIndex(l);a.values[d]=s[r]}return a.toTensor()},t.prototype.gather=function(e,t,n){Ng([e,t],"gather");var r=e.shape.slice(),s=this.readSync(t.dataId);r[n]=s.length;for(var a=mc(r,e.dtype),i=this.bufferSync(e),o=0;o<a.size;++o){var l=a.indexToLoc(o),c=l.slice();c[n]=s[l[n]];var d=i.locToIndex(c);a.values[o]=i.values[d]}return a.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){Ng([e],"batchToSpaceND");var r=t.reduce(function(e,t){return e*t}),s=zc(e.shape,t,r),a=Wc(s.length,t.length),i=Vc(e.shape,t,r),o=Kc(n,t.length),l=Gc(i,n,t.length);return e.reshape(s).transpose(a).reshape(i).slice(o,l)},t.prototype.spaceToBatchND=function(e,t,n){Ng([e],"spaceToBatchND");var r=t.reduce(function(e,t){return e*t}),s=[[0,0]];s.push.apply(s,n);for(var a=1+t.length;a<e.shape.length;++a)s.push([0,0]);var i=e.pad(s),o=zc(i.shape,t,r,!1),l=Wc(o.length,t.length,!1),c=Vc(i.shape,t,r,!1);return i.reshape(o).transpose(l).reshape(c)},t.prototype.pool=function(e,t,n){Ng(e,"pool");for(var r=t.strideHeight,s=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,o=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,d=t.padInfo.left,u="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,h=this.readSync(e.dataId),A=mc(t.outShape,e.dtype),f=A.values,p=t.outShape[1]*t.outShape[2]*t.outShape[3],m=t.outShape[2]*t.outShape[3],g=t.outShape[3],x=0;x<t.batchSize;++x)for(var v=x*p,b=x*e.strides[0],y=0;y<t.inChannels;++y)for(var w=0;w<t.outHeight;++w)for(var N=w*r-c,j=Math.max(0,N),C=Math.min(t.inHeight,o+N),B=v+w*m,k=0;k<t.outWidth;++k){for(var S=k*s-d,_=Math.max(0,S),E=Math.min(t.inWidth,l+S),F=u,T=0,I=0,D=j;D<C;D+=a){for(var L=b+D*e.strides[1],P=_;P<E;P+=i){var R=h[L+P*e.strides[2]+y];"max"===n&&R>F?F=R:"avg"===n&&(T+=R,I++)}if(isNaN(F))break}f[B+k*g+y]="avg"===n?T/I:F}return A.toTensor()},t.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},t.prototype.maxPoolPositions=function(e,t){for(var n=mc(t.outShape,"int32"),r=t.strideHeight,s=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,o=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,d=t.padInfo.left,u=this.bufferSync(e),h=0;h<t.batchSize;++h)for(var A=0;A<t.inChannels;++A)for(var f=0;f<t.outHeight;++f){for(var p=f*r-c,m=p;m<0;)m+=a;for(var g=Math.min(t.inHeight,o+p),x=0;x<t.outWidth;++x){for(var v=x*s-d,b=v;b<0;)b+=i;for(var y=Math.min(t.inWidth,l+v),w=Number.NEGATIVE_INFINITY,N=-1,j=m;j<g;j+=a)for(var C=j-p,B=b;B<y;B+=i){var k=B-v,S=u.get(h,j,B,A);S>w&&(w=S,N=C*l+k)}n.set(N,h,f,x,A)}}return n.toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){Ng([t,n],"maxPoolBackprop");for(var s=this.maxPoolPositions(t,r),a=r.strideHeight,i=r.strideWidth,o=r.dilationHeight,l=r.dilationWidth,c=r.effectiveFilterHeight,d=r.effectiveFilterWidth,u=d-1-r.padInfo.left,h=c-1-r.padInfo.top,A=mc(t.shape,"float32"),f=this.bufferSync(s),p=this.bufferSync(e),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var x=0;x<r.inHeight;++x)for(var v=0;v<r.inWidth;++v){for(var b=x-h,y=v-u,w=0,N=0;N<c;N+=o){var j=(b+N)/a;if(!(j<0||j>=r.outHeight||Math.floor(j)!==j))for(var C=0;C<d;C+=l){var B=(y+C)/i;if(!(B<0||B>=r.outWidth||Math.floor(B)!==B)){var k=c*d-1-f.get(m,j,B,g)===N*d+C?1:0;0!==k&&(w+=p.get(m,j,B,g)*k)}}}A.set(w,m,x,v,g)}return A.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){Ng([e,t],"avgPoolBackprop");for(var r=n.strideHeight,s=n.strideWidth,a=n.filterHeight,i=n.filterWidth,o=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterHeight,d=n.effectiveFilterWidth,u=d-1-n.padInfo.left,h=c-1-n.padInfo.top,A=mc(t.shape,"float32"),f=1/(a*i),p=this.bufferSync(e),m=0;m<n.batchSize;++m)for(var g=0;g<n.inChannels;++g)for(var x=0;x<n.inHeight;++x)for(var v=0;v<n.inWidth;++v){for(var b=x-h,y=v-u,w=0,N=0;N<c;N+=o){var j=(b+N)/r;if(!(j<0||j>=n.outHeight||Math.floor(j)!==j))for(var C=0;C<d;C+=l){var B=(y+C)/s;B<0||B>=n.outWidth||Math.floor(B)!==B||(w+=p.get(m,j,B,g))}}A.set(w*f,m,x,v,g)}return A.toTensor()},t.prototype.pool3d=function(e,t,n){Ng(e,"pool3d");for(var r=t.strideDepth,s=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,d=t.effectiveFilterHeight,u=t.effectiveFilterWidth,h=t.padInfo.front,A=t.padInfo.top,f=t.padInfo.left,p="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=this.readSync(e.dataId),g=mc(t.outShape,e.dtype),x=g.values,v=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],b=t.outShape[2]*t.outShape[3]*t.outShape[4],y=t.outShape[3]*t.outShape[4],w=t.outShape[4],N=0;N<t.batchSize;++N)for(var j=N*v,C=N*e.strides[0],B=0;B<t.inChannels;++B)for(var k=0;k<t.outDepth;++k){for(var S=k*r-h,_=S;_<0;)_+=i;for(var E=Math.min(t.inDepth,c+S),F=j+k*b,T=0;T<t.outHeight;++T){for(var I=T*s-A,D=I;D<0;)D+=o;for(var L=Math.min(t.inHeight,d+I),P=F+T*y,R=0;R<t.outWidth;++R){for(var U=R*a-f,O=U;O<0;)O+=l;for(var M=Math.min(t.inWidth,u+U),Q=P+R*w,H=p,z=0,W=0,V=_;V<E;V+=i){for(var K=C+V*e.strides[1],G=D;G<L;G+=o){for(var q=K+G*e.strides[2],X=O;X<M;X+=l){var Y=m[q+X*e.strides[3]+B];if("max"===n&&Y>H?H=Y:"avg"===n&&(z+=Y,W++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}x[Q+B]="avg"===n?z/W:H}}}return g.toTensor()},t.prototype.avgPool3d=function(e,t){return Ng(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){Ng([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,s=n.strideHeight,a=n.strideWidth,i=n.filterDepth,o=n.filterHeight,l=n.filterWidth,c=n.dilationDepth,d=n.dilationHeight,u=n.dilationWidth,h=n.effectiveFilterDepth,A=n.effectiveFilterHeight,f=n.effectiveFilterWidth,p=h-1-n.padInfo.front,m=f-1-n.padInfo.left,g=A-1-n.padInfo.top,x=mc(t.shape,"float32"),v=1/(i*o*l),b=this.bufferSync(e),y=0;y<n.batchSize;++y)for(var w=0;w<n.inChannels;++w)for(var N=0;N<n.inDepth;++N)for(var j=0;j<n.inHeight;++j)for(var C=0;C<n.inWidth;++C){for(var B=N-p,k=j-g,S=C-m,_=0,E=0;E<h;E+=c){var F=(B+E)/r;if(!(F<0||F>=n.outDepth||Math.floor(F)!==F))for(var T=0;T<A;T+=d){var I=(k+T)/s;if(!(I<0||I>=n.outHeight||Math.floor(I)!==I))for(var D=0;D<f;D+=u){var L=(S+D)/a;L<0||L>=n.outWidth||Math.floor(L)!==L||(_+=b.get(y,F,I,L,w))}}}x.set(_*v,y,N,j,C,w)}return x.toTensor()},t.prototype.maxPool3d=function(e,t){return Ng(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=mc(t.outShape,"int32"),r=t.strideDepth,s=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,d=t.effectiveFilterHeight,u=t.effectiveFilterWidth,h=t.padInfo.front,A=t.padInfo.top,f=t.padInfo.left,p=this.bufferSync(e),m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var x=0;x<t.outDepth;++x){for(var v=x*r-h,b=v;b<0;)b+=i;for(var y=Math.min(t.inDepth,c+v),w=0;w<t.outHeight;++w){for(var N=w*s-A,j=N;j<0;)j+=o;for(var C=Math.min(t.inHeight,d+N),B=0;B<t.outWidth;++B){for(var k=B*a-f,S=k;S<0;)S+=l;for(var _=Math.min(t.inWidth,u+k),E=Number.NEGATIVE_INFINITY,F=-1,T=b;T<y;T+=i)for(var I=T-v,D=j;D<C;D+=o)for(var L=D-N,P=S;P<_;P+=l){var R=P-k,U=p.get(m,T,D,P,g);U>=E&&(E=U,F=I*d*u+L*d+R)}n.set(F,m,x,w,B,g)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){Ng([t,n],"maxPool3dBackprop");for(var s=this.maxPool3dPositions(t,r),a=r.strideDepth,i=r.strideHeight,o=r.strideWidth,l=r.dilationDepth,c=r.dilationHeight,d=r.dilationWidth,u=r.effectiveFilterDepth,h=r.effectiveFilterHeight,A=r.effectiveFilterWidth,f=u-1-r.padInfo.front,p=A-1-r.padInfo.left,m=h-1-r.padInfo.top,g=mc(t.shape,"float32"),x=this.bufferSync(s),v=this.bufferSync(e),b=0;b<r.batchSize;++b)for(var y=0;y<r.inChannels;++y)for(var w=0;w<r.inDepth;++w)for(var N=0;N<r.inHeight;++N)for(var j=0;j<r.inWidth;++j){for(var C=w-f,B=N-m,k=j-p,S=0,_=0;_<u;_+=l){var E=(C+_)/a;if(!(E<0||E>=r.outDepth||Math.floor(E)!==E))for(var F=0;F<h;F+=c){var T=(B+F)/i;if(!(T<0||T>=r.outHeight||Math.floor(T)!==T))for(var I=0;I<A;I+=d){var D=(k+I)/o;if(!(D<0||D>=r.outWidth||Math.floor(D)!==D)){var L=u*h*A-1-x.get(b,E,T,D,y)===_*h*A+F*A+I?1:0;0!==L&&(S+=v.get(b,E,T,D,y)*L)}}}}g.set(S,b,w,N,j,y)}return g.toTensor()},t.prototype.cast=function(e,t){return kd(e,t,this)},t.prototype.reshape=function(e,t){return Sd(e,t)},t.prototype.avgPool=function(e,t){return Ng(e,"avgPool"),this.pool(e,t,"avg").toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){Ng(e,"resizeBilinear");for(var s=e.shape,a=s[0],i=s[1],o=s[2],l=s[3],c=this.readSync(e.dataId),d=new Float32Array(ai([a,t,n,l])),u=[r&&t>1?i-1:i,r&&n>1?o-1:o],h=[r&&t>1?t-1:t,r&&n>1?n-1:n],A=0,f=u[0]/h[0],p=u[1]/h[1],m=0;m<a;m++)for(var g=0;g<t;g++)for(var x=f*g,v=Math.floor(x),b=x-v,y=Math.min(i-1,Math.ceil(x)),w=m*e.strides[0]+v*e.strides[1],N=m*e.strides[0]+y*e.strides[1],j=0;j<n;j++)for(var C=p*j,B=Math.floor(C),k=C-B,S=Math.min(o-1,Math.ceil(C)),_=w+B*e.strides[2],E=N+B*e.strides[2],F=w+S*e.strides[2],T=N+S*e.strides[2],I=0;I<l;I++){var D=c[_+I],L=c[E+I],P=D+(c[F+I]-D)*k,R=P+(L+(c[T+I]-L)*k-P)*b;d[A++]=R}return Ol(d,[a,t,n,l])},t.prototype.resizeBilinearBackprop=function(e,t,n){Ng([e,t],"resizeBilinearBackprop");for(var r=t.shape,s=r[0],a=r[1],i=r[2],o=r[3],l=e.shape,c=l[1],d=l[2],u=new Float32Array(s*a*i*o),h=[n&&c>1?a-1:a,n&&d>1?i-1:i],A=[n&&c>1?c-1:c,n&&d>1?d-1:d],f=h[0]/A[0],p=h[1]/A[1],m=this.readSync(e.dataId),g=0,x=0;x<s;x++)for(var v=x*t.strides[0],b=0;b<c;b++)for(var y=b*f,w=Math.floor(y),N=Math.min(Math.ceil(y),a-1),j=v+w*t.strides[1],C=v+N*t.strides[1],B=y-w,k=1-B,S=0;S<d;S++)for(var _=S*p,E=Math.floor(_),F=Math.min(Math.ceil(_),i-1),T=_-E,I=1-T,D=j+E*t.strides[2],L=j+F*t.strides[2],P=C+E*t.strides[2],R=C+F*t.strides[2],U=k*I,O=k*T,M=B*I,Q=B*T,H=0;H<o;H++){var z=m[g++];u[D+H]+=z*U,u[L+H]+=z*O,u[P+H]+=z*M,u[R+H]+=z*Q}return Vl(u,[s,i,a,o],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){Ng(e,"resizeNearestNeighbor");for(var s=e.shape,a=s[0],i=s[1],o=s[2],l=s[3],c=this.readSync(e.dataId),d=new Float32Array(a*t*n*l),u=[r&&t>1?i-1:i,r&&n>1?o-1:o],h=[r&&t>1?t-1:t,r&&n>1?n-1:n],A=u[0]/h[0],f=u[1]/h[1],p=0,m=0;m<a;m++)for(var g=m*e.strides[0],x=0;x<t;x++)for(var v=A*x,b=g+Math.min(i-1,r?Math.round(v):Math.floor(v))*e.strides[1],y=0;y<n;y++)for(var w=f*y,N=b+Math.min(o-1,r?Math.round(w):Math.floor(w))*e.strides[2],j=0;j<l;j++){var C=c[N+j];d[p++]=C}return Ol(d,[a,t,n,l],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){Ng([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,s=r[0],a=r[1],i=r[2],o=r[3],l=e.shape,c=l[1],d=l[2],u=new Float32Array(s*a*i*o),h=this.readSync(e.dataId),A=[n&&c>1?a-1:a,n&&d>1?i-1:i],f=[n&&c>1?c-1:c,n&&d>1?d-1:d],p=A[0]/f[0],m=A[1]/f[1],g=1/p,x=1/m,v=2*Math.ceil(g)+2,b=2*Math.ceil(x)+2,y=0;y<s;y++)for(var w=y*t.strides[0],N=0;N<a;N++)for(var j=w+N*t.strides[1],C=Math.floor(N*g),B=Math.floor(C-v/2),k=0;k<i;k++)for(var S=j+k*t.strides[2],_=Math.floor(k*x),E=Math.floor(_-b/2),F=0;F<o;F++){for(var T=0,I=0;I<v;I++){var D=I+B;if(!(D<0||D>=c)){var L=w+D*e.strides[1],P=D*p;if(N===Math.min(a-1,n?Math.round(P):Math.floor(P)))for(var R=0;R<b;R++){var U=R+E;if(!(U<0||U>=d)){var O=L+U*e.strides[2],M=U*m;k===Math.min(i-1,n?Math.round(M):Math.floor(M))&&(T+=h[O+F])}}}}u[S+F]=T}return Vl(u,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,s,a){Ng([e,t,n,s,a],"batchNorm");for(var i=this.readSync(e.dataId),o=this.readSync(t.dataId),l=this.readSync(n.dataId),c=s?this.readSync(s.dataId):new Float32Array([1]),d=a?this.readSync(a.dataId):new Float32Array([0]),u=new Float32Array(i.length),h=d.length,A=c.length,f=l.length,p=o.length,m=0,g=0,x=0,v=0,b=0;b<i.length;++b)u[b]=d[m++]+(i[b]-o[g++])*c[x++]/Math.sqrt(l[v++]+r),m>=h&&(m=0),g>=p&&(g=0),x>=A&&(x=0),v>=f&&(v=0);return Vl(u,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,s){Ng(e,"localResponseNormalization4D");var a=e.shape[3],i=a-1,o=this.readSync(e.dataId),l=e.size,c=new Float32Array(l);function d(e){for(var n=e%a,r=e-n+Math.max(0,n-t),s=e-n+Math.min(n+t,i),l=0;r<=s;r++){var c=o[r];l+=c*c}return l}for(var u=0;u<l;u++){var h=d(u),A=o[u]*Math.pow(n+r*h,-s);c[u]=A}return Vl(c,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,s,a,i){Ng(e,"LRNGrad");for(var o=e.shape[3],l=this.readSync(e.dataId),c=this.readSync(t.dataId),d=this.readSync(n.dataId),u=new Float32Array(e.size),h=e.size,A=0;A<h;A++){for(var f=A%o,p=A-f+Math.max(0,f-r),m=A-f+Math.min(o,f+r+1),g=0,x=p;x<m;x++)g+=Math.pow(c[x],2);for(g=a*g+s,x=p;x<m;x++){var v=-2*a*i*c[x]*d[A]/g;A===x&&(v+=Math.pow(g,-i)),v*=l[A],u[x]+=v}}return Vl(u,e.shape)},t.prototype.multinomial=function(e,t,n,r){Ng(e,"multinomial");for(var s=t?e:od(e),a=s.shape[0],i=s.shape[1],o=Gl([a,n],"int32"),l=this.readSync(o.dataId),c=this.readSync(s.dataId),d=0;d<a;++d){var u=d*i,h=new Float32Array(i-1);h[0]=c[u];for(var A=1;A<h.length;++A)h[A]=h[A-1]+c[u+A];for(var f=hc(r.toString()),p=d*n,m=0;m<n;++m){var g=f();l[p+m]=h.length;for(var x=0;x<h.length;x++)if(g<h[x]){l[p+m]=x;break}}}return o},t.prototype.oneHot=function(e,t,n,r){Ng(e,"oneHot");var s=new Float32Array(e.size*t);s.fill(r);for(var a=this.readSync(e.dataId),i=0;i<e.size;++i)a[i]>=0&&a[i]<t&&(s[i*t+a[i]]=n);return zl(s,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,s){return Ng(e,"nonMaxSuppression"),Pd(this.readSync(e.dataId),this.readSync(t.dataId),n,r,s)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],s=mc(e.shape,"float32"),a=mc(e.shape,"float32"),i=Rl(e).as2D(n,r),o=Ul(e).as2D(n,r),l=0;l<n;l++)for(var c=i.slice([l,0],[1,r]),d=o.slice([l,0],[1,r]),u=Pl(c,d),h=this.readSync(this.fftImpl(u,t).dataId),A=0;A<r;A++){var f=Fd(h,A);s.values[l*r+A]=f.real,a.values[l*r+A]=f.imag}return Pl(s.toTensor(),a.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var s=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(s=Pl(Rl(s).div(Ql(r)),Ul(s).div(Ql(r)))),s}var a=this.readSync(e.dataId),i=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(a,r,t));return Pl(i.real,i.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),s=t/2,a=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),s=0;s<e.length;s+=4)n[Math.floor(s/4)]=e[s],r[Math.floor(s/4)]=e[s+1];return{real:n,imag:r}}(r),i=Pl(a.real,a.imag).as1D(),o=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),s=2;s<e.length;s+=4)n[Math.floor(s/4)]=e[s],r[Math.floor(s/4)]=e[s+1];return{real:n,imag:r}}(r),l=Pl(o.real,o.imag).as1D();i=this.fftRadix2(i,s,n),l=this.fftRadix2(l,s,n);var c=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),s=0;s<Math.ceil(e/2);s++){var a=(t?2:-2)*Math.PI*(s/e);n[s]=Math.cos(a),r[s]=Math.sin(a)}return{real:n,imag:r}}(t,n),d=Pl(c.real,c.imag).mul(l),u=i.add(d),h=i.sub(d),A=Rl(u).concat(Rl(h)),f=Ul(u).concat(Ul(h));return Pl(A,f).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),s=0;s<t;s++){for(var a=0,i=0,o=0;o<t;o++){var l=Id(s*o,t,n),c=Fd(e,o);a+=c.real*l.real-c.imag*l.imag,i+=c.real*l.imag+c.imag*l.real}n&&(a/=t,i/=t),Td(r,a,i,s)}return r},t.prototype.depthToSpace=function(e,t,n){ti("NHWC"===n,function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n}),ti(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t});for(var r=e.shape[0],s=e.shape[1],a=e.shape[2],i=e.shape[3],o=s*t,l=a*t,c=i/(t*t),d=this.readSync(e.dataId),u=new Float32Array(r*o*l*c),h=0,A=0;A<r;++A)for(var f=0;f<o;++f)for(var p=Math.floor(f/t),m=f%t,g=0;g<l;++g)for(var x=Math.floor(g/t),v=(m*t+g%t)*c,b=0;b<c;++b){var y=b+v+i*(x+a*(p+s*A));u[h++]=d[y]}return Vl(u,[r,o,l,c])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var s=fd(e.shape,t.shape),a=mc(s,n),i=this.readSync(e.dataId),o=this.readSync(t.dataId),l=hd(e.shape,s),c=hd(t.shape,s),d=a.values;if(l.length+c.length===0)for(var u=0;u<d.length;++u)d[u]=r(i[u%i.length],o[u%o.length]);else{var h=this.bufferSync(e),A=this.bufferSync(t),f=function(n){var s=a.indexToLoc(n),u=s.slice(-e.rank);l.forEach(function(e){return u[e]=0});var f=h.locToIndex(u),p=s.slice(-t.rank);c.forEach(function(e){return p[e]=0});var m=A.locToIndex(p);d[n]=r(i[f],o[m])};for(u=0;u<d.length;++u)f(u)}return a.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=fd(e.shape,t.shape),s=mc(r,"float32"),a=mc(r,"float32"),i=this.readSync(e.dataId),o=this.readSync(t.dataId),l=hd(e.shape,r),c=hd(t.shape,r),d=s.values,u=a.values;if(l.length+c.length===0)for(var h=0;h<d.length;h++){var A=h%i.length,f=h%o.length,p=n(i[2*A],i[2*A+1],o[2*f],o[2*f+1]);d[h]=p.real,u[h]=p.imag}else{var m=this.bufferSync(this.data.get(e.dataId).complexTensors.real),g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),x=function(r){var a=s.indexToLoc(r),h=a.slice(-e.rank);l.forEach(function(e){return h[e]=0});var A=m.locToIndex(h),f=a.slice(-t.rank);c.forEach(function(e){return f[e]=0});var p=g.locToIndex(f),x=n(i[2*A],i[2*A+1],o[2*p],o[2*p+1]);d[r]=x.real,u[r]=x.imag};for(h=0;h<d.length;h++)x(h)}return this.complex(s.toTensor(),a.toTensor())},t.prototype.split=function(e,t,n){return Hd(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,s,a){for(var i=e.shape,o=i[0],l=i[1],c=i[2],d=i[3],u=t.shape[0],h=r[0],A=r[1],f=mc([u,h,A,d],"float32"),p=this.readSync(t.dataId),m=this.readSync(n.dataId),g=this.readSync(e.dataId),x=e.strides,v=f.strides,b=0;b<u;b++){var y=4*b,w=p[y],N=p[y+1],j=p[y+2],C=p[y+3],B=m[b];if(!(B>=o))for(var k=h>1?(j-w)*(l-1)/(h-1):0,S=A>1?(C-N)*(c-1)/(A-1):0,_=0;_<h;_++){var E=h>1?w*(l-1)+_*k:.5*(w+j)*(l-1);if(E<0||E>l-1)for(var F=0;F<A;F++)for(var T=0;T<d;T++){var I=T+F*v[2]+_*v[1]+b*v[0];f.values[I]=a}else if("bilinear"===s){var D=Math.floor(E),L=Math.ceil(E),P=E-D;for(F=0;F<A;F++)if((V=A>1?N*(c-1)+F*S:.5*(N+C)*(c-1))<0||V>c-1)for(T=0;T<d;T++)I=T+F*v[2]+_*v[1]+b*v[0],f.values[I]=a;else{var R=Math.floor(V),U=Math.ceil(V),O=V-R;for(T=0;T<d;T++){var M=g[I=T+R*x[2]+D*x[1]+B*x[0]],Q=g[I=T+U*x[2]+D*x[1]+B*x[0]],H=g[I=T+R*x[2]+L*x[1]+B*x[0]],z=M+(Q-M)*O,W=H+(g[I=T+U*x[2]+L*x[1]+B*x[0]]-H)*O;I=T+F*v[2]+_*v[1]+b*v[0],f.values[I]=z+(W-z)*P}}}else for(F=0;F<A;++F){var V;if((V=A>1?N*(c-1)+F*S:.5*(N+C)*(c-1))<0||V>c-1)for(T=0;T<d;T++)I=T+F*v[2]+_*v[1]+b*v[0],f.values[I]=a;else{var K=Math.round(V),G=Math.round(E);for(T=0;T<d;T++){var q=T+K*x[2]+G*x[1]+B*x[0],X=T+F*v[2]+_*v[1]+b*v[0];f.values[X]=g[q]}}}}}return f.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var s=Zc(0,e,n),a=s.sliceRank,i=s.numUpdates,o=s.sliceSize,l=s.strides,c=s.outputSize;return this.scatter(e,t,n,c,o,i,a,l,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],s=qc(e,t),a=s[0],i=s[1],o=s[2],l=s[3];if(0===i)return Ol([],a,e.dtype);for(var c=new Vi([i,o],e.dtype),d=this.readSync(t.dataId),u=this.readSync(e.dataId),h=0;h<i;h++){for(var A=[],f=0,p=0;p<r;p++){var m=d[h*r+p];f+=m*l[p],A.push(m)}if(f<0||f>=e.size/o)throw new Error("Invalid indices: "+A+" does not index into "+e.shape);for(var g=0;g<o;g++)c.values[h*o+g]=u[f*o+g]}return c.toTensor().reshape(a)},t.prototype.scatterND=function(e,t,n){var r=Zc(0,e,n),s=r.sliceRank,a=r.numUpdates,i=r.sliceSize,o=r.strides,l=r.outputSize,c=Ql(0);return this.scatter(e,t,n,l,i,a,s,o,c,!0)},t.prototype.fill=function(e,t,n){var r=mi(n=n||Bi(t),ai(e));return r.fill(t),ho.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=mi(e.dtype,ai(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return _d(e,t,n)},t.prototype.scatter=function(e,t,n,r,s,a,i,o,l,c){var d=[r/s,s],u=this.readSync(e.dataId),h=this.readSync(t.dataId);if(0===r)return Ol([],n,t.dtype);var A=new Vi(d,t.dtype);A.values.fill(this.readSync(l.dataId)[0]);for(var f=0;f<a;f++){for(var p=[],m=0,g=0;g<i;g++){var x=u[f*i+g];p.push(x),m+=x*o[g]}if(m<0||m>=r/s)throw new Error("Invalid indices: "+p+" does not index into "+n);for(var v=0;v<s;v++)c?A.values[m*s+v]+=h[f*s+v]:A.values[m*s+v]=0===t.rank?h[0]:h[f*s+v]}return A.toTensor().reshape(n)},t}(dd);ho.registerBackend("cpu",function(){return new Cg},1);for(var Bg=0,kg=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,s=t,a=s.boxes,i=s.scores,o=r,l=o.maxOutputSize,c=o.iouThreshold,d=o.scoreThreshold,u=o.softNmsSigma,h=n;Ng(a,"NonMaxSuppressionWithScore");var A=Rd(h.data.get(a.dataId).values,h.data.get(i.dataId).values,l,c,d,u);return[A.selectedIndices,A.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,s=n;Ng(r,"square");for(var a=s.data.get(r.dataId).values,i=new Float32Array(a.length),o=0;o<a.length;++o){var l=a[o];i[o]=l*l}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:RA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,s=r.a,a=r.b,i=n;Ng([s,a],RA);var o=i.data.get(s.dataId).values,l=i.data.get(a.dataId).values,c=function(e,t,n,r,s,a){var i=fd(e,t),o=i.length,l=_i(i),c=pi(s,ai(i)),d=e.length,u=t.length,h=_i(e),A=_i(t),f=hd(e,i),p=hd(t,i);if(f.length+p.length===0)for(var m=0;m<c.length;++m)c[m]=a(n[m%n.length],r[m%r.length]);else{var g=function(e){var t=Oi(e,o,l),s=t.slice(-d);f.forEach(function(e){return s[e]=0});var i=Ui(s,d,h),m=t.slice(-u);p.forEach(function(e){return m[e]=0});var g=Ui(m,u,A);c[e]=a(n[i],r[g])};for(m=0;m<c.length;++m)g(m)}return[c,i]}(s.shape,a.shape,o,l,s.dtype,function(e,t){var n=e-t;return n*n}),d=c[0],u=c[1];return{dataId:i.write(d,u,s.dtype),shape:u,dtype:s.dtype}}}];Bg<kg.length;Bg++)qa(kg[Bg]);for(var Sg,_g=function(e){this.variableNames=["A"];var t=Jd(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},Eg=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Jd(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},Fg=0,Tg=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,s=t.pixels,a=r.numChannels,i="undefined"!=typeof HTMLVideoElement&&s instanceof HTMLVideoElement,o="undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement,l=i?[s.videoWidth,s.videoHeight]:[s.width,s.height],c=l[0],d=l[1],u=[d,c],h=[d,c,a];(o||i)&&(null==Sg&&(Sg=document.createElement("canvas").getContext("2d")),Sg.canvas.width=c,Sg.canvas.height=d,Sg.drawImage(s,0,0,c,d),s=Sg.canvas);var A=n.makeTensorInfo(u,"int32");n.texData.get(A.dataId).usage=mo.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(A.dataId),s);var f=Ha().getBool("WEBGL_PACK")?new Eg(h):new _g(h),p=n.runWebGLProgram(f,[A],"int32");return n.disposeData(A.dataId),p}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;bl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var s=t,a=s.boxes,i=s.scores,o=r,l=o.maxOutputSize,c=o.iouThreshold,d=o.scoreThreshold,u=o.softNmsSigma,h=n,A=Rd(h.readSync(a.dataId),h.readSync(i.dataId),l,c,d,u);return[A.selectedIndices,A.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,s=n,a=new oA(r.shape,"return x * x;");return s.runWebGLProgram(a,[r],r.dtype)}},{kernelName:RA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,s=r.a,a=r.b,i=n,o=Ha().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Cu("return (a - b) * (a - b);",s.shape,a.shape):new Nu("return (a - b) * (a - b);",s.shape,a.shape);return i.compileAndRun(o,[s,a])}}];Fg<Tg.length;Fg++)qa(Tg[Fg]);for(var Ig=0,Dg=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:RA,gradFunc:function(e,t){var n=t[0],r=t[1],s=Ql(2);return{a:function(){return ep(e,ep(s,ap(n,r)))},b:function(){return ep(e,ep(s,ap(r,n)))}}}}];Ig<Dg.length;Ig++)Xa(Dg[Ig]);var Lg=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();Ha().get("IS_BROWSER")&&Ha().setPlatform("browser",new Lg);var Pg,Rg=function(){function e(){this.util=n(745),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=Ha().global.fetch?Ha().global.fetch(e,t):(null==Pg&&(Pg=n(7318)),Pg(e,t))},e.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();Ha().get("IS_NODE")&&Ha().setPlatform("node",new Rg);var Ug={float32:4,int32:4,uint16:2,uint8:1,bool:1};function Og(e,t){for(var n={},r=0,s=function(t){var s=t.name,a=t.dtype,i=t.shape,o=ai(i),l=void 0;if("quantization"in t){var c=t.quantization;if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var d=Ug[c.dtype],u=e.slice(r,r+o*d),h="uint8"===c.dtype?new Uint8Array(u):new Uint16Array(u);if("float32"===a)l=Float32Array.from(h,function(e){return e*c.scale+c.min});else{if("int32"!==a)throw new Error("Unsupported dtype in weight '"+s+"': "+a);l=Int32Array.from(h,function(e){return Math.round(e*c.scale+c.min)})}r+=o*d}else if("string"===a){var A=ai(t.shape);l=[];for(var f=0;f<A;f++){var p=new Uint32Array(e.slice(r,r+4))[0];r+=4;var m=new Uint8Array(e.slice(r,r+p));l.push(m),r+=p}}else{var g=Ug[a];if(u=e.slice(r,r+o*g),"float32"===a)l=new Float32Array(u);else if("int32"===a)l=new Int32Array(u);else{if("bool"!==a)throw new Error("Unsupported dtype in weight '"+s+"': "+a);l=new Uint8Array(u)}r+=o*g}n[s]=Ol(l,i,a)},a=0,i=t;a<i.length;a++)s(i[a]);return n}function Mg(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach(function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)});var r=new Uint8Array(t),s=0;return n.forEach(function(e){r.set(new Uint8Array(e.buffer),s),s+=e.byteLength}),r.buffer}var Qg="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Hg(e){return Qg?Buffer.byteLength(e):new Blob([e]).size}function zg(e){var t=0;e.forEach(function(e){t+=e.byteLength});var n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function Wg(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Vg(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Hg(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Hg(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var Kg=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var s=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(e){var n=e(t,r);null!==n&&s.push(n)}),s},e}(),Gg="://",qg=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){ti(null!=t,function(){return"scheme must not be undefined or null."}),t.endsWith(Gg)&&(t=t.slice(0,t.indexOf(Gg))),ti(t.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();ti(null==r.managers[t],function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function Xg(e){if(-1===e.indexOf(Gg))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+qg.getSchemes().join(","));return{scheme:e.split(Gg)[0],path:e.split(Gg)[1]}}function Yg(e,t,n){return void 0===n&&(n=!1),Oa(this,void 0,void 0,function(){var r,s,a,i,o,l,c,d,u;return Ma(this,function(h){switch(h.label){case 0:return ti(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),ti((r=Kg.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),ti(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),s=r[0],ti((a=Kg.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),ti(a.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),i=a[0],o=Xg(e).scheme,l=Xg(e).path,c=o===Xg(e).scheme,[4,s.load()];case 1:return d=h.sent(),n&&c?[4,qg.getManager(o).removeModel(l)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,i.save(d)];case 4:return u=h.sent(),!n||c?[3,6]:[4,qg.getManager(o).removeModel(l)];case 5:h.sent(),h.label=6;case 6:return[2,u.modelArtifactsInfo]}})})}var Jg="models_store",Zg="model_info_store";function $g(){if(!Ha().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function ex(e){var t=e.result;t.createObjectStore(Jg,{keyPath:"modelPath"}),t.createObjectStore(Zg,{keyPath:"modelPath"})}var tx=function(){function e(e){if(this.indexedDB=$g(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return Oa(this,void 0,void 0,function(){return Ma(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},e.prototype.load=function(){return Oa(this,void 0,void 0,function(){return Ma(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(e,t){var n=this;return new Promise(function(e,r){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return ex(s)},s.onsuccess=function(){var a=s.result;if(null==t){var i=a.transaction(Jg,"readonly"),o=i.objectStore(Jg).get(n.modelPath);o.onsuccess=function(){if(null==o.result)return a.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(o.result.modelArtifacts)},o.onerror=function(e){return a.close(),r(o.error)},i.oncomplete=function(){return a.close()}}else{var l,c=Vg(t),d=a.transaction(Zg,"readwrite"),u=d.objectStore(Zg),h=u.put({modelPath:n.modelPath,modelArtifactsInfo:c});h.onsuccess=function(){var s=(l=a.transaction(Jg,"readwrite")).objectStore(Jg).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});s.onsuccess=function(){return e({modelArtifactsInfo:c})},s.onerror=function(e){var t=(u=d.objectStore(Zg)).delete(n.modelPath);t.onsuccess=function(){return a.close(),r(s.error)},t.onerror=function(e){return a.close(),r(s.error)}}},h.onerror=function(e){return a.close(),r(h.error)},d.oncomplete=function(){null==l?a.close():l.oncomplete=function(){return a.close()}}}},s.onerror=function(e){return r(s.error)}})},e.URL_SCHEME="indexeddb://",e}(),nx=function(e){return Ha().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(tx.URL_SCHEME)?(t=e.slice(tx.URL_SCHEME.length),new tx(t)):null;var t};Kg.registerSaveRouter(nx),Kg.registerLoadRouter(nx);var rx=function(){function e(){this.indexedDB=$g()}return e.prototype.listModels=function(){return Oa(this,void 0,void 0,function(){var e=this;return Ma(this,function(t){return[2,new Promise(function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return ex(r)},r.onsuccess=function(){var e=r.result,s=e.transaction(Zg,"readonly"),a=s.objectStore(Zg).getAll();a.onsuccess=function(){for(var e={},n=0,r=a.result;n<r.length;n++){var s=r[n];e[s.modelPath]=s.modelArtifactsInfo}t(e)},a.onerror=function(t){return e.close(),n(a.error)},s.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}})]})})},e.prototype.removeModel=function(e){return Oa(this,void 0,void 0,function(){var t=this;return Ma(this,function(n){var r;return e=(r=e).startsWith(tx.URL_SCHEME)?r.slice(tx.URL_SCHEME.length):r,[2,new Promise(function(n,r){var s=t.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return ex(s)},s.onsuccess=function(){var t,a=s.result,i=a.transaction(Zg,"readwrite"),o=i.objectStore(Zg),l=o.get(e);l.onsuccess=function(){if(null==l.result)return a.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var s=o.delete(e),i=function(){var s=(t=a.transaction(Jg,"readwrite")).objectStore(Jg).delete(e);s.onsuccess=function(){return n(l.result.modelArtifactsInfo)},s.onerror=function(e){return r(l.error)}};s.onsuccess=i,s.onerror=function(e){return i(),a.close(),r(l.error)}},l.onerror=function(e){return a.close(),r(l.error)},i.oncomplete=function(){null==t?a.close():t.oncomplete=function(){return a.close()}}},s.onerror=function(e){return r(s.error)}})]})})},e}();if(Ha().getBool("IS_BROWSER"))try{qg.registerManager(tx.URL_SCHEME,new rx)}catch(Ra){}var sx="/",ax="tensorflowjs_models",ix="info",ox="model_topology",lx="weight_specs",cx="weight_data",dx="model_metadata";function ux(e){return{info:[ax,e,ix].join(sx),topology:[ax,e,ox].join(sx),weightSpecs:[ax,e,lx].join(sx),weightData:[ax,e,cx].join(sx),modelMetadata:[ax,e,dx].join(sx)}}function hx(e){var t=e.split(sx);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(sx)}var Ax=function(){function e(e){if(!Ha().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=ux(this.modelPath)}return e.prototype.save=function(e){return Oa(this,void 0,void 0,function(){var t,n,r;return Ma(this,function(s){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Vg(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(Qg)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,s=t.length;r<s;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}})})},e.prototype.load=function(){return Oa(this,void 0,void 0,function(){var e,t,n,r,s,a,i;return Ma(this,function(o){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(s=this.LS.getItem(this.keys.modelMetadata))&&(a=JSON.parse(s),t.format=a.format,t.generatedBy=a.generatedBy,t.convertedBy=a.convertedBy,t.userDefinedMetadata=a.userDefinedMetadata),null==(i=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(Qg){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),s=0;s<n.length;++s)r.set([n.charCodeAt(s)],s);return r.buffer}(i),[2,t]})})},e.URL_SCHEME="localstorage://",e}(),fx=function(e){return Ha().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ax.URL_SCHEME)?(t=e.slice(Ax.URL_SCHEME.length),new Ax(t)):null;var t};Kg.registerSaveRouter(fx),Kg.registerLoadRouter(fx);var px=function(){function e(){ti(Ha().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),ti("undefined"==typeof window||void 0!==window.localStorage,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return Oa(this,void 0,void 0,function(){var e,t,n,r,s,a;return Ma(this,function(i){for(e={},t=ax+sx,n=sx+ix,r=0;r<this.LS.length;++r)(s=this.LS.key(r)).startsWith(t)&&s.endsWith(n)&&(a=hx(s),e[a]=JSON.parse(this.LS.getItem(s)));return[2,e]})})},e.prototype.removeModel=function(e){return Oa(this,void 0,void 0,function(){var t,n;return Ma(this,function(r){var s;if(e=(s=e).startsWith(Ax.URL_SCHEME)?s.slice(Ax.URL_SCHEME.length):s,t=ux(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]})})},e}();if(Ha().getBool("IS_BROWSER"))try{qg.registerManager(Ax.URL_SCHEME,new px)}catch(Ra){}function mx(e){return new Promise(function(e){return setTimeout(e)}).then(e)}var gx=function(){function e(t){if(!Ha().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return Oa(this,void 0,void 0,function(){var t,n,r,s,a,i;return Ma(this,function(o){switch(o.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},s=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=s,[4,mx(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return o.sent(),null==e.weightData?[3,4]:((i=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,i.href=t,[4,mx(function(){return i.dispatchEvent(new MouseEvent("click"))})]);case 3:o.sent(),o.label=4;case 4:return[2,{modelArtifactsInfo:Vg(e)}]}})})},e.URL_SCHEME="downloads://",e}(),xx=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return Oa(this,void 0,void 0,function(){var e,t,n=this;return Ma(this,function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(r,s){var a=new FileReader;a.onload=function(a){var i=JSON.parse(a.target.result),o=i.modelTopology;if(null!=o){0===t.length&&r({modelTopology:o});var l=i.weightsManifest;if(null!=l){var c;try{c=n.checkManifestAndWeightFiles(l,t)}catch(e){return void s(e)}var d=[],u=[],h=[];l.forEach(function(e){e.paths.forEach(function(e){u.push(e),h.push(null)}),d.push.apply(d,e.weights)}),l.forEach(function(e){e.paths.forEach(function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,s=u.indexOf(e);h[s]=n,-1===h.indexOf(null)&&r({modelTopology:o,weightSpecs:d,weightData:zg(h),format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy,userDefinedMetadata:i.userDefinedMetadata})},t.onerror=function(t){return s("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(c[e])})})}else s(new Error("weightManifest field is missing from file "+e.name))}else s(new Error("modelTopology field is missing from file "+e.name))},a.onerror=function(t){return s("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(e)})]})})},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map(function(e){return Wg(e.name)}),s={},a=0,i=e;a<i.length;a++)i[a].paths.forEach(function(e){var a=Wg(e);if(-1!==n.indexOf(a))throw new Error("Duplicate file basename found in weights manifest: '"+a+"'");if(n.push(a),-1===r.indexOf(a))throw new Error("Weight file with basename '"+a+"' is not provided.");s[e]=t[r.indexOf(a)]});if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return s},e}();function vx(e,t,n,r){!function(e){ti(null!=e&&Array.isArray(e)&&e.length>0,function(){return"promises must be a none empty array"})}(e),function(e,t){ti(e>=0&&e<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e}),ti(t>=0&&t<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t}),ti(t>=e,function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t})}(n=null==n?0:n,r=null==r?1:r);var s=0;return Promise.all(e.map(function(a){return a.then(function(a){var i=n+ ++s/e.length*(r-n);return t(i),a}),a}))}function bx(e,t){return Oa(this,void 0,void 0,function(){var n,r,s,a,i,o,l,c,d;return Ma(this,function(u){switch(u.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?Ha().platform.fetch:t.fetchFunc,r=e.map(function(e){return n(e,t.requestInit,{isBinary:!0})}),s=0,a=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return i=u.sent(),[3,4];case 2:return[4,vx(r,t.onProgress,s,a)];case 3:i=u.sent(),u.label=4;case 4:return o=i.map(function(e){return e.arrayBuffer()}),l=.5,c=1,null!=t.onProgress?[3,6]:[4,Promise.all(o)];case 5:return d=u.sent(),[3,8];case 6:return[4,vx(o,t.onProgress,l,c)];case 7:d=u.sent(),u.label=8;case 8:return[2,d]}})})}function yx(e){var t=this;return function(n,r,s){return void 0===r&&(r=""),Oa(t,void 0,void 0,function(){var t,a,i,o,l,c,d,u,h,A;return Ma(this,function(f){switch(f.label){case 0:if(t=n.map(function(){return!1}),a={},i=null!=s?s.map(function(){return!1}):[],o=[],n.forEach(function(e,n){var r=0;e.weights.forEach(function(e){var l="quantization"in e?e.quantization.dtype:e.dtype,c=Ug[l]*ai(e.shape),d=function(){t[n]=!0,null==a[n]&&(a[n]=[]),a[n].push({manifestEntry:e,groupOffset:r,sizeBytes:c})};null!=s?s.forEach(function(t,n){t===e.name&&(d(),i[n]=!0)}):d(),o.push(e.name),r+=c})}),!i.every(function(e){return e}))throw l=s.filter(function(e,t){return!i[t]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+". \nManifest JSON has weights with names: "+o.join(", ")+".");return c=t.reduce(function(e,t,n){return t&&e.push(n),e},[]),d=[],c.forEach(function(e){n[e].paths.forEach(function(e){var t=r+(r.endsWith("/")?"":"/")+e;d.push(t)})}),[4,e(d)];case 1:return u=f.sent(),h={},A=0,c.forEach(function(e){for(var t=n[e].paths.length,r=0,s=0;s<t;s++)r+=u[A+s].byteLength;for(var i=new ArrayBuffer(r),o=new Uint8Array(i),l=0,c=0;c<t;c++){var d=new Uint8Array(u[A+c]);o.set(d,l),l+=d.byteLength}a[e].forEach(function(e){var t=Og(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)h[n]=t[n]}),A+=t}),[2,h]}})})}}Kg.registerSaveRouter(function(e){return Ha().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(gx.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new gx(e)}(e.slice(gx.URL_SCHEME.length)):null});var wx=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(ti("function"==typeof t.fetchFunc,function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=Ha().platform.fetch,ti(null!=e&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&ti(2===e.length,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return Oa(this,void 0,void 0,function(){var t,n,r,s;return Ma(this,function(a){switch(a.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((s=a.sent()).ok)return[2,{modelArtifactsInfo:Vg(e),responses:[s]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+s.status+".")}})})},e.prototype.load=function(){return Oa(this,void 0,void 0,function(){var e,t,n,r,s,a,i,o,l,c,d,u;return Ma(this,function(h){switch(h.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=h.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");h.label=2;case 2:return h.trys.push([2,4,,5]),[4,e.json()];case 3:return t=h.sent(),[3,5];case 4:throw h.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,s=t.weightsManifest,a=t.generatedBy,i=t.convertedBy,o=t.format,l=t.userDefinedMetadata,null==r&&null==s)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==s?[3,7]:[4,this.loadWeights(s)];case 6:u=h.sent(),c=u[0],d=u[1],h.label=7;case 7:return[2,{modelTopology:r,weightSpecs:c,weightData:d,userDefinedMetadata:l,generatedBy:a,convertedBy:i,format:o}]}})})},e.prototype.loadWeights=function(e){return Oa(this,void 0,void 0,function(){var t,n,r,s,a,i,o,l,c,d,u;return Ma(this,function(h){switch(h.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],s=n[1],a=this.weightPathPrefix||r,i=[],o=0,l=e;o<l.length;o++)c=l[o],i.push.apply(i,c.weights);return d=[],e.forEach(function(e){e.paths.forEach(function(e){d.push(a+e+s)})}),[4,bx(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return u=h.sent(),[2,[i,zg(u)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function Nx(e){return null!=e.match(wx.URL_SCHEME_REGEX)}var jx=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every(function(e){return Nx(e)}):Nx(e))?Cx(e,{onProgress:t}):null};function Cx(e,t){return new wx(e,t)}Kg.registerSaveRouter(jx),Kg.registerLoadRouter(jx);var Bx,kx=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return Oa(this,void 0,void 0,function(){return Ma(this,function(e){return[2,this.modelArtifacts]})})},e}(),Sx=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return Oa(this,void 0,void 0,function(){return Ma(this,function(t){return[2,this.saveHandler(e)]})})},e}(),_x=Object.freeze({browserFiles:function(e){return new xx(e)},browserHTTPRequest:function(e,t){return Cx(e,t)},concatenateArrayBuffers:zg,decodeWeights:Og,encodeWeights:function(e,t){return Oa(this,void 0,void 0,function(){var n,r,s,a,i,o=this;return Ma(this,function(l){switch(l.label){case 0:for(n=[],r=[],s=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e),a=function(a){var i=s[a],l=Array.isArray(e)?e[a].tensor:e[i];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype)throw new Error("Unsupported dtype in weight '"+i+"': "+l.dtype);var c={name:i,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){var d=new Promise(function(e){return Oa(o,void 0,void 0,function(){var t,n,r,s,a,i,o;return Ma(this,function(c){switch(c.label){case 0:return[4,l.bytes()];case 1:for(t=c.sent(),n=t.reduce(function(e,t){return e+t.length},0)+4*t.length,r=new Uint8Array(n),s=0,a=0;a<t.length;a++)i=t[a],o=new Uint8Array(new Uint32Array([i.length]).buffer),r.set(o,s),s+=4,r.set(i,s),s+=i.length;return e(r),[2]}})})});r.push(d)}else r.push(l.data());null!=t&&(c.group=t),n.push(c)},i=0;i<s.length;++i)a(i);return[4,Promise.all(r)];case 1:return[2,{data:Mg(l.sent()),specs:n}]}})})},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new kx(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new kx({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new kx({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return Kg.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:Vg,getSaveHandlers:function(e){return Kg.getSaveHandlers(e)},http:Cx,isHTTPScheme:Nx,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),Oa(this,void 0,void 0,function(){return Ma(this,function(s){return[2,yx(function(e){return bx(e,{requestInit:r})})(e,t,n)]})})},registerLoadRouter:function(e){return Kg.registerLoadRouter(e)},registerSaveRouter:function(e){return Kg.registerSaveRouter(e)},weightsLoaderFactory:yx,withSaveHandler:function(e){return new Sx(e)},copyModel:function(e,t){return Oa(this,void 0,void 0,function(){return Ma(this,function(n){return[2,Yg(e,t,!1)]})})},listModels:function(){return Oa(this,void 0,void 0,function(){var e,t,n,r,s,a,i;return Ma(this,function(o){switch(o.label){case 0:e=qg.getSchemes(),t={},n=0,r=e,o.label=1;case 1:return n<r.length?(s=r[n],[4,qg.getManager(s).listModels()]):[3,4];case 2:for(i in a=o.sent())t[s+Gg+i]=a[i];o.label=3;case 3:return n++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return Oa(this,void 0,void 0,function(){return Ma(this,function(n){return[2,Yg(e,t,!0)]})})},removeModel:function(e){return Oa(this,void 0,void 0,function(){var t;return Ma(this,function(n){return t=Xg(e),[2,qg.getManager(t.scheme).removeModel(t.path)]})})}}),Ex=Ll({confusionMatrix_:function(e,t,n){var r=Nl(e,"labels","confusionMatrix"),s=Nl(t,"predictions","confusionMatrix");ti(null==n||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),ti(1===r.rank,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),ti(1===s.rank,function(){return"Expected the rank of predictions to be 1, but got "+s.rank}),ti(r.shape[0]===s.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+s.shape[0]+". Labels and predictions should have the same number of elements."}),ti(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var a=Bc(r.asType("int32"),n),i=Bc(s.asType("int32"),n);return a.transpose().matMul(i).asType("int32")}}),Fx=(Object.freeze({confusionMatrix:Ex}),Ll({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,s=!1,a=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)s=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)a=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);i=!0}if(s&&s&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=Ka("FromPixels",ho.backendName))return ho.runKernel("FromPixels",{pixels:e},{numChannels:t});var o,l,c=s?[e.videoWidth,e.videoHeight]:[e.width,e.height],d=c[0],u=c[1];if(i?o=e.getContext("2d").getImageData(0,0,d,u).data:r||n?o=e.data:(a||s)&&(null==Bx&&(Bx=document.createElement("canvas").getContext("2d")),Bx.canvas.width=d,Bx.canvas.height=u,Bx.drawImage(e,0,0,d,u),o=Bx.getImageData(0,0,d,u).data),4===t)l=new Int32Array(o);else{var h=d*u;l=new Int32Array(h*t);for(var A=0;A<h;A++)for(var f=0;f<t;++f)l[A*t+f]=o[4*A+f]}return Wl(l,[u,d,t],"int32")}})),Tx=Object.freeze({toPixels:function(e,t){return Oa(this,void 0,void 0,function(){var n,r,s,a,i,o,l,c,d,u,h,A,f,p,m,g,x,v,b,y,w,N,j;return Ma(this,function(C){switch(C.label){case 0:if(n=Nl(e,"img","toPixels"),e instanceof Xi||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),s=r[0],a=r[1],(i=2===n.rank?1:n.shape[2])>4||2===i)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return[4,n.data()];case 1:return o=C.sent(),l=n.min(),c=n.max(),[4,Promise.all([l.data(),c.data()])];case 2:if(d=C.sent(),u=d[0],h=d[1],A=u[0],f=h[0],l.dispose(),c.dispose(),"float32"===n.dtype){if(A<0||f>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+A+" - "+f+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(A<0||f>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+A+" - "+f+"].")}for(p="float32"===n.dtype?255:1,m=new Uint8ClampedArray(a*s*4),g=0;g<s*a;++g)x=void 0,v=void 0,b=void 0,y=void 0,1===i?(x=o[g]*p,v=o[g]*p,b=o[g]*p,y=255):3===i?(x=o[3*g]*p,v=o[3*g+1]*p,b=o[3*g+2]*p,y=255):4===i&&(x=o[4*g]*p,v=o[4*g+1]*p,b=o[4*g+2]*p,y=o[4*g+3]*p),m[0+(w=4*g)]=Math.round(x),m[w+1]=Math.round(v),m[w+2]=Math.round(b),m[w+3]=Math.round(y);return null!=t&&(t.width=a,t.height=s,N=t.getContext("2d"),j=new ImageData(m,a,s),N.putImageData(j,0,0)),n!==e&&n.dispose(),[2,m]}})})},fromPixels:Fx}),Ix=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),Dx=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function Lx(e){ti(null!=e.className,function(){return"Class being registered does not have the static className property defined."}),ti("string"==typeof e.className,function(){return"className is required to be a string, but got type "+typeof e.className}),ti(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),Dx.register(e)}Object.freeze({Serializable:Ix,SerializationMap:Dx,registerClass:Lx});function Px(){return 32===ho.backend.floatPrecision()?.001:.1}function Rx(e,t,n){var r=!0;if((bi(e)||bi(t))&&(r=!1),bi(e)&&bi(t)&&(r=!0),r){var s=e.constructor.name,a=t.constructor.name;if(s!==a)throw new Error("Arrays are of different type. Actual: "+s+". Expected: "+a)}if(Array.isArray(e)&&Array.isArray(t)){var i=yl(e),o=yl(t);if(!ii(i,o))throw new Error("Arrays have different shapes. Actual: ["+i+"]. Expected: ["+o+"]")}var l=bi(e)?e:si(e),c=bi(t)?t:si(t);if(l.length!==c.length)throw new Error("Arrays have different lengths actual: "+l.length+" vs expected: "+c.length+".\nActual:   "+l+".\nExpected: "+c+".");for(var d=0;d<c.length;++d){var u=l[d],h=c[d];if(!n(u,h))throw new Error("Arrays differ: actual["+d+"] = "+u+", expected["+d+"] = "+h+".\nActual:   "+l+".\nExpected: "+c+".")}}function Ux(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=Px()),Rx(e,t,function(e,t){return Ux(e,t,n)})},testEpsilon:Px,expectPromiseToFail:function(e,t){e().then(function(){return t.fail()},function(){return t()})},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return Ni(e)||Ni(e[0])||Ni(t)||Ni(t[0])?Rx(e,n,function(e,t){return e==t}):Rx(e,t,function(e,t){return Ux(e,t,0)})},expectNumbersClose:function(e,t,n){if(null==n&&(n=Px()),!Ux(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:bh,webgl_util:pl,forceHalfFloat:function(){Ha().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:LA,setWebGLContext:bo,GPGPUContext:yh});var Ox=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ua(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),s=r.value,a=r.grads;if(null!=n){var i=n.map(function(e){return{name:e.name,tensor:a[e.name]}});this.applyGradients(i)}else this.applyGradients(a);return vl(a),t?s:(s.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){ti(ki(e),function(){return"The f passed in variableGrads(f) must be a function"}),ti(null==t||Array.isArray(t)&&t.every(function(e){return e instanceof to}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=null!=t;if(!n)for(var r in t=[],ho.registeredVariables)t.push(ho.registeredVariables[r]);var s=n?t.filter(function(e){return!e.trainable}):null,a=t.length;ti((t=t.filter(function(e){return e.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."});var i=ho.gradients(e,t,null,!0),o=i.value,l=i.grads;ti(l.some(function(e){return null!=e}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),ti(0===o.rank,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+o.rank+" tensor"});var c={};return t.forEach(function(e,t){null!=l[t]&&(c[e.name]=l[t])}),null!=s&&s.forEach(function(e){return c[e.name]=null}),{value:o,grads:c}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&vl(this.iterations_)},t.prototype.saveIterations=function(){return Oa(this,void 0,void 0,function(){return Ma(this,function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:Ql(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return Oa(this,void 0,void 0,function(){return Ma(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(e){return Oa(this,void 0,void 0,function(){return Ma(this,function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(e){return Oa(this,void 0,void 0,function(){var t;return Ma(this,function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}})})},t}(Ix);Object.defineProperty(Ox,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Mx=function(e){function t(t,n,r){void 0===r&&(r=null);var s=e.call(this)||this;return s.learningRate=t,s.rho=n,s.epsilon=r,s.accumulatedGrads=[],s.accumulatedUpdates=[],null==r&&(s.epsilon=ho.backend.epsilon()),s}return Ua(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var s=ho.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:xl(function(){return Jl(s).variable(!1)})}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:xl(function(){return Jl(s).variable(!1)})});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=t.accumulatedGrads[r].variable,o=t.accumulatedUpdates[r].variable;xl(function(){var e=i.mul(t.rho).add(a.square().mul(1-t.rho)),n=o.add(t.epsilon).sqrt().div(i.add(t.epsilon).sqrt()).mul(a),r=o.mul(t.rho).add(n.square().mul(1-t.rho));i.assign(e),o.assign(r);var l=n.mul(-t.learningRate).add(s);s.assign(l)})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(vl(this.accumulatedGrads.map(function(e){return e.variable})),vl(this.accumulatedUpdates.map(function(e){return e.variable})))},t.prototype.getWeights=function(){return Oa(this,void 0,void 0,function(){var e;return Ma(this,function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return Oa(this,void 0,void 0,function(){var t;return Ma(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(Ox);Lx(Mx);var Qx=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return Ua(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var s=ho.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:xl(function(){return ql(s.shape,t.initialAccumulatorValue).variable(!1)})});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=t.accumulatedGrads[r].variable;xl(function(){var e=i.add(a.square());i.assign(e);var n=a.div(e.add(ho.backend.epsilon()).sqrt()).mul(-t.learningRate).add(s);s.assign(n)})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&vl(this.accumulatedGrads.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return Oa(this,void 0,void 0,function(){return Ma(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return Oa(this,void 0,void 0,function(){return Ma(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(Ox);Lx(Qx);var Hx=function(e){function t(t,n,r,s){void 0===s&&(s=null);var a=e.call(this)||this;return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=s,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],xl(function(){a.accBeta1=Ql(n).variable(),a.accBeta2=Ql(r).variable()}),null==s&&(a.epsilon=ho.backend.epsilon()),a}return Ua(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e);xl(function(){var r=ap(1,t.accBeta1),s=ap(1,t.accBeta2);n.forEach(function(n,a){var i=ho.registeredVariables[n];null==t.accumulatedFirstMoment[a]&&(t.accumulatedFirstMoment[a]={originalName:n+"/m",variable:xl(function(){return Jl(i).variable(!1)})}),null==t.accumulatedSecondMoment[a]&&(t.accumulatedSecondMoment[a]={originalName:n+"/v",variable:xl(function(){return Jl(i).variable(!1)})});var o=Array.isArray(e)?e[a].tensor:e[n];if(null!=o){var l=t.accumulatedFirstMoment[a].variable,c=t.accumulatedSecondMoment[a].variable,d=l.mul(t.beta1).add(o.mul(1-t.beta1)),u=c.mul(t.beta2).add(o.square().mul(1-t.beta2)),h=d.div(r),A=u.div(s);l.assign(d),c.assign(u);var f=h.div(A.sqrt().add(t.epsilon)).mul(-t.learningRate).add(i);i.assign(f)}}),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&vl(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedSecondMoment&&vl(this.accumulatedSecondMoment.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return Oa(this,void 0,void 0,function(){var e;return Ma(this,function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return Oa(this,void 0,void 0,function(){var t,n=this;return Ma(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),xl(function(){n.accBeta1.assign(np(n.beta1,n.iterations_+1)),n.accBeta2.assign(np(n.beta2,n.iterations_+1))}),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(Ox);Lx(Hx);var zx=function(e){function t(t,n,r,s,a){void 0===s&&(s=null),void 0===a&&(a=0);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=s,i.decay=a,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],xl(function(){i.iteration=Ql(0).variable(),i.accBeta1=Ql(n).variable()}),null==s&&(i.epsilon=ho.backend.epsilon()),i}return Ua(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e);xl(function(){var r=ap(1,t.accBeta1),s=Wf(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach(function(n,a){var i=ho.registeredVariables[n];null==t.accumulatedFirstMoment[a]&&(t.accumulatedFirstMoment[a]={originalName:n+"/m",variable:Jl(i).variable(!1)}),null==t.accumulatedWeightedInfNorm[a]&&(t.accumulatedWeightedInfNorm[a]={originalName:n+"/v",variable:Jl(i).variable(!1)});var o=Array.isArray(e)?e[a].tensor:e[n];if(null!=o){var l=t.accumulatedFirstMoment[a].variable,c=t.accumulatedWeightedInfNorm[a].variable,d=l.mul(t.beta1).add(o.mul(1-t.beta1)),u=c.mul(t.beta2),h=o.abs(),A=u.maximum(h);l.assign(d),c.assign(A);var f=s.div(r).mul(d.div(A.add(t.epsilon))).add(i);i.assign(f)}}),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&vl(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedWeightedInfNorm&&vl(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return Oa(this,void 0,void 0,function(){return Ma(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(e){return Oa(this,void 0,void 0,function(){return Ma(this,function(e){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(Ox);Lx(zx);var Wx=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return Ua(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var s=Array.isArray(e)?e[r].tensor:e[n];if(null!=s){var a=ho.registeredVariables[n];xl(function(){var e=t.c.mul(s).add(a);a.assign(e)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return ho.keep(e)}(Ql(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Oa(this,void 0,void 0,function(){return Ma(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}})})},t.prototype.setWeights=function(e){return Oa(this,void 0,void 0,function(){return Ma(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(Ox);Lx(Wx);var Vx=function(e){function t(t,n,r){void 0===r&&(r=!1);var s=e.call(this,t)||this;return s.learningRate=t,s.momentum=n,s.useNesterov=r,s.accumulations=[],s.m=Ql(s.momentum),s}return Ua(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var s=ho.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:xl(function(){return Jl(s).variable(!1)})});var a=t.accumulations[r].variable,i=Array.isArray(e)?e[r].tensor:e[n];null!=i&&xl(function(){var e,n=t.m.mul(a).add(i);e=t.useNesterov?t.c.mul(i.add(n.mul(t.m))).add(s):t.c.mul(n).add(s),a.assign(n),s.assign(e)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&vl(this.accumulations.map(function(e){return e.variable}))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return Oa(this,void 0,void 0,function(){return Ma(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return Oa(this,void 0,void 0,function(){return Ma(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(Wx);Lx(Vx);var Kx=function(e){function t(t,n,r,s,a){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===s&&(s=null),void 0===a&&(a=!1);var i=e.call(this)||this;if(i.learningRate=t,i.decay=n,i.momentum=r,i.epsilon=s,i.accumulatedMeanSquares=[],i.accumulatedMoments=[],i.accumulatedMeanGrads=[],i.centered=a,null==s&&(i.epsilon=ho.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return i}return Ua(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var s=ho.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:xl(function(){return Jl(s).variable(!1)})}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:xl(function(){return Jl(s).variable(!1)})}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:xl(function(){return Jl(s).variable(!1)})});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=t.accumulatedMeanSquares[r].variable,o=t.accumulatedMoments[r].variable;xl(function(){var e=i.mul(t.decay).add(a.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,l=n.mul(t.decay).add(a.mul(1-t.decay)),c=o.mul(t.momentum).add(a.mul(t.learningRate).div(e.sub(l.square().add(t.epsilon)).sqrt()));i.assign(e),n.assign(l),o.assign(c);var d=s.sub(c);s.assign(d)}else{var u=i.mul(t.decay).add(a.square().mul(1-t.decay));c=o.mul(t.momentum).add(a.mul(t.learningRate).div(u.add(t.epsilon).sqrt())),i.assign(u),o.assign(c),d=s.sub(c),s.assign(d)}})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&vl(this.accumulatedMeanSquares.map(function(e){return e.variable})),null!=this.accumulatedMeanGrads&&this.centered&&vl(this.accumulatedMeanGrads.map(function(e){return e.variable})),null!=this.accumulatedMoments&&vl(this.accumulatedMoments.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return Oa(this,void 0,void 0,function(){var e;return Ma(this,function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return Oa(this,void 0,void 0,function(){var t;return Ma(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(Ox);Lx(Kx);var Gx=function(){function e(){}return e.sgd=function(e){return new Wx(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new Vx(e,t,n)},e.rmsprop=function(e,t,n,r,s){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===s&&(s=!1),new Kx(e,t,n,r,s)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Hx(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new Mx(e,t,n)},e.adamax=function(e,t,n,r,s){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===s&&(s=0),new zx(e,t,n,r,s)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new Qx(e,t)},e}();Gx.sgd,Gx.momentum,Gx.adadelta,Gx.adagrad,Gx.rmsprop,Gx.adamax,Gx.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;Xi.prototype.squaredDifference=function(e){return UA(this,e)},Gi=wg;var qx=function(e,t){return qx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},qx(e,t)};function Xx(e,t){function n(){this.constructor=e}qx(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Yx=function(){return Yx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Yx.apply(this,arguments)};function Jx(e,t,n,r){return new(n||(n=Promise))(function(s,a){function i(e){try{l(r.next(e))}catch(Ua){a(Ua)}}function o(e){try{l(r.throw(e))}catch(Ua){a(Ua)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})}function Zx(e,t){var n,r,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){i.label=a[1];break}if(6===a[0]&&i.label<s[1]){i.label=s[1],s=a;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(a);break}s[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(Ua){a=[6,Ua],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}function $x(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),s=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,o=a.length;i<o;i++,s++)r[s]=a[i];return r}var ev=function(){function e(e,t){if(!lv(e)||!lv(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function tv(e,t){return e instanceof Xi&&e.shape.length===t}function nv(e){return tv(e,3)}function rv(e){return tv(e,4)}function sv(e){return e%2===0}function av(e){return e&&e.width&&e.height}function iv(e){return e.reduce(function(e,t){return e.add(t)},new dv(0,0)).div(new dv(e.length,e.length))}function ov(e,t,n){return Array(e).fill(0).map(function(e,r){return t+r*n})}function lv(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function cv(e){return lv(e)&&0<=e&&e<=1}var dv=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),uv=function(){function e(t,n){void 0===n&&(n=!0);var r=t||{},s=[r.left,r.top,r.right,r.bottom].every(lv),a=[r.x,r.y,r.width,r.height].every(lv);if(!a&&!s)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var i=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],o=i[0],l=i[1],c=i[2],d=i[3];e.assertIsValidBox({x:o,y:l,width:c,height:d},"Box.constructor",n),this._x=o,this._y=l,this._width=c,this._height=d}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(lv)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new dv(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new dv(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new dv(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new dv(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(e){return Math.round(e)});return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(e){return Math.floor(e)});return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,s=t.width,a=t.height,i=Math.abs(s-a);return s<a&&(n-=i/2,s+=i),a<s&&(r-=i/2,a+=i),new e({x:n,y:r,width:s,height:a})},e.prototype.rescale=function(t){var n=av(t)?t.width:t,r=av(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new e({x:r[0],y:r[1],width:r[2],height:r[3]})},e.prototype.clipAtImageBorders=function(t,n){var r=this,s=r.x,a=r.y,i=r.right,o=r.bottom,l=Math.max(s,0),c=Math.max(a,0),d=i-l,u=o-c;return new e({x:l,y:c,width:Math.min(d,t-l),height:Math.min(u,n-c)}).floor()},e.prototype.shift=function(t,n){var r=this.width,s=this.height;return new e({x:this.x+t,y:this.y+n,width:r,height:s})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,s=n,a=r,i=this.left,o=this.top,l=this.right,c=this.bottom;return l>t&&(s=-l+t+n,l=t),c>e&&(a=-c+e+r,c=e),i<1&&(a=2-i,i=1),o<1&&(a=2-o,o=1),{dy:1,edy:a,dx:1,edx:s,y:o,ey:c,x:i,ex:l,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),hv=function(e){function t(t,n,r,s,a){return void 0===a&&(a=!1),e.call(this,{left:t,top:n,right:r,bottom:s},a)||this}return Xx(t,e),t}(uv),Av=function(){function e(e,t,n,r,s){this._imageDims=new ev(s.width,s.height),this._score=e,this._classScore=t,this._className=n,this._box=new uv(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new uv(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),fv=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return Xx(t,e),t.prototype.forSize=function(n,r){var s=e.prototype.forSize.call(this,n,r);return new t(s.score,s.relativeBox,s.imageDims)},t}(Av);function pv(e,t,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function mv(e,t,n,r){void 0===r&&(r=!0);for(var s=t.map(function(e,t){return{score:e,boxIndex:t}}).sort(function(e,t){return e.score-t.score}).map(function(e){return e.boxIndex}),a=[],i=function(){var t=s.pop();a.push(t);for(var i=s,o=[],l=0;l<i.length;l++){var c=i[l],d=e[t],u=e[c];o.push(pv(d,u,r))}s=s.filter(function(e,t){return o[t]<=n})};s.length>0;)i();return a}function gv(e,t){return xl(function(){var n=t[0],r=t[1],s=t[2],a=ql($x(e.shape.slice(0,3),[1]),n),i=ql($x(e.shape.slice(0,3),[1]),r),o=ql($x(e.shape.slice(0,3),[1]),s),l=Zl([a,i,o],3);return ap(e,l)})}function xv(e){return 1/(1+Math.exp(-e))}var vv,bv=function(e){function t(t,n,r,s,a){return void 0===a&&(a=!1),e.call(this,{x:t,y:n,width:r,height:s},a)||this}return Xx(t,e),t}(uv),yv=function(){function e(e,t,n){void 0===n&&(n=new dv(0,0));var r=t.width,s=t.height;this._imgDims=new ev(r,s),this._shift=n,this._positions=e.map(function(e){return e.mul(new dv(r,s)).add(n)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new dv(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(t){return t.sub(e._shift).div(new dv(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new dv(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof fv?e.box.floor():new uv(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),s=r.useDlibAlignment,a=r.minBoxPadding;return s?this.alignDlib():this.alignMinBbox(a)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],s=function(e){return r.sub(e).magnitude()},a=(s(t)+s(n))/2,i=Math.floor(a/.45),o=iv(e),l=Math.floor(Math.max(0,o.x-.5*i)),c=Math.floor(Math.max(0,o.y-.43*i));return new bv(l,c,Math.min(i,this.imageWidth+l),Math.min(i,this.imageHeight+c))},e.prototype.alignMinBbox=function(e){var t=function(e){var t=e.map(function(e){return e.x}),n=e.map(function(e){return e.y}),r=t.reduce(function(e,t){return t<e?t:e},1/0),s=n.reduce(function(e,t){return t<e?t:e},1/0),a=t.reduce(function(e,t){return e<t?t:e},0),i=n.reduce(function(e,t){return e<t?t:e},0);return new hv(r,s,a,i)}(this.positions);return t.pad(t.width*e,t.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),wv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],iv([e[3],e[4]])]},t}(yv),Nv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(iv)},t}(yv),jv=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+function(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}(this.distance)+")":"")},e}(),Cv=function(e){function t(t,n){var r=e.call(this,t)||this;return r._label=n,r}return Xx(t,e),t.assertIsValidLabeledBox=function(e,t){if(uv.assertIsValidBox(e,t),!lv(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(uv),Bv=function(){function e(e,t){if("string"!==typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(e){return!(e instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},e.fromJSON=function(t){var n=t.descriptors.map(function(e){return new Float32Array(e)});return new e(t.label,n)},e}();!function(e){function t(t,n,r,s){var a=e.call(this,t,n)||this;return a._score=r,a._classScore=s,a}Xx(t,e),t.assertIsValidPredictedBox=function(e,t){if(Cv.assertIsValidLabeledBox(e,t),!cv(e.score)||!cv(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(Cv);function kv(e,t){var n={detection:t};return Object.assign({},e,n)}function Sv(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function _v(e){var t="";if(!e)try{e=n(1591)}catch(s){t=s.toString()}var r=e?function(t){return new Promise(function(n,r){e.readFile(t,function(e,t){return e?r(e):n(t)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:r}}function Ev(){var e=n.g.Canvas||n.g.HTMLCanvasElement,t=n.g.Image||n.g.HTMLImageElement,r=n.g.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},s=_v();return Yx({Canvas:e||function(){},CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||function(){},Image:t||function(){},ImageData:n.g.ImageData||function(){},Video:n.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:r},s)}function Fv(){return"object"===typeof window&&"undefined"!==typeof document&&"undefined"!==typeof HTMLImageElement&&"undefined"!==typeof HTMLCanvasElement&&"undefined"!==typeof HTMLVideoElement&&"undefined"!==typeof ImageData&&"undefined"!==typeof CanvasRenderingContext2D}function Tv(){return"object"===typeof n.g&&"undefined"!==typeof process&&!!process.version}function Iv(e){vv=e}function Dv(){Fv()&&Iv(Sv()),Tv()&&Iv(Ev())}var Lv,Pv={getEnv:function(){if(!vv)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return vv},setEnv:Iv,initialize:Dv,createBrowserEnv:Sv,createFileSystem:_v,createNodejsEnv:Ev,monkeyPatch:function(e){if(vv||Dv(),!vv)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?vv.Canvas:t,r=e.Image,s=void 0===r?vv.Image:r;vv.Canvas=n,vv.Image=s,vv.createCanvasElement=e.createCanvasElement||function(){return new n},vv.createImageElement=e.createImageElement||function(){return new s},vv.ImageData=e.ImageData||vv.ImageData,vv.Video=e.Video||vv.Video,vv.fetch=e.fetch||vv.fetch,vv.readFile=e.readFile||vv.readFile},isBrowser:Fv,isNodejs:Tv};function Rv(e){return Pv.isNodejs()||"string"!==typeof e?e:document.getElementById(e)}function Uv(e){var t=Pv.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var r=Rv(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var s=r.getContext("2d");if(!s)throw new Error("resolveContext2d - canvas 2d context is null");return s}Dv(),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"}(Lv||(Lv={}));var Ov=function(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,s=e.fontSize,a=e.fontStyle,i=e.padding;this.anchorPosition=t||Lv.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=s||14,this.fontStyle=a||"Georgia",this.padding=i||4},Mv=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"===typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new Ov(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map(function(t){return e.measureText(t).width}).reduce(function(e,t){return e<t?t:e},0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===Lv.BOTTOM_RIGHT||n===Lv.TOP_RIGHT,s=n===Lv.BOTTOM_LEFT||n===Lv.BOTTOM_RIGHT,a=this.measureWidth(e),i=this.measureHeight(),o=r?this.anchor.x-a:this.anchor.x,l=s?this.anchor.y-i:this.anchor.y;if(t){var c=t.width,d=t.height;return{x:Math.max(Math.min(o,c-a),0),y:Math.max(Math.min(l,d-i),0)}}return{x:o,y:l}},e.prototype.draw=function(e){var t=Rv(e),n=Uv(t),r=this.options,s=r.backgroundColor,a=r.fontColor,i=r.fontSize,o=r.fontStyle,l=r.padding;n.font=i+"px "+o;var c=this.measureWidth(n),d=this.measureHeight();n.fillStyle=s;var u=this.getUpperLeft(n,t);n.fillRect(u.x,u.y,c,d),n.fillStyle=a,this.text.forEach(function(e,t){var r=l+u.x,s=l+u.y+(t+1)*i;n.fillText(e,r,s)})},e}(),Qv=function(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,s=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var a={anchorPosition:Lv.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new Ov(Object.assign({},a,s))};!function(){function e(e,t){void 0===t&&(t={}),this.box=new uv(e),this.options=new Qv(t)}e.prototype.draw=function(e){var t=Uv(e),n=this.options,r=n.boxColor,s=n.lineWidth,a=this.box,i=a.x,o=a.y,l=a.width,c=a.height;t.strokeStyle=r,t.lineWidth=s,t.strokeRect(i,o,l,c);var d=this.options.label;d&&new Mv([d],{x:i-s/2,y:o},this.options.drawLabelOptions).draw(e)}}();function Hv(e){var t=Pv.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function zv(e){var t=Pv.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new ev(e.naturalWidth,e.naturalHeight):e instanceof r?new ev(e.videoWidth,e.videoHeight):new ev(e.width,e.height)}function Wv(e){var t=e.width,n=e.height,r=(0,Pv.getEnv().createCanvasElement)();return r.width=t,r.height=n,r}function Vv(e,t){var n=Pv.getEnv().ImageData;if(!(e instanceof n)&&!Hv(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||zv(e),s=r.width,a=r.height,i=Wv({width:s,height:a});return e instanceof n?Uv(i).putImageData(e,0,0):Uv(i).drawImage(e,0,0,s,a),i}function Kv(e,t){return Jx(this,void 0,void 0,function(){var n,r,s,a,i,o;return Zx(this,function(l){switch(l.label){case 0:return n=t||Pv.getEnv().createCanvasElement(),r=e.shape.slice(rv(e)?1:0),s=r[0],a=r[1],i=r[2],o=xl(function(){return e.as3D(s,a,i).toInt()}),[4,Tx.toPixels(o,n)];case 1:return l.sent(),o.dispose(),[2,n]}})})}function Gv(e){var t=Pv.getEnv(),n=t.Image,r=t.Canvas,s=t.Video;return e instanceof n||e instanceof r||e instanceof s}var qv=function(){function e(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach(function(e,t){if(nv(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if(rv(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var s=e instanceof Pv.getEnv().Canvas?e:Vv(e);n._canvases[t]=s,n._inputDimensions[t]=[s.height,s.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this;return ov(this.batchSize,0,1).map(function(t,n){return e.getReshapedInputDimensions(n)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!==typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(e,t){var n=e.width,r=e.height,s=t/Math.max(r,n);return new ev(Math.round(n*s),Math.round(r*s))}({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,xl(function(){var r=ov(n.batchSize,0,1).map(function(r){var s=n.getInput(r);if(s instanceof Xi){var a=rv(s)?s:s.expandDims();return a=function(e,t){return void 0===t&&(t=!1),xl(function(){var n=e.shape.slice(1),r=n[0],s=n[1];if(r===s)return e;var a=Math.abs(r-s),i=Math.round(a*(t?.5:1)),o=r>s?2:1,l=function(t){var n=e.shape.slice();return n[o]=t,ql(n,0)},c=l(i),d=a-c.shape[o],u=[t&&d?l(d):null,e,c].filter(function(e){return!!e}).map(function(e){return e.toFloat()});return Zl(u,o)})}(a,t),a.shape[1]===e&&a.shape[2]===e||(a=Ag.resizeBilinear(a,[e,e])),a.as3D(e,e,3)}if(s instanceof Pv.getEnv().Canvas)return Tx.fromPixels(function(e,t,n){void 0===n&&(n=!1);var r=Pv.getEnv(),s=r.Image,a=r.Canvas;if(!(e instanceof s||e instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var i=zv(e),o=t/Math.max(i.height,i.width),l=o*i.width,c=o*i.height,d=Wv({width:t,height:t}),u=e instanceof a?e:Vv(e),h=Math.abs(l-c)/2,A=n&&l<c?h:0,f=n&&c<l?h:0;return Uv(d).drawImage(u,A,f,l,c),d}(s,e,t));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),s=Oc(r.map(function(e){return e.toFloat()})).as4D(n.batchSize,e,e,3);return s})},e}();function Xv(e){return Jx(this,void 0,void 0,function(){var t,n,r;return Zx(this,function(s){switch(s.label){case 0:if(e instanceof qv)return[2,e];if(!(t=Array.isArray(e)?e:[e]).length)throw new Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(r=t.map(Rv)).forEach(function(e,r){if(!Gv(e)&&!nv(e)&&!rv(e)){if("string"===typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(rv(e)){var s=e.shape[0];if(1!==s)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(e){return Gv(e)&&(t=e,new Promise(function(e,n){if(t instanceof Pv.getEnv().Canvas||Hv(t))return e();function r(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",s),e(t))}function s(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",s),n(e))}t.addEventListener("load",r),t.addEventListener("error",s)}));var t}))];case 1:return s.sent(),[2,new qv(r,Array.isArray(e))]}})})}function Yv(e,t){return Jx(this,void 0,void 0,function(){var n,r,s,a,i,o;return Zx(this,function(l){switch(l.label){case 0:return n=Pv.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,Xv(e)];case 1:if((s=l.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(a=s.getInput(0))instanceof n?(i=a,[3,4]):[3,2];case 2:return[4,Kv(a)];case 3:i=l.sent(),l.label=4;case 4:r=i,l.label=5;case 5:return o=Uv(r),[2,t.map(function(e){return e instanceof fv?e.forSize(r.width,r.height).box.floor():e}).map(function(e){return e.clipAtImageBorders(r.width,r.height)}).map(function(e){var t=e.x,n=e.y,r=e.width,s=e.height,a=Wv({width:r,height:s});return Uv(a).putImageData(o.getImageData(t,n,r,s),0,0),a})]}})})}function Jv(e,t){return Jx(this,void 0,void 0,function(){return Zx(this,function(n){if(!nv(e)&&!rv(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(rv(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,xl(function(){var n=e.shape.slice(rv(e)?1:0),r=n[0],s=n[1],a=n[2],i=t.map(function(e){return e instanceof fv?e.forSize(s,r).box:e}).map(function(e){return e.clipAtImageBorders(s,r)}).map(function(t){var n=t.x,i=t.y,o=t.width,l=t.height;return tm(e.as3D(r,s,a),[i,n,0],[l,o,a])});return i})]})})}function Zv(e,t){return Jx(this,void 0,void 0,function(){var n;return Zx(this,function(r){switch(r.label){case 0:return[4,(0,Pv.getEnv().fetch)(e,t)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}})})}function $v(e){return Jx(this,void 0,void 0,function(){return Zx(this,function(t){switch(t.label){case 0:return[4,Zv(e)];case 1:return[2,t.sent().json()]}})})}function eb(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",s=(e=e.replace(r,"")).split("/").filter(function(e){return e}),a=e.endsWith(".json")?s[s.length-1]:n,i=r+(e.endsWith(".json")?s.slice(0,s.length-1):s).join("/");return{modelBaseUri:i=e.startsWith("/")?"/"+i:i,manifestUri:"/"===i?"/"+a:i+"/"+a}}function tb(e,t){return Jx(this,void 0,void 0,function(){var n,r,s,a;return Zx(this,function(i){switch(i.label){case 0:return n=eb(e,t),r=n.manifestUri,s=n.modelBaseUri,[4,$v(r)];case 1:return a=i.sent(),[2,_x.loadWeights(a,s)]}})})}var nb=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,s=n.objProp;r[s].dispose(),r[s]=t},e.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof to})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof to)})},e.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())})},e.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(t){var n=t.path,r=t.tensor,s=Ol(r.dataSync());r.dispose(),e.reassignParamFromPath(n,s)})},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach(function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var t=e.tensor;return Array.from(t.dataSync())}).reduce(function(e,t){return e.concat(t)}))},e.prototype.load=function(e){return Jx(this,void 0,void 0,function(){return Zx(this,function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}})})},e.prototype.loadFromUri=function(e){return Jx(this,void 0,void 0,function(){var t;return Zx(this,function(n){switch(n.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromUri - expected model uri");return[4,tb(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}})})},e.prototype.loadFromDisk=function(e){return Jx(this,void 0,void 0,function(){var t,n,r,s,a,i,o,l,c,d;return Zx(this,function(u){switch(u.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");return t=Pv.getEnv().readFile,n=eb(e,this.getDefaultModelName()),r=n.manifestUri,s=n.modelBaseUri,a=function(e){return Promise.all(e.map(function(e){return t(e).then(function(e){return e.buffer})}))},i=_x.weightsLoaderFactory(a),c=(l=JSON).parse,[4,t(r)];case 1:return o=c.apply(l,[u.sent().toString()]),[4,i(o,s)];case 2:return d=u.sent(),this.loadFromWeightMap(d),[2]}})})},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce(function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}},{nextObj:this.params}),n=t.obj,r=t.objProp;if(!n||!r||!(n[r]instanceof Xi))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}},e}();function rb(e,t,n){return xl(function(){var r=Dp(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=Mf(r,t.bias)})}function sb(e,t,n){return void 0===n&&(n=!1),xl(function(){var r=xm(n?Mf(kp(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):rb(e,t.conv0,[2,2])),s=rb(r,t.conv1,[1,1]),a=rb(xm(Mf(r,s)),t.conv2,[1,1]);return xm(Mf(r,Mf(s,a)))})}function ab(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),xl(function(){var s=xm(n?Mf(kp(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):rb(e,t.conv0,r?[2,2]:[1,1])),a=rb(s,t.conv1,[1,1]),i=rb(xm(Mf(s,a)),t.conv2,[1,1]),o=rb(xm(Mf(s,Mf(a,i))),t.conv3,[1,1]);return xm(Mf(s,Mf(a,Mf(i,o))))})}function ib(e,t,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),xl(function(){var s=Mf(kp(e,t.filters,[1,1],n),t.bias);return r?xm(s):s})}function ob(e,t){Object.keys(e).forEach(function(n){t.some(function(e){return e.originalPath===n})||e[n].dispose()})}function lb(e,t){return function(n,r,s,a){var i=Vl(e(n*r*s*s),[s,s,n,r]),o=Hl(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:i,bias:o}}}function cb(e,t){return function(n,r,s){var a=zl(e(n*r),[n,r]),i=Hl(e(r));return t.push({paramPath:s+"/weights"},{paramPath:s+"/bias"}),{weights:a,bias:i}}}var db=function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n};function ub(e,t){return function(n,r,s){var a=Vl(e(9*n),[3,3,n,1]),i=Vl(e(n*r),[1,1,n,r]),o=Hl(e(r));return t.push({paramPath:s+"/depthwise_filter"},{paramPath:s+"/pointwise_filter"},{paramPath:s+"/bias"}),new db(a,i,o)}}function hb(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),s=e(t+"/bias",1);return new db(n,r,s)}}function Ab(e,t){return function(n,r,s){var a=e[n];if(!tv(a,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+a);return t.push({originalPath:n,paramPath:s||n}),a}}function fb(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function pb(e,t){var n=lb(e,t),r=ub(e,t);function s(e,t,s,a){return void 0===a&&(a=!1),{conv0:a?n(e,t,3,s+"/conv0"):r(e,t,s+"/conv0"),conv1:r(t,t,s+"/conv1"),conv2:r(t,t,s+"/conv2")}}return{extractDenseBlock3Params:s,extractDenseBlock4Params:function(e,t,n,a){void 0===a&&(a=!1);var i=s(e,t,n,a);return{conv0:i.conv0,conv1:i.conv1,conv2:i.conv2,conv3:r(t,t,n+"/conv3")}}}}function mb(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function gb(e,t){var n=Ab(e,t),r=mb(n),s=hb(n);return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):s(e+"/conv0"),conv1:s(e+"/conv1"),conv2:s(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):s(e+"/conv0"),conv1:s(e+"/conv1"),conv2:s(e+"/conv2"),conv3:s(e+"/conv3")}}}}var xb=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return Xx(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return xl(function(){var n=ab(gv(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Ql(255)),t.dense0,!0);return n=ab(n,t.dense1),n=ab(n,t.dense2),n=ab(n,t.dense3),n=qp(n,[7,7],[2,2],"valid")})},t.prototype.forward=function(e){return Jx(this,void 0,void 0,function(){var t;return Zx(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Xv(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=gb(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return ob(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=fb(e),r=n.extractWeights,s=n.getRemainingWeights,a=pb(r,t).extractDenseBlock4Params,i=a(3,32,"dense0",!0),o=a(32,64,"dense1"),l=a(64,128,"dense2"),c=a(128,256,"dense3");if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{dense0:i,dense1:o,dense2:l,dense3:c}}}(e)},t}(nb);function vb(e,t){return xl(function(){return Mf(Rp(e,t.weights),t.bias)})}function bb(e){var t={},n={};return Object.keys(e).forEach(function(r){(r.startsWith("fc")?n:t)[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var yb=function(e){function t(t,n){var r=e.call(this,t)||this;return r._faceFeatureExtractor=n,r}return Xx(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return xl(function(){var r=e instanceof qv?t.faceFeatureExtractor.forwardInput(e):e;return vb(r.as2D(r.shape[0],-1),n.fc)})},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e,t,n){var r=[],s=fb(e),a=s.extractWeights,i=s.getRemainingWeights,o=cb(a,r)(t,n,"fc");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{fc:o}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=bb(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t,n=[],r=Ab(e,n),s={fc:(t="fc",{weights:r(t+"/weights",2),bias:r(t+"/bias",1)})};return ob(e,n),{params:s,paramMappings:n}}(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,s=e.slice(0,e.length-r),a=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(s),this.extractClassifierParams(a)},t}(nb),wb=["neutral","happy","sad","angry","fearful","disgusted","surprised"],Nb=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);wb.forEach(function(n,r){t[n]=e[r]})}return e.prototype.asSortedArray=function(){var e=this;return wb.map(function(t){return{expression:t,probability:e[t]}}).sort(function(e,t){return t.probability-e.probability})},e}(),jb=function(e){function t(t){return void 0===t&&(t=new xb),e.call(this,"FaceExpressionNet",t)||this}return Xx(t,e),t.prototype.forwardInput=function(e){var t=this;return xl(function(){return od(t.runNet(e))})},t.prototype.forward=function(e){return Jx(this,void 0,void 0,function(){var t;return Zx(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Xv(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.predictExpressions=function(e){return Jx(this,void 0,void 0,function(){var t,n,r,s,a=this;return Zx(this,function(i){switch(i.label){case 0:return[4,Xv(e)];case 1:return t=i.sent(),[4,this.forwardInput(t)];case 2:return n=i.sent(),[4,Promise.all(Hc(n).map(function(e){return Jx(a,void 0,void 0,function(){var t;return Zx(this,function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}})})}))];case 3:return r=i.sent(),n.dispose(),s=r.map(function(e){return new Nb(e)}),[2,t.isBatchInput?s:s[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(yb);function Cb(e,t){var n={expressions:t};return Object.assign({},e,n)}function Bb(e){return function(e){return e.detection instanceof fv}(e)&&e.landmarks instanceof yv&&e.unshiftedLandmarks instanceof yv&&e.alignedRect instanceof fv}function kb(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),s=r.align(),a=e.detection.imageDims,i={landmarks:r,unshiftedLandmarks:t,alignedRect:new fv(e.detection.score,s.rescale(a.reverse()),a)};return Object.assign({},e,i)}function Sb(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach(function(n,r){var s=n.x,a=n.y,i=t[r];e.moveTo(i.x,i.y),e.lineTo(s,a)}),n){var r=t[t.length-1],s=t[0];if(!r||!s)return;e.moveTo(r.x,r.y),e.lineTo(s.x,s.y)}e.stroke()}var _b=function(e){void 0===e&&(e={});var t=e.drawLines,n=void 0===t||t,r=e.drawPoints,s=void 0===r||r,a=e.lineWidth,i=e.lineColor,o=e.pointSize,l=e.pointColor;this.drawLines=n,this.drawPoints=s,this.lineWidth=a||1,this.pointSize=o||2,this.lineColor=i||"rgba(0, 255, 255, 1)",this.pointColor=l||"rgba(255, 0, 255, 1)"};!function(){function e(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new _b(t)}e.prototype.draw=function(e){var t=Uv(e),n=this.options,r=n.drawLines,s=n.drawPoints,a=n.lineWidth,i=n.lineColor,o=n.pointSize,l=n.pointColor;if(r&&this.faceLandmarks instanceof Nv&&(t.strokeStyle=i,t.lineWidth=a,Sb(t,this.faceLandmarks.getJawOutline()),Sb(t,this.faceLandmarks.getLeftEyeBrow()),Sb(t,this.faceLandmarks.getRightEyeBrow()),Sb(t,this.faceLandmarks.getNose()),Sb(t,this.faceLandmarks.getLeftEye(),!0),Sb(t,this.faceLandmarks.getRightEye(),!0),Sb(t,this.faceLandmarks.getMouth(),!0)),s){t.strokeStyle=l,t.fillStyle=l;this.faceLandmarks.positions.forEach(function(e){t.beginPath(),t.arc(e.x,e.y,o,0,2*Math.PI),t.fill()})}}}();function Eb(e,t){var n=[],r=fb(e),s=r.extractWeights,a=r.getRemainingWeights,i=function(e,t){var n=lb(e,t),r=ub(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,s){return{separable_conv0:r(e,t,s+"/separable_conv0"),separable_conv1:r(t,t,s+"/separable_conv1"),expansion_conv:n(e,t,1,s+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(s,n),o=i.extractConvParams,l=i.extractSeparableConvParams,c=i.extractReductionBlockParams,d=i.extractMainBlockParams,u={conv_in:o(3,32,3,"entry_flow/conv_in"),reduction_block_0:c(32,64,"entry_flow/reduction_block_0"),reduction_block_1:c(64,128,"entry_flow/reduction_block_1")},h={};ov(t,0,1).forEach(function(e){h["main_block_"+e]=d(128,"middle_flow/main_block_"+e)});var A={reduction_block:c(128,256,"exit_flow/reduction_block"),separable_conv:l(256,512,"exit_flow/separable_conv")};if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{entry_flow:u,middle_flow:h,exit_flow:A}}}function Fb(e,t){var n=[],r=function(e,t){var n=Ab(e,t),r=mb(n),s=hb(n);return{extractConvParams:r,extractSeparableConvParams:s,extractReductionBlockParams:function(e){return{separable_conv0:s(e+"/separable_conv0"),separable_conv1:s(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:s(e+"/separable_conv0"),separable_conv1:s(e+"/separable_conv1"),separable_conv2:s(e+"/separable_conv2")}}}}(e,n),s=r.extractConvParams,a=r.extractSeparableConvParams,i=r.extractReductionBlockParams,o=r.extractMainBlockParams,l={conv_in:s("entry_flow/conv_in"),reduction_block_0:i("entry_flow/reduction_block_0"),reduction_block_1:i("entry_flow/reduction_block_1")},c={};ov(t,0,1).forEach(function(e){c["main_block_"+e]=o("middle_flow/main_block_"+e)});var d={reduction_block:i("exit_flow/reduction_block"),separable_conv:a("exit_flow/separable_conv")};return ob(e,n),{params:{entry_flow:l,middle_flow:c,exit_flow:d},paramMappings:n}}function Tb(e,t,n){return Mf(kp(e,t.filters,n,"same"),t.bias)}function Ib(e,t,n){void 0===n&&(n=!0);var r=n?xm(e):e;return r=rb(r,t.separable_conv0,[1,1]),r=rb(xm(r),t.separable_conv1,[1,1]),r=Gp(r,[3,3],[2,2],"same"),r=Mf(r,Tb(e,t.expansion_conv,[2,2]))}var Db,Lb=function(e){function t(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return Xx(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return xl(function(){var r=gv(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Ql(256)),s=xm(Tb(r,n.entry_flow.conv_in,[2,2]));return s=Ib(s,n.entry_flow.reduction_block_0,!1),s=Ib(s,n.entry_flow.reduction_block_1),ov(t._numMainBlocks,0,1).forEach(function(e){s=function(e,t){var n=rb(xm(e),t.separable_conv0,[1,1]);return n=rb(xm(n),t.separable_conv1,[1,1]),n=rb(xm(n),t.separable_conv2,[1,1]),Mf(n,e)}(s,n.middle_flow["main_block_"+e])}),s=Ib(s,n.exit_flow.reduction_block),s=xm(rb(s,n.exit_flow.separable_conv,[1,1]))})},t.prototype.forward=function(e){return Jx(this,void 0,void 0,function(){var t;return Zx(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Xv(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Fb(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return Eb(e,this._numMainBlocks)},t}(nb);!function(e){e.FEMALE="female",e.MALE="male"}(Db||(Db={}));var Pb=function(e){function t(t){void 0===t&&(t=new Lb(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return Xx(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return xl(function(){var r=e instanceof qv?t.faceFeatureExtractor.forwardInput(e):e,s=qp(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:vb(s,n.fc.age).as1D(),gender:vb(s,n.fc.gender)}})},t.prototype.forwardInput=function(e){var t=this;return xl(function(){var n=t.runNet(e),r=n.age,s=n.gender;return{age:r,gender:od(s)}})},t.prototype.forward=function(e){return Jx(this,void 0,void 0,function(){var t;return Zx(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Xv(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.predictAgeAndGender=function(e){return Jx(this,void 0,void 0,function(){var t,n,r,s,a,i,o=this;return Zx(this,function(l){switch(l.label){case 0:return[4,Xv(e)];case 1:return t=l.sent(),[4,this.forwardInput(t)];case 2:return n=l.sent(),r=Hc(n.age),s=Hc(n.gender),a=r.map(function(e,t){return{ageTensor:e,genderTensor:s[t]}}),[4,Promise.all(a.map(function(e){var t=e.ageTensor,n=e.genderTensor;return Jx(o,void 0,void 0,function(){var e,r,s,a,i;return Zx(this,function(o){switch(o.label){case 0:return[4,t.data()];case 1:return e=o.sent()[0],[4,n.data()];case 2:return r=o.sent()[0],a=(s=r>.5)?Db.MALE:Db.FEMALE,i=s?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:a,genderProbability:i}]}})})}))];case 3:return i=l.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=fb(e),r=n.extractWeights,s=n.getRemainingWeights,a=cb(r,t),i=a(512,1,"fc/age"),o=a(512,2,"fc/gender");if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{fc:{age:i,gender:o}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=bb(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=Ab(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var s={fc:{age:r("fc/age"),gender:r("fc/gender")}};return ob(e,t),{params:s,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},t}(nb),Rb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.postProcess=function(e,t,n){var r=n.map(function(e){var n=e.width,r=e.height,s=t/Math.max(r,n);return{width:n*s,height:r*s}}),s=r.length;return xl(function(){var n=function(e,t){return Oc([ql([68],e),ql([68],t)],1).as2D(1,136).as1D()},a=function(e,t){var n=r[e],s=n.width,a=n.height;return t(s,a)?Math.abs(s-a)/2:0},i=e.mul(ql([s,136],t)).sub(Oc(Array.from(Array(s),function(e,t){return n(function(e){return a(e,function(e,t){return e<t})}(t),function(e){return a(e,function(e,t){return t<e})}(t))}))).div(Oc(Array.from(Array(s),function(e,t){return n(r[t].width,r[t].height)})));return i})},t.prototype.forwardInput=function(e){var t=this;return xl(function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map(function(e){return{height:e[0],width:e[1]}}))})},t.prototype.forward=function(e){return Jx(this,void 0,void 0,function(){var t;return Zx(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Xv(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.detectLandmarks=function(e){return Jx(this,void 0,void 0,function(){var t,n,r,s=this;return Zx(this,function(a){switch(a.label){case 0:return[4,Xv(e)];case 1:return t=a.sent(),n=xl(function(){return Hc(s.forwardInput(t))}),[4,Promise.all(n.map(function(e,n){return Jx(s,void 0,void 0,function(){var r,s,a,i,o;return Zx(this,function(l){switch(l.label){case 0:return a=(s=Array).from,[4,e.data()];case 1:return r=a.apply(s,[l.sent()]),i=r.filter(function(e,t){return sv(t)}),o=r.filter(function(e,t){return!sv(t)}),[2,new Nv(Array(68).fill(0).map(function(e,t){return new dv(i[t],o[t])}),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}})})}))];case 2:return r=a.sent(),n.forEach(function(e){return e.dispose()}),[2,t.isBatchInput?r:r[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(yb),Ub=function(e){function t(t){return void 0===t&&(t=new xb),e.call(this,"FaceLandmark68Net",t)||this}return Xx(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(Rb);var Ob=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return Xx(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return xl(function(){var n=sb(gv(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Ql(255)),t.dense0,!0);return n=sb(n,t.dense1),n=sb(n,t.dense2),n=qp(n,[14,14],[2,2],"valid")})},t.prototype.forward=function(e){return Jx(this,void 0,void 0,function(){var t;return Zx(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Xv(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=gb(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return ob(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=fb(e),r=n.extractWeights,s=n.getRemainingWeights,a=pb(r,t).extractDenseBlock3Params,i=a(3,32,"dense0",!0),o=a(32,64,"dense1"),l=a(64,128,"dense2");if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{dense0:i,dense1:o,dense2:l}}}(e)},t}(nb),Mb=function(e){function t(t){return void 0===t&&(t=new Ob),e.call(this,"FaceLandmark68TinyNet",t)||this}return Xx(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(Rb);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Xx(t,e)}(Ub);function Qb(e,t,n,r,s){void 0===s&&(s="same");var a=t.conv,i=a.filters,o=a.bias,l=kp(e,i,n,s);return l=function(e,t){return Mf(ep(e,t.weights),t.biases)}(l=Mf(l,o),t.scale),r?xm(l):l}function Hb(e,t){return Qb(e,t,[1,1],!1)}function zb(e,t){return Qb(e,t,[2,2],!0,"valid")}function Wb(e,t){function n(n,r,s,a){var i=function(t,n,r){var s=e(t),a=s.length/(n*r*r);if(a%1!==0)throw new Error("depth has to be an integer: "+a+", weights.length: "+s.length+", numFilters: "+n+", filterSize: "+r);return xl(function(){return ym(Vl(s,[n,a,r,r]),[2,3,1,0])})}(n,r,s),o=Hl(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:i,bias:o}}function r(r,s,a,i){var o=n(r,s,a,i+"/conv"),l=function(n,r){var s=Hl(e(n)),a=Hl(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:s,biases:a}}(s,i+"/scale");return{conv:o,scale:l}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,s,a){return void 0===a&&(a=!1),{conv1:r((a?.5:1)*e,t,n,s+"/conv1"),conv2:r(e,t,n,s+"/conv2")}}}}function Vb(e,t){var n=Ab(e,t);function r(e){var t=n(e+"/conv/filters",4),r=n(e+"/conv/bias",1),s=function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e);return{conv:{filters:t,bias:r},scale:s}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}function Kb(e){var t=[],n=Vb(e,t),r=n.extractConvLayerParams,s=n.extractResidualLayerParams,a=r("conv32_down"),i=s("conv32_1"),o=s("conv32_2"),l=s("conv32_3"),c=s("conv64_down"),d=s("conv64_1"),u=s("conv64_2"),h=s("conv64_3"),A=s("conv128_down"),f=s("conv128_1"),p=s("conv128_2"),m=s("conv256_down"),g=s("conv256_1"),x=s("conv256_2"),v=s("conv256_down_out"),b=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!tv(b,2))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+b);var y={conv32_down:a,conv32_1:i,conv32_2:o,conv32_3:l,conv64_down:c,conv64_1:d,conv64_2:u,conv64_3:h,conv128_down:A,conv128_1:f,conv128_2:p,conv256_down:m,conv256_1:g,conv256_2:x,conv256_down_out:v,fc:b};return ob(e,t),{params:y,paramMappings:t}}function Gb(e,t){var n=function(e,t){return Qb(e,t,[1,1],!0)}(e,t.conv1);return n=Hb(n,t.conv2),n=Mf(n,e),n=xm(n)}function qb(e,t){var n=zb(e,t.conv1);n=Hb(n,t.conv2);var r=qp(e,2,2,"valid"),s=Gl(r.shape),a=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var i=$x(n.shape);i[1]=1;var o=Gl(i),l=$x((n=Zl([n,o],1)).shape);l[2]=1;var c=Gl(l);n=Zl([n,c],2)}return r=a?Zl([r,s],3):r,n=Mf(r,n),n=xm(n)}var Xb=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return Xx(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return xl(function(){var n=zb(gv(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(Ql(256)),t.conv32_down);n=Gb(n=Gp(n,3,2,"valid"),t.conv32_1),n=Gb(n,t.conv32_2),n=Gb(n,t.conv32_3),n=Gb(n=qb(n,t.conv64_down),t.conv64_1),n=Gb(n,t.conv64_2),n=Gb(n,t.conv64_3),n=Gb(n=qb(n,t.conv128_down),t.conv128_1),n=Gb(n,t.conv128_2),n=Gb(n=qb(n,t.conv256_down),t.conv256_1);var r=(n=qb(n=Gb(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return Rp(r,t.fc)})},t.prototype.forward=function(e){return Jx(this,void 0,void 0,function(){var t;return Zx(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Xv(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.computeFaceDescriptor=function(e){return Jx(this,void 0,void 0,function(){var t,n,r,s=this;return Zx(this,function(a){switch(a.label){case 0:return[4,Xv(e)];case 1:return t=a.sent(),n=xl(function(){return Hc(s.forwardInput(t))}),[4,Promise.all(n.map(function(e){return e.data()}))];case 2:return r=a.sent(),n.forEach(function(e){return e.dispose()}),[2,t.isBatchInput?r:r[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Kb(e)},t.prototype.extractParams=function(e){return function(e){var t=fb(e),n=t.extractWeights,r=t.getRemainingWeights,s=[],a=Wb(n,s),i=a.extractConvLayerParams,o=a.extractResidualLayerParams,l=i(4704,32,7,"conv32_down"),c=o(9216,32,3,"conv32_1"),d=o(9216,32,3,"conv32_2"),u=o(9216,32,3,"conv32_3"),h=o(36864,64,3,"conv64_down",!0),A=o(36864,64,3,"conv64_1"),f=o(36864,64,3,"conv64_2"),p=o(36864,64,3,"conv64_3"),m=o(147456,128,3,"conv128_down",!0),g=o(147456,128,3,"conv128_1"),x=o(147456,128,3,"conv128_2"),v=o(589824,256,3,"conv256_down",!0),b=o(589824,256,3,"conv256_1"),y=o(589824,256,3,"conv256_2"),w=o(589824,256,3,"conv256_down_out"),N=xl(function(){return ym(zl(n(32768),[128,256]),[1,0])});if(s.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:l,conv32_1:c,conv32_2:d,conv32_3:u,conv64_down:h,conv64_1:A,conv64_2:f,conv64_3:p,conv128_down:m,conv128_1:g,conv128_2:x,conv256_down:v,conv256_1:b,conv256_2:y,conv256_down_out:w,fc:N},paramMappings:s}}(e)},t}(nb);function Yb(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var Jb=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,s=t.maxNumScales,a=t.scoreThresholds,i=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=s||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=i,"number"!==typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!==typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!==typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some(function(e){return"number"!==typeof e}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(e){return"number"!==typeof e})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function Zb(e,t){function n(n,r,s,a,i){var o=Vl(e(n*r*s*s),[s,s,n,r]),l=Hl(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/"+(i?"batch_norm_offset":"bias")}),{filters:o,bias:l}}function r(e,t,r,s){var a=n(e,t,r,s,!0);return{filters:a.filters,batch_norm_offset:a.bias}}function s(n,s,a){var i=function(n,r){var s=Vl(e(9*n),[3,3,n,1]),a=Hl(e(n)),i=Hl(e(n)),o=Hl(e(n)),l=Hl(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:s,batch_norm_scale:a,batch_norm_offset:i,batch_norm_mean:o,batch_norm_variance:l}}(n,a+"/depthwise_conv");return{depthwise_conv:i,pointwise_conv:r(n,s,1,a+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:s(32,64,"mobilenetv1/conv_1"),conv_2:s(64,128,"mobilenetv1/conv_2"),conv_3:s(128,128,"mobilenetv1/conv_3"),conv_4:s(128,256,"mobilenetv1/conv_4"),conv_5:s(256,256,"mobilenetv1/conv_5"),conv_6:s(256,512,"mobilenetv1/conv_6"),conv_7:s(512,512,"mobilenetv1/conv_7"),conv_8:s(512,512,"mobilenetv1/conv_8"),conv_9:s(512,512,"mobilenetv1/conv_9"),conv_10:s(512,512,"mobilenetv1/conv_10"),conv_11:s(512,512,"mobilenetv1/conv_11"),conv_12:s(512,1024,"mobilenetv1/conv_12"),conv_13:s(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function $b(e){var t=[],n=function(e,t){var n=Ab(e,t);function r(e,t,r){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function s(e){var t="mobilenetv1/conv_"+e,s="MobilenetV1/Conv2d_"+e+"_depthwise",a=t+"/depthwise_conv",i=t+"/pointwise_conv";return{depthwise_conv:{filters:n(s+"/depthwise_weights",4,a+"/filters"),batch_norm_scale:n(s+"/BatchNorm/gamma",1,a+"/batch_norm_scale"),batch_norm_offset:n(s+"/BatchNorm/beta",1,a+"/batch_norm_offset"),batch_norm_mean:n(s+"/BatchNorm/moving_mean",1,a+"/batch_norm_mean"),batch_norm_variance:n(s+"/BatchNorm/moving_variance",1,a+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,i)}}function a(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function i(e){return{box_encoding_predictor:a("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:a("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:s(1),conv_2:s(2),conv_3:s(3),conv_4:s(4),conv_5:s(5),conv_6:s(6),conv_7:s(7),conv_8:s(8),conv_9:s(9),conv_10:s(10),conv_11:s(11),conv_12:s(12),conv_13:s(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:i(0),box_predictor_1:i(1),box_predictor_2:i(2),box_predictor_3:i(3),box_predictor_4:i(4),box_predictor_5:i(5)}}}}(e,t),r=n.extractMobilenetV1Params,s=n.extractPredictionLayerParams,a=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!nv(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var i={mobilenetv1:r(),prediction_layer:s(),output_layer:{extra_dim:a}};return ob(e,t),{params:i,paramMappings:t}}function ey(e,t,n){return xl(function(){var r=kp(e,t.filters,n,"same");return r=Mf(r,t.batch_norm_offset),GA(r,0,6)})}function ty(e,t){return xl(function(){var n=null,r=ey(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach(function(e,t){var s=t+1,a=function(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}(s);r=function(e,t,n){return xl(function(){var r=Fp(e,t.filters,n,"same");return r=Ef(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),GA(r,0,6)})}(r,e.depthwise_conv,a),r=ey(r,e.pointwise_conv,[1,1]),11===s&&(n=r)}),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function ny(e,t,n){var r=e.arraySync(),s=Math.min(r[t][0],r[t][2]),a=Math.min(r[t][1],r[t][3]),i=Math.max(r[t][0],r[t][2]),o=Math.max(r[t][1],r[t][3]),l=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),d=Math.max(r[n][0],r[n][2]),u=Math.max(r[n][1],r[n][3]),h=(i-s)*(o-a),A=(d-l)*(u-c);if(h<=0||A<=0)return 0;var f=Math.max(s,l),p=Math.max(a,c),m=Math.min(i,d),g=Math.min(o,u),x=Math.max(m-f,0)*Math.max(g-p,0);return x/(h+A-x)}function ry(e,t){var n=function(e){var t=Hc(ym(e,[1,0])),n=[ap(t[2],t[0]),ap(t[3],t[1])];return{sizes:n,centers:[Mf(t[0],Wf(n[0],Ql(2))),Mf(t[1],Wf(n[1],Ql(2)))]}}(e),r=n.sizes,s=n.centers,a=Hc(ym(t,[1,0])),i=Wf(ep(JA(Wf(a[2],Ql(5))),r[0]),Ql(2)),o=Mf(ep(Wf(a[0],Ql(10)),r[0]),s[0]),l=Wf(ep(JA(Wf(a[3],Ql(5))),r[1]),Ql(2)),c=Mf(ep(Wf(a[1],Ql(10)),r[1]),s[1]);return ym(Oc([ap(o,i),ap(c,l),Mf(o,i),Mf(c,l)]),[1,0])}function sy(e,t){return xl(function(){var n=e.shape[0];return{boxPredictionEncoding:Pc(ib(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:Pc(ib(e,t.class_predictor),[n,-1,3])}})}var ay=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!==typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!==typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),iy=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return Xx(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return xl(function(){var n=e.toBatchTensor(512,!1).toFloat(),r=ty(ap(ep(n,Ql(.007843137718737125)),Ql(1)),t.mobilenetv1),s=function(e,t,n){return xl(function(){var r=ey(e,n.conv_0,[1,1]),s=ey(r,n.conv_1,[2,2]),a=ey(s,n.conv_2,[1,1]),i=ey(a,n.conv_3,[2,2]),o=ey(i,n.conv_4,[1,1]),l=ey(o,n.conv_5,[2,2]),c=ey(l,n.conv_6,[1,1]),d=ey(c,n.conv_7,[2,2]),u=sy(t,n.box_predictor_0),h=sy(e,n.box_predictor_1),A=sy(s,n.box_predictor_2),f=sy(i,n.box_predictor_3),p=sy(l,n.box_predictor_4),m=sy(d,n.box_predictor_5);return{boxPredictions:Zl([u.boxPredictionEncoding,h.boxPredictionEncoding,A.boxPredictionEncoding,f.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding],1),classPredictions:Zl([u.classPrediction,h.classPrediction,A.classPrediction,f.classPrediction,p.classPrediction,m.classPrediction],1)}})}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return xl(function(){var r=e.shape[0],s=ry(Pc(Mc(n.extra_dim,[r,1,1]),[-1,4]),Pc(e,[-1,4]));s=Pc(s,[r,s.shape[0]/r,4]);var a=lf(Zp(t,[0,0,1],[-1,-1,-1])),i=Zp(a,[0,0,0],[-1,-1,1]);return i=Pc(i,[r,i.shape[1]]),{boxes:Hc(s),scores:Hc(i)}})}(s.boxPredictions,s.classPredictions,t.output_layer)})},t.prototype.forward=function(e){return Jx(this,void 0,void 0,function(){var t;return Zx(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Xv(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),Jx(this,void 0,void 0,function(){var n,r,s,a,i,o,l,c,d,u,h,A,f,p,m,g,x,v,b,y;return Zx(this,function(w){switch(w.label){case 0:return n=new ay(t),r=n.maxResults,s=n.minConfidence,[4,Xv(e)];case 1:for(a=w.sent(),i=this.forwardInput(a),o=i.boxes,l=i.scores,c=o[0],d=l[0],u=1;u<o.length;u++)o[u].dispose(),l[u].dispose();return f=(A=Array).from,[4,d.data()];case 2:return h=f.apply(A,[w.sent()]),p=function(e,t,n,r,s){var a=e.shape[0],i=Math.min(n,a),o=t.map(function(e,t){return{score:e,boxIndex:t}}).filter(function(e){return e.score>s}).sort(function(e,t){return t.score-e.score}),l=function(e){return e<=r?1:0},c=[];return o.forEach(function(t){if(!(c.length>=i)){for(var n=t.score,r=c.length-1;r>=0;--r){var a=ny(e,t.boxIndex,c[r]);if(0!==a&&(t.score*=l(a),t.score<=s))break}n===t.score&&c.push(t.boxIndex)}}),c}(c,h,r,.5,s),m=a.getReshapedInputDimensions(0),g=a.inputSize,x=g/m.width,v=g/m.height,b=c.arraySync(),y=p.map(function(e){var t=[Math.max(0,b[e][0]),Math.min(1,b[e][2])].map(function(e){return e*v}),n=t[0],r=t[1],s=[Math.max(0,b[e][1]),Math.min(1,b[e][3])].map(function(e){return e*x}),i=s[0],o=s[1];return new fv(h[e],new bv(i,n,o-i,r-n),{height:a.getInputHeight(0),width:a.getInputWidth(0)})}),c.dispose(),d.dispose(),[2,y]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return $b(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=fb(e),r=n.extractWeights,s=n.getRemainingWeights,a=Zb(r,t),i=a.extractMobilenetV1Params,o=a.extractPredictionLayerParams,l=i(),c=o(),d={extra_dim:Wl(r(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:{mobilenetv1:l,prediction_layer:c,output_layer:d},paramMappings:t}}(e)},t}(nb);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Xx(t,e)}(iy);var oy,ly=[new dv(.738768,.874946),new dv(2.42204,2.65704),new dv(4.30971,7.04493),new dv(10.246,4.59428),new dv(12.6868,11.8741)],cy=[new dv(1.603231,2.094468),new dv(6.041143,7.080126),new dv(2.882459,3.518061),new dv(4.266906,5.178857),new dv(9.041765,10.66308)],dy=[117.001,114.697,97.404],uy=function(e){return"number"===typeof e};function hy(e){return xl(function(){var t=ep(e,Ql(.10000000149011612));return Mf(xm(ap(e,t)),t)})}function Ay(e,t){return xl(function(){var n=kc(e,[[0,0],[1,1],[1,1],[0,0]]);return n=kp(n,t.conv.filters,[1,1],"valid"),n=ap(n,t.bn.sub),n=ep(n,t.bn.truediv),hy(n=Mf(n,t.conv.bias))})}function fy(e,t){return xl(function(){var n=kc(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Dp(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),hy(n=Mf(n,t.bias))})}function py(e,t){var n=lb(e,t);var r=ub(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,s,a){var i=n(r,s,3,a+"/conv"),o=function(n,r){var s=Hl(e(n)),a=Hl(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:s,truediv:a}}(s,a+"/bn");return{conv:i,bn:o}},extractSeparableConvParams:r}}function my(e,t){var n=Ab(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){var t=r(e+"/conv"),s=function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn");return{conv:t,bn:s}},extractSeparableConvParams:hb(n)}}!function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(oy||(oy={}));var gy=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!==typeof this._inputSize||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!==typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),xy=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this;return function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!==typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!uy(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(e){return"string"===typeof e}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(e){return e||{}}).every(function(e){return uy(e.x)&&uy(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(uy)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(t),n._config=t,n}return Xx(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=Ay(e,t.conv0);return n=Ay(n=Gp(n,[2,2],[2,2],"same"),t.conv1),n=Ay(n=Gp(n,[2,2],[2,2],"same"),t.conv2),n=Ay(n=Gp(n,[2,2],[2,2],"same"),t.conv3),n=Ay(n=Gp(n,[2,2],[2,2],"same"),t.conv4),n=Ay(n=Gp(n,[2,2],[2,2],"same"),t.conv5),n=Ay(n=Gp(n,[2,2],[1,1],"same"),t.conv6),ib(n=Ay(n,t.conv7),t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?hy(ib(e,t.conv0,"valid",!1)):fy(e,t.conv0);return n=fy(n=Gp(n,[2,2],[2,2],"same"),t.conv1),n=fy(n=Gp(n,[2,2],[2,2],"same"),t.conv2),n=fy(n=Gp(n,[2,2],[2,2],"same"),t.conv3),n=fy(n=Gp(n,[2,2],[2,2],"same"),t.conv4),n=fy(n=Gp(n,[2,2],[2,2],"same"),t.conv5),n=Gp(n,[2,2],[1,1],"same"),n=t.conv6?fy(n,t.conv6):n,ib(n=t.conv7?fy(n,t.conv7):n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return xl(function(){var s=e.toBatchTensor(t,!1).toFloat();return s=(s=n.config.meanRgb?gv(s,n.config.meanRgb):s).div(Ql(256)),n.config.withSeparableConvs?n.runMobilenet(s,r):n.runTinyYolov2(s,r)})},t.prototype.forward=function(e,t){return Jx(this,void 0,void 0,function(){var n;return Zx(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Xv(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent()]}})})},t.prototype.detect=function(e,t){return void 0===t&&(t={}),Jx(this,void 0,void 0,function(){var n,r,s,a,i,o,l,c,d,u,h,A,f,p=this;return Zx(this,function(m){switch(m.label){case 0:return n=new gy(t),r=n.inputSize,s=n.scoreThreshold,[4,Xv(e)];case 1:return a=m.sent(),[4,this.forwardInput(a,r)];case 2:return i=m.sent(),o=xl(function(){return Hc(i)[0].expandDims()}),l={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(o,a.getReshapedInputDimensions(0),s)];case 3:return c=m.sent(),i.dispose(),o.dispose(),d=c.map(function(e){return e.box}),u=c.map(function(e){return e.score}),h=c.map(function(e){return e.classScore}),A=c.map(function(e){return p.config.classes[e.label]}),f=mv(d.map(function(e){return e.rescale(r)}),u,this.config.iouThreshold,!0),[2,f.map(function(e){return new Av(u[e],h[e],A[e],d[e],l)})]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,r=[],s=my(e,r),a=s.extractConvParams,i=s.extractConvWithBatchNormParams,o=s.extractSeparableConvParams;if(t.withSeparableConvs){var l=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?a("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:l>7?o("conv6"):void 0,conv7:l>8?o("conv7"):void 0,conv8:a("conv8")}}else n={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:a("conv8")};return ob(e,r),{params:n,paramMappings:r}}(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(e,t,n,r){var s,a=fb(e),i=a.extractWeights,o=a.getRemainingWeights,l=[],c=py(i,l),d=c.extractConvParams,u=c.extractConvWithBatchNormParams,h=c.extractSeparableConvParams;if(t.withSeparableConvs){var A=r[0],f=r[1],p=r[2],m=r[3],g=r[4],x=r[5],v=r[6],b=r[7],y=r[8];s={conv0:t.isFirstLayerConv2d?d(A,f,3,"conv0"):h(A,f,"conv0"),conv1:h(f,p,"conv1"),conv2:h(p,m,"conv2"),conv3:h(m,g,"conv3"),conv4:h(g,x,"conv4"),conv5:h(x,v,"conv5"),conv6:b?h(v,b,"conv6"):void 0,conv7:y?h(b,y,"conv7"):void 0,conv8:d(y||b||v,5*n,1,"conv8")}}else A=r[0],f=r[1],p=r[2],m=r[3],g=r[4],x=r[5],v=r[6],b=r[7],y=r[8],s={conv0:u(A,f,"conv0"),conv1:u(f,p,"conv1"),conv2:u(p,m,"conv2"),conv3:u(m,g,"conv3"),conv4:u(g,x,"conv4"),conv5:u(x,v,"conv5"),conv6:u(v,b,"conv6"),conv7:u(b,y,"conv7"),conv8:d(y,5*n,1,"conv8")};if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{params:s,paramMappings:l}}(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return Jx(this,void 0,void 0,function(){var r,s,a,i,o,l,c,d,u,h,A,f,p,m,g,x,v,b,y,w,N,j,C,B,k,S,_,E,F,T=this;return Zx(this,function(I){switch(I.label){case 0:return r=t.width,s=t.height,a=Math.max(r,s),i=a/r,o=a/s,l=e.shape[1],c=this.config.anchors.length,d=xl(function(){var t=e.reshape([l,l,c,T.boxEncodingSize]);return[t.slice([0,0,0,0],[l,l,c,4]),t.slice([0,0,0,4],[l,l,c,1]),T.withClassScores?od(t.slice([0,0,0,5],[l,l,c,T.config.classes.length]),3):Ql(0)]}),u=d[0],h=d[1],A=d[2],f=[],[4,h.array()];case 1:return p=I.sent(),[4,u.array()];case 2:m=I.sent(),g=0,I.label=3;case 3:if(!(g<l))return[3,12];x=0,I.label=4;case 4:if(!(x<l))return[3,11];v=0,I.label=5;case 5:return v<c?(b=xv(p[g][x][v][0]),!n||b>n?(y=(x+xv(m[g][x][v][0]))/l*i,w=(g+xv(m[g][x][v][1]))/l*o,N=Math.exp(m[g][x][v][2])*this.config.anchors[v].x/l*i,j=Math.exp(m[g][x][v][3])*this.config.anchors[v].y/l*o,C=y-N/2,B=w-j/2,k={row:g,col:x,anchor:v},this.withClassScores?[4,this.extractPredictedClass(A,k)]:[3,7]):[3,9]):[3,10];case 6:return F=I.sent(),[3,8];case 7:F={classScore:1,label:0},I.label=8;case 8:_=(S=F).classScore,E=S.label,f.push(Yx({box:new hv(C,B,C+N,B+j),score:b,classScore:b*_,label:E},k)),I.label=9;case 9:return v++,[3,5];case 10:return x++,[3,4];case 11:return g++,[3,3];case 12:return u.dispose(),h.dispose(),A.dispose(),[2,f]}})})},t.prototype.extractPredictedClass=function(e,t){return Jx(this,void 0,void 0,function(){var n,r,s,a;return Zx(this,function(i){switch(i.label){case 0:return n=t.row,r=t.col,s=t.anchor,[4,e.array()];case 1:return a=i.sent(),[2,Array(this.config.classes.length).fill(0).map(function(e,t){return a[n][r][s][t]}).map(function(e,t){return{classScore:e,label:t}}).reduce(function(e,t){return e.classScore>t.classScore?e:t})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(nb),vy=function(e){function t(t){void 0===t&&(t=!0);var n=Object.assign({},{withSeparableConvs:t,iouThreshold:.4,classes:["face"]},t?{anchors:cy,meanRgb:dy}:{anchors:ly,withClassScores:!0});return e.call(this,n)||this}return Xx(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Jx(this,void 0,void 0,function(){return Zx(this,function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map(function(e){return new fv(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(xy);var by=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return Xx(t,e),t}(gy),yy=function(){function e(){}return e.prototype.then=function(e){return Jx(this,void 0,void 0,function(){var t;return Zx(this,function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}})})},e.prototype.run=function(){return Jx(this,void 0,void 0,function(){return Zx(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},e}();function wy(e,t){var n={descriptor:t};return Object.assign({},e,n)}function Ny(e,t,n,r,s){return void 0===s&&(s=function(e){return e.alignedRect}),Jx(this,void 0,void 0,function(){var a,i,o,l,c;return Zx(this,function(d){switch(d.label){case 0:return a=e.map(function(e){return Bb(e)?s(e):e.detection}),(o=r)?[3,5]:t instanceof Xi?[4,Jv(t,a)]:[3,2];case 1:return l=d.sent(),[3,4];case 2:return[4,Yv(t,a)];case 3:l=d.sent(),d.label=4;case 4:o=l,d.label=5;case 5:return[4,n(i=o)];case 6:return c=d.sent(),i.forEach(function(e){return e instanceof Xi&&e.dispose()}),[2,c]}})})}function jy(e,t,n,r,s){return Jx(this,void 0,void 0,function(){var a=this;return Zx(this,function(i){return[2,Ny([e],t,function(e){return Jx(a,void 0,void 0,function(){return Zx(this,function(t){return[2,n(e[0])]})})},r,s)]})})}function Cy(e){var t=fb(e),n=t.extractWeights,r=t.getRemainingWeights,s=[],a=function(e,t){var n=lb(e,t),r=cb(e,t);function s(n,r){var s=Hl(e(n));return t.push({paramPath:r}),s}function a(e,t,r){return void 0===r&&(r=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:s(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:s(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:s(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=a([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return Yx(Yx({},e),{conv4_1:t,conv4_2:r})},extractRNetParams:function(){var e=a([3,28,48,64],"rnet",!0),t=r(576,128,"rnet/fc1"),n=s(128,"rnet/prelu4_alpha"),i=r(128,2,"rnet/fc2_1"),o=r(128,4,"rnet/fc2_2");return Yx(Yx({},e),{fc1:t,prelu4_alpha:n,fc2_1:i,fc2_2:o})},extractONetParams:function(){var e=a([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),i=s(128,"onet/prelu4_alpha"),o=r(1152,256,"onet/fc1"),l=s(256,"onet/prelu5_alpha"),c=r(256,2,"onet/fc2_1"),d=r(256,4,"onet/fc2_2"),u=r(256,10,"onet/fc2_3");return Yx(Yx({},e),{conv4:t,prelu4_alpha:i,fc1:o,prelu5_alpha:l,fc2_1:c,fc2_2:d,fc2_3:u})}}}(n,s),i=a.extractPNetParams,o=a.extractRNetParams,l=a.extractONetParams,c=i(),d=o(),u=l();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:c,rnet:d,onet:u},paramMappings:s}}function By(e){var t=[],n=function(e,t){var n=Ab(e,t);function r(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function s(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function a(e){return n(e,1)}function i(e){return{conv1:r(e+"/conv1"),prelu1_alpha:a(e+"/prelu1_alpha"),conv2:r(e+"/conv2"),prelu2_alpha:a(e+"/prelu2_alpha"),conv3:r(e+"/conv3"),prelu3_alpha:a(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=i("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2");return Yx(Yx({},e),{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=i("rnet"),t=s("rnet/fc1"),n=a("rnet/prelu4_alpha"),r=s("rnet/fc2_1"),o=s("rnet/fc2_2");return Yx(Yx({},e),{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:o})},extractONetParams:function(){var e=i("onet"),t=r("onet/conv4"),n=a("onet/prelu4_alpha"),o=s("onet/fc1"),l=a("onet/prelu5_alpha"),c=s("onet/fc2_1"),d=s("onet/fc2_2"),u=s("onet/fc2_3");return Yx(Yx({},e),{conv4:t,prelu4_alpha:n,fc1:o,prelu5_alpha:l,fc2_1:c,fc2_2:d,fc2_3:u})}}}(e,t),r=n.extractPNetParams,s=n.extractRNetParams,a=n.extractONetParams,i=r(),o=s(),l=a();return ob(e,t),{params:{pnet:i,rnet:o,onet:l},paramMappings:t}}function ky(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}var Sy=function(e){function t(t,n,r,s){return e.call(this,{left:t,top:n,right:r,bottom:s},!0)||this}return Xx(t,e),t}(uv);function _y(e){return xl(function(){return ep(ap(e,Ql(127.5)),Ql(.0078125))})}function Ey(e,t){return xl(function(){return Mf(xm(e),ep(t,rf(xm(rf(e)))))})}function Fy(e,t,n){return void 0===n&&(n=!1),xl(function(){var r=ib(e,t.conv1,"valid");return r=Ey(r,t.prelu1_alpha),r=Ey(r=ib(r=Gp(r,n?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),r=Ey(r=ib(r=n?r:Gp(r,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)})}function Ty(e,t,n,r,s){s.stage1=[];var a=t.map(function(t){return xl(function(){var n={scale:t},s=function(e,t){return xl(function(){var n=ky(t,e.shape.slice(1)),r=n.height,s=n.width,a=_y(Ag.resizeBilinear(e,[r,s]));return ym(a,[0,2,1,3])})}(e,t),a=Date.now(),i=function(e,t){return xl(function(){var n=Fy(e,t,!0),r=ib(n,t.conv4_1,"valid"),s=Nc(cm(r,3),3);return{prob:od(ap(r,s),3),regions:ib(n,t.conv4_2,"valid")}})}(s,r),o=i.prob,l=i.regions;return n.pnet=Date.now()-a,{scoresTensor:Hc(Hc(o,3)[1])[0],regionsTensor:Hc(l)[0],scale:t,statsForScale:n}})}),i=a.map(function(e){var t=e.scoresTensor,r=e.regionsTensor,a=e.scale,i=e.statsForScale,o=function(e,t,n,r){for(var s=[],a=e.arraySync(),i=0;i<e.shape[0];i++)for(var o=0;o<e.shape[1];o++)a[i][o]>=r&&s.push(new dv(o,i));return s.map(function(e){var r=new hv(Math.round((2*e.y+1)/n),Math.round((2*e.x+1)/n),Math.round((2*e.y+12)/n),Math.round((2*e.x+12)/n)),s=a[e.y][e.x],i=t.arraySync();return{cell:r,score:s,region:new Sy(i[e.y][e.x][0],i[e.y][e.x][1],i[e.y][e.x][2],i[e.y][e.x][3])}})}(t,r,a,n);if(t.dispose(),r.dispose(),!o.length)return s.stage1.push(i),[];var l=Date.now(),c=mv(o.map(function(e){return e.cell}),o.map(function(e){return e.score}),.5);return i.nms=Date.now()-l,i.numBoxes=c.length,s.stage1.push(i),c.map(function(e){return o[e]})}),o=i.reduce(function(e,t){return e.concat(t)},[]),l=[],c=[];if(o.length>0){var d=Date.now(),u=mv(o.map(function(e){return e.cell}),o.map(function(e){return e.score}),.7);s.stage1_nms=Date.now()-d,c=u.map(function(e){return o[e].score}),l=u.map(function(e){return o[e]}).map(function(e){var t=e.cell,n=e.region;return new hv(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()})}return{boxes:l,scores:c}}function Iy(e,t,n){var r=n.width,s=n.height;return Jx(this,void 0,void 0,function(){var n,a,i,o=this;return Zx(this,function(l){switch(l.label){case 0:return n=Uv(e),[4,Promise.all(t.map(function(t){return Jx(o,void 0,void 0,function(){var r,s,a,i,o,l,c,d;return Zx(this,function(u){return r=t.padAtBorders(e.height,e.width),s=r.y,a=r.ey,i=r.x,o=r.ex,l=i-1,c=s-1,d=n.getImageData(l,c,o-l,a-c),[2,Pv.isNodejs()?Vv(d):createImageBitmap(d)]})})}))];case 1:return a=l.sent(),i=[],a.forEach(function(e){var t=Uv(Wv({width:r,height:s}));t.drawImage(e,0,0,r,s);for(var n=t.getImageData(0,0,r,s).data,a=[],o=0;o<n.length;o+=4)a.push(n[o+2]),a.push(n[o+1]),a.push(n[o]);i.push(a)}),[2,i.map(function(e){return xl(function(){return _y(ym(Vl(e,[1,r,s,3]),[0,2,1,3]).toFloat())})})]}})})}function Dy(e,t,n,r,s){return Jx(this,void 0,void 0,function(){var a,i,o,l,c,d,u,h,A,f,p,m,g,x;return Zx(this,function(v){switch(v.label){case 0:return a=Date.now(),[4,Iy(e,t,{width:24,height:24})];case 1:return i=v.sent(),s.stage2_extractImagePatches=Date.now()-a,a=Date.now(),o=i.map(function(e){var t=function(e,t){return xl(function(){var n=Fy(e,t),r=Ey(vb(Pc(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),s=vb(r,t.fc2_1),a=Nc(cm(s,1),1),i=od(ap(s,a),1),o=vb(r,t.fc2_2);return{scores:Hc(i,1)[1],regions:o}})}(e,r);return e.dispose(),t}),s.stage2_rnet=Date.now()-a,l=o.length>1?Zl(o.map(function(e){return e.scores})):o[0].scores,u=(d=Array).from,[4,l.data()];case 2:return c=u.apply(d,[v.sent()]),l.dispose(),h=c.map(function(e,t){return{score:e,idx:t}}).filter(function(e){return e.score>n}).map(function(e){return e.idx}),A=h.map(function(e){return t[e]}),f=h.map(function(e){return c[e]}),p=[],m=[],A.length>0&&(a=Date.now(),g=mv(A,f,.7),s.stage2_nms=Date.now()-a,x=g.map(function(e){var t=o[h[e]].regions.arraySync();return new Sy(t[0][0],t[0][1],t[0][2],t[0][3])}),m=g.map(function(e){return f[e]}),p=g.map(function(e,t){return A[e].calibrate(x[t])})),o.forEach(function(e){e.regions.dispose(),e.scores.dispose()}),[2,{boxes:p,scores:m}]}})})}function Ly(e,t,n,r,s){return Jx(this,void 0,void 0,function(){var a,i,o,l,c,d,u,h,A,f,p,m,g,x,v;return Zx(this,function(b){switch(b.label){case 0:return a=Date.now(),[4,Iy(e,t,{width:48,height:48})];case 1:return i=b.sent(),s.stage3_extractImagePatches=Date.now()-a,a=Date.now(),o=i.map(function(e){var t=function(e,t){return xl(function(){var n=Fy(e,t);n=Ey(n=ib(n=Gp(n,[2,2],[2,2],"same"),t.conv4,"valid"),t.prelu4_alpha);var r=Ey(vb(Pc(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),s=vb(r,t.fc2_1),a=Nc(cm(s,1),1),i=od(ap(s,a),1),o=vb(r,t.fc2_2),l=vb(r,t.fc2_3);return{scores:Hc(i,1)[1],regions:o,points:l}})}(e,r);return e.dispose(),t}),s.stage3_onet=Date.now()-a,l=o.length>1?Zl(o.map(function(e){return e.scores})):o[0].scores,u=(d=Array).from,[4,l.data()];case 2:return c=u.apply(d,[b.sent()]),l.dispose(),h=c.map(function(e,t){return{score:e,idx:t}}).filter(function(e){return e.score>n}).map(function(e){return e.idx}),A=h.map(function(e){var t=o[e].regions.arraySync();return new Sy(t[0][0],t[0][1],t[0][2],t[0][3])}),f=h.map(function(e,n){return t[e].calibrate(A[n])}),p=h.map(function(e){return c[e]}),m=[],g=[],x=[],f.length>0&&(a=Date.now(),v=mv(f,p,.7,!1),s.stage3_nms=Date.now()-a,m=v.map(function(e){return f[e]}),g=v.map(function(e){return p[e]}),x=v.map(function(e,t){return Array(5).fill(0).map(function(n,r){var s=o[e].points.arraySync();return new dv(s[0][r]*(m[t].width+1)+m[t].left,s[0][r+5]*(m[t].height+1)+m[t].top)})})),o.forEach(function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()}),[2,{boxes:m,scores:g,points:x}]}})})}var Py=function(e){function t(){return e.call(this,"Mtcnn")||this}return Xx(t,e),t.prototype.load=function(t){return Jx(this,void 0,void 0,function(){return Zx(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]})})},t.prototype.loadFromDisk=function(t){return Jx(this,void 0,void 0,function(){return Zx(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]})})},t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),Jx(this,void 0,void 0,function(){var n,r,s,a,i,o,l,c,d,u,h,A,f,p,m,g,x,v,b,y,w;return Zx(this,function(N){switch(N.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(r=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return s={},a=Date.now(),i=xl(function(){return e=Nc(Tx.fromPixels(r)).toFloat(),xl(function(){return Oc(Hc(e,3).reverse(),3)});var e}),o=function(e){return i.dispose(),s.total=Date.now()-a,e},l=i.shape.slice(1),c=l[0],d=l[1],u=new Jb(t),h=u.minFaceSize,A=u.scaleFactor,f=u.maxNumScales,p=u.scoreThresholds,m=u.scaleSteps,g=(m||function(e,t,n){for(var r=n[0],s=n[1],a=12/e,i=[],o=Math.min(r,s)*a,l=0;o>=12;)i.push(a*Math.pow(t,l)),o*=t,l+=1;return i}(h,A,[c,d])).filter(function(e){var t=ky(e,[c,d]);return Math.min(t.width,t.height)>12}).slice(0,f),s.scales=g,s.pyramid=g.map(function(e){return ky(e,[c,d])}),x=Date.now(),[4,Ty(i,g,p[0],n.pnet,s)];case 1:return v=N.sent(),s.total_stage1=Date.now()-x,v.boxes.length?(s.stage2_numInputBoxes=v.boxes.length,x=Date.now(),[4,Dy(r,v.boxes,p[1],n.rnet,s)]):[2,o({results:[],stats:s})];case 2:return b=N.sent(),s.total_stage2=Date.now()-x,b.boxes.length?(s.stage3_numInputBoxes=b.boxes.length,x=Date.now(),[4,Ly(r,b.boxes,p[2],n.onet,s)]):[2,o({results:[],stats:s})];case 3:return y=N.sent(),s.total_stage3=Date.now()-x,w=y.boxes.map(function(e,t){return kb(kv({},new fv(y.scores[t],new bv(e.left/d,e.top/c,e.width/d,e.height/c),{height:c,width:d})),new wv(y.points[t].map(function(t){return t.sub(new dv(e.left,e.top)).div(new dv(e.width,e.height))}),{width:e.width,height:e.height}))}),[2,o({results:w,stats:s})]}})})},t.prototype.forward=function(e,t){return void 0===t&&(t={}),Jx(this,void 0,void 0,function(){var n;return Zx(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Xv(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent().results]}})})},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),Jx(this,void 0,void 0,function(){var n;return Zx(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Xv(e)];case 1:return[2,n.apply(this,[r.sent(),t])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return By(e)},t.prototype.extractParams=function(e){return Cy(e)},t}(nb),Ry=[new dv(1.603231,2.094468),new dv(6.041143,7.080126),new dv(2.882459,3.518061),new dv(4.266906,5.178857),new dv(9.041765,10.66308)],Uy=[117.001,114.697,97.404],Oy=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:Ry,meanRgb:Uy,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e.call(this,t)||this}return Xx(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Jx(this,void 0,void 0,function(){return Zx(this,function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map(function(e){return new fv(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(xy),My={ssdMobilenetv1:new iy,tinyFaceDetector:new Oy,tinyYolov2:new vy,mtcnn:new Py,faceLandmark68Net:new Ub,faceLandmark68TinyNet:new Mb,faceRecognitionNet:new Xb,faceExpressionNet:new jb,ageGenderNet:new Pb};function Qy(e,t){var n={age:t};return Object.assign({},e,n)}var Hy=function(e){function t(t,n,r){var s=e.call(this)||this;return s.parentTask=t,s.input=n,s.extractedFaces=r,s}return Xx(t,e),t}(yy),zy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.run=function(){return Jx(this,void 0,void 0,function(){var e,t,n=this;return Zx(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,Ny(e=r.sent(),this.input,function(e){return Jx(n,void 0,void 0,function(){return Zx(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return My.faceExpressionNet.predictExpressions(e)}))];case 1:return[2,t.sent()]}})})},this.extractedFaces)];case 2:return t=r.sent(),[2,e.map(function(e,n){return Cb(e,t[n])})]}})})},t.prototype.withAgeAndGender=function(){return new qy(this,this.input)},t}(Hy),Wy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.run=function(){return Jx(this,void 0,void 0,function(){var e,t;return Zx(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,jy(e,this.input,function(e){return My.faceExpressionNet.predictExpressions(e)},this.extractedFaces)]:[2];case 2:return t=n.sent(),[2,Cb(e,t)]}})})},t.prototype.withAgeAndGender=function(){return new Xy(this,this.input)},t}(Hy),Vy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.withAgeAndGender=function(){return new Yy(this,this.input)},t.prototype.withFaceDescriptors=function(){return new $y(this,this.input)},t}(zy),Ky=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.withAgeAndGender=function(){return new Jy(this,this.input)},t.prototype.withFaceDescriptor=function(){return new ew(this,this.input)},t}(Wy),Gy=function(e){function t(t,n,r){var s=e.call(this)||this;return s.parentTask=t,s.input=n,s.extractedFaces=r,s}return Xx(t,e),t}(yy),qy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.run=function(){return Jx(this,void 0,void 0,function(){var e,t,n=this;return Zx(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,Ny(e=r.sent(),this.input,function(e){return Jx(n,void 0,void 0,function(){return Zx(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return My.ageGenderNet.predictAgeAndGender(e)}))];case 1:return[2,t.sent()]}})})},this.extractedFaces)];case 2:return t=r.sent(),[2,e.map(function(e,n){var r=t[n],s=r.age;return Qy(Yb(e,r.gender,r.genderProbability),s)})]}})})},t.prototype.withFaceExpressions=function(){return new zy(this,this.input)},t}(Gy),Xy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.run=function(){return Jx(this,void 0,void 0,function(){var e,t,n,r,s;return Zx(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return(e=a.sent())?[4,jy(e,this.input,function(e){return My.ageGenderNet.predictAgeAndGender(e)},this.extractedFaces)]:[2];case 2:return t=a.sent(),n=t.age,r=t.gender,s=t.genderProbability,[2,Qy(Yb(e,r,s),n)]}})})},t.prototype.withFaceExpressions=function(){return new Wy(this,this.input)},t}(Gy),Yy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.withFaceExpressions=function(){return new Vy(this,this.input)},t.prototype.withFaceDescriptors=function(){return new $y(this,this.input)},t}(qy),Jy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.withFaceExpressions=function(){return new Ky(this,this.input)},t.prototype.withFaceDescriptor=function(){return new ew(this,this.input)},t}(Xy),Zy=function(e){function t(t,n){var r=e.call(this)||this;return r.parentTask=t,r.input=n,r}return Xx(t,e),t}(yy),$y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.run=function(){return Jx(this,void 0,void 0,function(){var e;return Zx(this,function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,Ny(e=t.sent(),this.input,function(e){return Promise.all(e.map(function(e){return My.faceRecognitionNet.computeFaceDescriptor(e)}))},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return[2,t.sent().map(function(t,n){return wy(e[n],t)})]}})})},t.prototype.withFaceExpressions=function(){return new Vy(this,this.input)},t.prototype.withAgeAndGender=function(){return new Yy(this,this.input)},t}(Zy),ew=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.run=function(){return Jx(this,void 0,void 0,function(){var e,t;return Zx(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,jy(e,this.input,function(e){return My.faceRecognitionNet.computeFaceDescriptor(e)},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return t=n.sent(),[2,wy(e,t)]}})})},t.prototype.withFaceExpressions=function(){return new Ky(this,this.input)},t.prototype.withAgeAndGender=function(){return new Jy(this,this.input)},t}(Zy),tw=function(e){function t(t,n,r){var s=e.call(this)||this;return s.parentTask=t,s.input=n,s.useTinyLandmarkNet=r,s}return Xx(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?My.faceLandmark68TinyNet:My.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(yy),nw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.run=function(){return Jx(this,void 0,void 0,function(){var e,t,n,r,s,a=this;return Zx(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),t=e.map(function(e){return e.detection}),this.input instanceof Xi?[4,Jv(this.input,t)]:[3,3];case 2:return r=i.sent(),[3,5];case 3:return[4,Yv(this.input,t)];case 4:r=i.sent(),i.label=5;case 5:return n=r,[4,Promise.all(n.map(function(e){return a.landmarkNet.detectLandmarks(e)}))];case 6:return s=i.sent(),n.forEach(function(e){return e instanceof Xi&&e.dispose()}),[2,e.map(function(e,t){return kb(e,s[t])})]}})})},t.prototype.withFaceExpressions=function(){return new Vy(this,this.input)},t.prototype.withAgeAndGender=function(){return new Yy(this,this.input)},t.prototype.withFaceDescriptors=function(){return new $y(this,this.input)},t}(tw),rw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.run=function(){return Jx(this,void 0,void 0,function(){var e,t,n,r,s;return Zx(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return(e=a.sent())?(t=e.detection,this.input instanceof Xi?[4,Jv(this.input,[t])]:[3,3]):[2];case 2:return r=a.sent(),[3,5];case 3:return[4,Yv(this.input,[t])];case 4:r=a.sent(),a.label=5;case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return s=a.sent(),n.forEach(function(e){return e instanceof Xi&&e.dispose()}),[2,kb(e,s)]}})})},t.prototype.withFaceExpressions=function(){return new Ky(this,this.input)},t.prototype.withAgeAndGender=function(){return new Jy(this,this.input)},t.prototype.withFaceDescriptor=function(){return new ew(this,this.input)},t}(tw),sw=function(e){function t(t,n){void 0===n&&(n=new ay);var r=e.call(this)||this;return r.input=t,r.options=n,r}return Xx(t,e),t}(yy),aw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.run=function(){return Jx(this,void 0,void 0,function(){var e,t,n,r;return Zx(this,function(s){switch(s.label){case 0:return t=(e=this).input,(n=e.options)instanceof Jb?[4,My.mtcnn.forward(t,n)]:[3,2];case 1:return[2,s.sent().map(function(e){return e.detection})];case 2:if(r=n instanceof by?function(e){return My.tinyFaceDetector.locateFaces(e,n)}:n instanceof ay?function(e){return My.ssdMobilenetv1.locateFaces(e,n)}:n instanceof gy?function(e){return My.tinyYolov2.locateFaces(e,n)}:null,!r)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(t)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(t){return Jx(e,void 0,void 0,function(){var e;return Zx(this,function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e.map(function(e){return kv({},e)}))]}})})})},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new nw(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new zy(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new qy(this.runAndExtendWithFaceDetections(),this.input)},t}(sw),iw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xx(t,e),t.prototype.run=function(){return Jx(this,void 0,void 0,function(){var e,t;return Zx(this,function(n){switch(n.label){case 0:return[4,new aw(this.input,this.options)];case 1:return e=n.sent(),t=e[0],e.forEach(function(e){e.score>t.score&&(t=e)}),[2,t]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(t){return Jx(e,void 0,void 0,function(){var e;return Zx(this,function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e?kv({},e):void 0)]}})})})},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new rw(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new Wy(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new Xy(this.runAndExtendWithFaceDetection(),this.input)},t}(sw);function ow(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map(function(e,t){return e-r[t]}).reduce(function(e,t){return e+Math.pow(t,2)},0))}!function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,s=function(){return"person "+r++};this._labeledDescriptors=n.map(function(e){if(e instanceof Bv)return e;if(e instanceof Float32Array)return new Bv(s(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new Bv(s(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map(function(t){return ow(t,e)}).reduce(function(e,t){return e+t},0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map(function(n){var r=n.descriptors,s=n.label;return new jv(s,t.computeMeanDistance(e,r))}).reduce(function(e,t){return e.distance<t.distance?e:t})},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new jv("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},e.fromJSON=function(t){var n=t.labeledDescriptors.map(function(e){return Bv.fromJSON(e)});return new e(n,t.distanceThreshold)}}();const lw=new class{constructor(){this.isModelLoaded=!1,this.enrolledFaces=new Map,this.initPromise=null}async initialize(){return this.initPromise||(this.initPromise=this._initializeWithRetry()),this.initPromise}async _initializeWithRetry(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;for(let r=1;r<=e;r++)try{return console.log("Face recognition initialization attempt ".concat(r,"/").concat(e)),await this._loadModels(),void await this._loadEnrolledFaces()}catch(n){if(console.error("Initialization attempt ".concat(r," failed:"),n.message),r===e)throw n;const s=t*Math.pow(2,r-1);console.log("Retrying in ".concat(s,"ms...")),await new Promise(e=>setTimeout(e,s))}}async _loadModels(){if(this.isModelLoaded)console.log("Models already loaded, skipping...");else try{console.log("Loading face-api.js models..."),console.log("Loading models sequentially to avoid conflicts..."),await My.tinyFaceDetector.loadFromUri("/models"),console.log("\u2713 TinyFaceDetector loaded"),await My.faceLandmark68Net.loadFromUri("/models"),console.log("\u2713 FaceLandmark68Net loaded"),await My.faceRecognitionNet.loadFromUri("/models"),console.log("\u2713 FaceRecognitionNet loaded"),this.isModelLoaded=!0,console.log("\u2705 All face-api.js models loaded successfully")}catch(e){console.error("\u274c Error loading face-api.js models:",e);try{console.log("Trying fallback: loading only essential models..."),await My.tinyFaceDetector.loadFromUri("/models"),await My.faceLandmark68Net.loadFromUri("/models"),await My.faceRecognitionNet.loadFromUri("/models"),this.isModelLoaded=!0,console.log("\u2705 Face-api.js essential models loaded successfully (fallback)")}catch(t){throw console.error("\u274c Failed to load models even with fallback:",t),new Error("Failed to load face recognition models. Please check network connectivity and model files. Error: ".concat(e.message))}}}async _loadEnrolledFaces(){try{console.log("Loading from localStorage..."),this._loadFromStorage(),console.log("Current enrolled faces after localStorage load:",this.enrolledFaces.size),console.log("Fetching enrolled faces from backend...");let e="/admin/workers";try{const t=localStorage.getItem("token");if(t){"shop"===JSON.parse(atob(t.split(".")[1])).role&&(e="/shop/workers")}}catch(Ua){console.warn("Could not determine user role from token, checking current URL..."),window.location.pathname.startsWith("/shop")&&(e="/shop/workers")}console.log("Using workers endpoint:",e);const t=(await ws.get(e)).data;console.log("Fetched workers from backend:",t.length),this.enrolledFaces.clear(),console.log("Processing workers for face enrollment:",t.length);for(const n of t)if(console.log("Checking worker ".concat(n.name," (").concat(n._id,"):"),{hasFaceEncodings:!!n.faceEncodings,faceEncodingsLength:n.faceEncodings?n.faceEncodings.length:0,faceEncodingsType:n.faceEncodings?typeof n.faceEncodings:"undefined"}),n.faceEncodings&&n.faceEncodings.length>0){const e=n.faceEncodings.map(e=>new Float32Array(e));this.enrolledFaces.set(n._id,e),console.log("Loaded face data for worker: ".concat(n.name,", encodings: ").concat(e.length)),e.forEach((e,t)=>{console.log("  Descriptor ".concat(t,": length=").concat(e.length,", sample=").concat(Array.from(e.slice(0,5))))})}else console.log("Worker ".concat(n.name," has no face encodings or empty face encodings"));return this._saveToStorage(),console.log("Successfully loaded enrolled faces. Total enrolled workers:",this.enrolledFaces.size),this.enrolledFaces.size}catch(e){return console.error("Error loading enrolled faces from backend:",e),console.error("Error stack:",e.stack),this.enrolledFaces.size}}async detectFaceFromImage(e){this.isModelLoaded||await this.initialize();try{await new Promise(e=>setTimeout(e,100));return await(t=e,n=new by,void 0===n&&(n=new ay),new iw(t,n)).withFaceLandmarks().withFaceDescriptor()}catch(r){return console.error("Error detecting face:",r),null}var t,n}async enrollFaceFromImages(e,t){this.isModelLoaded||await this.initialize(),console.log("Enrolling face from images for worker:",e,"Images:",t.length);const n=[];for(const r of t){const e=await this.detectFaceFromImage(r);e&&e.descriptor&&n.push(e.descriptor)}if(0===n.length)throw new Error("No faces detected in the provided images");return this.enrolledFaces.set(e,n),this._saveToStorage(),console.log("Face enrolled successfully from images. Total enrolled workers:",this.enrolledFaces.size),{success:!0,descriptorsCount:n.length,message:"Successfully enrolled ".concat(n.length," face descriptor(s) for worker")}}async enrollFace(e,t){if(this.isModelLoaded||await this.initialize(),console.log("Enrolling face for worker:",e,"Descriptors:",t.length),!t||0===t.length)throw new Error("No face descriptors provided for enrollment");return this.enrolledFaces.set(e,t),this._saveToStorage(),console.log("Face enrolled successfully. Total enrolled workers:",this.enrolledFaces.size),{success:!0,descriptorsCount:t.length,message:"Successfully enrolled ".concat(t.length," face descriptor(s) for worker")}}async recognizeFace(e){this.isModelLoaded||await this.initialize();const t=await this.detectFaceFromImage(e);if(!t||!t.descriptor)throw new Error("No face detected in the image");let n=null,r=1/0;console.log("Comparing with enrolled faces. Total enrolled workers:",this.enrolledFaces.size);for(const[s]of this.enrolledFaces.entries())console.log("Enrolled worker ID:",s);console.log("Detection descriptor length:",t.descriptor.length),console.log("Sample detection data (first 5 values):",t.descriptor.slice(0,5));for(const[s,a]of this.enrolledFaces.entries()){console.log("Checking worker ".concat(s," with ").concat(a.length," descriptors"));for(let e=0;e<a.length;e++){const i=a[e],o=ow(t.descriptor,i);console.log("Comparing with worker ".concat(s,", descriptor ").concat(e,": distance=").concat(o)),o<.5&&o<r&&(r=o,n=s,console.log("New best match: worker ".concat(s,", distance=").concat(o)))}}if(console.log("Best match result:",{bestMatch:n,bestDistance:r,threshold:.5}),!n){console.log("No match found. Detailed comparison info:"),console.log("Threshold:",.5),console.log("Best distance found:",r);for(const[e,n]of this.enrolledFaces.entries()){console.log("Worker ".concat(e," distances:"));for(let e=0;e<n.length;e++){const r=n[e],s=ow(t.descriptor,r);console.log("  Descriptor ".concat(e,": ").concat(s))}}}if(n)return{success:!0,workerId:n,descriptor:t.descriptor,confidence:1-r,message:"Face recognized with ".concat(Math.round(100*(1-r)),"% confidence")};throw new Error("Face not recognized. Please enroll first or try again.")}async loadImageFromFile(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>t(r),r.onerror=n,r.src=URL.createObjectURL(e)})}async loadImageFromDataURL(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>t(r),r.onerror=n,r.src=e})}_saveToStorage(){try{const e={};for(const[t,n]of this.enrolledFaces.entries())e[t]=n.map(e=>Array.from(e));localStorage.setItem("enrolledFaces",JSON.stringify(e))}catch(e){console.error("Error saving to localStorage:",e)}}_loadFromStorage(){try{const e=localStorage.getItem("enrolledFaces");if(e){const t=JSON.parse(e);this.enrolledFaces.clear();for(const[e,n]of Object.entries(t)){const t=n.map(e=>new Float32Array(e));this.enrolledFaces.set(e,t)}}}catch(e){console.error("Error loading from localStorage:",e)}}getEnrolledWorkers(){return Array.from(this.enrolledFaces.keys())}removeWorker(e){const t=this.enrolledFaces.delete(e);return t&&this._saveToStorage(),t}isReady(){return this.isModelLoaded}addEnrolledFace(e,t){const n=t.map(e=>e instanceof Float32Array?e:new Float32Array(e));this.enrolledFaces.set(e,n),this._saveToStorage(),console.log("Added enrolled face for worker: ".concat(e),{descriptorsCount:n.length,sampleDescriptor:n.length>0?Array.from(n[0].slice(0,5)):null})}};lw._loadFromStorage(),window.addEventListener("faceEnrollmentUpdated",async e=>{console.log("Face enrollment updated event received:",e.detail);try{const e=await lw._loadEnrolledFaces();console.log("Reloaded enrolled faces after update event. Total enrolled workers:",e)}catch(t){console.error("Error reloading enrolled faces after update event:",t)}});const cw=lw,dw=e=>{if(!e)return"";const[t,n]=e.split(":");let r=parseInt(t,10);const s=r>=12?"PM":"AM";return r=r%12||12,"".concat(r,":").concat(n," ").concat(s)},uw=()=>{const e=ee(),t=(0,r.useRef)(null),[n,s]=(0,r.useState)({name:"",department:"",salary:"",selectedBatch:""}),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),[A,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,x]=(0,r.useState)(!0),[v,b]=(0,r.useState)(""),[y,w]=(0,r.useState)(!1),[N,j]=(0,r.useState)([]),[C,B]=(0,r.useState)({type:"",text:""}),[k,S]=(0,r.useState)(!1),[_,E]=(0,r.useState)(null),[F,T]=(0,r.useState)(null),[I,D]=(0,r.useState)(!1),[L,P]=(0,r.useState)(null),[R,U]=(0,r.useState)(!1),[O,M]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(g){const e=(()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="0123456789";let n="",r="";for(let s=0;s<2;s++)n+=e.charAt(Math.floor(26*Math.random()));for(let s=0;s<4;s++)r+=t.charAt(Math.floor(10*Math.random()));return n+r})();b(e)}else b("")},[g]),(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/admin/departments",{withCredentials:!0});i(e.data);const t=await ws.get("/admin/settings/batches",{withCredentials:!0});l(t.data),e.data.length>0&&s(t=>(0,$n.A)((0,$n.A)({},t),{},{department:e.data[0]._id}))}catch(o){var e,t,n,r,a;if(console.error("Failed to fetch data:",o),404===(null===(e=o.response)||void 0===e?void 0:e.status))null!==(t=o.request)&&void 0!==t&&null!==(n=t.responseURL)&&void 0!==n&&n.includes("batches")?(console.error("Batches endpoint not found. Using empty batches array."),l([])):null!==(r=o.request)&&void 0!==r&&null!==(a=r.responseURL)&&void 0!==a&&a.includes("departments")?(console.error("Departments endpoint not found. Using empty departments array."),i([])):(h(!0),d("Some data could not be loaded. Please try again later."));else h(!0),d("Failed to load data. Please try again later.")}})()},[]);const Q=e=>{const{name:t,value:r}=e.target;s((0,$n.A)((0,$n.A)({},n),{},{[t]:r}))},H=async t=>{if(t&&0!==N.length){S(!0),B({type:"",text:""});try{await cw.initialize();const n=[];for(const e of N)try{const t=await cw.loadImageFromDataURL(e.preview),r=await cw.detectFaceFromImage(t);r&&r.descriptor&&n.push(Array.from(r.descriptor))}catch(s){console.warn("Failed to detect face in one image:",s)}if(0===n.length)return B({type:"error",text:"No faces detected in the captured images. Please try again."}),void S(!1);const r=new FormData;r.append("workerId",t),r.append("faceDescriptors",JSON.stringify(n)),N.forEach(e=>{r.append("faces",e.file)});await ws.post("/admin/attendance/enroll-face",r);B({type:"success",text:"Face enrolled successfully!"}),setTimeout(()=>{e("/admin/workers/view")},2e3)}catch(a){var n,r;console.error("Error enrolling face:",a),console.error("Error response:",a.response);const e=(null===(n=a.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||a.message||"An error occurred during enrollment.";B({type:"error",text:e})}finally{S(!1),j([]),w(!1)}}},z="w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",W="block text-sm font-semibold text-gray-600 mb-1",V="w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none",K="inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500";return(0,Ns.jsxs)("div",{className:"container mx-auto p-6 bg-white rounded-2xl shadow-xl h-full max-h-[calc(100vh-2rem)] overflow-y-auto",children:[R&&L&&(0,Ns.jsx)("div",{className:"fixed top-4 right-4 bg-green-500 text-white py-3 px-6 rounded-lg shadow-lg z-50 animate-fade-in-down",children:(0,Ns.jsxs)("div",{className:"flex items-start",children:[(0,Ns.jsx)("div",{className:"flex-shrink-0",children:(0,Ns.jsx)(St,{className:"h-6 w-6 text-white"})}),(0,Ns.jsxs)("div",{className:"ml-3",children:[(0,Ns.jsx)("h3",{className:"text-sm font-medium text-white",children:"Worker Added Successfully!"}),(0,Ns.jsxs)("div",{className:"mt-2 text-sm text-white",children:[(0,Ns.jsxs)("p",{children:["Name: ",L.name]}),(0,Ns.jsxs)("p",{children:["Department: ",L.department]}),O&&N.length>0&&(0,Ns.jsxs)("p",{children:["Face enrolled with ",N.length," images"]})]})]}),(0,Ns.jsx)("div",{className:"ml-4 flex",children:(0,Ns.jsx)("button",{type:"button",onClick:()=>U(!1),className:"inline-flex rounded-md bg-green-500 text-white hover:text-gray-200 focus:outline-none",children:(0,Ns.jsx)(Ft,{className:"h-5 w-5"})})})]})}),(0,Ns.jsxs)("div",{className:"flex items-center mb-6 text-gray-800",children:[(0,Ns.jsx)(_t,{className:"text-3xl text-blue-600"}),(0,Ns.jsx)("h1",{className:"text-3xl font-bold ml-3",children:"Add New Worker"})]}),c&&(0,Ns.jsxs)("div",{className:"flex items-center p-4 mb-4 rounded-lg ".concat(u?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),role:"alert",children:[(0,Ns.jsx)(Ve,{className:"w-5 h-5 mr-3"}),(0,Ns.jsx)("span",{className:"font-medium",children:c}),!u&&A&&(0,Ns.jsxs)("span",{className:"ml-2",children:["Temporary Password: ",(0,Ns.jsx)("strong",{children:A})]}),!u&&p&&(0,Ns.jsxs)("span",{className:"ml-2",children:["RFID: ",(0,Ns.jsx)("strong",{children:p})]})]}),(0,Ns.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),d(""),h(!1),f(""),m(""),D(!1),!n.name.trim())return h(!0),void d("Please enter a name for the worker.");if(!n.department)return h(!0),void d("Please select a department.");const r=n.name.toLowerCase().replace(/\s+/g,"_")+"_"+Date.now();let s=null,i=null,l=null;if(n.selectedBatch){const e=o.find(e=>e.id===n.selectedBatch);e&&(s=e.workingHours||null,i=e.lunchBreak||null,l=e.breakTime||null)}const c=(0,$n.A)((0,$n.A)((0,$n.A)({},n),{},{username:r,workingHours:s,lunchBreak:i,breakTime:l,createRFID:g},g&&{rfid:v}),{},{batchId:n.selectedBatch});try{const t=await ws.post("/admin/workers",c,{withCredentials:!0});if(d(t.data.message||"Worker added successfully!"),h(!1),f(t.data.tempPassword||""),t.data.rfid&&m(t.data.rfid),t.data.workerId){var u;E(t.data.workerId);const r={_id:t.data.workerId,name:n.name,department:(null===(u=a.find(e=>e._id===n.department))||void 0===u?void 0:u.name)||"",salary:n.salary,rfid:t.data.rfid||v};P(r),U(!0),setTimeout(()=>{U(!1)},5e3),O&&N.length>0?await H(t.data.workerId):setTimeout(()=>{e("/admin/workers/view")},2e3)}D(!0)}catch(y){var A,p;if(h(!0),400===(null===(A=y.response)||void 0===A?void 0:A.status))d(y.response.data.message||"Validation error. Please check your inputs.");else if(500===(null===(p=y.response)||void 0===p?void 0:p.status))d("Server error. Please try again later.");else{var x,b;d((null===(x=y.response)||void 0===x||null===(b=x.data)||void 0===b?void 0:b.message)||"An error occurred while adding the worker.")}console.error("Error adding worker:",y)}},className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{htmlFor:"name",className:W,children:"Full Name"}),(0,Ns.jsx)("input",{type:"text",name:"name",id:"name",value:n.name,onChange:Q,className:z,placeholder:"e.g., John Doe",required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{htmlFor:"department",className:W,children:"Department"}),(0,Ns.jsxs)("select",{name:"department",id:"department",value:n.department,onChange:Q,className:V,required:!0,children:[(0,Ns.jsx)("option",{value:"",children:"Select Department"}),a.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{htmlFor:"selectedBatch",className:W,children:"Batch (Optional)"}),(0,Ns.jsxs)("select",{name:"selectedBatch",id:"selectedBatch",value:n.selectedBatch,onChange:Q,className:V,children:[(0,Ns.jsx)("option",{value:"",children:"Select Batch"}),o.map(e=>(0,Ns.jsx)("option",{value:e.id,children:e.name},e.id))]}),n.selectedBatch&&(0,Ns.jsxs)("div",{className:"mt-2 p-2 bg-gray-100 rounded text-sm",children:[(0,Ns.jsx)("p",{className:"font-medium",children:"Batch Details:"}),((e,t,r,s,a,i)=>{const l=o.find(e=>e.id===n.selectedBatch);return l?(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("p",{children:["Working Hours: ",null!==(e=l.workingHours)&&void 0!==e&&e.from?dw(l.workingHours.from):"--:--"," - ",null!==(t=l.workingHours)&&void 0!==t&&t.to?dw(l.workingHours.to):"--:--"]}),(0,Ns.jsxs)("p",{children:["Lunch Break: ",null!==(r=l.lunchBreak)&&void 0!==r&&r.from?dw(l.lunchBreak.from):"--:--"," - ",null!==(s=l.lunchBreak)&&void 0!==s&&s.to?dw(l.lunchBreak.to):"--:--"]}),(0,Ns.jsxs)("p",{children:["Break Time: ",null!==(a=l.breakTime)&&void 0!==a&&a.startTime?dw(l.breakTime.startTime):"--:--"," - ",null!==(i=l.breakTime)&&void 0!==i&&i.endTime?dw(l.breakTime.endTime):"--:--"]})]}):null})()]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{htmlFor:"salary",className:W,children:"Salary (per month)"}),(0,Ns.jsx)("input",{type:"text",name:"salary",id:"salary",value:n.salary,onChange:Q,className:z,placeholder:"Enter monthly salary amount",required:!0})]})]}),(0,Ns.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"RFID Card"}),(0,Ns.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Ns.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Ns.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Create RFID for this worker"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>x(!g),className:"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(g?"bg-blue-600":"bg-gray-200"),children:(0,Ns.jsx)("span",{"aria-hidden":"true",className:"pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 ".concat(g?"translate-x-5":"translate-x-0")})})]}),g&&(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"RFID"}),(0,Ns.jsx)("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-100",value:v,readOnly:!0}),(0,Ns.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This RFID will be automatically assigned to the worker"})]}),!g&&(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"RFID creation is disabled. You can enable it using the toggle above."})]})]}),(0,Ns.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Face Enrollment"}),(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ns.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Enable Face Enrollment for this worker"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>M(!O),className:"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(O?"bg-blue-600":"bg-gray-200"),children:(0,Ns.jsx)("span",{"aria-hidden":"true",className:"pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 ".concat(O?"translate-x-5":"translate-x-0")})})]}),(0,Ns.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:O?"Face enrollment is enabled. Capture images below to enroll worker's face.":"Face enrollment is disabled. Worker will be added without face enrollment."})]}),C.text&&(0,Ns.jsx)("div",{className:"p-3 mb-4 rounded-lg ".concat("success"===C.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:C.text}),O&&(0,Ns.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,Ns.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[y?(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)(Pa(),{audio:!1,ref:t,screenshotFormat:"image/jpeg",className:"w-full max-w-xs mx-auto rounded-md",videoConstraints:{width:320,height:240}}),(0,Ns.jsxs)("button",{type:"button",onClick:()=>{if(t.current&&N.length<5){const e=t.current.getScreenshot();if(e){const t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),s=new Uint8Array(r);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);const a=new Blob([r],{type:n}),i=new File([a],"capture-".concat(Date.now(),".jpeg"),{type:n});j(t=>[...t,{file:i,preview:e}])}}},disabled:k||N.length>=5,className:"".concat(K," bg-blue-600 text-white ").concat(k||N.length>=5?"opacity-50":"hover:bg-blue-700"),children:[(0,Ns.jsx)(Oe,{className:"mr-1"})," Capture Image"]}),(0,Ns.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Captured: ",N.length,"/5 images"]})]}):(0,Ns.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,Ns.jsx)(Oe,{className:"text-4xl text-gray-400 mb-2"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>w(!0),className:"".concat(K," text-blue-600"),children:"Use Camera"})]}),y&&(0,Ns.jsx)("button",{type:"button",onClick:()=>w(!1),className:"".concat(K," text-gray-600 mt-2"),children:"Close Camera"})]}),N.length>0&&(0,Ns.jsxs)("div",{className:"space-y-2",children:[(0,Ns.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["Captured Images (",N.length,"/5)"]}),(0,Ns.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-2",children:N.map((e,t)=>(0,Ns.jsxs)("div",{className:"relative group",children:[(0,Ns.jsx)("img",{src:e.preview,alt:"Captured face ".concat(t+1),className:"w-full h-20 object-cover rounded-md"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>(e=>{j(t=>t.filter((t,n)=>n!==e))})(t),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:(0,Ns.jsx)(Ft,{size:12})})]},t))})]})]})]}),(0,Ns.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 shadow-md",disabled:k,children:k?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(lt,{className:"animate-spin mr-2"}),"Adding Worker..."]}):"Add Worker"})]})]})},hw=e=>{let{isOpen:t,onClose:n,title:r,children:s}=e;return t?(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-2 sm:p-4 z-50 overflow-y-auto",children:(0,Ns.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-auto my-8 sm:my-16",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:r}),(0,Ns.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200 transition-colors","aria-label":"Close",children:"\xd7"})]}),(0,Ns.jsx)("div",{className:"p-4 max-h-[70vh] overflow-y-auto",children:s})]})}):null};var Aw=n(7307),fw=n.n(Aw);const pw=e=>{if(!e)return"Not set";const[t,n]=e.split(":");let r=parseInt(t,10);const s=r>=12?"PM":"AM";return r=r%12||12,"".concat(r,":").concat(n," ").concat(s)},mw="/admin/workers";const gw=function(){const e=J(),[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)("All"),[d,u]=(0,r.useState)(!1),[h,A]=(0,r.useState)(null),[f,p]=(0,r.useState)({}),[m,g]=(0,r.useState)([]),[x,v]=(0,r.useState)([]),[b,y]=(0,r.useState)(!1),[w,N]=(0,r.useState)(null),[j,C]=(0,r.useState)([]),[B,k]=(0,r.useState)(!1),[S,_]=(0,r.useState)(!1),[E,F]=(0,r.useState)({type:"",text:""}),T=r.useRef(null),[I,D]=(0,r.useState)(!1),[L,P]=(0,r.useState)(null),[R,U]=(0,r.useState)([]),O=async()=>{try{const[e,t,r]=await Promise.all([ws.get(mw,{withCredentials:!0}),ws.get("/admin/departments",{withCredentials:!0}),ws.get("/admin/settings/batches",{withCredentials:!0})]);n(e.data),g(t.data),v(r.data)}catch(e){o("Failed to fetch data."),console.error(e)}finally{a(!1)}};(0,r.useEffect)(()=>{O()},[e.key]),(0,r.useEffect)(()=>{if(t.length>0&&m.length>0){let e=t;"All"!==l&&(e=t.filter(e=>{var t;return(null===(t=e.department)||void 0===t?void 0:t._id)===l})),U(e)}else U(t)},[t,l]);const M=()=>{u(!1),A(null),p({})},Q=(e,t)=>{const{value:n}=e.target;if(t.includes(".")){const[e,r]=t.split(".");p(t=>(0,$n.A)((0,$n.A)({},t),{},{[e]:(0,$n.A)((0,$n.A)({},t[e]),{},{[r]:n})}))}else p("selectedBatch"===t?e=>{const t=x.find(e=>e.id===n);return t?(0,$n.A)((0,$n.A)({},e),{},{selectedBatch:n,workingHours:t.workingHours||null,lunchBreak:t.lunchBreak||null,breakTime:t.breakTime||null}):(0,$n.A)((0,$n.A)({},e),{},{selectedBatch:n,workingHours:null,lunchBreak:null,breakTime:null})}:(0,$n.A)((0,$n.A)({},f),{},{[t]:n}))},H=()=>{y(!1),N(null),C([]),k(!1),F({type:"",text:""})};return s?(0,Ns.jsx)("div",{className:"p-6 text-center",children:"Loading workers..."}):i?(0,Ns.jsx)("div",{className:"p-6 text-center text-red-500",children:i}):(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h3",{className:"text-2xl font-semibold text-gray-800",children:"Existing Workers"}),(0,Ns.jsxs)("button",{onClick:()=>{const e={};"All"!==l&&(e.department=l),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(new Date).toLocaleDateString(),s=e.length,a=e.reduce((e,t)=>e+(parseFloat(t.salary)||0),0);let i={},o=e;if(n.department&&"All"!==n.department){var l;const r=(null===(l=t.find(e=>e._id===n.department))||void 0===l?void 0:l.name)||n.department;o=e.filter(e=>{var t;return(null===(t=e.department)||void 0===t?void 0:t._id)===n.department}),i[r]=o}else e.forEach(e=>{var t;const n=(null===(t=e.department)||void 0===t?void 0:t.name)||"No Department";i[n]||(i[n]=[]),i[n].push(e)});const c=Object.keys(i).map(e=>{const t=i[e],n=t.reduce((e,t)=>e+(parseFloat(t.salary)||0),0);return'\n      <tr>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">'.concat(e,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 14px;">').concat(t.length,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px;">\u20b9').concat(n.toFixed(2),"</td>\n      </tr>\n    ")}).join(""),d=o.map(e=>{var t,n,r,s,a;const i=(null===(t=e.department)||void 0===t?void 0:t.name)||"No Department",o=null!==(n=e.workingHours)&&void 0!==n&&n.from&&null!==(r=e.workingHours)&&void 0!==r&&r.to?"".concat(f(e.workingHours.from)," - ").concat(f(e.workingHours.to)):"Not set",l=null!==(s=e.lunchBreak)&&void 0!==s&&s.from&&null!==(a=e.lunchBreak)&&void 0!==a&&a.to?"".concat(f(e.lunchBreak.from)," - ").concat(f(e.lunchBreak.to)):"Not set";return'\n      <tr>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px; font-weight: bold;">'.concat(e.name||"N/A",'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">').concat(i,'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; text-align: right; font-size: 14px;">\u20b9').concat((parseFloat(e.salary)||0).toFixed(2),'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">').concat(o,'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">').concat(l,'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">').concat(e.rfid||"Not Assigned","</td>\n      </tr>\n    ")}).join(""),u=[];if(n.department&&"All"!==n.department){var h;const e=(null===(h=t.find(e=>e._id===n.department))||void 0===h?void 0:h.name)||n.department;u.push("Department: ".concat(e))}const A=u.length>0?'<p style="margin: 8px 0; font-size: 16px;"><strong>Filters Applied:</strong> '.concat(u.join(", "),"</p>"):"",f=e=>{if(!e)return"Not set";const[t,n]=e.split(":");let r=parseInt(t,10);const s=r>=12?"PM":"AM";return r=r%12||12,"".concat(r,":").concat(n," ").concat(s)},p='\n    <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 1000px; margin: 0 auto;">\n      \x3c!-- Header --\x3e\n      <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #333; padding-bottom: 20px;">\n        <h1 style="color: #333; margin: 0; font-size: 32px;">The Sweet Hub</h1>\n        <p style="color: #666; font-size: 16px; margin: 10px 0 5px 0;">156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006</p>\n        <p style="color: #666; font-size: 16px; margin: 5px 0;">Phone: 7339200636</p>\n      </div>\n      \n      <div style="text-align: center; margin-bottom: 30px;">\n        <h2 style="color: #333; margin: 0; font-size: 28px;">WORKER REPORT</h2>\n        <p style="color: #666; font-size: 18px; margin: 15px 0;">\n          Generated on '.concat(r,"\n        </p>\n        ").concat(A,'\n      </div>\n      \n      \x3c!-- Summary --\x3e\n      <div style="margin-bottom: 30px; background-color: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #dee2e6;">\n        <h3 style="color: #333; margin-top: 0; font-size: 20px;">Report Summary</h3>\n        <div style="display: flex; justify-content: space-around; text-align: center;">\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Workers</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(s,'</p>\n          </div>\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Salary</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">\u20b9').concat(a.toFixed(2),"</p>\n          </div>\n        </div>\n      </div>\n      \n      ").concat(Object.keys(i).length>0?'\n      \x3c!-- Department Summary --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Workers by Department</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Department</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: center; font-size: 16px; font-weight: bold;">Worker Count</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: right; font-size: 16px; font-weight: bold;">Total Salary</th>\n            </tr>\n          </thead>\n          <tbody>\n            '.concat(c,"\n          </tbody>\n        </table>\n      </div>\n      "):"",'\n      \n      \x3c!-- Detailed Workers --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Detailed Worker Information</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Worker Name</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Department</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px; font-weight: bold;">Salary</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Working Hours</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Lunch Break</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">RFID</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(d,'\n          </tbody>\n        </table>\n      </div>\n      \n      <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; text-align: center;">\n        <p style="color: #777; font-size: 14px; margin: 0;">\n          Generated on ').concat(r," at ").concat((new Date).toLocaleTimeString(),'\n        </p>\n        <p style="color: #777; font-size: 14px; margin: 5px 0 0 0;">\n          Report generated by The Sweet Hub Worker Management System\n        </p>\n      </div>\n    </div>\n  '),m={margin:15,filename:"worker_report_".concat(r.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};fw()().from(p).set(m).save()}(t,m,e)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center",disabled:0===t.length,children:[(0,Ns.jsx)(Ye,{className:"mr-2"}),"Download PDF"]})]}),(0,Ns.jsx)("div",{className:"mb-4 flex flex-wrap gap-4",children:(0,Ns.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Filter by Department"}),(0,Ns.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Ns.jsx)("option",{value:"All",children:"All Departments"}),m.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]})}),0===R.length?(0,Ns.jsx)("p",{children:"No workers found. Please add a worker."}):(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salary"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Batch Details"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RFID"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(e=>{var t,n,r,s,a,i,o,l,c,d,h,f,m;return(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:null===(t=e.department)||void 0===t?void 0:t.name}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.salary}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.batchId?(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("div",{children:["Working Hours: ",null!==(n=e.workingHours)&&void 0!==n&&n.from&&null!==(r=e.workingHours)&&void 0!==r&&r.to?"".concat(pw(e.workingHours.from)," - ").concat(pw(e.workingHours.to)):"Not set"]}),(0,Ns.jsxs)("div",{children:["Lunch Break: ",null!==(s=e.lunchBreak)&&void 0!==s&&s.from&&null!==(a=e.lunchBreak)&&void 0!==a&&a.to?"".concat(pw(e.lunchBreak.from)," - ").concat(pw(e.lunchBreak.to)):"Not set"]}),(0,Ns.jsxs)("div",{children:["Break Time: ",null!==(i=e.breakTime)&&void 0!==i&&i.startTime&&null!==(o=e.breakTime)&&void 0!==o&&o.endTime?"".concat(pw(e.breakTime.startTime)," - ").concat(pw(e.breakTime.endTime)):"Not set"]})]}):(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("div",{children:["Working Hours: ",null!==(l=e.workingHours)&&void 0!==l&&l.from&&null!==(c=e.workingHours)&&void 0!==c&&c.to?"".concat(pw(e.workingHours.from)," - ").concat(pw(e.workingHours.to)):"Not set"]}),(0,Ns.jsxs)("div",{children:["Lunch Break: ",null!==(d=e.lunchBreak)&&void 0!==d&&d.from&&null!==(h=e.lunchBreak)&&void 0!==h&&h.to?"".concat(pw(e.lunchBreak.from)," - ").concat(pw(e.lunchBreak.to)):"Not set"]}),(0,Ns.jsxs)("div",{children:["Break Time: ",null!==(f=e.breakTime)&&void 0!==f&&f.startTime&&null!==(m=e.breakTime)&&void 0!==m&&m.endTime?"".concat(pw(e.breakTime.startTime)," - ").concat(pw(e.breakTime.endTime)):"Not set"]})]})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.rfid||"Not Assigned"}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{var t;A(e),p((0,$n.A)((0,$n.A)({},e),{},{department:(null===(t=e.department)||void 0===t?void 0:t._id)||e.department||"",selectedBatch:e.batchId||""})),u(!0)})(e),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),(0,Ns.jsx)("button",{onClick:()=>(e=>{P(e),D(!0)})(e),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e._id)})})]})}),(0,Ns.jsx)(hw,{isOpen:d,onClose:M,title:"Edit Worker",children:h&&(0,Ns.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=(0,$n.A)({},f);void 0!==f.selectedBatch&&(e.batchId=f.selectedBatch||null),h&&h.faceEncodings&&(e.faceEncodings=h.faceEncodings),h&&h.faceImages&&(e.faceImages=h.faceImages);const r=await ws.put("".concat(mw,"/").concat(h._id),e,{withCredentials:!0});n(t.map(e=>e._id===h._id?r.data.worker:e)),M()}catch(r){o("Failed to update worker."),console.error(r)}},className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Ns.jsx)("input",{type:"text",value:f.name||"",onChange:e=>Q(e,"name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,Ns.jsxs)("select",{value:f.department||"",onChange:e=>{p((0,$n.A)((0,$n.A)({},f),{},{department:e.target.value}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,Ns.jsx)("option",{value:"",children:"Select Department"}),m.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salary"}),(0,Ns.jsx)("input",{type:"text",value:f.salary||"",onChange:e=>Q(e,"salary"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RFID"}),(0,Ns.jsx)("input",{type:"text",value:f.rfid||"",onChange:e=>Q(e,"rfid"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch"}),(0,Ns.jsxs)("select",{value:f.selectedBatch||"",onChange:e=>Q(e,"selectedBatch"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,Ns.jsx)("option",{value:"",children:"No Batch"}),x.map(e=>(0,Ns.jsx)("option",{value:e.id,children:e.name},e.id))]}),f.selectedBatch&&(0,Ns.jsxs)("div",{className:"mt-2 p-2 bg-gray-100 rounded text-sm",children:[(0,Ns.jsx)("p",{className:"font-medium",children:"Batch Details:"}),((e,t,n,r,s,a)=>{const i=x.find(e=>e.id===f.selectedBatch);return i?(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("p",{children:["Working Hours: ",null!==(e=i.workingHours)&&void 0!==e&&e.from?pw(i.workingHours.from):"--:--"," - ",null!==(t=i.workingHours)&&void 0!==t&&t.to?pw(i.workingHours.to):"--:--"]}),(0,Ns.jsxs)("p",{children:["Lunch Break: ",null!==(n=i.lunchBreak)&&void 0!==n&&n.from?pw(i.lunchBreak.from):"--:--"," - ",null!==(r=i.lunchBreak)&&void 0!==r&&r.to?pw(i.lunchBreak.to):"--:--"]}),(0,Ns.jsxs)("p",{children:["Break Time: ",null!==(s=i.breakTime)&&void 0!==s&&s.from?pw(i.breakTime.from):"--:--"," - ",null!==(a=i.breakTime)&&void 0!==a&&a.to?pw(i.breakTime.to):"--:--"]})]}):null})()]})]}),(0,Ns.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ns.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Face Enrollment"}),h.faceImages&&h.faceImages.length>0?(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Enrolled"}):(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Not Enrolled"})]}),(0,Ns.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:h.faceImages&&h.faceImages.length>0?"Worker has ".concat(h.faceImages.length," face images enrolled."):"Worker has not been enrolled for face recognition."}),(0,Ns.jsxs)("button",{type:"button",onClick:()=>(N(h),C([]),k(!0),F({type:"",text:""}),void y(!0)),className:"mt-2 inline-flex items-center px-3 py-1.5 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,Ns.jsx)(_t,{className:"mr-1",size:16}),h.faceImages&&h.faceImages.length>0?"Update Face Enrollment":"Enroll Face"]})]}),(0,Ns.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Ns.jsx)("button",{type:"button",onClick:M,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,Ns.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Update Worker"})]})]})}),(0,Ns.jsx)(hw,{isOpen:b,onClose:H,title:"Face Enrollment",children:w&&(0,Ns.jsxs)("div",{className:"space-y-4",children:[(0,Ns.jsxs)("p",{className:"text-sm text-gray-600",children:["Enrolling face for worker: ",(0,Ns.jsx)("span",{className:"font-medium",children:w.name})]}),(0,Ns.jsxs)("div",{className:"bg-blue-50 p-4 rounded-md",children:[(0,Ns.jsx)("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Instructions"}),(0,Ns.jsxs)("ul",{className:"text-xs text-blue-700 list-disc pl-5 space-y-1",children:[(0,Ns.jsx)("li",{children:"Position the worker's face clearly in the camera frame"}),(0,Ns.jsx)("li",{children:"Capture multiple images from different angles for better recognition"}),(0,Ns.jsx)("li",{children:"Ensure good lighting and avoid glare or shadows on the face"})]})]}),E.text&&(0,Ns.jsx)("div",{className:"p-3 rounded-md ".concat("success"===E.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:E.text}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ns.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[B?(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)(Pa(),{audio:!1,ref:T,screenshotFormat:"image/jpeg",className:"w-full max-w-xs mx-auto rounded-md",videoConstraints:{width:320,height:240}}),(0,Ns.jsxs)("button",{type:"button",onClick:()=>{if(T.current&&j.length<5){const e=T.current.getScreenshot();if(e){const t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),s=new Uint8Array(r);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);const a=new Blob([r],{type:n}),i=new File([a],"capture-".concat(Date.now(),".jpeg"),{type:n});C(t=>[...t,{file:i,preview:e}])}}else F({type:"error",text:"You can only add up to 5 images."})},disabled:S||j.length>=5,className:"mt-4 w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[(0,Ns.jsx)(Oe,{className:"mr-2"})," Capture Image"]})]}):(0,Ns.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,Ns.jsx)(kt,{className:"text-4xl text-gray-400 mb-2"}),(0,Ns.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer text-sm font-medium text-blue-600 hover:text-blue-500",children:"Upload up to 5 images"}),(0,Ns.jsx)("input",{id:"file-upload",type:"file",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files){const t=Array.from(e.target.files).slice(0,5-j.length).map(e=>({file:e,preview:URL.createObjectURL(e)}));C(e=>[...e,...t])}},className:"sr-only",disabled:S||j.length>=5}),(0,Ns.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"or"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>k(!0),className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-500",children:"Use Camera"})]}),B&&(0,Ns.jsx)("button",{type:"button",onClick:()=>k(!1),className:"mt-2 text-sm text-gray-600 hover:text-gray-800",children:"Close Camera"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Preview (",j.length,"/5)"]}),j.length>0?(0,Ns.jsx)("div",{className:"grid grid-cols-3 gap-2",children:j.map((e,t)=>(0,Ns.jsxs)("div",{className:"relative group",children:[(0,Ns.jsx)("img",{src:e.preview,alt:"preview ".concat(t),className:"w-full h-20 object-cover rounded-md"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>(e=>{C(j.filter((t,n)=>n!==e))})(t),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2715"})]},t))}):(0,Ns.jsx)("div",{className:"flex items-center justify-center h-24 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"No images selected"})})]})]}),(0,Ns.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),w&&0!==j.length){_(!0),F({type:"",text:""});try{await cw.initialize();const e=[];for(const n of j)try{const t=await cw.loadImageFromDataURL(n.preview),r=await cw.detectFaceFromImage(t);r&&r.descriptor&&e.push(Array.from(r.descriptor))}catch(r){console.warn("Failed to detect face in one image:",r)}if(0===e.length)return F({type:"error",text:"No faces detected in the uploaded images. Please ensure faces are clearly visible."}),void _(!1);const t=new FormData;if(t.append("workerId",w._id),t.append("faceDescriptors",JSON.stringify(e)),j.forEach(e=>{t.append("faces",e.file)}),await ws.post("/admin/attendance/enroll-face",t),F({type:"success",text:"Face enrollment successful!"}),await O(),h&&h._id===w._id)try{const e=await ws.get("".concat(mw,"/").concat(h._id),{withCredentials:!0});A(e.data)}catch(i){console.error("Error fetching updated worker data:",i),A(e=>(0,$n.A)((0,$n.A)({},e),{},{faceImages:[...e.faceImages||[],...j]}))}try{const t=e.map(e=>new Float32Array(e));cw.addEnrolledFace(w._id,t)}catch(s){console.warn("Failed to update face recognition service:",s)}setTimeout(()=>{H()},2e3)}catch(i){var t,n;console.error("Error enrolling face:",i);const r=(null===(t=i.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||i.message||"An error occurred during enrollment.";F({type:"error",text:r})}finally{_(!1)}}else F({type:"error",text:"Please select a worker and provide at least one image."})},className:"mt-4",children:(0,Ns.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Ns.jsx)("button",{type:"button",onClick:H,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:S,children:"Cancel"}),(0,Ns.jsx)("button",{type:"submit",disabled:S||0===j.length,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:S?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Ns.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ns.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enrolling..."]}):(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(_t,{className:"mr-2"})," Enroll Face"]})})]})})]})}),I&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Ns.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4",children:[(0,Ns.jsxs)("div",{className:"text-center",children:[(0,Ns.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,Ns.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,Ns.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mt-4",children:"Delete Worker"}),(0,Ns.jsx)("div",{className:"mt-2",children:(0,Ns.jsxs)("p",{className:"text-sm text-gray-500",children:["Are you sure you want to delete ",(0,Ns.jsx)("span",{className:"font-semibold",children:null===L||void 0===L?void 0:L.name}),"? This action cannot be undone."]})})]}),(0,Ns.jsxs)("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense",children:[(0,Ns.jsx)("button",{type:"button",onClick:async()=>{if(L)try{await ws.delete("".concat(mw,"/").concat(L._id),{withCredentials:!0}),n(t.filter(e=>e._id!==L._id)),D(!1),P(null)}catch(e){o("Failed to delete worker."),console.error(e)}},className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:col-start-2 sm:text-sm",children:"Delete"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>{D(!1),P(null)},className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm",children:"Cancel"})]})]})})]})};const xw=function(e){let{onAttendanceRecorded:t}=e;const[n,s]=(0,r.useState)(""),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)("");return(0,r.useEffect)(()=>()=>{A&&clearTimeout(A)},[A]),(0,Ns.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-md",children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold mb-4 text-text-primary",children:"RFID Attendance"}),(0,Ns.jsx)("form",{onSubmit:async e=>{e.preventDefault(),i(""),l(""),d(null),h("");const t=n.trim();t?(x(t),m(!0)):l("Please enter an RFID.")},className:"mb-6",children:(0,Ns.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Scan RFID"}),(0,Ns.jsx)("input",{type:"text",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:n,onChange:e=>s(e.target.value),placeholder:"Enter RFID (e.g., AB0000)",autoFocus:!0})]}),(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,Ns.jsx)("button",{type:"submit",className:"flex-1 bg-primary text-white font-semibold py-2 px-4 rounded-lg hover:bg-primary-dark transition-colors",children:"Submit"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>{s(""),i(""),l(""),d(null),h(""),m(!1),x(""),A&&(clearTimeout(A),f(null))},className:"flex-1 bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-gray-600 transition-colors",children:"Clear"})]})]})}),p&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2",children:(0,Ns.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-xl max-w-md w-full",children:[(0,Ns.jsx)("h3",{className:"text-lg sm:text-xl font-semibold mb-4",children:"Confirm RFID Submission"}),(0,Ns.jsx)("p",{className:"mb-4 text-sm sm:text-base",children:"Are you sure you want to submit this RFID for attendance?"}),(0,Ns.jsxs)("p",{className:"mb-6 font-semibold",children:["RFID: ",g]}),(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[(0,Ns.jsx)("button",{onClick:()=>{m(!1),x("")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 text-sm sm:text-base",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:async()=>{m(!1);try{const e=await ws.post("/admin/attendance/rfid-attendance",{rfid:g},{withCredentials:!0});i(e.data.message),d({name:e.data.worker}),h(e.data.type),A&&clearTimeout(A);const n=setTimeout(()=>{s("")},3e3);f(n),t&&e.data.attendance&&setTimeout(()=>{t({workerName:e.data.worker,rfid:e.data.rfid,checkIn:e.data.attendance.checkIn,checkOut:e.data.attendance.checkOut,type:e.data.type,attendance:e.data.attendance})},100)}catch(c){var e,n,r,a,o;if(429===(null===(e=c.response)||void 0===e?void 0:e.status)&&null!==(n=c.response)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.message)l(c.response.data.message);else l((null===(a=c.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)||"Failed to process RFID attendance.");console.error(c)}},className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark text-sm sm:text-base",children:"Confirm"})]})]})}),a&&(0,Ns.jsx)("div",{className:"p-4 rounded-lg mb-4 ".concat("checkin"===u?"bg-green-500 text-white":"checkout"===u?"bg-red-500 text-white":"bg-green-100 text-green-800"),children:a}),o&&(0,Ns.jsx)("div",{className:"p-4 bg-red-100 text-red-800 rounded-lg mb-4",children:o}),c&&(0,Ns.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsx)("h4",{className:"font-semibold text-lg mb-2",children:"Attendance Recorded"}),(0,Ns.jsxs)("p",{className:"text-gray-700",children:["Worker: ",(0,Ns.jsx)("span",{className:"font-semibold",children:c.name})]}),(0,Ns.jsxs)("p",{className:"text-gray-700",children:["Action: ",(0,Ns.jsx)("span",{className:"font-semibold capitalize ".concat("checkin"===u?"text-green-500":"checkout"===u?"text-red-500":""),children:u})]}),(0,Ns.jsx)("p",{className:"text-gray-700 text-sm mt-2",children:"RFID input will clear automatically in 3 seconds..."})]}),(0,Ns.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[(0,Ns.jsx)("h4",{className:"font-semibold text-lg mb-2",children:"How to Use"}),(0,Ns.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-gray-700 text-sm",children:[(0,Ns.jsx)("li",{children:"Scan or enter the worker's RFID card"}),(0,Ns.jsx)("li",{children:'Click "Submit" to record attendance'}),(0,Ns.jsx)("li",{children:"Confirm the RFID value in the popup"}),(0,Ns.jsx)("li",{children:"The system will automatically determine if it's a check-in or check-out"}),(0,Ns.jsx)("li",{children:"If a worker missed an out-punch from the previous day, the system will automatically correct it"}),(0,Ns.jsx)("li",{children:"View the confirmation message to verify the action"}),(0,Ns.jsx)("li",{children:"RFID input will automatically clear after 3 seconds for the next worker"})]})]})]})},vw=e=>{var t;let{onAttendanceRecorded:n}=e;const s=(0,r.useRef)(null),[a,i]=(0,r.useState)({type:"info",text:"Initializing Camera..."}),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!0),[A,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(0),[g,x]=(0,r.useState)(!1),[v,b]=(0,r.useState)(""),[y,w]=(0,r.useState)(""),[N,j]=(0,r.useState)({}),[C,B]=(0,r.useState)(!1),k=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{try{console.log("Initializing face recognition service..."),await cw.initialize(),console.log("Face recognition service initialized successfully"),await cw._loadEnrolledFaces();const e=await ws.get("/admin/attendance/face-status");console.log("Service status response:",e.data),f(e.data),e.data.serviceReady?i({type:"success",text:"Face recognition service is ready!"}):i({type:"error",text:"Face recognition service unavailable. Use RFID attendance instead."})}catch(e){console.error("Failed to check service status:",e),f({serviceReady:!1}),i({type:"error",text:"Unable to initialize face recognition: ".concat(e.message)})}})()},[]),(0,r.useEffect)(()=>{const e=setInterval(()=>{const e=Date.now(),t={};Object.keys(N).forEach(n=>{N[n]>e&&(t[n]=N[n])}),j(t)},3e4);return()=>clearInterval(e)},[N]);const S=(0,r.useCallback)(async()=>{if(o||!s.current||!c)return;if(A&&!A.serviceReady)return void i({type:"error",text:"Face recognition service is not available. Please use RFID attendance."});const e=s.current.getScreenshot();if(!e)return i({type:"error",text:"Failed to capture image. Please try again."}),void setTimeout(()=>{l(!1),"success"!==a.type&&i({type:"info",text:"Scanning for face..."})},3e3);l(!0),i({type:"info",text:"Detecting face..."});try{await cw.initialize();const s=await cw.loadImageFromDataURL(e),o=await cw.recognizeFace(s);if(o.success){const e=Date.now();if(N[o.workerId]&&N[o.workerId]>e){const t=Math.ceil((N[o.workerId]-e)/1e3);return i({type:"error",text:"Please wait ".concat(t," seconds before marking attendance again. Attendance must alternate between IN and OUT punches.")}),void setTimeout(()=>{l(!1),i({type:"info",text:"Scanning for face..."})},3e3)}const s=await ws.post("/admin/attendance/recognize-face",{faceDescriptor:Array.from(o.descriptor||[]),workerId:o.workerId,confidence:o.confidence});var t,r;if(i({type:"success",text:s.data.message}),m(0),j(t=>(0,$n.A)((0,$n.A)({},t),{},{[o.workerId]:e+12e4})),w(s.data.worker),b(s.data.message),x(!0),B(!0),k.current&&clearInterval(k.current),setTimeout(()=>{x(!1),l(!1),i({type:"info",text:"Scanning for next face..."})},2e3),n)n({workerName:s.data.worker,rfid:"FACE",checkIn:null===(t=s.data.attendance)||void 0===t?void 0:t.checkIn,checkOut:null===(r=s.data.attendance)||void 0===r?void 0:r.checkOut,type:s.data.type,attendance:s.data.attendance,isYesterdayPunchOut:s.data.message.includes("completed yesterday's session")})}else i({type:"error",text:"Face not recognized. Please enroll first or try again."}),setTimeout(()=>{l(!1),"success"!==a.type&&i({type:"info",text:"Scanning for face..."})},3e3)}catch(v){var d,u,h,f,g;console.error("Face recognition error:",v);let e="Face recognition failed.";v.message.includes("No face detected")?e="No face detected. Please position your face clearly in the camera.":v.message.includes("not recognized")?e="Face not recognized. Please enroll first or try again.":(429===(null===(d=v.response)||void 0===d?void 0:d.status)&&null!==(u=v.response)&&void 0!==u&&null!==(h=u.data)&&void 0!==h&&h.message||null!==(f=v.response)&&void 0!==f&&null!==(g=f.data)&&void 0!==g&&g.message)&&(e=v.response.data.message),i({type:"error",text:e});const t=p+1;m(t);const n=3e3,r=Math.min(n*Math.pow(2,Math.min(t-1,4)),3e4);setTimeout(()=>{l(!1),"success"!==a.type&&i({type:"info",text:"Scanning for face..."})},r)}},[o,c,a.type,A,p,n,N]);(0,r.useEffect)(()=>(k.current&&clearInterval(k.current),c&&u&&!C&&(S(),k.current=setInterval(()=>{S()},2e3)),()=>{k.current&&clearInterval(k.current)}),[c,S,u,C]);const _=(()=>{let e=(0,Ns.jsx)(lt,{className:"animate-spin text-4xl text-gray-500"}),t="border-gray-400";return c&&(o?(e=(0,Ns.jsx)(lt,{className:"animate-spin text-4xl text-blue-500"}),t="border-blue-500"):"success"===a.type?(e=(0,Ns.jsx)(Ke,{className:"text-4xl text-green-500"}),t="border-green-500"):"error"===a.type?(e=(0,Ns.jsx)(Ct,{className:"text-4xl text-red-500"}),t="border-red-500"):(e=(0,Ns.jsx)(Oe,{className:"text-4xl text-gray-500"}),t="border-gray-400")),{icon:e,color:t}})();return(0,Ns.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-lg max-w-2xl mx-auto",children:[g&&(0,Ns.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-2",children:[(0,Ns.jsx)("div",{className:"absolute inset-0 bg-black opacity-50"}),(0,Ns.jsx)("div",{className:"relative bg-white rounded-lg p-4 sm:p-6 max-w-md w-full mx-2 shadow-xl",children:(0,Ns.jsxs)("div",{className:"text-center",children:[(0,Ns.jsx)(Ke,{className:"text-3xl sm:text-4xl text-green-500 mx-auto mb-3 sm:mb-4"}),(0,Ns.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2 sm:mb-4",children:"Attendance Recorded"}),(0,Ns.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mb-3 sm:mb-4",children:v}),(0,Ns.jsxs)("div",{className:"bg-gray-100 rounded-lg p-3 sm:p-4 mb-4",children:[(0,Ns.jsx)("p",{className:"font-medium text-gray-800 text-sm",children:"Worker:"}),(0,Ns.jsx)("p",{className:"text-base sm:text-lg font-bold text-blue-600",children:y})]})]})})]}),(0,Ns.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4 text-center",children:"Automatic Face Attendance"}),(0,Ns.jsx)("p",{className:"text-center text-gray-600 mb-4 sm:mb-6 text-sm sm:text-base",children:"Position your face in the camera frame. The system will automatically mark your attendance."}),(0,Ns.jsxs)("div",{className:"relative w-full aspect-square bg-gray-900 rounded-lg overflow-hidden border-4 ".concat(_.color," transition-colors duration-500 mb-4 sm:mb-6"),children:[C?(0,Ns.jsx)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center bg-gray-800",children:(0,Ns.jsx)(Ke,{className:"text-6xl text-green-500"})}):(0,Ns.jsx)(Pa(),{audio:!1,ref:s,screenshotFormat:"image/jpeg",videoConstraints:{facingMode:"user",width:720,height:720},onUserMedia:()=>{d(!0),i({type:"info",text:"Scanning for face..."}),u&&S()},className:"absolute top-0 left-0 w-full h-full object-cover"}),(0,Ns.jsx)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center pointer-events-none",children:(0,Ns.jsx)("div",{className:"w-3/4 h-3/4 border-4 border-dashed border-white rounded-full opacity-30"})})]}),(0,Ns.jsxs)("div",{className:"text-center p-3 sm:p-4 rounded-lg bg-gray-50",children:[A&&(0,Ns.jsxs)("div",{className:"mb-3 sm:mb-4 p-3 rounded-lg ".concat(A.serviceReady?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:[(0,Ns.jsx)("div",{className:"text-xs sm:text-sm font-medium",children:A.serviceReady?"\u2705 React Face Recognition: Ready (High Accuracy)":"\u26a0\ufe0f Face Recognition Service: Unavailable"}),A.currentMode&&(0,Ns.jsxs)("div",{className:"text-xs mt-1",children:[(0,Ns.jsx)("strong",{children:"Mode:"})," ",A.currentMode]}),A.features&&A.serviceReady&&(0,Ns.jsxs)("div",{className:"text-xs mt-1",children:[(0,Ns.jsx)("strong",{children:"Features:"})," Real-time detection, Neural networks, Browser-based"]}),!A.serviceReady&&A.alternatives&&(0,Ns.jsxs)("div",{className:"text-xs mt-1",children:["Available alternatives: ",A.alternatives.map(e=>e.name).join(", ")]})]}),C?(0,Ns.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Ns.jsx)("p",{className:"text-green-600 font-medium mb-2",children:"Attendance marked successfully!"}),(0,Ns.jsx)("button",{onClick:()=>{B(!1),d(!1),i({type:"info",text:"Restarting Camera..."})},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Mark Another Attendance"})]}):(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)("p",{className:"text-gray-600 text-sm sm:text-base mb-2",children:"Position your face in the camera frame. The system will automatically mark your attendance."}),(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[(0,Ns.jsx)("div",{className:"flex items-center justify-center",children:_.icon}),(0,Ns.jsx)("span",{className:"text-sm sm:text-base font-medium text-gray-700",children:a.text})]}),(0,Ns.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,Ns.jsxs)("label",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:[(0,Ns.jsx)("input",{type:"checkbox",checked:u,onChange:e=>h(e.target.checked),disabled:A&&!A.serviceReady,className:"w-4 h-4"}),"Enable auto-scan (every 2 seconds)"]}),A&&!A.serviceReady&&(0,Ns.jsxs)("div",{className:"mt-4 p-3 sm:p-4 bg-blue-50 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-xs sm:text-sm font-medium text-blue-800 mb-2 sm:mb-3",children:"Face Recognition Setup Required:"}),A.setupInstructions&&(0,Ns.jsxs)("div",{className:"text-xs text-blue-700 mb-2 sm:mb-3",children:[(0,Ns.jsxs)("div",{className:"mb-1 sm:mb-2",children:[(0,Ns.jsx)("strong",{children:"Missing:"})," ",null===(t=A.missingDependencies)||void 0===t?void 0:t.join(", ")]}),(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsxs)("div",{children:["1. ",A.setupInstructions.step1]}),(0,Ns.jsxs)("div",{children:["2. ",A.setupInstructions.step2]}),(0,Ns.jsxs)("div",{children:["3. ",A.setupInstructions.step3]}),A.setupInstructions.note&&(0,Ns.jsxs)("div",{className:"text-yellow-700 mt-1 sm:mt-2 text-xs",children:["\u26a0\ufe0f ",A.setupInstructions.note]})]})]}),(0,Ns.jsxs)("div",{className:"text-xs text-blue-600 border-t border-blue-200 pt-2",children:[(0,Ns.jsx)("strong",{children:"Alternative Methods (Available Now):"}),(0,Ns.jsx)("br",{}),"\u2022 Use RFID card scanner for quick check-in/out",(0,Ns.jsx)("br",{}),"\u2022 Manual attendance tracking is available",(0,Ns.jsx)("br",{}),"\u2022 Contact admin to configure face recognition"]})]})]})]})]})]})};var bw={version:"0.18.5"},yw=1200,ww=1252,Nw=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],jw={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Cw=function(e){-1!=Nw.indexOf(e)&&(ww=jw[0]=e)};var Bw=function(e){yw=e,Cw(e)};function kw(){Bw(1200),Cw(1252)}function Sw(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var _w,Ew=function(e){return String.fromCharCode(e)},Fw=function(e){return String.fromCharCode(e)};var Tw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Iw(e){for(var t="",n=0,r=0,s=0,a=0,i=0,o=0,l=0,c=0;c<e.length;)a=(n=e.charCodeAt(c++))>>2,i=(3&n)<<4|(r=e.charCodeAt(c++))>>4,o=(15&r)<<2|(s=e.charCodeAt(c++))>>6,l=63&s,isNaN(r)?o=l=64:isNaN(s)&&(l=64),t+=Tw.charAt(a)+Tw.charAt(i)+Tw.charAt(o)+Tw.charAt(l);return t}function Dw(e){var t="",n=0,r=0,s=0,a=0,i=0,o=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)n=Tw.indexOf(e.charAt(l++))<<2|(a=Tw.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(n),r=(15&a)<<4|(i=Tw.indexOf(e.charAt(l++)))>>2,64!==i&&(t+=String.fromCharCode(r)),s=(3&i)<<6|(o=Tw.indexOf(e.charAt(l++))),64!==o&&(t+=String.fromCharCode(s));return t}var Lw=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),Pw=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(Ua){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Rw(e){return Lw?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function Uw(e){return Lw?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var Ow=function(e){return Lw?Pw(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function Mw(e){if("undefined"===typeof ArrayBuffer)return Ow(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}function Qw(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}var Hw=Lw?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:Pw(e)}))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),s=0;for(t=0,n=0;t<e.length;n+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)r.set(e[t],n);else{if("string"==typeof e[t])throw"wtf";r.set(new Uint8Array(e[t]),n)}return r}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))};var zw=/\u0000/g,Ww=/[\u0001-\u0006]/g;function Vw(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function Kw(e,t){var n=""+e;return n.length>=t?n:sj("0",t-n.length)+n}function Gw(e,t){var n=""+e;return n.length>=t?n:sj(" ",t-n.length)+n}function qw(e,t){var n=""+e;return n.length>=t?n:n+sj(" ",t-n.length)}var Xw=Math.pow(2,32);function Yw(e,t){return e>Xw||e<-Xw?function(e,t){var n=""+Math.round(e);return n.length>=t?n:sj("0",t-n.length)+n}(e,t):function(e,t){var n=""+e;return n.length>=t?n:sj("0",t-n.length)+n}(Math.round(e),t)}function Jw(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var Zw=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],$w=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var eN={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},tN={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},nN={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function rN(e,t,n){for(var r=e<0?-1:1,s=e*r,a=0,i=1,o=0,l=1,c=0,d=0,u=Math.floor(s);c<t&&(o=(u=Math.floor(s))*i+a,d=u*c+l,!(s-u<5e-8));)s=1/(s-u),a=i,i=o,l=c,c=d;if(d>t&&(c>t?(d=l,o=a):(d=c,o=i)),!n)return[0,r*o,d];var h=Math.floor(r*o/d);return[h,r*o-h*d,d]}function sN(e,t,n){if(e>2958465||e<0)return null;var r=0|e,s=Math.floor(86400*(e-r)),a=0,i=[],o={D:r,T:s,u:86400*(e-r)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(r+=1462),o.u>.9999&&(o.u=0,86400==++s&&(o.T=s=0,++r,++o.D)),60===r)i=n?[1317,10,29]:[1900,2,29],a=3;else if(0===r)i=n?[1317,8,29]:[1900,1,0],a=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),r<60&&(a=(a+6)%7),n&&(a=function(e,t){t[0]-=581;var n=e.getDay();e<60&&(n=(n+6)%7);return n}(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var aN=new Date(1899,11,31,0,0,0),iN=aN.getTime(),oN=new Date(1900,2,1,0,0,0);function lN(e,t){var n=e.getTime();return t?n-=1262304e5:e>=oN&&(n+=864e5),(n-(iN+6e4*(e.getTimezoneOffset()-aN.getTimezoneOffset())))/864e5}function cN(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function dN(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,n=cN(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10)).length<=t?n:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function(e){var t=cN(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),cN(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function uN(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):dN(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return TN(14,lN(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function hN(e,t,n,r){var s,a="",i=0,o=0,l=n.y,c=0;switch(e){case 98:l=n.y+543;case 121:switch(t.length){case 1:case 2:s=l%100,c=2;break;default:s=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:s=n.m,c=t.length;break;case 3:return $w[n.m-1][1];case 5:return $w[n.m-1][0];default:return $w[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:s=n.d,c=t.length;break;case 3:return Zw[n.q][0];default:return Zw[n.q][1]}break;case 104:switch(t.length){case 1:case 2:s=1+(n.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:s=n.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:s=n.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==n.u||"s"!=t&&"ss"!=t?(o=r>=2?3===r?1e3:100:1===r?10:1,(i=Math.round(o*(n.S+n.u)))>=60*o&&(i=0),"s"===t?0===i?"0":""+i/o:(a=Kw(i,2+r),"ss"===t?a.substr(0,2):"."+a.substr(2,t.length-1))):Kw(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":s=24*n.D+n.H;break;case"[m]":case"[mm]":s=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":s=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:s=l,c=1}return c>0?Kw(s,c):""}function AN(e){if(e.length<=3)return e;for(var t=e.length%3,n=e.substr(0,t);t!=e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}var fN=/%/g;function pN(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+pN(e,-t);var s=e.indexOf(".");-1===s&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),-1===(n=(t/Math.pow(10,a)).toPrecision(r+1+(s+a)%s)).indexOf("e")){var i=Math.floor(Math.log(t)*Math.LOG10E);for(-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a);"0."===n.substr(0,2);)n=(n=n.charAt(0)+n.substr(2,s)+"."+n.substr(2+s)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(s+a)%s)+"."+r.substr(a)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var mN=/# (\?+)( ?)\/( ?)(\d+)/;var gN=/^#*0*\.([0#]+)/,xN=/\).*[0#]/,vN=/\(###\) ###\\?-####/;function bN(e){for(var t,n="",r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function yN(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function wN(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function NN(e,t,n){if(40===e.charCodeAt(0)&&!t.match(xN)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?NN("n",r,n):"("+NN("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return BN(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(fN,""),s=t.length-r.length;return BN(e,r,n*Math.pow(10,2*s))+sj("%",s)}(e,t,n);if(-1!==t.indexOf("E"))return pN(t,n);if(36===t.charCodeAt(0))return"$"+NN(e,t.substr(" "==t.charAt(1)?2:1),n);var s,a,i,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+Yw(l,t.length);if(t.match(/^[#?]+$/))return"0"===(s=Yw(n,0))&&(s=""),s.length>t.length?s:bN(t.substr(0,t.length-s.length))+s;if(a=t.match(mN))return function(e,t,n){var r=parseInt(e[4],10),s=Math.round(t*r),a=Math.floor(s/r),i=s-a*r,o=r;return n+(0===a?"":""+a)+" "+(0===i?sj(" ",e[1].length+1+e[4].length):Gw(i,e[1].length)+e[2]+"/"+e[3]+Kw(o,e[4].length))}(a,l,c);if(t.match(/^#+0+$/))return c+Yw(l,t.length-t.indexOf("0"));if(a=t.match(gN))return s=yN(n,a[1].length).replace(/^([^\.]+)$/,"$1."+bN(a[1])).replace(/\.$/,"."+bN(a[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+sj("0",bN(a[1]).length-t.length)}),-1!==t.indexOf("0.")?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+yN(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+AN(Yw(l,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+NN(e,t,-n):AN(""+(Math.floor(n)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(n,a[1].length)))+"."+Kw(wN(n,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return NN(e,t.replace(/^#,#*,/,""),n);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Vw(NN(e,t.replace(/[\\-]/g,""),n)),i=0,Vw(Vw(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return i<s.length?s.charAt(i++):"0"===e?"0":""}));if(t.match(vN))return"("+(s=NN(e,"##########",n)).substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=rN(l,Math.pow(10,i)-1,!1),s=""+c," "==(d=BN("n",a[1],o[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],(d=qw(o[2],i)).length<a[4].length&&(d=bN(a[4].substr(a[4].length-d.length))+d),s+=d;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),c+((o=rN(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?Gw(o[1],i)+a[2]+"/"+a[3]+qw(o[2],i):sj(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=Yw(n,0),t.length<=s.length?s:bN(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var u=t.indexOf(".")-i,h=t.length-s.length-u;return bN(t.substr(0,u)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return i=wN(n,a[1].length),n<0?"-"+NN(e,t,-n):AN(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?Kw(0,3-e.length):"")+e})+"."+Kw(i,a[1].length);switch(t){case"###,##0.00":return NN(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var A=AN(Yw(l,0));return"0"!==A?c+A:"";case"###,###.00":return NN(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return NN(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function jN(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+jN(e,-t);var s=e.indexOf(".");-1===s&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),!(n=(t/Math.pow(10,a)).toPrecision(r+1+(s+a)%s)).match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+a):n+="E+"+(i-a),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(s+a)%s)+"."+r.substr(a)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function CN(e,t,n){if(40===e.charCodeAt(0)&&!t.match(xN)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?CN("n",r,n):"("+CN("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return BN(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(fN,""),s=t.length-r.length;return BN(e,r,n*Math.pow(10,2*s))+sj("%",s)}(e,t,n);if(-1!==t.indexOf("E"))return jN(t,n);if(36===t.charCodeAt(0))return"$"+CN(e,t.substr(" "==t.charAt(1)?2:1),n);var s,a,i,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+Kw(l,t.length);if(t.match(/^[#?]+$/))return s=""+n,0===n&&(s=""),s.length>t.length?s:bN(t.substr(0,t.length-s.length))+s;if(a=t.match(mN))return function(e,t,n){return n+(0===t?"":""+t)+sj(" ",e[1].length+2+e[4].length)}(a,l,c);if(t.match(/^#+0+$/))return c+Kw(l,t.length-t.indexOf("0"));if(a=t.match(gN))return s=(s=(""+n).replace(/^([^\.]+)$/,"$1."+bN(a[1])).replace(/\.$/,"."+bN(a[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+sj("0",bN(a[1]).length-t.length)}),-1!==t.indexOf("0.")?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+AN(""+l);if(a=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+CN(e,t,-n):AN(""+n)+"."+sj("0",a[1].length);if(a=t.match(/^#,#*,#0/))return CN(e,t.replace(/^#,#*,/,""),n);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Vw(CN(e,t.replace(/[\\-]/g,""),n)),i=0,Vw(Vw(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return i<s.length?s.charAt(i++):"0"===e?"0":""}));if(t.match(vN))return"("+(s=CN(e,"##########",n)).substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=rN(l,Math.pow(10,i)-1,!1),s=""+c," "==(d=BN("n",a[1],o[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],(d=qw(o[2],i)).length<a[4].length&&(d=bN(a[4].substr(a[4].length-d.length))+d),s+=d;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),c+((o=rN(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?Gw(o[1],i)+a[2]+"/"+a[3]+qw(o[2],i):sj(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=""+n,t.length<=s.length?s:bN(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var u=t.indexOf(".")-i,h=t.length-s.length-u;return bN(t.substr(0,u)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+CN(e,t,-n):AN(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?Kw(0,3-e.length):"")+e})+"."+Kw(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var A=AN(""+l);return"0"!==A?c+A:"";default:if(t.match(/\.[0#?]*$/))return CN(e,t.slice(0,t.lastIndexOf(".")),n)+bN(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function BN(e,t,n){return(0|n)===n?CN(e,t,n):NN(e,t,n)}var kN=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function SN(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":Jw(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=n;"]"!==e.charAt(t++)&&t<e.length;)r+=e.charAt(t);if(r.match(kN))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var _N=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function EN(e,t){if(null==t)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function FN(e,t){var n=function(e){for(var t=[],n=!1,r=0,s=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(s,r-s),s=r+1}if(t[t.length]=e.substr(s),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}(e),r=n.length,s=n[r-1].indexOf("@");if(r<4&&s>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!==typeof t)return[4,4===n.length||s>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=s>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=s>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=s>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}var a=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,a];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var i=n[0].match(_N),o=n[1].match(_N);return EN(t,i)?[r,n[0]]:EN(t,o)?[r,n[1]]:[r,n[null!=i&&null!=o?2:1]]}return[r,a]}function TN(e,t,n){null==n&&(n={});var r="";switch(typeof e){case"string":r="m/d/yy"==e&&n.dateNF?n.dateNF:e;break;case"number":null==(r=14==e&&n.dateNF?n.dateNF:(null!=n.table?n.table:eN)[e])&&(r=n.table&&n.table[tN[e]]||eN[tN[e]]),null==r&&(r=nN[e]||"General")}if(Jw(r,0))return uN(t,n);t instanceof Date&&(t=lN(t,n.date1904));var s=FN(r,t);if(Jw(s[1]))return uN(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,n,r){for(var s,a,i,o=[],l="",c=0,d="",u="t",h="H";c<e.length;)switch(d=e.charAt(c)){case"G":if(!Jw(e,c))throw new Error("unrecognized character "+d+" in "+e);o[o.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(i=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(i);o[o.length]={t:"t",v:l},++c;break;case"\\":var A=e.charAt(++c),f="("===A||")"===A?A:"t";o[o.length]={t:f,v:A},++c;break;case"_":o[o.length]={t:"t",v:" "},c+=2;break;case"@":o[o.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==s&&null==(s=sN(t,n,"2"===e.charAt(c+1))))return"";o[o.length]={t:"X",v:e.substr(c,2)},u=d,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==s&&null==(s=sN(t,n)))return"";for(l=d;++c<e.length&&e.charAt(c).toLowerCase()===d;)l+=d;"m"===d&&"h"===u.toLowerCase()&&(d="M"),"h"===d&&(d=h),o[o.length]={t:d,v:l},u=d;break;case"A":case"a":case"\u4e0a":var p={t:d,v:d};if(null==s&&(s=sN(t,n)),"A/P"===e.substr(c,3).toUpperCase()?(null!=s&&(p.v=s.H>=12?"P":"A"),p.t="T",h="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=s&&(p.v=s.H>=12?"PM":"AM"),p.t="T",c+=5,h="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=s&&(p.v=s.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),p.t="T",c+=5,h="h"):(p.t="t",++c),null==s&&"T"===p.t)return"";o[o.length]=p,u=d;break;case"[":for(l=d;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(kN)){if(null==s&&null==(s=sN(t,n)))return"";o[o.length]={t:"Z",v:l.toLowerCase()},u=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",SN(e)||(o[o.length]={t:"t",v:l}));break;case".":if(null!=s){for(l=d;++c<e.length&&"0"===(d=e.charAt(c));)l+=d;o[o.length]={t:"s",v:l};break}case"0":case"#":for(l=d;++c<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(c))>-1;)l+=d;o[o.length]={t:"n",v:l};break;case"?":for(l=d;e.charAt(++c)===d;)l+=d;o[o.length]={t:d,v:l},u=d;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":o[o.length]={t:1===r?"t":d,v:d},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=d;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);o[o.length]={t:"D",v:l};break;case" ":o[o.length]={t:d,v:d},++c;break;case"$":o[o.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(d))throw new Error("unrecognized character "+d+" in "+e);o[o.length]={t:"t",v:d},++c}var m,g=0,x=0;for(c=o.length-1,u="t";c>=0;--c)switch(o[c].t){case"h":case"H":o[c].t=h,u="h",g<1&&(g=1);break;case"s":(m=o[c].v.match(/\.0+$/))&&(x=Math.max(x,m[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":u=o[c].t;break;case"m":"s"===u&&(o[c].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&o[c].v.match(/[Hh]/)&&(g=1),g<2&&o[c].v.match(/[Mm]/)&&(g=2),g<3&&o[c].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:s.u>=.5&&(s.u=0,++s.S),s.S>=60&&(s.S=0,++s.M),s.M>=60&&(s.M=0,++s.H);break;case 2:s.u>=.5&&(s.u=0,++s.S),s.S>=60&&(s.S=0,++s.M)}var v,b="";for(c=0;c<o.length;++c)switch(o[c].t){case"t":case"T":case" ":case"D":break;case"X":o[c].v="",o[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[c].v=hN(o[c].t.charCodeAt(0),o[c].v,s,x),o[c].t="t";break;case"n":case"?":for(v=c+1;null!=o[v]&&("?"===(d=o[v].t)||"D"===d||(" "===d||"t"===d)&&null!=o[v+1]&&("?"===o[v+1].t||"t"===o[v+1].t&&"/"===o[v+1].v)||"("===o[c].t&&(" "===d||"n"===d||")"===d)||"t"===d&&("/"===o[v].v||" "===o[v].v&&null!=o[v+1]&&"?"==o[v+1].t));)o[c].v+=o[v].v,o[v]={v:"",t:";"},++v;b+=o[c].v,c=v-1;break;case"G":o[c].t="t",o[c].v=uN(t,n)}var y,w,N="";if(b.length>0){40==b.charCodeAt(0)?(y=t<0&&45===b.charCodeAt(0)?-t:t,w=BN("n",b,y)):(w=BN("n",b,y=t<0&&r>1?-t:t),y<0&&o[0]&&"t"==o[0].t&&(w=w.substr(1),o[0].v="-"+o[0].v)),v=w.length-1;var j=o.length;for(c=0;c<o.length;++c)if(null!=o[c]&&"t"!=o[c].t&&o[c].v.indexOf(".")>-1){j=c;break}var C=o.length;if(j===o.length&&-1===w.indexOf("E")){for(c=o.length-1;c>=0;--c)null!=o[c]&&-1!=="n?".indexOf(o[c].t)&&(v>=o[c].v.length-1?(v-=o[c].v.length,o[c].v=w.substr(v+1,o[c].v.length)):v<0?o[c].v="":(o[c].v=w.substr(0,v+1),v=-1),o[c].t="t",C=c);v>=0&&C<o.length&&(o[C].v=w.substr(0,v+1)+o[C].v)}else if(j!==o.length&&-1===w.indexOf("E")){for(v=w.indexOf(".")-1,c=j;c>=0;--c)if(null!=o[c]&&-1!=="n?".indexOf(o[c].t)){for(a=o[c].v.indexOf(".")>-1&&c===j?o[c].v.indexOf(".")-1:o[c].v.length-1,N=o[c].v.substr(a+1);a>=0;--a)v>=0&&("0"===o[c].v.charAt(a)||"#"===o[c].v.charAt(a))&&(N=w.charAt(v--)+N);o[c].v=N,o[c].t="t",C=c}for(v>=0&&C<o.length&&(o[C].v=w.substr(0,v+1)+o[C].v),v=w.indexOf(".")+1,c=j;c<o.length;++c)if(null!=o[c]&&(-1!=="n?(".indexOf(o[c].t)||c===j)){for(a=o[c].v.indexOf(".")>-1&&c===j?o[c].v.indexOf(".")+1:0,N=o[c].v.substr(0,a);a<o[c].v.length;++a)v<w.length&&(N+=w.charAt(v++));o[c].v=N,o[c].t="t",C=c}}}for(c=0;c<o.length;++c)null!=o[c]&&"n?".indexOf(o[c].t)>-1&&(y=r>1&&t<0&&c>0&&"-"===o[c-1].v?-t:t,o[c].v=BN(o[c].t,o[c].v,y),o[c].t="t");var B="";for(c=0;c!==o.length;++c)null!=o[c]&&(B+=o[c].v);return B}(s[1],t,n,s[0])}function IN(e,t){if("number"!=typeof t){t=+t||-1;for(var n=0;n<392;++n)if(void 0!=eN[n]){if(eN[n]==e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return eN[t]=e,t}function DN(e){for(var t=0;392!=t;++t)void 0!==e[t]&&IN(e[t],t)}function LN(){eN=function(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',e}()}var PN=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var RN=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var n=function(e){var t=0,n=0,r=0,s="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)s[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=s[t]=n>>>8^e[255&n];var a=[];for(r=1;16!=r;++r)a[r-1]="undefined"!==typeof Int32Array?s.subarray(256*r,256*r+256):s.slice(256*r,256*r+256);return a}(t),r=n[0],s=n[1],a=n[2],i=n[3],o=n[4],l=n[5],c=n[6],d=n[7],u=n[8],h=n[9],A=n[10],f=n[11],p=n[12],m=n[13],g=n[14];return e.table=t,e.bstr=function(e,n){for(var r=-1^n,s=0,a=e.length;s<a;)r=r>>>8^t[255&(r^e.charCodeAt(s++))];return~r},e.buf=function(e,n){for(var x=-1^n,v=e.length-15,b=0;b<v;)x=g[e[b++]^255&x]^m[e[b++]^x>>8&255]^p[e[b++]^x>>16&255]^f[e[b++]^x>>>24]^A[e[b++]]^h[e[b++]]^u[e[b++]]^d[e[b++]]^c[e[b++]]^l[e[b++]]^o[e[b++]]^i[e[b++]]^a[e[b++]]^s[e[b++]]^r[e[b++]]^t[e[b++]];for(v+=15;b<v;)x=x>>>8^t[255&(x^e[b++])];return~x},e.str=function(e,n){for(var r=-1^n,s=0,a=e.length,i=0,o=0;s<a;)(i=e.charCodeAt(s++))<128?r=r>>>8^t[255&(r^i)]:i<2048?r=(r=r>>>8^t[255&(r^(192|i>>6&31))])>>>8^t[255&(r^(128|63&i))]:i>=55296&&i<57344?(i=64+(1023&i),o=1023&e.charCodeAt(s++),r=(r=(r=(r=r>>>8^t[255&(r^(240|i>>8&7))])>>>8^t[255&(r^(128|i>>2&63))])>>>8^t[255&(r^(128|o>>6&15|(3&i)<<4))])>>>8^t[255&(r^(128|63&o))]):r=(r=(r=r>>>8^t[255&(r^(224|i>>12&15))])>>>8^t[255&(r^(128|i>>6&63))])>>>8^t[255&(r^(128|63&i))];return~r},e}(),UN=function(){var e,t={};function n(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function r(e){if("/"==e.charAt(e.length-1))return r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function s(e,t){"string"===typeof t&&(t=new Date(t));var n=t.getHours();n=(n=n<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,n);var r=t.getFullYear()-1980;r=(r=r<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,r)}function a(e){IC(e,0);for(var t={},n=0;e.l<=e.length-4;){var r=e.read_shift(2),s=e.read_shift(2),a=e.l+s,i={};if(21589===r)1&(n=e.read_shift(1))&&(i.mtime=e.read_shift(4)),s>5&&(2&n&&(i.atime=e.read_shift(4)),4&n&&(i.ctime=e.read_shift(4))),i.mtime&&(i.mt=new Date(1e3*i.mtime));e.l=a,t[r]=i}return t}function i(){return e||(e={})}function o(e,t){if(80==e[0]&&75==e[1])return re(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=w(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=t&&t.root||"",r=(Lw&&Buffer.isBuffer(e)?e.toString("binary"):w(e)).split("\r\n"),s=0,a="";for(s=0;s<r.length;++s)if(a=r[s],/^Content-Location:/i.test(a)&&(a=a.slice(a.indexOf("file")),n||(n=a.slice(0,a.lastIndexOf("/")+1)),a.slice(0,n.length)!=n))for(;n.length>0&&(n=(n=n.slice(0,n.length-1)).slice(0,n.lastIndexOf("/")+1),a.slice(0,n.length)!=n););var i=(r[1]||"").match(/boundary="(.*?)"/);if(!i)throw new Error("MAD cannot find boundary");var o="--"+(i[1]||""),l=[],c=[],d={FileIndex:l,FullPaths:c};h(d);var u,A=0;for(s=0;s<r.length;++s){var f=r[s];f!==o&&f!==o+"--"||(A++&&ce(d,r.slice(u,s),n),u=s)}return d}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var n,r,s,a,i,o,A=512,f=[],p=e.slice(0,512);IC(p,0);var m=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(x,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(p);switch(n=m[0]){case 3:A=512;break;case 4:A=4096;break;case 0:if(0==m[1])return re(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==A&&IC(p=e.slice(0,A),28);var v=e.slice(0,A);!function(e,t){var n=9;switch(e.l+=2,n=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(p,n);var b=p.read_shift(4,"i");if(3===n&&0!==b)throw new Error("# Directory Sectors: Expected 0 saw "+b);p.l+=4,a=p.read_shift(4,"i"),p.l+=4,p.chk("00100000","Mini Stream Cutoff Size: "),i=p.read_shift(4,"i"),r=p.read_shift(4,"i"),o=p.read_shift(4,"i"),s=p.read_shift(4,"i");for(var y=-1,N=0;N<109&&!((y=p.read_shift(4,"i"))<0);++N)f[N]=y;var j=function(e,t){for(var n=Math.ceil(e.length/t)-1,r=[],s=1;s<n;++s)r[s-1]=e.slice(s*t,(s+1)*t);return r[n-1]=e.slice(n*t),r}(e,A);c(o,s,j,A,f);var C=function(e,t,n,r){var s=e.length,a=[],i=[],o=[],l=[],c=r-1,d=0,u=0,h=0,A=0;for(d=0;d<s;++d)if(o=[],(h=d+t)>=s&&(h-=s),!i[h]){l=[];var f=[];for(u=h;u>=0;){f[u]=!0,i[u]=!0,o[o.length]=u,l.push(e[u]);var p=n[Math.floor(4*u/r)];if(r<4+(A=4*u&c))throw new Error("FAT boundary crossed: "+u+" 4 "+r);if(!e[p])break;if(f[u=CC(e[p],A)])break}a[h]={nodes:o,data:eC([l])}}return a}(j,a,f,A);C[a].name="!Directory",r>0&&i!==g&&(C[i].name="!MiniFAT"),C[f[0]].name="!FAT",C.fat_addrs=f,C.ssz=A;var B=[],k=[],S=[];!function(e,t,n,r,s,a,i,o){for(var c,h=0,A=r.length?2:0,f=t[e].data,p=0,m=0;p<f.length;p+=128){var x=f.slice(p,p+128);IC(x,64),m=x.read_shift(2),c=nC(x,0,m-A),r.push(c);var v={name:c,type:x.read_shift(1),color:x.read_shift(1),L:x.read_shift(4,"i"),R:x.read_shift(4,"i"),C:x.read_shift(4,"i"),clsid:x.read_shift(16),state:x.read_shift(4,"i"),start:0,size:0};0!==x.read_shift(2)+x.read_shift(2)+x.read_shift(2)+x.read_shift(2)&&(v.ct=u(x,x.l-8)),0!==x.read_shift(2)+x.read_shift(2)+x.read_shift(2)+x.read_shift(2)&&(v.mt=u(x,x.l-8)),v.start=x.read_shift(4,"i"),v.size=x.read_shift(4,"i"),v.size<0&&v.start<0&&(v.size=v.type=0,v.start=g,v.name=""),5===v.type?(h=v.start,s>0&&h!==g&&(t[h].name="!StreamData")):v.size>=4096?(v.storage="fat",void 0===t[v.start]&&(t[v.start]=d(n,v.start,t.fat_addrs,t.ssz)),t[v.start].name=v.name,v.content=t[v.start].data.slice(0,v.size)):(v.storage="minifat",v.size<0?v.size=0:h!==g&&v.start!==g&&t[h]&&(v.content=l(v,t[h].data,(t[o]||{}).data))),v.content&&IC(v.content,0),a[c]=v,i.push(v)}}(a,C,j,B,r,{},k,i),function(e,t,n){for(var r=0,s=0,a=0,i=0,o=0,l=n.length,c=[],d=[];r<l;++r)c[r]=d[r]=r,t[r]=n[r];for(;o<d.length;++o)s=e[r=d[o]].L,a=e[r].R,i=e[r].C,c[r]===r&&(-1!==s&&c[s]!==s&&(c[r]=c[s]),-1!==a&&c[a]!==a&&(c[r]=c[a])),-1!==i&&(c[i]=r),-1!==s&&r!=c[r]&&(c[s]=c[r],d.lastIndexOf(s)<o&&d.push(s)),-1!==a&&r!=c[r]&&(c[a]=c[r],d.lastIndexOf(a)<o&&d.push(a));for(r=1;r<l;++r)c[r]===r&&(-1!==a&&c[a]!==a?c[r]=c[a]:-1!==s&&c[s]!==s&&(c[r]=c[s]));for(r=1;r<l;++r)if(0!==e[r].type){if((o=r)!=c[o])do{o=c[o],t[r]=t[o]+"/"+t[r]}while(0!==o&&-1!==c[o]&&o!=c[o]);c[r]=-1}for(t[0]+="/",r=1;r<l;++r)2!==e[r].type&&(t[r]+="/")}(k,S,B),B.shift();var _={FileIndex:k,FullPaths:S};return t&&t.raw&&(_.raw={header:v,sectors:j}),_}function l(e,t,n){for(var r=e.start,s=e.size,a=[],i=r;n&&s>0&&i>=0;)a.push(t.slice(i*m,i*m+m)),s-=m,i=CC(n,4*i);return 0===a.length?LC(0):Hw(a).slice(0,e.size)}function c(e,t,n,r,s){var a=g;if(e===g){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var i=n[e],o=(r>>>2)-1;if(!i)return;for(var l=0;l<o&&(a=CC(i,4*l))!==g;++l)s.push(a);c(CC(i,r-4),t-1,n,r,s)}}function d(e,t,n,r,s){var a=[],i=[];s||(s=[]);var o=r-1,l=0,c=0;for(l=t;l>=0;){s[l]=!0,a[a.length]=l,i.push(e[l]);var d=n[Math.floor(4*l/r)];if(r<4+(c=4*l&o))throw new Error("FAT boundary crossed: "+l+" 4 "+r);if(!e[d])break;l=CC(e[d],c)}return{nodes:a,data:eC([i])}}function u(e,t){return new Date(1e3*(jC(e,t+4)/1e7*Math.pow(2,32)+jC(e,t)/1e7-11644473600))}function h(e,t){var n=t||{},r=n.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=r+"/",e.FileIndex[0]={name:r,type:5}),n.CLSID&&(e.FileIndex[0].clsid=n.CLSID),function(e){var t="\x01Sh33tJ5";if(UN.find(e,"/"+t))return;var n=LC(4);n[0]=55,n[1]=n[3]=50,n[2]=54,e.FileIndex.push({name:t,type:2,content:n,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),A(e)}(e)}function A(e,t){h(e);for(var s=!1,a=!1,i=e.FullPaths.length-1;i>=0;--i){var o=e.FileIndex[i];switch(o.type){case 0:a?s=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:a=!0,isNaN(o.R*o.L*o.C)&&(s=!0),o.R>-1&&o.L>-1&&o.R==o.L&&(s=!0);break;default:s=!0}}if(s||t){var l=new Date(1987,1,19),c=0,d=Object.create?Object.create(null):{},u=[];for(i=0;i<e.FullPaths.length;++i)d[e.FullPaths[i]]=!0,0!==e.FileIndex[i].type&&u.push([e.FullPaths[i],e.FileIndex[i]]);for(i=0;i<u.length;++i){var A=n(u[i][0]);(a=d[A])||(u.push([A,{name:r(A).replace("/",""),type:1,clsid:b,ct:l,mt:l,content:null}]),d[A]=!0)}for(u.sort(function(e,t){return function(e,t){for(var n=e.split("/"),r=t.split("/"),s=0,a=0,i=Math.min(n.length,r.length);s<i;++s){if(a=n[s].length-r[s].length)return a;if(n[s]!=r[s])return n[s]<r[s]?-1:1}return n.length-r.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],i=0;i<u.length;++i)e.FullPaths[i]=u[i][0],e.FileIndex[i]=u[i][1];for(i=0;i<u.length;++i){var f=e.FileIndex[i],p=e.FullPaths[i];if(f.name=r(p).replace("/",""),f.L=f.R=f.C=-(f.color=1),f.size=f.content?f.content.length:0,f.start=0,f.clsid=f.clsid||b,0===i)f.C=u.length>1?1:-1,f.size=0,f.type=5;else if("/"==p.slice(-1)){for(c=i+1;c<u.length&&n(e.FullPaths[c])!=p;++c);for(f.C=c>=u.length?-1:c,c=i+1;c<u.length&&n(e.FullPaths[c])!=n(p);++c);f.R=c>=u.length?-1:c,f.type=1}else n(e.FullPaths[i+1]||"")==n(p)&&(f.R=i+1),f.type=2}}}function f(e,t){var n=t||{};if("mad"==n.fileType)return function(e,t){for(var n=t||{},r=n.boundary||"SheetJS",s=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(r="------="+r).slice(2)+'"',"","",""],a=e.FullPaths[0],i=a,o=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(i=e.FullPaths[l].slice(a.length),(o=e.FileIndex[l]).size&&o.content&&"\x01Sh33tJ5"!=i){i=i.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var c=o.content,d=Lw&&Buffer.isBuffer(c)?c.toString("binary"):w(c),u=0,h=Math.min(1024,d.length),A=0,f=0;f<=h;++f)(A=d.charCodeAt(f))>=32&&A<128&&++u;var p=u>=4*h/5;s.push(r),s.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+i),s.push("Content-Transfer-Encoding: "+(p?"quoted-printable":"base64")),s.push("Content-Type: "+ie(o,i)),s.push(""),s.push(p?le(d):oe(d))}return s.push(r+"--\r\n"),s.join("\r\n")}(e,n);if(A(e),"zip"===n.fileType)return function(e,t){var n=t||{},r=[],a=[],i=LC(1),o=n.compression?8:0,l=0;0;var c=0,d=0,u=0,h=0,A=e.FullPaths[0],f=A,p=e.FileIndex[0],m=[],g=0;for(c=1;c<e.FullPaths.length;++c)if(f=e.FullPaths[c].slice(A.length),(p=e.FileIndex[c]).size&&p.content&&"\x01Sh33tJ5"!=f){var x=u,v=LC(f.length);for(d=0;d<f.length;++d)v.write_shift(1,127&f.charCodeAt(d));v=v.slice(0,v.l),m[h]=RN.buf(p.content,0);var b=p.content;8==o&&(b=N(b)),(i=LC(30)).write_shift(4,67324752),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),p.mt?s(i,p.mt):i.write_shift(4,0),i.write_shift(-4,8&l?0:m[h]),i.write_shift(4,8&l?0:b.length),i.write_shift(4,8&l?0:p.content.length),i.write_shift(2,v.length),i.write_shift(2,0),u+=i.length,r.push(i),u+=v.length,r.push(v),u+=b.length,r.push(b),8&l&&((i=LC(12)).write_shift(-4,m[h]),i.write_shift(4,b.length),i.write_shift(4,p.content.length),u+=i.l,r.push(i)),(i=LC(46)).write_shift(4,33639248),i.write_shift(2,0),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),i.write_shift(4,0),i.write_shift(-4,m[h]),i.write_shift(4,b.length),i.write_shift(4,p.content.length),i.write_shift(2,v.length),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(4,0),i.write_shift(4,x),g+=i.l,a.push(i),g+=v.length,a.push(v),++h}return i=LC(22),i.write_shift(4,101010256),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,h),i.write_shift(2,h),i.write_shift(4,g),i.write_shift(4,u),i.write_shift(2,0),Hw([Hw(r),Hw(a),i])}(e,n);var r=function(e){for(var t=0,n=0,r=0;r<e.FileIndex.length;++r){var s=e.FileIndex[r];if(s.content){var a=s.content.length;a>0&&(a<4096?t+=a+63>>6:n+=a+511>>9)}}for(var i=e.FullPaths.length+3>>2,o=t+127>>7,l=(t+7>>3)+n+i+o,c=l+127>>7,d=c<=109?0:Math.ceil((c-109)/127);l+c+d+127>>7>c;)d=++c<=109?0:Math.ceil((c-109)/127);var u=[1,d,c,o,i,n,t,0];return e.FileIndex[0].size=t<<6,u[7]=(e.FileIndex[0].start=u[0]+u[1]+u[2]+u[3]+u[4]+u[5])+(u[6]+7>>3),u}(e),a=LC(r[7]<<9),i=0,o=0;for(i=0;i<8;++i)a.write_shift(1,v[i]);for(i=0;i<8;++i)a.write_shift(2,0);for(a.write_shift(2,62),a.write_shift(2,3),a.write_shift(2,65534),a.write_shift(2,9),a.write_shift(2,6),i=0;i<3;++i)a.write_shift(2,0);for(a.write_shift(4,0),a.write_shift(4,r[2]),a.write_shift(4,r[0]+r[1]+r[2]+r[3]-1),a.write_shift(4,0),a.write_shift(4,4096),a.write_shift(4,r[3]?r[0]+r[1]+r[2]-1:g),a.write_shift(4,r[3]),a.write_shift(-4,r[1]?r[0]-1:g),a.write_shift(4,r[1]),i=0;i<109;++i)a.write_shift(-4,i<r[2]?r[1]+i:-1);if(r[1])for(o=0;o<r[1];++o){for(;i<236+127*o;++i)a.write_shift(-4,i<r[2]?r[1]+i:-1);a.write_shift(-4,o===r[1]-1?g:o+1)}var l=function(e){for(o+=e;i<o-1;++i)a.write_shift(-4,i+1);e&&(++i,a.write_shift(-4,g))};for(o=i=0,o+=r[1];i<o;++i)a.write_shift(-4,y.DIFSECT);for(o+=r[2];i<o;++i)a.write_shift(-4,y.FATSECT);l(r[3]),l(r[4]);for(var c=0,d=0,u=e.FileIndex[0];c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&((d=u.content.length)<4096||(u.start=o,l(d+511>>9)));for(l(r[6]+7>>3);511&a.l;)a.write_shift(-4,y.ENDOFCHAIN);for(o=i=0,c=0;c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&(!(d=u.content.length)||d>=4096||(u.start=o,l(d+63>>6)));for(;511&a.l;)a.write_shift(-4,y.ENDOFCHAIN);for(i=0;i<r[4]<<2;++i){var h=e.FullPaths[i];if(h&&0!==h.length){u=e.FileIndex[i],0===i&&(u.start=u.size?u.start-1:g);var f=0===i&&n.root||u.name;if(d=2*(f.length+1),a.write_shift(64,f,"utf16le"),a.write_shift(2,d),a.write_shift(1,u.type),a.write_shift(1,u.color),a.write_shift(-4,u.L),a.write_shift(-4,u.R),a.write_shift(-4,u.C),u.clsid)a.write_shift(16,u.clsid,"hex");else for(c=0;c<4;++c)a.write_shift(4,0);a.write_shift(4,u.state||0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,u.start),a.write_shift(4,u.size),a.write_shift(4,0)}else{for(c=0;c<17;++c)a.write_shift(4,0);for(c=0;c<3;++c)a.write_shift(4,-1);for(c=0;c<12;++c)a.write_shift(4,0)}}for(i=1;i<e.FileIndex.length;++i)if((u=e.FileIndex[i]).size>=4096)if(a.l=u.start+1<<9,Lw&&Buffer.isBuffer(u.content))u.content.copy(a,a.l,0,u.size),a.l+=u.size+511&-512;else{for(c=0;c<u.size;++c)a.write_shift(1,u.content[c]);for(;511&c;++c)a.write_shift(1,0)}for(i=1;i<e.FileIndex.length;++i)if((u=e.FileIndex[i]).size>0&&u.size<4096)if(Lw&&Buffer.isBuffer(u.content))u.content.copy(a,a.l,0,u.size),a.l+=u.size+63&-64;else{for(c=0;c<u.size;++c)a.write_shift(1,u.content[c]);for(;63&c;++c)a.write_shift(1,0)}if(Lw)a.l=a.length;else for(;a.l<a.length;)a.write_shift(1,0);return a}t.version="1.2.1";var p,m=64,g=-2,x="d0cf11e0a1b11ae1",v=[208,207,17,224,161,177,26,225],b="00000000000000000000000000000000",y={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:g,FREESECT:-1,HEADER_SIGNATURE:x,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:b,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function w(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function N(e){return p?p.deflateRawSync(e):q(e)}var j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],B=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function k(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var S="undefined"!==typeof Uint8Array,_=S?new Uint8Array(256):[],E=0;E<256;++E)_[E]=k(E);function F(e,t){var n=_[255&e];return t<=8?n>>>8-t:(n=n<<8|_[e>>8&255],t<=16?n>>>16-t:(n=n<<8|_[e>>16&255])>>>24-t)}function T(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=6?0:e[r+1]<<8))>>>n&3}function I(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=5?0:e[r+1]<<8))>>>n&7}function D(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=3?0:e[r+1]<<8))>>>n&31}function L(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=1?0:e[r+1]<<8))>>>n&127}function P(e,t,n){var r=7&t,s=t>>>3,a=(1<<n)-1,i=e[s]>>>r;return n<8-r?i&a:(i|=e[s+1]<<8-r,n<16-r?i&a:(i|=e[s+2]<<16-r,n<24-r?i&a:(i|=e[s+3]<<24-r)&a))}function R(e,t,n){var r=7&t,s=t>>>3;return r<=5?e[s]|=(7&n)<<r:(e[s]|=n<<r&255,e[s+1]=(7&n)>>8-r),t+3}function U(e,t,n){return n=(1&n)<<(7&t),e[t>>>3]|=n,t+1}function O(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=n,t+8}function M(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=255&n,e[r+2]=n>>>8,t+16}function Q(e,t){var n=e.length,r=2*n>t?2*n:t+5,s=0;if(n>=t)return e;if(Lw){var a=Uw(r);if(e.copy)e.copy(a);else for(;s<e.length;++s)a[s]=e[s];return a}if(S){var i=new Uint8Array(r);if(i.set)i.set(e);else for(;s<n;++s)i[s]=e[s];return i}return e.length=r,e}function H(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function z(e,t,n){var r=1,s=0,a=0,i=0,o=0,l=e.length,c=S?new Uint16Array(32):H(32);for(a=0;a<32;++a)c[a]=0;for(a=l;a<n;++a)e[a]=0;l=e.length;var d=S?new Uint16Array(l):H(l);for(a=0;a<l;++a)c[s=e[a]]++,r<s&&(r=s),d[a]=0;for(c[0]=0,a=1;a<=r;++a)c[a+16]=o=o+c[a-1]<<1;for(a=0;a<l;++a)0!=(o=e[a])&&(d[a]=c[o+16]++);var u=0;for(a=0;a<l;++a)if(0!=(u=e[a]))for(o=F(d[a],r)>>r-u,i=(1<<r+4-u)-1;i>=0;--i)t[o|i<<u]=15&u|a<<4;return r}var W=S?new Uint16Array(512):H(512),V=S?new Uint16Array(32):H(32);if(!S){for(var K=0;K<512;++K)W[K]=0;for(K=0;K<32;++K)V[K]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);z(e,V,32);var n=[];for(t=0;t<=143;t++)n.push(8);for(;t<=255;t++)n.push(9);for(;t<=279;t++)n.push(7);for(;t<=287;t++)n.push(8);z(n,W,288)}();var G=function(){for(var e=S?new Uint8Array(32768):[],t=0,n=0;t<B.length-1;++t)for(;n<B[t+1];++n)e[n]=t;for(;n<32768;++n)e[n]=29;var r=S?new Uint8Array(259):[];for(t=0,n=0;t<C.length-1;++t)for(;n<C[t+1];++n)r[n]=t;return function(t,n){return t.length<8?function(e,t){for(var n=0;n<e.length;){var r=Math.min(65535,e.length-n),s=n+r==e.length;for(t.write_shift(1,+s),t.write_shift(2,r),t.write_shift(2,65535&~r);r-- >0;)t[t.l++]=e[n++]}return t.l}(t,n):function(t,n){for(var s=0,a=0,i=S?new Uint16Array(32768):[];a<t.length;){var o=Math.min(65535,t.length-a);if(o<10){for(7&(s=R(n,s,+!(a+o!=t.length)))&&(s+=8-(7&s)),n.l=s/8|0,n.write_shift(2,o),n.write_shift(2,65535&~o);o-- >0;)n[n.l++]=t[a++];s=8*n.l}else{s=R(n,s,+!(a+o!=t.length)+2);for(var l=0;o-- >0;){var c=t[a],d=-1,u=0;if((d=i[l=32767&(l<<5^c)])&&((d|=-32768&a)>a&&(d-=32768),d<a))for(;t[d+u]==t[a+u]&&u<250;)++u;if(u>2){(c=r[u])<=22?s=O(n,s,_[c+1]>>1)-1:(O(n,s,3),O(n,s+=5,_[c-23]>>5),s+=3);var h=c<8?0:c-4>>2;h>0&&(M(n,s,u-C[c]),s+=h),c=e[a-d],s=O(n,s,_[c]>>3),s-=3;var A=c<4?0:c-2>>1;A>0&&(M(n,s,a-d-B[c]),s+=A);for(var f=0;f<u;++f)i[l]=32767&a,l=32767&(l<<5^t[a]),++a;o-=u-1}else c<=143?c+=48:s=U(n,s,1),s=O(n,s,_[c]),i[l]=32767&a,++a}s=O(n,s,0)-1}}return n.l=(s+7)/8|0,n.l}(t,n)}}();function q(e){var t=LC(50+Math.floor(1.1*e.length)),n=G(e,t);return t.slice(0,n)}var X=S?new Uint16Array(32768):H(32768),Y=S?new Uint16Array(32768):H(32768),J=S?new Uint16Array(128):H(128),Z=1,$=1;function ee(e,t){var n=D(e,t)+257,r=D(e,t+=5)+1,s=function(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=4?0:e[r+1]<<8))>>>n&15}(e,t+=5)+4;t+=4;for(var a=0,i=S?new Uint8Array(19):H(19),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=S?new Uint8Array(8):H(8),d=S?new Uint8Array(8):H(8),u=i.length,h=0;h<s;++h)i[j[h]]=a=I(e,t),l<a&&(l=a),c[a]++,t+=3;var A=0;for(c[0]=0,h=1;h<=l;++h)d[h]=A=A+c[h-1]<<1;for(h=0;h<u;++h)0!=(A=i[h])&&(o[h]=d[A]++);var f=0;for(h=0;h<u;++h)if(0!=(f=i[h])){A=_[o[h]]>>8-f;for(var p=(1<<7-f)-1;p>=0;--p)J[A|p<<f]=7&f|h<<3}var m=[];for(l=1;m.length<n+r;)switch(t+=7&(A=J[L(e,t)]),A>>>=3){case 16:for(a=3+T(e,t),t+=2,A=m[m.length-1];a-- >0;)m.push(A);break;case 17:for(a=3+I(e,t),t+=3;a-- >0;)m.push(0);break;case 18:for(a=11+L(e,t),t+=7;a-- >0;)m.push(0);break;default:m.push(A),l<A&&(l=A)}var g=m.slice(0,n),x=m.slice(n);for(h=n;h<286;++h)g[h]=0;for(h=r;h<30;++h)x[h]=0;return Z=z(g,X,286),$=z(x,Y,30),t}function te(e,t){var n=function(e,t){if(3==e[0]&&!(3&e[1]))return[Rw(t),2];for(var n=0,r=0,s=Uw(t||1<<18),a=0,i=s.length>>>0,o=0,l=0;0==(1&r);)if(r=I(e,n),n+=3,r>>>1!=0)for(r>>1==1?(o=9,l=5):(n=ee(e,n),o=Z,l=$);;){!t&&i<a+32767&&(i=(s=Q(s,a+32767)).length);var c=P(e,n,o),d=r>>>1==1?W[c]:X[c];if(n+=15&d,0===((d>>>=4)>>>8&255))s[a++]=d;else{if(256==d)break;var u=(d-=257)<8?0:d-4>>2;u>5&&(u=0);var h=a+C[d];u>0&&(h+=P(e,n,u),n+=u),c=P(e,n,l),n+=15&(d=r>>>1==1?V[c]:Y[c]);var A=(d>>>=4)<4?0:d-2>>1,f=B[d];for(A>0&&(f+=P(e,n,A),n+=A),!t&&i<h&&(i=(s=Q(s,h+100)).length);a<h;)s[a]=s[a-f],++a}}else{7&n&&(n+=8-(7&n));var p=e[n>>>3]|e[(n>>>3)+1]<<8;if(n+=32,p>0)for(!t&&i<a+p&&(i=(s=Q(s,a+p)).length);p-- >0;)s[a++]=e[n>>>3],n+=8}return t?[s,n+7>>>3]:[s.slice(0,a),n+7>>>3]}(e.slice(e.l||0),t);return e.l+=n[1],n[0]}function ne(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function re(e,t){var n=e;IC(n,0);var r={FileIndex:[],FullPaths:[]};h(r,{root:t.root});for(var s=n.length-4;(80!=n[s]||75!=n[s+1]||5!=n[s+2]||6!=n[s+3])&&s>=0;)--s;n.l=s+4,n.l+=4;var i=n.read_shift(2);n.l+=6;var o=n.read_shift(4);for(n.l=o,s=0;s<i;++s){n.l+=20;var l=n.read_shift(4),c=n.read_shift(4),d=n.read_shift(2),u=n.read_shift(2),A=n.read_shift(2);n.l+=8;var f=n.read_shift(4),p=a(n.slice(n.l+d,n.l+d+u));n.l+=d+u+A;var m=n.l;n.l=f+4,se(n,l,c,r,p),n.l=m}return r}function se(e,t,n,r,s){e.l+=2;var i=e.read_shift(2),o=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),n=65535&e.read_shift(2),r=new Date,s=31&n,a=15&(n>>>=5);n>>>=4,r.setMilliseconds(0),r.setFullYear(n+1980),r.setMonth(a-1),r.setDate(s);var i=31&t,o=63&(t>>>=5);return t>>>=6,r.setHours(t),r.setMinutes(o),r.setSeconds(i<<1),r}(e);if(8257&i)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),d=e.read_shift(4),u=e.read_shift(2),h=e.read_shift(2),A="",f=0;f<u;++f)A+=String.fromCharCode(e[e.l++]);if(h){var m=a(e.slice(e.l,e.l+h));(m[21589]||{}).mt&&(l=m[21589].mt),((s||{})[21589]||{}).mt&&(l=s[21589].mt)}e.l+=h;var g=e.slice(e.l,e.l+c);switch(o){case 8:g=function(e,t){if(!p)return te(e,t);var n=new(0,p.InflateRaw),r=n._processChunk(e.slice(e.l),n._finishFlushFlag);return e.l+=n.bytesRead,r}(e,d);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+o)}var x=!1;8&i&&(134695760==e.read_shift(4)&&(e.read_shift(4),x=!0),c=e.read_shift(4),d=e.read_shift(4)),c!=t&&ne(x,"Bad compressed size: "+t+" != "+c),d!=n&&ne(x,"Bad uncompressed size: "+n+" != "+d),de(r,A,g,{unsafe:!0,mt:l})}var ae={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ie(e,t){if(e.ctype)return e.ctype;var n=e.name||"",r=n.match(/\.([^\.]+)$/);return r&&ae[r[1]]||t&&(r=(n=t).match(/[\.\\]([^\.\\])+$/))&&ae[r[1]]?ae[r[1]]:"application/octet-stream"}function oe(e){for(var t=Iw(e),n=[],r=0;r<t.length;r+=76)n.push(t.slice(r,r+76));return n.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var n=[],r=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),s=0;s<r.length;++s){var a=r[s];if(0!=a.length)for(var i=0;i<a.length;){var o=76,l=a.slice(i,i+o);"="==l.charAt(o-1)?o--:"="==l.charAt(o-2)?o-=2:"="==l.charAt(o-3)&&(o-=3),l=a.slice(i,i+o),(i+=o)<a.length&&(l+="="),n.push(l)}else n.push("")}return n.join("\r\n")}function ce(e,t,n){for(var r,s="",a="",i="",o=0;o<10;++o){var l=t[o];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":s=c[2].trim();break;case"content-type":i=c[2].trim();break;case"content-transfer-encoding":a=c[2].trim()}}switch(++o,a.toLowerCase()){case"base64":r=Ow(Dw(t.slice(o).join("")));break;case"quoted-printable":r=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n];n<=e.length&&"="==r.charAt(r.length-1);)r=r.slice(0,r.length-1)+e[++n];t.push(r)}for(var s=0;s<t.length;++s)t[s]=t[s].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return Ow(t.join("\r\n"))}(t.slice(o));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+a)}var d=de(e,s.slice(n.length),r,{unsafe:!0});i&&(d.ctype=i)}function de(e,t,n,s){var a=s&&s.unsafe;a||h(e);var i=!a&&UN.find(e,t);if(!i){var o=e.FullPaths[0];t.slice(0,o.length)==o?o=t:("/"!=o.slice(-1)&&(o+="/"),o=(o+t).replace("//","/")),i={name:r(t),type:2},e.FileIndex.push(i),e.FullPaths.push(o),a||UN.utils.cfb_gc(e)}return i.content=n,i.size=n?n.length:0,s&&(s.CLSID&&(i.clsid=s.CLSID),s.mt&&(i.mt=s.mt),s.ct&&(i.ct=s.ct)),i}return t.find=function(e,t){var n=e.FullPaths.map(function(e){return e.toUpperCase()}),r=n.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),s=!1;47===t.charCodeAt(0)?(s=!0,t=n[0].slice(0,-1)+t):s=-1!==t.indexOf("/");var a=t.toUpperCase(),i=!0===s?n.indexOf(a):r.indexOf(a);if(-1!==i)return e.FileIndex[i];var o=!a.match(Ww);for(a=a.replace(zw,""),o&&(a=a.replace(Ww,"!")),i=0;i<n.length;++i){if((o?n[i].replace(Ww,"!"):n[i]).replace(zw,"")==a)return e.FileIndex[i];if((o?r[i].replace(Ww,"!"):r[i]).replace(zw,"")==a)return e.FileIndex[i]}return null},t.read=function(t,n){var r=n&&n.type;switch(r||Lw&&Buffer.isBuffer(t)&&(r="buffer"),r||"base64"){case"file":return function(t,n){return i(),o(e.readFileSync(t),n)}(t,n);case"base64":return o(Ow(Dw(t)),n);case"binary":return o(Ow(t),n)}return o(t,n)},t.parse=o,t.write=function(t,n){var r=f(t,n);switch(n&&n.type||"buffer"){case"file":return i(),e.writeFileSync(n.filename,r),r;case"binary":return"string"==typeof r?r:w(r);case"base64":return Iw("string"==typeof r?r:w(r));case"buffer":if(Lw)return Buffer.isBuffer(r)?r:Pw(r);case"array":return"string"==typeof r?Ow(r):r}return r},t.writeFile=function(t,n,r){i();var s=f(t,r);e.writeFileSync(n,s)},t.utils={cfb_new:function(e){var t={};return h(t,e),t},cfb_add:de,cfb_del:function(e,t){h(e);var n=UN.find(e,t);if(n)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==n)return e.FileIndex.splice(r,1),e.FullPaths.splice(r,1),!0;return!1},cfb_mov:function(e,t,n){h(e);var s=UN.find(e,t);if(s)for(var a=0;a<e.FileIndex.length;++a)if(e.FileIndex[a]==s)return e.FileIndex[a].name=r(n),e.FullPaths[a]=n,!0;return!1},cfb_gc:function(e){A(e,!0)},ReadShift:kC,CheckField:TC,prep_blob:IC,bconcat:Hw,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");p=e}catch(Ua){console.error("cannot use native zlib: "+(Ua.message||Ua))}},_deflateRaw:q,_inflateRaw:te,consts:y},t}();let ON;function MN(e){return"string"===typeof e?Mw(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function QN(e,t,n){if("undefined"!==typeof ON&&ON.writeFileSync)return n?ON.writeFileSync(e,t,n):ON.writeFileSync(e,t);if("undefined"!==typeof Deno){if(n&&"string"==typeof t)switch(n){case"utf8":t=new TextEncoder(n).encode(t);break;case"binary":t=Mw(t);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(e,t)}var r="utf8"==n?Cj(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(r,e);if("undefined"!==typeof Blob){var s=new Blob([MN(r)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if("undefined"!==typeof saveAs)return saveAs(s,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var i=document.createElement("a");if(null!=i.download)return i.download=e,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=Qw(t)),o.write(t),o.close(),t}catch(Ua){if(!Ua.message||!Ua.message.match(/onstruct/))throw Ua}throw new Error("cannot save file "+e)}function HN(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function zN(e,t){for(var n=[],r=HN(e),s=0;s!==r.length;++s)null==n[e[r[s]][t]]&&(n[e[r[s]][t]]=r[s]);return n}function WN(e){for(var t=[],n=HN(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}function VN(e){for(var t=[],n=HN(e),r=0;r!==n.length;++r)t[e[n[r]]]=parseInt(n[r],10);return t}var KN=new Date(1899,11,30,0,0,0);function GN(e,t){var n=e.getTime();return t&&(n-=1263168e5),(n-(KN.getTime()+6e4*(e.getTimezoneOffset()-KN.getTimezoneOffset())))/864e5}var qN=new Date,XN=KN.getTime()+6e4*(qN.getTimezoneOffset()-KN.getTimezoneOffset()),YN=qN.getTimezoneOffset();function JN(e){var t=new Date;return t.setTime(24*e*60*60*1e3+XN),t.getTimezoneOffset()!==YN&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-YN)),t}var ZN=new Date("2017-02-19T19:06:09.000Z"),$N=isNaN(ZN.getFullYear())?new Date("2/19/17"):ZN,ej=2017==$N.getFullYear();function tj(e,t){var n=new Date(e);if(ej)return t>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):t<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(e instanceof Date)return e;if(1917==$N.getFullYear()&&!isNaN(n.getFullYear())){var r=n.getFullYear();return e.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-60*a.getTimezoneOffset()*1e3)),a}function nj(e,t){if(Lw&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return Cj(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return Cj(Sw(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return Cj(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return Cj(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(e){return n[e]||e})}catch(Ua){}for(var r=[],s=0;s!=e.length;++s)r.push(String.fromCharCode(e[s]));return r.join("")}function rj(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=rj(e[n]));return t}function sj(e,t){for(var n="";n.length<t;)n+=e;return n}function aj(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return isNaN(t=Number(r))?(r=r.replace(/[(](.*)[)]/,function(e,t){return n=-n,t}),isNaN(t=Number(r))?t:t/n):t/n}var ij=["january","february","march","april","may","june","july","august","september","october","november","december"];function oj(e){var t=new Date(e),n=new Date(NaN),r=t.getYear(),s=t.getMonth(),a=t.getDate();if(isNaN(a))return n;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==ij.indexOf(i))return n}else if(i.match(/[a-z]/))return n;return r<0||r>8099?n:(s>0||a>1)&&101!=r?t:e.match(/[^-0-9:,\/\\]/)?n:t}function lj(e,t,n){if(e.FullPaths){var r;if("string"==typeof n)return r=Lw?Pw(n):function(e){for(var t=[],n=0,r=e.length+250,s=Rw(e.length+255),a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i<128)s[n++]=i;else if(i<2048)s[n++]=192|i>>6&31,s[n++]=128|63&i;else if(i>=55296&&i<57344){i=64+(1023&i);var o=1023&e.charCodeAt(++a);s[n++]=240|i>>8&7,s[n++]=128|i>>2&63,s[n++]=128|o>>6&15|(3&i)<<4,s[n++]=128|63&o}else s[n++]=224|i>>12&15,s[n++]=128|i>>6&63,s[n++]=128|63&i;n>r&&(t.push(s.slice(0,n)),n=0,s=Rw(65535),r=65530)}return t.push(s.slice(0,n)),Hw(t)}(n),UN.utils.cfb_add(e,t,r);UN.utils.cfb_add(e,t,n)}else e.file(t,n)}function cj(){return UN.utils.cfb_new()}var dj='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var uj={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},hj=WN(uj),Aj=/[&<>'"]/g,fj=/[\u0000-\u0008\u000b-\u001f]/g;function pj(e){return(e+"").replace(Aj,function(e){return hj[e]}).replace(fj,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function mj(e){return pj(e).replace(/ /g,"_x0020_")}var gj=/[\u0000-\u001f]/g;function xj(e){return(e+"").replace(Aj,function(e){return hj[e]}).replace(/\n/g,"<br/>").replace(gj,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function vj(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function bj(e){for(var t="",n=0,r=0,s=0,a=0,i=0,o=0;n<e.length;)(r=e.charCodeAt(n++))<128?t+=String.fromCharCode(r):(s=e.charCodeAt(n++),r>191&&r<224?(i=(31&r)<<6,i|=63&s,t+=String.fromCharCode(i)):(a=e.charCodeAt(n++),r<240?t+=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a):(o=((7&r)<<18|(63&s)<<12|(63&a)<<6|63&(i=e.charCodeAt(n++)))-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(1023&o)))));return t}function yj(e){var t,n,r,s=Rw(2*e.length),a=1,i=0,o=0;for(n=0;n<e.length;n+=a)a=1,(r=e.charCodeAt(n))<128?t=r:r<224?(t=64*(31&r)+(63&e.charCodeAt(n+1)),a=2):r<240?(t=4096*(15&r)+64*(63&e.charCodeAt(n+1))+(63&e.charCodeAt(n+2)),a=3):(a=4,t=262144*(7&r)+4096*(63&e.charCodeAt(n+1))+64*(63&e.charCodeAt(n+2))+(63&e.charCodeAt(n+3)),o=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==o&&(s[i++]=255&o,s[i++]=o>>>8,o=0),s[i++]=t%256,s[i++]=t>>>8;return s.slice(0,i).toString("ucs2")}function wj(e){return Pw(e,"binary").toString("utf8")}var Nj="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",jj=Lw&&(wj(Nj)==bj(Nj)&&wj||yj(Nj)==bj(Nj)&&yj)||bj,Cj=Lw?function(e){return Pw(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,s=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,s=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(63&s)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(63&r)))}return t.join("")},Bj=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),r=0;r<e.length;++r)n=n.replace(e[r][0],e[r][1]);return n}}();var kj=/(^\s|\s$|\n)/;function Sj(e,t){return"<"+e+(t.match(kj)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function _j(e){return HN(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Ej(e,t,n){return"<"+e+(null!=n?_j(n):"")+(null!=t?(t.match(kj)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Fj(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(Ua){if(t)throw Ua}return""}var Tj="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",Ij="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",Dj="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",Lj="http://schemas.openxmlformats.org/package/2006/content-types",Pj="http://schemas.openxmlformats.org/package/2006/relationships",Rj="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",Uj="http://purl.org/dc/elements/1.1/",Oj="http://purl.org/dc/terms/",Mj="http://purl.org/dc/dcmitype/",Qj="http://schemas.openxmlformats.org/officeDocument/2006/relationships",Hj="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",zj="http://www.w3.org/2001/XMLSchema-instance",Wj="http://www.w3.org/2001/XMLSchema",Vj=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Kj="urn:schemas-microsoft-com:office:office",Gj="urn:schemas-microsoft-com:office:excel",qj="urn:schemas-microsoft-com:office:spreadsheet",Xj="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",Yj="http://macVmlSchemaUri",Jj="urn:schemas-microsoft-com:vml",Zj="http://www.w3.org/TR/REC-html40";var $j=function(e){for(var t=[],n=0;n<e[0].length;++n)if(e[0][n])for(var r=0,s=e[0][n].length;r<s;r+=10240)t.push.apply(t,e[0][n].slice(r,r+10240));return t},eC=Lw?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:Pw(e)})):$j(e)}:$j,tC=function(e,t,n){for(var r=[],s=t;s<n;s+=2)r.push(String.fromCharCode(wC(e,s)));return r.join("").replace(zw,"")},nC=Lw?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(zw,""):tC(e,t,n)}:tC,rC=function(e,t,n){for(var r=[],s=t;s<t+n;++s)r.push(("0"+e[s].toString(16)).slice(-2));return r.join("")},sC=Lw?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):rC(e,t,n)}:rC,aC=function(e,t,n){for(var r=[],s=t;s<n;s++)r.push(String.fromCharCode(yC(e,s)));return r.join("")},iC=Lw?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):aC(e,t,n)}:aC,oC=function(e,t){var n=jC(e,t);return n>0?iC(e,t+4,t+4+n-1):""},lC=oC,cC=function(e,t){var n=jC(e,t);return n>0?iC(e,t+4,t+4+n-1):""},dC=cC,uC=function(e,t){var n=2*jC(e,t);return n>0?iC(e,t+4,t+4+n-1):""},hC=uC,AC=function(e,t){var n=jC(e,t);return n>0?nC(e,t+4,t+4+n):""},fC=AC,pC=function(e,t){var n=jC(e,t);return n>0?iC(e,t+4,t+4+n):""},mC=pC,gC=function(e,t){return function(e,t){for(var n=1-2*(e[t+7]>>>7),r=((127&e[t+7])<<4)+(e[t+6]>>>4&15),s=15&e[t+6],a=5;a>=0;--a)s=256*s+e[t+a];return 2047==r?0==s?n*(1/0):NaN:(0==r?r=-1022:(r-=1023,s+=Math.pow(2,52)),n*Math.pow(2,r-52)*s)}(e,t)},xC=gC,vC=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function bC(){nC=function(e,t,n){return _w.utils.decode(1200,e.slice(t,n)).replace(zw,"")},iC=function(e,t,n){return _w.utils.decode(65001,e.slice(t,n))},lC=function(e,t){var n=jC(e,t);return n>0?_w.utils.decode(ww,e.slice(t+4,t+4+n-1)):""},dC=function(e,t){var n=jC(e,t);return n>0?_w.utils.decode(yw,e.slice(t+4,t+4+n-1)):""},hC=function(e,t){var n=2*jC(e,t);return n>0?_w.utils.decode(1200,e.slice(t+4,t+4+n-1)):""},fC=function(e,t){var n=jC(e,t);return n>0?_w.utils.decode(1200,e.slice(t+4,t+4+n)):""},mC=function(e,t){var n=jC(e,t);return n>0?_w.utils.decode(65001,e.slice(t+4,t+4+n)):""}}Lw&&(lC=function(e,t){if(!Buffer.isBuffer(e))return oC(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},dC=function(e,t){if(!Buffer.isBuffer(e))return cC(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},hC=function(e,t){if(!Buffer.isBuffer(e))return uC(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},fC=function(e,t){if(!Buffer.isBuffer(e))return AC(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},mC=function(e,t){if(!Buffer.isBuffer(e))return pC(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},xC=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):gC(e,t)},vC=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof _w&&bC();var yC=function(e,t){return e[t]},wC=function(e,t){return 256*e[t+1]+e[t]},NC=function(e,t){var n=256*e[t+1]+e[t];return n<32768?n:-1*(65535-n+1)},jC=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},CC=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},BC=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function kC(e,t){var n,r,s,a,i,o,l="",c=[];switch(t){case"dbcs":if(o=this.l,Lw&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(i=0;i<e;++i)l+=String.fromCharCode(wC(this,o)),o+=2;e*=2;break;case"utf8":l=iC(this,this.l,this.l+e);break;case"utf16le":e*=2,l=nC(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof _w)return kC.call(this,e,"dbcs");l=_w.utils.decode(yw,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=lC(this,this.l),e=4+jC(this,this.l);break;case"lpstr-cp":l=dC(this,this.l),e=4+jC(this,this.l);break;case"lpwstr":l=hC(this,this.l),e=4+2*jC(this,this.l);break;case"lpp4":e=4+jC(this,this.l),l=fC(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+jC(this,this.l),l=mC(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(s=yC(this,this.l+e++));)c.push(Ew(s));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(s=wC(this,this.l+e));)c.push(Ew(s)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",o=this.l,i=0;i<e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return s=yC(this,o),this.l=o+1,a=kC.call(this,e-i,s?"dbcs-cont":"sbcs-cont"),c.join("")+a;c.push(Ew(wC(this,o))),o+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof _w){l=_w.utils.decode(yw,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",o=this.l,i=0;i!=e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return s=yC(this,o),this.l=o+1,a=kC.call(this,e-i,s?"dbcs-cont":"sbcs-cont"),c.join("")+a;c.push(Ew(yC(this,o))),o+=1}l=c.join("");break;default:switch(e){case 1:return n=yC(this,this.l),this.l++,n;case 2:return n=("i"===t?NC:wC)(this,this.l),this.l+=2,n;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(n=(e>0?CC:BC)(this,this.l),this.l+=4,n):(r=jC(this,this.l),this.l+=4,r);case 8:case-8:if("f"===t)return r=8==e?xC(this,this.l):xC([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:l=sC(this,this.l,e)}}return this.l+=e,l}var SC=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},_C=function(e,t,n){e[n]=255&t,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},EC=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255};function FC(e,t,n){var r=0,s=0;if("dbcs"===n){for(s=0;s!=t.length;++s)EC(this,t.charCodeAt(s),this.l+2*s);r=2*t.length}else if("sbcs"===n){if("undefined"!==typeof _w&&874==ww)for(s=0;s!=t.length;++s){var a=_w.utils.encode(ww,t.charAt(s));this[this.l+s]=a[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=255&t.charCodeAt(s);r=t.length}else{if("hex"===n){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}if("utf16le"===n){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}switch(e){case 1:r=1,this[this.l]=255&t;break;case 2:r=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:r=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:r=4,SC(this,t,this.l);break;case 8:if(r=8,"f"===n){!function(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,s=0,a=0,i=r?-t:t;isFinite(i)?0==i?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[n+o]=255&a;e[n+6]=(15&s)<<4|15&a,e[n+7]=s>>4|r}(this,t,this.l);break}case 16:break;case-4:r=4,_C(this,t,this.l)}}return this.l+=r,this}function TC(e,t){var n=sC(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function IC(e,t){e.l=t,e.read_shift=kC,e.chk=TC,e.write_shift=FC}function DC(e,t){e.l+=t}function LC(e){var t=Rw(e);return IC(t,0),t}function PC(){var e=[],t=Lw?256:2048,n=function(e){var t=LC(e);return IC(t,0),t},r=n(t),s=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&e.push(r),r=null)},a=function(e){return r&&e<r.length-r.l?r:(s(),r=n(Math.max(e+1,t)))};return{next:a,push:function(e){s(),null==(r=e).l&&(r.l=r.length),a(t)},end:function(){return s(),Hw(e)},_bufs:e}}function RC(e,t,n,r){var s,a=+t;if(!isNaN(a)){r||(r=Z_[a].p||(n||[]).length||0),s=1+(a>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,128+(127&a)),i.write_shift(1,a>>7));for(var o=0;4!=o;++o){if(!(r>=128)){i.write_shift(1,r);break}i.write_shift(1,128+(127&r)),r>>=7}r>0&&vC(n)&&e.push(n)}}function UC(e,t,n){var r=rj(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function OC(e,t,n){var r=rj(e);return r.s=UC(r.s,t.s,n),r.e=UC(r.e,t.s,n),r}function MC(e,t){if(e.cRel&&e.c<0)for(e=rj(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=rj(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=GC(e);return e.cRel||null==e.cRel||(n=n.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(n=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(n)),n}function QC(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?MC(e.s,t.biff)+":"+MC(e.e,t.biff):(e.s.rRel?"":"$")+zC(e.s.r)+":"+(e.e.rRel?"":"$")+zC(e.e.r):(e.s.cRel?"":"$")+VC(e.s.c)+":"+(e.e.cRel?"":"$")+VC(e.e.c)}function HC(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function zC(e){return""+(e+1)}function WC(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function VC(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function KC(e){for(var t=0,n=0,r=0;r<e.length;++r){var s=e.charCodeAt(r);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(n=26*n+(s-64))}return{c:n-1,r:t-1}}function GC(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function qC(e){var t=e.indexOf(":");return-1==t?{s:KC(e),e:KC(e)}:{s:KC(e.slice(0,t)),e:KC(e.slice(t+1))}}function XC(e,t){return"undefined"===typeof t||"number"===typeof t?XC(e.s,e.e):("string"!==typeof e&&(e=GC(e)),"string"!==typeof t&&(t=GC(t)),e==t?e:e+":"+t)}function YC(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,s=0,a=e.length;for(n=0;r<a&&!((s=e.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(t.s.c=--n,n=0;r<a&&!((s=e.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;if(t.s.r=--n,r===a||10!=s)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=a&&!((s=e.charCodeAt(r)-64)<1||s>26);++r)n=26*n+s;for(t.e.c=--n,n=0;r!=a&&!((s=e.charCodeAt(r)-48)<0||s>9);++r)n=10*n+s;return t.e.r=--n,t}function JC(e,t){var n="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=TN(e.z,n?GN(t):t)}catch(Ua){}try{return e.w=TN((e.XF||{}).numFmtId||(n?14:0),n?GN(t):t)}catch(Ua){return""+t}}function ZC(e,t,n){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),"e"==e.t?IB[e.v]||e.v:JC(e,void 0==t?e.v:t))}function $C(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function eB(e,t,n){var r=n||{},s=e?Array.isArray(e):r.dense;var a=e||(s?[]:{}),i=0,o=0;if(a&&null!=r.origin){if("number"==typeof r.origin)i=r.origin;else{var l="string"==typeof r.origin?KC(r.origin):r.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=YC(a["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),-1==i&&(c.e.r=i=d.e.r+1)}for(var u=0;u!=t.length;++u)if(t[u]){if(!Array.isArray(t[u]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[u].length;++h)if("undefined"!==typeof t[u][h]){var A={v:t[u][h]},f=i+u,p=o+h;if(c.s.r>f&&(c.s.r=f),c.s.c>p&&(c.s.c=p),c.e.r<f&&(c.e.r=f),c.e.c<p&&(c.e.c=p),!t[u][h]||"object"!==typeof t[u][h]||Array.isArray(t[u][h])||t[u][h]instanceof Date)if(Array.isArray(A.v)&&(A.f=t[u][h][1],A.v=A.v[0]),null===A.v)if(A.f)A.t="n";else if(r.nullError)A.t="e",A.v=0;else{if(!r.sheetStubs)continue;A.t="z"}else"number"===typeof A.v?A.t="n":"boolean"===typeof A.v?A.t="b":A.v instanceof Date?(A.z=r.dateNF||eN[14],r.cellDates?(A.t="d",A.w=TN(A.z,GN(A.v))):(A.t="n",A.v=GN(A.v),A.w=TN(A.z,A.v))):A.t="s";else A=t[u][h];if(s)a[f]||(a[f]=[]),a[f][p]&&a[f][p].z&&(A.z=a[f][p].z),a[f][p]=A;else{var m=GC({c:p,r:f});a[m]&&a[m].z&&(A.z=a[m].z),a[m]=A}}}return c.s.c<1e7&&(a["!ref"]=XC(c)),a}function tB(e,t){return eB(null,e,t)}function nB(e,t){return t||(t=LC(4)),t.write_shift(4,e),t}function rB(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function sB(e,t){var n=!1;return null==t&&(n=!0,t=LC(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}function aB(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function iB(e,t){var n=e.l,r=e.read_shift(1),s=rB(e),a=[],i={t:s,h:s};if(0!==(1&r)){for(var o=e.read_shift(4),l=0;l!=o;++l)a.push(aB(e));i.r=a}else i.r=[{ich:0,ifnt:0}];return e.l=n+t,i}var oB=iB;function lB(e,t){var n=!1;return null==t&&(n=!0,t=LC(23+4*e.t.length)),t.write_shift(1,1),sB(e.t,t),t.write_shift(4,1),function(e,t){t||(t=LC(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),n?t.slice(0,t.l):t}function cB(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function dB(e,t){return null==t&&(t=LC(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function uB(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function hB(e,t){return null==t&&(t=LC(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var AB=rB,fB=sB;function pB(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function mB(e,t){var n=!1;return null==t&&(n=!0,t=LC(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}var gB=rB,xB=pB,vB=mB;function bB(e){var t=e.slice(e.l,e.l+4),n=1&t[0],r=2&t[0];e.l+=4;var s=0===r?xC([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):CC(t,0)>>2;return n?s/100:s}function yB(e,t){null==t&&(t=LC(4));var n=0,r=0,s=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?r=1:s==(0|s)&&s>=-(1<<29)&&s<1<<29&&(r=1,n=1),!r)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((n?s:e)<<2)+(n+2))}function wB(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var NB=wB,jB=function(e,t){return t||(t=LC(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function CB(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function BB(e,t){return(t||LC(8)).write_shift(8,e,"f")}function kB(e,t){if(t||(t=LC(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var n=e.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),t.write_shift(2,n),e.rgb&&null==e.theme){var r=e.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var SB=80,_B={1:{n:"CodePage",t:2},2:{n:"Category",t:SB},3:{n:"PresentationFormat",t:SB},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:SB},15:{n:"Company",t:SB},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:SB},27:{n:"ContentStatus",t:SB},28:{n:"Language",t:SB},29:{n:"Version",t:SB},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},EB={1:{n:"CodePage",t:2},2:{n:"Title",t:SB},3:{n:"Subject",t:SB},4:{n:"Author",t:SB},5:{n:"Keywords",t:SB},6:{n:"Comments",t:SB},7:{n:"Template",t:SB},8:{n:"LastAuthor",t:SB},9:{n:"RevNumber",t:SB},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:SB},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function FB(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var TB=rj(FB([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),IB={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},DB={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},LB={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function PB(e,t){var n,r=function(e){for(var t=[],n=HN(e),r=0;r!==n.length;++r)null==t[e[n[r]]]&&(t[e[n[r]]]=[]),t[e[n[r]]].push(n[r]);return t}(DB),s=[];s[s.length]=dj,s[s.length]=Ej("Types",null,{xmlns:Lj,"xmlns:xsd":Wj,"xmlns:xsi":zj}),s=s.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(e){return Ej("Default",null,{Extension:e[0],ContentType:e[1]})}));var a=function(r){e[r]&&e[r].length>0&&(n=e[r][0],s[s.length]=Ej("Override",null,{PartName:("/"==n[0]?"":"/")+n,ContentType:LB[r][t.bookType]||LB[r].xlsx}))},i=function(n){(e[n]||[]).forEach(function(e){s[s.length]=Ej("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:LB[n][t.bookType]||LB[n].xlsx})})},o=function(t){(e[t]||[]).forEach(function(e){s[s.length]=Ej("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:r[t][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),s.length>2&&(s[s.length]="</Types>",s[1]=s[1].replace("/>",">")),s.join("")}var RB={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function UB(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function OB(e){var t=[dj,Ej("Relationships",null,{xmlns:Pj})];return HN(e["!id"]).forEach(function(n){t[t.length]=Ej("Relationship",null,e["!id"][n])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function MB(e,t,n,r,s,a){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=r,s.Target=n,a?s.TargetMode=a:[RB.HLINK,RB.XPATH,RB.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}function QB(e,t,n){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function HB(e,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function zB(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+bw.version+"</meta:generator></office:meta></office:document-meta>"}var WB=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function VB(e,t,n,r,s){null==s[e]&&null!=t&&""!==t&&(s[e]=t,t=pj(t),r[r.length]=n?Ej(e,t,n):Sj(e,t))}function KB(e,t){var n=t||{},r=[dj,Ej("cp:coreProperties",null,{"xmlns:cp":Tj,"xmlns:dc":Uj,"xmlns:dcterms":Oj,"xmlns:dcmitype":Mj,"xmlns:xsi":zj})],s={};if(!e&&!n.Props)return r.join("");e&&(null!=e.CreatedDate&&VB("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:Fj(e.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s),null!=e.ModifiedDate&&VB("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:Fj(e.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s));for(var a=0;a!=WB.length;++a){var i=WB[a],o=n.Props&&null!=n.Props[i[1]]?n.Props[i[1]]:e?e[i[1]]:null;!0===o?o="1":!1===o?o="0":"number"==typeof o&&(o=String(o)),null!=o&&VB(i[0],o,null,r,s)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var GB=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],qB=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function XB(e){var t=[],n=Ej;return e||(e={}),e.Application="SheetJS",t[t.length]=dj,t[t.length]=Ej("Properties",null,{xmlns:Dj,"xmlns:vt":Hj}),GB.forEach(function(r){if(void 0!==e[r[1]]){var s;switch(r[2]){case"string":s=pj(String(e[r[1]]));break;case"bool":s=e[r[1]]?"true":"false"}void 0!==s&&(t[t.length]=n(r[0],s))}}),t[t.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=n("TitlesOfParts",n("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+pj(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function YB(e){var t=[dj,Ej("Properties",null,{xmlns:Ij,"xmlns:vt":Hj})];if(!e)return t.join("");var n=1;return HN(e).forEach(function(r){++n,t[t.length]=Ej("property",function(e,t){switch(typeof e){case"string":var n=Ej("vt:lpwstr",pj(e));return t&&(n=n.replace(/&quot;/g,"_x0022_")),n;case"number":return Ej((0|e)==e?"vt:i4":"vt:r8",pj(String(e)));case"boolean":return Ej("vt:bool",e?"true":"false")}if(e instanceof Date)return Ej("vt:filetime",Fj(e));throw new Error("Unable to serialize "+e)}(e[r],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:pj(r)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var JB={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function ZB(e,t){var n=LC(4),r=LC(4);switch(n.write_shift(4,80==e?31:e),e){case 3:r.write_shift(-4,t);break;case 5:(r=LC(8)).write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,n=t%Math.pow(2,32),r=(t-n)/Math.pow(2,32);r*=1e7;var s=(n*=1e7)/Math.pow(2,32)|0;s>0&&(n%=Math.pow(2,32),r+=s);var a=LC(8);return a.write_shift(4,n),a.write_shift(4,r),a}(t);break;case 31:case 80:for((r=LC(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Hw([n,r])}var $B=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function ek(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function tk(e,t,n){var r=LC(8),s=[],a=[],i=8,o=0,l=LC(8),c=LC(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),a.push(l),s.push(c),i+=8+l.length,!t){(c=LC(8)).write_shift(4,0),s.unshift(c);var d=[LC(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var u=e[o][0];for((l=LC(8+2*(u.length+1)+(u.length%2?0:2))).write_shift(4,o+2),l.write_shift(4,u.length+1),l.write_shift(0,u,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Hw(d),a.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if((!t||t[e[o][0]])&&!($B.indexOf(e[o][0])>-1||qB.indexOf(e[o][0])>-1)&&null!=e[o][1]){var h=e[o][1],A=0;if(t){var f=n[A=+t[e[o][0]]];if("version"==f.p&&"string"==typeof h){var p=h.split(".");h=(+p[0]<<16)+(+p[1]||0)}l=ZB(f.t,h)}else{var m=ek(h);-1==m&&(m=31,h=String(h)),l=ZB(m,h)}a.push(l),(c=LC(8)).write_shift(4,t?A:2+o),s.push(c),i+=8+l.length}var g=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,g),g+=a[o].length;return r.write_shift(4,i),r.write_shift(4,a.length),Hw([r].concat(s).concat(a))}function nk(e,t,n,r,s,a){var i=LC(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,UN.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,s?68:48);var l=tk(e,n,r);if(o.push(l),s){var c=tk(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(c)}return Hw(o)}function rk(e,t){return 1===e.read_shift(t)}function sk(e,t){return t||(t=LC(2)),t.write_shift(2,+!!e),t}function ak(e){return e.read_shift(2,"u")}function ik(e,t){return t||(t=LC(2)),t.write_shift(2,e),t}function ok(e,t,n){return n||(n=LC(2)),n.write_shift(1,"e"==t?+e:+!!e),n.write_shift(1,"e"==t?1:0),n}function lk(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),s="sbcs-cont",a=yw;(n&&n.biff>=8&&(yw=1200),n&&8!=n.biff)?12==n.biff&&(s="wstr"):e.read_shift(1)&&(s="dbcs-cont");n.biff>=2&&n.biff<=5&&(s="cpstr");var i=r?e.read_shift(r,s):"";return yw=a,i}function ck(e){var t=e.t||"",n=LC(3);n.write_shift(2,t.length),n.write_shift(1,1);var r=LC(2*t.length);return r.write_shift(2*t.length,t,"utf16le"),Hw([n,r])}function dk(e,t,n){if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function uk(e,t,n){var r=e.read_shift(n&&2==n.biff?1:2);return 0===r?(e.l++,""):dk(e,r,n)}function hk(e,t,n){if(n.biff>5)return uk(e,0,n);var r=e.read_shift(1);return 0===r?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Ak(e,t,n){return n||(n=LC(3+2*e.length)),n.write_shift(2,e.length),n.write_shift(1,1),n.write_shift(31,e,"utf16le"),n}function fk(e,t){t||(t=LC(6+2*e.length)),t.write_shift(4,1+e.length);for(var n=0;n<e.length;++n)t.write_shift(2,e.charCodeAt(n));return t.write_shift(2,0),t}function pk(e){var t=LC(512),n=0,r=e.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var s=r.indexOf("#"),a=s>-1?31:23;switch(r.charAt(0)){case"#":a=28;break;case".":a&=-3}t.write_shift(4,2),t.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(n=0;n<i.length;++n)t.write_shift(4,i[n]);if(28==a)fk(r=r.slice(1),t);else if(2&a){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<i.length;++n)t.write_shift(1,parseInt(i[n],16));var o=s>-1?r.slice(0,s):r;for(t.write_shift(4,2*(o.length+1)),n=0;n<o.length;++n)t.write_shift(2,o.charCodeAt(n));t.write_shift(2,0),8&a&&fk(s>-1?r.slice(s+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<i.length;++n)t.write_shift(1,parseInt(i[n],16));for(var l=0;"../"==r.slice(3*l,3*l+3)||"..\\"==r.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)t.write_shift(1,255&r.charCodeAt(n+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),n=0;n<6;++n)t.write_shift(4,0)}return t.slice(0,t.l)}function mk(e,t,n,r){return r||(r=LC(6)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,n||0),r}function gk(e,t,n){var r=n.biff>8?4:2;return[e.read_shift(r),e.read_shift(r,"i"),e.read_shift(r,"i")]}function xk(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:n}}}function vk(e,t){return t||(t=LC(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function bk(e,t,n){var r=1536,s=16;switch(n.bookType){case"biff8":case"xla":break;case"biff5":r=1280,s=8;break;case"biff4":r=4,s=6;break;case"biff3":r=3,s=6;break;case"biff2":r=2,s=4;break;default:throw new Error("unsupported BIFF version")}var a=LC(s);return a.write_shift(2,r),a.write_shift(2,t),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function yk(e,t){var n=!t||t.biff>=8?2:1,r=LC(8+n*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(n*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=r.slice(0,r.l);return s.l=r.l,s}function wk(e,t,n,r){var s=n&&5==n.biff;r||(r=LC(s?3+t.length:5+2*t.length)),r.write_shift(2,e),r.write_shift(s?1:2,t.length),s||r.write_shift(1,1),r.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var a=r.length>r.l?r.slice(0,r.l):r;return null==a.l&&(a.l=a.length),a}function Nk(e,t,n,r){var s=n&&5==n.biff;r||(r=LC(s?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&s&&(a|=1024),r.write_shift(4,a),r.write_shift(4,0),s||r.write_shift(4,0),r.write_shift(2,0),r}function jk(e,t,n){if(n.biff<8)return function(e,t,n){3==e[e.l+1]&&e[e.l]++;var r=lk(e,0,n);return 3==r.charCodeAt(0)?r.slice(1):r}(e,0,n);for(var r=[],s=e.l+t,a=e.read_shift(n.biff>8?4:2);0!==a--;)r.push(gk(e,n.biff,n));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return r}function Ck(e){var t=LC(24),n=KC(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(r[s],16));return Hw([t,pk(e[1])])}function Bk(e){var t=e[1].Tooltip,n=LC(10+2*(t.length+1));n.write_shift(2,2048);var r=KC(e[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var s=0;s<t.length;++s)n.write_shift(2,t.charCodeAt(s));return n.write_shift(2,0),n}function kk(e,t,n){if(!n.cellStyles)return DC(e,t);var r=n&&n.biff>=12?4:2,s=e.read_shift(r),a=e.read_shift(r),i=e.read_shift(r),o=e.read_shift(r),l=e.read_shift(2);2==r&&(e.l+=2);var c={s:s,e:a,w:i,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}var Sk=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=WN({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(t,n){var r=n||{};r.dateNF||(r.dateNF="yyyymmdd");var s=tB(function(t,n){var r=[],s=Rw(1);switch(n.type){case"base64":s=Ow(Dw(t));break;case"binary":s=Ow(t);break;case"buffer":case"array":s=t}IC(s,0);var a=s.read_shift(1),i=!!(136&a),o=!1,l=!1;switch(a){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:o=!0,i=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+a.toString(16))}var c=0,d=521;2==a&&(c=s.read_shift(2)),s.l+=3,2!=a&&(c=s.read_shift(4)),c>1048576&&(c=1e6),2!=a&&(d=s.read_shift(2));var u=s.read_shift(2),h=n.codepage||1252;2!=a&&(s.l+=16,s.read_shift(1),0!==s[s.l]&&(h=e[s[s.l]]),s.l+=1,s.l+=2),l&&(s.l+=36);for(var A=[],f={},p=Math.min(s.length,2==a?521:d-10-(o?264:0)),m=l?32:11;s.l<p&&13!=s[s.l];)switch((f={}).name=_w.utils.decode(h,s.slice(s.l,s.l+m)).replace(/[\u0000\r\n].*$/g,""),s.l+=m,f.type=String.fromCharCode(s.read_shift(1)),2==a||l||(f.offset=s.read_shift(4)),f.len=s.read_shift(1),2==a&&(f.offset=s.read_shift(2)),f.dec=s.read_shift(1),f.name.length&&A.push(f),2!=a&&(s.l+=l?13:14),f.type){case"B":o&&8==f.len||!n.WTF||console.log("Skipping "+f.name+":"+f.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+f.name+":"+f.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+f.type)}if(13!==s[s.l]&&(s.l=d-1),13!==s.read_shift(1))throw new Error("DBF Terminator not found "+s.l+" "+s[s.l]);s.l=d;var g=0,x=0;for(r[0]=[],x=0;x!=A.length;++x)r[0][x]=A[x].name;for(;c-- >0;)if(42!==s[s.l])for(++s.l,r[++g]=[],x=0,x=0;x!=A.length;++x){var v=s.slice(s.l,s.l+A[x].len);s.l+=A[x].len,IC(v,0);var b=_w.utils.decode(h,v);switch(A[x].type){case"C":b.trim().length&&(r[g][x]=b.replace(/\s+$/,""));break;case"D":8===b.length?r[g][x]=new Date(+b.slice(0,4),+b.slice(4,6)-1,+b.slice(6,8)):r[g][x]=b;break;case"F":r[g][x]=parseFloat(b.trim());break;case"+":case"I":r[g][x]=l?2147483648^v.read_shift(-4,"i"):v.read_shift(4,"i");break;case"L":switch(b.trim().toUpperCase()){case"Y":case"T":r[g][x]=!0;break;case"N":case"F":r[g][x]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+b+"|")}break;case"M":if(!i)throw new Error("DBF Unexpected MEMO for type "+a.toString(16));r[g][x]="##MEMO##"+(l?parseInt(b.trim(),10):v.read_shift(4));break;case"N":(b=b.replace(/\u0000/g,"").trim())&&"."!=b&&(r[g][x]=+b||0);break;case"@":r[g][x]=new Date(v.read_shift(-8,"f")-621356832e5);break;case"T":r[g][x]=new Date(864e5*(v.read_shift(4)-2440588)+v.read_shift(4));break;case"Y":r[g][x]=v.read_shift(4,"i")/1e4+v.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":r[g][x]=-v.read_shift(-8,"f");break;case"B":if(o&&8==A[x].len){r[g][x]=v.read_shift(8,"f");break}case"G":case"P":v.l+=A[x].len;break;case"0":if("_NullFlags"===A[x].name)break;default:throw new Error("DBF Unsupported data type "+A[x].type)}}else s.l+=u;if(2!=a&&s.l<s.length&&26!=s[s.l++])throw new Error("DBF EOF Marker missing "+(s.l-1)+" of "+s.length+" "+s[s.l-1].toString(16));return n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),n.DBF=A,r}(t,r),r);return s["!cols"]=r.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete r.DBF,s}var r={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return $C(n(e,t),t)}catch(Ua){if(t&&t.WTF)throw Ua}return{SheetNames:[],Sheets:{}}},to_sheet:n,from_sheet:function(e,n){var s=n||{};if(+s.codepage>=0&&Bw(+s.codepage),"string"==s.type)throw new Error("Cannot write DBF to JS string");var a=PC(),i=YE(e,{header:1,raw:!0,cellDates:!0}),o=i[0],l=i.slice(1),c=e["!cols"]||[],d=0,u=0,h=0,A=1;for(d=0;d<o.length;++d)if(((c[d]||{}).DBF||{}).name)o[d]=c[d].DBF.name,++h;else if(null!=o[d]){if(++h,"number"===typeof o[d]&&(o[d]=o[d].toString(10)),"string"!==typeof o[d])throw new Error("DBF Invalid column name "+o[d]+" |"+typeof o[d]+"|");if(o.indexOf(o[d])!==d)for(u=0;u<1024;++u)if(-1==o.indexOf(o[d]+"_"+u)){o[d]+="_"+u;break}}var f=YC(e["!ref"]),p=[],m=[],g=[];for(d=0;d<=f.e.c-f.s.c;++d){var x="",v="",b=0,y=[];for(u=0;u<l.length;++u)null!=l[u][d]&&y.push(l[u][d]);if(0!=y.length&&null!=o[d]){for(u=0;u<y.length;++u){switch(typeof y[u]){case"number":v="B";break;case"string":default:v="C";break;case"boolean":v="L";break;case"object":v=y[u]instanceof Date?"D":"C"}b=Math.max(b,String(y[u]).length),x=x&&x!=v?"C":v}b>250&&(b=250),"C"==(v=((c[d]||{}).DBF||{}).type)&&c[d].DBF.len>b&&(b=c[d].DBF.len),"B"==x&&"N"==v&&(x="N",g[d]=c[d].DBF.dec,b=c[d].DBF.len),m[d]="C"==x||"N"==v?b:r[x]||0,A+=m[d],p[d]=x}else p[d]="?"}var w=a.next(32);for(w.write_shift(4,318902576),w.write_shift(4,l.length),w.write_shift(2,296+32*h),w.write_shift(2,A),d=0;d<4;++d)w.write_shift(4,0);for(w.write_shift(4,(+t[ww]||3)<<8),d=0,u=0;d<o.length;++d)if(null!=o[d]){var N=a.next(32),j=(o[d].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);N.write_shift(1,j,"sbcs"),N.write_shift(1,"?"==p[d]?"C":p[d],"sbcs"),N.write_shift(4,u),N.write_shift(1,m[d]||r[p[d]]||0),N.write_shift(1,g[d]||0),N.write_shift(1,2),N.write_shift(4,0),N.write_shift(1,0),N.write_shift(4,0),N.write_shift(4,0),u+=m[d]||r[p[d]]||0}var C=a.next(264);for(C.write_shift(4,13),d=0;d<65;++d)C.write_shift(4,0);for(d=0;d<l.length;++d){var B=a.next(A);for(B.write_shift(1,0),u=0;u<o.length;++u)if(null!=o[u])switch(p[u]){case"L":B.write_shift(1,null==l[d][u]?63:l[d][u]?84:70);break;case"B":B.write_shift(8,l[d][u]||0,"f");break;case"N":var k="0";for("number"==typeof l[d][u]&&(k=l[d][u].toFixed(g[u]||0)),h=0;h<m[u]-k.length;++h)B.write_shift(1,32);B.write_shift(1,k,"sbcs");break;case"D":l[d][u]?(B.write_shift(4,("0000"+l[d][u].getFullYear()).slice(-4),"sbcs"),B.write_shift(2,("00"+(l[d][u].getMonth()+1)).slice(-2),"sbcs"),B.write_shift(2,("00"+l[d][u].getDate()).slice(-2),"sbcs")):B.write_shift(8,"00000000","sbcs");break;case"C":var S=String(null!=l[d][u]?l[d][u]:"").slice(0,m[u]);for(B.write_shift(1,S,"sbcs"),h=0;h<m[u]-S.length;++h)B.write_shift(1,32)}}return a.next(1).write_shift(1,26),a.end()}}}(),_k=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+HN(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(t,n){var r=e[n];return"number"==typeof r?Fw(r):r},r=function(e,t,n){var r=t.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==r?e:Fw(r)};function s(e,s){var a,i=e.split(/[\n\r]+/),o=-1,l=-1,c=0,d=0,u=[],h=[],A=null,f={},p=[],m=[],g=[],x=0;for(+s.codepage>=0&&Bw(+s.codepage);c!==i.length;++c){x=0;var v,b=i[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),y=b.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),w=y[0];if(b.length>0)switch(w){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==y[1].charAt(0)&&h.push(b.slice(3).replace(/;;/g,";"));break;case"C":var N=!1,j=!1,C=!1,B=!1,k=-1,S=-1;for(d=1;d<y.length;++d)switch(y[d].charAt(0)){case"A":case"G":break;case"X":l=parseInt(y[d].slice(1))-1,j=!0;break;case"Y":for(o=parseInt(y[d].slice(1))-1,j||(l=0),a=u.length;a<=o;++a)u[a]=[];break;case"K":'"'===(v=y[d].slice(1)).charAt(0)?v=v.slice(1,v.length-1):"TRUE"===v?v=!0:"FALSE"===v?v=!1:isNaN(aj(v))?isNaN(oj(v).getDate())||(v=tj(v)):(v=aj(v),null!==A&&SN(A)&&(v=JN(v))),"undefined"!==typeof _w&&"string"==typeof v&&"string"!=(s||{}).type&&(s||{}).codepage&&(v=_w.utils.decode(s.codepage,v)),N=!0;break;case"E":B=!0;var _=bS(y[d].slice(1),{r:o,c:l});u[o][l]=[u[o][l],_];break;case"S":C=!0,u[o][l]=[u[o][l],"S5S"];break;case"R":k=parseInt(y[d].slice(1))-1;break;case"C":S=parseInt(y[d].slice(1))-1;break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+b)}if(N&&(u[o][l]&&2==u[o][l].length?u[o][l][0]=v:u[o][l]=v,A=null),C){if(B)throw new Error("SYLK shared formula cannot have own formula");var E=k>-1&&u[k][S];if(!E||!E[1])throw new Error("SYLK shared formula cannot find base");u[o][l][1]=NS(E[1],{r:o-k,c:l-S})}break;case"F":var F=0;for(d=1;d<y.length;++d)switch(y[d].charAt(0)){case"X":l=parseInt(y[d].slice(1))-1,++F;break;case"Y":for(o=parseInt(y[d].slice(1))-1,a=u.length;a<=o;++a)u[a]=[];break;case"M":x=parseInt(y[d].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":A=h[parseInt(y[d].slice(1))];break;case"W":for(g=y[d].slice(1).split(" "),a=parseInt(g[0],10);a<=parseInt(g[1],10);++a)x=parseInt(g[2],10),m[a-1]=0===x?{hidden:!0}:{wch:x},Kk(m[a-1]);break;case"C":m[l=parseInt(y[d].slice(1))-1]||(m[l]={});break;case"R":p[o=parseInt(y[d].slice(1))-1]||(p[o]={}),x>0?(p[o].hpt=x,p[o].hpx=Xk(x)):0===x&&(p[o].hidden=!0);break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+b)}F<1&&(A=null);break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+b)}}return p.length>0&&(f["!rows"]=p),m.length>0&&(f["!cols"]=m),s&&s.sheetRows&&(u=u.slice(0,s.sheetRows)),[u,f]}function a(e,t){var n=function(e,t){switch(t.type){case"base64":return s(Dw(e),t);case"binary":return s(e,t);case"buffer":return s(Lw&&Buffer.isBuffer(e)?e.toString("binary"):Qw(e),t);case"array":return s(nj(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),r=n[0],a=n[1],i=tB(r,t);return HN(a).forEach(function(e){i[e]=a[e]}),i}function i(e,t,n,r){var s="C;Y"+(n+1)+";X"+(r+1)+";K";switch(e.t){case"n":s+=e.v||0,e.f&&!e.F&&(s+=";E"+wS(e.f,{r:n,c:r}));break;case"b":s+=e.v?"TRUE":"FALSE";break;case"e":s+=e.w||e.v;break;case"d":s+='"'+(e.w||e.v)+'"';break;case"s":s+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return s}return e["|"]=254,{to_workbook:function(e,t){return $C(a(e,t),t)},to_sheet:a,from_sheet:function(e,t){var n,r,s=["ID;PWXL;N;E"],a=[],o=YC(e["!ref"]),l=Array.isArray(e),c="\r\n";s.push("P;PGeneral"),s.push("F;P0;DG0G8;M255"),e["!cols"]&&(r=s,e["!cols"].forEach(function(e,t){var n="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?n+="0":("number"!=typeof e.width||e.wpx||(e.wpx=zk(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=Wk(e.wpx)),"number"==typeof e.wch&&(n+=Math.round(e.wch)))," "!=n.charAt(n.length-1)&&r.push(n)})),e["!rows"]&&function(e,t){t.forEach(function(t,n){var r="F;";t.hidden?r+="M0;":t.hpt?r+="M"+20*t.hpt+";":t.hpx&&(r+="M"+20*qk(t.hpx)+";"),r.length>2&&e.push(r+"R"+(n+1))})}(s,e["!rows"]),s.push("B;Y"+(o.e.r-o.s.r+1)+";X"+(o.e.c-o.s.c+1)+";D"+[o.s.c,o.s.r,o.e.c,o.e.r].join(" "));for(var d=o.s.r;d<=o.e.r;++d)for(var u=o.s.c;u<=o.e.c;++u){var h=GC({r:d,c:u});(n=l?(e[d]||[])[u]:e[h])&&(null!=n.v||n.f&&!n.F)&&a.push(i(n,0,d,u))}return s.join(c)+c+a.join(c)+c+"E"+c}}}(),Ek=function(){function e(e,t){for(var n=e.split("\n"),r=-1,s=-1,a=0,i=[];a!==n.length;++a)if("BOT"!==n[a].trim()){if(!(r<0)){for(var o=n[a].trim().split(","),l=o[0],c=o[1],d=n[++a]||"";1&(d.match(/["]/g)||[]).length&&a<n.length-1;)d+="\n"+n[++a];switch(d=d.trim(),+l){case-1:if("BOT"===d){i[++r]=[],s=0;continue}if("EOD"!==d)throw new Error("Unrecognized DIF special command "+d);break;case 0:"TRUE"===d?i[r][s]=!0:"FALSE"===d?i[r][s]=!1:isNaN(aj(c))?isNaN(oj(c).getDate())?i[r][s]=c:i[r][s]=tj(c):i[r][s]=aj(c),++s;break;case 1:(d=(d=d.slice(1,d.length-1)).replace(/""/g,'"'))&&d.match(/^=".*"$/)&&(d=d.slice(2,-1)),i[r][s++]=""!==d?d:null}if("EOD"===d)break}}else i[++r]=[],s=0;return t&&t.sheetRows&&(i=i.slice(0,t.sheetRows)),i}function t(t,n){return tB(function(t,n){switch(n.type){case"base64":return e(Dw(t),n);case"binary":return e(t,n);case"buffer":return e(Lw&&Buffer.isBuffer(t)?t.toString("binary"):Qw(t),n);case"array":return e(nj(t),n)}throw new Error("Unrecognized type "+n.type)}(t,n),n)}var n=function(){var e=function(e,t,n,r,s){e.push(t),e.push(n+","+r),e.push('"'+s.replace(/"/g,'""')+'"')},t=function(e,t,n,r){e.push(t+","+n),e.push(1==t?'"'+r.replace(/"/g,'""')+'"':r)};return function(n){var r,s=[],a=YC(n["!ref"]),i=Array.isArray(n);e(s,"TABLE",0,1,"sheetjs"),e(s,"VECTORS",0,a.e.r-a.s.r+1,""),e(s,"TUPLES",0,a.e.c-a.s.c+1,""),e(s,"DATA",0,0,"");for(var o=a.s.r;o<=a.e.r;++o){t(s,-1,0,"BOT");for(var l=a.s.c;l<=a.e.c;++l){var c=GC({r:o,c:l});if(r=i?(n[o]||[])[l]:n[c])switch(r.t){case"n":var d=r.w;d||null==r.v||(d=r.v),null==d?r.f&&!r.F?t(s,1,0,"="+r.f):t(s,1,0,""):t(s,0,d,"V");break;case"b":t(s,0,r.v?1:0,r.v?"TRUE":"FALSE");break;case"s":t(s,1,0,isNaN(r.v)?r.v:'="'+r.v+'"');break;case"d":r.w||(r.w=TN(r.z||eN[14],GN(tj(r.v)))),t(s,0,r.w,"V");break;default:t(s,1,0,"")}else t(s,1,0,"")}}t(s,-1,0,"EOD");return s.join("\r\n")}}();return{to_workbook:function(e,n){return $C(t(e,n),n)},to_sheet:t,from_sheet:n}}(),Fk=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(t,n){return tB(function(t,n){for(var r=t.split("\n"),s=-1,a=-1,i=0,o=[];i!==r.length;++i){var l=r[i].trim().split(":");if("cell"===l[0]){var c=KC(l[1]);if(o.length<=c.r)for(s=o.length;s<=c.r;++s)o[s]||(o[s]=[]);switch(s=c.r,a=c.c,l[2]){case"t":o[s][a]=e(l[3]);break;case"v":o[s][a]=+l[3];break;case"vtf":var d=l[l.length-1];case"vtc":"nl"===l[3]?o[s][a]=!!+l[4]:o[s][a]=+l[4],"vtf"==l[2]&&(o[s][a]=[o[s][a],d])}}}return n&&n.sheetRows&&(o=o.slice(0,n.sheetRows)),o}(t,n),n)}var r=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),i="--SocialCalcSpreadsheetControlSave--";function o(e){if(!e||!e["!ref"])return"";for(var n,r=[],s=[],a="",i=qC(e["!ref"]),o=Array.isArray(e),l=i.s.r;l<=i.e.r;++l)for(var c=i.s.c;c<=i.e.c;++c)if(a=GC({r:l,c:c}),(n=o?(e[l]||[])[c]:e[a])&&null!=n.v&&"z"!==n.t){switch(s=["cell",a,"t"],n.t){case"s":case"str":s.push(t(n.v));break;case"n":n.f?(s[2]="vtf",s[3]="n",s[4]=n.v,s[5]=t(n.f)):(s[2]="v",s[3]=n.v);break;case"b":s[2]="vt"+(n.f?"f":"c"),s[3]="nl",s[4]=n.v?"1":"0",s[5]=t(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var d=GN(tj(n.v));s[2]="vtc",s[3]="nd",s[4]=""+d,s[5]=n.w||TN(n.z||eN[14],d);break;case"e":continue}r.push(s.join(":"))}return r.push("sheet:c:"+(i.e.c-i.s.c+1)+":r:"+(i.e.r-i.s.r+1)+":tvf:1"),r.push("valueformat:1:text-wiki"),r.join("\n")}return{to_workbook:function(e,t){return $C(n(e,t),t)},to_sheet:n,from_sheet:function(e){return[r,s,a,s,o(e),i].join("\n")}}}(),Tk=function(){function e(e,t,n,r,s){s.raw?t[n][r]=e:""===e||("TRUE"===e?t[n][r]=!0:"FALSE"===e?t[n][r]=!1:isNaN(aj(e))?isNaN(oj(e).getDate())?t[n][r]=e:t[n][r]=tj(e):t[n][r]=aj(e))}var t={44:",",9:"\t",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function r(e){for(var r={},s=!1,a=0,i=0;a<e.length;++a)34==(i=e.charCodeAt(a))?s=!s:!s&&i in t&&(r[i]=(r[i]||0)+1);for(a in i=[],r)Object.prototype.hasOwnProperty.call(r,a)&&i.push([r[a],a]);if(!i.length)for(a in r=n)Object.prototype.hasOwnProperty.call(r,a)&&i.push([r[a],a]);return i.sort(function(e,t){return e[0]-t[0]||n[e[1]]-n[t[1]]}),t[i.pop()[1]]||44}function s(e,t){var n=t||{},s="";var a=n.dense?[]:{},i={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(s=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(s=e.charAt(4),e=e.slice(6)):s=r(e.slice(0,1024)):s=n&&n.FS?n.FS:r(e.slice(0,1024));var o=0,l=0,c=0,d=0,u=0,h=s.charCodeAt(0),A=!1,f=0,p=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var m=null!=n.dateNF?function(e){var t="number"==typeof e?eN[e]:e;return t=t.replace(PN,"(\\d+)"),new RegExp("^"+t+"$")}(n.dateNF):null;function g(){var t=e.slice(d,u),r={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)r.t="z";else if(n.raw)r.t="s",r.v=t;else if(0===t.trim().length)r.t="s",r.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(r.t="s",r.v=t.slice(2,-1).replace(/""/g,'"')):!function(e){return 1!=e.length}(t)?(r.t="s",r.v=t):(r.t="n",r.f=t.slice(1));else if("TRUE"==t)r.t="b",r.v=!0;else if("FALSE"==t)r.t="b",r.v=!1;else if(isNaN(c=aj(t)))if(!isNaN(oj(t).getDate())||m&&t.match(m)){r.z=n.dateNF||eN[14];var s=0;m&&t.match(m)&&(t=function(e,t,n){var r=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(t.match(PN)||[]).forEach(function(e,t){var c=parseInt(n[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":r=c;break;case"d":a=c;break;case"h":i=c;break;case"s":l=c;break;case"m":i>=0?o=c:s=c}}),l>=0&&-1==o&&s>=0&&(o=s,s=-1);var c=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==i&&-1==o&&-1==l?c:-1==r&&-1==s&&-1==a?d:c+"T"+d}(0,n.dateNF,t.match(m)||[]),s=1),n.cellDates?(r.t="d",r.v=tj(t,s)):(r.t="n",r.v=GN(tj(t,s))),!1!==n.cellText&&(r.w=TN(r.z,r.v instanceof Date?GN(r.v):r.v)),n.cellNF||delete r.z}else r.t="s",r.v=t;else r.t="n",!1!==n.cellText&&(r.w=t),r.v=c;if("z"==r.t||(n.dense?(a[o]||(a[o]=[]),a[o][l]=r):a[GC({c:l,r:o})]=r),d=u+1,p=e.charCodeAt(d),i.e.c<l&&(i.e.c=l),i.e.r<o&&(i.e.r=o),f==h)++l;else if(l=0,++o,n.sheetRows&&n.sheetRows<=o)return!0}e:for(;u<e.length;++u)switch(f=e.charCodeAt(u)){case 34:34===p&&(A=!A);break;case h:case 10:case 13:if(!A&&g())break e}return u-d>0&&g(),a["!ref"]=XC(i),a}function a(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?s(t,n):tB(function(t,n){var r=n||{},s=[];if(!t||0===t.length)return s;for(var a=t.split(/[\r\n]/),i=a.length-1;i>=0&&0===a[i].length;)--i;for(var o=10,l=0,c=0;c<=i;++c)-1==(l=a[c].indexOf(" "))?l=a[c].length:l++,o=Math.max(o,l);for(c=0;c<=i;++c){s[c]=[];var d=0;for(e(a[c].slice(0,o).trim(),s,c,d,r),d=1;d<=(a[c].length-o)/10+1;++d)e(a[c].slice(o+10*(d-1),o+10*d).trim(),s,c,d,r)}return r.sheetRows&&(s=s.slice(0,r.sheetRows)),s}(t,n),n):s(t,n)}function i(e,t){var n="",r="string"==t.type?[0,0,0,0]:QE(e,t);switch(t.type){case"base64":n=Dw(e);break;case"binary":case"string":n=e;break;case"buffer":n=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof _w?_w.utils.decode(t.codepage,e):Lw&&Buffer.isBuffer(e)?e.toString("binary"):Qw(e);break;case"array":n=nj(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]?n=jj(n.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?n=jj(n):"binary"==t.type&&"undefined"!==typeof _w&&t.codepage&&(n=_w.utils.decode(t.codepage,_w.utils.encode(28591,n))),"socialcalc:version:"==n.slice(0,19)?Fk.to_sheet("string"==t.type?n:jj(n),t):a(n,t)}return{to_workbook:function(e,t){return $C(i(e,t),t)},to_sheet:i,from_sheet:function(e){for(var t,n=[],r=YC(e["!ref"]),s=Array.isArray(e),a=r.s.r;a<=r.e.r;++a){for(var i=[],o=r.s.c;o<=r.e.c;++o){var l=GC({r:a,c:o});if((t=s?(e[a]||[])[o]:e[l])&&null!=t.v){for(var c=(t.w||(ZC(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";i.push(c+(0===o?" ":""))}else i.push("          ")}n.push(i.join(""))}return n.join("\n")}}}();var Ik=function(){function e(e,t,n){if(e){IC(e,e.l||0);for(var r=n.Enum||g;e.l<e.length;){var s=e.read_shift(2),a=r[s]||r[65535],i=e.read_shift(2),o=e.l+i,l=a.f&&a.f(e,i,n);if(e.l=o,t(l,a,s))return}}}function t(t,n){if(!t)return t;var r=n||{};var s=r.dense?[]:{},a="Sheet1",i="",o=0,l={},c=[],d=[],u={s:{r:0,c:0},e:{r:0,c:0}},h=r.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])r.Enum=g,e(t,function(e,t,n){switch(n){case 0:r.vers=e,e>=4096&&(r.qpro=!0);break;case 6:u=e;break;case 204:e&&(i=e);break;case 222:i=e;break;case 15:case 51:r.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==n&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=r.dateNF||eN[14],r.cellDates&&(e[1].t="d",e[1].v=JN(e[1].v))),r.qpro&&e[3]>o&&(s["!ref"]=XC(u),l[a]=s,c.push(a),s=r.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],a=i||"Sheet"+(o+1),i="");var d=r.dense?(s[e[0].r]||[])[e[0].c]:s[GC(e[0])];if(d){d.t=e[1].t,d.v=e[1].v,null!=e[1].z&&(d.z=e[1].z),null!=e[1].f&&(d.f=e[1].f);break}r.dense?(s[e[0].r]||(s[e[0].r]=[]),s[e[0].r][e[0].c]=e[1]):s[GC(e[0])]=e[1]}},r);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);r.Enum=x,14==t[2]&&(r.qpro=!0,t.l=0),e(t,function(e,t,n){switch(n){case 204:a=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>o&&(s["!ref"]=XC(u),l[a]=s,c.push(a),s=r.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],a="Sheet"+(o+1)),h>0&&e[0].r>=h)break;r.dense?(s[e[0].r]||(s[e[0].r]=[]),s[e[0].r][e[0].c]=e[1]):s[GC(e[0])]=e[1],u.e.c<e[0].c&&(u.e.c=e[0].c),u.e.r<e[0].r&&(u.e.r=e[0].r);break;case 27:e[14e3]&&(d[e[14e3][0]]=e[14e3][1]);break;case 1537:d[e[0]]=e[1],e[0]==o&&(a=e[1])}},r)}if(s["!ref"]=XC(u),l[i||a]=s,c.push(i||a),!d.length)return{SheetNames:c,Sheets:l};for(var A={},f=[],p=0;p<d.length;++p)l[c[p]]?(f.push(d[p]||c[p]),A[d[p]]=l[d[p]]||l[c[p]]):(f.push(d[p]),A[d[p]]={"!ref":"A1"});return{SheetNames:f,Sheets:A}}function n(e,t,n){var r=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(r[0].c=e.read_shift(1),r[3]=e.read_shift(1),r[0].r=e.read_shift(2),e.l+=2):(r[2]=e.read_shift(1),r[0].c=e.read_shift(2),r[0].r=e.read_shift(2)),r}function r(e,t,r){var s=e.l+t,a=n(e,0,r);if(a[1].t="s",20768==r.vers){e.l++;var i=e.read_shift(1);return a[1].v=e.read_shift(i,"utf8"),a}return r.qpro&&e.l++,a[1].v=e.read_shift(s-e.l,"cstr"),a}function s(e,t,n){var r=LC(7+n.length);r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(1,39);for(var s=0;s<r.length;++s){var a=n.charCodeAt(s);r.write_shift(1,a>=128?95:a)}return r.write_shift(1,0),r}function a(e,t,n){var r=LC(7);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n,"i"),r}function i(e,t,n){var r=LC(13);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(8,n,"f"),r}function o(e,t,n){var r=32768&t;return t=(r?e:0)+((t&=-32769)>=8192?t-16384:t),(r?"":"$")+(n?VC(t):zC(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function d(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function u(e,t,n,r){var s=LC(6+r.length);s.write_shift(2,e),s.write_shift(1,n),s.write_shift(1,t),s.write_shift(1,39);for(var a=0;a<r.length;++a){var i=r.charCodeAt(a);s.write_shift(1,i>=128?95:i)}return s.write_shift(1,0),s}function h(e,t){var n=d(e),r=e.read_shift(4),s=e.read_shift(4),a=e.read_shift(2);if(65535==a)return 0===r&&3221225472===s?(n[1].t="e",n[1].v=15):0===r&&3489660928===s?(n[1].t="e",n[1].v=42):n[1].v=0,n;var i=32768&a;return a=(32767&a)-16446,n[1].v=(1-2*i)*(s*Math.pow(2,a+32)+r*Math.pow(2,a)),n}function A(e,t,n,r){var s=LC(14);if(s.write_shift(2,e),s.write_shift(1,n),s.write_shift(1,t),0==r)return s.write_shift(4,0),s.write_shift(4,0),s.write_shift(2,65535),s;var a,i=0,o=0,l=0;return r<0&&(i=1,r=-r),o=0|Math.log2(r),0==(2147483648&(l=(r/=Math.pow(2,o-31))>>>0))&&(++o,l=(r/=2)>>>0),r-=l,l|=2147483648,l>>>=0,a=(r*=Math.pow(2,32))>>>0,s.write_shift(4,a),s.write_shift(4,l),o+=16383+(i?32768:0),s.write_shift(2,o),s}function f(e,t){var n=d(e),r=e.read_shift(8,"f");return n[1].v=r,n}function p(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function m(e,t){var n=LC(5+e.length);n.write_shift(2,14e3),n.write_shift(2,t);for(var r=0;r<e.length;++r){var s=e.charCodeAt(r);n[n.l++]=s>127?95:s}return n[n.l++]=0,n}var g={0:{n:"BOF",f:ak},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,n){var r={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&n.qpro?(r.s.c=e.read_shift(1),e.l++,r.s.r=e.read_shift(2),r.e.c=e.read_shift(1),e.l++,r.e.r=e.read_shift(2),r):(r.s.c=e.read_shift(2),r.s.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),r.e.c=e.read_shift(2),r.e.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),65535==r.s.c&&(r.s.c=r.e.c=r.s.r=r.e.r=0),r)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,r){var s=n(e,0,r);return s[1].v=e.read_shift(2,"i"),s}},14:{n:"NUMBER",f:function(e,t,r){var s=n(e,0,r);return s[1].v=e.read_shift(8,"f"),s}},15:{n:"LABEL",f:r},16:{n:"FORMULA",f:function(e,t,r){var s=e.l+t,a=n(e,0,r);if(a[1].v=e.read_shift(8,"f"),r.qpro)e.l=s;else{var i=e.read_shift(2);!function(e,t){IC(e,0);var n=[],r=0,s="",a="",i="",d="";for(;e.l<e.length;){var u=e[e.l++];switch(u){case 0:n.push(e.read_shift(8,"f"));break;case 1:a=o(t[0].c,e.read_shift(2),!0),s=o(t[0].r,e.read_shift(2),!1),n.push(a+s);break;case 2:var h=o(t[0].c,e.read_shift(2),!0),A=o(t[0].r,e.read_shift(2),!1);a=o(t[0].c,e.read_shift(2),!0),s=o(t[0].r,e.read_shift(2),!1),n.push(h+A+":"+a+s);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(e.read_shift(2));break;case 6:for(var f="";u=e[e.l++];)f+=String.fromCharCode(u);n.push('"'+f.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:d=n.pop(),i=n.pop(),n.push(["AND","OR"][u-20]+"("+i+","+d+")");break;default:if(u<32&&c[u])d=n.pop(),i=n.pop(),n.push(i+c[u]+d);else{if(!l[u])return u<=7?console.error("WK1 invalid opcode "+u.toString(16)):u<=24?console.error("WK1 unsupported op "+u.toString(16)):u<=30?console.error("WK1 invalid opcode "+u.toString(16)):u<=115?console.error("WK1 unsupported function opcode "+u.toString(16)):console.error("WK1 unrecognized opcode "+u.toString(16));if(69==(r=l[u][1])&&(r=e[e.l++]),r>n.length)return void console.error("WK1 bad formula parse 0x"+u.toString(16)+":|"+n.join("|")+"|");var p=n.slice(-r);n.length-=r,n.push(l[u][0]+"("+p.join(",")+")")}}}1==n.length?t[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}(e.slice(e.l,e.l+i),a),e.l+=i}return a}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:r},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:p},222:{n:"SHEETNAMELP",f:function(e,t){var n=e[e.l++];n>t-1&&(n=t-1);for(var r="";r.length<n;)r+=String.fromCharCode(e[e.l++]);return r}},65535:{n:""}},x={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var n=d(e);return n[1].t="s",n[1].v=e.read_shift(t-4,"cstr"),n}},23:{n:"NUMBER17",f:h},24:{n:"NUMBER18",f:function(e,t){var n=d(e);n[1].v=e.read_shift(2);var r=n[1].v>>1;if(1&n[1].v)switch(7&r){case 0:r=5e3*(r>>3);break;case 1:r=500*(r>>3);break;case 2:r=(r>>3)/20;break;case 3:r=(r>>3)/200;break;case 4:r=(r>>3)/2e3;break;case 5:r=(r>>3)/2e4;break;case 6:r=(r>>3)/16;break;case 7:r=(r>>3)/64}return n[1].v=r,n}},25:{n:"FORMULA19",f:function(e,t){var n=h(e);return e.l+=t-14,n}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var n={},r=e.l+t;e.l<r;){var s=e.read_shift(2);if(14e3==s){for(n[s]=[0,""],n[s][0]=e.read_shift(2);e[e.l];)n[s][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return n}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var n=d(e),r=e.read_shift(4);return n[1].v=r>>6,n}},38:{n:"??"},39:{n:"NUMBER27",f:f},40:{n:"FORMULA28",f:function(e,t){var n=f(e);return e.l+=t-10,n}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:p},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,n){if(n.qpro&&!(t<21)){var r=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[r,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var n=t||{};if(+n.codepage>=0&&Bw(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var r=PC(),o=YC(e["!ref"]),l=Array.isArray(e),c=[];$_(r,0,function(e){var t=LC(2);return t.write_shift(2,e),t}(1030)),$_(r,6,function(e){var t=LC(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(o));for(var d=Math.min(o.e.r,8191),u=o.s.r;u<=d;++u)for(var h=zC(u),A=o.s.c;A<=o.e.c;++A){u===o.s.r&&(c[A]=VC(A));var f=c[A]+h,p=l?(e[u]||[])[A]:e[f];if(p&&"z"!=p.t)if("n"==p.t)(0|p.v)==p.v&&p.v>=-32768&&p.v<=32767?$_(r,13,a(u,A,p.v)):$_(r,14,i(u,A,p.v));else $_(r,15,s(u,A,ZC(p).slice(0,239)))}return $_(r,1),r.end()},book_to_wk3:function(e,t){var n=t||{};if(+n.codepage>=0&&Bw(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var r=PC();$_(r,0,function(e){var t=LC(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var n=0,r=0,s=0,a=0;a<e.SheetNames.length;++a){var i=e.SheetNames[a],o=e.Sheets[i];if(o&&o["!ref"]){++s;var l=qC(o["!ref"]);n<l.e.r&&(n=l.e.r),r<l.e.c&&(r=l.e.c)}}n>8191&&(n=8191);return t.write_shift(2,n),t.write_shift(1,s),t.write_shift(1,r),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var s=0,a=0;s<e.SheetNames.length;++s)(e.Sheets[e.SheetNames[s]]||{})["!ref"]&&$_(r,27,m(e.SheetNames[s],a++));var i=0;for(s=0;s<e.SheetNames.length;++s){var o=e.Sheets[e.SheetNames[s]];if(o&&o["!ref"]){for(var l=YC(o["!ref"]),c=Array.isArray(o),d=[],h=Math.min(l.e.r,8191),f=l.s.r;f<=h;++f)for(var p=zC(f),g=l.s.c;g<=l.e.c;++g){f===l.s.r&&(d[g]=VC(g));var x=d[g]+p,v=c?(o[f]||[])[g]:o[x];if(v&&"z"!=v.t)if("n"==v.t)$_(r,23,A(f,g,i,v.v));else $_(r,22,u(f,g,i,ZC(v).slice(0,239)))}++i}}return $_(r,1),r.end()},to_workbook:function(e,n){switch(n.type){case"base64":return t(Ow(Dw(e)),n);case"binary":return t(Ow(e),n);case"buffer":case"array":return t(e,n)}throw"Unsupported type "+n.type}}}();var Dk=/^\s|\s$|[\t\n\r]/;function Lk(e,t){if(!t.bookSST)return"";var n=[dj];n[n.length]=Ej("sst",null,{xmlns:Vj[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(null!=e[r]){var s=e[r],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(Dk)&&(a+=' xml:space="preserve"'),a+=">"+pj(s.t)+"</t>"),a+="</si>",n[n.length]=a}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}var Pk=function(e,t){var n=!1;return null==t&&(n=!0,t=LC(15+4*e.t.length)),t.write_shift(1,0),sB(e.t,t),n?t.slice(0,t.l):t};function Rk(e){var t=PC();RC(t,159,function(e,t){return t||(t=LC(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var n=0;n<e.length;++n)RC(t,19,Pk(e[n]));return RC(t,160),t.end()}function Uk(e){if("undefined"!==typeof _w)return _w.utils.encode(ww,e);for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}function Ok(e){var t,n,r=0,s=Uk(e),a=s.length+1;for((t=Rw(a))[0]=s.length,n=1;n!=a;++n)t[n]=s[n-1];for(n=a-1;n>=0;--n)r=((0===(16384&r)?0:1)|r<<1&32767)^t[n];return 52811^r}var Mk=function(){function e(e,n){switch(n.type){case"base64":return t(Dw(e),n);case"binary":return t(e,n);case"buffer":return t(Lw&&Buffer.isBuffer(e)?e.toString("binary"):Qw(e),n);case"array":return t(nj(e),n)}throw new Error("Unrecognized type "+n.type)}function t(e,t){var n=(t||{}).dense?[]:{},r=e.match(/\\trowd.*?\\row\b/g);if(!r.length)throw new Error("RTF missing table");var s={s:{c:0,r:0},e:{c:0,r:r.length-1}};return r.forEach(function(e,t){Array.isArray(n)&&(n[t]=[]);for(var r,a=/\\\w+\b/g,i=0,o=-1;r=a.exec(e);){if("\\cell"===r[0]){var l=e.slice(i,a.lastIndex-r[0].length);if(" "==l[0]&&(l=l.slice(1)),++o,l.length){var c={v:l,t:"s"};Array.isArray(n)?n[t][o]=c:n[GC({r:t,c:o})]=c}}i=a.lastIndex}o>s.e.c&&(s.e.c=o)}),n["!ref"]=XC(s),n}return{to_workbook:function(t,n){return $C(e(t,n),n)},to_sheet:e,from_sheet:function(e){for(var t,n=["{\\rtf1\\ansi"],r=YC(e["!ref"]),s=Array.isArray(e),a=r.s.r;a<=r.e.r;++a){n.push("\\trowd\\trautofit1");for(var i=r.s.c;i<=r.e.c;++i)n.push("\\cellx"+(i+1));for(n.push("\\pard\\intbl"),i=r.s.c;i<=r.e.c;++i){var o=GC({r:a,c:i});(t=s?(e[a]||[])[i]:e[o])&&(null!=t.v||t.f&&!t.F)&&(n.push(" "+(t.w||(ZC(t),t.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}}}();function Qk(e){for(var t=0,n=1;3!=t;++t)n=256*n+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}var Hk=6;function zk(e){return Math.floor((e+Math.round(128/Hk)/256)*Hk)}function Wk(e){return Math.floor((e-5)/Hk*100+.5)/100}function Vk(e){return Math.round((e*Hk+5)/Hk*256)/256}function Kk(e){e.width?(e.wpx=zk(e.width),e.wch=Wk(e.wpx),e.MDW=Hk):e.wpx?(e.wch=Wk(e.wpx),e.width=Vk(e.wch),e.MDW=Hk):"number"==typeof e.wch&&(e.width=Vk(e.wch),e.wpx=zk(e.width),e.MDW=Hk),e.customWidth&&delete e.customWidth}var Gk=96;function qk(e){return 96*e/Gk}function Xk(e){return e*Gk/96}function Yk(e,t){var n,r=[dj,Ej("styleSheet",null,{xmlns:Vj[0],"xmlns:vt":Hj})];return e.SSF&&null!=(n=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=e[r]&&(t[t.length]=Ej("numFmt",null,{numFmtId:r,formatCode:pj(e[r])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=Ej("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=function(e){var t=[];return t[t.length]=Ej("cellXfs",null),e.forEach(function(e){t[t.length]=Ej("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=Ej("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Jk(e,t,n){n||(n=LC(6+4*t.length)),n.write_shift(2,e),sB(t,n);var r=n.length>n.l?n.slice(0,n.l):n;return null==n.l&&(n.l=n.length),r}function Zk(e,t){t||(t=LC(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=LC(2));var n=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,n),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var n=0;"superscript"==e.vertAlign?n=1:"subscript"==e.vertAlign&&(n=2),t.write_shift(2,n),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),kB(e.color,t);var r=0;return"major"==e.scheme&&(r=1),"minor"==e.scheme&&(r=2),t.write_shift(1,r),sB(e.name,t),t.length>t.l?t.slice(0,t.l):t}var $k,eS=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],tS=DC;function nS(e,t){t||(t=LC(84)),$k||($k=WN(eS));var n=$k[e.patternType];null==n&&(n=40),t.write_shift(4,n);var r=0;if(40!=n)for(kB({auto:1},t),kB({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function rS(e,t,n){n||(n=LC(16)),n.write_shift(2,t||0),n.write_shift(2,e.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);return n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function sS(e,t){return t||(t=LC(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var aS=DC;function iS(e){RC(e,613,nB(1)),RC(e,46,function(e,t){return t||(t=LC(51)),t.write_shift(1,0),sS(0,t),sS(0,t),sS(0,t),sS(0,t),sS(0,t),t.length>t.l?t.slice(0,t.l):t}()),RC(e,614)}function oS(e){RC(e,619,nB(1)),RC(e,48,function(e,t){return t||(t=LC(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),mB(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}({xfId:0,builtinId:0,name:"Normal"})),RC(e,620)}function lS(e){RC(e,508,function(e,t,n){var r=LC(2052);return r.write_shift(4,e),mB(t,r),mB(n,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),RC(e,509)}function cS(e,t){var n=PC();return RC(n,278),function(e,t){if(t){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var r=e[0];r<=e[1];++r)null!=t[r]&&++n}),0!=n&&(RC(e,615,nB(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=t[r]&&RC(e,44,Jk(r,t[r]))}),RC(e,616))}}(n,e.SSF),function(e){RC(e,611,nB(1)),RC(e,43,Zk({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),RC(e,612)}(n),function(e){RC(e,603,nB(2)),RC(e,45,nS({patternType:"none"})),RC(e,45,nS({patternType:"gray125"})),RC(e,604)}(n),iS(n),function(e){RC(e,626,nB(1)),RC(e,47,rS({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),RC(e,627)}(n),function(e,t){RC(e,617,nB(t.length)),t.forEach(function(t){RC(e,47,rS(t,0))}),RC(e,618)}(n,t.cellXfs),oS(n),function(e){RC(e,505,nB(0)),RC(e,506)}(n),lS(n),RC(n,279),n.end()}function dS(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var n=[dj];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function uS(){var e=PC();return RC(e,332),RC(e,334,nB(1)),RC(e,335,function(e){var t=LC(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),sB(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),RC(e,336),RC(e,339,function(e,t){var n=LC(8+2*t.length);return n.write_shift(4,e),sB(t,n),n.slice(0,n.l)}(1,"XLDAPR")),RC(e,52),RC(e,35,nB(514)),RC(e,4096,nB(0)),RC(e,4097,ik(1)),RC(e,36),RC(e,53),RC(e,340),RC(e,337,function(e,t){var n=LC(8);return n.write_shift(4,e),n.write_shift(4,t?1:0),n}(1,!0)),RC(e,51,function(e){var t=LC(4+8*e.length);t.write_shift(4,e.length);for(var n=0;n<e.length;++n)t.write_shift(4,e[n][0]),t.write_shift(4,e[n][1]);return t}([[1,0]])),RC(e,338),RC(e,333),e.end()}function hS(){var e=[dj];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var AS=1024;function fS(e,t){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),s=[Ej("xml",null,{"xmlns:v":Jj,"xmlns:o":Kj,"xmlns:x":Gj,"xmlns:mv":Yj}).replace(/\/>/,">"),Ej("o:shapelayout",Ej("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Ej("v:shapetype",[Ej("v:stroke",null,{joinstyle:"miter"}),Ej("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];AS<1e3*e;)AS+=1e3;return t.forEach(function(e){var t=KC(e[0]),n={color2:"#BEFF82",type:"gradient"};"gradient"==n.type&&(n.angle="-180");var r="gradient"==n.type?Ej("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,a=Ej("v:fill",r,n);++AS,s=s.concat(["<v:shape"+_j({id:"_x0000_s"+AS,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",a,Ej("v:shadow",null,{on:"t",obscured:"t"}),Ej("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Sj("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),Sj("x:AutoFill","False"),Sj("x:Row",String(t.r)),Sj("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function pS(e){var t=[dj,Ej("comments",null,{xmlns:Vj[0]})],n=[];return t.push("<authors>"),e.forEach(function(e){e[1].forEach(function(e){var r=pj(e.a);-1==n.indexOf(r)&&(n.push(r),t.push("<author>"+r+"</author>")),e.T&&e.ID&&-1==n.indexOf("tc="+e.ID)&&(n.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))})}),0==n.length&&(n.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(e){var r=0,s=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?r=n.indexOf("tc="+e[1][0].ID):e[1].forEach(function(e){e.a&&(r=n.indexOf(pj(e.a))),s.push(e.t||"")}),t.push('<comment ref="'+e[0]+'" authorId="'+r+'"><text>'),s.length<=1)t.push(Sj("t",pj(s[0]||"")));else{for(var a="Comment:\n    "+s[0]+"\n",i=1;i<s.length;++i)a+="Reply:\n    "+s[i]+"\n";t.push(Sj("t",pj(a)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function mS(e,t,n){var r=[dj,Ej("ThreadedComments",null,{xmlns:Rj}).replace(/[\/]>/,">")];return e.forEach(function(e){var s="";(e[1]||[]).forEach(function(a,i){if(a.T){a.a&&-1==t.indexOf(a.a)&&t.push(a.a);var o={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};0==i?s=o.id:o.parentId=s,a.ID=o.id,a.a&&(o.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(a.a)).slice(-12)+"}"),r.push(Ej("threadedComment",Sj("text",a.t||""),o))}else delete a.ID})}),r.push("</ThreadedComments>"),r.join("")}var gS=rB;function xS(e){var t=PC(),n=[];return RC(t,628),RC(t,630),e.forEach(function(e){e[1].forEach(function(e){n.indexOf(e.a)>-1||(n.push(e.a.slice(0,54)),RC(t,632,function(e){return sB(e.slice(0,54))}(e.a)))})}),RC(t,631),RC(t,633),e.forEach(function(e){e[1].forEach(function(r){r.iauthor=n.indexOf(r.a);var s={s:KC(e[0]),e:KC(e[0])};RC(t,635,function(e,t){return null==t&&(t=LC(36)),t.write_shift(4,e[1].iauthor),jB(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([s,r])),r.t&&r.t.length>0&&RC(t,637,lB(r)),RC(t,636),delete r.iauthor})}),RC(t,634),RC(t,629),t.end()}var vS=["xlsb","xlsm","xlam","biff8","xla"];var bS=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(e,n,r,s){var a=!1,i=!1;0==r.length?i=!0:"["==r.charAt(0)&&(i=!0,r=r.slice(1,-1)),0==s.length?a=!0:"["==s.charAt(0)&&(a=!0,s=s.slice(1,-1));var o=r.length>0?0|parseInt(r,10):0,l=s.length>0?0|parseInt(s,10):0;return a?l+=t.c:--l,i?o+=t.r:--o,n+(a?"":"$")+VC(l)+(i?"":"$")+zC(o)}return function(r,s){return t=s,r.replace(e,n)}}(),yS=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,wS=function(){return function(e,t){return e.replace(yS,function(e,n,r,s,a,i){var o=WC(s)-(r?0:t.c),l=HC(i)-(a?0:t.r);return n+"R"+(0==l?"":a?l+1:"["+l+"]")+"C"+(0==o?"":r?o+1:"["+o+"]")})}}();function NS(e,t){return e.replace(yS,function(e,n,r,s,a,i){return n+("$"==r?r+s:VC(WC(s)+t.c))+("$"==a?a+i:zC(HC(i)+t.r))})}function jS(e){e.l+=1}function CS(e,t){var n=e.read_shift(1==t?1:2);return[16383&n,n>>14&1,n>>15&1]}function BS(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return kS(e);12==n.biff&&(r=4)}var s=e.read_shift(r),a=e.read_shift(r),i=CS(e,2),o=CS(e,2);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function kS(e){var t=CS(e,2),n=CS(e,2),r=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:s,cRel:n[1],rRel:n[2]}}}function SS(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return function(e){var t=CS(e,2),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}(e);var r=e.read_shift(n&&12==n.biff?4:2),s=CS(e,2);return{r:r,c:s[0],cRel:s[1],rRel:s[2]}}function _S(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function ES(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function FS(e){return[e.read_shift(1),e.read_shift(1)]}function TS(e,t){var n=[e.read_shift(1)];if(12==t)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2}switch(n[0]){case 4:n[1]=rk(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:n[1]=IB[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:n[1]=CB(e);break;case 2:n[1]=hk(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function IS(e,t,n){for(var r=e.read_shift(12==n.biff?4:2),s=[],a=0;a!=r;++a)s.push((12==n.biff?NB:xk)(e,8));return s}function DS(e,t,n){var r=0,s=0;12==n.biff?(r=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,0==--s&&(s=256));for(var a=0,i=[];a!=r&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=TS(e,n.biff);return i}function LS(e,t,n){return e.l+=2,[_S(e)]}function PS(e){return e.l+=6,[]}function RS(e){return e.l+=2,[ak(e),1&e.read_shift(2)]}var US=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var OS={1:{n:"PtgExp",f:function(e,t,n){return e.l++,n&&12==n.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(n&&2==n.biff?1:2)]}},2:{n:"PtgTbl",f:DC},3:{n:"PtgAdd",f:jS},4:{n:"PtgSub",f:jS},5:{n:"PtgMul",f:jS},6:{n:"PtgDiv",f:jS},7:{n:"PtgPower",f:jS},8:{n:"PtgConcat",f:jS},9:{n:"PtgLt",f:jS},10:{n:"PtgLe",f:jS},11:{n:"PtgEq",f:jS},12:{n:"PtgGe",f:jS},13:{n:"PtgGt",f:jS},14:{n:"PtgNe",f:jS},15:{n:"PtgIsect",f:jS},16:{n:"PtgUnion",f:jS},17:{n:"PtgRange",f:jS},18:{n:"PtgUplus",f:jS},19:{n:"PtgUminus",f:jS},20:{n:"PtgPercent",f:jS},21:{n:"PtgParen",f:jS},22:{n:"PtgMissArg",f:jS},23:{n:"PtgStr",f:function(e,t,n){return e.l++,lk(e,0,n)}},26:{n:"PtgSheet",f:function(e,t,n){return e.l+=5,e.l+=2,e.l+=2==n.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,n){return e.l+=2==n.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,IB[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,CB(e)}},32:{n:"PtgArray",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=2==n.biff?6:12==n.biff?14:7,[r]}},33:{n:"PtgFunc",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var s=e.read_shift(n&&n.biff<=3?1:2);return[s_[s],r_[s],r]}},34:{n:"PtgFuncVar",f:function(e,t,n){var r=e[e.l++],s=e.read_shift(1),a=n&&n.biff<=3?[88==r?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[s,(0===a[0]?r_:n_)[a[1]]]}},35:{n:"PtgName",f:function(e,t,n){var r=e.read_shift(1)>>>5&3,s=!n||n.biff>=8?4:2,a=e.read_shift(s);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[r,0,a]}},36:{n:"PtgRef",f:function(e,t,n){var r=(96&e[e.l])>>5;return e.l+=1,[r,SS(e,0,n)]}},37:{n:"PtgArea",f:function(e,t,n){return[(96&e[e.l++])>>5,BS(e,n.biff>=2&&n.biff,n)]}},38:{n:"PtgMemArea",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=n&&2==n.biff?3:4,[r,e.read_shift(n&&2==n.biff?1:2)]}},39:{n:"PtgMemErr",f:DC},40:{n:"PtgMemNoMem",f:DC},41:{n:"PtgMemFunc",f:function(e,t,n){return[e.read_shift(1)>>>5&3,e.read_shift(n&&2==n.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,12==n.biff&&(e.l+=2),[r]}},43:{n:"PtgAreaErr",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var s=function(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return function(e){var t=e.read_shift(2),n=e.read_shift(1),r=(32768&t)>>15,s=(16384&t)>>14;return t&=16383,1==r&&t>=8192&&(t-=16384),1==s&&n>=128&&(n-=256),{r:t,c:n,cRel:s,rRel:r}}(e);var s=e.read_shift(r>=12?4:2),a=e.read_shift(2),i=(16384&a)>>14,o=(32768&a)>>15;if(a&=16383,1==o)for(;s>524287;)s-=1048576;if(1==i)for(;a>8191;)a-=16384;return{r:s,c:a,cRel:i,rRel:o}}(e,0,n);return[r,s]}},45:{n:"PtgAreaN",f:function(e,t,n){var r=(96&e[e.l++])>>5,s=function(e,t,n){if(n.biff<8)return kS(e);var r=e.read_shift(12==n.biff?4:2),s=e.read_shift(12==n.biff?4:2),a=CS(e,2),i=CS(e,2);return{s:{r:r,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}(e,0,n);return[r,s]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,n){return 5==n.biff?function(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var s=e.read_shift(2);return n&&5==n.biff&&(e.l+=12),[r,s,SS(e,0,n)]}},59:{n:"PtgArea3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,s=e.read_shift(2,"i");if(n)switch(n.biff){case 5:e.l+=12;break;case 12:0}return[r,s,BS(e,0,n)]}},60:{n:"PtgRefErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,s=e.read_shift(2),a=4;if(n)switch(n.biff){case 5:a=15;break;case 12:a=6}return e.l+=a,[r,s]}},61:{n:"PtgAreaErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,s=e.read_shift(2),a=8;if(n)switch(n.biff){case 5:e.l+=12,a=6;break;case 12:a=12}return e.l+=a,[r,s]}},255:{}},MS={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},QS={1:{n:"PtgElfLel",f:RS},2:{n:"PtgElfRw",f:LS},3:{n:"PtgElfCol",f:LS},6:{n:"PtgElfRwV",f:LS},7:{n:"PtgElfColV",f:LS},10:{n:"PtgElfRadical",f:LS},11:{n:"PtgElfRadicalS",f:PS},13:{n:"PtgElfColS",f:PS},15:{n:"PtgElfColSV",f:PS},16:{n:"PtgElfRadicalLel",f:RS},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),s=e.read_shift(2),a=e.read_shift(2);return{ixti:t,coltype:3&n,rt:US[n>>2&31],idx:r,c:s,C:a}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},HS={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=n&&2==n.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,n){e.l+=2;for(var r=e.read_shift(n&&2==n.biff?1:2),s=[],a=0;a<=r;++a)s.push(e.read_shift(n&&2==n.biff?1:2));return s}},8:{n:"PtgAttrGoto",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,n){e.l+=n&&2==n.biff?3:4}},32:{n:"PtgAttrBaxcel",f:ES},33:{n:"PtgAttrBaxcel",f:ES},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),FS(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),FS(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function zS(e,t,n,r){if(r.biff<8)return DC(e,t);for(var s=e.l+t,a=[],i=0;i!==n.length;++i)switch(n[i][0]){case"PtgArray":n[i][1]=DS(e,0,r),a.push(n[i][1]);break;case"PtgMemArea":n[i][2]=IS(e,n[i][1],r),a.push(n[i][2]);break;case"PtgExp":r&&12==r.biff&&(n[i][1][1]=e.read_shift(4),a.push(n[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[i][0]}return 0!==(t=s-e.l)&&a.push(DC(e,t)),a}function WS(e,t,n){for(var r,s,a=e.l+t,i=[];a!=e.l;)t=a-e.l,s=e[e.l],r=OS[s]||OS[MS[s]],24!==s&&25!==s||(r=(24===s?QS:HS)[e[e.l+1]]),r&&r.f?i.push([r.n,r.f(e,t,n)]):DC(e,t);return i}function VS(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],s=[],a=0;a<r.length;++a){var i=r[a];if(i)if(2===i[0])s.push('"'+i[1].replace(/"/g,'""')+'"');else s.push(i[1]);else s.push("")}t.push(s.join(","))}return t.join(";")}var KS={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function GS(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var s="";if(n.biff>8)switch(e[r[0]][0]){case 357:return s=-1==r[1]?"#REF":e.SheetNames[r[1]],r[1]==r[2]?s:s+":"+e.SheetNames[r[2]];case 358:return null!=n.SID?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return s=-1==r[1]?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?s:s+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[r[0]][0][3]?(s=-1==r[1]?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?s:s+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function qS(e,t,n){var r=GS(e,t,n);return"#REF"==r?r:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(r,n)}function XS(e,t,n,r,s){var a,i,o,l,c=s&&s.biff||8,d={s:{c:0,r:0},e:{c:0,r:0}},u=[],h=0,A=0,f="";if(!e[0]||!e[0][0])return"";for(var p=-1,m="",g=0,x=e[0].length;g<x;++g){var v=e[0][g];switch(v[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(a=u.pop(),i=u.pop(),p>=0){switch(e[0][p][1][0]){case 0:m=sj(" ",e[0][p][1][1]);break;case 1:m=sj("\r",e[0][p][1][1]);break;default:if(m="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}i+=m,p=-1}u.push(i+KS[v[0]]+a);break;case"PtgIsect":a=u.pop(),i=u.pop(),u.push(i+" "+a);break;case"PtgUnion":a=u.pop(),i=u.pop(),u.push(i+","+a);break;case"PtgRange":a=u.pop(),i=u.pop(),u.push(i+":"+a);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":o=UC(v[1][1],d,s),u.push(MC(o,c));break;case"PtgRefN":o=n?UC(v[1][1],n,s):v[1][1],u.push(MC(o,c));break;case"PtgRef3d":h=v[1][1],o=UC(v[1][2],d,s);f=qS(r,h,s);u.push(f+"!"+MC(o,c));break;case"PtgFunc":case"PtgFuncVar":var b=v[1][0],y=v[1][1];b||(b=0);var w=0==(b&=127)?[]:u.slice(-b);u.length-=b,"User"===y&&(y=w.shift()),u.push(y+"("+w.join(",")+")");break;case"PtgBool":u.push(v[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":u.push(v[1]);break;case"PtgNum":u.push(String(v[1]));break;case"PtgStr":u.push('"'+v[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=OC(v[1][1],n?{s:n}:d,s),u.push(QC(l,s));break;case"PtgArea":l=OC(v[1][1],d,s),u.push(QC(l,s));break;case"PtgArea3d":h=v[1][1],l=v[1][2],f=qS(r,h,s),u.push(f+"!"+QC(l,s));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgName":A=v[1][2];var N=(r.names||[])[A-1]||(r[0]||[])[A],j=N?N.Name:"SH33TJSNAME"+String(A);j&&"_xlfn."==j.slice(0,6)&&!s.xlfn&&(j=j.slice(6)),u.push(j);break;case"PtgNameX":var C,B=v[1][1];if(A=v[1][2],!(s.biff<=5)){var k="";if(14849==((r[B]||[])[0]||[])[0]||(1025==((r[B]||[])[0]||[])[0]?r[B][A]&&r[B][A].itab>0&&(k=r.SheetNames[r[B][A].itab-1]+"!"):k=r.SheetNames[A-1]+"!"),r[B]&&r[B][A])k+=r[B][A].Name;else if(r[0]&&r[0][A])k+=r[0][A].Name;else{var S=(GS(r,B,s)||"").split(";;");S[A-1]?k=S[A-1]:k+="SH33TJSERRX"}u.push(k);break}B<0&&(B=-B),r[B]&&(C=r[B][A]),C||(C={Name:"SH33TJSERRY"}),u.push(C.Name);break;case"PtgParen":var _="(",E=")";if(p>=0){switch(m="",e[0][p][1][0]){case 2:_=sj(" ",e[0][p][1][1])+_;break;case 3:_=sj("\r",e[0][p][1][1])+_;break;case 4:E=sj(" ",e[0][p][1][1])+E;break;case 5:E=sj("\r",e[0][p][1][1])+E;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}p=-1}u.push(_+u.pop()+E);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":u.push("#REF!");break;case"PtgExp":o={c:v[1][1],r:v[1][0]};var F={c:n.c,r:n.r};if(r.sharedf[GC(o)]){var T=r.sharedf[GC(o)];u.push(XS(T,d,F,r,s))}else{var I=!1;for(a=0;a!=r.arrayf.length;++a)if(i=r.arrayf[a],!(o.c<i[0].s.c||o.c>i[0].e.c)&&!(o.r<i[0].s.r||o.r>i[0].e.r)){u.push(XS(i[1],d,F,r,s)),I=!0;break}I||u.push(v[1])}break;case"PtgArray":u.push("{"+VS(v[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=g;break;case"PtgMissArg":u.push("");break;case"PtgList":u.push("Table"+v[1].idx+"[#"+v[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(v))}if(3!=s.biff&&p>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][g][0])){var D=!0;switch((v=e[0][p])[1][0]){case 4:D=!1;case 0:m=sj(" ",v[1][1]);break;case 5:D=!1;case 1:m=sj("\r",v[1][1]);break;default:if(m="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+v[1][0])}u.push((D?m:"")+u.pop()+(D?"":m)),p=-1}}if(u.length>1&&s.WTF)throw new Error("bad formula stack");return u[0]}function YS(e,t,n,r,s){var a=mk(t,n,s),i=function(e){if(null==e){var t=LC(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return BB("number"==typeof e?e:0)}(e.v),o=LC(6);o.write_shift(2,33),o.write_shift(4,0);for(var l=LC(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return Hw([a,i,o,l])}function JS(e,t,n){var r=e.read_shift(4),s=WS(e,r,n),a=e.read_shift(4);return[s,a>0?zS(e,a,s,n):null]}var ZS=JS,$S=JS,e_=JS,t_=JS,n_={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},r_={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},s_={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function a_(e){return("of:="+e.replace(yS,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function i_(e){return e.replace(/\./,"!")}var o_="undefined"!==typeof Map;function l_(e,t,n){var r=0,s=e.length;if(n){if(o_?n.has(t):Object.prototype.hasOwnProperty.call(n,t))for(var a=o_?n.get(t):n[t];r<a.length;++r)if(e[a[r]].t===t)return e.Count++,a[r]}else for(;r<s;++r)if(e[r].t===t)return e.Count++,r;return e[s]={t:t},e.Count++,e.Unique++,n&&(o_?(n.has(t)||n.set(t,[]),n.get(t).push(s)):(Object.prototype.hasOwnProperty.call(n,t)||(n[t]=[]),n[t].push(s))),s}function c_(e,t){var n={min:e+1,max:e+1},r=-1;return t.MDW&&(Hk=t.MDW),null!=t.width?n.customWidth=1:null!=t.wpx?r=Wk(t.wpx):null!=t.wch&&(r=t.wch),r>-1?(n.width=Vk(r),n.customWidth=1):null!=t.width&&(n.width=t.width),t.hidden&&(n.hidden=!0),null!=t.level&&(n.outlineLevel=n.level=t.level),n}function d_(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(n=[1,1,1,1,.5,.5]),null==e.left&&(e.left=n[0]),null==e.right&&(e.right=n[1]),null==e.top&&(e.top=n[2]),null==e.bottom&&(e.bottom=n[3]),null==e.header&&(e.header=n[4]),null==e.footer&&(e.footer=n[5])}}function u_(e,t,n){var r=n.revssf[null!=t.z?t.z:"General"],s=60,a=e.length;if(null==r&&n.ssf)for(;s<392;++s)if(null==n.ssf[s]){IN(t.z,s),n.ssf[s]=t.z,n.revssf[t.z]=r=s;break}for(s=0;s!=a;++s)if(e[s].numFmtId===r)return s;return e[a]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function h_(e,t,n){if(e&&e["!ref"]){var r=YC(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+e["!ref"])}}var A_=["objects","scenarios","selectLockedCells","selectUnlockedCells"],f_=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function p_(e,t,n,r){if(e.c&&n["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var s="",a=e.t,i=e.v;if("z"!==e.t)switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=IB[e.v];break;case"d":r&&r.cellDates?s=tj(e.v,-1).toISOString():((e=rj(e)).t="n",s=""+(e.v=GN(tj(e.v)))),"undefined"===typeof e.z&&(e.z=eN[14]);break;default:s=e.v}var o=Sj("v",pj(s)),l={r:t},c=u_(r.cellXfs,e,r);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=Sj("v",""+l_(r.Strings,e.v,r.revStrings)),l.t="s";break}l.t="str"}if(e.t!=a&&(e.t=a,e.v=i),"string"==typeof e.f&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Ej("f",pj(e.f),d)+(null!=e.v?o:"")}return e.l&&n["!links"].push([t,e.l]),e.D&&(l.cm=1),Ej("c",o,l)}function m_(e,t,n,r){var s,a=[dj,Ej("worksheet",null,{xmlns:Vj[0],"xmlns:r":Qj})],i=n.SheetNames[e],o="",l=n.Sheets[i];null==l&&(l={});var c=l["!ref"]||"A1",d=YC(c);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=XC(d)}r||(r={}),l["!comments"]=[];var u=[];!function(e,t,n,r,s){var a=!1,i={},o=null;if("xlsx"!==r.bookType&&t.vbaraw){var l=t.SheetNames[n];try{t.Workbook&&(l=t.Workbook.Sheets[n].CodeName||l)}catch(Ua){}a=!0,i.codeName=Cj(pj(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),o=(o||"")+Ej("outlinePr",null,c)}(a||o)&&(s[s.length]=Ej("sheetPr",o,i))}(l,n,e,t,a),a[a.length]=Ej("dimension",null,{ref:c}),a[a.length]=function(e,t,n,r){var s={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Ej("sheetViews",Ej("sheetView",null,s),{})}(0,0,0,n),t.sheetFormat&&(a[a.length]=Ej("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(a[a.length]=function(e,t){for(var n,r=["<cols>"],s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=Ej("col",null,c_(s,n)));return r[r.length]="</cols>",r.join("")}(0,l["!cols"])),a[s=a.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(o=function(e,t){var n,r,s=[],a=[],i=YC(e["!ref"]),o="",l="",c=[],d=0,u=0,h=e["!rows"],A=Array.isArray(e),f={r:l},p=-1;for(u=i.s.c;u<=i.e.c;++u)c[u]=VC(u);for(d=i.s.r;d<=i.e.r;++d){for(a=[],l=zC(d),u=i.s.c;u<=i.e.c;++u){n=c[u]+l;var m=A?(e[d]||[])[u]:e[n];void 0!==m&&null!=(o=p_(m,n,e,t))&&a.push(o)}(a.length>0||h&&h[d])&&(f={r:l},h&&h[d]&&((r=h[d]).hidden&&(f.hidden=1),p=-1,r.hpx?p=qk(r.hpx):r.hpt&&(p=r.hpt),p>-1&&(f.ht=p,f.customHeight=1),r.level&&(f.outlineLevel=r.level)),s[s.length]=Ej("row",a.join(""),f))}if(h)for(;d<h.length;++d)h&&h[d]&&(f={r:d+1},(r=h[d]).hidden&&(f.hidden=1),p=-1,r.hpx?p=qk(r.hpx):r.hpt&&(p=r.hpt),p>-1&&(f.ht=p,f.customHeight=1),r.level&&(f.outlineLevel=r.level),s[s.length]=Ej("row","",f));return s.join("")}(l,t,0,0),o.length>0&&(a[a.length]=o)),a.length>s+1&&(a[a.length]="</sheetData>",a[s]=a[s].replace("/>",">")),l["!protect"]&&(a[a.length]=function(e){var t={sheet:1};return A_.forEach(function(n){null!=e[n]&&e[n]&&(t[n]="1")}),f_.forEach(function(n){null==e[n]||e[n]||(t[n]="0")}),e.password&&(t.password=Ok(e.password).toString(16).toUpperCase()),Ej("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(a[a.length]=function(e,t,n,r){var s="string"==typeof e.ref?e.ref:XC(e.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var a=n.Workbook.Names,i=qC(s);i.s.r==i.e.r&&(i.e.r=qC(t["!ref"]).e.r,s=XC(i));for(var o=0;o<a.length;++o){var l=a[o];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),Ej("autoFilter",null,{ref:s})}(l["!autofilter"],l,n,e)),null!=l["!merges"]&&l["!merges"].length>0&&(a[a.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',n=0;n!=e.length;++n)t+='<mergeCell ref="'+XC(e[n])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var h,A,f=-1,p=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach(function(e){e[1].Target&&(h={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(p=MB(r,-1,pj(e[1].Target).replace(/#.*$/,""),RB.HLINK),h["r:id"]="rId"+p),(f=e[1].Target.indexOf("#"))>-1&&(h.location=pj(e[1].Target.slice(f+1))),e[1].Tooltip&&(h.tooltip=pj(e[1].Tooltip)),a[a.length]=Ej("hyperlink",null,h))}),a[a.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(a[a.length]=(d_(A=l["!margins"]),Ej("pageMargins",null,A))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(a[a.length]=Sj("ignoredErrors",Ej("ignoredError",null,{numberStoredAsText:1,sqref:c}))),u.length>0&&(p=MB(r,-1,"../drawings/drawing"+(e+1)+".xml",RB.DRAW),a[a.length]=Ej("drawing",null,{"r:id":"rId"+p}),l["!drawing"]=u),l["!comments"].length>0&&(p=MB(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",RB.VML),a[a.length]=Ej("legacyDrawing",null,{"r:id":"rId"+p}),l["!legacy"]=p),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function g_(e,t,n,r){var s=function(e,t,n){var r=LC(145),s=(n["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var a=320;s.hpx?a=20*qk(s.hpx):s.hpt&&(a=20*s.hpt),r.write_shift(2,a),r.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),r.write_shift(1,i),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var c={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var u=-1,h=-1,A=d<<10;A<d+1<<10;++A)c.c=A,(Array.isArray(n)?(n[c.r]||[])[c.c]:n[GC(c)])&&(u<0&&(u=A),h=A);u<0||(++o,r.write_shift(4,u),r.write_shift(4,h))}var f=r.l;return r.l=l,r.write_shift(4,o),r.l=f,r.length>r.l?r.slice(0,r.l):r}(r,n,t);(s.length>17||(t["!rows"]||[])[r])&&RC(e,0,s)}var x_=NB,v_=jB;function b_(e){return[uB(e),CB(e),"n"]}var y_=NB,w_=jB;var N_=["left","right","top","bottom","header","footer"];function j_(e,t,n,r,s,a,i){if(void 0===t.v)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":(t=rj(t)).z=t.z||eN[14],t.v=GN(tj(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v}var l={r:n,c:r};switch(l.s=u_(s.cellXfs,t,s),t.l&&a["!links"].push([GC(l),t.l]),t.c&&a["!comments"].push([GC(l),t.c]),t.t){case"s":case"str":return s.bookSST?(o=l_(s.Strings,t.v,s.revStrings),l.t="s",l.v=o,i?RC(e,18,function(e,t,n){return null==n&&(n=LC(8)),hB(t,n),n.write_shift(4,t.v),n}(0,l)):RC(e,7,function(e,t,n){return null==n&&(n=LC(12)),dB(t,n),n.write_shift(4,t.v),n}(0,l))):(l.t="str",i?RC(e,17,function(e,t,n){return null==n&&(n=LC(8+4*e.v.length)),hB(t,n),sB(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l)):RC(e,6,function(e,t,n){return null==n&&(n=LC(12+4*e.v.length)),dB(t,n),sB(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?i?RC(e,13,function(e,t,n){return null==n&&(n=LC(8)),hB(t,n),yB(e.v,n),n}(t,l)):RC(e,2,function(e,t,n){return null==n&&(n=LC(12)),dB(t,n),yB(e.v,n),n}(t,l)):i?RC(e,16,function(e,t,n){return null==n&&(n=LC(12)),hB(t,n),BB(e.v,n),n}(t,l)):RC(e,5,function(e,t,n){return null==n&&(n=LC(16)),dB(t,n),BB(e.v,n),n}(t,l)),!0;case"b":return l.t="b",i?RC(e,15,function(e,t,n){return null==n&&(n=LC(5)),hB(t,n),n.write_shift(1,e.v?1:0),n}(t,l)):RC(e,4,function(e,t,n){return null==n&&(n=LC(9)),dB(t,n),n.write_shift(1,e.v?1:0),n}(t,l)),!0;case"e":return l.t="e",i?RC(e,14,function(e,t,n){return null==n&&(n=LC(8)),hB(t,n),n.write_shift(1,e.v),n.write_shift(2,0),n.write_shift(1,0),n}(t,l)):RC(e,3,function(e,t,n){return null==n&&(n=LC(9)),dB(t,n),n.write_shift(1,e.v),n}(t,l)),!0}return i?RC(e,12,function(e,t,n){return null==n&&(n=LC(4)),hB(t,n)}(0,l)):RC(e,1,function(e,t,n){return null==n&&(n=LC(8)),dB(t,n)}(0,l)),!0}function C_(e,t){t&&t["!merges"]&&(RC(e,177,function(e,t){return null==t&&(t=LC(4)),t.write_shift(4,e),t}(t["!merges"].length)),t["!merges"].forEach(function(t){RC(e,176,w_(t))}),RC(e,178))}function B_(e,t){t&&t["!cols"]&&(RC(e,390),t["!cols"].forEach(function(t,n){t&&RC(e,60,function(e,t,n){null==n&&(n=LC(18));var r=c_(e,t);n.write_shift(-4,e),n.write_shift(-4,e),n.write_shift(4,256*(r.width||10)),n.write_shift(4,0);var s=0;return t.hidden&&(s|=1),"number"==typeof r.width&&(s|=2),t.level&&(s|=t.level<<8),n.write_shift(2,s),n}(n,t))}),RC(e,391))}function k_(e,t){t&&t["!ref"]&&(RC(e,648),RC(e,649,function(e){var t=LC(24);return t.write_shift(4,4),t.write_shift(4,1),jB(e,t),t}(YC(t["!ref"]))),RC(e,650))}function S_(e,t,n){t["!links"].forEach(function(t){if(t[1].Target){var r=MB(n,-1,t[1].Target.replace(/#.*$/,""),RB.HLINK);RC(e,494,function(e,t){var n=LC(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));jB({s:KC(e[0]),e:KC(e[0])},n),vB("rId"+t,n);var r=e[1].Target.indexOf("#");return sB((-1==r?"":e[1].Target.slice(r+1))||"",n),sB(e[1].Tooltip||"",n),sB("",n),n.slice(0,n.l)}(t,r))}}),delete t["!links"]}function __(e,t,n){RC(e,133),RC(e,137,function(e,t,n){null==n&&(n=LC(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}(0,n)),RC(e,138),RC(e,134)}function E_(e,t){t["!protect"]&&RC(e,535,function(e,t){return null==t&&(t=LC(66)),t.write_shift(2,e.password?Ok(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?t.write_shift(4,null==e[n[0]]||e[n[0]]?0:1):t.write_shift(4,null!=e[n[0]]&&e[n[0]]?0:1)}),t}(t["!protect"]))}function F_(e,t,n,r){var s=PC(),a=n.SheetNames[e],i=n.Sheets[a]||{},o=a;try{n&&n.Workbook&&(o=n.Workbook.Sheets[e].CodeName||o)}catch(Ua){}var l=YC(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],RC(s,129),(n.vbaraw||i["!outline"])&&RC(s,147,function(e,t,n){null==n&&(n=LC(84+4*e.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),n.write_shift(1,r);for(var s=1;s<3;++s)n.write_shift(1,0);return kB({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),fB(e,n),n.slice(0,n.l)}(o,i["!outline"])),RC(s,148,v_(l)),__(s,0,n.Workbook),B_(s,i),function(e,t,n,r){var s,a=YC(t["!ref"]||"A1"),i="",o=[];RC(e,145);var l=Array.isArray(t),c=a.e.r;t["!rows"]&&(c=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=c;++d){i=zC(d),g_(e,t,a,d);var u=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(o[h]=VC(h)),s=o[h]+i;var A=l?(t[d]||[])[h]:t[s];u=!!A&&j_(e,A,d,h,r,t,u)}}RC(e,146)}(s,i,0,t),E_(s,i),function(e,t,n,r){if(t["!autofilter"]){var s=t["!autofilter"],a="string"===typeof s.ref?s.ref:XC(s.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var i=n.Workbook.Names,o=qC(a);o.s.r==o.e.r&&(o.e.r=qC(t["!ref"]).e.r,a=XC(o));for(var l=0;l<i.length;++l){var c=i[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+a}),RC(e,161,jB(YC(a))),RC(e,162)}}(s,i,n,e),C_(s,i),S_(s,i,r),i["!margins"]&&RC(s,476,function(e,t){return null==t&&(t=LC(48)),d_(e),N_.forEach(function(n){BB(e[n],t)}),t}(i["!margins"])),t&&!t.ignoreEC&&void 0!=t.ignoreEC||k_(s,i),function(e,t,n,r){if(t["!comments"].length>0){var s=MB(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",RB.VML);RC(e,551,vB("rId"+s)),t["!legacy"]=s}}(s,i,e,r),RC(s,130),s.end()}var T_=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var I_="][*?/\\".split("");function D_(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;return I_.forEach(function(r){if(-1!=e.indexOf(r)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}}),n}function L_(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];!function(e,t,n){e.forEach(function(r,s){D_(r);for(var a=0;a<s;++a)if(r==e[a])throw new Error("Duplicate Sheet Name: "+r);if(n){var i=t&&t[s]&&t[s].CodeName||r;if(95==i.charCodeAt(0)&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}(e.SheetNames,t,!!e.vbaraw);for(var n=0;n<e.SheetNames.length;++n)h_(e.Sheets[e.SheetNames[n]],e.SheetNames[n],n)}function P_(e){var t=[dj];t[t.length]=Ej("workbook",null,{xmlns:Vj[0],"xmlns:r":Qj});var n=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(T_.forEach(function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(r[t[0]]=e.Workbook.WBProps[t[0]])}),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=Ej("workbookPr",null,r);var s=e.Workbook&&e.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&s[a]&&s[a].Hidden;++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var i={name:pj(e.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden"}t[t.length]=Ej("sheet",null,i)}return t[t.length]="</sheets>",n&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(e){var n={name:e.Name};e.Comment&&(n.comment=e.Comment),null!=e.Sheet&&(n.localSheetId=""+e.Sheet),e.Hidden&&(n.hidden="1"),e.Ref&&(t[t.length]=Ej("definedName",pj(e.Ref),n))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function R_(e,t){return t||(t=LC(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),vB(e.strRelID,t),sB(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function U_(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var n=t.Workbook.Sheets,r=0,s=-1,a=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&-1==s?s=r:1==n[r].Hidden&&-1==a&&(a=r);a>s||(RC(e,135),RC(e,158,function(e,t){return t||(t=LC(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e),t.write_shift(1,120),t.length>t.l?t.slice(0,t.l):t}(s)),RC(e,136))}}function O_(e,t){var n=PC();return RC(n,131),RC(n,128,function(e,t){t||(t=LC(127));for(var n=0;4!=n;++n)t.write_shift(4,0);return sB("SheetJS",t),sB(bw.version,t),sB(bw.version,t),sB("7262",t),t.length>t.l?t.slice(0,t.l):t}()),RC(n,153,function(e,t){t||(t=LC(72));var n=0;return e&&e.filterPrivacy&&(n|=8),t.write_shift(4,n),t.write_shift(4,0),fB(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),U_(n,e),function(e,t){RC(e,143);for(var n=0;n!=t.SheetNames.length;++n)RC(e,156,R_({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[n]&&t.Workbook.Sheets[n].Hidden||0,iTabID:n+1,strRelID:"rId"+(n+1),name:t.SheetNames[n]}));RC(e,144)}(n,e),RC(n,132),n.end()}function M_(e,t,n,r,s){return(".bin"===t.slice(-4)?F_:m_)(e,n,r,s)}function Q_(e,t,n){return(".bin"===t.slice(-4)?xS:pS)(e,n)}function H_(e,t){var n=[];return e.Props&&n.push(function(e,t){var n=[];return HN(JB).map(function(e){for(var t=0;t<WB.length;++t)if(WB[t][1]==e)return WB[t];for(t=0;t<GB.length;++t)if(GB[t][1]==e)return GB[t];throw e}).forEach(function(r){if(null!=e[r[1]]){var s=t&&t.Props&&null!=t.Props[r[1]]?t.Props[r[1]]:e[r[1]];"date"===r[2]&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof s?s=String(s):!0===s||!1===s?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),n.push(Sj(JB[r[1]]||r[1],s))}}),Ej("DocumentProperties",n.join(""),{xmlns:Kj})}(e.Props,t)),e.Custprops&&n.push(function(e,t){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",s=[];return e&&HN(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var r=0;r<WB.length;++r)if(t==WB[r][1])return;for(r=0;r<GB.length;++r)if(t==GB[r][1])return;for(r=0;r<n.length;++r)if(t==n[r])return;var a=e[t],i="string";"number"==typeof a?(i="float",a=String(a)):!0===a||!1===a?(i="boolean",a=a?"1":"0"):a=String(a),s.push(Ej(mj(t),a,{"dt:dt":i}))}}),t&&HN(t).forEach(function(n){if(Object.prototype.hasOwnProperty.call(t,n)&&(!e||!Object.prototype.hasOwnProperty.call(e,n))){var r=t[n],a="string";"number"==typeof r?(a="float",r=String(r)):!0===r||!1===r?(a="boolean",r=r?"1":"0"):r instanceof Date?(a="dateTime.tz",r=r.toISOString()):r=String(r),s.push(Ej(mj(n),r,{"dt:dt":a}))}}),"<"+r+' xmlns="'+Kj+'">'+s.join("")+"</"+r+">"}(e.Props,e.Custprops)),n.join("")}function z_(e){return Ej("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+wS(e.Ref,{r:0,c:0})})}function W_(e,t,n,r,s,a,i){if(!e||void 0==e.v&&void 0==e.f)return"";var o={};if(e.f&&(o["ss:Formula"]="="+pj(wS(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=KC(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=pj(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=pj(e.l.Tooltip))),n["!merges"])for(var c=n["!merges"],d=0;d!=c.length;++d)c[d].s.c==i.c&&c[d].s.r==i.r&&(c[d].e.c>c[d].s.c&&(o["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(o["ss:MergeDown"]=c[d].e.r-c[d].s.r));var u="",h="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":u="Number",h=String(e.v);break;case"b":u="Boolean",h=e.v?"1":"0";break;case"e":u="Error",h=IB[e.v];break;case"d":u="DateTime",h=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||eN[14]);break;case"s":u="String",h=((e.v||"")+"").replace(Aj,function(e){return hj[e]}).replace(gj,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var A=u_(r.cellXfs,e,r);o["ss:StyleID"]="s"+(21+A),o["ss:Index"]=i.c+1;var f=null!=e.v?h:"",p="z"==e.t?"":'<Data ss:Type="'+u+'">'+f+"</Data>";return(e.c||[]).length>0&&(p+=e.c.map(function(e){var t=Ej("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return Ej("Comment",t,{"ss:Author":e.a})}).join("")),Ej("Cell",p,o)}function V_(e,t){var n='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Xk(t.hpt)),t.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(n+=' ss:Hidden="1"')),n+">"}function K_(e,t,n){var r=[],s=n.SheetNames[e],a=n.Sheets[s],i=a?function(e,t,n,r){if(!e)return"";if(!((r||{}).Workbook||{}).Names)return"";for(var s=r.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==n&&(o.Name.match(/^_xlfn\./)||a.push(z_(o)))}return a.join("")}(a,0,e,n):"";return i.length>0&&r.push("<Names>"+i+"</Names>"),i=a?function(e,t){if(!e["!ref"])return"";var n=YC(e["!ref"]),r=e["!merges"]||[],s=0,a=[];e["!cols"]&&e["!cols"].forEach(function(e,t){Kk(e);var n=!!e.width,r=c_(t,e),s={"ss:Index":t+1};n&&(s["ss:Width"]=zk(r.width)),e.hidden&&(s["ss:Hidden"]="1"),a.push(Ej("Column",null,s))});for(var i=Array.isArray(e),o=n.s.r;o<=n.e.r;++o){for(var l=[V_(o,(e["!rows"]||[])[o])],c=n.s.c;c<=n.e.c;++c){var d=!1;for(s=0;s!=r.length;++s)if(!(r[s].s.c>c)&&!(r[s].s.r>o)&&!(r[s].e.c<c)&&!(r[s].e.r<o)){r[s].s.c==c&&r[s].s.r==o||(d=!0);break}if(!d){var u={r:o,c:c},h=GC(u),A=i?(e[o]||[])[c]:e[h];l.push(W_(A,h,e,t,0,0,u))}}l.push("</Row>"),l.length>2&&a.push(l.join(""))}return a.join("")}(a,t):"",i.length>0&&r.push("<Table>"+i+"</Table>"),r.push(function(e,t,n,r){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(Ej("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(Ej("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(Ej("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)s.push(Ej("Visible",1==r.Workbook.Sheets[n].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<n&&(!r.Workbook.Sheets[a]||r.Workbook.Sheets[a].Hidden);++a);a==n&&s.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(Sj("ProtectContents","True")),e["!protect"].objects&&s.push(Sj("ProtectObjects","True")),e["!protect"].scenarios&&s.push(Sj("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||s.push(Sj("EnableSelection","UnlockedCells")):s.push(Sj("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(t){e["!protect"][t[0]]&&s.push("<"+t[1]+"/>")})),0==s.length?"":Ej("WorksheetOptions",s.join(""),{xmlns:Gj})}(a,0,e,n)),r.join("")}function G_(e,t){t||(t={}),e.SSF||(e.SSF=rj(eN)),e.SSF&&(LN(),DN(e.SSF),t.revssf=VN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],u_(t.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(H_(e,t)),n.push(""),n.push(""),n.push("");for(var r=0;r<e.SheetNames.length;++r)n.push(Ej("Worksheet",K_(r,t,e),{"ss:Name":pj(e.SheetNames[r])}));return n[2]=function(e,t){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(e,t){var r=[];r.push(Ej("NumberFormat",null,{"ss:Format":pj(eN[e.numFmtId])}));var s={"ss:ID":"s"+(21+t)};n.push(Ej("Style",r.join(""),s))}),Ej("Styles",n.join(""))}(0,t),n[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,n=[],r=0;r<t.length;++r){var s=t[r];null==s.Sheet&&(s.Name.match(/^_xlfn\./)||n.push(z_(s)))}return Ej("Names",n.join(""))}(e),dj+Ej("Workbook",n.join(""),{xmlns:qj,"xmlns:o":Kj,"xmlns:x":Gj,"xmlns:ss":qj,"xmlns:dt":Xj,"xmlns:html":Zj})}var q_="e0859ff2f94f6810ab9108002b27b3d9",X_="02d5cdd59c2e1b10939708002b2cf9ae",Y_="05d5cdd59c2e1b10939708002b2cf9ae";function J_(e,t){var n=t||{},r=UN.utils.cfb_new({root:"R"}),s="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":s="/Workbook",n.biff=8;break;case"biff5":s="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return UN.utils.cfb_add(r,s,lE(e,n)),8==n.biff&&(e.Props||e.Custprops)&&function(e,t){var n,r=[],s=[],a=[],i=0,o=zN(_B,"n"),l=zN(EB,"n");if(e.Props)for(n=HN(e.Props),i=0;i<n.length;++i)(Object.prototype.hasOwnProperty.call(o,n[i])?r:Object.prototype.hasOwnProperty.call(l,n[i])?s:a).push([n[i],e.Props[n[i]]]);if(e.Custprops)for(n=HN(e.Custprops),i=0;i<n.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},n[i])||(Object.prototype.hasOwnProperty.call(o,n[i])?r:Object.prototype.hasOwnProperty.call(l,n[i])?s:a).push([n[i],e.Custprops[n[i]]]);var c=[];for(i=0;i<a.length;++i)$B.indexOf(a[i][0])>-1||qB.indexOf(a[i][0])>-1||null!=a[i][1]&&c.push(a[i]);s.length&&UN.utils.cfb_add(t,"/\x05SummaryInformation",nk(s,q_,l,EB)),(r.length||c.length)&&UN.utils.cfb_add(t,"/\x05DocumentSummaryInformation",nk(r,X_,o,_B,c.length?c:null,Y_))}(e,r),8==n.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach(function(n,r){if(0!=r){var s=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==s.slice(-1)&&UN.utils.cfb_add(e,s,t.FileIndex[r].content)}})}(r,UN.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),r}var Z_={0:{f:function(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=r,7&a&&(n.level=7&a),16&a&&(n.hidden=!0),32&a&&(n.hpt=s/20),n}},1:{f:function(e){return[cB(e)]}},2:{f:function(e){return[cB(e),bB(e),"n"]}},3:{f:function(e){return[cB(e),e.read_shift(1),"e"]}},4:{f:function(e){return[cB(e),e.read_shift(1),"b"]}},5:{f:function(e){return[cB(e),CB(e),"n"]}},6:{f:function(e){return[cB(e),rB(e),"str"]}},7:{f:function(e){return[cB(e),e.read_shift(4),"s"]}},8:{f:function(e,t,n){var r=e.l+t,s=cB(e);s.r=n["!row"];var a=[s,rB(e),"str"];if(n.cellFormula){e.l+=2;var i=$S(e,r-e.l,n);a[3]=XS(i,0,s,n.supbooks,n)}else e.l=r;return a}},9:{f:function(e,t,n){var r=e.l+t,s=cB(e);s.r=n["!row"];var a=[s,CB(e),"n"];if(n.cellFormula){e.l+=2;var i=$S(e,r-e.l,n);a[3]=XS(i,0,s,n.supbooks,n)}else e.l=r;return a}},10:{f:function(e,t,n){var r=e.l+t,s=cB(e);s.r=n["!row"];var a=[s,e.read_shift(1),"b"];if(n.cellFormula){e.l+=2;var i=$S(e,r-e.l,n);a[3]=XS(i,0,s,n.supbooks,n)}else e.l=r;return a}},11:{f:function(e,t,n){var r=e.l+t,s=cB(e);s.r=n["!row"];var a=[s,e.read_shift(1),"e"];if(n.cellFormula){e.l+=2;var i=$S(e,r-e.l,n);a[3]=XS(i,0,s,n.supbooks,n)}else e.l=r;return a}},12:{f:function(e){return[uB(e)]}},13:{f:function(e){return[uB(e),bB(e),"n"]}},14:{f:function(e){return[uB(e),e.read_shift(1),"e"]}},15:{f:function(e){return[uB(e),e.read_shift(1),"b"]}},16:{f:b_},17:{f:function(e){return[uB(e),rB(e),"str"]}},18:{f:function(e){return[uB(e),e.read_shift(4),"s"]}},19:{f:iB},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,n){var r=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),a=gB(e),i=e_(e,0,n),o=pB(e);e.l=r;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}},40:{},42:{},43:{f:function(e,t,n){var r={};r.sz=e.read_shift(2)/20;var s=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(s.fItalic&&(r.italic=1),s.fCondense&&(r.condense=1),s.fExtend&&(r.extend=1),s.fShadow&&(r.shadow=1),s.fOutline&&(r.outline=1),s.fStrikeout&&(r.strike=1),700===e.read_shift(2)&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var a=e.read_shift(1);0!=a&&(r.underline=a);var i=e.read_shift(1);i>0&&(r.family=i);var o=e.read_shift(1);switch(o>0&&(r.charset=o),e.l++,r.color=function(e){var t={},n=e.read_shift(1)>>>1,r=e.read_shift(1),s=e.read_shift(2,"i"),a=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=r;var l=TB[r];l&&(t.rgb=Qk(l));break;case 2:t.rgb=Qk([a,i,o]);break;case 3:t.theme=r}return 0!=s&&(t.tint=s>0?s/32767:s/32768),t}(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=rB(e),r}},44:{f:function(e,t){return[e.read_shift(2),rB(e)]}},45:{f:tS},46:{f:aS},47:{f:function(e,t){var n=e.l+t,r=e.read_shift(2),s=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:s}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:kk},62:{f:function(e){return[cB(e),iB(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=GC(n);var r=e.read_shift(1);return 2&r&&(t.l="1"),8&r&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:DC,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var n={},r=e[e.l];return++e.l,n.above=!(64&r),n.left=!(128&r),e.l+=18,n.name=AB(e,t-19),n}},148:{f:x_,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var s=t>8?rB(e):"";return s.length>0&&(n.CodeName=s),n.autoCompressPictures=!!(65536&r),n.backupFile=!!(64&r),n.checkCompatibility=!!(4096&r),n.date1904=!!(1&r),n.filterPrivacy=!!(8&r),n.hidePivotFieldList=!!(1024&r),n.promptedSolutions=!!(16&r),n.publishItems=!!(2048&r),n.refreshAllConnections=!!(262144&r),n.saveExternalLinkValues=!!(128&r),n.showBorderUnselectedTables=!!(4&r),n.showInkAnnotation=!!(32&r),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(32768&r),n.updateLinks=["userSet","never","always"][r>>8&3],n}},154:{},155:{},156:{f:function(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=xB(e,t-8),n.name=rB(e),n}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:NB},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:y_},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:rB(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:xB},357:{},358:{},359:{},360:{T:1},361:{},362:{f:jk},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,n){var r=e.l+t,s=wB(e),a=e.read_shift(1),i=[s];if(i[2]=a,n.cellFormula){var o=ZS(e,r-e.l,n);i[1]=o}else e.l=r;return i}},427:{f:function(e,t,n){var r=e.l+t,s=[NB(e,16)];if(n.cellFormula){var a=t_(e,r-e.l,n);s[1]=a,e.l=r}else e.l=r;return s}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return N_.forEach(function(n){t[n]=CB(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var n=e.l+t,r=NB(e,16),s=pB(e),a=rB(e),i=rB(e),o=rB(e);e.l=n;var l={rfx:r,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:xB},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:gS},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var n=NB(e,16);return t.rfx=n.s,t.ref=GC(n.s),e.l+=16,t}},636:{T:-1},637:{f:oB},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:rB(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function $_(e,t,n,r){var s=t;if(!isNaN(s)){var a=r||(n||[]).length||0,i=e.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&vC(n)&&e.push(n)}}function eE(e,t,n){return e||(e=LC(7)),e.write_shift(2,t),e.write_shift(2,n),e.write_shift(2,0),e.write_shift(1,0),e}function tE(e,t,n,r){if(null!=t.v)switch(t.t){case"d":case"n":var s="d"==t.t?GN(tj(t.v)):t.v;return void(s==(0|s)&&s>=0&&s<65536?$_(e,2,function(e,t,n){var r=LC(9);return eE(r,e,t),r.write_shift(2,n),r}(n,r,s)):$_(e,3,function(e,t,n){var r=LC(15);return eE(r,e,t),r.write_shift(8,n,"f"),r}(n,r,s)));case"b":case"e":return void $_(e,5,function(e,t,n,r){var s=LC(9);return eE(s,e,t),ok(n,r||"b",s),s}(n,r,t.v,t.t));case"s":case"str":return void $_(e,4,function(e,t,n){var r=LC(8+2*n.length);return eE(r,e,t),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(n,r,(t.v||"").slice(0,255)))}$_(e,1,eE(null,n,r))}function nE(e,t){var n=t||{};for(var r=PC(),s=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==n.sheet&&(s=a);if(0==s&&n.sheet&&e.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return $_(r,4==n.biff?1033:3==n.biff?521:9,bk(0,16,n)),function(e,t,n,r){var s,a=Array.isArray(t),i=YC(t["!ref"]||"A1"),o="",l=[];if(i.e.c>255||i.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),s=XC(i)}for(var c=i.s.r;c<=i.e.r;++c){o=zC(c);for(var d=i.s.c;d<=i.e.c;++d){c===i.s.r&&(l[d]=VC(d)),s=l[d]+o;var u=a?(t[c]||[])[d]:t[s];u&&tE(e,u,c,d)}}}(r,e.Sheets[e.SheetNames[s]],0,n),$_(r,10),r.end()}function rE(e,t,n){$_(e,49,function(e,t){var n=e.name||"Arial",r=t&&5==t.biff,s=LC(r?15+n.length:16+2*n.length);return s.write_shift(2,20*(e.sz||12)),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,n.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),s}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},n))}function sE(e,t){if(t){var n=0;t.forEach(function(t,r){++n<=256&&t&&$_(e,125,function(e,t){var n=LC(12);n.write_shift(2,t),n.write_shift(2,t),n.write_shift(2,256*e.width),n.write_shift(2,0);var r=0;return e.hidden&&(r|=1),n.write_shift(1,r),r=e.level||0,n.write_shift(1,r),n.write_shift(2,0),n}(c_(r,t),r))})}}function aE(e,t,n,r,s){var a=16+u_(s.cellXfs,t,s);if(null!=t.v||t.bf)if(t.bf)$_(e,6,YS(t,n,r,0,a));else switch(t.t){case"d":case"n":$_(e,515,function(e,t,n,r){var s=LC(14);return mk(e,t,r,s),BB(n,s),s}(n,r,"d"==t.t?GN(tj(t.v)):t.v,a));break;case"b":case"e":$_(e,517,function(e,t,n,r,s,a){var i=LC(8);return mk(e,t,r,i),ok(n,a,i),i}(n,r,t.v,a,0,t.t));break;case"s":case"str":if(s.bookSST)$_(e,253,function(e,t,n,r){var s=LC(10);return mk(e,t,r,s),s.write_shift(4,n),s}(n,r,l_(s.Strings,t.v,s.revStrings),a));else $_(e,516,function(e,t,n,r,s){var a=!s||8==s.biff,i=LC(+a+8+(1+a)*n.length);return mk(e,t,r,i),i.write_shift(2,n.length),a&&i.write_shift(1,1),i.write_shift((1+a)*n.length,n,a?"utf16le":"sbcs"),i}(n,r,(t.v||"").slice(0,255),a,s));break;default:$_(e,513,mk(n,r,a))}else $_(e,513,mk(n,r,a))}function iE(e,t,n){var r,s=PC(),a=n.SheetNames[e],i=n.Sheets[a]||{},o=(n||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=8==t.biff,u="",h=[],A=YC(i["!ref"]||"A1"),f=d?65536:16384;if(A.e.c>255||A.e.r>=f){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");A.e.c=Math.min(A.e.c,255),A.e.r=Math.min(A.e.c,f-1)}$_(s,2057,bk(0,16,t)),$_(s,13,ik(1)),$_(s,12,ik(100)),$_(s,15,sk(!0)),$_(s,17,sk(!1)),$_(s,16,BB(.001)),$_(s,95,sk(!0)),$_(s,42,sk(!1)),$_(s,43,sk(!1)),$_(s,130,ik(1)),$_(s,128,function(e){var t=LC(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),$_(s,131,sk(!1)),$_(s,132,sk(!1)),d&&sE(s,i["!cols"]),$_(s,512,function(e,t){var n=8!=t.biff&&t.biff?2:4,r=LC(2*n+6);return r.write_shift(n,e.s.r),r.write_shift(n,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}(A,t)),d&&(i["!links"]=[]);for(var p=A.s.r;p<=A.e.r;++p){u=zC(p);for(var m=A.s.c;m<=A.e.c;++m){p===A.s.r&&(h[m]=VC(m)),r=h[m]+u;var g=c?(i[p]||[])[m]:i[r];g&&(aE(s,g,p,m,t),d&&g.l&&i["!links"].push([r,g.l]))}}var x=l.CodeName||l.name||a;return d&&$_(s,574,function(e){var t=LC(18),n=1718;return e&&e.RTL&&(n|=64),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&$_(s,229,function(e){var t=LC(2+8*e.length);t.write_shift(2,e.length);for(var n=0;n<e.length;++n)vk(e[n],t);return t}(i["!merges"])),d&&function(e,t){for(var n=0;n<t["!links"].length;++n){var r=t["!links"][n];$_(e,440,Ck(r)),r[1].Tooltip&&$_(e,2048,Bk(r))}delete t["!links"]}(s,i),$_(s,442,Ak(x)),d&&function(e,t){var n=LC(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),$_(e,2151,n),(n=LC(39)).write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),vk(YC(t["!ref"]||"A1"),n),n.write_shift(4,4),$_(e,2152,n)}(s,i),$_(s,10),s.end()}function oE(e,t,n){var r=PC(),s=(e||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=8==n.biff,l=5==n.biff;($_(r,2057,bk(0,5,n)),"xla"==n.bookType&&$_(r,135),$_(r,225,o?ik(1200):null),$_(r,193,function(e,t){t||(t=LC(e));for(var n=0;n<e;++n)t.write_shift(1,0);return t}(2)),l&&$_(r,191),l&&$_(r,192),$_(r,226),$_(r,92,function(e,t){var n=!t||8==t.biff,r=LC(n?112:54);for(r.write_shift(8==t.biff?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}(0,n)),$_(r,66,ik(o?1200:1252)),o&&$_(r,353,ik(0)),o&&$_(r,448),$_(r,317,function(e){for(var t=LC(2*e),n=0;n<e;++n)t.write_shift(2,n+1);return t}(e.SheetNames.length)),o&&e.vbaraw&&$_(r,211),o&&e.vbaraw)&&$_(r,442,Ak(i.CodeName||"ThisWorkbook"));$_(r,156,ik(17)),$_(r,25,sk(!1)),$_(r,18,sk(!1)),$_(r,19,ik(0)),o&&$_(r,431,sk(!1)),o&&$_(r,444,ik(0)),$_(r,61,function(){var e=LC(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),$_(r,64,sk(!1)),$_(r,141,ik(0)),$_(r,34,sk("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&vj(e.Workbook.WBProps.date1904)?"true":"false"}(e))),$_(r,14,sk(!0)),o&&$_(r,439,sk(!1)),$_(r,218,ik(0)),rE(r,0,n),function(e,t,n){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)null!=t[s]&&$_(e,1054,wk(s,t[s],n))})}(r,e.SSF,n),function(e,t){for(var n=0;n<16;++n)$_(e,224,Nk({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){$_(e,224,Nk(n,0,t))})}(r,n),o&&$_(r,352,sk(!1));var c=r.end(),d=PC();o&&$_(d,140,function(e){return e||(e=LC(4)),e.write_shift(2,1),e.write_shift(2,1),e}()),o&&n.Strings&&function(e,t,n,r){var s=r||(n||[]).length||0;if(s<=8224)return $_(e,t,n,s);var a=t;if(!isNaN(a)){for(var i=n.parts||[],o=0,l=0,c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,a),d.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c;l<s;){for((d=e.next(4)).write_shift(2,60),c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;d.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c}}}(d,252,function(e){var t=LC(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var n=[],r=0;r<e.length;++r)n[r]=ck(e[r]);var s=Hw([t].concat(n));return s.parts=[t.length].concat(n.map(function(e){return e.length})),s}(n.Strings)),$_(d,10);var u=d.end(),h=PC(),A=0,f=0;for(f=0;f<e.SheetNames.length;++f)A+=(o?12:11)+(o?2:1)*e.SheetNames[f].length;var p=c.length+A+u.length;for(f=0;f<e.SheetNames.length;++f){$_(h,133,yk({pos:p,hs:(a[f]||{}).Hidden||0,dt:0,name:e.SheetNames[f]},n)),p+=t[f].length}var m=h.end();if(A!=m.length)throw new Error("BS8 "+A+" != "+m.length);var g=[];return c.length&&g.push(c),m.length&&g.push(m),u.length&&g.push(u),Hw(g)}function lE(e,t){for(var n=0;n<=e.SheetNames.length;++n){var r=e.Sheets[e.SheetNames[n]];if(r&&r["!ref"])qC(r["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}var s=t||{};switch(s.biff||2){case 8:case 5:return function(e,t){var n=t||{},r=[];e&&!e.SSF&&(e.SSF=rj(eN)),e&&e.SSF&&(LN(),DN(e.SSF),n.revssf=VN(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,UE(n),n.cellXfs=[],u_(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)r[r.length]=iE(s,n,e);return r.unshift(oE(e,r,n)),Hw(r)}(e,t);case 4:case 3:case 2:return nE(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function cE(e,t,n,r){for(var s=e["!merges"]||[],a=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>n||s[c].s.c>i)&&!(s[c].e.r<n||s[c].e.c<i)){if(s[c].s.r<n||s[c].s.c<i){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var d=GC({r:n,c:i}),u=r.dense?(e[n]||[])[i]:e[d],h=u&&null!=u.v&&(u.h||xj(u.w||(ZC(u),u.w)||""))||"",A={};o>1&&(A.rowspan=o),l>1&&(A.colspan=l),r.editable?h='<span contenteditable="true">'+h+"</span>":u&&(A["data-t"]=u&&u.t||"z",null!=u.v&&(A["data-v"]=u.v),null!=u.z&&(A["data-z"]=u.z),u.l&&"#"!=(u.l.Target||"#").charAt(0)&&(h='<a href="'+u.l.Target+'">'+h+"</a>")),A.id=(r.id||"sjs")+"-"+d,a.push(Ej("td",h,A))}}return"<tr>"+a.join("")+"</tr>"}var dE='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',uE="</body></html>";function hE(e,t,n){return[].join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function AE(e,t){var n=t||{},r=null!=n.header?n.header:dE,s=null!=n.footer?n.footer:uE,a=[r],i=qC(e["!ref"]);n.dense=Array.isArray(e),a.push(hE(0,0,n));for(var o=i.s.r;o<=i.e.r;++o)a.push(cE(e,i,o,n));return a.push("</table>"+s),a.join("")}function fE(e,t,n){var r=n||{};var s=0,a=0;if(null!=r.origin)if("number"==typeof r.origin)s=r.origin;else{var i="string"==typeof r.origin?KC(r.origin):r.origin;s=i.r,a=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:a}};if(e["!ref"]){var d=qC(e["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),-1==s&&(c.e.r=s=d.e.r+1)}var u=[],h=0,A=e["!rows"]||(e["!rows"]=[]),f=0,p=0,m=0,g=0,x=0,v=0;for(e["!cols"]||(e["!cols"]=[]);f<o.length&&p<l;++f){var b=o[f];if(mE(b)){if(r.display)continue;A[p]={hidden:!0}}var y=b.children;for(m=g=0;m<y.length;++m){var w=y[m];if(!r.display||!mE(w)){var N=w.hasAttribute("data-v")?w.getAttribute("data-v"):w.hasAttribute("v")?w.getAttribute("v"):Bj(w.innerHTML),j=w.getAttribute("data-z")||w.getAttribute("z");for(h=0;h<u.length;++h){var C=u[h];C.s.c==g+a&&C.s.r<p+s&&p+s<=C.e.r&&(g=C.e.c+1-a,h=-1)}v=+w.getAttribute("colspan")||1,((x=+w.getAttribute("rowspan")||1)>1||v>1)&&u.push({s:{r:p+s,c:g+a},e:{r:p+s+(x||1)-1,c:g+a+(v||1)-1}});var B={t:"s",v:N},k=w.getAttribute("data-t")||w.getAttribute("t")||"";null!=N&&(0==N.length?B.t=k||"z":r.raw||0==N.trim().length||"s"==k||("TRUE"===N?B={t:"b",v:!0}:"FALSE"===N?B={t:"b",v:!1}:isNaN(aj(N))?isNaN(oj(N).getDate())||(B={t:"d",v:tj(N)},r.cellDates||(B={t:"n",v:GN(B.v)}),B.z=r.dateNF||eN[14]):B={t:"n",v:aj(N)})),void 0===B.z&&null!=j&&(B.z=j);var S="",_=w.getElementsByTagName("A");if(_&&_.length)for(var E=0;E<_.length&&(!_[E].hasAttribute("href")||"#"==(S=_[E].getAttribute("href")).charAt(0));++E);S&&"#"!=S.charAt(0)&&(B.l={Target:S}),r.dense?(e[p+s]||(e[p+s]=[]),e[p+s][g+a]=B):e[GC({c:g+a,r:p+s})]=B,c.e.c<g+a&&(c.e.c=g+a),g+=v}}++p}return u.length&&(e["!merges"]=(e["!merges"]||[]).concat(u)),c.e.r=Math.max(c.e.r,p-1+s),e["!ref"]=XC(c),p>=l&&(e["!fullref"]=XC((c.e.r=o.length-f+p-1+s,c))),e}function pE(e,t){return fE((t||{}).dense?[]:{},e,t)}function mE(e){var t="",n=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var gE=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+_j({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return dj+t}}(),xE=function(){var e=function(e){return pj(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",n=function(n,r,s){var a=[];a.push('      <table:table table:name="'+pj(r.SheetNames[s])+'" table:style-name="ta1">\n');var i=0,o=0,l=qC(n["!ref"]||"A1"),c=n["!merges"]||[],d=0,u=Array.isArray(n);if(n["!cols"])for(o=0;o<=l.e.c;++o)a.push("        <table:table-column"+(n["!cols"][o]?' table:style-name="co'+n["!cols"][o].ods+'"':"")+"></table:table-column>\n");var h="",A=n["!rows"]||[];for(i=0;i<l.s.r;++i)h=A[i]?' table:style-name="ro'+A[i].ods+'"':"",a.push("        <table:table-row"+h+"></table:table-row>\n");for(;i<=l.e.r;++i){for(h=A[i]?' table:style-name="ro'+A[i].ods+'"':"",a.push("        <table:table-row"+h+">\n"),o=0;o<l.s.c;++o)a.push(t);for(;o<=l.e.c;++o){var f=!1,p={},m="";for(d=0;d!=c.length;++d)if(!(c[d].s.c>o)&&!(c[d].s.r>i)&&!(c[d].e.c<o)&&!(c[d].e.r<i)){c[d].s.c==o&&c[d].s.r==i||(f=!0),p["table:number-columns-spanned"]=c[d].e.c-c[d].s.c+1,p["table:number-rows-spanned"]=c[d].e.r-c[d].s.r+1;break}if(f)a.push("          <table:covered-table-cell/>\n");else{var g=GC({r:i,c:o}),x=u?(n[i]||[])[o]:n[g];if(x&&x.f&&(p["table:formula"]=pj(a_(x.f)),x.F&&x.F.slice(0,g.length)==g)){var v=qC(x.F);p["table:number-matrix-columns-spanned"]=v.e.c-v.s.c+1,p["table:number-matrix-rows-spanned"]=v.e.r-v.s.r+1}if(x){switch(x.t){case"b":m=x.v?"TRUE":"FALSE",p["office:value-type"]="boolean",p["office:boolean-value"]=x.v?"true":"false";break;case"n":m=x.w||String(x.v||0),p["office:value-type"]="float",p["office:value"]=x.v||0;break;case"s":case"str":m=null==x.v?"":x.v,p["office:value-type"]="string";break;case"d":m=x.w||tj(x.v).toISOString(),p["office:value-type"]="date",p["office:date-value"]=tj(x.v).toISOString(),p["table:style-name"]="ce1";break;default:a.push(t);continue}var b=e(m);if(x.l&&x.l.Target){var y=x.l.Target;"#"==(y="#"==y.charAt(0)?"#"+i_(y.slice(1)):y).charAt(0)||y.match(/^\w+:/)||(y="../"+y),b=Ej("text:a",b,{"xlink:href":y.replace(/&/g,"&amp;")})}a.push("          "+Ej("table:table-cell",Ej("text:p",b,{}),p)+"\n")}else a.push(t)}}a.push("        </table:table-row>\n")}return a.push("      </table:table>\n"),a.join("")};return function(e,t){var r=[dj],s=_j({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),a=_j({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==t.bookType?(r.push("<office:document"+s+a+">\n"),r.push(zB().replace(/office:document-meta/g,"office:meta"))):r.push("<office:document-content"+s+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var n=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!cols"])for(var r=0;r<t["!cols"].length;++r)if(t["!cols"][r]){var s=t["!cols"][r];if(null==s.width&&null==s.wpx&&null==s.wch)continue;Kk(s),s.ods=n;var a=t["!cols"][r].wpx+"px";e.push('  <style:style style:name="co'+n+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+a+'"/>\n'),e.push("  </style:style>\n"),++n}});var r=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!rows"])for(var n=0;n<t["!rows"].length;++n)if(t["!rows"][n]){t["!rows"][n].ods=r;var s=t["!rows"][n].hpx+"px";e.push('  <style:style style:name="ro'+r+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+s+'"/>\n'),e.push("  </style:style>\n"),++r}}),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(r,e),r.push("  <office:body>\n"),r.push("    <office:spreadsheet>\n");for(var i=0;i!=e.SheetNames.length;++i)r.push(n(e.Sheets[e.SheetNames[i]],e,i));return r.push("    </office:spreadsheet>\n"),r.push("  </office:body>\n"),"fods"==t.bookType?r.push("</office:document>"):r.push("</office:document-content>"),r.join("")}}();function vE(e,t){if("fods"==t.bookType)return xE(e,t);var n=cj(),r="",s=[],a=[];return lj(n,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),lj(n,r="content.xml",xE(e,t)),s.push([r,"text/xml"]),a.push([r,"ContentFile"]),lj(n,r="styles.xml",gE(e,t)),s.push([r,"text/xml"]),a.push([r,"StylesFile"]),lj(n,r="meta.xml",dj+zB()),s.push([r,"text/xml"]),a.push([r,"MetadataFile"]),lj(n,r="manifest.rdf",function(e){var t=[dj];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var n=0;n!=e.length;++n)t.push(QB(e[n][0],e[n][1])),t.push(HB("",e[n][0]));return t.push(QB("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(a)),s.push([r,"application/rdf+xml"]),lj(n,r="META-INF/manifest.xml",function(e){var t=[dj];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var n=0;n<e.length;++n)t.push('  <manifest:file-entry manifest:full-path="'+e[n][0]+'" manifest:media-type="'+e[n][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(s)),n}function bE(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function yE(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):Ow(Cj(e))}function wE(e){var t=e.reduce(function(e,t){return e+t.length},0),n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(e,r),r+=e.length}),n}function NE(e,t){var n=t?t[0]:0,r=127&e[n];e:if(e[n++]>=128){if(r|=(127&e[n])<<7,e[n++]<128)break e;if(r|=(127&e[n])<<14,e[n++]<128)break e;if(r|=(127&e[n])<<21,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,28),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,35),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,42),++n,e[n++]<128)break e}return t&&(t[0]=n),r}function jE(e){var t=new Uint8Array(7);t[0]=127&e;var n=1;e:if(e>127){if(t[n-1]|=128,t[n]=e>>7&127,++n,e<=16383)break e;if(t[n-1]|=128,t[n]=e>>14&127,++n,e<=2097151)break e;if(t[n-1]|=128,t[n]=e>>21&127,++n,e<=268435455)break e;if(t[n-1]|=128,t[n]=e/256>>>21&127,++n,e<=34359738367)break e;if(t[n-1]|=128,t[n]=e/65536>>>21&127,++n,e<=4398046511103)break e;t[n-1]|=128,t[n]=e/16777216>>>21&127,++n}return t.slice(0,n)}function CE(e){var t=0,n=127&e[t];e:if(e[t++]>=128){if(n|=(127&e[t])<<7,e[t++]<128)break e;if(n|=(127&e[t])<<14,e[t++]<128)break e;if(n|=(127&e[t])<<21,e[t++]<128)break e;n|=(127&e[t])<<28}return n}function BE(e){for(var t=[],n=[0];n[0]<e.length;){var r,s=n[0],a=NE(e,n),i=7&a,o=0;if(0==(a=Math.floor(a/8)))break;switch(i){case 0:for(var l=n[0];e[n[0]++]>=128;);r=e.slice(l,n[0]);break;case 5:o=4,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=NE(e,n),r=e.slice(n[0],n[0]+o),n[0]+=o;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(s))}var c={data:r,type:i};null==t[a]?t[a]=[c]:t[a].push(c)}return t}function kE(e){var t=[];return e.forEach(function(e,n){e.forEach(function(e){e.data&&(t.push(jE(8*n+e.type)),2==e.type&&t.push(jE(e.data.length)),t.push(e.data))})}),wE(t)}function SE(e){for(var t,n=[],r=[0];r[0]<e.length;){var s=NE(e,r),a=BE(e.slice(r[0],r[0]+s));r[0]+=s;var i={id:CE(a[1][0].data),messages:[]};a[2].forEach(function(t){var n=BE(t.data),s=CE(n[3][0].data);i.messages.push({meta:n,data:e.slice(r[0],r[0]+s)}),r[0]+=s}),(null==(t=a[3])?void 0:t[0])&&(i.merge=CE(a[3][0].data)>>>0>0),n.push(i)}return n}function _E(e){var t=[];return e.forEach(function(e){var n=[];n[1]=[{data:jE(e.id),type:0}],n[2]=[],null!=e.merge&&(n[3]=[{data:jE(+!!e.merge),type:0}]);var r=[];e.messages.forEach(function(e){r.push(e.data),e.meta[3]=[{type:0,data:jE(e.data.length)}],n[2].push({data:kE(e.meta),type:2})});var s=kE(n);t.push(jE(s.length)),t.push(s),r.forEach(function(e){return t.push(e)})}),wE(t)}function EE(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],r=NE(t,n),s=[];n[0]<t.length;){var a=3&t[n[0]];if(0!=a){var i=0,o=0;if(1==a?(o=4+(t[n[0]]>>2&7),i=(224&t[n[0]++])<<3,i|=t[n[0]++]):(o=1+(t[n[0]++]>>2),2==a?(i=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(i=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),s=[wE(s)],0==i)throw new Error("Invalid offset 0");if(i>s[0].length)throw new Error("Invalid offset beyond length");if(o>=i)for(s.push(s[0].slice(-i)),o-=i;o>=s[s.length-1].length;)s.push(s[s.length-1]),o-=s[s.length-1].length;s.push(s[0].slice(-i,-i+o))}else{var l=t[n[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[n[0]],c>1&&(l|=t[n[0]+1]<<8),c>2&&(l|=t[n[0]+2]<<16),c>3&&(l|=t[n[0]+3]<<24),l>>>=0,l++,n[0]+=c}s.push(t.slice(n[0],n[0]+l)),n[0]+=l}}var d=wE(s);if(d.length!=r)throw new Error("Unexpected length: ".concat(d.length," != ").concat(r));return d}function FE(e){for(var t=[],n=0;n<e.length;){var r=e[n++],s=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(EE(r,e.slice(n,n+s))),n+=s}if(n!==e.length)throw new Error("data is not a valid framed stream!");return wE(t)}function TE(e){for(var t=[],n=0;n<e.length;){var r=Math.min(e.length-n,268435455),s=new Uint8Array(4);t.push(s);var a=jE(r),i=a.length;t.push(a),r<=60?(i++,t.push(new Uint8Array([r-1<<2]))):r<=256?(i+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(i+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(i+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(i+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(e.slice(n,n+r)),i+=r,s[0]=0,s[1]=255&i,s[2]=i>>8&255,s[3]=i>>16&255,n+=r}return wE(t)}function IE(e,t){var n=new Uint8Array(32),r=bE(n),s=12,a=0;switch(n[0]=5,e.t){case"n":n[1]=2,function(e,t,n){var r=Math.floor(0==n?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,s=n/Math.pow(10,r-6176);e[t+15]|=r>>7,e[t+14]|=(127&r)<<1;for(var a=0;s>=1;++a,s/=256)e[t+a]=255&s;e[t+15]|=n>=0?0:128}(n,s,e.v),a|=1,s+=16;break;case"b":n[1]=6,r.setFloat64(s,e.v?1:0,!0),a|=2,s+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[1]=3,r.setUint32(s,t.indexOf(e.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,a,!0),n.slice(0,s)}function DE(e,t){var n=new Uint8Array(32),r=bE(n),s=12,a=0;switch(n[0]=3,e.t){case"n":n[2]=2,r.setFloat64(s,e.v,!0),a|=32,s+=8;break;case"b":n[2]=6,r.setFloat64(s,e.v?1:0,!0),a|=32,s+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[2]=3,r.setUint32(s,t.indexOf(e.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,a,!0),n.slice(0,s)}function LE(e){return NE(BE(e)[1][0].data)}function PE(e,t,n){var r,s,a,i;if(!(null==(r=e[6])?void 0:r[0])||!(null==(s=e[7])?void 0:s[0]))throw"Mutation only works on post-BNC storages!";if((null==(i=null==(a=e[8])?void 0:a[0])?void 0:i.data)&&CE(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var o=0,l=bE(e[7][0].data),c=0,d=[],u=bE(e[4][0].data),h=0,A=[],f=0;f<t.length;++f)if(null!=t[f]){var p,m;switch(l.setUint16(2*f,c,!0),u.setUint16(2*f,h,!0),typeof t[f]){case"string":p=IE({t:"s",v:t[f]},n),m=DE({t:"s",v:t[f]},n);break;case"number":p=IE({t:"n",v:t[f]},n),m=DE({t:"n",v:t[f]},n);break;case"boolean":p=IE({t:"b",v:t[f]},n),m=DE({t:"b",v:t[f]},n);break;default:throw new Error("Unsupported value "+t[f])}d.push(p),c+=p.length,A.push(m),h+=m.length,++o}else l.setUint16(2*f,65535,!0),u.setUint16(2*f,65535);for(e[2][0].data=jE(o);f<e[7][0].data.length/2;++f)l.setUint16(2*f,65535,!0),u.setUint16(2*f,65535,!0);return e[6][0].data=wE(d),e[3][0].data=wE(A),o}function RE(e){return function(t){for(var n=0;n!=e.length;++n){var r=e[n];void 0===t[r[0]]&&(t[r[0]]=r[1]),"n"===r[2]&&(t[r[0]]=Number(t[r[0]]))}}}function UE(e){RE([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function OE(e,t){return"ods"==t.bookType?vE(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=qC(n["!ref"]);r.s.r=r.s.c=0;var s=!1;r.e.c>9&&(s=!0,r.e.c=9),r.e.r>49&&(s=!0,r.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(XC(r)));var a=YE(n,{range:r,header:1}),i=["~Sh33tJ5~"];a.forEach(function(e){return e.forEach(function(e){"string"==typeof e&&i.push(e)})});var o={},l=[],c=UN.read(t.numbers,{type:"base64"});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0],n=e[1];2==t.type&&t.name.match(/\.iwa/)&&SE(FE(t.content)).forEach(function(e){l.push(e.id),o[e.id]={deps:[],location:n,type:CE(e.messages[0].meta[1][0].data)}})}),l.sort(function(e,t){return e-t});var d=l.filter(function(e){return e>1}).map(function(e){return[e,jE(e)]});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&SE(FE(t.content)).forEach(function(e){e.messages.forEach(function(t){d.forEach(function(t){e.messages.some(function(e){return 11006!=CE(e.meta[1][0].data)&&function(e,t){e:for(var n=0;n<=e.length-t.length;++n){for(var r=0;r<t.length;++r)if(e[n+r]!=t[r])continue e;return!0}return!1}(e.data,t[1])})&&o[t[0]].deps.push(e.id)})})})});for(var u,h=UN.find(c,o[1].location),A=SE(FE(h.content)),f=0;f<A.length;++f){var p=A[f];1==p.id&&(u=p)}var m=LE(BE(u.messages[0].data)[1][0].data);for(A=SE(FE((h=UN.find(c,o[m].location)).content)),f=0;f<A.length;++f)(p=A[f]).id==m&&(u=p);for(m=LE(BE(u.messages[0].data)[2][0].data),A=SE(FE((h=UN.find(c,o[m].location)).content)),f=0;f<A.length;++f)(p=A[f]).id==m&&(u=p);for(m=LE(BE(u.messages[0].data)[2][0].data),A=SE(FE((h=UN.find(c,o[m].location)).content)),f=0;f<A.length;++f)(p=A[f]).id==m&&(u=p);var g=BE(u.messages[0].data);g[6][0].data=jE(r.e.r+1),g[7][0].data=jE(r.e.c+1);for(var x=LE(g[46][0].data),v=UN.find(c,o[x].location),b=SE(FE(v.content)),y=0;y<b.length&&b[y].id!=x;++y);if(b[y].id!=x)throw"Bad ColumnRowUIDMapArchive";var w=BE(b[y].messages[0].data);w[1]=[],w[2]=[],w[3]=[];for(var N=0;N<=r.e.c;++N){var j=[];j[1]=j[2]=[{type:0,data:jE(N+420690)}],w[1].push({type:2,data:kE(j)}),w[2].push({type:0,data:jE(N)}),w[3].push({type:0,data:jE(N)})}w[4]=[],w[5]=[],w[6]=[];for(var C=0;C<=r.e.r;++C)(j=[])[1]=j[2]=[{type:0,data:jE(C+726270)}],w[4].push({type:2,data:kE(j)}),w[5].push({type:0,data:jE(C)}),w[6].push({type:0,data:jE(C)});b[y].messages[0].data=kE(w),v.content=TE(_E(b)),v.size=v.content.length,delete g[46];var B=BE(g[4][0].data);B[7][0].data=jE(r.e.r+1);var k=LE(BE(B[1][0].data)[2][0].data);if((b=SE(FE((v=UN.find(c,o[k].location)).content)))[0].id!=k)throw"Bad HeaderStorageBucket";var S=BE(b[0].messages[0].data);for(C=0;C<a.length;++C){var _=BE(S[2][0].data);_[1][0].data=jE(C),_[4][0].data=jE(a[C].length),S[2][C]={type:S[2][0].type,data:kE(_)}}b[0].messages[0].data=kE(S),v.content=TE(_E(b)),v.size=v.content.length;var E=LE(B[2][0].data);if((b=SE(FE((v=UN.find(c,o[E].location)).content)))[0].id!=E)throw"Bad HeaderStorageBucket";for(S=BE(b[0].messages[0].data),N=0;N<=r.e.c;++N)(_=BE(S[2][0].data))[1][0].data=jE(N),_[4][0].data=jE(r.e.r+1),S[2][N]={type:S[2][0].type,data:kE(_)};b[0].messages[0].data=kE(S),v.content=TE(_E(b)),v.size=v.content.length;var F=LE(B[4][0].data);!function(){for(var e,t=UN.find(c,o[F].location),n=SE(FE(t.content)),r=0;r<n.length;++r){var s=n[r];s.id==F&&(e=s)}var a=BE(e.messages[0].data);a[3]=[];var l=[];i.forEach(function(e,t){l[1]=[{type:0,data:jE(t)}],l[2]=[{type:0,data:jE(1)}],l[3]=[{type:2,data:yE(e)}],a[3].push({type:2,data:kE(l)})}),e.messages[0].data=kE(a);var d=TE(_E(n));t.content=d,t.size=t.content.length}();var T=BE(B[3][0].data),I=T[1][0];delete T[2];var D=BE(I.data),L=LE(D[2][0].data);!function(){for(var e,t=UN.find(c,o[L].location),n=SE(FE(t.content)),s=0;s<n.length;++s){var l=n[s];l.id==L&&(e=l)}var d=BE(e.messages[0].data);delete d[6],delete T[7];var u=new Uint8Array(d[5][0].data);d[5]=[];for(var h=0,A=0;A<=r.e.r;++A){var f=BE(u);h+=PE(f,a[A],i),f[1][0].data=jE(A),d[5].push({data:kE(f),type:2})}d[1]=[{type:0,data:jE(r.e.c+1)}],d[2]=[{type:0,data:jE(r.e.r+1)}],d[3]=[{type:0,data:jE(h)}],d[4]=[{type:0,data:jE(r.e.r+1)}],e.messages[0].data=kE(d);var p=TE(_E(n));t.content=p,t.size=t.content.length}(),I.data=kE(D),B[3][0].data=kE(T),g[4][0].data=kE(B),u.messages[0].data=kE(g);var P=TE(_E(A));return h.content=P,h.size=h.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){AS=1024,e&&!e.SSF&&(e.SSF=rj(eN));e&&e.SSF&&(LN(),DN(e.SSF),t.revssf=VN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,o_?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xlsb"==t.bookType?"bin":"xml",r=vS.indexOf(t.bookType)>-1,s={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};UE(t=t||{});var a=cj(),i="",o=0;t.cellXfs=[],u_(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(i="docProps/core.xml",lj(a,i,KB(e.Props,t)),s.coreprops.push(i),MB(t.rels,2,i,RB.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,lj(a,i,XB(e.Props)),s.extprops.push(i),MB(t.rels,3,i,RB.EXT_PROPS),e.Custprops!==e.Props&&HN(e.Custprops||{}).length>0&&(lj(a,i="docProps/custom.xml",YB(e.Custprops)),s.custprops.push(i),MB(t.rels,4,i,RB.CUST_PROPS));for(o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},u=e.Sheets[e.SheetNames[o-1]];(u||{})["!type"];if(lj(a,i="xl/worksheets/sheet"+o+"."+n,M_(o-1,i,t,e,d)),s.sheets.push(i),MB(t.wbrels,-1,"worksheets/sheet"+o+"."+n,RB.WS[0]),u){var h=u["!comments"],A=!1,f="";h&&h.length>0&&(lj(a,f="xl/comments"+o+"."+n,Q_(h,f,t)),s.comments.push(f),MB(d,-1,"../comments"+o+"."+n,RB.CMNT),A=!0),u["!legacy"]&&A&&lj(a,"xl/drawings/vmlDrawing"+o+".vml",fS(o,u["!comments"])),delete u["!comments"],delete u["!legacy"]}d["!id"].rId1&&lj(a,UB(i),OB(d))}null!=t.Strings&&t.Strings.length>0&&(lj(a,i="xl/sharedStrings."+n,function(e,t,n){return(".bin"===t.slice(-4)?Rk:Lk)(e,n)}(t.Strings,i,t)),s.strs.push(i),MB(t.wbrels,-1,"sharedStrings."+n,RB.SST));i="xl/workbook."+n,lj(a,i,function(e,t,n){return(".bin"===t.slice(-4)?O_:P_)(e,n)}(e,i,t)),s.workbooks.push(i),MB(t.rels,1,i,RB.WB),i="xl/theme/theme1.xml",lj(a,i,dS(e.Themes,t)),s.themes.push(i),MB(t.wbrels,-1,"theme/theme1.xml",RB.THEME),i="xl/styles."+n,lj(a,i,function(e,t,n){return(".bin"===t.slice(-4)?cS:Yk)(e,n)}(e,i,t)),s.styles.push(i),MB(t.wbrels,-1,"styles."+n,RB.STY),e.vbaraw&&r&&(lj(a,i="xl/vbaProject.bin",e.vbaraw),s.vba.push(i),MB(t.wbrels,-1,"vbaProject.bin",RB.VBA));return i="xl/metadata."+n,lj(a,i,function(e){return(".bin"===e.slice(-4)?uS:hS)()}(i)),s.metadata.push(i),MB(t.wbrels,-1,"metadata."+n,RB.XLMETA),lj(a,"[Content_Types].xml",PB(s,t)),lj(a,"_rels/.rels",OB(t.rels)),lj(a,"xl/_rels/workbook."+n+".rels",OB(t.wbrels)),delete t.revssf,delete t.ssf,a}(e,t):ME(e,t)}function ME(e,t){AS=1024,e&&!e.SSF&&(e.SSF=rj(eN)),e&&e.SSF&&(LN(),DN(e.SSF),t.revssf=VN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,o_?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xml",r=vS.indexOf(t.bookType)>-1,s={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};UE(t=t||{});var a=cj(),i="",o=0;if(t.cellXfs=[],u_(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),lj(a,i="docProps/core.xml",KB(e.Props,t)),s.coreprops.push(i),MB(t.rels,2,i,RB.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,lj(a,i,XB(e.Props)),s.extprops.push(i),MB(t.rels,3,i,RB.EXT_PROPS),e.Custprops!==e.Props&&HN(e.Custprops||{}).length>0&&(lj(a,i="docProps/custom.xml",YB(e.Custprops)),s.custprops.push(i),MB(t.rels,4,i,RB.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var u={"!id":{}},h=e.Sheets[e.SheetNames[o-1]];(h||{})["!type"];if(lj(a,i="xl/worksheets/sheet"+o+"."+n,m_(o-1,t,e,u)),s.sheets.push(i),MB(t.wbrels,-1,"worksheets/sheet"+o+"."+n,RB.WS[0]),h){var A=h["!comments"],f=!1,p="";if(A&&A.length>0){var m=!1;A.forEach(function(e){e[1].forEach(function(e){1==e.T&&(m=!0)})}),m&&(lj(a,p="xl/threadedComments/threadedComment"+o+"."+n,mS(A,d,t)),s.threadedcomments.push(p),MB(u,-1,"../threadedComments/threadedComment"+o+"."+n,RB.TCMNT)),lj(a,p="xl/comments"+o+"."+n,pS(A)),s.comments.push(p),MB(u,-1,"../comments"+o+"."+n,RB.CMNT),f=!0}h["!legacy"]&&f&&lj(a,"xl/drawings/vmlDrawing"+o+".vml",fS(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&lj(a,UB(i),OB(u))}return null!=t.Strings&&t.Strings.length>0&&(lj(a,i="xl/sharedStrings."+n,Lk(t.Strings,t)),s.strs.push(i),MB(t.wbrels,-1,"sharedStrings."+n,RB.SST)),lj(a,i="xl/workbook."+n,P_(e)),s.workbooks.push(i),MB(t.rels,1,i,RB.WB),lj(a,i="xl/theme/theme1.xml",dS(e.Themes,t)),s.themes.push(i),MB(t.wbrels,-1,"theme/theme1.xml",RB.THEME),lj(a,i="xl/styles."+n,Yk(e,t)),s.styles.push(i),MB(t.wbrels,-1,"styles."+n,RB.STY),e.vbaraw&&r&&(lj(a,i="xl/vbaProject.bin",e.vbaraw),s.vba.push(i),MB(t.wbrels,-1,"vbaProject.bin",RB.VBA)),lj(a,i="xl/metadata."+n,hS()),s.metadata.push(i),MB(t.wbrels,-1,"metadata."+n,RB.XLMETA),d.length>1&&(lj(a,i="xl/persons/person.xml",function(e){var t=[dj,Ej("personList",null,{xmlns:Rj,"xmlns:x":Vj[0]}).replace(/[\/]>/,">")];return e.forEach(function(e,n){t.push(Ej("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(d)),s.people.push(i),MB(t.wbrels,-1,"persons/person.xml",RB.PEOPLE)),lj(a,"[Content_Types].xml",PB(s,t)),lj(a,"_rels/.rels",OB(t.rels)),lj(a,"xl/_rels/workbook.xml.rels",OB(t.wbrels)),delete t.revssf,delete t.ssf,a}function QE(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=Dw(e.slice(0,12));break;case"binary":n=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function HE(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return QN(t.file,UN.write(e,{type:Lw?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return UN.write(e,t)}function zE(e,t){var n={},r=Lw?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(n.compression="DEFLATE"),t.password)n.type=r;else switch(t.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?UN.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!t.compression}):e.generate(n);if("undefined"!==typeof Deno&&"string"==typeof s){if("binary"==t.type||"base64"==t.type)return s;s=new Uint8Array(Mw(s))}return t.password&&"undefined"!==typeof encrypt_agile?HE(encrypt_agile(s,t.password),t):"file"===t.type?QN(t.file,s):"string"==t.type?jj(s):s}function WE(e,t,n){n||(n="");var r=n+e;switch(t.type){case"base64":return Iw(Cj(r));case"binary":return Cj(r);case"string":return e;case"file":return QN(t.file,r,"utf8");case"buffer":return Lw?Pw(r,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(r):WE(r,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function VE(e,t){switch(t.type){case"string":case"base64":case"binary":for(var n="",r=0;r<e.length;++r)n+=String.fromCharCode(e[r]);return"base64"==t.type?Iw(n):"string"==t.type?jj(n):n;case"file":return QN(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function KE(e,t){kw(),L_(e);var n=rj(t||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),"array"==n.type){n.type="binary";var r=KE(e,n);return n.type="array",Mw(r)}var s=0;if(n.sheet&&(s="number"==typeof n.sheet?n.sheet:e.SheetNames.indexOf(n.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return WE(G_(e,n),n);case"slk":case"sylk":return WE(_k.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"htm":case"html":return WE(AE(e.Sheets[e.SheetNames[s]],n),n);case"txt":return function(e,t){switch(t.type){case"base64":return Iw(e);case"binary":case"string":return e;case"file":return QN(t.file,e,"binary");case"buffer":return Lw?Pw(e,"binary"):e.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(eF(e.Sheets[e.SheetNames[s]],n),n);case"csv":return WE($E(e.Sheets[e.SheetNames[s]],n),n,"\ufeff");case"dif":return WE(Ek.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"dbf":return VE(Sk.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"prn":return WE(Tk.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"rtf":return WE(Mk.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"eth":return WE(Fk.from_sheet(e.Sheets[e.SheetNames[s]],n),n);case"fods":return WE(vE(e,n),n);case"wk1":return VE(Ik.sheet_to_wk1(e.Sheets[e.SheetNames[s]],n),n);case"wk3":return VE(Ik.book_to_wk3(e,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),VE(lE(e,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),function(e,t){var n=t||{};return HE(J_(e,n),n)}(e,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var n=rj(t||{});return zE(OE(e,n),n)}(e,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function GE(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function qE(e,t,n){var r=n||{};return r.type="file",r.file=t,GE(r),KE(e,r)}function XE(e,t,n,r,s,a,i,o){var l=zC(n),c=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),u=!0,h=1===s?[]:{};if(1!==s)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:n,enumerable:!1})}catch(Ua){h.__rowNum__=n}else h.__rowNum__=n;if(!i||e[n])for(var A=t.s.c;A<=t.e.c;++A){var f=i?e[n][A]:e[r[A]+l];if(void 0!==f&&void 0!==f.t){var p=f.v;switch(f.t){case"z":if(null==p)break;continue;case"e":p=0==p?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+f.t)}if(null!=a[A]){if(null==p)if("e"==f.t&&null===p)h[a[A]]=null;else if(void 0!==c)h[a[A]]=c;else{if(!d||null!==p)continue;h[a[A]]=null}else h[a[A]]=d&&("n"!==f.t||"n"===f.t&&!1!==o.rawNumbers)?p:ZC(f,p,o);null!=p&&(u=!1)}}else{if(void 0===c)continue;null!=a[A]&&(h[a[A]]=c)}}return{row:h,isempty:u}}function YE(e,t){if(null==e||null==e["!ref"])return[];var n={t:"n",v:0},r=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},d=null!=c.range?c.range:e["!ref"];switch(1===c.header?r=1:"A"===c.header?r=2:Array.isArray(c.header)?r=3:null==c.header&&(r=0),typeof d){case"string":l=YC(d);break;case"number":(l=YC(e["!ref"])).s.r=d;break;default:l=d}r>0&&(s=0);var u=zC(l.s.r),h=[],A=[],f=0,p=0,m=Array.isArray(e),g=l.s.r,x=0,v={};m&&!e[g]&&(e[g]=[]);var b=c.skipHidden&&e["!cols"]||[],y=c.skipHidden&&e["!rows"]||[];for(x=l.s.c;x<=l.e.c;++x)if(!(b[x]||{}).hidden)switch(h[x]=VC(x),n=m?e[g][x]:e[h[x]+u],r){case 1:a[x]=x-l.s.c;break;case 2:a[x]=h[x];break;case 3:a[x]=c.header[x-l.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),o=i=ZC(n,null,c),p=v[i]||0){do{o=i+"_"+p++}while(v[o]);v[i]=p,v[o]=1}else v[i]=1;a[x]=o}for(g=l.s.r+s;g<=l.e.r;++g)if(!(y[g]||{}).hidden){var w=XE(e,l,g,h,r,a,m,c);(!1===w.isempty||(1===r?!1!==c.blankrows:c.blankrows))&&(A[f++]=w.row)}return A.length=f,A}var JE=/"/g;function ZE(e,t,n,r,s,a,i,o){for(var l=!0,c=[],d="",u=zC(n),h=t.s.c;h<=t.e.c;++h)if(r[h]){var A=o.dense?(e[n]||[])[h]:e[r[h]+u];if(null==A)d="";else if(null!=A.v){l=!1,d=""+(o.rawNumbers&&"n"==A.t?A.v:ZC(A,null,o));for(var f=0,p=0;f!==d.length;++f)if((p=d.charCodeAt(f))===s||p===a||34===p||o.forceQuotes){d='"'+d.replace(JE,'""')+'"';break}"ID"==d&&(d='"ID"')}else null==A.f||A.F?d="":(l=!1,(d="="+A.f).indexOf(",")>=0&&(d='"'+d.replace(JE,'""')+'"'));c.push(d)}return!1===o.blankrows&&l?null:c.join(i)}function $E(e,t){var n=[],r=null==t?{}:t;if(null==e||null==e["!ref"])return"";var s=YC(e["!ref"]),a=void 0!==r.FS?r.FS:",",i=a.charCodeAt(0),o=void 0!==r.RS?r.RS:"\n",l=o.charCodeAt(0),c=new RegExp(("|"==a?"\\|":a)+"+$"),d="",u=[];r.dense=Array.isArray(e);for(var h=r.skipHidden&&e["!cols"]||[],A=r.skipHidden&&e["!rows"]||[],f=s.s.c;f<=s.e.c;++f)(h[f]||{}).hidden||(u[f]=VC(f));for(var p=0,m=s.s.r;m<=s.e.r;++m)(A[m]||{}).hidden||null!=(d=ZE(e,s,m,u,i,l,a,r))&&(r.strip&&(d=d.replace(c,"")),(d||!1!==r.blankrows)&&n.push((p++?o:"")+d));return delete r.dense,n.join("")}function eF(e,t){t||(t={}),t.FS="\t",t.RS="\n";var n=$E(e,t);if("undefined"==typeof _w||"string"==t.type)return n;var r=_w.utils.encode(1200,n,"str");return String.fromCharCode(255)+String.fromCharCode(254)+r}function tF(e,t,n){var r,s=n||{},a=+!s.skipHeader,i=e||{},o=0,l=0;if(i&&null!=s.origin)if("number"==typeof s.origin)o=s.origin;else{var c="string"==typeof s.origin?KC(s.origin):s.origin;o=c.r,l=c.c}var d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(i["!ref"]){var u=YC(i["!ref"]);d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),-1==o&&(o=u.e.r+1,d.e.r=o+t.length-1+a)}else-1==o&&(o=0,d.e.r=t.length-1+a);var h=s.header||[],A=0;t.forEach(function(e,t){HN(e).forEach(function(n){-1==(A=h.indexOf(n))&&(h[A=h.length]=n);var c=e[n],d="z",u="",f=GC({c:l+A,r:o+t+a});r=nF(i,f),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?d="n":"boolean"==typeof c?d="b":"string"==typeof c?d="s":c instanceof Date?(d="d",s.cellDates||(d="n",c=GN(c)),u=s.dateNF||eN[14]):null===c&&s.nullError&&(d="e",c=0),r?(r.t=d,r.v=c,delete r.w,delete r.R,u&&(r.z=u)):i[f]=r={t:d,v:c},u&&(r.z=u)):i[f]=c})}),d.e.c=Math.max(d.e.c,l+h.length-1);var f=zC(o);if(a)for(A=0;A<h.length;++A)i[VC(A+l)+f]={t:"s",v:h[A]};return i["!ref"]=XC(d),i}function nF(e,t,n){if("string"==typeof t){if(Array.isArray(e)){var r=KC(t);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return nF(e,GC("number"!=typeof t?t:{r:t,c:n||0}))}function rF(){return{SheetNames:[],Sheets:{}}}function sF(e,t,n,r){var s=1;if(!n)for(;s<=65535&&-1!=e.SheetNames.indexOf(n="Sheet"+s);++s,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0){var a=n.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||n;for(++s;s<=65535&&-1!=e.SheetNames.indexOf(n=i+s);++s);}if(D_(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function aF(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}var iF={encode_col:VC,encode_row:zC,encode_cell:GC,encode_range:XC,decode_col:WC,decode_row:HC,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:KC,decode_range:qC,format_cell:ZC,sheet_add_aoa:eB,sheet_add_json:tF,sheet_add_dom:fE,aoa_to_sheet:tB,json_to_sheet:function(e,t){return tF(null,e,t)},table_to_sheet:pE,table_to_book:function(e,t){return $C(pE(e,t),t)},sheet_to_csv:$E,sheet_to_txt:eF,sheet_to_json:YE,sheet_to_html:AE,sheet_to_formulae:function(e){var t,n="",r="";if(null==e||null==e["!ref"])return[];var s,a=YC(e["!ref"]),i="",o=[],l=[],c=Array.isArray(e);for(s=a.s.c;s<=a.e.c;++s)o[s]=VC(s);for(var d=a.s.r;d<=a.e.r;++d)for(i=zC(d),s=a.s.c;s<=a.e.c;++s)if(n=o[s]+i,r="",void 0!==(t=c?(e[d]||[])[s]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;r=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=n+"="+r}return l},sheet_to_row_object_array:YE,sheet_get_cell:nF,book_new:rF,book_append_sheet:sF,book_set_sheet_visibility:function(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:aF,cell_set_internal_link:function(e,t,n){return aF(e,"#"+t,n)},cell_add_comment:function(e,t,n){e.c||(e.c=[]),e.c.push({t:t,a:n||"SheetJS"})},sheet_set_array_formula:function(e,t,n,r){for(var s="string"!=typeof t?t:YC(t),a="string"==typeof t?t:XC(t),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=nF(e,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=n,r&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};bw.version;const oF=e=>{if(!e)return"--:--";const t=new Date(e);let n=t.getHours();const r=t.getMinutes().toString().padStart(2,"0"),s=t.getSeconds().toString().padStart(2,"0"),a=n>=12?"PM":"AM";return n=n%12||12,"".concat(n,":").concat(r,":").concat(s," ").concat(a)},lF=e=>{if(!e)return"--/--/----";let t;return t="string"===typeof e?(e.includes("-"),new Date(e)):e,isNaN(t.getTime())?"--/--/----":t.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})},cF=(e,t)=>{const n=new Date(t);n.setDate(n.getDate()-1);const r=n.toISOString().split("T")[0];return new Date(e.checkIn).toISOString().split("T")[0]===r&&e.checkOut&&e.isManualCorrection},dF=e=>{if(!e)return"--:--";const t=new Date(e);let n=t.getHours();const r=t.getMinutes().toString().padStart(2,"0"),s=t.getSeconds().toString().padStart(2,"0"),a=n>=12?"PM":"AM";return n=n%12||12,"".concat(n,":").concat(r,":").concat(s," ").concat(a)},uF=e=>{if(!e)return"--/--/----";let t;return t="string"===typeof e?(e.includes("-"),new Date(e)):e,isNaN(t.getTime())?"--/--/----":t.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})},hF=e=>{const t=new Map;e.forEach(e=>{e._id&&t.set(e._id.toString(),e)});const n=new Map;t.forEach(e=>{if(e.attendanceRecordsGroupedByDate&&e.attendanceRecordsGroupedByDate.length>0)e.attendanceRecordsGroupedByDate.forEach(t=>{const r=t.date,s=t.records,a=e._id.toString(),i="".concat(a,"-").concat(r);n.has(i)||n.set(i,{worker:e,date:r,records:[]}),n.get(i).records.push(...s)});else if(e.attendanceRecords&&e.attendanceRecords.length>0){const t=new Map;e.attendanceRecords.forEach(r=>{if(r._id&&t.has(r._id))return;let s;r._id&&t.set(r._id,!0);try{if(!e._id)return void console.warn("Worker missing _id:",e);s=e._id.toString()}catch(o){return void console.error("Error processing worker ID:",e,o)}const a=new Date(r.checkIn).toISOString().split("T")[0],i="".concat(s,"-").concat(a);n.has(i)||n.set(i,{worker:e,date:a,records:[]}),n.get(i).records.push(r)})}});const r=[];return n.forEach(e=>{e.records.sort((e,t)=>new Date(e.checkIn)-new Date(t.checkIn)),r.push(e)}),r},AF=(e,t)=>{const n=new Date(t);n.setDate(n.getDate()-1);const r=n.toISOString().split("T")[0];return new Date(e.checkIn).toISOString().split("T")[0]===r&&e.checkOut&&e.isManualCorrection};const fF=function(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(2),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[y,w]=(0,r.useState)(""),N=(0,r.useCallback)(async()=>{try{const e=await ws.get("/admin/attendance",{withCredentials:!0});console.log("Attendance data received:",e.data),t(e.data),l(!1)}catch(e){d("Failed to fetch today's attendance data."),console.error(e),l(!1)}},[]);(0,r.useEffect)(()=>{N();const e=setInterval(()=>{N()},2e3);return()=>{clearInterval(e)}},[N]),(0,r.useEffect)(()=>{const t=e.filter(e=>!!(e.attendanceRecordsGroupedByDate&&e.attendanceRecordsGroupedByDate.length>0)||!!(e.attendanceRecords&&e.attendanceRecords.length>0)).filter((e,t,n)=>t===n.findIndex(t=>t._id===e._id)),n=[...hF(t)].sort((e,t)=>{const n=e=>{let t=new Date(0);return e.records.forEach(e=>{e.checkIn&&new Date(e.checkIn)>t&&(t=new Date(e.checkIn)),e.checkOut&&new Date(e.checkOut)>t&&(t=new Date(e.checkOut))}),t},r=n(e);return n(t)-r}),r=(new Date).toISOString().split("T")[0],i=n.filter(e=>e.date===r),o=n.filter(e=>e.date!==r),l=[...new Set(o.map(e=>e.date))].sort((e,t)=>new Date(t)-new Date(e)),c=(l.length,l.slice(0,a)),d=[...i,...o.filter(e=>c.includes(e.date))];s(d)},[e,a]);const j=e.filter(e=>!!(e.attendanceRecordsGroupedByDate&&e.attendanceRecordsGroupedByDate.length>0)||!!(e.attendanceRecords&&e.attendanceRecords.length>0)).filter((e,t,n)=>t===n.findIndex(t=>t._id===e._id)),C=[...hF(j)].sort((e,t)=>{const n=e=>{let t=new Date(0);return e.records.forEach(e=>{e.checkIn&&new Date(e.checkIn)>t&&(t=new Date(e.checkIn)),e.checkOut&&new Date(e.checkOut)>t&&(t=new Date(e.checkOut))}),t},r=n(e);return n(t)-r}),B=(new Date).toISOString().split("T")[0],k=(C.filter(e=>e.date===B),C.filter(e=>e.date!==B)),S=[...new Set(k.map(e=>e.date))].sort((e,t)=>new Date(t)-new Date(e)),_=S.length>a;return o?(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg flex flex-col items-center justify-center h-64",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-16 h-16 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-10 h-10"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading attendance data..."})]}):c?(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg flex flex-col items-center justify-center h-64",children:[(0,Ns.jsxs)("div",{className:"text-red-500 font-medium mb-4",children:["Error: ",c]}),(0,Ns.jsx)("button",{onClick:N,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Retry"})]}):(0,Ns.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-lg space-y-6",children:[(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[(0,Ns.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Attendance Tracker"}),(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 w-full sm:w-auto",children:[(0,Ns.jsx)("button",{onClick:()=>f(!0),className:"bg-primary text-white font-semibold py-2 px-4 rounded-lg hover:bg-primary-dark transition-colors text-sm sm:text-base",children:"RFID"}),(0,Ns.jsx)("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base",children:"Face Attendance"}),(0,Ns.jsx)("button",{onClick:()=>{const e=[];n.forEach(t=>{const n=[...t.records].sort((e,t)=>new Date(e.checkIn)-new Date(t.checkIn)),r=n.filter(e=>e.checkIn).map(e=>{const n=new Date(t.date);return AF(e,n)?{time:dF(e.checkIn),isMissedPunchOut:!0,checkOutTime:dF(e.checkOut)}:{time:dF(e.checkIn),isMissedPunchOut:!1}}),s=n.filter(e=>e.checkOut).map(e=>{const n=new Date(t.date);return AF(e,n)?{time:dF(e.checkOut),isMissedPunchOut:!0}:{time:dF(e.checkOut),isMissedPunchOut:!1}});let a=0;n.forEach(e=>{if(e.checkIn&&e.checkOut){const t=new Date(e.checkIn),n=new Date(e.checkOut);a+=n-t}});const i=Math.floor(a/1e3),o=Math.floor(i/3600).toString().padStart(2,"0"),l=Math.floor(i%3600/60).toString().padStart(2,"0"),c=(i%60).toString().padStart(2,"0"),d="".concat(o,".").concat(l,".").concat(c),u=Math.max(r.length,s.length);for(let h=0;h<u;h++)e.push({"Employee Name":t.worker.name,"RF ID":t.worker.rfid||"N/A",Date:t.date,"Punch In":r[h]?r[h].time:"--:--","Punch Out":s[h]?s[h].time:"--:--","Total Duration":d})});const t=iF.json_to_sheet(e),r=iF.book_new();iF.book_append_sheet(r,t,"Attendance Report"),qE(r,"attendance_report.xlsx")},className:"bg-green-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-700 transition-colors text-sm sm:text-base",children:"Excel"}),(0,Ns.jsxs)("button",{onClick:()=>{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(new Date).toLocaleDateString(),r=[];e.forEach(e=>{const t=[...e.records].sort((e,t)=>new Date(e.checkIn)-new Date(t.checkIn)),n=t.filter(e=>e.checkIn).map(t=>{const n=new Date(e.date);return cF(t,n)?{time:oF(t.checkIn),isMissedPunchOut:!0,checkOutTime:oF(t.checkOut)}:{time:oF(t.checkIn),isMissedPunchOut:!1}}),s=t.filter(e=>e.checkOut).map(t=>{const n=new Date(e.date);return cF(t,n)?{time:oF(t.checkOut),isMissedPunchOut:!0}:{time:oF(t.checkOut),isMissedPunchOut:!1}});let a=0;t.forEach(e=>{if(e.checkIn&&e.checkOut){const t=new Date(e.checkIn),n=new Date(e.checkOut);a+=n-t}});const i=Math.floor(a/1e3),o=Math.floor(i/3600).toString().padStart(2,"0"),l=Math.floor(i%3600/60).toString().padStart(2,"0"),c=(i%60).toString().padStart(2,"0"),d="".concat(o,".").concat(l,".").concat(c),u=Math.max(n.length,s.length);for(let h=0;h<u;h++)r.push({"Employee Name":e.worker.name,"RF ID":e.worker.rfid||"N/A",Date:lF(e.date),"Punch In":n[h]?n[h].time:"--:--","Punch Out":s[h]?s[h].time:"--:--","Total Duration":d})});const s=[...new Set(r.map(e=>e["Employee Name"]))].length,a=r.length,i=r.reduce((e,t)=>{const n=t["Employee Name"];return e[n]||(e[n]={name:n,totalRecords:0,totalDuration:"00.00.00"}),e[n].totalRecords++,e},{}),o=Object.values(i).map(e=>'\n      <tr>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">'.concat(e.name,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 14px;">').concat(e.totalRecords,"</td>\n      </tr>\n    ")).join(""),l=r.map(e=>'\n      <tr>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">'.concat(e["Employee Name"],'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px; text-align: center;">').concat(e["RF ID"],'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">').concat(e.Date,'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px; text-align: center;">').concat(e["Punch In"],'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px; text-align: center;">').concat(e["Punch Out"],'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px; text-align: right;">').concat(e["Total Duration"],"</td>\n      </tr>\n    ")).join(""),c=[];t.date&&c.push("Date: ".concat(t.date)),t.worker&&c.push("Worker: ".concat(t.worker));const d=c.length>0?'<p style="margin: 8px 0; font-size: 16px;"><strong>Filters Applied:</strong> '.concat(c.join(", "),"</p>"):"",u='\n    <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 1000px; margin: 0 auto;">\n      \x3c!-- Header --\x3e\n      <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #333; padding-bottom: 20px;">\n        <h1 style="color: #333; margin: 0; font-size: 32px;">The Sweet Hub</h1>\n        <p style="color: #666; font-size: 16px; margin: 10px 0 5px 0;">156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006</p>\n        <p style="color: #666; font-size: 16px; margin: 5px 0;">Phone: 7339200636</p>\n      </div>\n      \n      <div style="text-align: center; margin-bottom: 30px;">\n        <h2 style="color: #333; margin: 0; font-size: 28px;">ATTENDANCE REPORT</h2>\n        <p style="color: #666; font-size: 18px; margin: 15px 0;">\n          Generated on '.concat(n,"\n        </p>\n        ").concat(d,'\n      </div>\n      \n      \x3c!-- Summary --\x3e\n      <div style="margin-bottom: 30px; background-color: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #dee2e6;">\n        <h3 style="color: #333; margin-top: 0; font-size: 20px;">Report Summary</h3>\n        <div style="display: flex; justify-content: space-around; text-align: center;">\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Employees</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(s,'</p>\n          </div>\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Records</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(a,'</p>\n          </div>\n        </div>\n      </div>\n      \n      \x3c!-- Employee Summary --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Employee Summary</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Employee Name</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: center; font-size: 16px; font-weight: bold;">Total Records</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(o,'\n          </tbody>\n        </table>\n      </div>\n      \n      \x3c!-- Detailed Attendance --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Detailed Attendance Records</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Employee Name</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 14px; font-weight: bold;">RF ID</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Date</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 14px; font-weight: bold;">Punch In</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 14px; font-weight: bold;">Punch Out</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px; font-weight: bold;">Total Duration</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(l,'\n          </tbody>\n        </table>\n      </div>\n      \n      <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; text-align: center;">\n        <p style="color: #777; font-size: 14px; margin: 0;">\n          Generated on ').concat(n," at ").concat((new Date).toLocaleTimeString(),'\n        </p>\n        <p style="color: #777; font-size: 14px; margin: 5px 0 0 0;">\n          Report generated by The Sweet Hub Attendance Management System\n        </p>\n      </div>\n    </div>\n  '),h={margin:15,filename:"attendance_report_".concat(n.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};fw()().from(u).set(h).save()}(n)},className:"bg-red-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-red-700 transition-colors text-sm sm:text-base flex items-center",children:[(0,Ns.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Ns.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"PDF"]})]})]}),(0,Ns.jsx)(hw,{isOpen:A,onClose:()=>f(!1),title:"RFID Attendance",children:(0,Ns.jsx)(xw,{onAttendanceRecorded:e=>{N()}})}),(0,Ns.jsx)(hw,{isOpen:p,onClose:()=>m(!1),title:"Face Attendance",children:(0,Ns.jsx)(vw,{onAttendanceRecorded:e=>{N()}})}),(0,Ns.jsx)(hw,{isOpen:g,onClose:()=>{x(!1),b(null),w("")},title:"Correct Missing Punch Out",children:(0,Ns.jsxs)("div",{className:"p-4",children:[v&&(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsxs)("p",{className:"font-semibold text-sm sm:text-base",children:["Worker: ",v.worker.name]}),(0,Ns.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Missing Punch In: ",dF(v.incompleteRecord.checkIn)]})]}),(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Punch Out Time"}),(0,Ns.jsx)("input",{type:"datetime-local",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",value:y,onChange:e=>w(e.target.value)})]}),(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2",children:[(0,Ns.jsx)("button",{onClick:()=>{x(!1),b(null),w("")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 text-sm",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:async()=>{if(v&&y)try{await ws.post("/admin/attendance/correct-missing-punch",{workerId:v.worker._id,checkOutTime:y},{withCredentials:!0});alert("Missing punch corrected successfully"),x(!1),w(""),b(null),N()}catch(n){var e,t;console.error("Error correcting missing punch:",n),alert("Failed to correct missing punch: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Server error"))}else alert("Please select a worker and enter a punch out time")},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm",children:"Correct Punch"})]})]})}),(0,Ns.jsx)("div",{className:"relative w-full sm:w-1/3 mb-6",children:(0,Ns.jsx)("input",{type:"text",placeholder:"Search by staff name or ID...",className:"w-full pl-10 pr-4 py-2 border border-medium-gray rounded-lg text-sm",value:u,onChange:e=>h(e.target.value)})}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white rounded-lg shadow-md",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee Name"}),(0,Ns.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RF ID"}),(0,Ns.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Ns.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Punch In"}),(0,Ns.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Punch Out"}),(0,Ns.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Duration"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((e,t)=>{const n=[...e.records].sort((e,t)=>new Date(e.checkIn)-new Date(t.checkIn)),r=n.filter(e=>e.checkIn).map(t=>{const n=new Date(e.date);return AF(t,n)?{time:dF(t.checkIn),isMissedPunchOut:!0,checkOutTime:dF(t.checkOut)}:{time:dF(t.checkIn),isMissedPunchOut:!1}}),s=n.filter(e=>e.checkOut).map(t=>{const n=new Date(e.date);return AF(t,n)?{time:dF(t.checkOut),isMissedPunchOut:!0}:{time:dF(t.checkOut),isMissedPunchOut:!1}});let a=0;n.forEach(e=>{if(e.checkIn&&e.checkOut){const t=new Date(e.checkIn),n=new Date(e.checkOut);a+=n-t}});const i=Math.floor(a/1e3),o=Math.floor(i/3600).toString().padStart(2,"0"),l=Math.floor(i%3600/60).toString().padStart(2,"0"),c=(i%60).toString().padStart(2,"0"),d="".concat(o,".").concat(l,".").concat(c),u=new Date(e.date),h=(((e,t)=>{const n=new Date(t);n.setDate(n.getDate()-1);const r=n.toISOString().split("T")[0];e.filter(e=>new Date(e.checkIn).toISOString().split("T")[0]===r).find(e=>!e.checkOut)})(e.records,u),"".concat(e.worker._id,"-").concat(e.date,"-").concat(Math.random().toString(36).substr(2,9)));return(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm font-medium text-gray-900",children:e.worker.name}),(0,Ns.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:e.worker.rfid||"N/A"}),(0,Ns.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:uF(e.date)}),(0,Ns.jsx)("td",{className:"px-4 sm:px-6 py-4 text-xs sm:text-sm",children:(0,Ns.jsx)("div",{className:"space-y-1",children:r.length>0?r.map((e,t)=>(0,Ns.jsx)("div",{className:"flex items-center",children:e.isMissedPunchOut?(0,Ns.jsxs)("span",{className:"text-xs sm:text-sm text-gray-400 flex items-center",children:[(0,Ns.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Ns.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.time]}):(0,Ns.jsx)("span",{className:"text-xs sm:text-sm text-green-500",children:e.time})},"in-".concat(t))):(0,Ns.jsx)("span",{className:"text-xs sm:text-sm text-green-500",children:"--:--"})})}),(0,Ns.jsx)("td",{className:"px-4 sm:px-6 py-4 text-xs sm:text-sm",children:(0,Ns.jsx)("div",{className:"space-y-1",children:s.length>0?s.map((e,t)=>(0,Ns.jsx)("div",{className:"flex items-center",children:e.isMissedPunchOut?(0,Ns.jsxs)("span",{className:"text-xs sm:text-sm text-gray-400 flex items-center",children:[(0,Ns.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Ns.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.time]}):(0,Ns.jsx)("span",{className:"text-xs sm:text-sm text-red-500",children:e.time})},"out-".concat(t))):(0,Ns.jsx)("span",{className:"text-xs sm:text-sm text-red-500",children:"--:--"})})}),(0,Ns.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:d})]},h)})})]})}),_&&(0,Ns.jsx)("div",{className:"flex justify-center mt-4",children:(0,Ns.jsx)("button",{onClick:()=>{i(e=>e+2)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Load More"})})]})},pF=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)({}),[p,m]=(0,r.useState)([]),[g,x]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1),[y,w]=(0,r.useState)(null),[N,j]=(0,r.useState)(""),[C,B]=(0,r.useState)((new Date).getMonth()+1),[k,S]=(0,r.useState)((new Date).getFullYear()),[_,E]=(0,r.useState)(!1),[F,T]=(0,r.useState)(null),[I,D]=(0,r.useState)((new Date).getMonth()+1),[L,P]=(0,r.useState)((new Date).getFullYear()),[R,U]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{i(!0),l("");try{const e=await ws.get("/admin/workers");console.log("Workers data:",e.data);const n=await ws.get("/admin/settings/batches");console.log("Batches data:",n.data);const r=await ws.get("/admin/holidays");console.log("Holidays data:",r.data);const a={};n.data.forEach(e=>{a[e.id]=e.name||"Batch ".concat(e.id)}),f(a),m(r.data),t(e.data),s(e.data)}catch(e){l("Failed to fetch data"),console.error(e)}finally{i(!1)}})()},[]),(0,r.useEffect)(()=>{if(!u)return void s(e);const t=e.filter(e=>{var t,n,r,s,a;const i=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())||"",o=(null===(n=e.rfid)||void 0===n?void 0:n.toLowerCase())||"",l=(null===(r=e.department)||void 0===r||null===(s=r.name)||void 0===s?void 0:s.toLowerCase())||"",c=(null===(a=O(e))||void 0===a?void 0:a.toLowerCase())||"";return i.includes(u.toLowerCase())||o.includes(u.toLowerCase())||l.includes(u.toLowerCase())||c.includes(u.toLowerCase())});s(t)},[u,e,A]);const O=e=>e.workingHours&&e.workingHours.from&&e.workingHours.to?"".concat(e.workingHours.from," - ").concat(e.workingHours.to):"N/A",M=async()=>{if(!N||isNaN(N)||parseFloat(N)<=0)l("Please enter a valid incentive amount");else try{await ws.post("/admin/incentives",{workerId:y._id,amount:parseFloat(N),month:C,year:k});d("Incentive of \u20b9".concat(N," added for ").concat(y.name)),b(!1);const e=await ws.get("/admin/workers");t(e.data),s(e.data),setTimeout(()=>d(""),3e3)}catch(r){var e,n;l("Failed to add incentive: "+((null===(e=r.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||r.message)),console.error("Incentive error:",r)}},Q=async()=>{if(F){U(!0),l("");try{var e;new Date(L,I-1,1);const t=new Date(L,I,0).getDate(),n=[];let r=0,s=0,a=0,i=0,o=0,l=0,c=0;for(let e=1;e<=t;e++){const t=new Date(L,I-1,e),d=0===t.getDay(),u=Math.random()>.95;let h="Present";if(d?h="Sunday":u?h="Holiday":Math.random()>.8&&(h="Absent"),"Present"===h){r++;const e=new Date(t);e.setHours(9,30,0,0);const s=new Date(t);s.setHours(18,30,0,0),e.setMinutes(e.getMinutes()+Math.floor(20*Math.random())),s.setMinutes(s.getMinutes()-Math.floor(20*Math.random()));const a=new Date(t);a.setHours(9,0,0,0);const i=Math.max(0,(e-a)/6e4),d=.6173*i,u=(s-e)/36e5;n.push({date:t.getDate(),status:h,inTime:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),outTime:s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),delayTime:i>0?"".concat(Math.round(i)," mins"):"-",delayDeduction:d>0?"\u20b9".concat(d.toFixed(2)):"\u20b90.00"}),o+=u,l+=0,c+=d}else"Absent"===h?(s++,n.push({date:t.getDate(),status:h,inTime:"Absent",outTime:"Absent",delayTime:"-",delayDeduction:"\u20b9333.33"}),c+=333.33):"Holiday"===h?(a++,n.push({date:t.getDate(),status:h,inTime:"-",outTime:"-",delayTime:"-",delayDeduction:"\u20b90.00"})):"Sunday"===h&&(i++,n.push({date:t.getDate(),status:h,inTime:"-",outTime:"-",delayTime:"-",delayDeduction:"\u20b90.00"}))}const d=parseFloat(F.salary)||0,u=t,h=r,A=25,f=d/A,p=f/480,m=s*(d/A),g=l*p,v=c+m+g,b=d-v,y=n.map(e=>{let t=0;if("Present"===e.status){const n=parseFloat(e.delayDeduction.replace("\u20b9",""))||0;t=f-n}else"Absent"===e.status?t=0:"Holiday"!==e.status&&"Sunday"!==e.status||(t=f);return(0,$n.A)((0,$n.A)({},e),{},{totalSalaryForDay:"\u20b9".concat(t.toFixed(2))})});x({worker:F,month:I,year:L,summary:{employeeId:(null===(e=F.user)||void 0===e?void 0:e.username)||"N/A",originalSalary:"\u20b9".concat(d.toFixed(2)),actualEarnedSalary:"\u20b9".concat(b.toFixed(2)),totalFinalSalary:"\u20b9".concat(b.toFixed(2)),totalDaysInPeriod:u,totalWorkingDays:r,totalAbsentDays:s,totalHolidays:a,totalSundays:i,actualWorkingDays:h,totalWorkingHours:o.toFixed(2),totalPermissionTime:l.toFixed(2),absentDeduction:"\u20b9".concat(m.toFixed(2)),permissionDeduction:"\u20b9".concat(g.toFixed(2)),totalDeductions:"\u20b9".concat(v.toFixed(2)),attendanceRate:"".concat((r/u*100).toFixed(2),"%"),perMinuteSalary:"\u20b9".concat(p.toFixed(4))},dailyData:y})}catch(t){l("Failed to generate salary report"),console.error("Salary report error:",t)}finally{U(!1)}}},H=e=>(parseFloat(e.salary)||0)+(e.currentMonthIncentives||0),z=()=>v?(0,Tt.createPortal)((0,Ns.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Ns.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:(0,Ns.jsxs)("div",{className:"p-6",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Incentive"}),y&&(0,Ns.jsx)("div",{className:"mb-4",children:(0,Ns.jsxs)("p",{className:"text-gray-700",children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Worker:"})," ",y.name]})}),(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Month"}),(0,Ns.jsx)("select",{value:C,onChange:e=>B(parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(e=>{return(0,Ns.jsx)("option",{value:e,children:(t=e,["January","February","March","April","May","June","July","August","September","October","November","December"][t-1]||"")},e);var t})})]}),(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Year"}),(0,Ns.jsx)("input",{type:"number",value:k,onChange:e=>S(parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2020",max:"2030"})]}),(0,Ns.jsxs)("div",{className:"mb-6",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Incentive Amount (\u20b9)"}),(0,Ns.jsx)("input",{type:"number",value:N,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter incentive amount",min:"0",step:"0.01",autoFocus:!0})]}),(0,Ns.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Ns.jsx)("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none",children:"Cancel"}),(0,Ns.jsx)("button",{type:"button",onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none",children:"Add Incentive"})]})]})})}),document.body):null,W=()=>_?(0,Tt.createPortal)((0,Ns.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Ns.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-screen overflow-y-auto",children:(0,Ns.jsxs)("div",{className:"p-6",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Salary Report"}),(0,Ns.jsx)("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-gray-700",children:(0,Ns.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),R&&(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,Ns.jsx)("p",{className:"mt-2 text-gray-600",children:"Generating report..."})]}),g&&(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,Ns.jsx)("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Summary"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Employee ID"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.employeeId})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Original Salary"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.originalSalary})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Actual Earned Salary"}),(0,Ns.jsx)("p",{className:"font-medium text-green-600",children:g.summary.actualEarnedSalary})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Total Final Salary"}),(0,Ns.jsx)("p",{className:"font-medium text-blue-600",children:g.summary.totalFinalSalary})]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mt-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Total Days"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.totalDaysInPeriod})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Working Days"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.totalWorkingDays})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Absent Days"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.totalAbsentDays})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Holidays"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.totalHolidays})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Sundays"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.totalSundays})]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Actual Working Days"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.actualWorkingDays})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Working Hours"}),(0,Ns.jsxs)("p",{className:"font-medium",children:[g.summary.totalWorkingHours," hrs"]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Permission Time"}),(0,Ns.jsxs)("p",{className:"font-medium",children:[g.summary.totalPermissionTime," mins"]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Attendance Rate"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.attendanceRate})]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Absent Deduction"}),(0,Ns.jsx)("p",{className:"font-medium text-red-600",children:g.summary.absentDeduction})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Permission Deduction"}),(0,Ns.jsx)("p",{className:"font-medium text-red-600",children:g.summary.permissionDeduction})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Total Deductions"}),(0,Ns.jsx)("p",{className:"font-medium text-red-600",children:g.summary.totalDeductions})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Per Minute Salary"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.perMinuteSalary})]})]})]}),(0,Ns.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,Ns.jsx)("h4",{className:"text-md font-semibold text-gray-800 p-4 bg-gray-50",children:"Daily Breakdown"}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"In Time"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Out Time"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Delay Time"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Delay Deduction"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Salary for Day"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.dailyData.map((e,t)=>(0,Ns.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,Ns.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-900",children:[e.date," ",new Date(g.year,g.month-1,e.date).toLocaleDateString("en-US",{month:"long"})]}),(0,Ns.jsx)("td",{className:"px-4 py-3 text-sm ".concat("Present"===e.status?"text-green-600":"Absent"===e.status?"text-red-600":"text-blue-600"),children:e.status}),(0,Ns.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.inTime}),(0,Ns.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.outTime}),(0,Ns.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.delayTime}),(0,Ns.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.delayDeduction}),(0,Ns.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.totalSalaryForDay})]},t))})]})})]})]}),!R&&!g&&(0,Ns.jsx)("div",{className:"text-center py-4 text-gray-500",children:(0,Ns.jsx)("p",{children:"Select a worker and generate a report to view details."})})]})})}),document.body):null;return(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Ns.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Ns.jsx)("h3",{className:"text-2xl font-semibold text-gray-800",children:"Salary Report"})}),c&&(0,Ns.jsx)("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg",children:c}),o&&(0,Ns.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:o}),(0,Ns.jsx)("div",{className:"mb-6",children:(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsx)("input",{type:"text",placeholder:"Search workers by name, employee ID, department, or batch...",value:u,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,Ns.jsx)("svg",{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),a&&(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,Ns.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading workers..."})]}),!a&&n.length>0&&(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,Ns.jsx)("thead",{children:(0,Ns.jsxs)("tr",{className:"bg-gray-100",children:[(0,Ns.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Name"}),(0,Ns.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Salary"}),(0,Ns.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Salary (This Month)"}),(0,Ns.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Batch Name"}),(0,Ns.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Employee ID"}),(0,Ns.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Department"}),(0,Ns.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{children:n.map((e,t)=>{var n;return(0,Ns.jsxs)("tr",{className:t%2===0?"bg-gray-50":"",children:[(0,Ns.jsx)("td",{className:"py-3 px-4 border-b",children:e.name}),(0,Ns.jsxs)("td",{className:"py-3 px-4 border-b",children:["\u20b9",e.salary||0]}),(0,Ns.jsxs)("td",{className:"py-3 px-4 border-b",children:["\u20b9",H(e)]}),(0,Ns.jsx)("td",{className:"py-3 px-4 border-b",children:O(e)}),(0,Ns.jsx)("td",{className:"py-3 px-4 border-b",children:e.rfid||"N/A"}),(0,Ns.jsx)("td",{className:"py-3 px-4 border-b",children:(null===(n=e.department)||void 0===n?void 0:n.name)||"N/A"}),(0,Ns.jsx)("td",{className:"py-3 px-4 border-b",children:(0,Ns.jsxs)("div",{className:"flex space-x-2",children:[(0,Ns.jsxs)("button",{onClick:()=>(e=>{w(e),j(""),B((new Date).getMonth()+1),S((new Date).getFullYear()),b(!0)})(e),className:"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none text-sm flex items-center",title:"Add Incentive",children:[(0,Ns.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Incentive"]}),(0,Ns.jsxs)("button",{onClick:()=>(e=>{T(e),D((new Date).getMonth()+1),P((new Date).getFullYear()),x(null),E(!0),Promise.resolve().then(()=>{Q()})})(e),className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none text-sm flex items-center",title:"Generate Report",children:[(0,Ns.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Report"]})]})})]},e._id)})})]})}),!a&&0===n.length&&!o&&(0,Ns.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,Ns.jsx)("p",{children:"No workers found."})}),!a&&e.length>0&&0===n.length&&u&&(0,Ns.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,Ns.jsx)("p",{children:"No workers match your search criteria."})}),(0,Ns.jsx)(z,{}),(0,Ns.jsx)(W,{})]})},mF=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(!0),[g,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{v()},[]);const v=async()=>{s(!0),i("");try{const e=await ws.get("/admin/holidays");t(e.data)}catch(e){i("Failed to fetch holidays"),console.error(e)}finally{s(!1)}};return(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Ns.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Ns.jsx)("h3",{className:"text-2xl font-semibold text-gray-800",children:"Holiday Management"})}),o&&(0,Ns.jsx)("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg",children:o}),a&&(0,Ns.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:a}),(0,Ns.jsxs)("div",{className:"mb-8 p-4 border rounded-lg bg-gray-50",children:[(0,Ns.jsx)("h4",{className:"text-lg font-medium text-gray-800 mb-4",children:g?"Edit Holiday":"Add New Holiday"}),(0,Ns.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i(""),l(""),c&&u)try{const e={name:c,date:u,description:A,isPaid:p};g?(await ws.put("/admin/holidays/".concat(g),e),l("Holiday updated successfully")):(await ws.post("/admin/holidays",e),l("Holiday created successfully")),d(""),h(""),f(""),m(!0),x(null),v()}catch(r){var t,n;i((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to save holiday"),console.error(r)}else i("Name and date are required")},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Holiday Name *"}),(0,Ns.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter holiday name",required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Date *"}),(0,Ns.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Ns.jsxs)("div",{className:"md:col-span-2",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),(0,Ns.jsx)("textarea",{value:A,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter holiday description (optional)",rows:"3"})]}),(0,Ns.jsx)("div",{children:(0,Ns.jsxs)("label",{className:"flex items-center",children:[(0,Ns.jsx)("input",{type:"checkbox",checked:p,onChange:e=>m(e.target.checked),className:"rounded text-blue-600 focus:ring-blue-500"}),(0,Ns.jsx)("span",{className:"ml-2 text-gray-700",children:"Paid Holiday"})]})}),(0,Ns.jsxs)("div",{className:"flex space-x-3 md:col-span-2",children:[(0,Ns.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none",children:g?"Update Holiday":"Add Holiday"}),g&&(0,Ns.jsx)("button",{type:"button",onClick:()=>{d(""),h(""),f(""),m(!0),x(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none",children:"Cancel"})]})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h4",{className:"text-lg font-medium text-gray-800 mb-4",children:"Existing Holidays"}),n&&(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,Ns.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading holidays..."})]}),!n&&e.length>0&&(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,Ns.jsx)("thead",{children:(0,Ns.jsxs)("tr",{className:"bg-gray-100",children:[(0,Ns.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Name"}),(0,Ns.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Date"}),(0,Ns.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Description"}),(0,Ns.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Paid"}),(0,Ns.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{children:e.map((e,t)=>{return(0,Ns.jsxs)("tr",{className:t%2===0?"bg-gray-50":"",children:[(0,Ns.jsx)("td",{className:"py-2 px-4 border-b",children:e.name}),(0,Ns.jsx)("td",{className:"py-2 px-4 border-b",children:(n=e.date,new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}))}),(0,Ns.jsx)("td",{className:"py-2 px-4 border-b",children:e.description||"-"}),(0,Ns.jsx)("td",{className:"py-2 px-4 border-b",children:(0,Ns.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(e.isPaid?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isPaid?"Yes":"No"})}),(0,Ns.jsx)("td",{className:"py-2 px-4 border-b",children:(0,Ns.jsxs)("div",{className:"flex space-x-2",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{d(e.name),h(new Date(e.date).toISOString().split("T")[0]),f(e.description||""),m(e.isPaid),x(e._id)})(e),className:"px-3 py-1 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 focus:outline-none text-sm",children:"Edit"}),(0,Ns.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this holiday?"))try{await ws.delete("/admin/holidays/".concat(e)),l("Holiday deleted successfully"),v()}catch(t){i("Failed to delete holiday"),console.error(t)}})(e._id),className:"px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none text-sm",children:"Delete"})]})})]},e._id);var n})})]})}),!n&&0===e.length&&(0,Ns.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,Ns.jsx)("p",{children:"No holidays found. Add a new holiday to get started."})})]})]})},gF=()=>{const e=J(),[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)(""),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[h,A]=(0,r.useState)({type:"",text:""}),[f,p]=(0,r.useState)(null),[m,g]=(0,r.useState)(!1),[x,v]=(0,r.useState)(""),[b,y]=(0,r.useState)({type:"info",text:"Ready to mark attendance..."}),[w,N]=(0,r.useState)(!1),[j,C]=(0,r.useState)(!1),[B,k]=(0,r.useState)(!0),S=(0,r.useRef)(null),_=new URLSearchParams(e.search),E=!!_.get("workerId")&&"true"===_.get("update"),F=_.get("workerId");(0,r.useEffect)(()=>{(async()=>{try{console.log("Initializing face recognition service..."),await cw.initialize(),console.log("Face recognition service initialized successfully");const e=await ws.get("/admin/attendance/face-status");console.log("Service status response:",e.data),console.log("Service ready status:",e.data.serviceReady),p(e.data),e.data.serviceReady?(console.log("Service IS ready - showing success message"),A({type:"success",text:"Face recognition service is ready!"})):(console.log("Service is NOT ready - showing error message"),A({type:"error",text:"Face recognition service is not available. Please use RFID attendance instead."}));const t=await ws.get("/admin/workers");if(E&&F){n(t.data);const e=t.data.find(e=>e._id===F);e&&(a(F),A({type:"info",text:"Updating face enrollment for ".concat(e.name,". Please upload or capture new images.")}))}else{const e=t.data.filter(e=>!e.faceImages||0===e.faceImages.length);n(e)}}catch(e){console.error("Error fetching data:",e),A({type:"error",text:"Failed to initialize: ".concat(e.message)})}})()},[e.search,E,F]);const T=(0,r.useCallback)(async()=>{if(w||!S.current||!j||"success"===b.type)return;if(f&&!f.serviceReady)return void y({type:"error",text:"Face recognition service is not available."});const e=S.current.getScreenshot();if(e){N(!0),y({type:"info",text:"Recognizing face..."});try{await cw.initialize();const t=await cw.loadImageFromDataURL(e),n=await cw.recognizeFace(t);if(n.success){const e=await ws.post("/admin/attendance/recognize-face",{faceDescriptor:Array.from(n.descriptor||[]),workerId:n.workerId,confidence:n.confidence});y({type:"success",text:e.data.message}),k(!1)}else y({type:"error",text:"Face not recognized. Please enroll first or try again."})}catch(r){var t,n;console.error("Face recognition error:",r);let e="Face recognition failed.";r.message.includes("No face detected")?e="No face detected. Please position your face clearly in the camera.":r.message.includes("not recognized")?e="Face not recognized. Please enroll first or try again.":null!==(t=r.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.message&&(e=r.response.data.message),y({type:"error",text:e}),setTimeout(()=>{N(!1),"success"!==b.type&&y({type:"info",text:"Ready to scan again..."})},3e3)}}},[w,j,b.type,f]);(0,r.useEffect)(()=>{if(m&&j&&"success"!==b.type&&B){const e=setInterval(()=>{T()},3e3);return()=>clearInterval(e)}},[m,j,b.type,T,B]);const I=()=>{let e=(0,Ns.jsx)(lt,{className:"animate-spin text-4xl text-gray-500"}),t="border-gray-400";return j&&(w?(e=(0,Ns.jsx)(lt,{className:"animate-spin text-4xl text-blue-500"}),t="border-blue-500"):"success"===b.type?(e=(0,Ns.jsx)(Ke,{className:"text-4xl text-green-500"}),t="border-green-500"):"error"===b.type?(e=(0,Ns.jsx)(Ct,{className:"text-4xl text-red-500"}),t="border-red-500"):(e=(0,Ns.jsx)(Oe,{className:"text-4xl text-gray-500"}),t="border-gray-400")),{icon:e,color:t}};return(0,Ns.jsx)("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-lg",children:m?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Ns.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:["Mark Attendance - ",x]}),(0,Ns.jsxs)("button",{onClick:()=>{E?window.close():(g(!1),v(""),c(!1),C(!1),y({type:"info",text:"Ready to mark attendance..."}),N(!1),k(!0),A({type:"",text:""}))},className:"flex items-center px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:[(0,Ns.jsx)(De,{className:"mr-2"})," ",E?"Back to Workers":"Back to Enrollment"]})]}),(0,Ns.jsx)("p",{className:"text-center text-gray-600 mb-6",children:E?"Face enrollment updated successfully! Now position your face in the camera frame to mark your attendance.":"Enrollment successful! Now position your face in the camera frame to mark your attendance."}),(0,Ns.jsxs)("div",{className:"relative w-full aspect-square bg-gray-900 rounded-lg overflow-hidden border-4 ".concat(I().color," transition-colors duration-500 mb-6"),children:[(0,Ns.jsx)(Pa(),{audio:!1,ref:S,screenshotFormat:"image/jpeg",videoConstraints:{facingMode:"user",width:720,height:720},onUserMedia:()=>{C(!0),y({type:"info",text:"Ready to scan for attendance"})},className:"absolute top-0 left-0 w-full h-full object-cover"}),(0,Ns.jsx)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center pointer-events-none",children:(0,Ns.jsx)("div",{className:"w-3/4 h-3/4 border-4 border-dashed border-white rounded-full opacity-30"})})]}),(0,Ns.jsxs)("div",{className:"text-center p-4 rounded-lg bg-gray-50",children:[(0,Ns.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[I().icon,(0,Ns.jsx)("span",{className:"text-lg font-medium text-gray-700",children:b.text})]}),(0,Ns.jsx)("button",{onClick:T,disabled:w||!j||"success"===b.type,className:"w-full py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300",children:w?"Processing...":"Mark Attendance Now"}),(0,Ns.jsx)("div",{className:"mt-4 flex items-center justify-center space-x-4",children:(0,Ns.jsxs)("label",{className:"flex items-center",children:[(0,Ns.jsx)("input",{type:"checkbox",checked:B,onChange:e=>k(e.target.checked),className:"mr-2",disabled:"success"===b.type}),(0,Ns.jsx)("span",{className:"text-sm text-gray-600",children:"Auto-scan enabled"})]})})]})]}):(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Face Enrollment"}),f&&(0,Ns.jsxs)("div",{className:"mb-4 p-3 rounded-lg ".concat(f.serviceReady?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:[(0,Ns.jsx)("div",{className:"text-sm font-medium",children:f.serviceReady?"\u2705 React Face Recognition: Ready (High Accuracy)":"\u26a0\ufe0f Face Recognition Service: Unavailable"}),f.currentMode&&(0,Ns.jsxs)("div",{className:"text-xs mt-1",children:[(0,Ns.jsx)("strong",{children:"Current Mode:"})," ",f.currentMode]}),f.features&&f.serviceReady&&(0,Ns.jsxs)("div",{className:"text-xs mt-1 space-y-1",children:[(0,Ns.jsx)("div",{children:(0,Ns.jsx)("strong",{children:"Features:"})}),(0,Ns.jsxs)("ul",{className:"text-xs text-green-700 ml-4 space-y-1",children:[(0,Ns.jsx)("li",{children:"\u2022 Real-time face detection and recognition"}),(0,Ns.jsx)("li",{children:"\u2022 High accuracy with neural networks"}),(0,Ns.jsx)("li",{children:"\u2022 Works entirely in the browser"}),(0,Ns.jsx)("li",{children:"\u2022 No server dependencies required"})]})]})]}),h.text&&(0,Ns.jsx)("div",{className:"p-4 mb-4 rounded-lg ".concat("success"===h.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:h.text}),(0,Ns.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==f&&void 0!==f&&f.serviceReady)if(s&&0!==i.length){u(!0),A({type:"",text:""});try{await cw.initialize();const e=[];for(const t of i)try{const n=await cw.loadImageFromDataURL(t.preview),r=await cw.detectFaceFromImage(n);r&&r.descriptor&&e.push(Array.from(r.descriptor))}catch(d){console.warn("Failed to detect face in one image:",d)}if(0===e.length)return A({type:"error",text:"No faces detected in the uploaded images. Please ensure faces are clearly visible."}),void u(!1);await cw.enrollFace(s,e.map(e=>new Float32Array(e)));const r=new FormData;r.append("workerId",s),r.append("faceDescriptors",JSON.stringify(e)),console.log("Sending enrollment data:",{workerId:s,faceDescriptorsCount:e.length,faceDescriptorsStringified:JSON.stringify(e),imageFilesCount:i.length}),i.forEach(e=>{r.append("faces",e.file)}),await ws.post("/admin/attendance/enroll-face",r);const l=t.find(e=>e._id===s);v((null===l||void 0===l?void 0:l.name)||"Worker");const h="".concat(null===l||void 0===l?void 0:l.name,E?" face enrollment updated successfully! Now mark attendance by looking at the camera.":" enrolled successfully! Now mark attendance by looking at the camera.");if(A({type:"success",text:h}),g(!0),c(!0),y({type:"info",text:"Position your face in the camera to mark attendance..."}),a(""),o([]),!E){const e=(await ws.get("/admin/workers")).data.filter(e=>!e.faceImages||0===e.faceImages.length);n(e)}}catch(h){var r,l;console.error("Error enrolling face:",h);const e=(null===(r=h.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.message)||h.message||"An error occurred during enrollment.";A({type:"error",text:e})}finally{u(!1)}}else A({type:"error",text:"Please select a worker and provide at least one image."});else A({type:"error",text:"Face recognition service is not available."})},className:"space-y-6",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{htmlFor:"worker",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Worker"}),(0,Ns.jsxs)("select",{id:"worker",value:s,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",disabled:d||E&&F,children:[(0,Ns.jsx)("option",{value:"",children:"-- Select a Worker --"}),t.map(e=>(0,Ns.jsxs)("option",{value:e._id,children:[e.name," (",e.username,")"]},e._id))]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ns.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[l?(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)(Pa(),{audio:!1,ref:S,screenshotFormat:"image/jpeg",className:"w-full rounded-md"}),(0,Ns.jsxs)("button",{type:"button",onClick:()=>{if(S.current&&i.length<5){const e=S.current.getScreenshot();if(e){const t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),s=new Uint8Array(r);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);const a=new Blob([r],{type:n}),i=new File([a],"capture-".concat(Date.now(),".jpeg"),{type:n});o(t=>[...t,{file:i,preview:e}])}}else A({type:"error",text:"You can only add up to 5 images."})},disabled:d||i.length>=5,className:"mt-4 w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[(0,Ns.jsx)(Oe,{className:"mr-2"})," Capture Image"]})]}):(0,Ns.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,Ns.jsx)(kt,{className:"text-4xl text-gray-400 mb-2"}),(0,Ns.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer text-sm font-medium text-red-600 hover:text-red-500",children:"Upload up to 5 images"}),(0,Ns.jsx)("input",{id:"file-upload",type:"file",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files){const t=Array.from(e.target.files).slice(0,5-i.length).map(e=>({file:e,preview:URL.createObjectURL(e)}));o(e=>[...e,...t])}},className:"sr-only",disabled:d||i.length>=5}),(0,Ns.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"or"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>c(!0),className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-500",children:"Use Camera"})]}),l&&(0,Ns.jsx)("button",{type:"button",onClick:()=>c(!1),className:"mt-2 text-sm text-gray-600 hover:text-gray-800",children:"Close Camera"})]}),(0,Ns.jsxs)("div",{className:"space-y-2",children:[(0,Ns.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["Image Previews (",i.length,"/5)"]}),i.length>0?(0,Ns.jsx)("div",{className:"grid grid-cols-3 gap-2",children:i.map((e,t)=>(0,Ns.jsxs)("div",{className:"relative group",children:[(0,Ns.jsx)("img",{src:e.preview,alt:"preview ".concat(t),className:"w-full h-24 object-cover rounded-md"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>(e=>{o(i.filter((t,n)=>n!==e))})(t),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2715"})]},t))}):(0,Ns.jsx)("div",{className:"flex items-center justify-center h-full bg-gray-50 rounded-lg",children:(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"No images selected"})})]})]}),(0,Ns.jsx)("div",{children:(0,Ns.jsx)("button",{type:"submit",disabled:d||!s||0===i.length||!(null!==f&&void 0!==f&&f.serviceReady),className:"w-full flex justify-center items-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-300",children:d?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Ns.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ns.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enrolling..."]}):(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(_t,{className:"mr-2"})," Enroll Worker"]})})})]})]})})};const xF=function(e){let{baseUrl:t="/admin"}=e;const n="".concat(t,"/departments"),[s,a]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)("");return(0,Ns.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[(0,Ns.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800",children:"Create New Department"}),(0,Ns.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(""),c("");try{await ws.post(n,JSON.stringify({name:s}),{headers:{"Content-Type":"application/json"},withCredentials:!0}),o('Department "'.concat(s,'" created successfully!')),a("")}catch(t){null!==t&&void 0!==t&&t.response?c("Failed to create department. Please check the form data."):c("No Server Response"),console.error(t)}},className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"departmentName",children:"Department Name"}),(0,Ns.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"departmentName",value:s,onChange:e=>a(e.target.value),required:!0})]}),(0,Ns.jsx)("button",{type:"submit",className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Add Department"})]}),i&&(0,Ns.jsx)("p",{className:"mt-4 text-green-500",children:i}),l&&(0,Ns.jsx)("p",{className:"mt-4 text-red-500",children:l})]})};const vF=function(e){let{baseUrl:t="/admin"}=e;const n="".concat(t,"/departments"),s="".concat(t,"/shops"),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)("admin"),[u,h]=(0,r.useState)(!0),[A,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(null),[g,x]=(0,r.useState)(""),[v,b]=(0,r.useState)(null),[y,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{"/admin"===t&&(async()=>{try{const e=await ws.get(s,{headers:{"Content-Type":"application/json"},withCredentials:!0});l(e.data)}catch(e){console.error("Failed to fetch shops:",e)}})(),(async()=>{try{let e={};"admin"===c?e={showAdmin:!0}:c&&(e={shopId:c});const t=await ws.get(n,{params:e,headers:{"Content-Type":"application/json"},withCredentials:!0});i(t.data)}catch(e){f("Failed to fetch departments."),console.error(e)}finally{h(!1)}})()},[t,c]);const N=async e=>{try{const t=await ws.put("".concat(n,"/").concat(e),{name:g},{headers:{"Content-Type":"application/json"},withCredentials:!0});i(a.map(n=>n._id===e?t.data:n)),j()}catch(t){f("Failed to update department."),console.error(t)}},j=()=>{m(null),x(""),w(!1)};return u?(0,Ns.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-16 h-16 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-10 h-10"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading departments..."})]}):A?(0,Ns.jsx)("div",{className:"p-6 text-center text-red-500",children:A}):(0,Ns.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h3",{className:"text-xl md:text-2xl font-semibold text-gray-800",children:"Existing Departments"}),(0,Ns.jsxs)("button",{onClick:()=>{const e={};if("admin"!==c){var t;const n=(null===(t=o.find(e=>e._id===c))||void 0===t?void 0:t.name)||"All Shops";e.shop=n}else e.shop="Admin Departments Only";!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(new Date).toLocaleDateString(),r=e.length,s=e.reduce((e,t)=>e+(t.workers?t.workers.length:0),0),a=e.map(e=>{const t=e.workers?e.workers.length:0,n=e.workers&&e.workers.length>0?e.workers.map(e=>e.name).join(", "):"No workers";return'\n      <tr>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px; font-weight: bold;">'.concat(e.name||"N/A",'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; text-align: center; font-size: 14px;">').concat(t,'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">').concat(n,"</td>\n      </tr>\n    ")}).join(""),i=[];t.shop&&i.push("Shop: ".concat(t.shop));const o=i.length>0?'<p style="margin: 8px 0; font-size: 16px;"><strong>Filters Applied:</strong> '.concat(i.join(", "),"</p>"):"",l='\n    <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 1000px; margin: 0 auto;">\n      \x3c!-- Header --\x3e\n      <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #333; padding-bottom: 20px;">\n        <h1 style="color: #333; margin: 0; font-size: 32px;">The Sweet Hub</h1>\n        <p style="color: #666; font-size: 16px; margin: 10px 0 5px 0;">156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006</p>\n        <p style="color: #666; font-size: 16px; margin: 5px 0;">Phone: 7339200636</p>\n      </div>\n      \n      <div style="text-align: center; margin-bottom: 30px;">\n        <h2 style="color: #333; margin: 0; font-size: 28px;">DEPARTMENT REPORT</h2>\n        <p style="color: #666; font-size: 18px; margin: 15px 0;">\n          Generated on '.concat(n,"\n        </p>\n        ").concat(o,'\n      </div>\n      \n      \x3c!-- Summary --\x3e\n      <div style="margin-bottom: 30px; background-color: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #dee2e6;">\n        <h3 style="color: #333; margin-top: 0; font-size: 20px;">Report Summary</h3>\n        <div style="display: flex; justify-content: space-around; text-align: center;">\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Departments</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(r,'</p>\n          </div>\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Workers</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(s,'</p>\n          </div>\n        </div>\n      </div>\n      \n      \x3c!-- Detailed Departments --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Department Details</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Department Name</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: center; font-size: 16px; font-weight: bold;">Worker Count</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Workers</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(a,'\n          </tbody>\n        </table>\n      </div>\n      \n      <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; text-align: center;">\n        <p style="color: #777; font-size: 14px; margin: 0;">\n          Generated on ').concat(n," at ").concat((new Date).toLocaleTimeString(),'\n        </p>\n        <p style="color: #777; font-size: 14px; margin: 5px 0 0 0;">\n          Report generated by The Sweet Hub Department Management System\n        </p>\n      </div>\n    </div>\n  '),c={margin:15,filename:"department_report_".concat(n.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};fw()().from(l).set(c).save()}(a,e)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center",disabled:0===a.length,children:[(0,Ns.jsx)(Ye,{className:"mr-2"}),"Download PDF"]})]}),"/admin"===t&&(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Filter by Shop"}),(0,Ns.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Ns.jsx)("option",{value:"admin",children:"Admin Departments Only"}),o.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),0===a.length?(0,Ns.jsx)("p",{children:"No departments found. Please create one."}):(0,Ns.jsx)("ul",{className:"divide-y divide-gray-200",children:a.map(e=>(0,Ns.jsxs)("li",{className:"py-4 flex justify-between items-center",children:[p===e._id?(0,Ns.jsx)("input",{type:"text",value:g,onChange:e=>x(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}):(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("div",{onClick:()=>b(v===e._id?null:e._id),className:"cursor-pointer",children:[(0,Ns.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,Ns.jsxs)("p",{className:"text-sm text-gray-500",children:["Workers: ",e.workers.length]})]}),v===e._id&&(0,Ns.jsx)("div",{className:"mt-2 pl-4",children:e.workers.length>0?(0,Ns.jsx)("ul",{className:"list-disc list-inside",children:e.workers.map(e=>(0,Ns.jsx)("li",{className:"text-sm text-gray-600",children:e.name},e._id))}):(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"No workers in this department."})})]}),(0,Ns.jsxs)("div",{className:"w-full flex justify-end items-center space-x-4 sm:w-auto sm:space-x-2",children:[p===e._id?(0,Ns.jsx)("button",{onClick:()=>N(e._id),className:"text-green-600 hover:text-green-900",children:"Save"}):(0,Ns.jsx)("button",{onClick:()=>{return m((t=e)._id),x(t.name),void w(!0);var t},className:"text-blue-600 hover:text-blue-900",children:"Edit"}),(0,Ns.jsx)("button",{onClick:()=>(async e=>{try{await ws.delete("".concat(n,"/").concat(e),{withCredentials:!0}),i(a.filter(t=>t._id!==e))}catch(t){f("Failed to delete department."),console.error(t)}})(e._id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e._id))}),y&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",children:(0,Ns.jsxs)("div",{className:"relative m-4 p-4 sm:p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:"Edit Department Name"}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,Ns.jsx)("input",{type:"text",value:g,onChange:e=>x(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,Ns.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Ns.jsx)("button",{onClick:j,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:()=>N(p),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update"})]})]})})]})};const bF=function(e){let{baseUrl:t="/admin"}=e;const n="".concat(t,"/categories"),[s,a]=("".concat(t,"/shops"),(0,r.useState)("")),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[h,A]=(0,r.useState)(!0),f=async()=>{try{const e={showAdmin:!0},t=await ws.get(n,{params:e,withCredentials:!0});o(t.data)}catch(e){u("Failed to fetch categories."),console.error(e)}finally{A(!1)}};return(0,r.useEffect)(()=>{f()},[n]),h?(0,Ns.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-16 h-16 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-10 h-10"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading..."})]}):(0,Ns.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[(0,Ns.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800"}),(0,Ns.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(""),u("");try{const e={name:s};await ws.post(n,JSON.stringify(e),{headers:{"Content-Type":"application/json"},withCredentials:!0}),c('Category "'.concat(s,'" created successfully!')),a(""),f()}catch(t){u("Failed to create category. Please check the form data."),console.error(t)}},className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"categoryName",children:"Category Name"}),(0,Ns.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"categoryName",value:s,onChange:e=>a(e.target.value),required:!0})]}),(0,Ns.jsx)("button",{type:"submit",className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Create Category"})]}),l&&(0,Ns.jsx)("p",{className:"mt-4 text-green-500",children:l}),d&&(0,Ns.jsx)("p",{className:"mt-4 text-red-500",children:d}),(0,Ns.jsxs)("div",{className:"mt-8",children:[(0,Ns.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800"}),0===i.length?(0,Ns.jsx)("p",{children:"No categories found."}):(0,Ns.jsx)("ul",{className:"divide-y divide-gray-200",children:i.map(e=>(0,Ns.jsxs)("li",{className:"flex flex-col items-start gap-3 py-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,Ns.jsxs)("p",{className:"font-medium text-gray-900",children:[e.name," ",(0,Ns.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.products.length," products)"]})]}),(0,Ns.jsx)("div",{className:"w-full flex justify-end sm:w-auto",children:(0,Ns.jsx)("button",{onClick:()=>(async e=>{try{await ws.delete("".concat(n,"/").concat(e),{withCredentials:!0}),c("Category deleted successfully!"),f()}catch(t){u("Failed to delete category."),console.error(t)}})(e._id),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-3 rounded text-sm",children:"Delete"})})]},e._id))})]})]})};function yF(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}const wF=(0,r.createContext)(),NF=e=>{let{children:t}=e;const[n,s]=(0,r.useState)([]),[a]=(0,r.useState)(["piece","kg","gram","box"]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(""),{authState:d}=(0,r.useContext)(js),u=()=>"shop"===d.role?"/shop":"/admin",h=(0,r.useCallback)(async()=>{if(!d.token||!d.role)return console.log("No authenticated user, using default units"),s(a),void o(!1);try{o(!0);const e=u(),t=await ws.get("".concat(e,"/products/units"),{withCredentials:!0}),n=[...new Set([...a,...t.data])];s(n)}catch(n){var e,t;401===(null===(e=n.response)||void 0===e?void 0:e.status)?(console.log("401 error fetching units - using default units"),s(a)):403===(null===(t=n.response)||void 0===t?void 0:t.status)?(console.log("403 error fetching units - using default units"),s(a)):(c("Failed to fetch units"),console.error("Error fetching units:",n),s(a))}finally{o(!1)}},[a,d.token,d.role]);return(0,r.useEffect)(()=>{h()},[h]),(0,Ns.jsx)(wF.Provider,{value:{units:n,defaultUnits:a,loading:i,error:l,addUnit:async e=>{if(!e.trim())throw new Error("Unit name cannot be empty");if(n.includes(e.trim()))throw new Error("Unit already exists");try{const t=[...n,e.trim()];return s(t),e.trim()}catch(t){throw new Error("Failed to add unit")}},deleteUnit:async e=>{if(a.includes(e))throw new Error("Cannot remove default units");try{const t=n.filter(t=>t!==e);return s(t),!0}catch(t){throw new Error("Failed to delete unit")}},isUnitInUse:async e=>{if(!d.token||!d.role)return!1;try{const t=u();return(await ws.get("".concat(t,"/products/units/in-use/").concat(e),{withCredentials:!0})).data.inUse}catch(r){var t,n;return 401===(null===(t=r.response)||void 0===t?void 0:t.status)||(403===(null===(n=r.response)||void 0===n?void 0:n.status)||console.error("Error checking if unit is in use:",r)),!1}},fetchUnits:h},children:t})},jF=["value","onChange","className","showAddUnitOption"],CF=e=>{let{value:t,onChange:n,className:s="",showAddUnitOption:a=!0}=e,i=yF(e,jF);const{units:o,defaultUnits:l,deleteUnit:c,isUnitInUse:d,addUnit:u}=(()=>{const e=(0,r.useContext)(wF);if(!e)throw new Error("useUnits must be used within a UnitProvider");return e})(),[h,A]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),[x,v]=(0,r.useState)(!1),[b,y]=(0,r.useState)(""),[w,N]=(0,r.useState)(!1),[j,C]=(0,r.useState)(""),B=(0,r.useRef)(null),k=(0,r.useRef)(null),S=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=e=>{B.current&&!B.current.contains(e.target)&&(A(!1),v(!1),y(""),C("")),f&&k.current&&!k.current.contains(e.target)&&(p(!1),g(null))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[f]);const _=async e=>{if(e.stopPropagation(),b.trim()){N(!0),C("");try{const e=await u(b);y(""),v(!1),n(e),A(!1)}catch(t){C(t.message||"Failed to add unit")}finally{N(!1)}}else C("Unit name cannot be empty")};return(0,Ns.jsxs)("div",{className:"relative",ref:B,children:[f&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Ns.jsxs)("div",{ref:k,className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Confirm Delete"}),(0,Ns.jsxs)("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to delete the unit "',(0,Ns.jsx)("strong",{children:m}),'"? This action cannot be undone.']}),(0,Ns.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Ns.jsx)("button",{type:"button",onClick:()=>{p(!1),g(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none",children:"Cancel"}),(0,Ns.jsx)("button",{type:"button",onClick:async()=>{if(m)try{if(await d(m))return alert("Cannot remove unit that is currently in use"),p(!1),void g(null);await c(m)}catch(j){alert(j.message||"Failed to delete unit")}finally{p(!1),g(null)}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none",children:"Delete"})]})]})}),(0,Ns.jsxs)("div",(0,$n.A)((0,$n.A)({className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm flex justify-between items-center cursor-pointer bg-white ".concat(s),onClick:()=>A(!h)},i),{},{children:[(0,Ns.jsx)("span",{children:t||"Select unit"}),(0,Ns.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,Ns.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})]})),h&&(0,Ns.jsxs)("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border border-gray-200 max-h-60 overflow-auto",children:[o.map(e=>{const t=!l.includes(e);return(0,Ns.jsxs)("div",{className:"flex justify-between items-center px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{n(e),A(!1)},children:[(0,Ns.jsx)("span",{children:e}),t&&(0,Ns.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),g(e),p(!0)},className:"text-red-500 hover:text-red-700 font-bold ml-2",title:"Delete this unit",children:"\xd7"})]},e)}),a&&(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)("div",{className:"border-t border-gray-200 my-1"}),x?(0,Ns.jsx)("div",{ref:S,className:"px-4 py-2",onClick:e=>e.stopPropagation(),children:(0,Ns.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsx)("input",{type:"text",value:b,onChange:e=>y(e.target.value),className:"shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm",placeholder:"Enter unit name",onKeyDown:e=>{"Enter"===e.key&&_(e)}}),j&&(0,Ns.jsx)("p",{className:"text-red-500 text-xs mt-1",children:j})]}),(0,Ns.jsx)("button",{type:"button",onClick:_,disabled:w,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded text-xs disabled:opacity-50",children:w?"Adding...":"Add"}),(0,Ns.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),v(!1),y(""),C("")},className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-2 rounded text-xs",children:"Cancel"})]})}):(0,Ns.jsx)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-blue-600 flex items-center",onClick:e=>{e.stopPropagation(),v(!0)},children:(0,Ns.jsx)("span",{children:"+ Add New Unit"})})]})]})]})};const BF=function(e){let{baseUrl:t="/admin"}=e;const n="".concat(t,"/products"),s="".concat(t,"/categories"),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)(""),[p,m]=(0,r.useState)([]),[g,x]=(0,r.useState)(""),[v,b]=(0,r.useState)(""),[y,w]=(0,r.useState)(!0),[N,j]=(0,r.useState)([]),[C,B]=(0,r.useState)(!1),[k,S]=(0,r.useState)([]),_=(0,r.useRef)(null),[E,F]=(0,r.useState)([{unit:"piece",netPrice:"",sellingPrice:""}]);(0,r.useEffect)(()=>{(async()=>{try{const[e,t]=await Promise.all([ws.get(s,{withCredentials:!0}),ws.get(n,{withCredentials:!0})]);m(e.data),j(t.data),S(t.data),e.data.length>0&&l(e.data[0]._id)}catch(e){b("Failed to load data."),console.error(e)}finally{w(!1)}})()},[s,n]),(0,r.useEffect)(()=>{const e=e=>{_.current&&!_.current.contains(e.target)&&B(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,r.useEffect)(()=>{if(a){const e=N.filter(e=>e.name.toLowerCase().includes(a.toLowerCase()));S(e)}else S(N)},[a,N]);const T=(e,t,n)=>{const r=[...E];r[e][t]=n,F(r)};return y?(0,Ns.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-16 h-16 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-10 h-10"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading..."})]}):(0,Ns.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[(0,Ns.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800",children:"Add New Product"}),(0,Ns.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),x(""),b(""),a&&o&&c){for(let e=0;e<E.length;e++){const t=E[e];if(!t.unit||!t.netPrice||!t.sellingPrice)return void b("Please fill in all fields for unit ".concat(e+1,"."));if(isNaN(t.netPrice)||isNaN(t.sellingPrice))return void b("Net Price and Selling Price must be valid numbers for unit ".concat(e+1,"."))}try{const e={name:a,category:o,sku:c,stockLevel:parseFloat(u)||0,stockAlertThreshold:parseFloat(A)||0,prices:E.map(e=>({unit:e.unit,netPrice:parseFloat(e.netPrice),sellingPrice:parseFloat(e.sellingPrice)}))};await ws.post(n,JSON.stringify(e),{headers:{"Content-Type":"application/json"},withCredentials:!0}),x('Product "'.concat(a,'" created successfully!')),i(""),d(""),h(""),f(""),F([{unit:"piece",netPrice:"",sellingPrice:""}]);try{const e=await ws.get(n,{withCredentials:!0});j(e.data),S(e.data)}catch(s){console.error("Failed to refresh products:",s)}}catch(s){var t,r;b((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to add product."),console.error(s)}}else b("Please fill in all required fields.")},className:"space-y-4",children:[(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ns.jsxs)("div",{className:"relative",ref:_,children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"productName",children:"Product Name"}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"productName",value:a,onChange:e=>{const t=e.target.value;i(t),B(!0)},onFocus:()=>B(!0),required:!0}),(0,Ns.jsx)("button",{type:"button",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",onClick:()=>B(!C),children:(0,Ns.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,Ns.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),C&&(0,Ns.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[k.map(e=>(0,Ns.jsx)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>(e=>{i(e),B(!1)})(e.name),children:(0,Ns.jsx)("span",{children:e.name})},e._id)),0===k.length&&a&&(0,Ns.jsx)("div",{className:"px-4 py-2",children:(0,Ns.jsxs)("button",{type:"button",className:"text-blue-500 hover:text-blue-700",onClick:()=>(async e=>{i(e),B(!1)})(a),children:['Add "',a,'" as a new product']})}),k.length>0&&(0,Ns.jsx)("div",{className:"border-t border-gray-200",children:(0,Ns.jsxs)("div",{className:"px-4 py-2 text-gray-500 text-sm",children:["Showing ",k.length," of ",N.length," products"]})})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"category",children:"Category"}),(0,Ns.jsx)("select",{id:"category",className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:o,onChange:e=>l(e.target.value),required:!0,children:p.length>0?p.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id)):(0,Ns.jsx)("option",{value:"",disabled:!0,children:"No categories found. Please add a category first."})})]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"sku",children:"SKU"}),(0,Ns.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"sku",value:c,onChange:e=>d(e.target.value),required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"stockLevel",children:"Stock Level"}),(0,Ns.jsx)("input",{type:"number",step:"0.01",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"stockLevel",value:u,onChange:e=>h(e.target.value)})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"stockAlertThreshold",children:"Stock Alert Threshold"}),(0,Ns.jsx)("input",{type:"number",step:"0.01",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"stockAlertThreshold",value:A,onChange:e=>f(e.target.value)})]}),(0,Ns.jsxs)("div",{className:"rounded-lg p-4",children:[(0,Ns.jsx)("div",{className:"flex justify-between items-center mb-3",children:(0,Ns.jsx)("h4",{className:"text-lg font-medium text-gray-800",children:"Unit Configuration"})}),E.map((e,t)=>(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3 p-3 border rounded",children:[(0,Ns.jsxs)("div",{className:"md:col-span-1",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-xs font-bold mb-1",children:"Unit"}),(0,Ns.jsx)(CF,{value:e.unit,onChange:e=>T(t,"unit",e)})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-xs font-bold mb-1",children:"Net Price"}),(0,Ns.jsx)("input",{type:"text",step:"0.01",value:e.netPrice,onChange:e=>T(t,"netPrice",e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm",required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-xs font-bold mb-1",children:"Selling Price"}),(0,Ns.jsx)("input",{type:"text",step:"0.01",value:e.sellingPrice,onChange:e=>T(t,"sellingPrice",e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm",required:!0})]}),(0,Ns.jsx)("div",{className:"flex items-end"})]},t))]}),(0,Ns.jsx)("button",{type:"submit",className:"w-full sm:w-auto bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Add Product"})]}),g&&(0,Ns.jsx)("p",{className:"mt-4 text-green-500",children:g}),v&&(0,Ns.jsx)("p",{className:"mt-4 text-red-500",children:v})]})};const kF=document.createElement("style");kF.innerHTML="\n  .input-style { display: block; width: 100%; padding: 0.5rem 0.75rem; font-size: 0.875rem; color: #1f2937; background-color: #fff; border: 1px solid #d1d5db; border-radius: 0.375rem; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }\n  .label-style { font-size: 0.875rem; font-weight: 500; color: #374151; }\n  .th-style { padding: 0.75rem 1rem; text-align: left; font-size: 0.75rem; font-weight: 600; color: #4b5563; text-transform: uppercase; }\n  .td-style { padding: 0.75rem 1rem; font-size: 0.875rem; color: #111827; vertical-align: middle; }\n  .btn-primary { padding: 0.6rem 1.2rem; background-color: #4f46e5; color: white; border-radius: 0.375rem; font-weight: 600; border: none; cursor: pointer; }\n  .btn-secondary { padding: 0.6rem 1.2rem; background-color: #e5e7eb; color: #1f2937; border-radius: 0.375rem; font-weight: 600; border: none; cursor: pointer; }\n  /* CSS to hide number input spinners */\n  .no-spinner::-webkit-outer-spin-button,\n  .no-spinner::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  .no-spinner {\n    -moz-appearance: textfield;\n  }\n",document.head.appendChild(kF);const SF=function(e){let{closeModal:t,adminProducts:n,refreshProducts:s}=e;const a="/admin/shops",[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)([]),[h,A]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[x,v]=(0,r.useState)(""),[b,y]=(0,r.useState)(!0),[w,N]=(0,r.useState)(!1),{subtotal:j,taxAmount:C,grandTotal:B}=(0,r.useMemo)(()=>{const e=d.reduce((e,t)=>{if("string"===typeof t.quantity&&("0."===t.quantity||"."===t.quantity))return e+0*t.unitPrice;const n=parseFloat(t.quantity)||0;return e+t.unitPrice*n},0),t=e*((parseFloat(h)||0)/100);return{subtotal:e,taxAmount:t,grandTotal:e+t}},[d,h]);(0,r.useEffect)(()=>{(async()=>{try{console.log("Fetching shops from:",a);const e=await ws.get(a,{withCredentials:!0});console.log("Shops response:",e.data);const t=e.data;o(t),t.length>0?c(t[0]._id):(console.log("No shops found!"),v("No shops available. Please create a shop first."))}catch(e){console.log("Error fetching shops:",e),v("Failed to fetch shops.")}finally{y(!1)}})()},[]);const k=(0,r.useMemo)(()=>f?n.filter(e=>e.stockLevel>0&&(e.name.toLowerCase().includes(f.toLowerCase())||e.sku.toLowerCase().includes(f.toLowerCase()))):n.filter(e=>e.stockLevel>0),[f,n]);return b?(0,Ns.jsxs)("div",{className:"p-6 text-center flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading..."})]}):(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-60 z-50 flex items-center justify-center p-4",children:(0,Ns.jsxs)("div",{className:"relative w-full max-w-6xl bg-white rounded-lg shadow-xl flex flex-col max-h-[90vh]",children:[(0,Ns.jsxs)("header",{className:"flex justify-between items-center p-4 border-b",children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Create New Invoice"}),(0,Ns.jsx)("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-200",children:(0,Ns.jsx)(Ft,{size:20})})]}),(0,Ns.jsxs)("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[(0,Ns.jsxs)("div",{className:"w-full md:w-1/2 p-4 border-r overflow-y-auto",children:[(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsx)("label",{className:"label-style",children:"Search Products"}),(0,Ns.jsx)("input",{type:"text",placeholder:"Search by name or SKU...",value:f,onChange:e=>p(e.target.value),className:"input-style mt-1"})]}),(0,Ns.jsx)("div",{className:"space-y-3",children:k.map(e=>(0,Ns.jsxs)("div",{className:"p-3 border rounded-lg bg-gray-50",children:[(0,Ns.jsxs)("p",{className:"font-semibold",children:[e.name," ",(0,Ns.jsxs)("span",{className:"text-gray-500 font-normal",children:[" (Stock: ",e.stockLevel,")"]})]}),(0,Ns.jsx)("div",{className:"flex flex-wrap gap-x-4 gap-y-2 mt-2",children:e.prices.map(t=>(0,Ns.jsxs)("label",{className:"flex items-center space-x-2 text-sm cursor-pointer",children:[(0,Ns.jsx)("input",{type:"checkbox",checked:d.some(n=>n.product._id===e._id&&n.unitPrice===t.sellingPrice),onChange:()=>((e,t)=>{const n=d.find(n=>n.product._id===e._id&&n.unitPrice===t.sellingPrice);u(n?d.filter(e=>e!==n):[...d,{product:e,quantity:"",unitPrice:t.sellingPrice,maxQuantity:e.stockLevel,unit:t.unit}])})(e,t),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,Ns.jsxs)("span",{children:[t.unit," - \u20b9",t.sellingPrice]})]},t._id))})]},e._id))})]}),(0,Ns.jsxs)("main",{className:"w-full md:w-1/2 p-4 sm:p-6 flex flex-col overflow-y-auto",children:[(0,Ns.jsxs)("div",{className:"mb-6",children:[(0,Ns.jsx)("label",{className:"label-style",children:"Deliver To Shop"}),(0,Ns.jsx)("select",{value:l,onChange:e=>c(e.target.value),className:"input-style mt-1",children:i.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))})]}),(0,Ns.jsx)("h4",{className:"font-semibold mb-2",children:"Products Added to Invoice"}),(0,Ns.jsx)("div",{className:"flex-1 overflow-x-auto rounded-lg border",children:(0,Ns.jsxs)("table",{className:"min-w-full",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"th-style",children:"Product"}),(0,Ns.jsx)("th",{className:"th-style",children:"Unit"}),(0,Ns.jsx)("th",{className:"th-style",children:"Qty"}),(0,Ns.jsx)("th",{className:"th-style",children:"Total"})]})}),(0,Ns.jsx)("tbody",{children:0===d.length?(0,Ns.jsx)("tr",{children:(0,Ns.jsx)("td",{colSpan:"4",className:"text-center py-10 text-gray-500",children:"Select products from the list."})}):d.map(e=>(0,Ns.jsxs)("tr",{className:"border-b",children:[(0,Ns.jsxs)("td",{className:"td-style",children:[(0,Ns.jsx)("p",{className:"font-medium",children:e.product.name}),(0,Ns.jsxs)("p",{className:"text-xs text-gray-500",children:["SKU: ",e.product.sku]})]}),(0,Ns.jsxs)("td",{className:"td-style",children:[(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit}),(0,Ns.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["@ \u20b9",e.unitPrice.toFixed(2)]})]}),(0,Ns.jsx)("td",{className:"td-style",children:(0,Ns.jsx)("input",{type:"text",value:e.quantity,placeholder:"0",onChange:t=>{return n=e.product._id,r=e.unit,s="quantity",a=t.target.value,void u(e=>e.map(e=>{if(e.product._id===n&&e.unit===r){if(a.endsWith(".")&&"."!==a)return(0,$n.A)((0,$n.A)({},e),{},{[s]:a});if("."===a)return(0,$n.A)((0,$n.A)({},e),{},{[s]:a});{const t=parseFloat(a);return(0,$n.A)((0,$n.A)({},e),{},{[s]:isNaN(t)||t<0?"":t})}}return e}));var n,r,s,a},className:"w-20 sm:w-24 input-style no-spinner"})}),(0,Ns.jsxs)("td",{className:"td-style font-semibold",children:["\u20b9",(e.unitPrice*(("string"!==typeof e.quantity||"0."!==e.quantity&&"."!==e.quantity)&&parseFloat(e.quantity)||0)).toFixed(2)]})]},"".concat(e.product._id,"-").concat(e.unit)))})]})}),(0,Ns.jsx)("div",{className:"mt-auto pt-6",children:(0,Ns.jsxs)("div",{className:"space-y-2",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,Ns.jsxs)("span",{className:"font-semibold text-gray-800",children:["\u20b9",j.toFixed(2)]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,Ns.jsx)("label",{className:"text-gray-600",children:"Tax (%):"}),(0,Ns.jsx)("input",{type:"text",value:h,placeholder:"0",onChange:e=>A(e.target.value),className:"w-24 input-style text-right no-spinner"})]}),(0,Ns.jsxs)("div",{className:"flex justify-between",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Tax Amount:"}),(0,Ns.jsxs)("span",{className:"font-semibold text-gray-800",children:["\u20b9",C.toFixed(2)]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between font-bold text-lg border-t pt-2 mt-2",children:[(0,Ns.jsx)("span",{children:"Grand Total:"}),(0,Ns.jsxs)("span",{children:["\u20b9",B.toFixed(2)]})]})]})})]})]}),(0,Ns.jsxs)("footer",{className:"p-4 bg-gray-50 border-t flex justify-end items-center gap-3",children:[m&&(0,Ns.jsx)("div",{className:"fixed top-4 right-4 z-[9999] bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg",children:(0,Ns.jsx)("p",{className:"font-semibold",children:m})}),x&&(0,Ns.jsx)("p",{className:"text-red-600 font-semibold",children:x}),(0,Ns.jsx)("button",{onClick:t,className:"btn-secondary",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:async()=>{if(!l)return void v("Please select a shop.");if(0===d.length)return void v("Please add at least one product to the invoice.");N(!0);if(d.some(e=>"string"===typeof e.quantity&&("0."===e.quantity||"."===e.quantity)))return v('Please complete all quantity fields. Partial decimal entries (like "0." or ".") are not allowed.'),void N(!1);if(d.some(e=>{const t=parseFloat(e.quantity);return!e.quantity||isNaN(t)||t<=0}))return v("All products in the invoice must have a quantity greater than 0."),void N(!1);v(""),g("");const e={shopId:l,items:d.map(e=>({productId:e.product._id,quantity:e.quantity,unitPrice:e.unitPrice,unit:e.unit})),tax:parseFloat(h)||0};try{await ws.post("/admin/invoices",e,{withCredentials:!0});const n=i.find(e=>e._id===l),r=n?n.name:"the selected shop";g("Invoice created and sent successfully to ".concat(r,"!")),s&&s(),setTimeout(()=>{c(i.length>0?i[0]._id:""),u([]),A(""),p(""),v("")},500),setTimeout(()=>{t()},3e3)}catch(a){var n,r;v((null===(n=a.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"An error occurred. Please try again.")}finally{N(!1)}},className:"btn-primary",disabled:w,children:w?"Sending...":"Create & Send Invoice"})]})]})})},_F=e=>EF(e,!1),EF=(e,t)=>{var n,r,s,a,i,o,l;const c=(null===e||void 0===e||null===(n=e.shop)||void 0===n?void 0:n.name)||(null===e||void 0===e?void 0:e.shopName)||"The Sweet Hub",d=(null===e||void 0===e||null===(r=e.shop)||void 0===r?void 0:r.address)||(null===e||void 0===e?void 0:e.shopAddress)||"156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006",u=(null===e||void 0===e||null===(s=e.shop)||void 0===s?void 0:s.phone)||(null===e||void 0===e?void 0:e.shopPhone)||"7339200636",h=(null===e||void 0===e||null===(a=e.shop)||void 0===a?void 0:a.gstNumber)||(null===e||void 0===e?void 0:e.shopGstNumber)||null,A=(null===e||void 0===e||null===(i=e.shop)||void 0===i?void 0:i.fssaiNumber)||(null===e||void 0===e?void 0:e.shopFssaiNumber)||null,f=(null===e||void 0===e||null===(o=e.admin)||void 0===o?void 0:o.name)||"Admin",p=(null===e||void 0===e?void 0:e.invoiceNumber)||(null===e||void 0===e||null===(l=e._id)||void 0===l?void 0:l.slice(-8))||"N/A",m=null!==e&&void 0!==e&&e.issueDate?new Date(e.issueDate).toLocaleDateString():null!==e&&void 0!==e&&e.billDate?new Date(e.billDate).toLocaleDateString():(new Date).toLocaleDateString(),g=(null===e||void 0===e?void 0:e.status)||"Active",x=(null===e||void 0===e?void 0:e.gstPercentage)||0,v=(null===e||void 0===e?void 0:e.gstAmount)||0,b=(null===e||void 0===e?void 0:e.baseAmount)||0,y=(null===e||void 0===e||e.tax,(null===e||void 0===e?void 0:e.grandTotal)||(null===e||void 0===e?void 0:e.totalAmount)||0),w=(null===e||void 0===e?void 0:e.subtotal)||b||0,N=(null===e||void 0===e?void 0:e.discountType)||"none",j=(null===e||void 0===e?void 0:e.discountValue)||0,C=(null===e||void 0===e?void 0:e.discountAmount)||0;if(!e||!e.items)return console.error("Invalid invoice data:",e),void alert("Unable to generate PDF: Invalid invoice data");const B=e.items.map(e=>{var t;return'\n    <tr style="font-size: 10px;">\n      <td style="padding: 3px 4px; border-bottom: 1px solid #ddd; text-align: left;">'.concat(e.productName||(null===(t=e.product)||void 0===t?void 0:t.name)||e.name||"Item",'</td>\n      <td style="padding: 3px 4px; border-bottom: 1px solid #ddd; text-align: center;">').concat(e.quantity||0,'</td>\n      <td style="padding: 3px 4px; border-bottom: 1px solid #ddd; text-align: right;">\u20b9').concat((e.unitPrice||e.price||0).toFixed(2),'</td>\n      <td style="padding: 3px 4px; border-bottom: 1px solid #ddd; text-align: right;">\u20b9').concat((e.totalPrice||(e.unitPrice||e.price||0)*(e.quantity||0)).toFixed(2),"</td>\n    </tr>\n  ")}).join(""),k='\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset="utf-8">\n      <title>Invoice - '.concat(p,"</title>\n      <style>\n        @page {\n          size: 80mm ").concat(t?"auto":"150mm",';\n          margin: 8mm 5mm;\n        }\n        body {\n          font-family: Arial, sans-serif;\n          margin: 0;\n          padding: 0;\n          font-size: 10px;\n          line-height: 1.2;\n        }\n        .invoice-container {\n          max-width: 76mm;\n          margin: 0 auto;\n          padding: 5mm;\n          border: 0;\n          box-shadow: none;\n        }\n        .header {\n          text-align: center;\n          margin-bottom: 8px;\n          padding-bottom: 5px;\n          border-bottom: 1px solid #333;\n        }\n        .shop-name {\n          font-size: 12px;\n          font-weight: bold;\n          margin: 0 0 2px 0;\n          color: #333;\n        }\n        .shop-details {\n          font-size: 8px;\n          margin: 2px 0;\n          color: #666;\n        }\n        .invoice-title {\n          text-align: center;\n          font-size: 12px;\n          font-weight: bold;\n          margin: 8px 0;\n          color: #333;\n        }\n        .invoice-info {\n          display: flex;\n          justify-content: space-between;\n          margin: 5px 0;\n          font-size: 9px;\n        }\n        .invoice-info div {\n          margin: 1px 0;\n        }\n        .from-to-info {\n          margin: 8px 0;\n          font-size: 9px;\n          border-top: 1px solid #eee;\n          border-bottom: 1px solid #eee;\n          padding: 5px 0;\n        }\n        .from-to-section {\n          margin-bottom: 5px;\n        }\n        .items-table {\n          width: 100%;\n          border-collapse: collapse;\n          margin: 8px 0;\n          font-size: 10px;\n        }\n        .items-table th {\n          font-size: 9px;\n          text-align: left;\n          padding: 3px 4px;\n          background-color: #f2f2f2;\n          border-bottom: 2px solid #333;\n        }\n        .items-table td {\n          padding: 3px 4px;\n          border-bottom: 1px solid #ddd;\n        }\n        .summary-row {\n          font-weight: bold;\n          font-size: 10px;\n        }\n        .summary-row td {\n          padding: 2px 4px;\n        }\n        .total-row {\n          font-size: 11px;\n          font-weight: bold;\n          border-top: 1px solid #333;\n          border-bottom: 1px solid #333;\n        }\n        .total-row td {\n          padding: 4px 4px;\n        }\n        .footer {\n          text-align: center;\n          margin-top: 10px;\n          font-size: 8px;\n          color: #777;\n          padding-top: 5px;\n          border-top: 1px solid #eee;\n        }\n        @media print {\n          body {\n            -webkit-print-color-adjust: exact;\n            print-color-adjust: exact;\n            font-size: 10px;\n            line-height: 1.2;\n          }\n          .invoice-container {\n            max-width: 76mm;\n            margin: 0 auto;\n            padding: 5mm;\n          }\n          .items-table th {\n            font-size: 9px;\n          }\n          .items-table td {\n            font-size: 10px;\n            padding: 3px 4px;\n          }\n          .summary-row {\n            font-size: 10px;\n          }\n          .total-row {\n            font-size: 11px;\n          }\n        }\n      </style>\n    </head>\n    <body>\n      <div class="invoice-container">\n        \x3c!-- FROM Information --\x3e\n        ').concat(e.fromInfo?'\n        <div class="from-to-info">\n          <div class="from-to-section">\n            <div style="font-weight: bold; margin-bottom: 2px; font-size: 10px;">FROM (Sweet Production Factory)</div>\n            <div>'.concat(e.fromInfo.name||"","</div>\n            <div>").concat(e.fromInfo.address||"","</div>\n            ").concat(e.fromInfo.gstin?"<div>GSTIN: ".concat(e.fromInfo.gstin,"</div>"):"","\n            ").concat(e.fromInfo.state?"<div>State: ".concat(e.fromInfo.state,"</div>"):"","\n            ").concat(e.fromInfo.stateCode?"<div>State Code: ".concat(e.fromInfo.stateCode,"</div>"):"","\n            ").concat(e.fromInfo.phone?"<div>Phone: ".concat(e.fromInfo.phone,"</div>"):"","\n            ").concat(e.fromInfo.email?"<div>Email: ".concat(e.fromInfo.email,"</div>"):"","\n          </div>\n        </div>\n        "):"","\n        \n        \x3c!-- TO Information --\x3e\n        ").concat(e.toInfo?'\n        <div class="from-to-info">\n          <div class="from-to-section">\n            <div style="font-weight: bold; margin-bottom: 2px; font-size: 10px;">TO (Receiving Branch / Shop)</div>\n            <div>'.concat(e.toInfo.name||"","</div>\n            <div>").concat(e.toInfo.address||"","</div>\n            ").concat(e.toInfo.gstin?"<div>GSTIN: ".concat(e.toInfo.gstin,"</div>"):"","\n            ").concat(e.toInfo.state?"<div>State: ".concat(e.toInfo.state,"</div>"):"","\n            ").concat(e.toInfo.stateCode?"<div>State Code: ".concat(e.toInfo.stateCode,"</div>"):"","\n            ").concat(e.toInfo.phone?"<div>Phone: ".concat(e.toInfo.phone,"</div>"):"","\n          </div>\n        </div>\n        "):"",'\n        \n        \x3c!-- Header with Shop Info --\x3e\n        <div class="header">\n          <div class="shop-name">').concat(c,'</div>\n          <div class="shop-details">').concat(d,"</div>\n          ").concat(h?'<div class="shop-details">GSTIN: '.concat(h,"</div>"):"","\n          ").concat(A?'<div class="shop-details">FSSAI: '.concat(A,"</div>"):"",'\n          <div class="shop-details">Phone: ').concat(u,'</div>\n        </div>\n        \n        <div class="invoice-title">INVOICE</div>\n        \n        <div class="invoice-info">\n          <div>\n            <div><strong>Invoice #:</strong> ').concat(p,"</div>\n            <div><strong>Date:</strong> ").concat(m,"</div>\n            ").concat(f&&"Admin"!==f?"<div><strong>From:</strong> ".concat(f,"</div>"):"",'\n          </div>\n          <div style="text-align: right;">\n            <div><strong>Status:</strong> ').concat(g,'</div>\n          </div>\n        </div>\n        \n        \x3c!-- Items Table --\x3e\n        <table class="items-table">\n          <thead>\n            <tr>\n              <th style="text-align: left;">Item</th>\n              <th style="text-align: center;">Qty</th>\n              <th style="text-align: right;">Price</th>\n              <th style="text-align: right;">Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(B,'\n            <tr class="summary-row">\n              <td colspan="3" style="text-align: right; padding: 3px 4px;">Subtotal</td>\n              <td style="text-align: right; padding: 3px 4px;">\u20b9').concat(w.toFixed(2),"</td>\n            </tr>\n            ").concat(C>0?'\n            <tr class="summary-row">\n              <td colspan="3" style="text-align: right; padding: 3px 4px;">\n                Discount '.concat("percentage"===N?"(".concat(j,"%)"):"",':\n              </td>\n              <td style="text-align: right; padding: 3px 4px;">-\u20b9').concat(C.toFixed(2),"</td>\n            </tr>\n            "):"",'\n            <tr class="summary-row">\n              <td colspan="3" style="text-align: right; padding: 3px 4px;">Net Amount</td>\n              <td style="text-align: right; padding: 3px 4px;">\u20b9').concat((w-C).toFixed(2),"</td>\n            </tr>\n            ").concat(x>0?'\n            <tr class="summary-row">\n              <td colspan="3" style="text-align: right; padding: 3px 4px;">GST ('.concat(x,'%)</td>\n              <td style="text-align: right; padding: 3px 4px;">\u20b9').concat(v.toFixed(2),"</td>\n            </tr>\n            "):"",'\n            <tr class="summary-row total-row">\n              <td colspan="3" style="text-align: right; padding: 4px 4px;">Grand Total</td>\n              <td style="text-align: right; padding: 4px 4px;">\u20b9').concat(y.toFixed(2),'</td>\n            </tr>\n          </tbody>\n        </table>\n        \n        <div style="margin-top: 8px; font-size: 9px;">\n          <div><strong>Total Items:</strong> ').concat(e.items.length||0,'</div>\n        </div>\n        \n        <div class="footer">\n          <div>Thank you for your business!</div>\n          <div style="margin-top: 3px; font-size: 7px;">This is a computer generated invoice</div>\n        </div>\n      </div>\n    </body>\n    </html>\n  '),S={margin:t?[5,2,5,2]:5,filename:"invoice_".concat(p,"_").concat(m.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,letterRendering:!0},jsPDF:{unit:"mm",format:t?[80,150]:"a4",orientation:"portrait"}};if(t){const e=document.createElement("iframe");e.style.position="fixed",e.style.right="0",e.style.bottom="0",e.style.width="80mm",e.style.height="auto",e.style.border="none",e.style.zIndex="-1",e.srcdoc=k,document.body.appendChild(e),e.onload=()=>{e.contentWindow.focus(),e.contentWindow.print(),setTimeout(()=>{document.body.removeChild(e)},1e3)}}else fw()().from(k).set(S).save()};const FF=function(e){let{closeModal:t}=e;const[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(!0),[u,h]=(0,r.useState)(!1),A=(0,r.useCallback)(async()=>{d(!0),l("");try{const e=await ws.get("/admin/invoices");s(e.data||[])}catch(e){l("Failed to fetch invoices. Please try again later."),console.error(e)}finally{d(!1)}},[]);(0,r.useEffect)(()=>{A()},[A]);const f=()=>{h(!1),i(null),l("")},p=e=>{const t=new Date(e);return{date:t.toLocaleDateString(),time:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}},m=e=>"Pending"===e?(0,Ns.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,Ns.jsx)(qe,{className:"mr-1 h-3 w-3"}),"Pending"]}):"Confirmed"===e?(0,Ns.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,Ns.jsx)(He,{className:"mr-1 h-3 w-3"}),"Confirmed"]}):"Partial"===e?(0,Ns.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[(0,Ns.jsx)($e,{className:"mr-1 h-3 w-3"}),"Partial"]}):(0,Ns.jsx)("span",{className:"text-gray-500",children:e});return u&&a?(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-60 z-50 flex items-center justify-center p-4",children:(0,Ns.jsxs)("div",{className:"relative w-full max-w-6xl bg-white rounded-lg shadow-xl flex flex-col max-h-[90vh]",children:[(0,Ns.jsxs)("header",{className:"flex justify-between items-center p-4 border-b",children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Invoice Details"}),(0,Ns.jsx)("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-200",children:(0,Ns.jsx)(Ft,{size:20})})]}),(0,Ns.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,Ns.jsx)("button",{onClick:f,className:"mb-4 text-blue-600 hover:text-blue-800 flex items-center",children:"\u2190 Back to Invoice List"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Invoice Number"}),(0,Ns.jsx)("p",{className:"font-semibold text-gray-800",children:a.invoiceNumber})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Issue Date"}),(0,Ns.jsx)("p",{className:"font-semibold text-gray-800",children:p(a.issueDate).date})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Sent To Shop"}),(0,Ns.jsx)("p",{className:"font-semibold text-gray-800",children:a.shop.name})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Status"}),m(a.status)]})]}),(0,Ns.jsxs)("div",{className:"mt-6",children:[(0,Ns.jsx)("h4",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Invoice Items"}),(0,Ns.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.items.map((e,t)=>(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},t))})]})})]}),(0,Ns.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,Ns.jsxs)("span",{className:"font-semibold text-gray-800",children:["\u20b9",a.subtotal.toFixed(2)]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Tax:"}),(0,Ns.jsxs)("span",{className:"font-semibold text-gray-800",children:["\u20b9",a.tax.toFixed(2)]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between items-center border-t pt-2",children:[(0,Ns.jsx)("span",{className:"text-lg font-bold text-gray-800",children:"Grand Total:"}),(0,Ns.jsxs)("span",{className:"text-lg font-bold text-gray-800",children:["\u20b9",a.grandTotal.toFixed(2)]})]})]})]})]})}):(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-60 z-50 flex items-center justify-center p-4",children:(0,Ns.jsxs)("div",{className:"relative w-full max-w-7xl bg-white rounded-lg shadow-xl flex flex-col max-h-[90vh]",children:[(0,Ns.jsxs)("header",{className:"flex justify-between items-center p-4 border-b",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Invoice History"}),(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"View all invoices sent to shops with date and time."})]}),(0,Ns.jsx)("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-200",children:(0,Ns.jsx)(Ft,{size:20})})]}),(0,Ns.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[o&&(0,Ns.jsx)("div",{className:"mb-4 p-4 bg-red-100 text-red-800 rounded-lg",children:(0,Ns.jsx)("p",{children:o})}),c?(0,Ns.jsx)("div",{className:"text-center py-12",children:(0,Ns.jsx)("div",{className:"text-gray-500",children:"Loading invoices..."})}):0===n.length?(0,Ns.jsxs)("div",{className:"text-center py-12",children:[(0,Ns.jsx)(st,{className:"mx-auto text-5xl text-gray-400 mb-4"}),(0,Ns.jsx)("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Invoices Found"}),(0,Ns.jsx)("p",{className:"text-gray-500",children:"You haven't created any invoices yet. Create your first invoice to see it here."})]}):(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice #"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sent To Shop"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>{const{date:t,time:n}=p(e.issueDate);return(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.invoiceNumber}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("div",{className:"font-medium",children:t}),(0,Ns.jsx)("div",{className:"text-xs text-gray-500",children:n})]})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.shop.name}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:m(e.status)}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:["\u20b9",e.grandTotal.toFixed(2)]}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium space-x-2",children:[(0,Ns.jsxs)("button",{onClick:()=>(e=>{i(e),h(!0)})(e),className:"inline-flex items-center px-3 py-1.5 bg-blue-100 text-blue-700 text-sm font-medium rounded-md hover:bg-blue-200 transition-colors",children:[(0,Ns.jsx)(Ze,{className:"mr-1 h-4 w-4"}),"View"]}),(0,Ns.jsxs)("button",{onClick:()=>{e?_F(e):console.error("No invoice data provided")},className:"inline-flex items-center px-3 py-1.5 bg-green-100 text-green-700 text-sm font-medium rounded-md hover:bg-green-200 transition-colors",children:[(0,Ns.jsx)(Ye,{className:"mr-1 h-4 w-4"}),"PDF"]})]})]},e._id)})})]})})]})]})})};const TF=function(e){let{closeModal:t,productId:n}=e;const[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(!0),[h,A]=(0,r.useState)(!1),f=(0,r.useCallback)(async()=>{u(!0),c("");try{let t="/admin/product-history";n&&(t+="/product/".concat(n));const r=await ws.get(t);if(a(r.data||[]),n)try{const e=await ws.get("/admin/products/".concat(n),{withCredentials:!0});o(e.data)}catch(e){console.error("Failed to fetch product details:",e)}}catch(t){c("Failed to fetch product history. Please try again later."),console.error(t)}finally{u(!1)}},[n]);(0,r.useEffect)(()=>{f()},[f]);const p=e=>{const t="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium";switch(e){case"Added":return(0,Ns.jsxs)("span",{className:"".concat(t," bg-green-100 text-green-800"),children:[(0,Ns.jsx)(ft,{className:"mr-1 h-3 w-3"}),"Added"]});case"Updated":return(0,Ns.jsxs)("span",{className:"".concat(t," bg-blue-100 text-blue-800"),children:[(0,Ns.jsx)(At,{className:"mr-1 h-3 w-3"}),"Updated"]});case"Stock In":return(0,Ns.jsxs)("span",{className:"".concat(t," bg-purple-100 text-purple-800"),children:[(0,Ns.jsx)(Le,{className:"mr-1 h-3 w-3"}),"Stock In"]});case"Stock Out":return(0,Ns.jsxs)("span",{className:"".concat(t," bg-orange-100 text-orange-800"),children:[(0,Ns.jsx)(Ie,{className:"mr-1 h-3 w-3"}),"Stock Out"]});default:return(0,Ns.jsx)("span",{className:"".concat(t," bg-gray-100 text-gray-800"),children:e})}},m=e=>{switch(e.actionType){case"Added":return'Product "'.concat(e.name,'" was added to inventory with ').concat(e.quantity," units at \u20b9").concat(e.netPrice||0," net price and \u20b9").concat(e.sellingPrice||0," selling price. Current stock: ").concat(null!=e.currentStock?e.currentStock:"N/A"," units.");case"Updated":return'Product "'.concat(e.name,'" details were updated. Added ').concat(e.quantity," units. Current stock: ").concat(null!=e.currentStock?e.currentStock:"N/A"," units at \u20b9").concat(e.netPrice||0," net price and \u20b9").concat(e.sellingPrice||0," selling price.");case"Stock In":return"Added ".concat(e.quantity,' units to "').concat(e.name,'". Current stock: ').concat(null!=e.currentStock?e.currentStock:"N/A"," units.");case"Stock Out":return"Removed ".concat(e.quantity,' units from "').concat(e.name,'". Current stock: ').concat(null!=e.currentStock?e.currentStock:"N/A"," units.");default:return""}};return(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-60 z-50 flex items-center justify-center p-4",children:(0,Ns.jsxs)("div",{className:"relative w-full max-w-6xl bg-white rounded-lg shadow-xl flex flex-col max-h-[90vh]",children:[(0,Ns.jsxs)("header",{className:"flex justify-between items-center p-4 border-b",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:n?"Product History: ".concat(i?i.name:"Loading..."):"All Product History"}),(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:n?"View history of changes for this product":"View history of all product changes"})]}),(0,Ns.jsx)("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-200",children:(0,Ns.jsx)(Ft,{size:20})})]}),(0,Ns.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[l&&(0,Ns.jsx)("div",{className:"mb-4 p-4 bg-red-100 text-red-800 rounded-lg",children:(0,Ns.jsx)("p",{children:l})}),d?(0,Ns.jsx)("div",{className:"text-center py-12",children:(0,Ns.jsx)("div",{className:"text-gray-500",children:"Loading product history..."})}):0===s.length?(0,Ns.jsxs)("div",{className:"text-center py-12",children:[(0,Ns.jsx)(qe,{className:"mx-auto text-5xl text-gray-400 mb-4"}),(0,Ns.jsx)("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No History Found"}),(0,Ns.jsx)("p",{className:"text-gray-500",children:n?"No history records found for this product.":"No product history records found."})]}):(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name (SKU)"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added Qty"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Price"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sell Price"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>{const{date:t,time:n}=(e=>{const t=new Date(e);return{date:t.toLocaleDateString(),time:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}})(e.timestamp);return(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("div",{className:"font-medium",children:t}),(0,Ns.jsx)("div",{className:"text-xs text-gray-500",children:n})]})}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.name," (",e.sku,")"]}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[p(e.actionType),(0,Ns.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:m(e)})]}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:e.quantity}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:null!=e.currentStock?e.currentStock:"N/A"}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.netPrice?e.netPrice.toFixed(2):"N/A"]}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900",children:["\u20b9",e.sellingPrice?e.sellingPrice.toFixed(2):"N/A"]})]},e._id)})})]})})]})]})})};const IF=function(e){let{baseUrl:t="/admin"}=e;const n="".concat(t,"/products"),s="".concat(t,"/categories"),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[u,h]=(0,r.useState)("All"),[A,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(!0),[g,x]=(0,r.useState)(null),[v,b]=(0,r.useState)({}),[y,w]=(0,r.useState)(!1),[N,j]=(0,r.useState)(!1),[C,B]=(0,r.useState)(!1),[k,S]=(0,r.useState)(!1),[_,E]=(0,r.useState)(null),[F,T]=(0,r.useState)(!1),[I,D]=(0,r.useState)(!1),[L,P]=(0,r.useState)(null),R=async()=>{try{m(!0);const e=await ws.get(n,{withCredentials:!0});i(e.data),l(e.data)}catch(e){x("Failed to fetch products."),console.error(e)}finally{m(!1)}};(0,r.useEffect)(()=>{R(),(async()=>{try{const e=await ws.get(s,{withCredentials:!0});d(e.data)}catch(e){console.error("Failed to fetch categories:",e)}})()},[t]),(0,r.useEffect)(()=>{let e=a;"All"!==u&&(e=e.filter(e=>{var t;return(null===(t=e.category)||void 0===t?void 0:t._id)===u})),A&&(e=e.filter(e=>e.name.toLowerCase().includes(A.toLowerCase())||e.sku.toLowerCase().includes(A.toLowerCase()))),l(e)},[a,u,A]);const U=()=>{b({}),w(!1)},O=(e,t)=>{b((0,$n.A)((0,$n.A)({},v),{},{[t]:e.target.value}))},M=(e,t,n)=>{const r=[...v.prices];r[e][t]=n,b((0,$n.A)((0,$n.A)({},v),{},{prices:r}))},Q=()=>{!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"All";const r=(new Date).toLocaleDateString();let s={},a=e;if("All"!==n){var i;const r=(null===(i=t.find(e=>e._id===n))||void 0===i?void 0:i.name)||n;a=e.filter(e=>{var t;return(null===(t=e.category)||void 0===t?void 0:t._id)===n||"object"===typeof e.category&&e.category._id===n}),s[r]=a}else e.forEach(e=>{var t;const n=(null===(t=e.category)||void 0===t?void 0:t.name)||("object"===typeof e.category?e.category.name:"Uncategorized");s[n]||(s[n]=[]),s[n].push(e)});const o=a.length,l=a.reduce((e,t)=>e+(t.stockLevel||0),0),c=Object.keys(s).map(e=>{const t=s[e],n=t.reduce((e,t)=>e+(t.stockLevel||0),0);return'\n      <tr>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">'.concat(e,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 14px;">').concat(t.length,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px;">').concat(n,"</td>\n      </tr>\n    ")}).join(""),d=Object.keys(s).map(e=>{const t=s[e].map(e=>{const t=e.prices&&e.prices.length>0?e.prices[0]:null,n=t?t.netPrice:"N/A",r=t?t.sellingPrice:"N/A",s=t?t.unit:"N/A";return'\n        <tr>\n          <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">'.concat(e.name||"N/A",'</td>\n          <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">').concat(e.sku||"N/A",'</td>\n          <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px; text-align: center;">').concat(s,'</td>\n          <td style="padding: 8px; border: 1px solid #ddd; text-align: right; font-size: 14px;">').concat(e.stockLevel||0,'</td>\n          <td style="padding: 8px; border: 1px solid #ddd; text-align: right; font-size: 14px;">\u20b9').concat(n,'</td>\n          <td style="padding: 8px; border: 1px solid #ddd; text-align: right; font-size: 14px;">\u20b9').concat(r,"</td>\n        </tr>\n      ")}).join("");return'\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 18px; padding-bottom: 8px; border-bottom: 1px solid #eee;">Category: '.concat(e,'</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Product Name</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">SKU</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 14px; font-weight: bold;">Unit</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px; font-weight: bold;">Stock</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px; font-weight: bold;">Net Price</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px; font-weight: bold;">Selling Price</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(t,"\n          </tbody>\n        </table>\n      </div>\n    ")}).join(""),u=[];if("All"!==n){var h;const e=(null===(h=t.find(e=>e._id===n))||void 0===h?void 0:h.name)||n;u.push("Category: ".concat(e))}const A=u.length>0?'<p style="margin: 8px 0; font-size: 16px;"><strong>Filters Applied:</strong> '.concat(u.join(", "),"</p>"):"",f='\n    <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 1000px; margin: 0 auto;">\n      \x3c!-- Header --\x3e\n      <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #333; padding-bottom: 20px;">\n        <h1 style="color: #333; margin: 0; font-size: 32px;">The Sweet Hub</h1>\n        <p style="color: #666; font-size: 16px; margin: 10px 0 5px 0;">156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006</p>\n        <p style="color: #666; font-size: 16px; margin: 5px 0;">Phone: 7339200636</p>\n      </div>\n      \n      <div style="text-align: center; margin-bottom: 30px;">\n        <h2 style="color: #333; margin: 0; font-size: 28px;">PRODUCT REPORT</h2>\n        <p style="color: #666; font-size: 18px; margin: 15px 0;">\n          Generated on '.concat(r,"\n        </p>\n        ").concat(A,'\n      </div>\n      \n      \x3c!-- Summary --\x3e\n      <div style="margin-bottom: 30px; background-color: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #dee2e6;">\n        <h3 style="color: #333; margin-top: 0; font-size: 20px;">Report Summary</h3>\n        <div style="display: flex; justify-content: space-around; text-align: center;">\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Categories</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(Object.keys(s).length,'</p>\n          </div>\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Products</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(o,'</p>\n          </div>\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Stock</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(l,'</p>\n          </div>\n        </div>\n      </div>\n      \n      \x3c!-- Category Summary --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Products by Category</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Category</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: center; font-size: 16px; font-weight: bold;">Product Count</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: right; font-size: 16px; font-weight: bold;">Total Stock</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(c,'\n          </tbody>\n        </table>\n      </div>\n      \n      \x3c!-- Detailed Products --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Detailed Products</h3>\n        ').concat(d,'\n      </div>\n      \n      <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; text-align: center;">\n        <p style="color: #777; font-size: 14px; margin: 0;">\n          Generated on ').concat(r," at ").concat((new Date).toLocaleTimeString(),'\n        </p>\n        <p style="color: #777; font-size: 14px; margin: 5px 0 0 0;">\n          Report generated by The Sweet Hub Product Management System\n        </p>\n      </div>\n    </div>\n  '),p={margin:15,filename:"product_report_".concat(r.replace(/\//g,"-"),"_").concat("All"===n?"all-categories":n,".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};fw()().from(f).set(p).save()}(o,c,u)};if(p)return(0,Ns.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-16 h-16 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-10 h-10"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading products..."})]});if(g)return(0,Ns.jsx)("div",{className:"p-6 text-center text-red-500",children:g});const H=[];return o.forEach(e=>{e.prices&&e.prices.length>0?e.prices.forEach(t=>{H.push((0,$n.A)((0,$n.A)({},e),{},{unit:t.unit,netPrice:t.netPrice,sellingPrice:t.sellingPrice,stockLevel:e.stockLevel}))}):H.push((0,$n.A)((0,$n.A)({},e),{},{unit:"N/A",netPrice:"N/A",sellingPrice:"N/A",stockLevel:e.stockLevel}))}),(0,Ns.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-lg",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:"View Products"}),(0,Ns.jsx)("div",{className:"flex gap-3",children:"/admin"===t?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)("button",{onClick:()=>B(!0),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Invoice History"}),(0,Ns.jsx)("button",{onClick:()=>j(!0),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Create Invoice"}),(0,Ns.jsxs)("button",{onClick:Q,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline flex items-center",children:[(0,Ns.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Ns.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Download PDF"]})]}):(0,Ns.jsxs)("button",{onClick:Q,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline flex items-center",children:[(0,Ns.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Ns.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Download PDF"]})})]}),(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[(0,Ns.jsx)("input",{type:"text",placeholder:"Search by name or SKU...",value:A,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,Ns.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"w-full md:w-auto px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Ns.jsx)("option",{value:"All",children:"All Categories"}),c.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),0===H.length?(0,Ns.jsxs)("div",{className:"text-center py-12",children:[(0,Ns.jsx)("div",{className:"text-gray-400 text-lg mb-2",children:"\ud83d\udce6"}),(0,Ns.jsx)("p",{className:"text-gray-600 font-medium",children:"No products found in your inventory."}),(0,Ns.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Start by adding your first product to get started."})]}):(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Price"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sell Price"}),(0,Ns.jsx)("th",{className:"hidden lg:table-cell px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map(e=>(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 text-sm font-semibold text-gray-900",children:e.name}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.sku}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 uppercase",children:e.unit})}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.stockLevel<=(e.stockAlertThreshold||0)?"bg-red-100 text-red-800":e.stockLevel<=2*(e.stockAlertThreshold||0)?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.stockLevel})}),(0,Ns.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["\u20b9",e.netPrice]}),(0,Ns.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-green-600 font-semibold",children:["\u20b9",e.sellingPrice]}),(0,Ns.jsx)("td",{className:"hidden lg:table-cell px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.category?e.category.name:"N/A"}),(0,Ns.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{var t;const n=(0,$n.A)((0,$n.A)({},e),{},{category:(null===(t=e.category)||void 0===t?void 0:t._id)||""});n.prices&&Array.isArray(n.prices)&&0!==n.prices.length||(n.prices=[{unit:"piece",netPrice:"",sellingPrice:""}]),b(n),w(!0)})(e),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),"/admin"===t&&(0,Ns.jsx)("button",{onClick:()=>{return t=e._id,E(t),void S(!0);var t},className:"text-green-600 hover:text-green-900 mr-4",children:"History"}),(0,Ns.jsx)("button",{onClick:()=>(e=>{P(e),D(!0)})(e._id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},"".concat(e._id,"-").concat(e.unit)))})]})}),F&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:(0,Ns.jsx)("div",{className:"relative m-4 p-6 border w-full max-w-md shadow-lg rounded-md bg-white",children:(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-orange-100",children:(0,Ns.jsx)("svg",{className:"h-6 w-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,Ns.jsxs)("div",{className:"mt-3",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Are you sure?"}),(0,Ns.jsx)("div",{className:"mt-2",children:(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:v._id?"Are you sure you want to update this product? This action cannot be undone.":"Are you sure you want to create this product?"})}),(0,Ns.jsxs)("div",{className:"mt-6 flex justify-center gap-3",children:[(0,Ns.jsx)("button",{type:"button",onClick:()=>{T(!1)},className:"px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),(0,Ns.jsx)("button",{type:"button",onClick:async()=>{try{const e=(0,$n.A)((0,$n.A)({},v),{},{prices:v.prices.map(e=>({unit:e.unit,netPrice:parseFloat(e.netPrice),sellingPrice:parseFloat(e.sellingPrice)}))});let r;if(v._id){let s="".concat(n,"/").concat(v._id);"/shop"===t&&(s="/shop/products/".concat(v._id)),r=ws.put(s,e,{withCredentials:!0})}else{let s=n;"/shop"===t&&(s="/shop/products"),r=ws.post(s,e,{withCredentials:!0})}await r,R(),U(),T(!1)}catch(e){v._id?x("Failed to update product."):x("Failed to create product."),console.error(e)}},className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:v._id?"Update":"Create"})]})]})]})})}),I&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:(0,Ns.jsx)("div",{className:"relative m-4 p-6 border w-full max-w-md shadow-lg rounded-md bg-white",children:(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,Ns.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,Ns.jsxs)("div",{className:"mt-3",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Are you sure?"}),(0,Ns.jsx)("div",{className:"mt-2",children:(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this product? This action cannot be undone."})}),(0,Ns.jsxs)("div",{className:"mt-6 flex justify-center gap-3",children:[(0,Ns.jsx)("button",{type:"button",onClick:()=>{D(!1),P(null)},className:"px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),(0,Ns.jsx)("button",{type:"button",onClick:async()=>{try{let e="".concat(n,"/").concat(L);"/shop"===t&&(e="/shop/products/".concat(L)),await ws.delete(e,{withCredentials:!0}),R(),D(!1),P(null)}catch(e){x("Failed to delete product."),console.error(e)}},className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Delete"})]})]})]})})}),y&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",children:(0,Ns.jsxs)("div",{className:"relative m-4 p-4 sm:p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:"Edit Product"}),(0,Ns.jsxs)("div",{className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,Ns.jsx)("input",{type:"text",value:v.name,onChange:e=>O(e,"name"),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",readOnly:!1})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"SKU"}),(0,Ns.jsx)("input",{type:"text",value:v.sku,onChange:e=>O(e,"sku"),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",readOnly:!1})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Stock"}),(0,Ns.jsx)("input",{type:"number",step:"0.01",value:v.stockLevel,onChange:e=>O(e,"stockLevel"),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",readOnly:!1})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Stock Alert Threshold"}),(0,Ns.jsx)("input",{type:"number",step:"0.01",value:v.stockAlertThreshold||"",onChange:e=>O(e,"stockAlertThreshold"),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",readOnly:!1})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,Ns.jsxs)("select",{value:v.category,onChange:e=>b((0,$n.A)((0,$n.A)({},v),{},{category:e.target.value})),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",disabled:!1,children:[(0,Ns.jsx)("option",{value:"",children:"Select Category"}),c.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Ns.jsxs)("div",{className:"mt-6",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Ns.jsx)("h4",{className:"text-lg font-medium text-gray-800",children:"Unit Configuration"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>{b((0,$n.A)((0,$n.A)({},v),{},{prices:[...v.prices,{unit:"piece",netPrice:"",sellingPrice:""}]}))},className:"text-sm bg-green-500 hover:bg-green-700 text-white py-1 px-3 rounded-md",children:"Add Unit"})]}),v.prices&&v.prices.map((e,t)=>(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3 p-3 border rounded",children:[(0,Ns.jsxs)("div",{className:"md:col-span-1",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-xs font-bold mb-1",children:"Unit"}),(0,Ns.jsxs)("select",{value:e.unit,onChange:e=>M(t,"unit",e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",disabled:!1,children:[(0,Ns.jsx)("option",{value:"piece",children:"Piece"}),(0,Ns.jsx)("option",{value:"kg",children:"Kg"}),(0,Ns.jsx)("option",{value:"g",children:"Gram"}),(0,Ns.jsx)("option",{value:"l",children:"Liter"}),(0,Ns.jsx)("option",{value:"ml",children:"Milliliter"}),(0,Ns.jsx)("option",{value:"dozen",children:"Dozen"}),(0,Ns.jsx)("option",{value:"pack",children:"Pack"}),(0,Ns.jsx)("option",{value:"box",children:"Box"}),(0,Ns.jsx)("option",{value:"bundle",children:"Bundle"})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-xs font-bold mb-1",children:"Net Price"}),(0,Ns.jsx)("input",{type:"number",step:"0.01",value:e.netPrice,onChange:e=>M(t,"netPrice",e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-xs font-bold mb-1",children:"Selling Price"}),(0,Ns.jsx)("input",{type:"number",step:"0.01",value:e.sellingPrice,onChange:e=>M(t,"sellingPrice",e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0})]}),(0,Ns.jsx)("div",{className:"flex items-end",children:(0,Ns.jsx)("button",{type:"button",onClick:()=>(e=>{if(v.prices.length<=1)return void alert("At least one price configuration is required.");const t=[...v.prices];t.splice(e,1),b((0,$n.A)((0,$n.A)({},v),{},{prices:t}))})(t),disabled:v.prices.length<=1,className:"w-full py-2 px-3 rounded-md text-sm ".concat(v.prices.length<=1?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-red-500 text-white hover:bg-red-600"),children:"Remove"})})]},t))]})]}),(0,Ns.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Ns.jsx)("button",{onClick:U,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:()=>{T(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update"})]})]})}),k&&"/admin"===t&&(0,Ns.jsx)(TF,{closeModal:()=>S(!1),productId:_}),N&&"/admin"===t&&(0,Ns.jsx)(SF,{closeModal:()=>j(!1),adminProducts:a,refreshProducts:R}),C&&"/admin"===t&&(0,Ns.jsx)(FF,{closeModal:()=>B(!1)})]})};const DF=function(){return(0,Ns.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,Ns.jsxs)("div",{className:"mb-6",children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Product History"}),(0,Ns.jsx)("p",{className:"text-gray-600",children:"View the complete history of all product changes"})]}),(0,Ns.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-4 sm:p-6",children:(0,Ns.jsx)(TF,{closeModal:()=>{}})})]})};const LF=function(e){let{baseUrl:t="/admin"}=e;const n="".concat(t,"/products"),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[h,A]=(0,r.useState)(""),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(""),[x,v]=(0,r.useState)([]),[b,y]=(0,r.useState)("admin");(0,r.useEffect)(()=>{"/admin"===t&&(async()=>{try{const e=await ws.get("/admin/shops",{withCredentials:!0});v(e.data)}catch(e){console.error("Failed to fetch shops:",e)}})(),(async()=>{try{let e={};"admin"===b?e={showAdmin:!0}:b&&(e={shopId:b});const t=await ws.get(n,{params:e,headers:{"Content-Type":"application/json"},withCredentials:!0});a(t.data)}catch(e){c("Failed to fetch product data."),console.error(e)}finally{o(!1)}})()},[t,b]);const w=()=>{u(null),A(""),g(""),p(!1)};return i?(0,Ns.jsxs)("div",{className:"p-4 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading stock data..."})]}):l?(0,Ns.jsx)("div",{className:"p-6 text-center text-red-500",children:l}):(0,Ns.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h3",{className:"text-xl md:text-2xl font-semibold text-gray-800",children:"Track Stock"}),(0,Ns.jsxs)("button",{onClick:()=>{const e={};if("admin"!==b){var t;const n=(null===(t=x.find(e=>e._id===b))||void 0===t?void 0:t.name)||"All Shops";e.shop=n}else e.shop="Admin Products Only";!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(new Date).toLocaleDateString(),r=e.length,s=e.reduce((e,t)=>e+(t.stockLevel||0),0),a=e.reduce((e,t)=>{const n=t.prices&&t.prices.length>0&&t.prices[0].netPrice||0;return e+(t.stockLevel||0)*n},0),i=e.filter(e=>(e.stockLevel||0)<=(e.stockAlertThreshold||0)).length,o=e.map(e=>{const t=e.prices&&e.prices.length>0&&e.prices[0].netPrice||0,n=e.prices&&e.prices.length>0&&e.prices[0].unit||"N/A",r=(e.stockLevel||0)*t;return'\n      <tr>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">'.concat(e.name||"N/A",'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px; text-align: right;">\u20b9').concat(t.toFixed(2),'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px; text-align: center;">').concat(n,'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px; text-align: right;">').concat(e.stockLevel||0,'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px; text-align: right;">\u20b9').concat(r.toFixed(2),'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px; text-align: right;">').concat(e.stockAlertThreshold||0,"</td>\n      </tr>\n    ")}).join(""),l=[];t.shop&&l.push("Shop: ".concat(t.shop));const c=l.length>0?'<p style="margin: 8px 0; font-size: 16px;"><strong>Filters Applied:</strong> '.concat(l.join(", "),"</p>"):"",d='\n    <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 1000px; margin: 0 auto;">\n      \x3c!-- Header --\x3e\n      <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #333; padding-bottom: 20px;">\n        <h1 style="color: #333; margin: 0; font-size: 32px;">The Sweet Hub</h1>\n        <p style="color: #666; font-size: 16px; margin: 10px 0 5px 0;">156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006</p>\n        <p style="color: #666; font-size: 16px; margin: 5px 0;">Phone: 7339200636</p>\n      </div>\n      \n      <div style="text-align: center; margin-bottom: 30px;">\n        <h2 style="color: #333; margin: 0; font-size: 28px;">STOCK REPORT</h2>\n        <p style="color: #666; font-size: 18px; margin: 15px 0;">\n          Generated on '.concat(n,"\n        </p>\n        ").concat(c,'\n      </div>\n      \n      \x3c!-- Summary --\x3e\n      <div style="margin-bottom: 30px; background-color: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #dee2e6;">\n        <h3 style="color: #333; margin-top: 0; font-size: 20px;">Report Summary</h3>\n        <div style="display: flex; justify-content: space-around; text-align: center;">\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Products</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(r,'</p>\n          </div>\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Stock</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(s,'</p>\n          </div>\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Value</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">\u20b9').concat(a.toFixed(2),'</p>\n          </div>\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Low Stock Items</p>\n            <p style="font-size: 28px; font-weight: bold; color: ').concat(i>0?"#dc2626":"#16a34a",'; margin: 10px 0 0 0;">').concat(i,'</p>\n          </div>\n        </div>\n      </div>\n      \n      \x3c!-- Detailed Stock --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Detailed Stock Information</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Product Name</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px; font-weight: bold;">Net Price</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 14px; font-weight: bold;">Unit</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px; font-weight: bold;">Stock Level</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px; font-weight: bold;">Stock Value</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px; font-weight: bold;">Alert Threshold</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(o,'\n          </tbody>\n        </table>\n      </div>\n      \n      <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; text-align: center;">\n        <p style="color: #777; font-size: 14px; margin: 0;">\n          Generated on ').concat(n," at ").concat((new Date).toLocaleTimeString(),'\n        </p>\n        <p style="color: #777; font-size: 14px; margin: 5px 0 0 0;">\n          Report generated by The Sweet Hub Stock Management System\n        </p>\n      </div>\n    </div>\n  '),u={margin:15,filename:"stock_report_".concat(n.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};fw()().from(d).set(u).save()}(s,e)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center",disabled:0===s.length,children:[(0,Ns.jsx)(Ye,{className:"mr-2"}),"Download PDF"]})]}),"/admin"===t&&(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Filter by Shop"}),(0,Ns.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Ns.jsx)("option",{value:"admin",children:"Admin Products Only"}),x.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Price"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Level"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Total Stock Value"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Alert Threshold"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.prices&&e.prices.length>0?"\u20b9".concat((e.prices[0].netPrice||0).toFixed(2)," (").concat(e.prices[0].unit,")"):"\u20b90.00"}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.stockLevel}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 hidden md:table-cell",children:e.prices&&e.prices.length>0?"\u20b9".concat(((e.stockLevel||0)*(e.prices[0].netPrice||0)).toFixed(2)):"\u20b90.00"}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Ns.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ns.jsxs)("span",{children:[e.stockAlertThreshold," ",e.unit]}),(0,Ns.jsx)("button",{onClick:()=>(e=>{u(e._id),A(e.stockAlertThreshold||""),g(e.prices&&e.prices.length>0?e.prices[0].unit:e.unit||""),p(!0)})(e),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"})]})})]},e._id))})]})}),f&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",children:(0,Ns.jsxs)("div",{className:"relative m-4 p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:"Edit Stock Alert Threshold"}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Threshold"}),(0,Ns.jsx)("input",{type:"text",value:h,onChange:e=>A(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),(0,Ns.jsx)("span",{className:"ml-2 text-gray-500",children:m})]}),(0,Ns.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Ns.jsx)("button",{onClick:w,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:()=>(async e=>{try{await ws.put("".concat(n,"/").concat(e),{stockAlertThreshold:h}),a(s.map(t=>t._id===e?(0,$n.A)((0,$n.A)({},t),{},{stockAlertThreshold:h}):t)),w()}catch(t){c("Failed to update threshold."),console.error(t)}})(d),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update"})]})]})})]})};const PF=function(e){var t;let{baseUrl:n="/admin"}=e;const s="".concat(n,"/products"),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)([]),[A,f]=(0,r.useState)("admin"),[p,m]=(0,r.useState)({}),[g,x]=(0,r.useState)(!1),[v,b]=(0,r.useState)([]),[y,w]=(0,r.useState)("All"),[N,j]=(0,r.useState)(""),[C,B]=(0,r.useState)([]);(0,r.useEffect)(()=>{"/admin"===n&&(async()=>{try{const e=await ws.get("/admin/shops",{withCredentials:!0});h(e.data)}catch(e){d("Failed to fetch shops.")}})()},[n]),(0,r.useEffect)(()=>{(async()=>{l(!0);try{let e={};"/admin"===n&&("admin"===A?e={showAdmin:!0}:A&&(e={shopId:A}));const t="".concat(n,"/categories"),[r,a]=await Promise.all([ws.get(s,{params:e,withCredentials:!0}),ws.get(t,{withCredentials:!0})]),o=r.data.filter(e=>e.stockLevel<=(e.stockAlertThreshold||0));i(o),b(a.data)}catch(e){d("Failed to fetch data.")}finally{l(!1)}})()},[A,n,s]),(0,r.useEffect)(()=>{"/admin"===n&&u.length>0&&(async()=>{try{const e=(await ws.get(s,{withCredentials:!0})).data,t={};t.admin=e.filter(e=>!e.shop&&e.stockLevel<=(e.stockAlertThreshold||0)).length,u.forEach(n=>{t[n._id]=e.filter(e=>e.shop===n._id&&e.stockLevel<=(e.stockAlertThreshold||0)).length}),m(t)}catch(e){console.error("Failed to calculate all alert counts:",e)}})()},[n,u,s]),(0,r.useEffect)(()=>{let e=[...a];"All"!==y&&(e=e.filter(e=>{var t;return(null===(t=e.category)||void 0===t?void 0:t._id)===y})),N&&(e=e.filter(e=>e.name.toLowerCase().includes(N.toLowerCase())||e.sku&&e.sku.toLowerCase().includes(N.toLowerCase()))),B(e)},[a,y,N]);const k=e=>{f(e),x(!1)};return o?(0,Ns.jsxs)("div",{className:"p-4 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading..."})]}):c?(0,Ns.jsx)("div",{className:"p-4 text-red-500",children:c}):(0,Ns.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-xl shadow-md",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h3",{className:"text-xl md:text-2xl font-semibold text-text-primary",children:"Stock Alerts"}),(0,Ns.jsxs)("button",{onClick:()=>{const e={};if("admin"!==A){var t;const n=(null===(t=u.find(e=>e._id===A))||void 0===t?void 0:t.name)||"All Shops";e.shop=n}else e.shop="Admin Products Only";"All"!==y&&(e.category=y),N&&(e.searchTerm=N),function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=(new Date).toLocaleDateString(),a=e.length,i=e.reduce((e,t)=>e+(t.stockLevel||0),0);let o={},l=e;if(r.category&&"All"!==r.category){var c;const n=(null===(c=t.find(e=>e._id===r.category))||void 0===c?void 0:c.name)||r.category;l=e.filter(e=>{var t;return(null===(t=e.category)||void 0===t?void 0:t._id)===r.category}),o[n]=l}else e.forEach(e=>{var t;const n=(null===(t=e.category)||void 0===t?void 0:t.name)||"Uncategorized";o[n]||(o[n]=[]),o[n].push(e)});let d={};if(n&&n.length>0){n.forEach(e=>{const t=l.filter(t=>t.shop&&t.shop._id===e._id);t.length>0&&(d[e.name]=t.length)});const e=l.filter(e=>!e.shop||!e.shop._id);e.length>0&&(d.Admin=e.length)}const u=Object.keys(o).map(e=>{const t=o[e],n=t.reduce((e,t)=>e+(t.stockLevel||0),0);return'\n      <tr>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">'.concat(e,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 14px;">').concat(t.length,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px;">').concat(n,"</td>\n      </tr>\n    ")}).join(""),h=Object.keys(d).length>0?Object.keys(d).map(e=>'\n          <tr>\n            <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">'.concat(e,'</td>\n            <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 14px;">').concat(d[e],"</td>\n          </tr>\n        ")).join(""):"",A=l.map(e=>{var t;const n=(null===(t=e.category)||void 0===t?void 0:t.name)||"Uncategorized",r=e.shop?e.shop.name:"Admin";return'\n      <tr>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">'.concat(e.name||"N/A",'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">').concat(n,'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">').concat(r,'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; text-align: right; font-size: 14px;">').concat(e.stockLevel||0,'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; text-align: right; font-size: 14px;">').concat(e.stockAlertThreshold||0,"</td>\n      </tr>\n    ")}).join(""),f=[];if(r.shop&&f.push("Shop: ".concat(r.shop)),r.category&&"All"!==r.category){var p;const e=(null===(p=t.find(e=>e._id===r.category))||void 0===p?void 0:p.name)||r.category;f.push("Category: ".concat(e))}r.searchTerm&&f.push("Search: ".concat(r.searchTerm));const m=f.length>0?'<p style="margin: 8px 0; font-size: 16px;"><strong>Filters Applied:</strong> '.concat(f.join(", "),"</p>"):"",g='\n    <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 1000px; margin: 0 auto;">\n      \x3c!-- Header --\x3e\n      <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #333; padding-bottom: 20px;">\n        <h1 style="color: #333; margin: 0; font-size: 32px;">The Sweet Hub</h1>\n        <p style="color: #666; font-size: 16px; margin: 10px 0 5px 0;">156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006</p>\n        <p style="color: #666; font-size: 16px; margin: 5px 0;">Phone: 7339200636</p>\n      </div>\n      \n      <div style="text-align: center; margin-bottom: 30px;">\n        <h2 style="color: #333; margin: 0; font-size: 28px;">STOCK ALERTS REPORT</h2>\n        <p style="color: #666; font-size: 18px; margin: 15px 0;">\n          Generated on '.concat(s,"\n        </p>\n        ").concat(m,'\n      </div>\n      \n      \x3c!-- Summary --\x3e\n      <div style="margin-bottom: 30px; background-color: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #dee2e6;">\n        <h3 style="color: #333; margin-top: 0; font-size: 20px;">Report Summary</h3>\n        <div style="display: flex; justify-content: space-around; text-align: center;">\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Alert Products</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(a,'</p>\n          </div>\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Stock</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(i,"</p>\n          </div>\n        </div>\n      </div>\n      \n      ").concat(Object.keys(o).length>0?'\n      \x3c!-- Category Summary --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Products by Category</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Category</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: center; font-size: 16px; font-weight: bold;">Product Count</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: right; font-size: 16px; font-weight: bold;">Total Stock</th>\n            </tr>\n          </thead>\n          <tbody>\n            '.concat(u,"\n          </tbody>\n        </table>\n      </div>\n      "):"","\n      \n      ").concat(Object.keys(d).length>0?'\n      \x3c!-- Shop Summary --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Alerts by Shop</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Shop</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: center; font-size: 16px; font-weight: bold;">Alert Count</th>\n            </tr>\n          </thead>\n          <tbody>\n            '.concat(h,"\n          </tbody>\n        </table>\n      </div>\n      "):"",'\n      \n      \x3c!-- Detailed Products --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Detailed Alert Products</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Product Name</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Category</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Shop</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px; font-weight: bold;">Stock Level</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px; font-weight: bold;">Alert Threshold</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(A,'\n          </tbody>\n        </table>\n      </div>\n      \n      <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; text-align: center;">\n        <p style="color: #777; font-size: 14px; margin: 0;">\n          Generated on ').concat(s," at ").concat((new Date).toLocaleTimeString(),'\n        </p>\n        <p style="color: #777; font-size: 14px; margin: 5px 0 0 0;">\n          Report generated by The Sweet Hub Stock Alert Management System\n        </p>\n      </div>\n    </div>\n  '),x={margin:15,filename:"stock_alerts_report_".concat(s.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};fw()().from(g).set(x).save()}(C,v,u,e)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center",disabled:0===C.length,children:[(0,Ns.jsx)(Ye,{className:"mr-2"}),"Download PDF"]})]}),"/admin"===n&&(0,Ns.jsxs)("div",{className:"mb-6 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,Ns.jsxs)("div",{className:"p-4 rounded-lg shadow-sm flex flex-col items-center justify-center cursor-pointer transition-all duration-200 ".concat("admin"===A?"bg-blue-100 border-2 border-blue-500":"bg-gray-50 hover:bg-gray-100"),onClick:()=>k("admin"),children:[(0,Ns.jsx)("span",{className:"text-text-primary font-medium",children:"Admin"}),(0,Ns.jsx)("span",{className:"text-3xl font-bold mt-1 ".concat(p.admin>0?"text-primary":"text-text-secondary"),children:p.admin||0}),(0,Ns.jsx)("span",{className:"text-text-secondary",children:"Products"})]}),u.map(e=>(0,Ns.jsxs)("div",{className:"p-4 rounded-lg shadow-sm flex flex-col items-center justify-center cursor-pointer transition-all duration-200 ".concat(A===e._id?"bg-blue-100 border-2 border-blue-500":"bg-gray-50 hover:bg-gray-100"),onClick:()=>k(e._id),children:[(0,Ns.jsx)("span",{className:"text-text-primary font-medium",children:e.name}),(0,Ns.jsx)("span",{className:"text-3xl font-bold mt-1 ".concat(p[e._id]>0?"text-primary":"text-text-secondary"),children:p[e._id]||0}),(0,Ns.jsx)("span",{className:"text-text-secondary",children:"Products"})]},e._id))]}),(0,Ns.jsx)("hr",{className:"my-6 border-gray-300"}),(0,Ns.jsxs)("div",{className:"flex flex-wrap items-end gap-4 mb-4",children:["/admin"===n&&(0,Ns.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,Ns.jsx)("label",{className:"block text-text-secondary text-sm font-medium mb-1",children:"Filter by Shop"}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsxs)("button",{type:"button",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-left flex justify-between items-center",onClick:()=>x(!g),children:[(0,Ns.jsx)("span",{children:"admin"===A?"Admin Products":(null===(t=u.find(e=>e._id===A))||void 0===t?void 0:t.name)||"Select Shop"}),(0,Ns.jsx)("span",{className:"text-xs",children:"\u25bc"})]}),g&&(0,Ns.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:(0,Ns.jsxs)("ul",{children:[(0,Ns.jsxs)("li",{className:"px-4 py-2 hover:bg-light-gray cursor-pointer flex justify-between items-center",onClick:()=>k("admin"),children:[(0,Ns.jsx)("span",{children:"Admin Products"}),p.admin>0&&(0,Ns.jsx)("span",{className:"bg-red-500 text-white text-xs font-semibold w-5 h-5 flex items-center justify-center rounded-full",children:p.admin})]}),u.map(e=>(0,Ns.jsxs)("li",{className:"px-4 py-2 hover:bg-light-gray cursor-pointer flex justify-between items-center",onClick:()=>k(e._id),children:[(0,Ns.jsx)("span",{children:e.name}),p[e._id]>0&&(0,Ns.jsx)("span",{className:"bg-red-500 text-white text-xs font-semibold w-5 h-5 flex items-center justify-center rounded-full",children:p[e._id]})]},e._id))]})})]})]}),(0,Ns.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,Ns.jsx)("label",{className:"block text-text-secondary text-sm font-medium mb-1",children:"Search by Name or SKU"}),(0,Ns.jsx)("input",{type:"text",placeholder:"Search...",value:N,onChange:e=>j(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,Ns.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,Ns.jsx)("label",{className:"block text-text-secondary text-sm font-medium mb-1",children:"Filter by Category"}),(0,Ns.jsxs)("select",{value:y,onChange:e=>w(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,Ns.jsx)("option",{value:"All",children:"All Categories"}),v.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]})]}),0===C.length?(0,Ns.jsx)("p",{className:"text-gray-500",children:"No stock alerts match your filters."}):(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Ns.jsx)("thead",{className:"bg-light-gray",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Product Name"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Category"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Stock Level"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Alert Threshold"})]})}),(0,Ns.jsx)("tbody",{className:"divide-y divide-gray-200",children:C.map(e=>{var t;return(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap",children:e.name}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap",children:(null===(t=e.category)||void 0===t?void 0:t.name)||"N/A"}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-red-600 font-bold",children:e.stockLevel}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap",children:e.stockAlertThreshold})]},e._id)})})]})})]})},RF=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},UF=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var OF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const MF=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],QF=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:c}=e,d=yF(e,MF);return(0,r.createElement)("svg",(0,$n.A)((0,$n.A)((0,$n.A)({ref:t},OF),{},{width:s,height:s,stroke:n,strokeWidth:i?24*Number(a)/Number(s):a,className:UF("lucide",o)},!l&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"}),d),[...c.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),HF=["className"],zF=(e,t)=>{const n=(0,r.forwardRef)((n,s)=>{let{className:a}=n,i=yF(n,HF);return(0,r.createElement)(QF,(0,$n.A)({ref:s,iconNode:t,className:UF("lucide-".concat((o=RF(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),a)},i));var o});return n.displayName=RF(e),n},WF=zF("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),VF=zF("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const KF=function(){const[e,t]=(0,r.useState)(""),[n,s]=(0,r.useState)(""),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,x]=(0,r.useState)(""),[v,b]=(0,r.useState)(!1);return(0,Ns.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[(0,Ns.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800",children:"Add New Shop"}),(0,Ns.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),m(""),x("");try{await ws.post("/admin/shops",JSON.stringify({name:e,location:n,shopPhoneNumber:a,gstNumber:o,fssaiNumber:c,username:u,password:A}),{headers:{"Content-Type":"application/json"},withCredentials:!0}),m('Shop "'.concat(e,'" created successfully! The shop worker can log in with username: ').concat(u,".")),t(""),s(""),i(""),l(""),d(""),h(""),f("")}catch(v){var p,g;x((null===(p=v.response)||void 0===p||null===(g=p.data)||void 0===g?void 0:g.message)||"Failed to add shop. Please check the form data."),console.error(v)}},className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"shopName",children:"Shop Name"}),(0,Ns.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"shopName",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"shopPhoneNumber",children:"Shop Phone Number"}),(0,Ns.jsx)("input",{type:"tel",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"shopPhoneNumber",value:a,onChange:e=>i(e.target.value),required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"shopLocation",children:"Shop Location"}),(0,Ns.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"shopLocation",value:n,onChange:e=>s(e.target.value),required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"gstNumber",children:"GST Number"}),(0,Ns.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"gstNumber",value:o,onChange:e=>l(e.target.value),placeholder:"Enter GST number (optional)"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"fssaiNumber",children:"FSSAI Number"}),(0,Ns.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"fssaiNumber",value:c,onChange:e=>d(e.target.value),placeholder:"Enter FSSAI number (optional)"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username",children:"Shop Worker Username"}),(0,Ns.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"username",value:u,onChange:e=>h(e.target.value),required:!0})]}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Shop Worker Password"}),(0,Ns.jsx)("input",{type:v?"text":"password",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline pr-10",id:"password",value:A,onChange:e=>f(e.target.value),required:!0}),(0,Ns.jsx)("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/1 text-gray-500",onClick:()=>b(!v),children:v?(0,Ns.jsx)(WF,{size:20}):(0,Ns.jsx)(VF,{size:20})})]}),(0,Ns.jsx)("button",{type:"submit",className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Add Shop"})]}),p&&(0,Ns.jsx)("p",{className:"mt-4 text-green-500",children:p}),g&&(0,Ns.jsx)("p",{className:"mt-4 text-red-500",children:g})]})},GF="/admin/shops",qF=e=>{if(!e)return"bg-gray-100";let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);const n=Math.abs(t)%360;return"hsl(".concat(n,", 70%, 90%)")};const XF=function(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[a,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)({}),[u,h]=(0,r.useState)(!1),[A,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[v,b]=(0,r.useState)(""),[y,w]=(0,r.useState)(!1),[N,j]=(0,r.useState)(!1),[C,B]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get(GF,{headers:{"Content-Type":"application/json"},withCredentials:!0});t(e.data)}catch(e){i("Failed to fetch shops."),console.error(e)}finally{s(!1)}})()},[]);const k=()=>{l(null),d({}),h(!1),f(!1),m(!1),b("")},S=(e,t)=>{d((0,$n.A)((0,$n.A)({},c),{},{[t]:e.target.value})),v&&b("")},_=()=>{w(!1)};return n?(0,Ns.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-16 h-16 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-10 h-10"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading shops..."})]}):a?(0,Ns.jsx)("div",{className:"p-6 text-center text-red-500",children:a}):(0,Ns.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-lg",children:[(0,Ns.jsx)("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-gray-800",children:"Existing Shops"}),0===e.length?(0,Ns.jsx)("p",{children:"No shops found. Please add one."}):(0,Ns.jsx)("ul",{className:"divide-y divide-gray-200",children:e.map(e=>(0,Ns.jsxs)("li",{className:"py-4 flex flex-col items-start gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"font-medium text-gray-900 px-3 py-1 rounded-md inline-block",style:{backgroundColor:qF(e.name)},children:e.name}),e.user&&(0,Ns.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Username: ",e.user.username]}),(0,Ns.jsxs)("p",{className:"text-sm text-gray-500",children:["Location: ",e.location]}),(0,Ns.jsxs)("p",{className:"text-sm text-gray-500",children:["Phone Number: ",e.shopPhoneNumber]}),e.gstNumber&&(0,Ns.jsxs)("p",{className:"text-sm text-gray-500",children:["GST Number: ",e.gstNumber]}),e.fssaiNumber&&(0,Ns.jsxs)("p",{className:"text-sm text-gray-500",children:["FSSAI Number: ",e.fssaiNumber]})]}),(0,Ns.jsxs)("div",{className:"w-full flex justify-end items-center space-x-4 sm:w-auto sm:space-x-2",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{l(e._id),d((0,$n.A)((0,$n.A)({},e),{},{name:e.name||"",location:e.location||"",shopPhoneNumber:e.shopPhoneNumber||"",gstNumber:e.gstNumber||"",fssaiNumber:e.fssaiNumber||"",newPassword:"",confirmNewPassword:""})),h(!0),f(!1),m(!1),b("")})(e),className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors text-sm font-medium",children:"Edit"}),(0,Ns.jsx)("button",{onClick:()=>{return t=e._id,B(t),void j(!0);var t},className:"px-3 py-1 bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors text-sm font-medium",children:"Delete"})]})]},e._id))}),(0,Ns.jsxs)(hw,{isOpen:u,onClose:k,title:"Edit Shop",children:[(0,Ns.jsxs)("div",{className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shop Name"}),(0,Ns.jsx)("input",{type:"text",value:c.name||"",onChange:e=>S(e,"name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shop Phone Number"}),(0,Ns.jsx)("input",{type:"tel",value:c.shopPhoneNumber||"",onChange:e=>S(e,"shopPhoneNumber"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shop Location"}),(0,Ns.jsx)("input",{type:"text",value:c.location||"",onChange:e=>S(e,"location"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GST Number"}),(0,Ns.jsx)("input",{type:"text",value:c.gstNumber||"",onChange:e=>S(e,"gstNumber"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter GST number (optional)"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"FSSAI Number"}),(0,Ns.jsx)("input",{type:"text",value:c.fssaiNumber||"",onChange:e=>S(e,"fssaiNumber"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter FSSAI number (optional)"})]}),(0,Ns.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,Ns.jsx)("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"Password Management"}),(0,Ns.jsx)("div",{className:"bg-blue-50 p-3 rounded-md mb-4",children:(0,Ns.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,Ns.jsx)("strong",{children:"Security Note:"})," Existing passwords are securely hashed and cannot be retrieved. Use the fields below to set a new password if needed."]})}),(0,Ns.jsxs)("div",{className:"mb-3",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsx)("input",{type:A?"text":"password",value:c.newPassword||"",onChange:e=>S(e,"newPassword"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter new password"}),c.newPassword&&(0,Ns.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 px-3 text-gray-500 hover:text-gray-700",onClick:()=>f(!A),children:A?"Hide":"Show"})]})]}),c.newPassword&&(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsx)("input",{type:p?"text":"password",value:c.confirmNewPassword||"",onChange:e=>S(e,"confirmNewPassword"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Confirm new password"}),(0,Ns.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 px-3 text-gray-500 hover:text-gray-700",onClick:()=>m(!p),children:p?"Hide":"Show"})]})]})]})]}),(0,Ns.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,Ns.jsx)("button",{onClick:k,className:"px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:async()=>{c.newPassword&&c.newPassword!==c.confirmNewPassword?b("New passwords do not match."):w(!0)},className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Update Shop"})]})]}),(0,Ns.jsx)(hw,{isOpen:!!v,onClose:()=>b(""),title:"Error",children:(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,Ns.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),(0,Ns.jsxs)("div",{className:"mt-3",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Update Failed"}),(0,Ns.jsx)("div",{className:"mt-2",children:(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:v})}),(0,Ns.jsx)("div",{className:"mt-6",children:(0,Ns.jsx)("button",{type:"button",onClick:()=>b(""),className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"OK"})})]})]})}),(0,Ns.jsx)(hw,{isOpen:g,onClose:()=>x(!1),title:"Password Updated Successfully",children:(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:(0,Ns.jsx)("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,Ns.jsxs)("div",{className:"mt-3",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Password Updated"}),(0,Ns.jsx)("div",{className:"mt-2",children:(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"The password for this shop has been successfully updated."})}),(0,Ns.jsx)("div",{className:"mt-6",children:(0,Ns.jsx)("button",{type:"button",onClick:()=>x(!1),className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"OK"})})]})]})}),(0,Ns.jsx)(hw,{isOpen:y,onClose:_,title:"Confirm Update",children:(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100",children:(0,Ns.jsx)("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Ns.jsxs)("div",{className:"mt-3",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Are you sure you want to update this shop?"}),(0,Ns.jsx)("div",{className:"mt-2",children:(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"This will update the shop details including GST and FSSAI numbers. Do you want to continue?"})}),(0,Ns.jsxs)("div",{className:"mt-6 flex justify-center gap-3",children:[(0,Ns.jsx)("button",{type:"button",onClick:_,className:"px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),(0,Ns.jsx)("button",{type:"button",onClick:async()=>{w(!1);try{const n={name:c.name,location:c.location,shopPhoneNumber:c.shopPhoneNumber,gstNumber:c.gstNumber,fssaiNumber:c.fssaiNumber};c.newPassword&&(n.password=c.newPassword);const r=await ws.put("".concat(GF,"/").concat(o),n,{withCredentials:!0});t(e.map(e=>e._id===o?r.data:e)),c.newPassword&&x(!0),k()}catch(n){b("Failed to update shop."),console.error(n)}},className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Update"})]})]})]})}),(0,Ns.jsx)(hw,{isOpen:N,onClose:()=>{j(!1),B(null)},title:"Confirm Deletion",children:(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,Ns.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,Ns.jsxs)("div",{className:"mt-3",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Are you sure?"}),(0,Ns.jsx)("div",{className:"mt-2",children:(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this shop? This action cannot be undone."})}),(0,Ns.jsxs)("div",{className:"mt-6 flex justify-center gap-3",children:[(0,Ns.jsx)("button",{type:"button",onClick:()=>{j(!1),B(null)},className:"px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),(0,Ns.jsx)("button",{type:"button",onClick:async()=>{try{await ws.delete("".concat(GF,"/").concat(C),{withCredentials:!0}),t(e.filter(e=>e._id!==C)),j(!1),B(null)}catch(n){i("Failed to delete shop."),console.error(n),j(!1),B(null)}},className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Delete"})]})]})]})})]})},YF=(e,t)=>ZF(e,t,!1),JF=(e,t)=>ZF(e,t,!0),ZF=(e,t,n)=>{var r,s,a,i,o;const l=(null===t||void 0===t?void 0:t.name)||(null===e||void 0===e||null===(r=e.shop)||void 0===r?void 0:r.name)||(null===e||void 0===e?void 0:e.shopName)||"The Sweet Hub",c=(null===t||void 0===t?void 0:t.address)||(null===e||void 0===e||null===(s=e.shop)||void 0===s?void 0:s.address)||(null===e||void 0===e?void 0:e.shopAddress)||"156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006",d=(null===t||void 0===t?void 0:t.phone)||(null===e||void 0===e||null===(a=e.shop)||void 0===a?void 0:a.phone)||(null===e||void 0===e?void 0:e.shopPhone)||"7339200636",u=(null===t||void 0===t?void 0:t.gstNumber)||(null===e||void 0===e||null===(i=e.shop)||void 0===i?void 0:i.gstNumber)||(null===e||void 0===e?void 0:e.shopGstNumber)||null,h=(null===t||void 0===t?void 0:t.fssaiNumber)||(null===e||void 0===e||null===(o=e.shop)||void 0===o?void 0:o.fssaiNumber)||(null===e||void 0===e?void 0:e.shopFssaiNumber)||null,A=(null===e||void 0===e?void 0:e.billId)||(null!==e&&void 0!==e&&e._id?e._id.slice(-8):"N/A"),f=null!==e&&void 0!==e&&e.billDate?new Date(e.billDate).toLocaleDateString():(new Date).toLocaleDateString(),p=(null===e||void 0===e?void 0:e.paymentMethod)||"Cash",m=(null===e||void 0===e?void 0:e.customerName)||"Walk-in Customer",g=(null===e||void 0===e?void 0:e.customerMobileNumber)||"N/A",x=(null===e||void 0===e?void 0:e.subtotal)||(null!==e&&void 0!==e&&e.items?e.items.reduce((e,t)=>e+(t.totalPrice||(t.unitPrice||t.price||0)*(t.quantity||0)),0):0),v=(null===e||void 0===e?void 0:e.tax)||0,b=(null===e||void 0===e?void 0:e.totalAmount)||x+v,y=(null===e||void 0===e?void 0:e.amountPaid)||0,w=(null===e||void 0===e?void 0:e.balance)||b-y,N=(null===e||void 0===e?void 0:e.gstPercentage)||0,j=(null===e||void 0===e?void 0:e.gstAmount)||0,C=(null===e||void 0===e||e.baseAmount,(null===e||void 0===e?void 0:e.discountType)||"none"),B=(null===e||void 0===e?void 0:e.discountValue)||0,k=(null===e||void 0===e?void 0:e.discountAmount)||0;if(!e||!e.items)return console.error("Invalid bill data:",e),void alert("Unable to generate PDF: Invalid bill data");const S=e.items.map(e=>{var t;return'\n    <tr style="font-size: 10px;">\n      <td style="padding: 3px 4px; border-bottom: 1px solid #ddd; text-align: left;">'.concat(e.productName||(null===(t=e.product)||void 0===t?void 0:t.name)||e.name||"Item",'</td>\n      <td style="padding: 3px 4px; border-bottom: 1px solid #ddd; text-align: center;">').concat(e.quantity||0,'</td>\n      <td style="padding: 3px 4px; border-bottom: 1px solid #ddd; text-align: right;">\u20b9').concat((e.unitPrice||e.price||0).toFixed(2),'</td>\n      <td style="padding: 3px 4px; border-bottom: 1px solid #ddd; text-align: right;">\u20b9').concat((e.totalPrice||(e.unitPrice||e.price||0)*(e.quantity||0)).toFixed(2),"</td>\n    </tr>\n  ")}).join(""),_='\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset="utf-8">\n      <title>Bill - '.concat(A,"</title>\n      <style>\n        @page {\n          size: 80mm ").concat(n?"auto":"150mm",';\n          margin: 8mm 5mm;\n        }\n        body {\n          font-family: Arial, sans-serif;\n          margin: 0;\n          padding: 0;\n          font-size: 10px;\n          line-height: 1.2;\n        }\n        .bill-container {\n          max-width: 76mm;\n          margin: 0 auto;\n          padding: 5mm;\n          border: 0;\n          box-shadow: none;\n        }\n        .header {\n          text-align: center;\n          margin-bottom: 8px;\n          padding-bottom: 5px;\n          border-bottom: 1px solid #333;\n        }\n        .shop-name {\n          font-size: 12px;\n          font-weight: bold;\n          margin: 0 0 2px 0;\n          color: #333;\n        }\n        .shop-details {\n          font-size: 8px;\n          margin: 2px 0;\n          color: #666;\n        }\n        .bill-title {\n          text-align: center;\n          font-size: 12px;\n          font-weight: bold;\n          margin: 8px 0;\n          color: #333;\n        }\n        .bill-info {\n          display: flex;\n          justify-content: space-between;\n          margin: 5px 0;\n          font-size: 9px;\n        }\n        .bill-info div {\n          margin: 1px 0;\n        }\n        .from-to-info {\n          margin: 8px 0;\n          font-size: 9px;\n          border-top: 1px solid #eee;\n          border-bottom: 1px solid #eee;\n          padding: 5px 0;\n        }\n        .from-to-section {\n          margin-bottom: 5px;\n        }\n        .items-table {\n          width: 100%;\n          border-collapse: collapse;\n          margin: 8px 0;\n          font-size: 10px;\n        }\n        .items-table th {\n          font-size: 9px;\n          text-align: left;\n          padding: 3px 4px;\n          background-color: #f2f2f2;\n          border-bottom: 2px solid #333;\n        }\n        .items-table td {\n          padding: 3px 4px;\n          border-bottom: 1px solid #ddd;\n        }\n        .summary-row {\n          font-weight: bold;\n          font-size: 10px;\n        }\n        .summary-row td {\n          padding: 2px 4px;\n        }\n        .total-row {\n          font-size: 11px;\n          font-weight: bold;\n          border-top: 1px solid #333;\n          border-bottom: 1px solid #333;\n        }\n        .total-row td {\n          padding: 4px 4px;\n        }\n        .footer {\n          text-align: center;\n          margin-top: 10px;\n          font-size: 8px;\n          color: #777;\n          padding-top: 5px;\n          border-top: 1px solid #eee;\n        }\n        @media print {\n          body {\n            -webkit-print-color-adjust: exact;\n            print-color-adjust: exact;\n            font-size: 10px;\n            line-height: 1.2;\n          }\n          .bill-container {\n            max-width: 76mm;\n            margin: 0 auto;\n            padding: 5mm;\n          }\n          .items-table th {\n            font-size: 9px;\n          }\n          .items-table td {\n            font-size: 10px;\n            padding: 3px 4px;\n          }\n          .summary-row {\n            font-size: 10px;\n          }\n          .total-row {\n            font-size: 11px;\n          }\n        }\n      </style>\n    </head>\n    <body>\n      <div class="bill-container">\n        \x3c!-- Header with Shop Info --\x3e\n        <div class="header">\n          <div class="shop-name">').concat(l,'</div>\n          <div class="shop-details">').concat(c,"</div>\n          ").concat(u?'<div class="shop-details">GSTIN: '.concat(u,"</div>"):"","\n          ").concat(h?'<div class="shop-details">FSSAI: '.concat(h,"</div>"):"",'\n          <div class="shop-details">Phone: ').concat(d,'</div>\n        </div>\n        \n        <div class="bill-title">BILL</div>\n        \n        \x3c!-- Bill Details --\x3e\n        <div class="bill-info">\n          <div>\n            <div><strong>Bill ID:</strong> ').concat(A,"</div>\n            <div><strong>Date:</strong> ").concat(f,"</div>\n            <div><strong>Customer:</strong> ").concat(m,'</div>\n          </div>\n          <div style="text-align: right;">\n            <div><strong>Mobile:</strong> ').concat(g,"</div>\n            <div><strong>Payment:</strong> ").concat(p,"</div>\n          </div>\n        </div>\n        \n        \x3c!-- Compressed FROM and TO Information --\x3e\n        ").concat(e.fromInfo&&Object.values(e.fromInfo).some(e=>e)||e.toInfo&&Object.values(e.toInfo).some(e=>e)?'\n        <div class="from-to-info">\n          \x3c!-- FROM Information --\x3e\n          '.concat(e.fromInfo?'\n          <div class="from-to-section">\n            <div style="font-weight: bold; margin-bottom: 2px;">FROM:</div>\n            <div>'.concat(e.fromInfo.name||"","</div>\n            <div>").concat(e.fromInfo.address||"","</div>\n            ").concat(e.fromInfo.gstin?"<div>GSTIN: ".concat(e.fromInfo.gstin,"</div>"):"","\n            ").concat(e.fromInfo.phone?"<div>Phone: ".concat(e.fromInfo.phone,"</div>"):"","\n          </div>\n          "):"","\n          \n          \x3c!-- TO Information --\x3e\n          ").concat(e.toInfo?'\n          <div class="from-to-section" style="margin-top: 5px;">\n            <div style="font-weight: bold; margin-bottom: 2px;">TO:</div>\n            <div>'.concat(e.toInfo.name||"","</div>\n            <div>").concat(e.toInfo.address||"","</div>\n            ").concat(e.toInfo.gstin?"<div>GSTIN: ".concat(e.toInfo.gstin,"</div>"):"","\n            ").concat(e.toInfo.phone?"<div>Phone: ".concat(e.toInfo.phone,"</div>"):"","\n          </div>\n          "):"","\n        </div>\n        "):"",'\n        \n        \x3c!-- Items Table --\x3e\n        <table class="items-table">\n          <thead>\n            <tr>\n              <th style="text-align: left;">Item</th>\n              <th style="text-align: center;">Qty</th>\n              <th style="text-align: right;">Price</th>\n              <th style="text-align: right;">Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(S,'\n            <tr class="summary-row">\n              <td colspan="3" style="text-align: right; padding: 3px 4px;">Subtotal</td>\n              <td style="text-align: right; padding: 3px 4px;">\u20b9').concat(x.toFixed(2),"</td>\n            </tr>\n            ").concat(k>0?'\n            <tr class="summary-row">\n              <td colspan="3" style="text-align: right; padding: 3px 4px;">\n                Discount '.concat("percentage"===C?"(".concat(B,"%)"):"",':\n              </td>\n              <td style="text-align: right; padding: 3px 4px;">-\u20b9').concat(k.toFixed(2),"</td>\n            </tr>\n            "):"",'\n            <tr class="summary-row">\n              <td colspan="3" style="text-align: right; padding: 3px 4px;">Net Amount</td>\n              <td style="text-align: right; padding: 3px 4px;">\u20b9').concat((x-k).toFixed(2),"</td>\n            </tr>\n            ").concat(N>0?'\n            <tr class="summary-row">\n              <td colspan="3" style="text-align: right; padding: 3px 4px;">GST ('.concat(N,'%)</td>\n              <td style="text-align: right; padding: 3px 4px;">\u20b9').concat(j.toFixed(2),"</td>\n            </tr>\n            "):"",'\n            <tr class="summary-row total-row">\n              <td colspan="3" style="text-align: right; padding: 4px 4px;">Total Amount</td>\n              <td style="text-align: right; padding: 4px 4px;">\u20b9').concat(b.toFixed(2),"</td>\n            </tr>\n            ").concat(y>0?'\n            <tr class="summary-row">\n              <td colspan="3" style="text-align: right; padding: 3px 4px;">Amount Paid</td>\n              <td style="text-align: right; padding: 3px 4px;">\u20b9'.concat(y.toFixed(2),"</td>\n            </tr>\n            "):"","\n            ").concat(w>0?'\n            <tr class="summary-row">\n              <td colspan="3" style="text-align: right; padding: 3px 4px;">Balance</td>\n              <td style="text-align: right; padding: 3px 4px;">\u20b9'.concat(w.toFixed(2),"</td>\n            </tr>\n            "):"",'\n          </tbody>\n        </table>\n        \n        <div style="margin-top: 8px; font-size: 9px;">\n          <div><strong>Total Items:</strong> ').concat(e.items.length||0,'</div>\n        </div>\n        \n        <div class="footer">\n          <div>Thank you for your business!</div>\n          <div style="margin-top: 3px; font-size: 7px;">This is a computer generated bill</div>\n        </div>\n      </div>\n    </body>\n    </html>\n  '),E={margin:n?[5,2,5,2]:5,filename:"bill_".concat(A,"_").concat(f.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,letterRendering:!0},jsPDF:{unit:"mm",format:n?[80,150]:"a4",orientation:"portrait"}};if(n){const e=document.createElement("iframe");e.style.position="fixed",e.style.right="0",e.style.bottom="0",e.style.width="80mm",e.style.height="auto",e.style.border="none",e.style.zIndex="-1",e.srcdoc=_,document.body.appendChild(e),e.onload=()=>{e.contentWindow.focus(),e.contentWindow.print(),setTimeout(()=>{document.body.removeChild(e)},1e3)}}else fw()().from(_).set(E).save()},$F={kg:1,gram:.001,g:.001,piece:1},eT={kg:["kg","gram","g"],gram:["gram","g","kg"],g:["g","gram","kg"],piece:["piece"]},tT=(e,t,n)=>{const r=$F[t],s=$F[n];if(void 0===r||void 0===s)throw new Error("Unsupported unit conversion: ".concat(t," to ").concat(n));return e*r/s},nT=(e,t)=>(eT[e]||[e]).includes(t),rT=e=>{if(!e||!Array.isArray(e))return[];const t=e.map(e=>e.unit),n=new Set;return t.forEach(e=>{n.add(e);const t=(e=>eT[e]||[e])(e);t.forEach(e=>n.add(e))}),Array.from(n)},sT=()=>{const[e,t]=(0,r.useState)(()=>{const e=localStorage.getItem("keyboardShortcutsExpanded");return null===e||JSON.parse(e)});return(0,Ns.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,Ns.jsxs)("div",{className:"flex items-center justify-between cursor-pointer hover:bg-blue-100 rounded p-1 -m-1",onClick:()=>{const n=!e;t(n),localStorage.setItem("keyboardShortcutsExpanded",JSON.stringify(n))},children:[(0,Ns.jsxs)("h4",{className:"text-lg font-semibold text-blue-800 flex items-center",children:[(0,Ns.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ns.jsx)("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.68a1 1 0 011.414 0 1 1 0 010 1.414l-1.49 1.493a1 1 0 01-1.414 0 1 1 0 010-1.414l1.49-1.493zm-4.93 4.93a1 1 0 010 1.414l-1.49 1.493a1 1 0 01-1.414 0 1 1 0 010-1.414l1.49-1.493a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Keyboard Shortcuts Guide"]}),(0,Ns.jsx)("svg",{className:"w-5 h-5 text-blue-600 transform transition-transform ".concat(e?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e&&(0,Ns.jsxs)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Ctrl"}),(0,Ns.jsx)("span",{className:"text-gray-600",children:"+"}),(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded ml-2 mr-2 font-mono",children:"N"}),(0,Ns.jsx)("span",{className:"text-gray-700",children:"New Bill"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Ctrl"}),(0,Ns.jsx)("span",{className:"text-gray-600",children:"+"}),(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded ml-2 mr-2 font-mono",children:"F"}),(0,Ns.jsx)("span",{className:"text-gray-700",children:"Focus Search"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Alt"}),(0,Ns.jsx)("span",{className:"text-gray-600",children:"+"}),(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded ml-2 mr-2 font-mono",children:"D"}),(0,Ns.jsx)("span",{className:"text-gray-700",children:"Focus Discount"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Ctrl"}),(0,Ns.jsx)("span",{className:"text-gray-600",children:"+"}),(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded ml-2 mr-2 font-mono",children:"Enter"}),(0,Ns.jsx)("span",{className:"text-gray-700",children:"Submit Bill"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"F2"}),(0,Ns.jsx)("span",{className:"text-gray-700 ml-2",children:"Edit Quantity"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Ctrl"}),(0,Ns.jsx)("span",{className:"text-gray-600",children:"+"}),(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded ml-2 mr-2 font-mono",children:"D"}),(0,Ns.jsx)("span",{className:"text-gray-700",children:"Delete Last Item"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Tab"}),(0,Ns.jsx)("span",{className:"text-gray-700 ml-2",children:"Navigate Fields"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Esc"}),(0,Ns.jsx)("span",{className:"text-gray-700 ml-2",children:"Close Dropdowns"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Ctrl"}),(0,Ns.jsx)("span",{className:"text-gray-600",children:"+"}),(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded ml-2 mr-2 font-mono",children:"Alt"}),(0,Ns.jsx)("span",{className:"text-gray-600",children:"+"}),(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded ml-2 mr-2 font-mono",children:"F"}),(0,Ns.jsx)("span",{className:"text-gray-700",children:"Focus Search"})]})]})]})},aT=(0,r.createContext)(),iT=()=>{const e=(0,r.useContext)(aT);if(!e)throw new Error("useFullScreenBill must be used within a FullScreenBillProvider");return e},oT=e=>{let{children:t}=e;const[n,s]=(0,r.useState)(!1);return(0,Ns.jsx)(aT.Provider,{value:{isFullScreenBill:n,enterFullScreenBill:()=>{s(!0),document.body.style.overflow="hidden",document.body.classList.add("fullscreen-bill-mode")},exitFullScreenBill:()=>{s(!1),document.body.style.overflow="auto",document.body.classList.remove("fullscreen-bill-mode")}},children:t})};const lT=function(e){var t,n;let{baseUrl:s="/admin"}=e;const a=ee(),{enterFullScreenBill:i,exitFullScreenBill:o}=iT(),[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[h,A]=(0,r.useState)([]),[f,p]=(0,r.useState)("admin"),[m,g]=(0,r.useState)(""),[x,v]=(0,r.useState)(""),[b,y]=(0,r.useState)(!1),[w,N]=(0,r.useState)(!1),[j,C]=(0,r.useState)(""),[B,k]=(0,r.useState)("All"),[S,_]=(0,r.useState)({name:"",address:"",gstin:"",state:"",stateCode:"",phone:"",email:""});(0,r.useEffect)(()=>{const e=localStorage.getItem("adminBillingFromInfo");if(e)try{_(JSON.parse(e))}catch(Ua){console.error("Failed to parse saved FROM info",Ua)}else _({name:"Sri Sakthi Sweets Production Factory",address:"14/22 Anna Nagar, Salem, Tamil Nadu \u2013 636001",gstin:"33ABICS9876K1Z1",state:"Tamil Nadu",stateCode:"33",phone:"98765 43210",email:"sweetsfactory@gmail.com"})},[]),(0,r.useEffect)(()=>{(S.name||S.address||S.gstin||S.state||S.stateCode||S.phone||S.email)&&localStorage.setItem("adminBillingFromInfo",JSON.stringify(S))},[S]);const[E,F]=(0,r.useState)({name:"",address:"",gstin:"",state:"",stateCode:"",phone:""}),[T,I]=(0,r.useState)({product:null,unit:"",quantity:"",price:0,productName:"",sku:"",isDecimalAsGram:!1,rawInput:""}),[D,L]=(0,r.useState)([]),[P,R]=(0,r.useState)(0),[U,O]=(0,r.useState)("none"),[M,Q]=(0,r.useState)(""),[H,z]=(0,r.useState)(0),[W,V]=(0,r.useState)(0),[K,G]=(0,r.useState)(0),[q,X]=(0,r.useState)(0),[Y,J]=(0,r.useState)(0),[Z,$]=(0,r.useState)(0),[te,ne]=(0,r.useState)("Cash"),[re,se]=(0,r.useState)(""),[ae,ie]=(0,r.useState)(""),[oe,le]=(0,r.useState)(""),[ce,de]=(0,r.useState)(!0),[ue,he]=(0,r.useState)(!0),[Ae,fe]=(0,r.useState)(!1),[pe,me]=(0,r.useState)(!1),[ge,xe]=(0,r.useState)(!1),[ve,be]=(0,r.useState)(null),[ye,we]=(0,r.useState)(0),Ne=(0,r.useRef)(null),je=(0,r.useRef)(null),Ce=(0,r.useRef)(null),Be=(0,r.useRef)(null),ke=(0,r.useRef)(null),Se=(0,r.useRef)(null),_e=(0,r.useRef)(null),Ee=(0,r.useRef)(null),Fe=(0,r.useRef)(null);(0,r.useEffect)(()=>(i(),()=>{o()}),[i,o]),(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/admin/settings/gst");G(e.data.gstPercentage||0)}catch(oe){console.error("Error fetching GST settings:",oe)}})()},[]);const Te=(0,r.useCallback)(async()=>{de(!0);try{const e="admin"===f?{showAdmin:!0}:{shopId:f},t=[ws.get("".concat(s,"/products"),{params:e,withCredentials:!0})];"/admin"===s&&t.push(ws.get("/admin/shops",{withCredentials:!0}));const n=await Promise.all(t);c(n[0].data),n.length>1&&A(n[1].data)}catch(e){le("Failed to fetch data."),console.error("Error fetching data:",e),console.error("Error response:",e.response),console.error("Error request:",e.request)}finally{de(!1)}},[s,f]);(0,r.useEffect)(()=>{console.log("Calling fetchProductsAndShops"),Te()},[Te]),(0,r.useEffect)(()=>{const e=D.reduce((e,t)=>e+t.quantity*t.price,0);R(e);let t=0;if("percentage"===U&&M){const n=parseFloat(M);!isNaN(n)&&n>=0&&n<=100&&(t=e*n/100)}else if("cash"===U&&M){const n=parseFloat(M);!isNaN(n)&&n>=0&&n<=e&&(t=n)}z(t);const n=e-t;if(V(n),K>0){const e=n/(1+K/100),t=n-e;J(e),X(t),$(n)}else J(n),X(0),$(n)},[D,U,M,K]),(0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&(y(!1),N(!1))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]);const[Ie,De]=(0,r.useState)(-1);(0,r.useEffect)(()=>{b&&d.length>0?De(0):De(-1)},[b,d]);const Le=e=>{if(e.stockLevel<=0)return be(e),we(e.stockLevel),N(!1),void setTimeout(()=>{me(!0)},100);if(v("".concat(e.name," (").concat(e.sku,")")),N(!1),y(!1),C(""),k("All"),e.prices&&e.prices.length>0){var t;const n=rT(e.prices);I({product:e,unit:n[0],quantity:"",price:(null===(t=e.prices.find(e=>e.unit===n[0]))||void 0===t?void 0:t.sellingPrice)||e.prices[0].sellingPrice,productName:e.name,sku:e.sku}),le("")}else le('Product "'.concat(e.name,'" has no purchase rates set. Please add them first.')),I({product:null,unit:"",quantity:"",price:0,productName:"",sku:""})},Pe=()=>{let e,t=!1;if(T.isDecimalAsGram&&"number"===typeof T.quantity&&""!==T.quantity)e=parseFloat(T.quantity),t=!0;else if(T.rawInput&&""!==T.rawInput){const n=parseFloat(T.rawInput);!isNaN(n)&&isFinite(n)&&n>=0&&(e=n,t=!0)}else if(""!==T.quantity){const n=parseFloat(T.quantity);!isNaN(n)&&isFinite(n)&&n>=0&&(e=n,t=!0)}if(!t)return void le("Please enter a valid quantity number.");if(!T.product||e<=0)return void le("Please select a valid product and quantity.");let n=T.price;if(T.product.prices&&T.product.prices.length>0){const e=T.product.prices[0].unit;if(T.unit!==e&&nT(T.unit,e)){const t=tT(1,T.unit,e);n=T.price*t}}const r={product:T.product._id,productName:T.productName,sku:T.sku,unit:T.unit,quantity:e,price:n,baseUnitPrice:T.price,baseUnit:T.product.prices[0].unit},s=D.findIndex(e=>e.product===r.product&&e.unit===r.unit);if(s>-1){const e=[...D];e[s].quantity+=r.quantity,L(e)}else L([...D,r]);v(""),I({product:null,unit:"",quantity:"",price:0,productName:"",sku:"",isDecimalAsGram:!1,rawInput:""}),le("")},Re=e=>{const t=D.filter((t,n)=>n!==e);L(t)},Ue=e=>{const t=e.replace(/\D/g,"");return 10===t.length?"+91".concat(t):e},Oe=async e=>{if(e.preventDefault(),ie(""),le(""),"/admin"===s&&!f)return void le("Please select a shop.");if(!m)return void le("Please enter customer mobile number.");if(0===D.length)return void le("Please add at least one item to the bill.");if("none"!==U&&M){const e=parseFloat(M);if(isNaN(e))return void le("Please enter a valid discount value.");if("percentage"===U&&(e<0||e>100))return void le("Percentage discount must be between 0 and 100.");if("cash"===U&&(e<0||e>P))return void le("Cash discount cannot be negative or exceed subtotal.")}const t=Number(re);if(t<Z)return void le("Amount paid cannot be less than total amount.");const n="".concat(s,"/bills");try{const e=(0,$n.A)((0,$n.A)({customerMobileNumber:Ue(m),items:D,baseAmount:Y,gstPercentage:K,gstAmount:q,totalAmount:Z,paymentMethod:te,amountPaid:t},"/admin"===s&&"admin"!==f&&{shopId:f}),{},{fromInfo:S.name||S.address||S.gstin||S.state||S.stateCode||S.phone||S.email?S:void 0,toInfo:E.name||E.address||E.gstin||E.state||E.stateCode||E.phone?E:void 0,discountType:U,discountValue:M?parseFloat(M):0,discountAmount:H}),r=await ws.post(n,e,{headers:{"Content-Type":"application/json"},withCredentials:!0});if(ie("Bill created successfully!"),ue){const e="/shop"===s?{name:"Tech Shop"}:h.find(e=>e._id===f);YF((0,$n.A)((0,$n.A)({},r.data),{},{fromInfo:S,toInfo:E}),e)}if(Ae){const e="/shop"===s?{name:"Tech Shop"}:h.find(e=>e._id===f);JF((0,$n.A)((0,$n.A)({},r.data),{},{fromInfo:S,toInfo:E}),e)}g(""),L([]),R(0),O("none"),Q(""),z(0),V(0),$(0),se(""),v(""),I({product:null,unit:"",quantity:"",price:0,productName:"",sku:""})}catch(i){var r,a;le((null===(r=i.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to create bill. Please try again."),console.error(i)}},Me=e=>{e&&"function"===typeof e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})};return(0,r.useEffect)(()=>{const e=e=>{if(e.ctrlKey&&"n"===e.key&&(e.preventDefault(),g(""),L([]),R(0),O("none"),Q(""),z(0),V(0),$(0),se(""),v(""),I({product:null,unit:"",quantity:"",price:0,productName:"",sku:""}),ie(""),le(""),Ne.current&&(Ne.current.focus(),Me(Ne.current))),e.ctrlKey&&"f"===e.key&&(e.preventDefault(),Ce.current&&(Ce.current.focus(),Me(Ce.current))),e.altKey&&"d"===e.key&&(e.preventDefault(),ke.current&&(ke.current.focus(),Me(ke.current))),e.ctrlKey&&"Enter"===e.key&&(e.preventDefault(),Oe(e)),"F2"===e.key&&T.product&&(e.preventDefault(),Be.current&&(Be.current.focus(),Be.current.select(),Me(Be.current))),e.ctrlKey&&"d"===e.key&&(e.preventDefault(),D.length>0)){const e=D.length-1;Re(e)}e.ctrlKey&&e.altKey&&"F"===e.key&&(e.preventDefault(),Ce.current&&(Ce.current.focus(),Ce.current.select(),Me(Ce.current))),"Enter"===e.key&&x&&1===d.length&&(e.preventDefault(),Le(d[0]),setTimeout(()=>{Ce.current&&(Ce.current.focus(),Ce.current.select(),Me(Ce.current))},10)),"Enter"===e.key&&T.product&&(""!==T.quantity||T.rawInput&&""!==T.rawInput)&&(e.preventDefault(),Pe(),setTimeout(()=>{Ce.current&&(Ce.current.focus(),Ce.current.select(),Me(Ce.current))},10))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[T,x,d,D]),(0,r.useEffect)(()=>{const e=e=>{e.target&&e.target.scrollIntoView&&setTimeout(()=>{e.target.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},10)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]),ce?(0,Ns.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-16 h-16 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-10 h-10"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading..."})]}):(0,Ns.jsxs)("div",{className:"bg-white h-screen flex flex-col",children:[(0,Ns.jsxs)("div",{className:"p-4 sm:p-6 border-b flex justify-between items-center",children:[(0,Ns.jsx)("h3",{className:"text-xl sm:text-2xl font-semibold text-text-primary",children:"Create Bill"}),(0,Ns.jsx)("button",{onClick:()=>a("/admin"===s?"/admin/bills/view":"/shop/billing/view"),className:"text-gray-500 hover:text-gray-700 text-2xl focus:outline-none","aria-label":"Close full screen bill",children:"\u2715"})]}),(0,Ns.jsxs)("div",{className:"flex-1 overflow-auto p-4 sm:p-6",children:[(0,Ns.jsx)(sT,{}),(0,Ns.jsx)(hw,{isOpen:pe,onClose:()=>me(!1),title:"Out of Stock",children:(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"text-red-500 text-5xl mb-4",children:"\u26a0\ufe0f"}),(0,Ns.jsx)("p",{className:"text-lg mb-2",children:"Product is out of stock!"}),(0,Ns.jsxs)("p",{className:"text-gray-600 mb-4",children:[null===ve||void 0===ve?void 0:ve.name," (SKU: ",null===ve||void 0===ve?void 0:ve.sku,") is currently out of stock. Available quantity: ",ye]}),(0,Ns.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,Ns.jsx)("button",{onClick:()=>me(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:()=>{me(!1),xe(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Continue Anyway"})]})]})}),(0,Ns.jsx)(hw,{isOpen:ge,onClose:()=>xe(!1),title:"Confirm Out of Stock Product",children:(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"text-orange-500 text-5xl mb-4",children:"\u26a0\ufe0f"}),(0,Ns.jsx)("p",{className:"text-lg mb-2",children:"Are you sure?"}),(0,Ns.jsx)("p",{className:"text-gray-600 mb-4",children:"You are about to add an out-of-stock product to the bill:"}),(0,Ns.jsxs)("p",{className:"font-semibold mb-4",children:[null===ve||void 0===ve?void 0:ve.name," (SKU: ",null===ve||void 0===ve?void 0:ve.sku,")"]}),(0,Ns.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,Ns.jsx)("button",{onClick:()=>xe(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:()=>{xe(!1),ve&&(v("".concat(ve.name," (").concat(ve.sku,")")),N(!1),y(!1),C(""),k("All"),ve.prices&&ve.prices.length>0?(I({product:ve,unit:ve.prices[0].unit,quantity:"",price:ve.prices[0].sellingPrice,productName:ve.name,sku:ve.sku}),le("")):(le('Product "'.concat(ve.name,'" has no purchase rates set. Please add them first.')),I({product:null,unit:"",quantity:"",price:0,productName:"",sku:""})))},className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Confirm & Add"})]})]})}),(0,Ns.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[(0,Ns.jsx)("h4",{className:"text-lg sm:text-xl font-medium text-gray-700 mb-3",children:"Customer Details"}),(0,Ns.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-text-secondary text-sm font-medium mb-1",htmlFor:"mobileNumber",children:"Customer Mobile Number"}),(0,Ns.jsx)("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75",id:"mobileNumber",ref:Ne,value:m,onChange:e=>{let t=e.target.value;t=t.replace(/\D/g,""),t.length>10&&(t=t.slice(0,10)),g(t)},required:!0,onKeyDown:e=>{"Tab"!==e.key||e.shiftKey||(e.preventDefault(),"/admin"===s?je.current&&je.current.focus():Ce.current&&Ce.current.focus())}})]})})]}),"/admin"===s&&(0,Ns.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[(0,Ns.jsx)("h4",{className:"text-lg font-semibold text-text-primary mb-3",children:"Select Shop"}),(0,Ns.jsxs)("select",{className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75",value:f,onChange:e=>p(e.target.value),ref:je,required:"/admin"===s,onKeyDown:e=>{"Tab"!==e.key||e.shiftKey?"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),customerNameRef.current&&customerNameRef.current.focus()):(e.preventDefault(),Ce.current&&Ce.current.focus())},children:[(0,Ns.jsx)("option",{value:"admin",children:"Admin Bills"}),h.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),"/admin"===s&&(0,Ns.jsxs)("div",{className:"mb-6",children:[(0,Ns.jsx)("h4",{className:"text-lg font-semibold text-text-primary mb-3",children:"FROM & TO Information (Optional)"}),(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,Ns.jsxs)("div",{className:"flex-1 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Ns.jsx)("h5",{className:"text-md font-semibold text-text-primary",children:"FROM (Sweet Production Factory) - Optional"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>_({name:"The Sweet Hub - Production Unit",address:"No. 7, Pavala Nagar, PO, Murugur, Thuraiyur, Tamil Nadu 621008",gstin:"33APSPY9123R1ZO",state:"Tamil Nadu",stateCode:"",phone:"+91 8610428919",email:"thesweethub2025@gmail.com"}),className:"text-xs bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded",children:"Reset to Default"})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ns.jsxs)("div",{className:"relative group",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Ns.jsx)("input",{type:"text",value:S.name,onChange:e=>_((0,$n.A)((0,$n.A)({},S),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Ns.jsx)("input",{type:"text",value:S.address,onChange:e=>_((0,$n.A)((0,$n.A)({},S),{},{address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GSTIN"}),(0,Ns.jsx)("input",{type:"text",value:S.gstin,onChange:e=>_((0,$n.A)((0,$n.A)({},S),{},{gstin:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,Ns.jsx)("input",{type:"text",value:S.state,onChange:e=>_((0,$n.A)((0,$n.A)({},S),{},{state:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Code"}),(0,Ns.jsx)("input",{type:"text",value:S.stateCode,onChange:e=>_((0,$n.A)((0,$n.A)({},S),{},{stateCode:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,Ns.jsx)("input",{type:"text",value:S.phone,onChange:e=>_((0,$n.A)((0,$n.A)({},S),{},{phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75"})]}),(0,Ns.jsxs)("div",{className:"md:col-span-2",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Ns.jsx)("input",{type:"email",value:S.email,onChange:e=>_((0,$n.A)((0,$n.A)({},S),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75"})]})]})]}),(0,Ns.jsxs)("div",{className:"flex-1 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Ns.jsx)("h5",{className:"text-md font-semibold text-text-primary",children:"TO (Customer/Business) - Optional"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>F({name:"",address:"",gstin:"",state:"",stateCode:"",phone:""}),className:"text-xs bg-blue-500 hover:bg-blue-700 text-white py-1 px-2 rounded",children:"Clear"})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ns.jsxs)("div",{className:"relative group",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Ns.jsx)("input",{type:"text",value:E.name,onChange:e=>F((0,$n.A)((0,$n.A)({},E),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Ns.jsx)("input",{type:"text",value:E.address,onChange:e=>F((0,$n.A)((0,$n.A)({},E),{},{address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GSTIN"}),(0,Ns.jsx)("input",{type:"text",value:E.gstin,onChange:e=>F((0,$n.A)((0,$n.A)({},E),{},{gstin:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,Ns.jsx)("input",{type:"text",value:E.state,onChange:e=>F((0,$n.A)((0,$n.A)({},E),{},{state:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Code"}),(0,Ns.jsx)("input",{type:"text",value:E.stateCode,onChange:e=>F((0,$n.A)((0,$n.A)({},E),{},{stateCode:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,Ns.jsx)("input",{type:"text",value:E.phone,onChange:e=>F((0,$n.A)((0,$n.A)({},E),{},{phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75"})]})]})]})]})]}),(0,Ns.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[(0,Ns.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Add Products"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,Ns.jsxs)("div",{className:"md:col-span-2",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Product"}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsxs)("div",{className:"flex",children:[(0,Ns.jsx)("input",{type:"text",value:x,onChange:e=>{const t=e.target.value;if(v(t),y(!0),t){const e=l.filter(e=>e.name&&e.name.toLowerCase().includes(t.toLowerCase())||e.sku&&e.sku.toLowerCase().includes(t.toLowerCase()));u(e)}else u([]),y(!1)},placeholder:"Search by name or SKU...",className:"w-full px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75",ref:Ce,onFocus:()=>{},onKeyDown:e=>{if(b&&d.length>0)switch(e.key){case"ArrowDown":e.preventDefault(),De(e=>e<d.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),De(e=>e>0?e-1:d.length-1);break;case"Enter":e.preventDefault(),Ie>=0&&d[Ie]&&(Le(d[Ie]),setTimeout(()=>{Ce.current&&(Ce.current.focus(),Ce.current.select())},10));break;case"Escape":y(!1),De(-1);break;default:-1===Ie&&d.length>0&&De(0)}if("Tab"===e.key&&!e.shiftKey){if(D.length>0&&""===x.trim())return e.preventDefault(),void(ke.current&&(ke.current.focus(),Me(ke.current)));if(T.product)return e.preventDefault(),void(Be.current&&Be.current.focus())}},tabIndex:"0"}),(0,Ns.jsx)("button",{type:"button",className:"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md hover:bg-gray-200 focus:outline-none",onClick:()=>{N(!w),y(!1),w||(C(""),k("All"))},children:(0,Ns.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,Ns.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),b&&d.length>0&&(0,Ns.jsx)("ul",{className:"absolute z-10 mt-1 max-h-40 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:d.map((e,t)=>{var n;return(0,Ns.jsxs)("li",{className:"relative cursor-default select-none py-2 pl-3 pr-9 ".concat(Ie===t?"bg-indigo-600 text-white":"hover:bg-indigo-600 hover:text-white"),onClick:()=>Le(e),onMouseEnter:()=>De(t),children:[(0,Ns.jsxs)("div",{className:"flex justify-between",children:[(0,Ns.jsx)("span",{className:"font-normal truncate",children:e.name}),(0,Ns.jsxs)("span",{className:"ml-2 text-gray-500",children:["(",e.sku,")"]})]}),(0,Ns.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Qty: ",e.stockLevel," | Price: \u20b9",(null===(n=e.prices[0])||void 0===n?void 0:n.sellingPrice)||0]})]},"".concat(e._id,"-").concat(e.sku))})}),(b||w)&&(0,Ns.jsx)("div",{className:"fixed inset-0 z-0",onClick:()=>{y(!1),N(!1)}}),w&&(0,Ns.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Ns.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,Ns.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,Ns.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:()=>N(!1)})}),(0,Ns.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,Ns.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full",children:(0,Ns.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,Ns.jsx)("div",{className:"sm:flex sm:items-start",children:(0,Ns.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Select Product"}),(0,Ns.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-500 focus:outline-none",onClick:()=>N(!1),children:(0,Ns.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Ns.jsxs)("div",{className:"mt-2 w-full",children:[(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[(0,Ns.jsx)("div",{className:"flex-1",children:(0,Ns.jsx)("input",{type:"text",placeholder:"Search products...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:j,onChange:e=>C(e.target.value)})}),(0,Ns.jsx)("div",{className:"flex-1",children:(0,Ns.jsx)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:B,onChange:e=>k(e.target.value),children:(e=>{const t=e.map(e=>{var t;return(null===(t=e.category)||void 0===t?void 0:t.name)||"Uncategorized"});return["All",...new Set(t)]})(l).map(e=>(0,Ns.jsx)("option",{value:e,children:e},e))})})]}),(0,Ns.jsx)("div",{className:"max-h-96 overflow-y-auto",children:(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l.filter(e=>{var t;const n=""===j||e.name&&e.name.toLowerCase().includes(j.toLowerCase())||e.sku&&e.sku.toLowerCase().includes(j.toLowerCase()),r=(null===(t=e.category)||void 0===t?void 0:t.name)||"Uncategorized";return n&&("All"===B||r===B)}).map(e=>{var t,n;return(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>Le(e),children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.sku}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.stockLevel<=(e.stockAlertThreshold||0)?"bg-red-100 text-red-800":e.stockLevel<=2*(e.stockAlertThreshold||0)?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.stockLevel})}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-semibold",children:["\u20b9",(null===(t=e.prices[0])||void 0===t?void 0:t.sellingPrice)||0]}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(null===(n=e.category)||void 0===n?void 0:n.name)||"N/A"})]},e._id)})})]})})})]})]})})})})]})})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,Ns.jsx)("select",{value:T.unit,onChange:e=>{const t=e.target.value,n=T.product.prices.find(e=>e.unit===t);if(n)I(e=>(0,$n.A)((0,$n.A)({},e),{},{unit:n.unit,price:n.sellingPrice}));else{const e=T.product.prices[0];I(n=>(0,$n.A)((0,$n.A)({},n),{},{unit:t,price:e.sellingPrice}))}},disabled:!T.product,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-200",onKeyDown:e=>{"Tab"!==e.key||e.shiftKey||(e.preventDefault(),Be.current&&Be.current.focus())},children:null===(t=rT((null===(n=T.product)||void 0===n?void 0:n.prices)||[]))||void 0===t?void 0:t.map(e=>(0,Ns.jsx)("option",{value:e,children:e},e))})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,Ns.jsx)("input",{type:"text",value:void 0!==T.rawInput&&""!==T.rawInput?T.rawInput:T.quantity,onChange:e=>{const t=e.target.value,n=parseFloat(t);if(""===t||"0."===t||"."===t||!isNaN(n)&&n>=0)if("0."===t||"."===t)I(e=>(0,$n.A)((0,$n.A)({},e),{},{quantity:"",rawInput:t,isDecimalAsGram:!1}));else if(""===t)I(e=>(0,$n.A)((0,$n.A)({},e),{},{quantity:"",rawInput:"",isDecimalAsGram:!1}));else if(!isNaN(n)&&n>=0)if(T.product&&T.product.prices&&T.product.prices.length>0&&"kg"===T.product.prices[0].unit&&n<1&&t.includes(".")&&n>0){var r,s;const e=1e3*n;I(n=>(0,$n.A)((0,$n.A)({},n),{},{quantity:e,rawInput:t,unit:"gram",isDecimalAsGram:!0}));const a=null===(r=T.product)||void 0===r||null===(s=r.prices)||void 0===s?void 0:s.find(e=>"gram"===e.unit);a&&I(e=>(0,$n.A)((0,$n.A)({},e),{},{price:a.sellingPrice}))}else I(e=>(0,$n.A)((0,$n.A)({},e),{},{quantity:n,rawInput:t,isDecimalAsGram:!1}))},disabled:!T.product,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-200",min:"1",ref:Be,onKeyDown:e=>{"Enter"===e.key&&T.product?(e.preventDefault(),Pe()):"Tab"!==e.key||e.shiftKey?"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),Ce.current&&Ce.current.focus()):(e.preventDefault(),document.querySelector('button[type="button"][onClick*="handleAddItem"]').focus())}})]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),(0,Ns.jsx)("input",{type:"text",value:T.price,readOnly:!0,tabIndex:"-1",className:"mt-1 block w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm"})]}),(0,Ns.jsx)("div",{className:"md:col-span-2 flex items-end",children:(0,Ns.jsx)("button",{type:"button",onClick:Pe,disabled:!T.product,className:"w-full px-4 py-2 bg-blue-600 text-white font-semibold rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400",onKeyDown:e=>{var t;if("Tab"!==e.key||e.shiftKey){if("Tab"===e.key&&e.shiftKey){var n;e.preventDefault(),null===(n=Be.current)||void 0===n||n.focus()}}else e.preventDefault(),null===(t=ke.current)||void 0===t||t.focus()},children:"Add Item"})})]}),oe&&!oe.includes("purchase rates")&&(0,Ns.jsx)("div",{className:"mt-2 text-red-500 text-sm",children:oe})]}),D.length>0&&(0,Ns.jsx)("div",{className:"mt-6 overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Product"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"SKU"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Unit"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Quantity"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Price"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Total"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map((e,t)=>(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.productName}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.sku}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.unit}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.quantity}),(0,Ns.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",e.baseUnitPrice.toFixed(2)]}),(0,Ns.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",(e.quantity*e.price).toFixed(2)]}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Ns.jsx)("button",{onClick:()=>Re(t),className:"text-red-600 hover:text-red-900",children:"Remove"})})]},t))})]})}),(0,Ns.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[(0,Ns.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Discount"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Type"}),(0,Ns.jsxs)("select",{value:U,onChange:e=>O(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",ref:ke,onKeyDown:e=>{if("Tab"!==e.key||e.shiftKey){if("Tab"===e.key&&e.shiftKey){e.preventDefault();const t=document.querySelector('button[onClick*="handleAddItem"]');t&&t.focus()}}else e.preventDefault(),"none"!==U?Se.current&&Se.current.focus():_e.current&&_e.current.focus()},children:[(0,Ns.jsx)("option",{value:"none",children:"No Discount"}),(0,Ns.jsx)("option",{value:"percentage",children:"Percentage (%)"}),(0,Ns.jsx)("option",{value:"cash",children:"Cash (\u20b9)"})]})]}),"none"!==U&&(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"percentage"===U?"Discount Percentage":"Discount Amount"}),(0,Ns.jsx)("input",{type:"text",value:M,onChange:e=>Q(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",min:"0",step:"0.01",max:"percentage"===U?"100":P,ref:Se,onKeyDown:e=>{"Tab"!==e.key||e.shiftKey?"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),ke.current&&ke.current.focus()):(e.preventDefault(),_e.current&&_e.current.focus())}})]}),(0,Ns.jsx)("div",{className:"flex items-end",children:(0,Ns.jsx)("div",{className:"text-sm",children:(0,Ns.jsxs)("p",{className:"font-medium",children:["Discount Amount: \u20b9",H.toFixed(2)]})})})]})]}),(0,Ns.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[(0,Ns.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Bill Summary"}),(0,Ns.jsxs)("div",{className:"space-y-2",children:[(0,Ns.jsxs)("div",{className:"flex justify-between",children:[(0,Ns.jsx)("span",{children:"Subtotal:"}),(0,Ns.jsxs)("span",{children:["\u20b9",P.toFixed(2)]})]}),H>0&&(0,Ns.jsxs)("div",{className:"flex justify-between",children:[(0,Ns.jsx)("span",{children:"Discount:"}),(0,Ns.jsxs)("span",{children:["-\u20b9",H.toFixed(2)]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between",children:[(0,Ns.jsx)("span",{children:"Net Amount:"}),(0,Ns.jsxs)("span",{children:["\u20b9",W.toFixed(2)]})]}),K>0&&(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsxs)("div",{className:"flex justify-between",children:[(0,Ns.jsxs)("span",{children:["GST (",K,"%):"]}),(0,Ns.jsxs)("span",{children:["\u20b9",q.toFixed(2)]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,Ns.jsx)("span",{children:"Total Amount:"}),(0,Ns.jsxs)("span",{children:["\u20b9",Z.toFixed(2)]})]})]}),0===K&&(0,Ns.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,Ns.jsx)("span",{children:"Total Amount:"}),(0,Ns.jsxs)("span",{children:["\u20b9",Z.toFixed(2)]})]})]})]}),(0,Ns.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[(0,Ns.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Payment Details"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"paymentMethod",children:"Payment Method"}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsxs)("select",{id:"paymentMethod",value:te,onChange:e=>ne(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline pr-8 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75",ref:_e,onKeyDown:e=>{"Tab"!==e.key||e.shiftKey?"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),"none"!==U?Se.current&&Se.current.focus():ke.current&&ke.current.focus()):(e.preventDefault(),Ee.current&&Ee.current.focus())},children:[(0,Ns.jsx)("option",{value:"Cash",children:"Cash"}),(0,Ns.jsx)("option",{value:"UPI",children:"UPI"}),(0,Ns.jsx)("option",{value:"Card",children:"Card"})]}),(0,Ns.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:(0,Ns.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,Ns.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"amountPaid",children:"Amount Paid"}),(0,Ns.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"amountPaid",value:re,onChange:e=>se(e.target.value),required:!0,ref:Ee,onKeyDown:e=>{"Tab"!==e.key||e.shiftKey?"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),_e.current&&_e.current.focus()):(e.preventDefault(),Fe.current&&Fe.current.focus())}})]})]}),(0,Ns.jsxs)("div",{className:"flex justify-end items-center mt-4",children:[(0,Ns.jsx)("span",{className:"text-lg font-bold text-gray-800 mr-4",children:"Balance:"}),(0,Ns.jsxs)("span",{className:"text-lg font-bold text-red-600",children:["\u20b9",(Z-Number(re)).toFixed(2)]})]})]}),(0,Ns.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[(0,Ns.jsx)("label",{htmlFor:"autoDownload",className:"text-gray-700 font-bold",children:"Auto Download Bill after Creation"}),(0,Ns.jsx)("input",{type:"checkbox",id:"autoDownload",checked:ue,onChange:e=>he(e.target.checked),className:"form-checkbox h-5 w-5 text-primary"})]}),(0,Ns.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[(0,Ns.jsx)("label",{htmlFor:"autoPrint",className:"text-gray-700 font-bold",children:"Auto Print Bill after Creation"}),(0,Ns.jsx)("input",{type:"checkbox",id:"autoPrint",checked:Ae,onChange:e=>fe(e.target.checked),className:"form-checkbox h-5 w-5 text-primary"})]}),(0,Ns.jsx)("button",{type:"submit",onClick:Oe,className:"w-full bg-primary hover:bg-primary-dark text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:shadow-outline",ref:Fe,onKeyDown:e=>{"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),Ee.current&&Ee.current.focus())},children:"Create Bill"}),ae&&(0,Ns.jsx)("p",{className:"mt-4 text-green-500",children:ae}),oe&&(0,Ns.jsx)("p",{className:"mt-4 text-red-500",children:oe})]})]})},cT=e=>{var t,n,r,s,a,i;let{bill:o,onClose:l}=e;return o?(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Ns.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,Ns.jsxs)("div",{className:"p-6",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,Ns.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Bill Details"}),(0,Ns.jsx)("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"FROM & TO Information (Optional)"}),(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"The following information is optional and may not be present on all bills."})]}),(o.fromInfo||o.toInfo)&&(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[o.fromInfo&&(0,Ns.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"FROM (Sweet Production Factory)"}),(0,Ns.jsx)("p",{className:"text-gray-600 font-medium",children:o.fromInfo.name||""}),(0,Ns.jsx)("p",{className:"text-gray-600",children:o.fromInfo.address||""}),o.fromInfo.gstin&&(0,Ns.jsxs)("p",{className:"text-gray-600",children:["GSTIN: ",o.fromInfo.gstin]}),o.fromInfo.state&&(0,Ns.jsxs)("p",{className:"text-gray-600",children:["State: ",o.fromInfo.state]}),o.fromInfo.stateCode&&(0,Ns.jsxs)("p",{className:"text-gray-600",children:["State Code: ",o.fromInfo.stateCode]}),o.fromInfo.phone&&(0,Ns.jsxs)("p",{className:"text-gray-600",children:["Phone: ",o.fromInfo.phone]}),o.fromInfo.email&&(0,Ns.jsxs)("p",{className:"text-gray-600",children:["Email: ",o.fromInfo.email]})]}),o.toInfo&&(0,Ns.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"TO (Receiving Branch / Shop)"}),(0,Ns.jsx)("p",{className:"text-gray-600 font-medium",children:o.toInfo.name||""}),(0,Ns.jsx)("p",{className:"text-gray-600",children:o.toInfo.address||""}),o.toInfo.gstin&&(0,Ns.jsxs)("p",{className:"text-gray-600",children:["GSTIN: ",o.toInfo.gstin]}),o.toInfo.state&&(0,Ns.jsxs)("p",{className:"text-gray-600",children:["State: ",o.toInfo.state]}),o.toInfo.stateCode&&(0,Ns.jsxs)("p",{className:"text-gray-600",children:["State Code: ",o.toInfo.stateCode]}),o.toInfo.phone&&(0,Ns.jsxs)("p",{className:"text-gray-600",children:["Phone: ",o.toInfo.phone]})]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Bill Information"}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Bill ID:"})," ",o.billId||o._id]}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Date:"})," ",new Date(o.billDate).toLocaleDateString()]}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Payment Method:"})," ",o.paymentMethod]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Customer Information"}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Name:"})," ",o.customerName]}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Mobile:"})," ",o.customerMobileNumber]})]})]}),(0,Ns.jsxs)("div",{className:"mb-8",children:[(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Purchased Items"}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.items.map((e,t)=>{var n,r,s;return(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.productName||(e.product?e.product.name:"[Deleted Product]")}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.unit||(e.product?e.product.unit:"N/A")}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.quantity}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["\u20b9",(null===(n=e.price)||void 0===n?void 0:n.toFixed(2))||(null===(r=e.unitPrice)||void 0===r?void 0:r.toFixed(2))||"0.00"]}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["\u20b9",(null===(s=e.totalPrice)||void 0===s?void 0:s.toFixed(2))||((e.price||e.unitPrice||0)*e.quantity).toFixed(2)]})]},t)})})]})})]}),(0,Ns.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,Ns.jsx)("div",{className:"flex justify-end",children:(0,Ns.jsxs)("div",{className:"w-full max-w-xs",children:[o.gstPercentage>0?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Base Amount:"}),(0,Ns.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(t=o.baseAmount)||void 0===t?void 0:t.toFixed(2))||"0.00"]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Ns.jsxs)("span",{className:"text-gray-600",children:["GST (",o.gstPercentage,"%):"]}),(0,Ns.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(n=o.gstAmount)||void 0===n?void 0:n.toFixed(2))||"0.00"]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between py-2 border-t border-gray-300 mt-2",children:[(0,Ns.jsx)("span",{className:"text-lg font-bold text-gray-800",children:"Total Amount:"}),(0,Ns.jsxs)("span",{className:"text-lg font-bold text-gray-800",children:["\u20b9",(null===(r=o.totalAmount)||void 0===r?void 0:r.toFixed(2))||"0.00"]})]})]}):(0,Ns.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Total Amount:"}),(0,Ns.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(s=o.totalAmount)||void 0===s?void 0:s.toFixed(2))||"0.00"]})]}),o.amountPaid>0&&(0,Ns.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Amount Paid:"}),(0,Ns.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(a=o.amountPaid)||void 0===a?void 0:a.toFixed(2))||"0.00"]})]}),o.balance>0&&(0,Ns.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Balance:"}),(0,Ns.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(i=o.balance)||void 0===i?void 0:i.toFixed(2))||"0.00"]})]})]})})})]})})}):null};const dT=function(e){let{baseUrl:t="/admin"}=e;const[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)("All"),[p,m]=(0,r.useState)(""),[g,x]=(0,r.useState)(""),[v,b]=(0,r.useState)([]),[y,w]=(0,r.useState)("admin"),[N,j]=(0,r.useState)(null),[C,B]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{"/admin"===t&&(async()=>{try{const e=await ws.get("/admin/shops",{withCredentials:!0});b(e.data)}catch(e){console.error("Failed to fetch shops:",e)}})(),(async()=>{try{let e={};"admin"===y?e={showAdmin:!0}:y&&(e={shopId:y});const n=[...(await ws.get("".concat(t,"/bills"),{params:e,headers:{"Content-Type":"application/json"},withCredentials:!0})).data].sort((e,t)=>{const n=e.billDate?new Date(e.billDate).getTime():1e3*parseInt(e._id.slice(0,8),16);return(t.billDate?new Date(t.billDate).getTime():1e3*parseInt(t._id.slice(0,8),16))-n});s(n)}catch(e){d("Failed to fetch bills."),console.error(e)}finally{l(!1)}})()},[t,y]),(0,r.useEffect)(()=>{let e=[...n];if(u&&(e=e.filter(e=>e.customerName.toLowerCase().includes(u.toLowerCase())||e.customerMobileNumber.includes(u))),"All"!==A&&(e=e.filter(e=>e.paymentMethod===A)),p){const t=new Date(p).getTime();e=e.filter(e=>new Date(e.billDate).getTime()>=t)}if(g){const t=new Date(g).getTime();e=e.filter(e=>new Date(e.billDate).getTime()<=t+864e5)}i(e)},[n,u,A,p,g]),o?(0,Ns.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-16 h-16 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-10 h-10"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading bills..."})]}):c?(0,Ns.jsx)("div",{className:"p-6 text-center text-red-500",children:c}):(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Ns.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800",children:"View Bills"}),"/admin"===t&&(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Filter by Shop"}),(0,Ns.jsxs)("select",{value:y,onChange:e=>w(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Ns.jsx)("option",{value:"admin",children:"Admin Bills Only"}),v.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Ns.jsx)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Search"}),(0,Ns.jsx)("input",{type:"text",placeholder:"Search by name or number...",value:u,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border rounded-lg"})]}),(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Payment Method"}),(0,Ns.jsxs)("select",{value:A,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 border rounded-lg",children:[(0,Ns.jsx)("option",{value:"All",children:"All"}),(0,Ns.jsx)("option",{value:"Cash",children:"Cash"}),(0,Ns.jsx)("option",{value:"UPI",children:"UPI"}),(0,Ns.jsx)("option",{value:"Card",children:"Card"})]})]}),(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"From Date"}),(0,Ns.jsx)("input",{type:"date",value:p,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 border rounded-lg"})]}),(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"To Date"}),(0,Ns.jsx)("input",{type:"date",value:g,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border rounded-lg"})]})]})}),0===a.length?(0,Ns.jsx)("p",{children:"No bills found."}):(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bill ID"}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items Purchased"}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),(0,Ns.jsx)("td",{className:"hidden md:table-cell px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bill Date"}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.billId||e._id.slice(-8)}),(0,Ns.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,Ns.jsx)("div",{children:e.customerName}),(0,Ns.jsx)("div",{children:e.customerMobileNumber})]}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.items.map(e=>(0,Ns.jsxs)("div",{children:[e.productName||(e.product?e.product.name:"[Deleted Product]")," (",e.quantity," ",e.unit||(e.product?e.product.unit:"unit"),")"]},e._id))}),(0,Ns.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,Ns.jsxs)("div",{children:["\u20b9",e.totalAmount.toFixed(2)]}),(0,Ns.jsxs)("div",{className:"text-xs text-gray-400",children:["(",e.paymentMethod,")"]})]}),(0,Ns.jsx)("td",{className:"hidden md:table-cell px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.billDate).toLocaleDateString()}),(0,Ns.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{j(e),B(!0)})(e),className:"text-blue-600 hover:text-blue-900 bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded-md transition-colors duration-200",children:"View"}),(0,Ns.jsx)("button",{onClick:()=>(e=>{const t="admin"===y?{name:"Admin Shop",address:"Main Admin Location",phone:"7339200636"}:v.find(e=>e._id===y)||e.shop;YF(e,t)})(e),className:"text-green-600 hover:text-green-900 bg-green-100 hover:bg-green-200 px-3 py-1 rounded-md transition-colors duration-200",children:"Generate Invoice"})]})]},e._id))})]})}),C&&N&&(0,Ns.jsx)(cT,{bill:N,onClose:()=>B(!1)})]})},uT=e=>{let{type:t,message:n,onClose:s}=e;const a={success:"bg-green-100 border-green-400 text-green-700",error:"bg-red-100 border-red-400 text-red-700",info:"bg-blue-100 border-blue-400 text-blue-700",warning:"bg-yellow-100 border-yellow-400 text-yellow-700"}[t]||"bg-gray-100 border-gray-400 text-gray-700",i={success:Ke,error:Ft,info:it,warning:it}[t];return(0,r.useEffect)(()=>{if(n&&s){const e=setTimeout(()=>{s()},5e3);return()=>clearTimeout(e)}},[n,s]),n?(0,Ns.jsxs)("div",{className:"flex items-center justify-between p-4 mb-4 rounded-md border ".concat(a," animate-fade-in"),role:"alert",children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[i&&(0,Ns.jsx)(i,{className:"mr-3 text-xl"}),(0,Ns.jsx)("p",{className:"text-sm font-medium",children:n})]}),(0,Ns.jsx)("button",{onClick:s,className:"text-current hover:opacity-75 focus:outline-none",children:(0,Ns.jsx)(Ft,{size:20})})]}):null},hT=()=>{var e;const[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(""),[h,A]=(0,r.useState)(0),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(null),[x,v]=(0,r.useState)(!1),[b,y]=(0,r.useState)(""),[w,N]=(0,r.useState)(0),[j,C]=(0,r.useState)(null),[B,k]=(0,r.useState)(null),[S,_]=(0,r.useState)(!1),[E,F]=(0,r.useState)(""),[T,I]=(0,r.useState)([]),[D,L]=(0,r.useState)([]),[P,R]=(0,r.useState)(""),[U,O]=(0,r.useState)(!1),[M,Q]=(0,r.useState)(!1),[H,z]=(0,r.useState)(null),[W,V]=(0,r.useState)(null),[K,G]=(0,r.useState)(!1),[q,X]=(0,r.useState)(""),Y=(0,r.useCallback)(async()=>{try{const e=await ws.get("/admin/tasks/topics");n(e.data.data)}catch(r){var e,t;z({type:"error",message:(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch topics."})}},[]),J=(0,r.useCallback)(async()=>{try{const e=await ws.get("/admin/tasks/daily");a(e.data.data)}catch(n){var e,t;z({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch assigned tasks."})}},[]),Z=(0,r.useCallback)(async()=>{try{const e=await ws.get("/admin/tasks/departments");o(e.data.data)}catch(n){var e,t;z({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch departments."})}},[]),$=(0,r.useCallback)(async()=>{try{const e=await ws.get("/admin/tasks/workers");c(e.data.data)}catch(n){var e,t;z({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch workers."})}},[]);(0,r.useEffect)(()=>{Y(),J(),Z(),$()},[Y,J,Z,$]);const ee=()=>{u(""),A(0),p(""),g(null)},te=()=>{y(""),N(0),C(null)},ne=()=>{F(""),I([]),L([]),R(""),O(!1)},re=e=>{const{value:t,checked:n}=e.target;L(n?e=>[...e,t]:e=>e.filter(e=>e!==t))},se=e=>{const{value:t,checked:n}=e.target;I(n?e=>[...e,t]:e=>e.filter(e=>e!==t))},ae=P?l.filter(e=>{var t;return(null===(t=e.department)||void 0===t?void 0:t._id)===P}):l,ie=E&&(null===(e=t.find(e=>e._id===E))||void 0===e?void 0:e.subTopics)||[];return(0,Ns.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,Ns.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Daily Tasks Management"}),H&&(0,Ns.jsx)(uT,{type:H.type,message:H.message,onClose:()=>z(null)}),(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Ns.jsxs)("button",{onClick:()=>{ee(),v(!0)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200 shadow-md",children:[(0,Ns.jsx)(ft,{className:"mr-2"})," Add New Topic"]}),(0,Ns.jsxs)("button",{onClick:()=>{ne(),Q(!0)},className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors duration-200 shadow-md",children:[(0,Ns.jsx)(vt,{className:"mr-2"})," Assign Task"]})]}),(0,Ns.jsx)("hr",{className:"my-6"}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Pending Tasks"}),(0,Ns.jsx)("div",{className:"overflow-x-auto rounded-lg shadow",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-100",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length>0?s.map(e=>{var t;return(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.worker?e.worker.name:"N/A"}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.department?e.department.name:"N/A"}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[null===(t=e.topic)||void 0===t?void 0:t.name," ",e.subTopicName?" - ".concat(e.subTopicName):""]}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.points}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Ns.jsxs)("button",{onClick:()=>{return t=e._id,X("Are you sure you want to mark this task as completed?"),V(()=>async()=>{try{await ws.put("/admin/tasks/complete/".concat(t)),z({type:"success",message:"Task marked as completed successfully!"}),J()}catch(r){var e,n;z({type:"error",message:(null===(e=r.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||"Failed to mark task as completed."})}finally{G(!1)}}),void G(!0);var t},className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,Ns.jsx)(Ge,{className:"mr-2"})," Complete"]})})]},e._id)}):(0,Ns.jsx)("tr",{children:(0,Ns.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No pending tasks found."})})})]})})]}),(0,Ns.jsx)("hr",{className:"my-6"}),(0,Ns.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Task Topics"}),(0,Ns.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,Ns.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold text-gray-700",children:e.name}),(0,Ns.jsxs)("div",{className:"flex space-x-2",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{var t;g(e),u(e.name),A(e.points),p((null===(t=e.department)||void 0===t?void 0:t._id)||""),v(!0)})(e),className:"p-2 rounded-full bg-yellow-100 text-yellow-700 hover:bg-yellow-200 transition-colors",children:(0,Ns.jsx)(At,{size:18})}),(0,Ns.jsx)("button",{onClick:()=>(e=>{X("Are you sure you want to delete this topic? All associated sub-topics and assigned tasks will also be deleted."),V(()=>async()=>{try{await ws.delete("/admin/tasks/topics/".concat(e)),z({type:"success",message:"Task topic deleted successfully!"}),Y()}catch(r){var t,n;z({type:"error",message:(null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to delete topic."})}finally{G(!1)}}),G(!0)})(e._id),className:"p-2 rounded-full bg-red-100 text-red-700 hover:bg-red-200 transition-colors",children:(0,Ns.jsx)(wt,{size:18})})]})]}),(0,Ns.jsxs)("p",{className:"text-gray-600 text-sm mb-2",children:["Department: ",e.department?e.department.name:"All Departments"," | Points: ",e.points]}),(0,Ns.jsxs)("details",{className:"group mt-4",children:[(0,Ns.jsxs)("summary",{className:"flex items-center justify-between cursor-pointer text-blue-600 hover:text-blue-800 font-medium",children:["Sub-topics (",e.subTopics.length,")",(0,Ns.jsx)("span",{className:"transform transition-transform duration-200 group-open:rotate-90",children:"\u25b6"})]}),(0,Ns.jsxs)("div",{className:"pt-2 pl-4 space-y-2",children:[e.subTopics.length>0?e.subTopics.map(t=>(0,Ns.jsxs)("div",{className:"flex justify-between items-center text-gray-700 text-sm bg-white p-2 rounded-md shadow-xs border border-gray-100",children:[(0,Ns.jsxs)("span",{children:[t.name," (",t.points," pts)"]}),(0,Ns.jsxs)("div",{className:"flex space-x-1",children:[(0,Ns.jsx)("button",{onClick:()=>((e,t)=>{k(e),C(t),y(t.name),N(t.points),_(!0)})(e,t),className:"p-1 rounded-full text-yellow-600 hover:bg-yellow-100 transition-colors",children:(0,Ns.jsx)(At,{size:16})}),(0,Ns.jsx)("button",{onClick:()=>{return n=e._id,r=t._id,X("Are you sure you want to delete this sub-topic? All associated assigned tasks will also be deleted."),V(()=>async()=>{try{await ws.delete("/admin/tasks/topics/".concat(n,"/subtopics/").concat(r)),z({type:"success",message:"Sub-topic deleted successfully!"}),Y()}catch(s){var e,t;z({type:"error",message:(null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to delete sub-topic."})}finally{G(!1)}}),void G(!0);var n,r},className:"p-1 rounded-full text-red-600 hover:bg-red-100 transition-colors",children:(0,Ns.jsx)(wt,{size:16})})]})]},t._id)):(0,Ns.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No sub-topics defined for this topic."}),(0,Ns.jsxs)("button",{onClick:()=>(e=>{k(e),te(),_(!0)})(e),className:"flex items-center mt-3 px-3 py-1 bg-blue-500 text-white text-sm rounded-md hover:bg-blue-600 transition-colors",children:[(0,Ns.jsx)(ft,{className:"mr-1"})," Add Sub-Topic"]})]})]})]},e._id))}),(0,Ns.jsx)(hw,{isOpen:x,onClose:()=>v(!1),title:m?"Edit Task Topic":"Add New Task Topic",children:(0,Ns.jsxs)("div",{className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Topic Name:"}),(0,Ns.jsx)("input",{type:"text",className:"shadow appearance-none border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",value:d,onChange:e=>u(e.target.value),placeholder:"Enter topic name"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Points:"}),(0,Ns.jsx)("input",{type:"number",className:"shadow appearance-none border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",value:h,onChange:e=>A(Number(e.target.value)),min:"0"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Department (Optional):"}),(0,Ns.jsxs)("select",{className:"shadow border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",value:f,onChange:e=>p(e.target.value),children:[(0,Ns.jsx)("option",{value:"",children:"All Departments"}),i.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Ns.jsx)("button",{onClick:async()=>{try{const e={name:d,points:h,department:f||null};m?(await ws.put("/admin/tasks/topics/".concat(m._id),e),z({type:"success",message:"Task topic updated successfully!"})):(await ws.post("/admin/tasks/topics",e),z({type:"success",message:"Task topic created successfully!"})),v(!1),ee(),Y()}catch(n){var e,t;z({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to save topic."})}},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors duration-200",children:m?"Update Topic":"Create Topic"})]})}),(0,Ns.jsx)(hw,{isOpen:S,onClose:()=>_(!1),title:j?'Edit Sub-topic for "'.concat(null===B||void 0===B?void 0:B.name,'"'):'Add Sub-topic for "'.concat(null===B||void 0===B?void 0:B.name,'"'),children:(0,Ns.jsxs)("div",{className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Sub-topic Name:"}),(0,Ns.jsx)("input",{type:"text",className:"shadow appearance-none border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",value:b,onChange:e=>y(e.target.value),placeholder:"Enter sub-topic name"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Points:"}),(0,Ns.jsx)("input",{type:"number",className:"shadow appearance-none border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",value:w,onChange:e=>N(Number(e.target.value)),min:"0"})]}),(0,Ns.jsx)("button",{onClick:async()=>{if(!B||!B._id)return z({type:"error",message:"Cannot add sub-topic. The parent topic is not selected."}),void _(!1);try{const e={name:b,points:w};j?(await ws.put("/admin/tasks/topics/".concat(B._id,"/subtopics/").concat(j._id),e),z({type:"success",message:"Sub-topic updated successfully!"})):(await ws.post("/admin/tasks/topics/".concat(B._id,"/subtopics"),e),z({type:"success",message:"Sub-topic added successfully!"})),_(!1),te(),Y()}catch(n){var e,t;z({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to save sub-topic."})}},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors duration-200",children:j?"Update Sub-topic":"Add Sub-topic"})]})}),(0,Ns.jsx)(hw,{isOpen:M,onClose:()=>Q(!1),title:"Assign New Task",children:(0,Ns.jsxs)("div",{className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Select Topic:"}),(0,Ns.jsxs)("select",{className:"shadow border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",value:E,onChange:e=>{F(e.target.value),I([])},children:[(0,Ns.jsx)("option",{value:"",children:"-- Select a Topic --"}),t.map(e=>(0,Ns.jsxs)("option",{value:e._id,children:[e.name," (",e.points," pts)"]},e._id))]})]}),E&&ie.length>0&&(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Select Sub-topics (Optional):"}),(0,Ns.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto border p-3 rounded-md",children:ie.map(e=>(0,Ns.jsxs)("label",{className:"flex items-center",children:[(0,Ns.jsx)("input",{type:"checkbox",value:e._id,checked:T.includes(e._id),onChange:se,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,Ns.jsxs)("span",{className:"ml-2 text-sm text-gray-700",children:[e.name," (",e.points," pts)"]})]},e._id))})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("input",{type:"checkbox",id:"isCommonTask",checked:U,onChange:e=>O(e.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,Ns.jsx)("label",{htmlFor:"isCommonTask",className:"ml-2 block text-sm text-gray-900",children:"Assign as Common Task (to all workers in selected department)"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Select Department:"}),(0,Ns.jsxs)("select",{className:"shadow border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",value:P,onChange:e=>{R(e.target.value),L([])},children:[(0,Ns.jsx)("option",{value:"",children:"-- Select a Department --"}),i.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),!U&&P&&(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Select Workers (for specific task):"}),(0,Ns.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto border p-3 rounded-md",children:ae.length>0?ae.map(e=>(0,Ns.jsxs)("label",{className:"flex items-center",children:[(0,Ns.jsx)("input",{type:"checkbox",value:e._id,checked:D.includes(e._id),onChange:re,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,Ns.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e.name})]},e._id)):(0,Ns.jsx)("p",{className:"text-sm text-gray-500 col-span-2",children:"No workers found for this department."})})]}),(0,Ns.jsx)("button",{onClick:async()=>{try{if(U&&!P)return void z({type:"error",message:"Please select a department for common tasks."});if(!U&&0===D.length)return void z({type:"error",message:"Please select at least one worker for specific tasks."});if(!E)return void z({type:"error",message:"Please select a topic to assign."});if(0===T.length)await ws.post("/admin/tasks/assign",{topicId:E,subTopicId:null,workerIds:U?[]:D,departmentId:P,isCommonTask:U});else{const e=T.map(e=>ws.post("/admin/tasks/assign",{topicId:E,subTopicId:e,workerIds:U?[]:D,departmentId:P,isCommonTask:U}));await Promise.all(e)}z({type:"success",message:"Task(s) assigned successfully!"}),Q(!1),ne(),J()}catch(n){var e,t;z({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to assign task."})}},className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors duration-200",children:"Assign Task"})]})}),(0,Ns.jsx)(hw,{isOpen:K,onClose:()=>G(!1),title:"Confirm Action",children:(0,Ns.jsxs)("div",{className:"p-4",children:[(0,Ns.jsx)("p",{className:"text-lg text-gray-700 mb-6",children:q}),(0,Ns.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Ns.jsx)("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:W,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Confirm"})]})]})})]})},AT=()=>{var e,t;const[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)("all"),[u,h]=(0,r.useState)("all"),[A,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,x]=(0,r.useState)(null),[v,b]=(0,r.useState)(null),[y,w]=(0,r.useState)(!1),N=(0,r.useCallback)(async()=>{try{const e={department:c,worker:u,startDate:A,endDate:p},t=await ws.get("/admin/tasks/completed",{params:e});s(t.data.data)}catch(n){var e,t;x({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch completed tasks."})}},[c,u,A,p]),j=(0,r.useCallback)(async()=>{try{const e=await ws.get("/admin/tasks/workers");i(e.data.data)}catch(n){var e,t;x({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch workers."})}},[]),C=(0,r.useCallback)(async()=>{try{const e=await ws.get("/admin/tasks/departments");l(e.data.data)}catch(n){var e,t;x({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch departments."})}},[]);(0,r.useEffect)(()=>{N(),j(),C()},[N,j,C]);return(0,Ns.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,Ns.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Tasks Completed"}),g&&(0,Ns.jsx)(uT,{type:g.type,message:g.message,onClose:()=>x(null)}),(0,Ns.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm mb-6 flex flex-wrap gap-4 items-end",children:[(0,Ns.jsxs)("div",{className:"flex-1 min-w-[150px]",children:[(0,Ns.jsx)("label",{htmlFor:"filterDepartment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,Ns.jsxs)("select",{id:"filterDepartment",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:c,onChange:e=>d(e.target.value),children:[(0,Ns.jsx)("option",{value:"all",children:"All Departments"}),o.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Ns.jsxs)("div",{className:"flex-1 min-w-[150px]",children:[(0,Ns.jsx)("label",{htmlFor:"filterWorker",className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee"}),(0,Ns.jsxs)("select",{id:"filterWorker",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:u,onChange:e=>h(e.target.value),children:[(0,Ns.jsx)("option",{value:"all",children:"All Employees"}),a.filter(e=>{var t;return"all"===c||(null===(t=e.department)||void 0===t?void 0:t._id)===c}).map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Ns.jsxs)("div",{className:"flex-1 min-w-[150px]",children:[(0,Ns.jsx)("label",{htmlFor:"filterStartDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,Ns.jsx)("input",{type:"date",id:"filterStartDate",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:A,onChange:e=>f(e.target.value)})]}),(0,Ns.jsxs)("div",{className:"flex-1 min-w-[150px]",children:[(0,Ns.jsx)("label",{htmlFor:"filterEndDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,Ns.jsx)("input",{type:"date",id:"filterEndDate",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:p,onChange:e=>m(e.target.value)})]})]}),(0,Ns.jsx)("div",{className:"overflow-x-auto rounded-lg shadow",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-100",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed On"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length>0?n.map(e=>{var t;return(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.worker?e.worker.name:"N/A"}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.department?e.department.name:"N/A"}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[null===(t=e.topic)||void 0===t?void 0:t.name," ",e.subTopicName?" - ".concat(e.subTopicName):""]}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.points}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.completedAt?new Date(e.completedAt).toLocaleDateString():"N/A"}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[!e.isCompleted&&(0,Ns.jsxs)("button",{onClick:()=>(e=>{b(e),w(!0)})(e),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,Ns.jsx)(Ke,{className:"mr-2"})," Complete"]}),e.isCompleted&&(0,Ns.jsx)("span",{className:"inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Completed"})]})]},e._id)}):(0,Ns.jsx)("tr",{children:(0,Ns.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No completed tasks found."})})})]})}),(0,Ns.jsx)(hw,{isOpen:y,onClose:()=>w(!1),title:"Confirm Task Completion",children:(0,Ns.jsxs)("div",{className:"p-4",children:[(0,Ns.jsxs)("p",{className:"text-lg text-gray-700 mb-6",children:['Are you sure you want to mark "',(0,Ns.jsxs)("span",{className:"font-semibold",children:[null===v||void 0===v||null===(e=v.topic)||void 0===e?void 0:e.name,null!==v&&void 0!==v&&v.subTopicName?" - ".concat(v.subTopicName):""]}),'" for ',null===v||void 0===v||null===(t=v.worker)||void 0===t?void 0:t.name," as completed?"]}),(0,Ns.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Ns.jsx)("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:async()=>{try{await ws.put("/admin/tasks/complete/".concat(v._id)),x({type:"success",message:"Task marked as completed successfully!"}),w(!1),N()}catch(n){var e,t;x({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to mark task as completed."})}},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Confirm Complete"})]})]})})]})},fT=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[A,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)([]),[g,x]=(0,r.useState)(!1),v=(0,r.useCallback)(async()=>{s(!0);try{const e=await ws.get("/admin/warehouse/store-room");t(e.data),i("")}catch(e){i("Failed to fetch store room items."),console.error(e)}finally{s(!1)}},[]);(0,r.useEffect)(()=>{v()},[v]);const b=e=>{const{name:t,value:n}=e.target;h(e=>(0,$n.A)((0,$n.A)({},e),{},{[t]:n}))},y=()=>{d(!1),h(null)},w=()=>{f(!1),m([])},N=e.filter(e=>e.name.toLowerCase().includes(o.toLowerCase()));return n?(0,Ns.jsxs)("div",{className:"p-4 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading..."})]}):(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold",children:"Store Room"}),(0,Ns.jsxs)("button",{onClick:async()=>{f(!0),x(!0);try{const e=await ws.get("/admin/warehouse/vendor-history");m(e.data)}catch(e){i("Failed to fetch vendor history."),console.error(e)}finally{x(!1)}},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center",children:[(0,Ns.jsx)(rt,{className:"mr-2"}),"Vendor History"]})]}),a&&(0,Ns.jsx)("div",{className:"text-red-500 mb-4",children:a}),(0,Ns.jsx)("div",{className:"mb-4",children:(0,Ns.jsx)("input",{type:"text",placeholder:"Search by material name...",className:"w-full md:w-1/3 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",value:o,onChange:e=>l(e.target.value)})}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Ns.jsx)("thead",{className:"bg-light-gray",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Material Name"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Quantity"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Unit"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Price (per unit)"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Vendor"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Stock Alert Threshold"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{children:N.length>0?N.map(e=>(0,Ns.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.name}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.quantity}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.unit}),(0,Ns.jsxs)("td",{className:"border px-4 py-2",children:["\u20b9",e.price]}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.vendor||"-"}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.stockAlertThreshold}),(0,Ns.jsxs)("td",{className:"border px-4 py-2",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{h((0,$n.A)({},e)),d(!0)})(e),className:"text-blue-600 hover:text-blue-800 mr-3",children:(0,Ns.jsx)(At,{})}),(0,Ns.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this item?"))try{await ws.delete("/admin/warehouse/store-room/".concat(e)),v()}catch(t){i("Failed to delete item."),console.error(t)}})(e._id),className:"text-red-600 hover:text-red-800",children:(0,Ns.jsx)(wt,{})})]})]},e._id)):(0,Ns.jsx)("tr",{children:(0,Ns.jsx)("td",{colSpan:"7",className:"text-center py-4",children:"No items found. Add items via the Raw Materials page."})})})]})}),c&&u&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center",children:(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,Ns.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Item"}),(0,Ns.jsxs)("div",{className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Name"}),(0,Ns.jsx)("input",{type:"text",name:"name",value:u.name,onChange:b,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Quantity"}),(0,Ns.jsx)("input",{type:"text",name:"quantity",value:u.quantity,onChange:b,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Unit"}),(0,Ns.jsx)("input",{type:"text",name:"unit",value:u.unit,onChange:b,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Price"}),(0,Ns.jsx)("input",{type:"text",name:"price",value:u.price,onChange:b,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Vendor"}),(0,Ns.jsx)("input",{type:"text",name:"vendor",value:u.vendor||"",onChange:b,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Stock Alert Threshold"}),(0,Ns.jsx)("input",{type:"number",name:"stockAlertThreshold",value:u.stockAlertThreshold||"",onChange:b,className:"w-full px-3 py-2 border rounded-md"})]})]}),(0,Ns.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,Ns.jsx)("button",{onClick:y,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:async()=>{if(u)try{await ws.put("/admin/warehouse/store-room/".concat(u._id),u),y(),v()}catch(e){i("Failed to update item."),console.error(e)}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update"})]})]})}),A&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h2",{className:"text-xl font-bold",children:"All Vendor History"}),(0,Ns.jsx)("button",{onClick:w,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),g?(0,Ns.jsx)("div",{className:"text-center py-4",children:"Loading vendor history..."}):p.length>0?(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Ns.jsx)("thead",{className:"bg-light-gray",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Material Name"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Vendor Name"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Quantity Received"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Unit"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Date & Time"})]})}),(0,Ns.jsx)("tbody",{children:p.map((e,t)=>(0,Ns.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.materialName}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.vendorName}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.quantityReceived}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.unit}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:new Date(e.receivedDate).toLocaleString()})]},t))})]})}):(0,Ns.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No vendor history found."}),(0,Ns.jsx)("div",{className:"mt-6 flex justify-end",children:(0,Ns.jsx)("button",{onClick:w,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Close"})})]})})]})},pT=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)([]),[u,h]=(0,r.useState)({}),[A,f]=(0,r.useState)(""),[p,m]=(0,r.useState)([]),[g,x]=(0,r.useState)(!1),[v,b]=(0,r.useState)(!1),[y,w]=(0,r.useState)({_id:null,sweetName:"",ingredients:[{name:"",quantity:"",unit:"",price:""}],quantity:"",price:"",unit:""}),[N,j]=(0,r.useState)(!1),C=(0,r.useCallback)(async()=>{s(!0);try{const e=await ws.get("/admin/warehouse/manufacturing");t(e.data),i("")}catch(e){console.error("Failed to fetch manufacturing processes:",e),i("Failed to fetch manufacturing processes. Please check your network or server status.")}finally{s(!1)}},[]);(0,r.useEffect)(()=>{C()},[C]),(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/admin/warehouse/store-room");d(e.data)}catch(a){console.error("Error fetching store room items:",a)}})()},[]),(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/admin/products");m(e.data)}catch(a){console.error("Error fetching all products:",a)}})()},[]);const B=e.filter(e=>e.sweetName.toLowerCase().includes(A.toLowerCase())),k=(e,t,n)=>{const r=[...y.ingredients];r[e]=(0,$n.A)((0,$n.A)({},r[e]),{},{[t]:n}),w(e=>(0,$n.A)((0,$n.A)({},e),{},{ingredients:r}))},S=e=>{const{name:t,value:n}=e.target;w(e=>(0,$n.A)((0,$n.A)({},e),{},{[t]:n}))};return(0,r.useEffect)(()=>{y.ingredients.forEach((e,t)=>{e.name&&e.quantity&&((e,t,n)=>{const r=c.find(t=>t.name.toLowerCase()===e.toLowerCase());if(r){const e=r.quantity,s=parseFloat(t)||0,a=e<s;h(t=>(0,$n.A)((0,$n.A)({},t),{},{[n]:{available:e,required:s,isLow:a}}))}else h(e=>(0,$n.A)((0,$n.A)({},e),{},{[n]:{available:0,required:parseFloat(t)||0,isLow:!0}}))})(e.name,e.quantity,t)})},[y.ingredients]),n?(0,Ns.jsxs)("div",{className:"text-center p-5 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading manufacturing processes..."})]}):(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold",children:"Manufacturing Processes"}),(0,Ns.jsxs)("button",{onClick:()=>(w({_id:null,sweetName:"",ingredients:[{name:"",quantity:"",unit:"",price:""}],quantity:"",price:"",unit:""}),b(!1),void x(!0)),className:"bg-primary text-white py-2 px-4 rounded-md flex items-center hover:bg-primary-dark transition duration-200",children:[(0,Ns.jsx)(ft,{className:"mr-2"})," Add New Process"]})]}),(0,Ns.jsx)("div",{className:"mb-4",children:(0,Ns.jsx)("input",{type:"text",placeholder:"Search manufacturing processes...",className:"w-full md:w-1/3 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",value:A,onChange:e=>f(e.target.value)})}),a&&(0,Ns.jsx)(uT,{message:a,type:"error"}),o&&(0,Ns.jsx)(uT,{message:o,type:"success"}),(0,Ns.jsx)("div",{className:"overflow-x-auto mt-4",children:0!==B.length||n||a?(0,Ns.jsxs)("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[(0,Ns.jsx)("thead",{className:"bg-light-gray",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Sweet Name"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Ingredients"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Output Quantity"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Output Price"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Output Unit"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{children:Array.isArray(B)&&B.map(e=>(0,Ns.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:e.sweetName}),(0,Ns.jsx)("td",{className:"py-3 px-4 text-sm text-gray-700",children:e.ingredients&&e.ingredients.length>0?(0,Ns.jsx)("ul",{className:"list-disc list-inside",children:e.ingredients.map((e,t)=>(0,Ns.jsxs)("li",{children:[e.name,": ",e.quantity,e.unit]},t))}):(0,Ns.jsx)("span",{className:"text-gray-500",children:"No ingredients"})}),(0,Ns.jsxs)("td",{className:"py-3 px-4 text-sm text-gray-700",children:[e.quantity," ",e.unit]}),(0,Ns.jsxs)("td",{className:"py-3 px-4 text-sm text-gray-700",children:["\u20b9",e.price]}),(0,Ns.jsx)("td",{className:"py-3 px-4 text-sm text-gray-700",children:e.unit}),(0,Ns.jsxs)("td",{className:"py-3 px-4 text-sm text-gray-700",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{var t,n;w({_id:e._id,sweetName:e.sweetName,ingredients:e.ingredients&&e.ingredients.length>0?[...e.ingredients]:[{name:"",quantity:"",unit:"",price:""}],quantity:(null===(t=e.quantity)||void 0===t?void 0:t.toString())||"",price:(null===(n=e.price)||void 0===n?void 0:n.toString())||"",unit:e.unit||""}),b(!0),x(!0)})(e),className:"text-blue-600 hover:text-blue-900 mr-3",title:"Edit Process",children:(0,Ns.jsx)(At,{size:18})}),(0,Ns.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this manufacturing process?"))try{await ws.delete("/admin/warehouse/manufacturing/".concat(e)),l("Process deleted successfully"),C()}catch(r){var t,n;console.error("Failed to delete the process:",r),i((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to delete the process.")}})(e._id),className:"text-red-600 hover:text-red-900",title:"Delete Process",children:(0,Ns.jsx)(wt,{size:18})})]})]},e._id))})]}):(0,Ns.jsx)("p",{className:"text-center text-gray-500",children:"No manufacturing processes found. Add a new one!"})}),g&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Ns.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,Ns.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:v?"Edit Manufacturing Process":"Add New Manufacturing Process"}),(0,Ns.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),j(!0),i(""),l("");try{if(y.ingredients.some(e=>!e.name||!e.quantity||!e.unit||!e.price))return i("Please fill in all ingredient fields (name, quantity, unit, price)."),void j(!1);const e={sweetName:y.sweetName,ingredients:y.ingredients.map(e=>({name:e.name,quantity:parseFloat(e.quantity),unit:e.unit,price:parseFloat(e.price)})),quantity:parseFloat(y.quantity),price:parseFloat(y.price),unit:y.unit};let t;v?(t=await ws.put("/admin/warehouse/manufacturing/".concat(y._id),e),l("Manufacturing process updated successfully")):(t=await ws.post("/admin/warehouse/manufacturing",e),l("Manufacturing process added successfully")),x(!1),C(),w({_id:null,sweetName:"",ingredients:[{name:"",quantity:"",unit:"",price:""}],quantity:"",price:"",unit:""})}catch(r){var t,n;console.error("Error saving the process:",r),i((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to save the manufacturing process.")}finally{j(!1)}},children:[(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sweet Name"}),(0,Ns.jsx)("input",{type:"text",name:"sweetName",value:y.sweetName,onChange:S,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary",required:!0,list:"productSuggestions",placeholder:"Start typing to search existing products..."}),(0,Ns.jsx)("datalist",{id:"productSuggestions",children:p.map((e,t)=>(0,Ns.jsx)("option",{value:e.name},t))})]}),(0,Ns.jsx)("h3",{className:"text-lg font-semibold mb-3 mt-6 text-gray-800",children:"Overall Product Details"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Overall Quantity"}),(0,Ns.jsx)("input",{type:"number",name:"quantity",value:y.quantity,onChange:S,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary",required:!0,min:"0",step:"0.01"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,Ns.jsx)("input",{type:"text",name:"unit",value:y.unit,onChange:S,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary",required:!0,placeholder:"e.g., kg, pieces"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),(0,Ns.jsx)("input",{type:"number",name:"price",value:y.price,onChange:S,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary",required:!0,min:"0",step:"0.01"})]})]}),(0,Ns.jsx)("h3",{className:"text-lg font-semibold mb-3 mt-6 text-gray-800",children:"Ingredients"}),y.ingredients.map((e,t)=>(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3 p-3 border rounded-md",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Ns.jsx)("input",{type:"text",value:e.name,onChange:e=>k(t,"name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary",required:!0,list:"ingredientSuggestions".concat(t),placeholder:"e.g., sugar"}),(0,Ns.jsx)("datalist",{id:"ingredientSuggestions".concat(t),children:c.map((e,t)=>(0,Ns.jsx)("option",{value:e.name},t))})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,Ns.jsx)("input",{type:"number",value:e.quantity,onChange:e=>k(t,"quantity",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary",required:!0,min:"0",step:"0.01"}),u[t]&&(0,Ns.jsx)("div",{className:"text-xs mt-1 ".concat(u[t].isLow?"text-red-600":"text-green-600"),children:(u[t].isLow,"Available: ".concat(u[t].available))})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,Ns.jsx)("input",{type:"text",value:e.unit,onChange:e=>k(t,"unit",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary",required:!0,placeholder:"e.g., kg"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price per Unit"}),(0,Ns.jsx)("input",{type:"number",value:e.price,onChange:e=>k(t,"price",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary",required:!0,min:"0",step:"0.01"}),y.ingredients.length>1&&(0,Ns.jsx)("button",{type:"button",onClick:()=>(e=>{if(y.ingredients.length>1){const t=[...y.ingredients];t.splice(e,1),w(e=>(0,$n.A)((0,$n.A)({},e),{},{ingredients:t}))}})(t),className:"mt-2 text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]},t)),(0,Ns.jsx)("button",{type:"button",onClick:()=>{w(e=>(0,$n.A)((0,$n.A)({},e),{},{ingredients:[...e.ingredients,{name:"",quantity:"",unit:"",price:""}]}))},className:"text-primary hover:text-primary-dark text-sm font-medium mb-4",children:"+ Add Ingredient"}),(0,Ns.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Ns.jsx)("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400",disabled:N,children:"Cancel"}),(0,Ns.jsx)("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark disabled:opacity-50",disabled:N,children:N?"Saving...":v?"Update":"Save"})]})]})]})})]})},mT=()=>{const[e,t]=(0,r.useState)(""),[n,s]=(0,r.useState)([{sweetName:"",quantity:"",ingredients:[],ingredientsDisplay:"",price:"",unit:"",manufacturingProcess:null,description:"",isCollapsed:!1}]),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(!0),[A,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(null),v=(0,r.useRef)([]);(0,r.useEffect)(()=>{const e=e=>{if(v.current){v.current.some(t=>t&&t.contains(e.target))||x(null)}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/admin/warehouse/manufacturing");i(e.data)}catch(e){console.error("Error fetching manufacturing products:",e),l("Failed to load manufacturing products for auto-fill. Please ensure the backend is running and the Manufacturing processes are configured."),d("error")}finally{h(!1)}})()},[]);const b=async e=>{try{const t=(await ws.get("/admin/warehouse/store-room")).data,n=[],r=[],s=[];return e.forEach(e=>{const a=t.find(t=>t.name.toLowerCase()===e.name.toLowerCase());a?a.quantity<e.quantity?r.push({name:e.name,required:e.quantity,available:a.quantity}):s.push(e):n.push(e.name)}),{unavailableIngredients:n,insufficientIngredients:r,availableIngredients:s}}catch(t){throw console.error("Error checking ingredient availability:",t),new Error("Failed to check ingredient availability")}},y=()=>{const t=document.getElementById("daily-schedule-content"),n={margin:1,filename:"Daily_Schedule_Multiple_Sweets_".concat(e,".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};fw()().from(t).set(n).save()};return u?(0,Ns.jsxs)("div",{className:"p-4 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading schedule data..."})]}):(0,Ns.jsxs)("div",{className:"container mx-auto p-6 bg-gray-50 min-h-screen",children:[(0,Ns.jsx)("h1",{className:"text-4xl font-extrabold text-gray-800 mb-10 text-center",children:"Create Daily Schedule"}),o&&(0,Ns.jsx)("div",{className:"mb-6",children:(0,Ns.jsx)(uT,{message:o,type:c})}),(0,Ns.jsxs)("div",{id:"daily-schedule-content",className:"p-8 rounded-2xl shadow-xl max-w-2xl mx-auto space-y-6 bg-white border border-gray-200",children:[(0,Ns.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-4 text-center",children:"Daily Schedule"}),(0,Ns.jsx)("div",{className:"space-y-2",children:(0,Ns.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,Ns.jsx)("strong",{children:"Schedule Date:"})," ",e]})}),(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Sweets to Prepare"}),n.filter(e=>""!==e.sweetName.trim()).map((e,t)=>(0,Ns.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,Ns.jsxs)("div",{className:"space-y-2",children:[(0,Ns.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,Ns.jsx)("strong",{children:"Sweet Name:"})," ",e.sweetName]}),(0,Ns.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,Ns.jsx)("strong",{children:"Quantity:"})," ",e.quantity," ",e.unit]}),(0,Ns.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,Ns.jsx)("strong",{children:"Price per Unit:"})," ",e.price]}),e.description&&(0,Ns.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,Ns.jsx)("strong",{children:"Description:"})," ",e.description]})]}),(0,Ns.jsxs)("div",{className:"space-y-2 mt-3",children:[(0,Ns.jsx)("p",{className:"text-lg font-semibold text-gray-700",children:"Ingredients Required:"}),(0,Ns.jsx)("ul",{className:"list-disc list-inside ml-4",children:e.ingredients.length>0?e.ingredients.map((e,t)=>(0,Ns.jsxs)("li",{className:"text-gray-600",children:[e.name,": ",e.quantity,e.unit]},t)):(0,Ns.jsx)("li",{className:"text-gray-600",children:"No ingredients specified."})})]})]},t))]})]}),(0,Ns.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),f(!0),l(null),d(null);if(!n.some(e=>""!==e.sweetName.trim()))return l("Please select at least one sweet."),d("error"),void f(!1);if(!n.every(e=>""===e.sweetName.trim()||e.ingredients.length>0))return l("Some sweets do not have available ingredients in store room."),d("error"),void f(!1);try{const t=n.filter(e=>""!==e.sweetName.trim()),r=[];for(const n of t){const t=await ws.post("/admin/warehouse/daily-schedules",{sweetName:n.sweetName,quantity:n.quantity,ingredients:n.ingredients,price:n.price,unit:n.unit,date:e,description:n.description});r.push(t.data)}l("".concat(t.length," daily schedule(s) created successfully!")),d("success"),m(!0);const s=r.map(e=>e._id);window.createdScheduleIds=s}catch(a){var r,s;console.error("Error creating daily schedule:",a),l((null===(r=a.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Failed to create daily schedule."),d("error")}finally{f(!1)}},className:"bg-white p-8 rounded-2xl shadow-xl max-w-2xl mx-auto space-y-6 border border-gray-200 mt-6",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{htmlFor:"date",className:"block text-lg font-semibold text-gray-700 mb-2",children:"Schedule Date"}),(0,Ns.jsx)("input",{type:"date",id:"date",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition duration-200",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ns.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Sweets to Prepare"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>{if(n.length>0&&n[0].sweetName&&n[0].quantity){const e=[...n];e[0].isCollapsed=!0,s([{sweetName:"",quantity:"",ingredients:[],ingredientsDisplay:"",price:"",unit:"",manufacturingProcess:null,description:"",isCollapsed:!1},...e])}else s([{sweetName:"",quantity:"",ingredients:[],ingredientsDisplay:"",price:"",unit:"",manufacturingProcess:null,description:"",isCollapsed:!1},...n])},className:"bg-indigo-100 text-indigo-700 py-2 px-4 rounded-lg hover:bg-indigo-200 transition-all duration-200 ease-in-out font-medium",children:"+ Add Sweet"})]}),n.map((e,t)=>(0,Ns.jsxs)("div",{className:"border border-gray-200 rounded-xl p-6 relative",children:[n.length>1&&(0,Ns.jsx)("button",{type:"button",onClick:()=>(e=>{if(n.length>1){const t=n.filter((t,n)=>n!==e);s(t)}})(t),className:"absolute top-4 right-4 text-red-500 hover:text-red-700 font-bold",title:"Remove this sweet",children:"\xd7"}),(0,Ns.jsxs)("div",{className:"flex justify-between items-center cursor-pointer pb-2 border-b border-gray-100",onClick:()=>(e=>{const t=[...n];t[e].isCollapsed=!t[e].isCollapsed,s(t)})(t),children:[(0,Ns.jsxs)("div",{children:[e.sweetName?(0,Ns.jsxs)("h4",{className:"text-lg font-semibold text-gray-800",children:[e.sweetName," - ",e.quantity," ",e.unit]}):(0,Ns.jsx)("h4",{className:"text-lg font-semibold text-gray-500",children:"New Sweet Entry"}),e.description&&(0,Ns.jsx)("p",{className:"text-sm text-gray-600 mt-1 truncate max-w-md",children:e.description})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[e.sweetName&&e.quantity&&(0,Ns.jsxs)("span",{className:"mr-2 text-sm text-gray-500",children:["Click to ",e.isCollapsed?"expand":"collapse"]}),(0,Ns.jsx)("svg",{className:"transform transition-transform ".concat(e.isCollapsed?"":"rotate-180"),width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ns.jsx)("path",{d:"M6 9L12 15L18 9",stroke:"#4B5563",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),!e.isCollapsed&&(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsxs)("div",{className:"mt-4",children:[(0,Ns.jsx)("label",{className:"block text-lg font-semibold text-gray-700 mb-2",children:"Sweet Name"}),(0,Ns.jsxs)("div",{className:"relative",ref:e=>{e&&(v.current[t]=e)},children:[(0,Ns.jsxs)("div",{className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition duration-200 bg-white cursor-pointer flex justify-between items-center",onClick:()=>x(g===t?null:t),children:[(0,Ns.jsx)("span",{children:e.sweetName||"Select a sweet name"}),(0,Ns.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,Ns.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})]}),g===t&&(0,Ns.jsx)("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border border-gray-200 max-h-60 overflow-auto",children:Array.isArray(a)&&a.length>0?a.map(e=>(0,Ns.jsx)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>(async(e,t)=>{const r=[...n];r[e].sweetName=t,x(null);const i=a.find(e=>e.sweetName.toLowerCase()===t.toLowerCase());if(i){r[e].quantity=i.quantity||"",r[e].price=i.price||"",r[e].unit=i.unit||"",r[e].manufacturingProcess=i;try{const{unavailableIngredients:t,insufficientIngredients:n,availableIngredients:s}=await b(i.ingredients||[]);let a=[];if(t.length>0&&a.push("Unavailable ingredients: ".concat(t.join(", "))),n.length>0){const e=n.map(e=>"".concat(e.name," (need: ").concat(e.required,", available: ").concat(e.available,")")).join(", ");a.push("Insufficient quantities: ".concat(e))}if(a.length>0?(l("Alert: ".concat(a.join(" | ")," | Proceeding with available ingredients only.")),d("warning")):(l('All ingredients available for "'.concat(i.sweetName,'".')),d("success")),r[e].ingredients=s,s.length>0){const t=s.map(e=>"".concat(e.name," (").concat(e.quantity).concat(e.unit,")")).join(", ");r[e].ingredientsDisplay=t}else r[e].ingredientsDisplay="No ingredients available in store room."}catch(o){l("Failed to check ingredient availability."),d("error")}}else r[e].quantity="",r[e].ingredients=[],r[e].ingredientsDisplay="",r[e].price="",r[e].unit="",r[e].manufacturingProcess=null,t?(l("No matching manufacturing product found."),d("warning")):(l(null),d(null));s(r)})(t,e.sweetName),children:e.sweetName},e._id)):(0,Ns.jsx)("div",{className:"px-4 py-2 text-gray-500",children:"No manufacturing products found"})})]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-lg font-semibold text-gray-700 mb-2",children:"Quantity"}),(0,Ns.jsx)("input",{type:"number",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition duration-200",placeholder:"e.g., 100",value:e.quantity,onChange:e=>(async(e,t)=>{const r=[...n];if(r[e].quantity=t,r[e].manufacturingProcess&&t&&!isNaN(t)){const n=r[e].manufacturingProcess,s=parseFloat(n.quantity),i=parseFloat(t);if(s>0){const t=i/s,o=n.ingredients.map(e=>{const n=parseFloat(e.quantity)*t,r=Math.round(1e3*n)/1e3;return(0,$n.A)((0,$n.A)({},e),{},{quantity:r})});try{const{unavailableIngredients:t,insufficientIngredients:n,availableIngredients:s}=await b(o);let a=[];if(t.length>0&&a.push("Unavailable ingredients: ".concat(t.join(", "))),n.length>0){const e=n.map(e=>"".concat(e.name," (need: ").concat(e.required,", available: ").concat(e.available,")")).join(", ");a.push("Insufficient quantities: ".concat(e))}if(a.length>0?(l("Alert: ".concat(a.join(" | ")," | Proceeding with available ingredients only.")),d("warning")):(l('All ingredients available for "'.concat(r[e].sweetName,'".')),d("success")),r[e].ingredients=s,s.length>0){const t=s.map(e=>"".concat(e.name," (").concat(e.quantity).concat(e.unit,")")).join(", ");r[e].ingredientsDisplay=t}else r[e].ingredientsDisplay="No ingredients available in store room."}catch(a){l("Failed to check ingredient availability."),d("error")}}}s(r)})(t,e.target.value),required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-lg font-semibold text-gray-700 mb-2",children:"Unit"}),(0,Ns.jsx)("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition duration-200",value:e.unit,readOnly:!0,placeholder:"Auto-filled from Manufacturing"})]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-lg font-semibold text-gray-700 mb-2",children:"Price per Unit"}),(0,Ns.jsx)("input",{type:"number",className:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition duration-200",value:e.price,readOnly:!0,placeholder:"Auto-filled from Manufacturing"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-lg font-semibold text-gray-700 mb-2",children:"Ingredients Required"}),(0,Ns.jsx)("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition duration-200",value:e.ingredientsDisplay,readOnly:!0,placeholder:"Auto-filled from Manufacturing"})]})]}),(0,Ns.jsxs)("div",{className:"mt-4",children:[(0,Ns.jsx)("label",{className:"block text-lg font-semibold text-gray-700 mb-2",children:"Description/Notes"}),(0,Ns.jsx)("textarea",{className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition duration-200",placeholder:"e.g., For order #123, Special Diwali package, etc.",value:e.description,onChange:e=>((e,t,r)=>{const a=[...n];a[e][t]=r,s(a)})(t,"description",e.target.value),rows:"3"})]})]})]},t))]}),p?(0,Ns.jsx)("button",{type:"button",onClick:async()=>{try{const e=window.createdScheduleIds;if(!e||0===e.length)throw new Error("No daily schedules found to process");for(const t of e){const e=(await ws.get("/admin/warehouse/daily-schedules/".concat(t))).data,n={scheduleId:e._id,date:e.date,sweetName:e.sweetName,ingredients:e.ingredients.map(e=>({materialName:e.name,quantityUsed:e.quantity,unit:e.unit,pricePerUnit:e.price||0}))};await ws.post("/admin/warehouse/outgoing-materials",n)}setTimeout(()=>{y(),setTimeout(()=>{t(""),s([{sweetName:"",quantity:"",ingredients:[],ingredientsDisplay:"",price:"",unit:""}]),m(!1)},1e3)},500),l("PDF generated and ingredients automatically deducted from store room!"),d("success")}catch(r){var e,n;console.error("Error processing schedule:",r),l((null===(e=r.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||"PDF generated but failed to deduct ingredients from store room."),d("warning"),setTimeout(()=>{y()},500)}},className:"w-full bg-green-700 text-white py-3 rounded-xl hover:bg-green-800 transition-all duration-300 ease-in-out font-bold text-lg shadow-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Create PDF & Deduct Ingredients"}):(0,Ns.jsx)("button",{type:"submit",className:"w-full bg-indigo-700 text-white py-3 rounded-xl hover:bg-indigo-800 transition-all duration-300 ease-in-out font-bold text-lg shadow-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",disabled:A,children:A?"Creating Schedule...":"Submit Daily Schedule"})]})]})},gT=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)("all"),A=(0,r.useCallback)(async()=>{s(!0);try{const e=await ws.get("/admin/warehouse/outgoing-materials");t(e.data)}catch(e){i("Failed to fetch outgoing materials.")}finally{s(!1)}},[]);(0,r.useEffect)(()=>{A()},[A]);const f=e.filter(e=>e.materialName&&e.materialName.toLowerCase().includes(c.toLowerCase())||e.manufacturedProductName&&e.manufacturedProductName.toLowerCase().includes(c.toLowerCase())).filter(e=>"all"===u||e.status===u).sort((e,t)=>new Date(t.dateUsed||t.usedDate)-new Date(e.dateUsed||e.usedDate));return n?(0,Ns.jsxs)("div",{className:"p-4 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading outgoing materials..."})]}):(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Outgoing Materials (Ingredients Used)"}),(0,Ns.jsx)("p",{className:"text-gray-600 mb-6",children:"History of ingredients used in production processes with complete details."}),a&&(0,Ns.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:a}),o&&(0,Ns.jsx)("div",{className:"text-green-700 bg-green-100 p-3 rounded mb-4",children:o}),(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-4",children:[(0,Ns.jsx)("input",{type:"text",placeholder:"Search materials or products...",className:"w-full md:w-1/3 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",value:c,onChange:e=>d(e.target.value)}),(0,Ns.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,Ns.jsx)("option",{value:"all",children:"All Status"}),(0,Ns.jsx)("option",{value:"Pending",children:"Pending"}),(0,Ns.jsx)("option",{value:"Completed",children:"Completed"})]})]}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Ns.jsx)("thead",{className:"bg-light-gray",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Material Name"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Manufactured Product"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Quantity Used"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Unit"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Price per Unit"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Total Cost"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Date Used"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Manufacturing Process"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Daily Schedule"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Status"})]})}),(0,Ns.jsx)("tbody",{children:f.length>0?f.map(e=>(0,Ns.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.materialName}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.manufacturedProductName||e.scheduleReference}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.quantityUsed}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.unit}),(0,Ns.jsxs)("td",{className:"border px-4 py-2",children:["\u20b9",e.pricePerUnit]}),(0,Ns.jsxs)("td",{className:"border px-4 py-2",children:["\u20b9",e.totalCost?e.totalCost.toFixed(2):(e.quantityUsed*e.pricePerUnit).toFixed(2)]}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:new Date(e.dateUsed||e.usedDate).toLocaleDateString()}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.manufacturingProcessReference}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.dailyScheduleReference}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:(0,Ns.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Completed"===e.status?"bg-green-100 text-green-800":"Pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})})]},e._id)):(0,Ns.jsx)("tr",{children:(0,Ns.jsx)("td",{colSpan:"10",className:"text-center py-4",children:"No outgoing materials found."})})})]})})]})},xT=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[A,f]=(0,r.useState)(""),p=(0,r.useCallback)(async()=>{s(!0);try{const e=await ws.get("/admin/warehouse/material-stock-alerts");t(e.data),i("")}catch(e){i("Failed to fetch material stock alerts."),console.error(e)}finally{s(!1)}},[]);(0,r.useEffect)(()=>{p()},[p]);const m=()=>{d(!1),h(null)};return n?(0,Ns.jsxs)("div",{className:"p-4 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading Alerts..."})]}):(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Material Stock Alerts"}),a&&(0,Ns.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:a}),o&&(0,Ns.jsx)("div",{className:"text-green-700 bg-green-100 p-3 rounded mb-4",children:o}),0===e.length&&!n&&(0,Ns.jsxs)("div",{className:"text-center py-12",children:[(0,Ns.jsx)(ut,{className:"mx-auto text-6xl text-green-500"}),(0,Ns.jsx)("h2",{className:"mt-4 text-xl font-semibold text-gray-700",children:"All Good!"}),(0,Ns.jsx)("p",{className:"text-gray-500 mt-2",children:"There are no material stock alerts at the moment."})]}),(0,Ns.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,Ns.jsxs)("div",{className:"border rounded-lg p-4 flex flex-col justify-between shadow-sm hover:shadow-lg transition-shadow",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"font-bold text-lg text-gray-800",children:e.name}),(0,Ns.jsxs)("p",{className:"text-sm text-gray-500",children:["Threshold: ",e.stockAlertThreshold," ",e.unit]}),(0,Ns.jsxs)("div",{className:"my-3",children:[(0,Ns.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:[e.quantity," ",(0,Ns.jsx)("span",{className:"text-base font-normal text-gray-600",children:e.unit})]}),(0,Ns.jsx)("p",{className:"text-xs text-red-500",children:"Current Stock is low"})]})]}),(0,Ns.jsxs)("button",{onClick:()=>(h(e),d(!0),void f("")),className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 flex items-center justify-center gap-2 transition-colors",children:[(0,Ns.jsx)(ft,{}),"Add Stock"]})]},e._id))}),c&&u&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center",children:(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[(0,Ns.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Add Stock for ",u.name]}),(0,Ns.jsxs)("p",{className:"text-sm mb-4",children:["Current Stock: ",u.quantity," ",u.unit]}),(0,Ns.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!u||!A||Number(A)<=0)i("Please enter a valid quantity.");else try{await ws.post("/admin/warehouse/raw-materials",{name:u.name,quantity:A}),l('Stock for "'.concat(u.name,'" has been updated.')),m(),p()}catch(t){i("Failed to update stock."),console.error(t)}},children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Quantity to Add"}),(0,Ns.jsx)("input",{type:"number",value:A,onChange:e=>f(e.target.value),className:"w-full mt-1 px-3 py-2 border rounded-md",placeholder:"e.g., 50",autoFocus:!0,required:!0})]}),(0,Ns.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,Ns.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Ns.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Stock"})]})]})]})})]})},vT=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[a,i]=(0,r.useState)(""),[o,l]="",[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[A,f]=(0,r.useState)(""),p=(0,r.useCallback)(async()=>{s(!0);try{const e=await ws.get("/admin/warehouse/packing-materials/alerts");t(e.data),i("")}catch(e){i("Failed to fetch packing material stock alerts."),console.error(e)}finally{s(!1)}},[]);(0,r.useEffect)(()=>{p()},[p]);const m=()=>{d(!1),h(null)};return n?(0,Ns.jsxs)("div",{className:"p-4 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading Alerts..."})]}):(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold",children:"Packing Material Stock Alerts"}),(0,Ns.jsx)("button",{onClick:p,className:"p-2 rounded-full hover:bg-light-gray",children:(0,Ns.jsx)(gt,{className:"transition-transform ".concat(n?"animate-spin":"")})})]}),a&&(0,Ns.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:a}),o&&(0,Ns.jsx)("div",{className:"text-green-700 bg-green-100 p-3 rounded mb-4",children:o}),0!==e.length||n?(0,Ns.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,Ns.jsxs)("div",{className:"border border-red-200 bg-red-50 rounded-lg p-4 flex flex-col justify-between shadow-sm hover:shadow-lg transition-shadow",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"font-bold text-lg text-gray-800",children:e.name}),(0,Ns.jsxs)("p",{className:"text-sm text-gray-500",children:["Threshold: ",e.stockAlertThreshold]}),(0,Ns.jsxs)("div",{className:"my-3",children:[(0,Ns.jsx)("p",{className:"text-2xl font-bold text-red-600",children:e.quantity}),(0,Ns.jsx)("p",{className:"text-xs text-red-500",children:"Current Stock is low"})]})]}),(0,Ns.jsxs)("button",{onClick:()=>(h(e),d(!0),void f("")),className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 flex items-center justify-center gap-2 transition-colors",children:[(0,Ns.jsx)(ft,{}),"Add Stock"]})]},e._id))}):(0,Ns.jsxs)("div",{className:"text-center py-12",children:[(0,Ns.jsx)(ut,{className:"mx-auto text-6xl text-green-500"}),(0,Ns.jsx)("h2",{className:"mt-4 text-xl font-semibold text-gray-700",children:"All Good!"}),(0,Ns.jsx)("p",{className:"text-gray-500 mt-2",children:"There are no packing material stock alerts."})]}),c&&u&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[(0,Ns.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Add Stock for ",u.name]}),(0,Ns.jsxs)("p",{className:"text-sm mb-4",children:["Current Stock: ",u.quantity]}),(0,Ns.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!u||!A||Number(A)<=0)i("Please enter a valid quantity to add.");else try{const e=u.quantity+Number(A);await ws.put("/admin/warehouse/packing-materials/".concat(u._id),(0,$n.A)((0,$n.A)({},u),{},{quantity:e})),l('Stock for "'.concat(u.name,'" has been updated successfully.')),m(),p()}catch(t){i("Failed to update stock."),console.error(t)}},children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Quantity to Add"}),(0,Ns.jsx)("input",{type:"number",value:A,onChange:e=>f(e.target.value),className:"w-full mt-1 px-3 py-2 border rounded-md",placeholder:"e.g., 100",autoFocus:!0,required:!0,min:"1"})]}),(0,Ns.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,Ns.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Ns.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Stock"})]})]})]})})]})},bT=()=>{var e;const[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[h,A]=(0,r.useState)(!0),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),x=(0,r.useCallback)(async()=>{A(!0);try{const[e,t]=await Promise.all([ws.get("/admin/warehouse/packing-materials"),ws.get("/admin/warehouse/packing-materials/outgoing")]);n(e.data.filter(e=>e.quantity>0)),a(t.data),p("")}catch(e){p("Failed to fetch data")}finally{A(!1)}},[]);(0,r.useEffect)(()=>{x()},[x]);return h?(0,Ns.jsxs)("div",{className:"p-4 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading..."})]}):(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Outgoing Packing Materials"}),f&&(0,Ns.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:f}),m&&(0,Ns.jsx)("div",{className:"text-green-700 bg-green-100 p-3 rounded mb-4",children:m}),(0,Ns.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,Ns.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Select Outgoing Packing Materials"}),(0,Ns.jsx)("form",{onSubmit:async e=>{e.preventDefault();try{await ws.post("/admin/warehouse/packing-materials/outgoing",{materialName:i,quantityUsed:parseFloat(l),notes:d}),g("Outgoing material recorded successfully"),o(""),c(""),u(""),x()}catch(r){var t,n;p((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to record outgoing material")}},children:(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,Ns.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"px-3 py-2 border rounded-md",required:!0,children:[(0,Ns.jsx)("option",{value:"",children:"Select Material"}),t.map(e=>(0,Ns.jsxs)("option",{value:e.name,children:[e.name," (Stock: ",e.quantity,")"]},e._id))]}),(0,Ns.jsx)("input",{type:"number",placeholder:"Quantity to Use",value:l,onChange:e=>c(e.target.value),className:"px-3 py-2 border rounded-md",required:!0,min:"0.01",step:"0.01",max:(null===(e=t.find(e=>e.name===i))||void 0===e?void 0:e.quantity)||0}),(0,Ns.jsx)("input",{type:"text",placeholder:"Notes (optional)",value:d,onChange:e=>u(e.target.value),className:"px-3 py-2 border rounded-md"}),(0,Ns.jsx)("button",{type:"submit",className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700",disabled:!i||!l,children:"Record Outgoing"})]})}),(0,Ns.jsxs)("div",{className:"mt-4",children:[(0,Ns.jsx)("h3",{className:"text-md font-medium mb-2",children:"Available Packing Materials:"}),(0,Ns.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:t.map(e=>(0,Ns.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,Ns.jsx)("div",{className:"font-medium",children:e.name}),(0,Ns.jsxs)("div",{className:"text-sm text-gray-600",children:["Stock: ",e.quantity]}),(0,Ns.jsxs)("div",{className:"text-sm text-gray-600",children:["Price: \u20b9",e.price]}),e.quantity<=e.stockAlertThreshold&&(0,Ns.jsx)("div",{className:"text-xs text-red-600 mt-1",children:"\u26a0\ufe0f Low Stock Alert"})]},e._id))})]})]}),(0,Ns.jsxs)("div",{className:"overflow-x-auto",children:[(0,Ns.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Outgoing Records History"}),(0,Ns.jsxs)("table",{className:"min-w-full bg-white border",children:[(0,Ns.jsx)("thead",{className:"bg-gray-100",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Material Name"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Quantity Used"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Price per Unit"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Total Value"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Date Used"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Notes"})]})}),(0,Ns.jsx)("tbody",{children:s.length>0?s.map(e=>(0,Ns.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.materialName}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.quantityUsed}),(0,Ns.jsxs)("td",{className:"border px-4 py-2",children:["\u20b9",e.pricePerUnit]}),(0,Ns.jsxs)("td",{className:"border px-4 py-2",children:["\u20b9",(e.quantityUsed*e.pricePerUnit).toFixed(2)]}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:new Date(e.usedDate).toLocaleDateString()}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.notes||"-"})]},e._id)):(0,Ns.jsx)("tr",{children:(0,Ns.jsx)("td",{colSpan:"6",className:"text-center py-4 text-gray-500",children:"No outgoing records found"})})})]})]})]})},yT=e=>{let{onReturnSuccess:t}=e;const[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)({productName:"",batchNumber:"",quantityReturned:"",reasonForReturn:"Damaged",source:"Factory",remarks:""}),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/admin/products",{params:{showAdmin:!0},headers:{"Content-Type":"application/json"},withCredentials:!0});s(e.data),l("")}catch(e){console.error("Failed to fetch products:",e),l("Failed to load products. Check your API connection.")}})()},[]);const A=e=>{const{name:t,value:n}=e.target;i(e=>(0,$n.A)((0,$n.A)({},e),{},{[t]:n}))};return(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md h-full",children:[(0,Ns.jsxs)("h3",{className:"text-xl font-semibold mb-4 flex items-center text-primary",children:[(0,Ns.jsx)(Te,{className:"mr-2"})," Return Product Form"]}),c&&(0,Ns.jsxs)("div",{className:"bg-green-100 text-green-700 p-3 rounded-md mb-4 flex items-center",children:[(0,Ns.jsx)(Ke,{className:"mr-2"}),c]}),o&&(0,Ns.jsxs)("div",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4 flex items-center",children:[(0,Ns.jsx)(Ft,{className:"mr-2"}),o]}),(0,Ns.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(""),d(""),h(!0);try{await ws.post("/admin/warehouse/returns",a),d("Product return registered successfully!"),i({productName:"",batchNumber:"",quantityReturned:"",reasonForReturn:"Damaged",source:"Factory",remarks:""}),t()}catch(n){console.error("Failed to register return:",n),l("Failed to register return. Please try again.")}finally{h(!1)}},className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Product Name"}),(0,Ns.jsxs)("select",{name:"productName",value:a.productName,onChange:A,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50",children:[(0,Ns.jsx)("option",{value:"",children:"Select a product"}),n.map(e=>(0,Ns.jsx)("option",{value:e.name,children:e.name},e._id))]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Batch Number (Optional)"}),(0,Ns.jsx)("input",{type:"text",name:"batchNumber",value:a.batchNumber,onChange:A,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity Returned"}),(0,Ns.jsx)("input",{type:"number",name:"quantityReturned",value:a.quantityReturned,onChange:A,required:!0,min:"1",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Reason for Return"}),(0,Ns.jsxs)("select",{name:"reasonForReturn",value:a.reasonForReturn,onChange:A,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50",children:[(0,Ns.jsx)("option",{value:"Damaged",children:"Damaged"}),(0,Ns.jsx)("option",{value:"Expired",children:"Expired"}),(0,Ns.jsx)("option",{value:"Overproduction",children:"Overproduction"}),(0,Ns.jsx)("option",{value:"Customer Return",children:"Customer Return"})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Source"}),(0,Ns.jsxs)("select",{name:"source",value:a.source,onChange:A,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50",children:[(0,Ns.jsx)("option",{value:"Factory",children:"Factory"}),(0,Ns.jsx)("option",{value:"Customer",children:"Customer"}),(0,Ns.jsx)("option",{value:"Shop",children:"Shop"})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks (Optional)"}),(0,Ns.jsx)("textarea",{name:"remarks",value:a.remarks,onChange:A,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50"})]}),(0,Ns.jsx)("button",{type:"submit",disabled:u,className:"w-full py-2 px-4 rounded-md text-white font-semibold transition-colors ".concat(u?"bg-gray-400":"bg-primary hover:bg-opacity-90"),children:u?"Registering...":"Register Return"})]})]})},wT=e=>{let{refresh:t}=e;const[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)("");if((0,r.useEffect)(()=>{(async()=>{try{const e=(await ws.get("/admin/warehouse/returns")).data.filter(e=>!e.shopId);s(e),i(e)}catch(e){d("Failed to fetch return history")}finally{l(!1)}})()},[t]),(0,r.useEffect)(()=>{let e=[...n];u&&(e=e.filter(e=>new Date(e.dateOfReturn)>=new Date(u))),A&&(e=e.filter(e=>{const t=new Date(e.dateOfReturn),n=new Date(A);return n.setHours(23,59,59,999),t<=n})),i(e)},[u,A,n]),o)return(0,Ns.jsxs)("div",{className:"p-6 text-center flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading..."})]});const p=e=>{const t=new Date;let n=new Date,r=new Date;switch(e){case"daily":n=new Date(t),r=new Date(t);break;case"weekly":const e=t.getDay();n=new Date(t),n.setDate(t.getDate()-e),r=new Date(n),r.setDate(n.getDate()+6);break;case"monthly":n=new Date(t.getFullYear(),t.getMonth(),1),r=new Date(t.getFullYear(),t.getMonth()+1,0);break;case"yearly":n=new Date(t.getFullYear(),0,1),r=new Date(t.getFullYear(),11,31);break;default:return}const s=e=>e.toISOString().split("T")[0];h(s(n)),f(s(r))};return(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[c&&(0,Ns.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:c}),(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,Ns.jsx)(rt,{className:"mr-2"})," Return Products History"]}),(0,Ns.jsxs)("button",{onClick:()=>{const e={};u&&(e.dateFrom=u),A&&(e.dateTo=A),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(new Date).toLocaleDateString(),r=e.length,s=e.reduce((e,t)=>e+(t.quantityReturned||0),0),a={};e.forEach(e=>{const t=e.reasonForReturn||"N/A";a[t]||(a[t]={count:0,totalQuantity:0}),a[t].count++,a[t].totalQuantity+=e.quantityReturned||0});const i=Object.keys(a).map(e=>{const t=a[e];return'\n      <tr>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">'.concat(e,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 14px;">').concat(t.count,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px;">').concat(t.totalQuantity,"</td>\n      </tr>\n    ")}).join(""),o=e.map(e=>'\n      <tr>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">'.concat(e.returnId||"N/A",'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">').concat(e.productName||"N/A",'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; text-align: center; font-size: 14px;">').concat(e.quantityReturned||0,'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">').concat(e.reasonForReturn||"N/A",'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">').concat(e.source||"N/A",'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">').concat(e.dateOfReturn?new Date(e.dateOfReturn).toLocaleDateString():"N/A",'</td>\n        <td style="padding: 8px; border: 1px solid #ddd; font-size: 14px;">').concat(e.remarks||"-","</td>\n      </tr>\n    ")).join(""),l=[];t.date&&l.push("Date: ".concat(t.date)),t.reason&&l.push("Reason: ".concat(t.reason));const c=l.length>0?'<p style="margin: 8px 0; font-size: 16px;"><strong>Filters Applied:</strong> '.concat(l.join(", "),"</p>"):"",d='\n    <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 1000px; margin: 0 auto;">\n      \x3c!-- Header --\x3e\n      <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #333; padding-bottom: 20px;">\n        <h1 style="color: #333; margin: 0; font-size: 32px;">The Sweet Hub</h1>\n        <p style="color: #666; font-size: 16px; margin: 10px 0 5px 0;">156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006</p>\n        <p style="color: #666; font-size: 16px; margin: 5px 0;">Phone: 7339200636</p>\n      </div>\n      \n      <div style="text-align: center; margin-bottom: 30px;">\n        <h2 style="color: #333; margin: 0; font-size: 28px;">RETURN PRODUCTS REPORT</h2>\n        <p style="color: #666; font-size: 18px; margin: 15px 0;">\n          Generated on '.concat(n,"\n        </p>\n        ").concat(c,'\n      </div>\n      \n      \x3c!-- Summary --\x3e\n      <div style="margin-bottom: 30px; background-color: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #dee2e6;">\n        <h3 style="color: #333; margin-top: 0; font-size: 20px;">Report Summary</h3>\n        <div style="display: flex; justify-content: space-around; text-align: center;">\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Returns</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(r,'</p>\n          </div>\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Quantity</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(s,'</p>\n          </div>\n        </div>\n      </div>\n      \n      \x3c!-- Return Reasons Summary --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Returns by Reason</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Reason for Return</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: center; font-size: 16px; font-weight: bold;">Count</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: right; font-size: 16px; font-weight: bold;">Total Quantity</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(i,'\n          </tbody>\n        </table>\n      </div>\n      \n      \x3c!-- Detailed Returns --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Detailed Return Records</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Return ID</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Product Name</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 14px; font-weight: bold;">Quantity</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Reason</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Source</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Date</th>\n              <th style="padding: 10px; border: 1px solid #ddd; text-align: left; font-size: 14px; font-weight: bold;">Remarks</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(o,'\n          </tbody>\n        </table>\n      </div>\n      \n      <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; text-align: center;">\n        <p style="color: #777; font-size: 14px; margin: 0;">\n          Generated on ').concat(n," at ").concat((new Date).toLocaleTimeString(),'\n        </p>\n        <p style="color: #777; font-size: 14px; margin: 5px 0 0 0;">\n          Report generated by The Sweet Hub Return Products Management System\n        </p>\n      </div>\n    </div>\n  '),u={margin:15,filename:"return_products_report_".concat(n.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};fw()().from(d).set(u).save()}(a,e)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center",disabled:0===a.length,children:[(0,Ns.jsx)(Ye,{className:"mr-2"}),"Download PDF"]})]}),(0,Ns.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,Ns.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ns.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"From:"}),(0,Ns.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),(0,Ns.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ns.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"To:"}),(0,Ns.jsx)("input",{type:"date",value:A,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),(0,Ns.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Ns.jsx)("button",{onClick:()=>p("daily"),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"Today"}),(0,Ns.jsx)("button",{onClick:()=>p("weekly"),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"This Week"}),(0,Ns.jsx)("button",{onClick:()=>p("monthly"),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"This Month"}),(0,Ns.jsx)("button",{onClick:()=>p("yearly"),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"This Year"})]})]}),(u||A)&&(0,Ns.jsx)("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,Ns.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("span",{className:"text-blue-800 font-medium",children:"Date Range:"}),(0,Ns.jsx)("span",{className:"text-blue-700 ml-2",children:u&&A?"".concat(new Date(u).toLocaleDateString()," to ").concat(new Date(A).toLocaleDateString()):u?"From: ".concat(new Date(u).toLocaleDateString()):"To: ".concat(new Date(A).toLocaleDateString())}),(0,Ns.jsxs)("span",{className:"text-blue-700 ml-3",children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Total Returns:"})," ",a.length]})]}),(0,Ns.jsx)("button",{onClick:()=>{h(""),f("")},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Clear Dates"})]})})]}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Ns.jsx)("thead",{className:"bg-gray-100",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Return ID"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Product Name"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Quantity"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Reason"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Source"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Date"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Remarks"})]})}),(0,Ns.jsx)("tbody",{children:n.map(e=>(0,Ns.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.returnId}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.productName}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.quantityReturned}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.reasonForReturn}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.source}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:new Date(e.dateOfReturn).toLocaleDateString()}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.remarks||"-"})]},e._id))})]})})]})},NT=()=>{const[e,t]=(0,r.useState)(!1),[n,s]=(0,r.useState)(!1);return(0,Ns.jsxs)("div",{className:"p-6 h-full flex flex-col",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Ns.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\ud83d\udce6 Return Products Module"}),(0,Ns.jsxs)("button",{onClick:()=>s(!0),className:"flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,Ns.jsx)(rt,{className:"mr-2"})," View History"]})]}),(0,Ns.jsx)("div",{className:"flex-1",children:(0,Ns.jsx)(yT,{onReturnSuccess:()=>{t(e=>!e)}})}),n&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center border-b p-4",children:[(0,Ns.jsx)("h2",{className:"text-xl font-bold",children:"Return Products History"}),(0,Ns.jsx)("button",{onClick:()=>s(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,Ns.jsx)("div",{className:"overflow-y-auto flex-1",children:(0,Ns.jsx)(wT,{refresh:e})})]})})]})},jT=["value","onChange","className"],CT=e=>{let{value:t,onChange:n,className:s=""}=e,a=yF(e,jT);const[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[h,A]=(0,r.useState)(!1),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[x,v]=(0,r.useState)(""),[b,y]=(0,r.useState)([]),[w,N]=(0,r.useState)([]),[j,C]=(0,r.useState)(""),B=(0,r.useRef)(null),k=(0,r.useRef)(null),S=(0,r.useRef)(null),_=async()=>{try{const e=await ws.get("/admin/warehouse/packing-materials");y(e.data),N(e.data)}catch(e){console.error("Failed to fetch packing materials:",e)}};(0,r.useEffect)(()=>{_()},[]),(0,r.useEffect)(()=>{if(j){const e=b.filter(e=>e.name.toLowerCase().includes(j.toLowerCase()));N(e)}else N(b)},[j,b]),(0,r.useEffect)(()=>{const e=e=>{B.current&&!B.current.contains(e.target)&&(o(!1),A(!1),p(""),C(""),v("")),l&&k.current&&!k.current.contains(e.target)&&(c(!1),u(null))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[l]);const E=async e=>{if(e.stopPropagation(),f.trim()){g(!0),v("");try{if(b.find(e=>e.name.toLowerCase()===f.trim().toLowerCase()))return v("Material already exists"),void g(!1);await ws.post("/admin/warehouse/packing-materials",{name:f.trim(),quantity:0,price:0,stockAlertThreshold:0});await _(),n(f.trim()),p(""),A(!1),o(!1)}catch(s){var t,r;v((null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to add material")}finally{g(!1)}}else v("Material name cannot be empty")};return(0,Ns.jsxs)("div",{className:"relative",ref:B,children:[l&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Ns.jsxs)("div",{ref:k,className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Confirm Delete"}),(0,Ns.jsxs)("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to delete the material "',(0,Ns.jsx)("strong",{children:d}),'"? This action cannot be undone.']}),(0,Ns.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Ns.jsx)("button",{type:"button",onClick:()=>{c(!1),u(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none",children:"Cancel"}),(0,Ns.jsx)("button",{type:"button",onClick:async()=>{if(d)try{const e=b.find(e=>e.name===d);if(e&&e.quantity>0)return alert("Cannot remove material that has quantity in stock"),c(!1),void u(null);const r=b.find(e=>e.name===d);if(!r)throw new Error("Material not found");await ws.delete("/admin/warehouse/packing-materials/".concat(r._id)),await _(),t===d&&n("")}catch(x){alert(x.message||"Failed to delete material")}finally{c(!1),u(null)}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none",children:"Delete"})]})]})}),(0,Ns.jsxs)("div",(0,$n.A)((0,$n.A)({className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm flex justify-between items-center cursor-pointer bg-white ".concat(s),onClick:()=>o(!i)},a),{},{children:[(0,Ns.jsx)("span",{children:t||"Select material"}),(0,Ns.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,Ns.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})]})),i&&(0,Ns.jsxs)("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border border-gray-200 max-h-60 overflow-auto",children:[(0,Ns.jsx)("div",{className:"p-2 border-b border-gray-200",children:(0,Ns.jsx)("input",{type:"text",placeholder:"Search materials...",className:"w-full px-3 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",value:j,onChange:e=>C(e.target.value),onClick:e=>e.stopPropagation()})}),w.map(e=>(0,Ns.jsxs)("div",{className:"flex justify-between items-center px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{n(e.name),o(!1),C("")},children:[(0,Ns.jsx)("span",{children:e.name}),(0,Ns.jsx)("button",{type:"button",onClick:t=>{var n;t.stopPropagation(),n=e.name,u(n),c(!0)},className:"text-red-500 hover:text-red-700 font-bold ml-2",title:"Delete this material",children:"\xd7"})]},e._id)),(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)("div",{className:"border-t border-gray-200 my-1"}),h?(0,Ns.jsx)("div",{ref:S,className:"px-4 py-2",onClick:e=>e.stopPropagation(),children:(0,Ns.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsx)("input",{type:"text",value:f,onChange:e=>p(e.target.value),className:"shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm",placeholder:"Enter material name",onKeyDown:e=>{"Enter"===e.key&&E(e)}}),x&&(0,Ns.jsx)("p",{className:"text-red-500 text-xs mt-1",children:x})]}),(0,Ns.jsx)("button",{type:"button",onClick:E,disabled:m,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded text-xs disabled:opacity-50",children:m?"Adding...":"Add"}),(0,Ns.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),A(!1),p(""),v("")},className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-2 rounded text-xs",children:"Cancel"})]})}):(0,Ns.jsx)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-blue-600 flex items-center",onClick:e=>{e.stopPropagation(),A(!0)},children:(0,Ns.jsx)("span",{children:"+ Add New Material"})})]})]})]})},BT=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)({name:"",quantity:"",price:"",stockAlertThreshold:"",vendor:""}),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1),[y,w]=(0,r.useState)([]),[N,j]=(0,r.useState)(!1),[C,B]=(0,r.useState)(""),k=(0,r.useCallback)(async()=>{i(!0);try{const e=await ws.get("/admin/warehouse/packing-materials");t(e.data),s(e.data),l("")}catch(e){l("Failed to fetch packing materials.")}finally{i(!1)}},[]);(0,r.useEffect)(()=>{k()},[k]),(0,r.useEffect)(()=>{const t=e.filter(e=>e.name.toLowerCase().includes(u.toLowerCase()));s(t)},[u,e]);const S=e=>{const{name:t,value:n}=e.target;"name"!==t&&f(e=>(0,$n.A)((0,$n.A)({},e),{},{[t]:n}))},_=()=>{m(!1),x(null)},E=e=>{const{name:t,value:n}=e.target;"name"!==t&&x(e=>(0,$n.A)((0,$n.A)({},e),{},{[t]:n}))},F=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;b(!0),j(!0),B(e||"");try{const t=e?"/admin/warehouse/packing-materials/vendor-history/".concat(encodeURIComponent(e)):"/admin/warehouse/vendor-history",n=await ws.get(t);w(n.data)}catch(t){l("Failed to fetch vendor history."),console.error(t)}finally{j(!1)}},T=()=>{b(!1),w([]),B("")};return a?(0,Ns.jsxs)("div",{className:"p-4 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading..."})]}):(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold",children:"View Packing Materials"}),(0,Ns.jsxs)("button",{onClick:()=>F(),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center",children:[(0,Ns.jsx)(rt,{className:"mr-2"}),"Vendor History"]})]}),o&&(0,Ns.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:o}),c&&(0,Ns.jsx)("div",{className:"text-green-700 bg-green-100 p-3 rounded mb-4",children:c}),(0,Ns.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm mb-6",children:[(0,Ns.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Add New Packing Material"}),(0,Ns.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(""),d("");try{200===(await ws.post("/admin/warehouse/packing-materials",A)).status?d('Successfully updated "'.concat(A.name,'" with additional quantity.')):d('Successfully added "'.concat(A.name,'".')),f({name:"",quantity:"",price:"",stockAlertThreshold:"",vendor:""}),k()}catch(r){var t,n;l((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to add packing material.")}},className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),(0,Ns.jsx)(CT,{value:A.name,onChange:e=>f(t=>(0,$n.A)((0,$n.A)({},t),{},{name:e})),className:"border p-2 rounded-md w-full"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,Ns.jsx)("input",{type:"text",name:"quantity",placeholder:"Quantity",value:A.quantity,onChange:S,className:"border p-2 rounded-md w-full",required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),(0,Ns.jsx)("input",{type:"text",name:"price",placeholder:"Price",value:A.price,onChange:S,className:"border p-2 rounded-md w-full",required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alert Threshold"}),(0,Ns.jsx)("input",{type:"text",name:"stockAlertThreshold",placeholder:"Alert Threshold",value:A.stockAlertThreshold,onChange:S,className:"border p-2 rounded-md w-full"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor (Optional)"}),(0,Ns.jsx)("input",{type:"text",name:"vendor",placeholder:"Vendor",value:A.vendor,onChange:S,className:"border p-2 rounded-md w-full"})]}),(0,Ns.jsx)("div",{className:"flex items-end",children:(0,Ns.jsx)("button",{type:"submit",className:"bg-primary text-white p-2 rounded-md hover:bg-primary-dark w-full",children:"Add Material"})})]})]}),(0,Ns.jsx)("div",{className:"mb-4",children:(0,Ns.jsx)("input",{type:"text",placeholder:"Search by material name...",className:"w-full md:w-1/3 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",value:u,onChange:e=>h(e.target.value)})}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Ns.jsx)("thead",{className:"bg-light-gray",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Material Name"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Quantity"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Price (per unit)"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Stock Alert Threshold"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Vendor"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{children:n.length>0?n.map(e=>(0,Ns.jsxs)("tr",{className:"border-b ".concat(e.quantity<=(e.stockAlertThreshold||0)?"bg-red-50":"hover:bg-gray-50"),children:[(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.name}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.quantity}),(0,Ns.jsxs)("td",{className:"border px-4 py-2",children:["\u20b9",e.price]}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.stockAlertThreshold||"N/A"}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("span",{children:e.vendor||"-"}),e.vendor&&(0,Ns.jsx)("button",{onClick:()=>F(e.name),className:"ml-2 text-blue-600 hover:text-blue-800",title:"View Vendor History",children:(0,Ns.jsx)(rt,{size:16})})]})}),(0,Ns.jsxs)("td",{className:"border px-4 py-2",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{x((0,$n.A)({},e)),m(!0)})(e),className:"text-blue-600 hover:text-blue-800 mr-3",children:(0,Ns.jsx)(At,{})}),(0,Ns.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this packing material?"))try{await ws.delete("/admin/warehouse/packing-materials/".concat(e)),d("Material deleted successfully."),k()}catch(t){l("Failed to delete material.")}})(e._id),className:"text-red-600 hover:text-red-800",children:(0,Ns.jsx)(wt,{})})]})]},e._id)):(0,Ns.jsx)("tr",{children:(0,Ns.jsx)("td",{colSpan:"6",className:"text-center py-4",children:"No packing materials found. Add some materials to get started."})})})]})}),p&&g&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,Ns.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Packing Material"}),(0,Ns.jsxs)("div",{className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Name"}),(0,Ns.jsx)(CT,{value:g.name,onChange:e=>x(t=>(0,$n.A)((0,$n.A)({},t),{},{name:e})),className:"w-full px-3 py-2 border rounded-md"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Quantity"}),(0,Ns.jsx)("input",{type:"text",name:"quantity",value:g.quantity,onChange:E,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Price"}),(0,Ns.jsx)("input",{type:"text",name:"price",value:g.price,onChange:E,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Stock Alert Threshold"}),(0,Ns.jsx)("input",{type:"text",name:"stockAlertThreshold",value:g.stockAlertThreshold,onChange:E,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Vendor"}),(0,Ns.jsx)("input",{type:"text",name:"vendor",value:g.vendor||"",onChange:E,className:"w-full px-3 py-2 border rounded-md"})]})]}),(0,Ns.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,Ns.jsx)("button",{onClick:_,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:async()=>{if(g)try{await ws.put("/admin/warehouse/packing-materials/".concat(g._id),g),d("Material updated successfully."),_(),k()}catch(e){l("Failed to update material.")}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update"})]})]})}),v&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h2",{className:"text-xl font-bold",children:C?'Vendor History for "'.concat(C,'"'):"All Vendor History"}),(0,Ns.jsx)("button",{onClick:T,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),N?(0,Ns.jsx)("div",{className:"text-center py-4",children:"Loading vendor history..."}):y.length>0?(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Ns.jsx)("thead",{className:"bg-light-gray",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Material Name"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Vendor Name"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Quantity Received"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Unit"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Date & Time"})]})}),(0,Ns.jsx)("tbody",{children:y.map((e,t)=>(0,Ns.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.materialName}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.vendorName}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.quantityReceived}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.unit}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:new Date(e.receivedDate).toLocaleString()})]},t))})]})}):(0,Ns.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No vendor history found."}),(0,Ns.jsx)("div",{className:"mt-6 flex justify-end",children:(0,Ns.jsx)("button",{onClick:T,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Close"})})]})})]})},kT=()=>{const[e,t]=(0,r.useState)(""),[n,s]=(0,r.useState)(""),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)(""),[p,m]=(0,r.useState)([]),[g,x]=(0,r.useState)(!1),[v,b]=(0,r.useState)([]),[y,w]=(0,r.useState)(""),[N,j]=(0,r.useState)(!1),C=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/admin/warehouse/store-room");m(e.data),b(e.data)}catch(e){console.error("Failed to fetch store room items:",e)}})()},[]),(0,r.useEffect)(()=>{const e=e=>{C.current&&!C.current.contains(e.target)&&(x(!1),j(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,r.useEffect)(()=>{if(e){const t=p.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));b(t)}else b(p)},[e,p]);return(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Add Raw Material"}),(0,Ns.jsx)("p",{className:"text-gray-600 mb-6",children:'Use this form to add new raw materials or increase the quantity of existing ones. All materials can be managed in the "Store Room".'}),u&&(0,Ns.jsx)("div",{className:"text-green-700 bg-green-100 p-3 rounded mb-4",children:u}),A&&(0,Ns.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:A}),(0,Ns.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),f(""),h("");try{const r=await ws.post("/admin/warehouse/raw-materials",{name:e,quantity:n,unit:a,price:o,vendor:c});h('Successfully added/updated "'.concat(r.data.name,'".')),t(""),s(""),i(""),l(""),d("");try{const e=await ws.get("/admin/warehouse/store-room");m(e.data)}catch(u){console.error("Failed to refresh store room items:",u)}}catch(u){f("Failed to add raw material. Please try again.")}},className:"space-y-4",children:[(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[(0,Ns.jsxs)("div",{className:"md:col-span-2 relative",ref:C,children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Ingredient Name"}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsx)("input",{type:"text",placeholder:"e.g., Sugar",value:e,onChange:e=>{const n=e.target.value;t(n),x(!0),j(!1)},className:"w-full mt-1 px-3 py-2 border rounded-md",required:!0,onFocus:()=>x(!0)}),(0,Ns.jsx)("button",{type:"button",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",onClick:()=>j(!N),children:"+"})]}),N&&(0,Ns.jsxs)("div",{className:"mt-2 p-3 bg-gray-50 rounded-md border",children:[(0,Ns.jsx)("input",{type:"text",placeholder:"Enter new item name",value:y,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border rounded-md text-sm mb-2"}),(0,Ns.jsxs)("div",{className:"flex gap-2",children:[(0,Ns.jsx)("button",{type:"button",onClick:async()=>{if(y.trim())try{if(p.find(e=>e.name.toLowerCase()===y.trim().toLowerCase()))return void f("Item already exists in the list");const e=(await ws.post("/admin/warehouse/raw-materials",{name:y.trim(),quantity:0,unit:"kg",price:0,vendor:""})).data;m(t=>[...t,e]),b(t=>[...t,e]),t(e.name),i(e.unit),l(e.price.toString()),w(""),j(!1),x(!1),h('Successfully added "'.concat(e.name,'" to the list')),setTimeout(()=>h(""),3e3)}catch(e){f("Failed to add new item. Please try again.")}else f("Please enter a valid item name")},className:"px-3 py-1 bg-green-500 text-white rounded-md text-sm hover:bg-green-600",children:"Add Item"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>j(!1),className:"px-3 py-1 bg-gray-300 rounded-md text-sm hover:bg-gray-400",children:"Cancel"})]})]}),g&&(0,Ns.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[v.map(n=>(0,Ns.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer flex justify-between items-center",onClick:()=>(e=>{t(e),x(!1),j(!1);const n=p.find(t=>t.name===e);n&&(i(n.unit||""),l(n.price||""),d(n.vendor||""))})(n.name),children:[(0,Ns.jsxs)("span",{children:[n.name," (",n.quantity," ",n.unit," available)"]}),(0,Ns.jsx)("button",{type:"button",onClick:r=>{r.stopPropagation(),(async(n,r)=>{try{const s=p.find(e=>e._id===n);if(s&&s.quantity>0)return void f("Cannot remove items that have quantity in stock");await ws.delete("/admin/warehouse/store-room/".concat(n)),m(e=>e.filter(e=>e._id!==n)),b(e=>e.filter(e=>e._id!==n)),e===r&&(t(""),i(""),l(""),d("")),h('Successfully removed "'.concat(r,'" from the list')),setTimeout(()=>h(""),3e3)}catch(s){f("Failed to remove item. Please try again.")}})(n._id,n.name)},className:"text-red-500 hover:text-red-700 text-sm",title:"Remove item",children:"\xd7"})]},n._id)),0===v.length&&e&&(0,Ns.jsxs)("div",{className:"px-4 py-2 text-gray-500",children:['No items found. Click "+" to add "',e,'" as a new item.']})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Quantity"}),(0,Ns.jsx)("input",{type:"text",placeholder:"e.g., 50",value:n,onChange:e=>s(e.target.value),className:"w-full mt-1 px-3 py-2 border rounded-md",required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Unit"}),(0,Ns.jsx)(CF,{value:a,onChange:i})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Price (per unit)"}),(0,Ns.jsx)("input",{type:"text",placeholder:"e.g., 55",value:o,onChange:e=>l(e.target.value),className:"w-full mt-1 px-3 py-2 border rounded-md",required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium",children:"Vendor Name"}),(0,Ns.jsx)("input",{type:"text",placeholder:"e.g., ABC Supplier",value:c,onChange:e=>d(e.target.value),className:"w-full mt-1 px-3 py-2 border rounded-md"})]})]}),(0,Ns.jsx)("button",{type:"submit",className:"w-full md:w-auto bg-primary text-white py-2 px-6 rounded-md hover:bg-primary-dark",children:"Add Material to Store Room"})]})]})},ST=document.createElement("style");ST.innerHTML="\n  .th-style { padding: 0.75rem; font-weight: 600; }\n  .td-style { padding: 0.75rem; }\n",document.head.appendChild(ST);const _T=e=>{let{invoice:t}=e;if(!t)return(0,Ns.jsx)("div",{className:"text-center p-8",children:"No invoice data to display."});const n="Sweet Hub Admin",r="123 Candy Lane, Sweetville, 45678",s="contact@sweethub.com",a="/sweethub-logo.png";return(0,Ns.jsxs)("div",{id:"invoice-to-print",className:"p-6 sm:p-10 bg-white text-gray-800",children:[(0,Ns.jsxs)("header",{className:"flex justify-between items-start mb-10",children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("img",{src:a,alt:"Logo",className:"h-16 w-16 mr-4"}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:n}),(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:r}),(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:s})]})]}),(0,Ns.jsxs)("div",{className:"text-right",children:[(0,Ns.jsx)("h2",{className:"text-3xl font-bold uppercase text-gray-400",children:"Invoice"}),(0,Ns.jsx)("p",{className:"font-semibold text-gray-700",children:t.invoiceNumber}),(0,Ns.jsxs)("p",{className:"text-sm text-gray-500",children:["Date: ",new Date(t.issueDate).toLocaleDateString()]})]})]}),(0,Ns.jsxs)("section",{className:"mb-10",children:[(0,Ns.jsx)("h3",{className:"text-sm font-semibold uppercase text-gray-500 mb-2",children:"Bill To"}),(0,Ns.jsx)("p",{className:"text-lg font-bold text-gray-900",children:t.shop.name}),(0,Ns.jsx)("p",{className:"text-gray-600",children:t.shop.address||"No address provided"})]}),(0,Ns.jsx)("section",{className:"mb-10",children:(0,Ns.jsxs)("table",{className:"w-full text-left",children:[(0,Ns.jsx)("thead",{className:"bg-gray-100",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"th-style",children:"Product Name"}),(0,Ns.jsx)("th",{className:"th-style text-center",children:"Qty"}),(0,Ns.jsx)("th",{className:"th-style text-right",children:"Unit Price"}),(0,Ns.jsx)("th",{className:"th-style text-right",children:"Total"})]})}),(0,Ns.jsx)("tbody",{children:t.items.map((e,t)=>(0,Ns.jsxs)("tr",{className:"border-b",children:[(0,Ns.jsxs)("td",{className:"td-style",children:[(0,Ns.jsx)("p",{className:"font-medium",children:e.productName||"N/A"}),(0,Ns.jsxs)("p",{className:"text-xs text-gray-500",children:["SKU: ",e.productSku||"N/A"]})]}),(0,Ns.jsx)("td",{className:"td-style text-center",children:e.quantity||0}),(0,Ns.jsxs)("td",{className:"td-style text-right",children:["\u20b9",(e.unitPrice||0).toFixed(2)]}),(0,Ns.jsxs)("td",{className:"td-style text-right",children:["\u20b9",(e.totalPrice||0).toFixed(2)]})]},t))})]})}),(0,Ns.jsx)("section",{className:"flex justify-end mb-10",children:(0,Ns.jsxs)("div",{className:"w-full max-w-sm",children:[(0,Ns.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,Ns.jsxs)("span",{className:"font-semibold",children:["\u20b9",(t.subtotal||0).toFixed(2)]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Tax:"}),(0,Ns.jsxs)("span",{className:"font-semibold",children:["\u20b9",(t.tax||0).toFixed(2)]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between py-3 text-xl font-bold bg-gray-100 px-4 rounded-md",children:[(0,Ns.jsx)("span",{children:"Grand Total:"}),(0,Ns.jsxs)("span",{children:["\u20b9",(t.grandTotal||0).toFixed(2)]})]})]})}),(0,Ns.jsxs)("footer",{className:"text-center text-sm text-gray-500",children:[(0,Ns.jsx)("p",{children:"Thank you for your business!"}),(0,Ns.jsx)("p",{className:"mt-2 font-semibold",children:"Admin Signature"}),(0,Ns.jsx)("div",{className:"w-48 h-12 border-b-2 border-gray-400 mx-auto mt-4"})]})]})},ET=e=>{var t;let{invoice:n}=e;if(!n)return(0,Ns.jsx)("div",{className:"text-center p-8",children:"No invoice data to display."});const r=n.items.filter(e=>e.shopConfirmed&&e.receivedQuantity===e.quantity),s=n.items.filter(e=>e.shopConfirmed&&e.receivedQuantity!==e.quantity),a=n.items.filter(e=>!e.shopConfirmed),i=r.length>0,o=s.length>0,l=a.length>0;return(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Ns.jsx)("div",{className:"flex items-center justify-between mb-6 border-b pb-4",children:(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:["Invoice Details - ",n.invoiceNumber]}),(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"Detailed view of received and pending items"})]})}),(0,Ns.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Invoice Number"}),(0,Ns.jsx)("p",{className:"font-semibold text-gray-800",children:n.invoiceNumber})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Issue Date"}),(0,Ns.jsx)("p",{className:"font-semibold text-gray-800",children:n.issueDate?new Date(n.issueDate).toLocaleDateString():"N/A"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Shop"}),(0,Ns.jsx)("p",{className:"font-semibold text-gray-800",children:(null===(t=n.shop)||void 0===t?void 0:t.name)||"N/A"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("Confirmed"===n.status?"bg-green-100 text-green-800":"Partial"===n.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:n.status})]})]}),i&&(0,Ns.jsxs)("div",{className:"mb-8",children:[(0,Ns.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 mb-3 pb-2 border-b border-green-200 flex items-center",children:[(0,Ns.jsx)(He,{className:"text-green-500 mr-2"}),"\u2705 Fully Received Products"]}),(0,Ns.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-green-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Received Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map((e,t)=>(0,Ns.jsxs)("tr",{className:"hover:bg-green-50",children:[(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.receivedQuantity||"-"}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},"".concat(e.product,"-confirmed")))})]})})]}),o&&(0,Ns.jsxs)("div",{className:"mb-8",children:[(0,Ns.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 mb-3 pb-2 border-b border-blue-200 flex items-center",children:[(0,Ns.jsx)(Ve,{className:"text-blue-500 mr-2"}),"\ud83d\udccb Partially Received Products"]}),(0,Ns.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-blue-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Received Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((e,t)=>(0,Ns.jsxs)("tr",{className:"hover:bg-blue-50",children:[(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.receivedQuantity||"-"}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},"".concat(e.product,"-partial")))})]})})]}),l&&(0,Ns.jsxs)("div",{className:"mb-8",children:[(0,Ns.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 mb-3 pb-2 border-b border-yellow-200 flex items-center",children:[(0,Ns.jsx)(qe,{className:"text-yellow-500 mr-2"}),"\u23f3 Not Yet Received Products"]}),(0,Ns.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-yellow-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Received Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((e,t)=>(0,Ns.jsxs)("tr",{className:"hover:bg-yellow-50",children:[(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.receivedQuantity||"-"}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},"".concat(e.product,"-pending")))})]})})]}),(0,Ns.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Ns.jsxs)("div",{className:"text-center p-3 bg-green-100 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Fully Received Items"}),(0,Ns.jsx)("p",{className:"text-xl font-bold text-green-800",children:r.length})]}),(0,Ns.jsxs)("div",{className:"text-center p-3 bg-blue-100 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Partially Received Items"}),(0,Ns.jsx)("p",{className:"text-xl font-bold text-blue-800",children:s.length})]}),(0,Ns.jsxs)("div",{className:"text-center p-3 bg-yellow-100 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Not Received Items"}),(0,Ns.jsx)("p",{className:"text-xl font-bold text-yellow-800",children:a.length})]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Total Invoice Amount:"}),(0,Ns.jsxs)("span",{className:"font-semibold text-gray-800",children:["\u20b9",n.grandTotal.toFixed(2)]})]})]})]})},FT=document.createElement("style");FT.innerHTML="\n  .input-style { padding: 0.5rem 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem; width: 100%; }\n  .th-style { padding: 0.75rem 1rem; text-align: left; font-size: 0.75rem; font-weight: 500; color: #6b7280; text-transform: uppercase; }\n  .td-style { padding: 0.75rem 1rem; font-size: 0.875rem; color: #111827; }\n",document.head.appendChild(FT);const TT=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)({status:"All",shop:"All",startDate:"",endDate:""}),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[A,f]=(0,r.useState)("standard");(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/admin/invoices",{withCredentials:!0});t(e.data)}catch(e){i("Failed to fetch invoice history.")}finally{s(!1)}})()},[]);const p=e=>{const{name:t,value:n}=e.target;l(e=>(0,$n.A)((0,$n.A)({},e),{},{[t]:n}))},m=(0,r.useMemo)(()=>e.filter(e=>{const t=new Date(e.issueDate),n=o.startDate?new Date(o.startDate):null,r=o.endDate?new Date(o.endDate):null;return!(n&&t<n)&&(!(r&&t>r)&&(("All"===o.status||e.status===o.status)&&("All"===o.shop||e.shop._id===o.shop)))}),[e,o]),g=(0,r.useMemo)(()=>{const t=new Map;return e.forEach(e=>t.set(e.shop._id,e.shop.name)),Array.from(t,e=>{let[t,n]=e;return{_id:t,name:n}})},[e]),x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"standard";d(e),f(t),h(!0)};return n?(0,Ns.jsxs)("div",{className:"text-center p-8 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading invoice history..."})]}):a?(0,Ns.jsx)("div",{className:"text-center p-8 text-red-500",children:a}):(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Ns.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Invoice History"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6 p-4 border rounded-md bg-gray-50",children:[(0,Ns.jsxs)("select",{name:"status",value:o.status,onChange:p,className:"input-style",children:[(0,Ns.jsx)("option",{value:"All",children:"All Statuses"}),(0,Ns.jsx)("option",{value:"Pending",children:"Pending"}),(0,Ns.jsx)("option",{value:"Partial",children:"Partial"}),(0,Ns.jsx)("option",{value:"Confirmed",children:"Confirmed"})]}),(0,Ns.jsxs)("select",{name:"shop",value:o.shop,onChange:p,className:"input-style",children:[(0,Ns.jsx)("option",{value:"All",children:"All Shops"}),g.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]}),(0,Ns.jsx)("input",{type:"date",name:"startDate",value:o.startDate,onChange:p,className:"input-style"}),(0,Ns.jsx)("input",{type:"date",name:"endDate",value:o.endDate,onChange:p,className:"input-style"})]}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"th-style",children:"Invoice #"}),(0,Ns.jsx)("th",{className:"th-style",children:"Shop Name"}),(0,Ns.jsx)("th",{className:"th-style",children:"Date"}),(0,Ns.jsx)("th",{className:"th-style",children:"Amount"}),(0,Ns.jsx)("th",{className:"th-style",children:"Status"}),(0,Ns.jsx)("th",{className:"th-style text-right",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(e=>{var t;return(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"td-style font-medium text-blue-600",children:e.invoiceNumber}),(0,Ns.jsx)("td",{className:"td-style",children:(null===(t=e.shop)||void 0===t?void 0:t.name)||"N/A"}),(0,Ns.jsx)("td",{className:"td-style",children:e.issueDate?new Date(e.issueDate).toLocaleDateString():"N/A"}),(0,Ns.jsxs)("td",{className:"td-style",children:["\u20b9",(e.grandTotal||0).toFixed(2)]}),(0,Ns.jsx)("td",{className:"td-style",children:(0,Ns.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("Confirmed"===e.status?"bg-green-100 text-green-800":"Partial"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.status||"N/A"})}),(0,Ns.jsxs)("td",{className:"td-style text-right space-x-2",children:[(0,Ns.jsxs)("button",{onClick:()=>x(e,"standard"),className:"inline-flex items-center px-3 py-1.5 bg-blue-100 text-blue-700 text-sm font-medium rounded-md hover:bg-blue-200 transition-colors",children:[(0,Ns.jsx)(Ze,{className:"mr-1 h-4 w-4"}),"View"]}),"Partial"===e.status&&(0,Ns.jsxs)("button",{onClick:()=>x(e,"partial-detail"),className:"inline-flex items-center px-3 py-1.5 bg-purple-100 text-purple-700 text-sm font-medium rounded-md hover:bg-purple-200 transition-colors",title:"View Partial Details",children:[(0,Ns.jsx)(Ze,{className:"mr-1 h-4 w-4"}),(0,Ns.jsxs)("span",{className:"flex items-center",children:["Partial",(0,Ns.jsx)("span",{className:"ml-1 bg-purple-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:"!"})]})]}),(0,Ns.jsxs)("button",{onClick:()=>(e=>{e?_F(e):console.error("No invoice data provided")})(e),className:"inline-flex items-center px-3 py-1.5 bg-green-100 text-green-700 text-sm font-medium rounded-md hover:bg-green-200 transition-colors",children:[(0,Ns.jsx)(Ye,{className:"mr-1 h-4 w-4"}),"PDF"]})]})]},e._id)})})]})}),u&&c&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,Ns.jsxs)("div",{className:"bg-white p-4 sm:p-8 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[(0,Ns.jsx)("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl",children:"\xd7"}),"partial-detail"===A?(0,Ns.jsx)(ET,{invoice:c}):(0,Ns.jsx)(_T,{invoice:c})]})})]})};const IT=function(e){let{shop:t,dateRange:n,onClose:s}=e;const[a,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)("other");(0,r.useEffect)(()=>{(async()=>{l(!0);try{const e=await ws.get("/admin/profit-loss/shop/".concat(t.shopId,"/expenses"),{params:n});i(e.data)}catch(e){console.error("Error fetching expense breakdown:",e)}finally{l(!1)}})()},[t,n]);const u=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);if(o)return(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-60 z-50 flex items-center justify-center p-4",children:(0,Ns.jsx)("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl",children:(0,Ns.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center h-64",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-16 h-16 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-10 h-10"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading expense details..."})]})})});if(!a)return null;const{expenses:h}=a;return(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-60 z-50 flex items-center justify-center p-4",children:(0,Ns.jsxs)("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl flex flex-col max-h-[90vh]",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Expense Breakdown"}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[t.shopName," - ",a.shopName]})]}),(0,Ns.jsx)("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-200",children:(0,Ns.jsx)(Ft,{className:"h-5 w-5"})})]}),(0,Ns.jsx)("div",{className:"border-b",children:(0,Ns.jsx)("nav",{className:"flex space-x-8 px-6",children:(0,Ns.jsx)("button",{onClick:()=>d("other"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("other"===c?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,Ns.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ns.jsx)(Je,{className:"h-4 w-4"}),(0,Ns.jsx)("span",{children:"Expenses"})]})})})}),(0,Ns.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:"other"===c&&(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Expenses"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ns.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6",children:[(0,Ns.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Ns.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Ns.jsx)(Bt,{className:"h-6 w-6 text-blue-600"})}),(0,Ns.jsx)("div",{children:(0,Ns.jsx)("h5",{className:"font-medium text-gray-800",children:"Transport Expenses"})})]}),(0,Ns.jsx)("div",{className:"text-2xl font-bold text-blue-800",children:u(h.transport)})]}),(0,Ns.jsxs)("div",{className:"bg-green-50 rounded-lg p-6",children:[(0,Ns.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Ns.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Ns.jsx)(tt,{className:"h-6 w-6 text-green-600"})}),(0,Ns.jsx)("div",{children:(0,Ns.jsx)("h5",{className:"font-medium text-gray-800",children:"Petrol / Diesel"})})]}),(0,Ns.jsx)("div",{className:"text-2xl font-bold text-green-800",children:u(h.petrolDiesel)})]}),(0,Ns.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-6",children:[(0,Ns.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Ns.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,Ns.jsx)(tt,{className:"h-6 w-6 text-yellow-600"})}),(0,Ns.jsx)("div",{children:(0,Ns.jsx)("h5",{className:"font-medium text-gray-800",children:"Electricity"})})]}),(0,Ns.jsx)("div",{className:"text-2xl font-bold text-yellow-800",children:u(h.electricity)})]}),(0,Ns.jsxs)("div",{className:"bg-purple-50 rounded-lg p-6",children:[(0,Ns.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Ns.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,Ns.jsx)(tt,{className:"h-6 w-6 text-purple-600"})}),(0,Ns.jsx)("div",{children:(0,Ns.jsx)("h5",{className:"font-medium text-gray-800",children:"Raw Materials"})})]}),(0,Ns.jsx)("div",{className:"text-2xl font-bold text-purple-800",children:u(h.rawMaterials)})]}),(0,Ns.jsxs)("div",{className:"bg-red-50 rounded-lg p-6",children:[(0,Ns.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Ns.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,Ns.jsx)(tt,{className:"h-6 w-6 text-red-600"})}),(0,Ns.jsx)("div",{children:(0,Ns.jsx)("h5",{className:"font-medium text-gray-800",children:"Maintenance"})})]}),(0,Ns.jsx)("div",{className:"text-2xl font-bold text-red-800",children:u(h.maintenance)})]}),(0,Ns.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-6",children:[(0,Ns.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Ns.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,Ns.jsx)(Je,{className:"h-6 w-6 text-indigo-600"})}),(0,Ns.jsx)("div",{children:(0,Ns.jsx)("h5",{className:"font-medium text-gray-800",children:"Miscellaneous"})})]}),(0,Ns.jsx)("div",{className:"text-2xl font-bold text-indigo-800",children:u(h.miscellaneous)})]})]}),(0,Ns.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,Ns.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,Ns.jsx)("h5",{className:"font-medium text-gray-800",children:"Detailed Expense Records"})}),0===h.actualExpenses.length?(0,Ns.jsxs)("div",{className:"p-6 text-center",children:[(0,Ns.jsx)(tt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Expenses"}),(0,Ns.jsx)("p",{className:"text-gray-500",children:"No expenses recorded for this period."})]}):(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Mode"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.actualExpenses.map((e,t)=>{return(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(n=e.date,new Date(n).toLocaleDateString("en-IN"))}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.category}),(0,Ns.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.description||"-"}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.paymentMode}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:u(e.amount)})]},t);var n})}),(0,Ns.jsx)("tfoot",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{colSpan:"4",className:"px-6 py-3 text-sm font-medium text-gray-900",children:"Total Expenses"}),(0,Ns.jsx)("td",{className:"px-6 py-3 text-sm font-bold text-gray-900 text-right",children:u(h.transport+h.petrolDiesel+h.electricity+h.rawMaterials+h.maintenance+h.miscellaneous)})]})})]})})]})]})}),(0,Ns.jsx)("div",{className:"p-6 border-t bg-gray-50 rounded-b-lg",children:(0,Ns.jsx)("div",{className:"flex justify-end",children:(0,Ns.jsx)("button",{onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})})})]})})};var DT=n(4980);function LT(e){return e+.5|0}const PT=(e,t,n)=>Math.max(Math.min(e,n),t);function RT(e){return PT(LT(2.55*e),0,255)}function UT(e){return PT(LT(255*e),0,255)}function OT(e){return PT(LT(e/2.55)/100,0,1)}function MT(e){return PT(LT(100*e),0,100)}const QT={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},HT=[..."0123456789ABCDEF"],zT=e=>HT[15&e],WT=e=>HT[(240&e)>>4]+HT[15&e],VT=e=>(240&e)>>4===(15&e);function KT(e){var t=(e=>VT(e.r)&&VT(e.g)&&VT(e.b)&&VT(e.a))(e)?zT:WT;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const GT=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qT(e,t,n){const r=t*Math.min(n,1-n),s=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(s-3,9-s,1),-1)};return[s(0),s(8),s(4)]}function XT(e,t,n){const r=function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(s,4-s,1),0)};return[r(5),r(3),r(1)]}function YT(e,t,n){const r=qT(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function JT(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=Math.max(t,n,r),a=Math.min(t,n,r),i=(s+a)/2;let o,l,c;return s!==a&&(c=s-a,l=i>.5?c/(2-s-a):c/(s+a),o=function(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,s),o=60*o+.5),[0|o,l||0,i]}function ZT(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(UT)}function $T(e,t,n){return ZT(qT,e,t,n)}function eI(e){return(e%360+360)%360}function tI(e){const t=GT.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?RT(+t[5]):UT(+t[5]));const s=eI(+t[2]),a=+t[3]/100,i=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return ZT(YT,e,t,n)}(s,a,i):"hsv"===t[1]?function(e,t,n){return ZT(XT,e,t,n)}(s,a,i):$T(s,a,i),{r:n[0],g:n[1],b:n[2],a:r}}const nI={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},rI={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let sI;function aI(e){sI||(sI=function(){const e={},t=Object.keys(rI),n=Object.keys(nI);let r,s,a,i,o;for(r=0;r<t.length;r++){for(i=o=t[r],s=0;s<n.length;s++)a=n[s],o=o.replace(a,nI[a]);a=parseInt(rI[i],16),e[o]=[a>>16&255,a>>8&255,255&a]}return e}(),sI.transparent=[0,0,0,0]);const t=sI[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const iI=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const oI=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,lI=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function cI(e,t,n){if(e){let r=JT(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=$T(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function dI(e,t){return e?Object.assign(t||{},e):e}function uI(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=UT(e[3]))):(t=dI(e,{r:0,g:0,b:0,a:1})).a=UT(t.a),t}function hI(e){return"r"===e.charAt(0)?function(e){const t=iI.exec(e);let n,r,s,a=255;if(t){if(t[7]!==n){const e=+t[7];a=t[8]?RT(e):PT(255*e,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?RT(n):PT(n,0,255)),r=255&(t[4]?RT(r):PT(r,0,255)),s=255&(t[6]?RT(s):PT(s,0,255)),{r:n,g:r,b:s,a:a}}}(e):tI(e)}class AI{constructor(e){if(e instanceof AI)return e;const t=typeof e;let n;"object"===t?n=uI(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*QT[e[1]],g:255&17*QT[e[2]],b:255&17*QT[e[3]],a:5===n?17*QT[e[4]]:255}:7!==n&&9!==n||(t={r:QT[e[1]]<<4|QT[e[2]],g:QT[e[3]]<<4|QT[e[4]],b:QT[e[5]]<<4|QT[e[6]],a:9===n?QT[e[7]]<<4|QT[e[8]]:255})),t}(e)||aI(e)||hI(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=dI(this._rgb);return e&&(e.a=OT(e.a)),e}set rgb(e){this._rgb=uI(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(OT(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?KT(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=JT(e),n=t[0],r=MT(t[1]),s=MT(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(s,"%, ").concat(OT(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(s,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let s;const a=t===s?.5:t,i=2*a-1,o=n.a-r.a,l=((i*o===-1?i:(i+o)/(1+i*o))+1)/2;s=1-l,n.r=255&l*n.r+s*r.r+.5,n.g=255&l*n.g+s*r.g+.5,n.b=255&l*n.b+s*r.b+.5,n.a=a*n.a+(1-a)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=lI(OT(e.r)),s=lI(OT(e.g)),a=lI(OT(e.b));return{r:UT(oI(r+n*(lI(OT(t.r))-r))),g:UT(oI(s+n*(lI(OT(t.g))-s))),b:UT(oI(a+n*(lI(OT(t.b))-a))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new AI(this.rgb)}alpha(e){return this._rgb.a=UT(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=LT(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return cI(this._rgb,2,e),this}darken(e){return cI(this._rgb,2,-e),this}saturate(e){return cI(this._rgb,1,e),this}desaturate(e){return cI(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=JT(e);n[0]=eI(n[0]+t),n=$T(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function fI(){}const pI=(()=>{let e=0;return()=>e++})();function mI(e){return null===e||void 0===e}function gI(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function xI(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function vI(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function bI(e,t){return vI(e)?e:t}function yI(e,t){return"undefined"===typeof e?t:e}const wI=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function NI(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function jI(e,t,n,r){let s,a,i;if(gI(e))if(a=e.length,r)for(s=a-1;s>=0;s--)t.call(n,e[s],s);else for(s=0;s<a;s++)t.call(n,e[s],s);else if(xI(e))for(i=Object.keys(e),a=i.length,s=0;s<a;s++)t.call(n,e[i[s]],i[s])}function CI(e,t){let n,r,s,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],a=t[n],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function BI(e){if(gI(e))return e.map(BI);if(xI(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=BI(e[n[s]]);return t}return e}function kI(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function SI(e,t,n,r){if(!kI(e))return;const s=t[e],a=n[e];xI(s)&&xI(a)?_I(s,a,r):t[e]=BI(a)}function _I(e,t,n){const r=gI(t)?t:[t],s=r.length;if(!xI(e))return e;const a=(n=n||{}).merger||SI;let i;for(let o=0;o<s;++o){if(i=r[o],!xI(i))continue;const t=Object.keys(i);for(let r=0,s=t.length;r<s;++r)a(t[r],e,i,n)}return e}function EI(e,t){return _I(e,t,{merger:FI})}function FI(e,t,n){if(!kI(e))return;const r=t[e],s=n[e];xI(r)&&xI(s)?EI(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=BI(s))}const TI={"":e=>e,x:e=>e.x,y:e=>e.y};function II(e,t){const n=TI[t]||(TI[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function DI(e){return e.charAt(0).toUpperCase()+e.slice(1)}const LI=e=>"undefined"!==typeof e,PI=e=>"function"===typeof e,RI=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const UI=Math.PI,OI=2*UI,MI=OI+UI,QI=Number.POSITIVE_INFINITY,HI=UI/180,zI=UI/2,WI=UI/4,VI=2*UI/3,KI=Math.log10,GI=Math.sign;function qI(e,t,n){return Math.abs(e-t)<n}function XI(e){const t=Math.round(e);e=qI(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(KI(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function YI(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function JI(e,t,n){let r,s,a;for(r=0,s=e.length;r<s;r++)a=e[r][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function ZI(e){return e*(UI/180)}function $I(e){return e*(180/UI)}function eD(e){if(!vI(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function tD(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n);return a<-.5*UI&&(a+=OI),{angle:a,distance:s}}function nD(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function rD(e,t){return(e-t+MI)%OI-UI}function sD(e){return(e%OI+OI)%OI}function aD(e,t,n,r){const s=sD(e),a=sD(t),i=sD(n),o=sD(a-s),l=sD(i-s),c=sD(s-a),d=sD(s-i);return s===a||s===i||r&&a===i||o>l&&c<d}function iD(e,t,n){return Math.max(t,Math.min(n,e))}function oD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function lD(e,t,n){n=n||(n=>e[n]<t);let r,s=e.length-1,a=0;for(;s-a>1;)r=a+s>>1,n(r)?a=r:s=r;return{lo:a,hi:s}}const cD=(e,t,n,r)=>lD(e,n,r?r=>{const s=e[r][t];return s<n||s===n&&e[r+1][t]===n}:r=>e[r][t]<n),dD=(e,t,n)=>lD(e,n,r=>e[r][t]>=n);const uD=["push","pop","shift","splice","unshift"];function hD(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);-1!==s&&r.splice(s,1),r.length>0||(uD.forEach(t=>{delete e[t]}),delete e._chartjs)}function AD(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const fD="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function pD(e,t){let n=[],r=!1;return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];n=a,r||(r=!0,fD.call(window,()=>{r=!1,e.apply(t,n)}))}}const mD=e=>"start"===e?"left":"end"===e?"right":"center",gD=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function xD(e,t,n){const r=t.length;let s=0,a=r;if(e._sorted){const{iScale:i,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=i.axis,{min:u,max:h,minDefined:A,maxDefined:f}=i.getUserBounds();if(A){if(s=Math.min(cD(l,d,u).lo,n?r:cD(t,d,i.getPixelForValue(u)).lo),c){const e=l.slice(0,s+1).reverse().findIndex(e=>!mI(e[o.axis]));s-=Math.max(0,e)}s=iD(s,0,r-1)}if(f){let e=Math.max(cD(l,i.axis,h,!0).hi+1,n?0:cD(t,d,i.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!mI(e[o.axis]));e+=Math.max(0,t)}a=iD(e,s,r)-s}else a=r-s}return{start:s,count:a}}function vD(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=s,!0;const a=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),a}const bD=e=>0===e||1===e,yD=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*OI/n),wD=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*OI/n)+1,ND={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*zI),easeOutSine:e=>Math.sin(e*zI),easeInOutSine:e=>-.5*(Math.cos(UI*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>bD(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>bD(e)?e:yD(e,.075,.3),easeOutElastic:e=>bD(e)?e:wD(e,.075,.3),easeInOutElastic(e){const t=.1125;return bD(e)?e:e<.5?.5*yD(2*e,t,.45):.5+.5*wD(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-ND.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*ND.easeInBounce(2*e):.5*ND.easeOutBounce(2*e-1)+.5};function jD(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function CD(e){return jD(e)?e:new AI(e)}function BD(e){return jD(e)?e:new AI(e).saturate(.5).darken(.1).hexString()}const kD=["x","y","borderWidth","radius","tension"],SD=["color","borderColor","backgroundColor"];const _D=new Map;function ED(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=_D.get(n);return r||(r=new Intl.NumberFormat(e,t),_D.set(n,r)),r}(t,n).format(e)}const FD={values:e=>gI(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let s,a=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(s="scientific"),a=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const i=KI(Math.abs(a)),o=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),ED(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(KI(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?FD.numeric.call(this,e,t,n):""}};var TD={formatters:FD};const ID=Object.create(null),DD=Object.create(null);function LD(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function PD(e,t,n){return"string"===typeof t?_I(LD(e,t),n):_I(LD(e,""),t)}class RD{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>BD(t.backgroundColor),this.hoverBorderColor=(e,t)=>BD(t.borderColor),this.hoverColor=(e,t)=>BD(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return PD(this,e,t)}get(e){return LD(this,e)}describe(e,t){return PD(DD,e,t)}override(e,t){return PD(ID,e,t)}route(e,t,n,r){const s=LD(this,e),a=LD(this,n),i="_"+t;Object.defineProperties(s,{[i]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[i],t=a[r];return xI(e)?Object.assign({},t,e):yI(e,t)},set(e){this[i]=e}}})}apply(e){e.forEach(e=>e(this))}}var UD=new RD({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:SD},numbers:{type:"number",properties:kD}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:TD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function OD(e,t,n,r,s){let a=t[s];return a||(a=t[s]=e.measureText(s).width,n.push(s)),a>r&&(r=a),r}function MD(e,t,n,r){let s=(r=r||{}).data=r.data||{},a=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(s=r.data={},a=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let i=0;const o=n.length;let l,c,d,u,h;for(l=0;l<o;l++)if(u=n[l],void 0===u||null===u||gI(u)){if(gI(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||gI(h)||(i=OD(e,s,a,i,h))}else i=OD(e,s,a,i,u);e.restore();const A=a.length/2;if(A>n.length){for(l=0;l<A;l++)delete s[a[l]];a.splice(0,A)}return i}function QD(e,t,n){const r=e.currentDevicePixelRatio,s=0!==n?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function HD(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function zD(e,t,n,r){WD(e,t,n,r,null)}function WD(e,t,n,r,s){let a,i,o,l,c,d,u,h;const A=t.pointStyle,f=t.rotation,p=t.radius;let m=(f||0)*HI;if(A&&"object"===typeof A&&(a=A.toString(),"[object HTMLImageElement]"===a||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(n,r),e.rotate(m),e.drawImage(A,-A.width/2,-A.height/2,A.width,A.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),A){default:s?e.ellipse(n,r,s/2,p,0,0,OI):e.arc(n,r,p,0,OI),e.closePath();break;case"triangle":d=s?s/2:p,e.moveTo(n+Math.sin(m)*d,r-Math.cos(m)*p),m+=VI,e.lineTo(n+Math.sin(m)*d,r-Math.cos(m)*p),m+=VI,e.lineTo(n+Math.sin(m)*d,r-Math.cos(m)*p),e.closePath();break;case"rectRounded":c=.516*p,l=p-c,i=Math.cos(m+WI)*l,u=Math.cos(m+WI)*(s?s/2-c:l),o=Math.sin(m+WI)*l,h=Math.sin(m+WI)*(s?s/2-c:l),e.arc(n-u,r-o,c,m-UI,m-zI),e.arc(n+h,r-i,c,m-zI,m),e.arc(n+u,r+o,c,m,m+zI),e.arc(n-h,r+i,c,m+zI,m+UI),e.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*p,d=s?s/2:l,e.rect(n-d,r-l,2*d,2*l);break}m+=WI;case"rectRot":u=Math.cos(m)*(s?s/2:p),i=Math.cos(m)*p,o=Math.sin(m)*p,h=Math.sin(m)*(s?s/2:p),e.moveTo(n-u,r-o),e.lineTo(n+h,r-i),e.lineTo(n+u,r+o),e.lineTo(n-h,r+i),e.closePath();break;case"crossRot":m+=WI;case"cross":u=Math.cos(m)*(s?s/2:p),i=Math.cos(m)*p,o=Math.sin(m)*p,h=Math.sin(m)*(s?s/2:p),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-i),e.lineTo(n-h,r+i);break;case"star":u=Math.cos(m)*(s?s/2:p),i=Math.cos(m)*p,o=Math.sin(m)*p,h=Math.sin(m)*(s?s/2:p),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-i),e.lineTo(n-h,r+i),m+=WI,u=Math.cos(m)*(s?s/2:p),i=Math.cos(m)*p,o=Math.sin(m)*p,h=Math.sin(m)*(s?s/2:p),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-i),e.lineTo(n-h,r+i);break;case"line":i=s?s/2:Math.cos(m)*p,o=Math.sin(m)*p,e.moveTo(n-i,r-o),e.lineTo(n+i,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(m)*(s?s/2:p),r+Math.sin(m)*p);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function VD(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function KD(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function GD(e){e.restore()}function qD(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if("middle"===s){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===s!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function XD(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function YD(e,t,n,r,s){if(s.strikethrough||s.underline){const a=e.measureText(r),i=t-a.actualBoundingBoxLeft,o=t+a.actualBoundingBoxRight,l=n-a.actualBoundingBoxAscent,c=n+a.actualBoundingBoxDescent,d=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(i,d),e.lineTo(o,d),e.stroke()}}function JD(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function ZD(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=gI(t)?t:[t],o=a.strokeWidth>0&&""!==a.strokeColor;let l,c;for(e.save(),e.font=s.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),mI(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,a),l=0;l<i.length;++l)c=i[l],a.backdrop&&JD(e,a.backdrop),o&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),mI(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(c,n,r,a.maxWidth)),e.fillText(c,n,r,a.maxWidth),YD(e,n,r,c,a),r+=Number(s.lineHeight);e.restore()}function $D(e,t){const{x:n,y:r,w:s,h:a,radius:i}=t;e.arc(n+i.topLeft,r+i.topLeft,i.topLeft,1.5*UI,UI,!0),e.lineTo(n,r+a-i.bottomLeft),e.arc(n+i.bottomLeft,r+a-i.bottomLeft,i.bottomLeft,UI,zI,!0),e.lineTo(n+s-i.bottomRight,r+a),e.arc(n+s-i.bottomRight,r+a-i.bottomRight,i.bottomRight,zI,0,!0),e.lineTo(n+s,r+i.topRight),e.arc(n+s-i.topRight,r+i.topRight,i.topRight,0,-zI,!0),e.lineTo(n+i.topLeft,r)}const eL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,tL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function nL(e,t){const n=(""+e).match(eL);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const rL=e=>+e||0;function sL(e,t){const n={},r=xI(t),s=r?Object.keys(t):t,a=xI(e)?r?n=>yI(e[n],e[t[n]]):t=>e[t]:()=>e;for(const i of s)n[i]=rL(a(i));return n}function aL(e){return sL(e,{top:"y",right:"x",bottom:"y",left:"x"})}function iL(e){return sL(e,["topLeft","topRight","bottomLeft","bottomRight"])}function oL(e){const t=aL(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function lL(e,t){e=e||{},t=t||UD.font;let n=yI(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=yI(e.style,t.style);r&&!(""+r).match(tL)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:yI(e.family,t.family),lineHeight:nL(yI(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:yI(e.weight,t.weight),string:""};return s.string=function(e){return!e||mI(e.size)||mI(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(s),s}function cL(e,t,n,r){let s,a,i,o=!0;for(s=0,a=e.length;s<a;++s)if(i=e[s],void 0!==i&&(void 0!==t&&"function"===typeof i&&(i=i(t),o=!1),void 0!==n&&gI(i)&&(i=i[n%i.length],o=!1),void 0!==i))return r&&!o&&(r.cacheable=!1),i}function dL(e,t){return Object.assign(Object.create(e),t)}function uL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const s=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=wL("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:n,_getTarget:r,override:r=>uL([r,...e],t,s,n)};return new Proxy(a,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>mL(n,r,()=>function(e,t,n,r){let s;for(const a of t)if(s=wL(fL(a,e),n),"undefined"!==typeof s)return pL(e,s)?bL(n,r,e,s):s}(r,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>NL(e).includes(t),ownKeys:e=>NL(e),set(e,t,n){const s=e._storage||(e._storage=r());return e[t]=s[t]=n,delete e._keys,!0}})}function hL(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:AL(e,r),setContext:t=>hL(e,t,n,r),override:s=>hL(e.override(s),t,n,r)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>mL(e,t,()=>function(e,t,n){const{_proxy:r,_context:s,_subProxy:a,_descriptors:i}=e;let o=r[t];PI(o)&&i.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:s,_context:a,_subProxy:i,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(a,i||r);o.delete(e),pL(e,l)&&(l=bL(s._scopes,s,e,l));return l}(t,o,e,n));gI(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:s,_context:a,_subProxy:i,_descriptors:o}=n;if("undefined"!==typeof a.index&&r(e))return t[a.index%t.length];if(xI(t[0])){const n=t,r=s._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=bL(r,s,e,l);t.push(hL(n,a,i&&i[e],o))}}return t}(t,o,e,i.isIndexable));pL(t,o)&&(o=hL(o,s,a&&a[t],i));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function AL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:PI(n)?n:()=>n,isIndexable:PI(r)?r:()=>r}}const fL=(e,t)=>e?e+DI(t):t,pL=(e,t)=>xI(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function mL(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function gL(e,t,n){return PI(e)?e(t,n):e}const xL=(e,t)=>!0===e?t:"string"===typeof e?II(t,e):void 0;function vL(e,t,n,r,s){for(const a of t){const t=xL(n,a);if(t){e.add(t);const a=gL(t._fallback,n,s);if("undefined"!==typeof a&&a!==n&&a!==r)return a}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function bL(e,t,n,r){const s=t._rootScopes,a=gL(t._fallback,n,r),i=[...e,...s],o=new Set;o.add(r);let l=yL(o,i,n,a||n,r);return null!==l&&(("undefined"===typeof a||a===n||(l=yL(o,i,a,l,r),null!==l))&&uL(Array.from(o),[""],s,a,()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];if(gI(s)&&xI(n))return n;return s||{}}(t,n,r)))}function yL(e,t,n,r,s){for(;n;)n=vL(e,t,n,r,s);return n}function wL(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function NL(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function jL(e,t,n,r){const{iScale:s}=e,{key:a="r"}=this._parsing,i=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+n,d=t[c],i[o]={r:s.parse(II(d,a),c)};return i}const CL=Number.EPSILON||1e-14,BL=(e,t)=>t<e.length&&!e[t].skip&&e[t],kL=e=>"x"===e?"y":"x";function SL(e,t,n,r){const s=e.skip?t:e,a=t,i=n.skip?t:n,o=nD(a,s),l=nD(i,a);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=r*c,h=r*d;return{previous:{x:a.x-u*(i.x-s.x),y:a.y-u*(i.y-s.y)},next:{x:a.x+h*(i.x-s.x),y:a.y+h*(i.y-s.y)}}}function _L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=kL(t),r=e.length,s=Array(r).fill(0),a=Array(r);let i,o,l,c=BL(e,0);for(i=0;i<r;++i)if(o=l,l=c,c=BL(e,i+1),l){if(c){const e=c[t]-l[t];s[i]=0!==e?(c[n]-l[n])/e:0}a[i]=o?c?GI(s[i-1])!==GI(s[i])?0:(s[i-1]+s[i])/2:s[i-1]:s[i]}!function(e,t,n){const r=e.length;let s,a,i,o,l,c=BL(e,0);for(let d=0;d<r-1;++d)l=c,c=BL(e,d+1),l&&c&&(qI(t[d],0,CL)?n[d]=n[d+1]=0:(s=n[d]/t[d],a=n[d+1]/t[d],o=Math.pow(s,2)+Math.pow(a,2),o<=9||(i=3/Math.sqrt(o),n[d]=s*i*t[d],n[d+1]=a*i*t[d])))}(e,s,a),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=kL(n),s=e.length;let a,i,o,l=BL(e,0);for(let c=0;c<s;++c){if(i=o,o=l,l=BL(e,c+1),!o)continue;const s=o[n],d=o[r];i&&(a=(s-i[n])/3,o["cp1".concat(n)]=s-a,o["cp1".concat(r)]=d-a*t[c]),l&&(a=(l[n]-s)/3,o["cp2".concat(n)]=s+a,o["cp2".concat(r)]=d+a*t[c])}}(e,a,t)}function EL(e,t,n){return Math.max(Math.min(e,n),t)}function FL(e,t,n,r,s){let a,i,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)_L(e,s);else{let n=r?e[e.length-1]:e[0];for(a=0,i=e.length;a<i;++a)o=e[a],l=SL(n,o,e[Math.min(a+1,i-(r?0:1))%i],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,s,a,i,o=VD(e[0],t);for(n=0,r=e.length;n<r;++n)i=a,a=o,o=n<r-1&&VD(e[n+1],t),a&&(s=e[n],i&&(s.cp1x=EL(s.cp1x,t.left,t.right),s.cp1y=EL(s.cp1y,t.top,t.bottom)),o&&(s.cp2x=EL(s.cp2x,t.left,t.right),s.cp2y=EL(s.cp2y,t.top,t.bottom)))}(e,n)}function TL(){return"undefined"!==typeof window&&"undefined"!==typeof document}function IL(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function DL(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const LL=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const PL=["top","right","bottom","left"];function RL(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const a=PL[s];r[a]=parseFloat(e[t+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function UL(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=LL(n),a="border-box"===s.boxSizing,i=RL(s,"padding"),o=RL(s,"border","width"),{x:l,y:c,box:d}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:a}=r;let i,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(s,a,e.target))i=s,o=a;else{const e=t.getBoundingClientRect();i=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:i,y:o,box:l}}(e,n),u=i.left+(d&&o.left),h=i.top+(d&&o.top);let{width:A,height:f}=t;return a&&(A-=i.width+o.width,f-=i.height+o.height),{x:Math.round((l-u)/A*n.width/r),y:Math.round((c-h)/f*n.height/r)}}const OL=e=>Math.round(10*e)/10;function ML(e,t,n,r){const s=LL(e),a=RL(s,"margin"),i=DL(s.maxWidth,e,"clientWidth")||QI,o=DL(s.maxHeight,e,"clientHeight")||QI,l=function(e,t,n){let r,s;if(void 0===t||void 0===n){const a=e&&IL(e);if(a){const e=a.getBoundingClientRect(),i=LL(a),o=RL(i,"border","width"),l=RL(i,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=DL(i.maxWidth,a,"clientWidth"),s=DL(i.maxHeight,a,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||QI,maxHeight:s||QI}}(e,t,n);let{width:c,height:d}=l;if("content-box"===s.boxSizing){const e=RL(s,"border","width"),t=RL(s,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-a.width),d=Math.max(0,r?c/r:d-a.height),c=OL(Math.min(c,i,l.maxWidth)),d=OL(Math.min(d,o,l.maxHeight)),c&&!d&&(d=OL(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&d>l.height&&(d=l.height,c=OL(Math.floor(d*r))),{width:c,height:d}}function QL(e,t,n){const r=t||1,s=OL(e.height*r),a=OL(e.width*r);e.height=OL(e.height),e.width=OL(e.width);const i=e.canvas;return i.style&&(n||!i.style.height&&!i.style.width)&&(i.style.height="".concat(e.height,"px"),i.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||i.height!==s||i.width!==a)&&(e.currentDevicePixelRatio=r,i.height=s,i.width=a,e.ctx.setTransform(r,0,0,r,0,0),!0)}const HL=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};TL()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(Ua){}return e}();function zL(e,t){const n=function(e,t){return LL(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function WL(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function VL(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function KL(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},i=WL(e,s,n),o=WL(s,a,n),l=WL(a,t,n),c=WL(i,o,n),d=WL(o,l,n);return WL(c,d,n)}function GL(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function qL(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function XL(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function YL(e){return"angle"===e?{between:aD,compare:rD,normalize:sD}:{between:oD,compare:(e,t)=>e-t,normalize:e=>e}}function JL(e){let{start:t,end:n,count:r,loop:s,style:a}=e;return{start:t%r,end:n%r,loop:s&&(n-t+1)%r===0,style:a}}function ZL(e,t,n){if(!n)return[e];const{property:r,start:s,end:a}=n,i=t.length,{compare:o,between:l,normalize:c}=YL(r),{start:d,end:u,loop:h,style:A}=function(e,t,n){const{property:r,start:s,end:a}=n,{between:i,normalize:o}=YL(r),l=t.length;let c,d,{start:u,end:h,loop:A}=e;if(A){for(u+=l,h+=l,c=0,d=l;c<d&&i(o(t[u%l][r]),s,a);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:A,style:e.style}}(e,t,n),f=[];let p,m,g,x=!1,v=null;const b=()=>x||l(s,g,p)&&0!==o(s,g),y=()=>!x||0===o(a,p)||l(a,g,p);for(let w=d,N=d;w<=u;++w)m=t[w%i],m.skip||(p=c(m[r]),p!==g&&(x=l(p,s,a),null===v&&b()&&(v=0===o(p,s)?w:N),null!==v&&y()&&(f.push(JL({start:v,end:w,loop:h,count:i,style:A})),v=null),N=w,g=p));return null!==v&&f.push(JL({start:v,end:u,loop:h,count:i,style:A})),f}function $L(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const a=ZL(r[s],e.points,t);a.length&&n.push(...a)}return n}function eP(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const s=e._chart.getContext(),a=tP(e.options),{_datasetIndex:i,options:{spanGaps:o}}=e,l=n.length,c=[];let d=a,u=t[0].start,h=u;function A(e,t,r,s){const a=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=a;for(;n[t%l].skip;)t+=a;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:s}),d=s,u=t%l)}}for(const f of t){u=o?u:f.start;let e,t=n[u%l];for(h=u+1;h<=f.end;h++){const a=n[h%l];e=tP(r.setContext(dL(s,{type:"segment",p0:t,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:i}))),nP(e,d)&&A(u,h-1,f.loop,d),t=a,d=e}u<h-1&&A(u,h-1,f.loop,d)}return c}(e,t,n,r):t}function tP(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function nP(e,t){if(!t)return!1;const n=[],r=function(e,t){return jD(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function rP(e,t,n){return e.options.clip?e[n]:t[n]}function sP(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:rP(n,t,"left"),right:rP(n,t,"right"),top:rP(r,t,"top"),bottom:rP(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class aP{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const s=t.listeners[r],a=t.duration;s.forEach(r=>r({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=fD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let a,i=s.length-1,o=!1;for(;i>=0;--i)a=s[i],a._active?(a._total>n.duration&&(n.duration=a._total),a.tick(e),o=!0):(s[i]=s[s.length-1],s.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),s.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=s.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var iP=new aP;const oP="transparent",lP={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=CD(e||oP),s=r.valid&&CD(t||oP);return s&&s.valid?s.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class cP{constructor(e,t,n,r){const s=t[n];r=cL([e.to,r,s,e.from]);const a=cL([e.from,s,r]);this._active=!0,this._fn=e.fn||lP[e.type||typeof a],this._easing=ND[e.easing]||ND.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,a=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=cL([e.to,t,r,e.from]),this._from=cL([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,s=this._from,a=this._loop,i=this._to;let o;if(this._active=s!==i&&(a||t<n),!this._active)return this._target[r]=i,void this._notify(!0);t<0?this._target[r]=s:(o=t/n%2,o=a&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(s,i,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class dP{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!xI(e))return;const t=Object.keys(UD.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!xI(s))return;const a={};for(const e of t)a[e]=s[e];(gI(s.properties)&&s.properties||[r]).forEach(e=>{e!==r&&n.has(e)||n.set(e,a)})})}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const t=e[r[s]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),s}_createAnimations(e,t){const n=this._properties,r=[],s=e.$animations||(e.$animations={}),a=Object.keys(t),i=Date.now();let o;for(o=a.length-1;o>=0;--o){const l=a[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let d=s[l];const u=n.get(l);if(d){if(u&&d.active()){d.update(u,c,i);continue}d.cancel()}u&&u.duration?(s[l]=d=new cP(u,e,l,c),r.push(d)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(iP.add(this._chart,n),!0):void 0}}function uP(e,t){const n=e&&e.options||{},r=n.reverse,s=void 0===n.min?t:0,a=void 0===n.max?t:0;return{start:r?a:s,end:r?s:a}}function hP(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,a;for(s=0,a=r.length;s<a;++s)n.push(r[s].index);return n}function AP(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=e.keys,a="single"===r.mode;let i,o,l,c;if(null===t)return;let d=!1;for(i=0,o=s.length;i<o;++i){if(l=+s[i],l===n){if(d=!0,r.all)continue;break}c=e.values[l],vI(c)&&(a||0===t||GI(t)===GI(c))&&(t+=c)}return d||r.all?t:0}function fP(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function pP(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function mP(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const t=e[s.index];if(n&&t>0||!n&&t<0)return s.index}return null}function gP(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:a,vScale:i,index:o}=r,l=a.axis,c=i.axis,d=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(a,i,r),u=t.length;let h;for(let A=0;A<u;++A){const e=t[A],{[l]:n,[c]:a}=e;h=(e._stacks||(e._stacks={}))[c]=pP(s,d,n),h[o]=a,h._top=mP(h,i,!0,r.type),h._bottom=mP(h,i,!1,r.type);(h._visualValues||(h._visualValues={}))[o]=a}}function xP(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function vP(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const bP=e=>"reset"===e||"none"===e,yP=(e,t)=>t?e:Object.assign({},e);class wP{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=fP(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&vP(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,s=t.xAxisID=yI(n.xAxisID,xP(e,"x")),a=t.yAxisID=yI(n.yAxisID,xP(e,"y")),i=t.rAxisID=yI(n.rAxisID,xP(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,s,a,i),c=t.vAxisID=r(o,a,s,i);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(i),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&hD(this._data,this),e._stacked&&vP(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(xI(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,s="x"===n.axis?"x":"y",a="x"===r.axis?"x":"y",i=Object.keys(e),o=new Array(i.length);let l,c,d;for(l=0,c=i.length;l<c;++l)d=i[l],o[l]={[s]:d,[a]:e[d]};return o}(t,e)}else if(n!==t){if(n){hD(n,this);const e=this._cachedMeta;vP(e),e._parsed=[]}t&&Object.isExtensible(t)&&(s=this,(r=t)._chartjs?r._chartjs.listeners.push(s):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),uD.forEach(e=>{const t="_onData"+DI(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];const i=n.apply(this,s);return r._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...s)}),i}})}))),this._syncList=[],this._data=t}var r,s}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=fP(t.vScale,t),t.stack!==n.stack&&(r=!0,vP(t),t.stack=n.stack),this._resyncElements(e),(r||s!==t._stacked)&&(gP(this,t._parsed),t._stacked=fP(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:s,_stacked:a}=n,i=s.axis;let o,l,c,d=0===e&&t===r.length||n._sorted,u=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=gI(r[e])?this.parseArrayData(n,r,e,t):xI(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const s=()=>null===l[i]||u&&l[i]<u[i];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],d&&(s()&&(d=!1),u=l);n._sorted=d}a&&gP(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:s,vScale:a}=e,i=s.axis,o=a.axis,l=s.getLabels(),c=s===a,d=new Array(r);let u,h,A;for(u=0,h=r;u<h;++u)A=u+n,d[u]={[i]:c||s.parse(l[A],A),[o]:a.parse(t[A],A)};return d}parseArrayData(e,t,n,r){const{xScale:s,yScale:a}=e,i=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+n,d=t[c],i[o]={x:s.parse(d[0],c),y:a.parse(d[1],c)};return i}parseObjectData(e,t,n,r){const{xScale:s,yScale:a}=e,{xAxisKey:i="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=t[u],l[c]={x:s.parse(II(h,i),u),y:a.parse(II(h,o),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,s=this._cachedMeta,a=t[e.axis];return AP({keys:hP(r,!0),values:t._stacks[e.axis]._visualValues},a,s.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const s=n[t.axis];let a=null===s?NaN:s;const i=r&&n._stacks[t.axis];r&&i&&(r.values=i,a=AP(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,s=n._sorted&&e===n.iScale,a=r.length,i=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:hP(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}(i);let u,h;function A(){h=r[u];const t=h[i.axis];return!vI(h[e.axis])||c>t||d<t}for(u=0;u<a&&(A()||(this.updateRangeFromParsed(l,e,h,o),!s));++u);if(s)for(u=a-1;u>=0;--u)if(!A()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,s,a;for(r=0,s=t.length;r<s;++r)a=t[r][e.axis],vI(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,s;return xI(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:!1===e}}(yI(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=uP(e,n),s=uP(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],s=t.chartArea,a=[],i=this._drawStart||0,o=this._drawCount||r.length-i,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,s,i,o),c=i;c<i+o;++c){const t=r[c];t.hidden||(t.active&&l?a.push(t):t.draw(e,s))}for(c=0;c<a.length;++c)a[c].draw(e,s)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];s=t.$context||(t.$context=function(e,t,n){return dL(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=function(e,t){return dL(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,s=this._cachedDataOpts,a=e+"-"+t,i=s[a],o=this.enableOptionSharing&&LI(n);if(i)return yP(i,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(UD.elements[e]),A=l.resolveNamedOptions(u,h,()=>this.getContext(n,r,t),d);return A.$shared&&(A.$shared=o,s[a]=Object.freeze(yP(A,o))),A}_resolveAnimations(e,t,n){const r=this.chart,s=this._cachedDataOpts,a="animation-".concat(t),i=s[a];if(i)return i;let o;if(!1!==r.options.animation){const r=this.chart.config,s=r.datasetAnimationScopeKeys(this._type,t),a=r.getOptionScopes(this.getDataset(),s);o=r.createResolver(a,this.getContext(e,n,t))}const l=new dP(r,o&&o.animations);return o&&o._cacheable&&(s[a]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||bP(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(n),a=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,n),{sharedOptions:s,includeOptions:a}}updateElement(e,t,n,r){bP(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!bP(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[i,o,l]of this._syncList)this[i](o,l);this._syncList=[];const r=n.length,s=t.length,a=Math.min(s,r);a&&this.parse(0,a),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,s=r.data,a=e+t;let i;const o=e=>{for(e.length+=t,i=e.length-1;i>=a;i--)e[i]=e[i-t]};for(o(s),i=e;i<a;++i)s[i]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(s,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&vP(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function NP(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,s=n.length;t<s;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=AD(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,s,a,i,o=t._length;const l=()=>{32767!==a&&-32768!==a&&(LI(i)&&(o=Math.min(o,Math.abs(a-i)||o)),i=a)};for(r=0,s=n.length;r<s;++r)a=t.getPixelForValue(n[r]),l();for(i=void 0,r=0,s=t.ticks.length;r<s;++r)a=t.getPixelForTick(r),l();return o}function jP(e,t,n,r){return gI(e)?function(e,t,n,r){const s=n.parse(e[0],r),a=n.parse(e[1],r),i=Math.min(s,a),o=Math.max(s,a);let l=i,c=o;Math.abs(i)>Math.abs(o)&&(l=o,c=i),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:a,min:i,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function CP(e,t,n,r){const s=e.iScale,a=e.vScale,i=s.getLabels(),o=s===a,l=[];let c,d,u,h;for(c=n,d=n+r;c<d;++c)h=t[c],u={},u[s.axis]=o||s.parse(i[c],c),l.push(jP(h,u,a,c));return l}function BP(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function kP(e,t,n,r){let s=t.borderSkipped;const a={};if(!s)return void(e.borderSkipped=a);if(!0===s)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:i,end:o,reverse:l,top:c,bottom:d}=function(e){let t,n,r,s,a;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(s="end",a="start"):(s="start",a="end"),{start:n,end:r,reverse:t,top:s,bottom:a}}(e);"middle"===s&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=d:(a[SP(d,i,o,l)]=!0,s=c)),a[SP(s,i,o,l)]=!0,e.borderSkipped=a}function SP(e,t,n,r){var s,a,i;return r?(i=n,e=_P(e=(s=e)===(a=t)?i:s===i?a:s,n,t)):e=_P(e,t,n),e}function _P(e,t,n){return"start"===e?t:"end"===e?n:e}function EP(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}(0,DT.A)(wP,"defaults",{}),(0,DT.A)(wP,"datasetElementType",null),(0,DT.A)(wP,"dataElementType",null);class FP extends wP{parsePrimitiveData(e,t,n,r){return CP(e,t,n,r)}parseArrayData(e,t,n,r){return CP(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:s,vScale:a}=e,{xAxisKey:i="x",yAxisKey:o="y"}=this._parsing,l="x"===s.axis?i:o,c="x"===a.axis?i:o,d=[];let u,h,A,f;for(u=n,h=n+r;u<h;++u)f=t[u],A={},A[s.axis]=s.parse(II(f,l),u),d.push(jP(II(f,c),A,a,u));return d}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const s=n._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,s=this.getParsed(e),a=s._custom,i=BP(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:i}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const s="reset"===r,{index:a,_cachedMeta:{vScale:i}}=this,o=i.getBasePixel(),l=i.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=s||mI(t[i.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),A=this._calculateBarIndexPixels(h,c),f=(t._stacks||{})[i.axis],p={horizontal:l,base:n.base,enableBorderRadius:!f||BP(t._custom)||a===f._top||a===f._bottom,x:l?n.head:A.center,y:l?A.center:n.head,height:l?A.size:Math.abs(n.size),width:l?Math.abs(n.size):A.size};u&&(p.options=d||this.resolveDataElementOptions(h,e[h].active?"active":r));const m=p.options||e[h].options;kP(p,m,f,a),EP(p,m,c.ratio),this.updateElement(e[h],h,p,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),s=n.options.stacked,a=[],i=this._cachedMeta.controller.getParsed(t),o=i&&i[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),r=t&&t[e.vScale.axis];if(mI(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===s||-1===a.indexOf(c.stack)||void 0===s&&void 0===c.stack)&&a.push(c.stack),c.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[yI("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const r=this._getStacks(e,n),s=void 0!==t?r.indexOf(t):-1;return-1===s?r.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let s,a;for(s=0,a=t.data.length;s<a;++s)r.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const i=e.barThickness;return{min:i||NP(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:i?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:s,minBarLength:a}}=this,i=s||0,o=this.getParsed(e),l=o._custom,c=BP(l);let d,u,h=o[t.axis],A=0,f=n?this.applyStack(t,o,n):h;f!==h&&(A=f-h,f=h),c&&(h=l.barStart,f=l.barEnd-l.barStart,0!==h&&GI(h)!==GI(l.barEnd)&&(A=0),A+=h);const p=mI(s)||c?A:s;let m=t.getPixelForValue(p);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(A+f):m,u=d-m,Math.abs(u)<a){u=function(e,t,n){return 0!==e?GI(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(u,t,i)*a,h===i&&(m-=u/2);const e=t.getPixelForDecimal(0),s=t.getPixelForDecimal(1),l=Math.min(e,s),A=Math.max(e,s);m=Math.max(Math.min(m,A),l),d=m+u,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(d)-t.getValueForPixel(m))}if(m===t.getPixelForValue(i)){const e=GI(u)*t.getLineWidthForValue(i)/2;m+=e,u-=e}return{size:u,base:m,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,s=r.skipNull,a=yI(r.maxBarThickness,1/0);let i,o;const l=this._getAxisCount();if(t.grouped){const n=s?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,n,r){const s=t.pixels,a=s[e];let i=e>0?s[e-1]:null,o=e<s.length-1?s[e+1]:null;const l=n.categoryPercentage;null===i&&(i=a-(null===o?t.end-t.start:o-a)),null===o&&(o=a+a-i);const c=a-(a-Math.min(i,o))/2*l;return{chunk:Math.abs(o-i)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n*l):function(e,t,n,r){const s=n.barThickness;let a,i;return mI(s)?(a=t.min*n.categoryPercentage,i=n.barPercentage):(a=s*r,i=1),{chunk:a/r,ratio:i,start:t.pixels[e]-a/2}}(e,t,r,n*l),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(yI(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+u;i=c.start+c.chunk*h+c.chunk/2,o=Math.min(a,c.chunk*c.ratio)}else i=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(a,t.min*t.ratio);return{base:i-o/2,head:i+o/2,center:i,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let s=0;for(;s<r;++s)null===this.getParsed(s)[t.axis]||n[s].hidden||n[s].draw(this._ctx)}}(0,DT.A)(FP,"id","bar"),(0,DT.A)(FP,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,DT.A)(FP,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class TP extends wP{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const s=super.parsePrimitiveData(e,t,n,r);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+n).radius;return s}parseArrayData(e,t,n,r){const s=super.parseArrayData(e,t,n,r);for(let a=0;a<s.length;a++){const e=t[n+a];s[a]._custom=yI(e[2],this.resolveDataElementOptions(a+n).radius)}return s}parseObjectData(e,t,n,r){const s=super.parseObjectData(e,t,n,r);for(let a=0;a<s.length;a++){const e=t[n+a];s[a]._custom=yI(e&&e.r&&+e.r,this.resolveDataElementOptions(a+n).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,a=this.getParsed(e),i=r.getLabelForValue(a.x),o=s.getLabelForValue(a.y),l=a._custom;return{label:n[e]||"",value:"("+i+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const s="reset"===r,{iScale:a,vScale:i}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=a.axis,d=i.axis;for(let u=t;u<t+n;u++){const t=e[u],n=!s&&this.getParsed(u),h={},A=h[c]=s?a.getPixelForDecimal(.5):a.getPixelForValue(n[c]),f=h[d]=s?i.getBasePixel():i.getPixelForValue(n[d]);h.skip=isNaN(A)||isNaN(f),l&&(h.options=o||this.resolveDataElementOptions(u,t.active?"active":r),s&&(h.options.radius=0)),this.updateElement(t,u,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return"active"!==t&&(r.radius=0),r.radius+=yI(n&&n._custom,s),r}}(0,DT.A)(TP,"id","bubble"),(0,DT.A)(TP,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,DT.A)(TP,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class IP extends wP{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let s,a,i=e=>+n[e];if(xI(n[e])){const{key:e="value"}=this._parsing;i=t=>+II(n[t],e)}for(s=e,a=e+t;s<a;++s)r._parsed[s]=i(s)}}_getRotation(){return ZI(this.options.rotation-90)}_getCircumference(){return ZI(this.options.circumference)}_getRotationExtents(){let e=OI,t=-OI;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,s=r._getRotation(),a=r._getCircumference();e=Math.min(e,s),t=Math.max(t,s+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,s=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,i=Math.max((Math.min(n.width,n.height)-a)/2,0),o=Math.min((l=this.options.cutout,c=i,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:A,ratioY:f,offsetX:p,offsetY:m}=function(e,t,n){let r=1,s=1,a=0,i=0;if(t<OI){const o=e,l=o+t,c=Math.cos(o),d=Math.sin(o),u=Math.cos(l),h=Math.sin(l),A=(e,t,r)=>aD(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),f=(e,t,r)=>aD(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),p=A(0,c,u),m=A(zI,d,h),g=f(UI,c,u),x=f(UI+zI,d,h);r=(p-g)/2,s=(m-x)/2,a=-(p+g)/2,i=-(m+x)/2}return{ratioX:r,ratioY:s,offsetX:a,offsetY:i}}(h,u,o),g=(n.width-a)/A,x=(n.height-a)/f,v=Math.max(Math.min(g,x)/2,0),b=wI(this.options.radius,v),y=(b-Math.max(b*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*b,this.offsetY=m*b,r.total=this.calculateTotal(),this.outerRadius=b-y*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-y*d,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,s=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/OI)}updateElements(e,t,n,r){const s="reset"===r,a=this.chart,i=a.chartArea,o=a.options.animation,l=(i.left+i.right)/2,c=(i.top+i.bottom)/2,d=s&&o.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:A,includeOptions:f}=this._getSharedOptions(t,r);let p,m=this._getRotation();for(p=0;p<t;++p)m+=this._circumference(p,s);for(p=t;p<t+n;++p){const t=this._circumference(p,s),n=e[p],a={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:h,innerRadius:u};f&&(a.options=A||this.resolveDataElementOptions(p,n.active?"active":r)),m+=t,this.updateElement(n,p,a,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const s=e._parsed[n];null===s||isNaN(s)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?OI*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=ED(t._parsed[e],n.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,s,a,i,o;if(!e)for(r=0,s=n.data.datasets.length;r<s;++r)if(n.isDatasetVisible(r)){a=n.getDatasetMeta(r),e=a.data,i=a.controller;break}if(!e)return 0;for(r=0,s=e.length;r<s;++r)o=i.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(yI(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,DT.A)(IP,"id","doughnut"),(0,DT.A)(IP,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,DT.A)(IP,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,DT.A)(IP,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:n,textAlign:r,color:s,useBorderRadius:a,borderRadius:i}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((t,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:t,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(o),lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:l.borderWidth,strokeStyle:l.borderColor,textAlign:r,pointStyle:n,borderRadius:a&&(i||l.borderRadius),index:o}}):[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class DP extends wP{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:s}=t,a=this.chart._animationsDisabled;let{start:i,count:o}=xD(t,r,a);this._drawStart=i,this._drawCount=o,vD(t)&&(i=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:l},e),this.updateElements(r,i,o,e)}updateElements(e,t,n,r){const s="reset"===r,{iScale:a,vScale:i,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,r),u=a.axis,h=i.axis,{spanGaps:A,segment:f}=this.options,p=YI(A)?A:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||s||"none"===r,g=t+n,x=e.length;let v=t>0&&this.getParsed(t-1);for(let b=0;b<x;++b){const n=e[b],A=m?n:{};if(b<t||b>=g){A.skip=!0;continue}const x=this.getParsed(b),y=mI(x[h]),w=A[u]=a.getPixelForValue(x[u],b),N=A[h]=s||y?i.getBasePixel():i.getPixelForValue(o?this.applyStack(i,x,o):x[h],b);A.skip=isNaN(w)||isNaN(N)||y,A.stop=b>0&&Math.abs(x[u]-v[u])>p,f&&(A.parsed=x,A.raw=l.data[b]),d&&(A.options=c||this.resolveDataElementOptions(b,n.active?"active":r)),m||this.updateElement(n,b,A,r),v=x}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const s=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,s,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,DT.A)(DP,"id","line"),(0,DT.A)(DP,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,DT.A)(DP,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class LP extends wP{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=ED(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,t,n,r){return jL.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(r/2,0),a=(s-Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,n,r){const s="reset"===r,a=this.chart,i=a.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,d=o.getIndexAngle(0)-.5*UI;let u,h=d;const A=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,r,A);for(u=t;u<t+n;u++){const t=e[u];let n=h,f=h+this._computeAngle(u,r,A),p=a.getDataVisibility(u)?o.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=f,s&&(i.animateScale&&(p=0),i.animateRotate&&(n=f=d));const m={x:l,y:c,innerRadius:0,outerRadius:p,startAngle:n,endAngle:f,options:this.resolveDataElementOptions(u,t.active?"active":r)};this.updateElement(t,u,m,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?ZI(this.resolveDataElementOptions(e,t).angle||n):0}}(0,DT.A)(LP,"id","polarArea"),(0,DT.A)(LP,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,DT.A)(LP,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,s)=>{const a=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class PP extends IP{}(0,DT.A)(PP,"id","pie"),(0,DT.A)(PP,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class RP extends wP{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return jL.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],s=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:t};this.updateElement(n,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const s=this._cachedMeta.rScale,a="reset"===r;for(let i=t;i<t+n;i++){const t=e[i],n=this.resolveDataElementOptions(i,t.active?"active":r),o=s.getPointPositionForValue(i,this.getParsed(i).r),l=a?s.xCenter:o.x,c=a?s.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,i,d,r)}}}(0,DT.A)(RP,"id","radar"),(0,DT.A)(RP,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,DT.A)(RP,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class UP extends wP{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,a=this.getParsed(e),i=r.getLabelForValue(a.x),o=s.getLabelForValue(a.y);return{label:n[e]||"",value:"("+i+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:s,count:a}=xD(t,n,r);if(this._drawStart=s,this._drawCount=a,vD(t)&&(s=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:s,_dataset:a}=t;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!a._decimated,s.points=n;const i=this.resolveDatasetElementOptions(e);i.segment=this.options.segment,this.updateElement(s,void 0,{animated:!r,options:i},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,s,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const s="reset"===r,{iScale:a,vScale:i,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(c),u=this.includeOptions(r,d),h=a.axis,A=i.axis,{spanGaps:f,segment:p}=this.options,m=YI(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||s||"none"===r;let x=t>0&&this.getParsed(t-1);for(let v=t;v<t+n;++v){const t=e[v],n=this.getParsed(v),c=g?t:{},f=mI(n[A]),b=c[h]=a.getPixelForValue(n[h],v),y=c[A]=s||f?i.getBasePixel():i.getPixelForValue(o?this.applyStack(i,n,o):n[A],v);c.skip=isNaN(b)||isNaN(y)||f,c.stop=v>0&&Math.abs(n[h]-x[h])>m,p&&(c.parsed=n,c.raw=l.data[v]),u&&(c.options=d||this.resolveDataElementOptions(v,t.active?"active":r)),g||this.updateElement(t,v,c,r),x=n}this.updateSharedOptions(d,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const s=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,s,a)/2}}(0,DT.A)(UP,"id","scatter"),(0,DT.A)(UP,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,DT.A)(UP,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function OP(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class MP{static override(e){Object.assign(MP.prototype,e)}constructor(e){(0,DT.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return OP()}parse(){return OP()}format(){return OP()}add(){return OP()}diff(){return OP()}startOf(){return OP()}endOf(){return OP()}}var QP=MP;function HP(e,t,n,r){const{controller:s,data:a,_sorted:i}=e,o=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&i&&a.length){const i=o._reversePixels?dD:cD;if(!r){const r=i(a,t,n);if(l){const{vScale:t}=s._cachedMeta,{_parsed:n}=e,a=n.slice(0,r.lo+1).reverse().findIndex(e=>!mI(e[t.axis]));r.lo-=Math.max(0,a);const i=n.slice(r.hi).findIndex(e=>!mI(e[t.axis]));r.hi+=Math.max(0,i)}return r}if(s._sharedOptions){const e=a[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=i(a,t,n-r),s=i(a,t,n+r);return{lo:e.lo,hi:s.hi}}}}return{lo:0,hi:a.length-1}}function zP(e,t,n,r,s){const a=e.getSortedVisibleDatasetMetas(),i=n[t];for(let o=0,l=a.length;o<l;++o){const{index:e,data:n}=a[o],{lo:l,hi:c}=HP(a[o],t,i,s);for(let t=l;t<=c;++t){const s=n[t];s.skip||r(s,e,t)}}}function WP(e,t,n,r,s){const a=[];if(!s&&!e.isPointInArea(t))return a;return zP(e,n,t,function(n,i,o){(s||VD(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&a.push({element:n,datasetIndex:i,index:o})},!0),a}function VP(e,t,n,r,s,a){let i=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const s=t?Math.abs(e.x-r.x):0,a=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}(n);let l=Number.POSITIVE_INFINITY;return zP(e,n,t,function(n,c,d){const u=n.inRange(t.x,t.y,s);if(r&&!u)return;const h=n.getCenterPoint(s);if(!(!!a||e.isPointInArea(h))&&!u)return;const A=o(t,h);A<l?(i=[{element:n,datasetIndex:c,index:d}],l=A):A===l&&i.push({element:n,datasetIndex:c,index:d})}),i}function KP(e,t,n,r,s,a){return a||e.isPointInArea(t)?"r"!==n||r?VP(e,t,n,r,s,a):function(e,t,n,r){let s=[];return zP(e,n,t,function(e,n,a){const{startAngle:i,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=tD(e,{x:t.x,y:t.y});aD(l,i,o)&&s.push({element:e,datasetIndex:n,index:a})}),s}(e,t,n,s):[]}function GP(e,t,n,r,s){const a=[],i="x"===n?"inXRange":"inYRange";let o=!1;return zP(e,n,t,(e,r,l)=>{e[i]&&e[i](t[n],s)&&(a.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,s))}),r&&!o?[]:a}var qP={evaluateInteractionItems:zP,modes:{index(e,t,n,r){const s=UL(t,e),a=n.axis||"x",i=n.includeInvisible||!1,o=n.intersect?WP(e,s,a,r,i):KP(e,s,a,!1,r,i),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,r){const s=UL(t,e),a=n.axis||"xy",i=n.includeInvisible||!1;let o=n.intersect?WP(e,s,a,r,i):KP(e,s,a,!1,r,i);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>WP(e,UL(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const s=UL(t,e),a=n.axis||"xy",i=n.includeInvisible||!1;return KP(e,s,a,n.intersect,r,i)},x:(e,t,n,r)=>GP(e,UL(t,e),"x",n.intersect,r),y:(e,t,n,r)=>GP(e,UL(t,e),"y",n.intersect,r)}};const XP=["left","top","right","bottom"];function YP(e,t){return e.filter(e=>e.pos===t)}function JP(e,t){return e.filter(e=>-1===XP.indexOf(e.pos)&&e.box.axis===t)}function ZP(e,t){return e.sort((e,n)=>{const r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function $P(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:s}=n;if(!e||!XP.includes(r))continue;const a=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let a,i,o;for(a=0,i=e.length;a<i;++a){o=e[a];const{fullSize:i}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:i&&t.availableWidth,o.height=s):(o.width=r,o.height=c?c*s:i&&t.availableHeight)}return n}function eR(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function tR(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function nR(e,t,n,r){const{pos:s,box:a}=n,i=e.maxPadding;if(!xI(s)){n.size&&(e[s]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?a.height:a.width),n.size=t.size/t.count,e[s]+=n.size}a.getPadding&&tR(i,a.getPadding());const o=Math.max(0,t.outerWidth-eR(i,e,"left","right")),l=Math.max(0,t.outerHeight-eR(i,e,"top","bottom")),c=o!==e.w,d=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function rR(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],n[e])}),r}return r(e?["left","right"]:["top","bottom"])}function sR(e,t,n,r){const s=[];let a,i,o,l,c,d;for(a=0,i=e.length,c=0;a<i;++a){o=e[a],l=o.box,l.update(o.width||t.w,o.height||t.h,rR(o.horizontal,t));const{same:i,other:u}=nR(t,n,o,r);c|=i&&s.length,d=d||u,l.fullSize||s.push(o)}return c&&sR(s,t,n,r)||d}function aR(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function iR(e,t,n,r){const s=n.padding;let{x:a,y:i}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,a=l.size||e.height;LI(l.start)&&(i=l.start),e.fullSize?aR(e,s.left,i,n.outerWidth-s.right-s.left,a):aR(e,t.left+l.placed,i,r,a),l.start=i,l.placed+=r,i=e.bottom}else{const r=t.h*c,i=l.size||e.width;LI(l.start)&&(a=l.start),e.fullSize?aR(e,a,s.top,i,n.outerHeight-s.bottom-s.top):aR(e,a,t.top+l.placed,i,r),l.start=a,l.placed+=r,a=e.right}}t.x=a,t.y=i}var oR={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=oL(e.options.layout.padding),a=Math.max(t-s.width,0),i=Math.max(n-s.height,0),o=function(e){const t=function(e){const t=[];let n,r,s,a,i,o;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],({position:a,options:{stack:i,stackWeight:o=1}}=s),t.push({index:n,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:i&&a+i,stackWeight:o});return t}(e),n=ZP(t.filter(e=>e.box.fullSize),!0),r=ZP(YP(t,"left"),!0),s=ZP(YP(t,"right")),a=ZP(YP(t,"top"),!0),i=ZP(YP(t,"bottom")),o=JP(t,"x"),l=JP(t,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:s.concat(l).concat(i).concat(o),chartArea:YP(t,"chartArea"),vertical:r.concat(s).concat(l),horizontal:a.concat(i).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;jI(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const d=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:a,availableHeight:i,vBoxMaxWidth:a/2/d,hBoxMaxHeight:i/2}),h=Object.assign({},s);tR(h,oL(r));const A=Object.assign({maxPadding:h,w:a,h:i,x:s.left,y:s.top},s),f=$P(l.concat(c),u);sR(o.fullSize,A,u,f),sR(l,A,u,f),sR(c,A,u,f)&&sR(l,A,u,f),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(A),iR(o.leftAndTop,A,u,f),A.x+=A.w,A.y+=A.h,iR(o.rightAndBottom,A,u,f),e.chartArea={left:A.left,top:A.top,right:A.left+A.w,bottom:A.top+A.h,height:A.h,width:A.w},jI(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(A.w,A.h,{left:0,top:0,right:0,bottom:0})})}};class lR{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class cR extends lR{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const dR="$chartjs",uR={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hR=e=>null===e||""===e;const AR=!!HL&&{passive:!0};function fR(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,AR)}function pR(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function mR(e,t,n){const r=e.canvas,s=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||pR(n.addedNodes,r),t=t&&!pR(n.removedNodes,r);t&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function gR(e,t,n){const r=e.canvas,s=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||pR(n.removedNodes,r),t=t&&!pR(n.addedNodes,r);t&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const xR=new Map;let vR=0;function bR(){const e=window.devicePixelRatio;e!==vR&&(vR=e,xR.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function yR(e,t,n){const r=e.canvas,s=r&&IL(r);if(!s)return;const a=pD((e,t)=>{const r=s.clientWidth;n(e,t),r<s.clientWidth&&n()},window),i=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||a(n,r)});return i.observe(s),function(e,t){xR.size||window.addEventListener("resize",bR),xR.set(e,t)}(e,a),i}function wR(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){xR.delete(e),xR.size||window.removeEventListener("resize",bR)}(e)}function NR(e,t,n){const r=e.canvas,s=pD(t=>{null!==e.ctx&&n(function(e,t){const n=uR[e.type]||e.type,{x:r,y:s}=UL(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==s?s:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,AR)}(r,t,s),s}class jR extends lR{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[dR]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",hR(s)){const t=zL(e,"width");void 0!==t&&(e.width=t)}if(hR(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=zL(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[dR])return!1;const n=t[dR].initial;["height","width"].forEach(e=>{const r=n[e];mI(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=n.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[dR],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),s={attach:mR,detach:gR,resize:yR}[t]||NR;r[t]=s(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:wR,detach:wR,resize:wR}[t]||fR)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return ML(e,t,n,r)}isAttached(e){const t=e&&IL(e);return!(!t||!t.isConnected)}}class CR{constructor(){(0,DT.A)(this,"x",void 0),(0,DT.A)(this,"y",void 0),(0,DT.A)(this,"active",!1),(0,DT.A)(this,"options",void 0),(0,DT.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return YI(this.x)&&YI(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),r}}function BR(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}(e),s=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],i=a.length,o=a[0],l=a[i-1],c=[];if(i>s)return function(e,t,n,r){let s,a=0,i=n[0];for(r=Math.ceil(r),s=0;s<e.length;s++)s===i&&(t.push(e[s]),a++,i=n[a*r])}(t,c,a,i/s),c;const d=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),s=t.length/n;if(!r)return Math.max(s,1);const a=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(r);for(let i=0,o=a.length-1;i<o;i++){const e=a[i];if(e>s)return e}return Math.max(s,1)}(a,t,s);if(i>0){let e,n;const r=i>1?Math.round((l-o)/(i-1)):null;for(kR(t,c,d,mI(r)?0:o-r,o),e=0,n=i-1;e<n;e++)kR(t,c,d,a[e],a[e+1]);return kR(t,c,d,l,mI(r)?t.length:l+r),c}return kR(t,c,d),c}function kR(e,t,n,r,s){const a=yI(r,0),i=Math.min(yI(s,e.length),e.length);let o,l,c,d=0;for(n=Math.ceil(n),s&&(o=s-r,n=o/Math.floor(o/n)),c=a;c<0;)d++,c=Math.round(a+d*n);for(l=Math.max(a,0);l<i;l++)l===c&&(t.push(e[l]),d++,c=Math.round(a+d*n))}(0,DT.A)(CR,"defaults",{}),(0,DT.A)(CR,"defaultRoutes",void 0);const SR=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,_R=(e,t)=>Math.min(t||e,e);function ER(e,t){const n=[],r=e.length/t,s=e.length;let a=0;for(;a<s;a+=r)n.push(e[Math.floor(a)]);return n}function FR(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),a=e._startPixel,i=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(s);if(!(n&&(l=1===r?Math.max(c-a,i-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(s-1))/2,c+=s<t?l:-l,c<a-o||c>i+o)))return c}function TR(e){return e.drawTicks?e.tickLength:0}function IR(e,t){if(!e.display)return 0;const n=lL(e.font,t),r=oL(e.padding);return(gI(e.text)?e.text.length:1)*n.lineHeight+r.height}function DR(e,t,n){let r=mD(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class LR extends CR{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=bI(e,Number.POSITIVE_INFINITY),t=bI(t,Number.NEGATIVE_INFINITY),n=bI(n,Number.POSITIVE_INFINITY),r=bI(r,Number.NEGATIVE_INFINITY),{min:bI(e,n),max:bI(t,r),minDefined:vI(e),maxDefined:vI(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:s,maxDefined:a}=this.getUserBounds();if(s&&a)return{min:n,max:r};const i=this.getMatchingVisibleMetas();for(let o=0,l=i.length;o<l;++o)t=i[o].controller.getMinMax(this,e),s||(n=Math.min(n,t.min)),a||(r=Math.max(r,t.max));return n=a&&n>r?r:n,r=s&&n>r?n:r,{min:bI(n,bI(r,n)),max:bI(r,bI(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){NI(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:s,ticks:a}=this.options,i=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:s}=e,a=wI(t,(s-r)/2),i=(e,t)=>n&&0===e?0:e+t;return{min:i(r,-Math.abs(a)),max:i(s,a)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=i<this.ticks.length;this._convertTicksToLabels(o?ER(this.ticks,i):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=BR(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){NI(this.options.afterUpdate,[this])}beforeSetDimensions(){NI(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){NI(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),NI(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){NI(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,s;for(n=0,r=e.length;n<r;n++)s=e[n],s.label=NI(t.callback,[s.value,n,e],this)}afterTickToLabelConversion(){NI(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){NI(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=_R(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let a,i,o,l=r;if(!this._isVisible()||!t.display||r>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=iD(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/n:h/(n-1),d+6>a&&(a=h/(n-(e.offset?.5:1)),i=this.maxHeight-TR(e.grid)-t.padding-IR(e.title,this.chart.options.font),o=Math.sqrt(d*d+u*u),l=$I(Math.min(Math.asin(iD((c.highest.height+6)/a,-1,1)),Math.asin(iD(i/o,-1,1))-Math.asin(iD(u/o,-1,1)))),l=Math.max(r,Math.min(s,l))),this.labelRotation=l}afterCalculateLabelRotation(){NI(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){NI(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:s}}=this,a=this._isVisible(),i=this.isHorizontal();if(a){const a=IR(r,t.options.font);if(i?(e.width=this.maxWidth,e.height=TR(s)+a):(e.height=this.maxHeight,e.width=TR(s)+a),n.display&&this.ticks.length){const{first:t,last:r,widest:s,highest:a}=this._getLabelSizes(),o=2*n.padding,l=ZI(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(i){const t=n.mirror?0:d*s.width+c*a.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*s.width+d*a.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,d,c)}}this._handleMargins(),i?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:s,padding:a},position:i}=this.options,o=0!==this.labelRotation,l="top"!==i&&"x"===this.axis;if(this.isHorizontal()){const i=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;o?l?(d=r*e.width,u=n*t.height):(d=n*e.height,u=r*t.width):"start"===s?u=t.width:"end"===s?d=e.width:"inner"!==s&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-i+a)*this.width/(this.width-i),0),this.paddingRight=Math.max((u-c+a)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===s?(n=0,r=e.height):"end"===s&&(n=t.height,r=0),this.paddingTop=n+a,this.paddingBottom=r+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){NI(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)mI(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=ER(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:s}=this,a=[],i=[],o=Math.floor(t/_R(t,n));let l,c,d,u,h,A,f,p,m,g,x,v=0,b=0;for(l=0;l<t;l+=o){if(u=e[l].label,h=this._resolveTickFontOptions(l),r.font=A=h.string,f=s[A]=s[A]||{data:{},gc:[]},p=h.lineHeight,m=g=0,mI(u)||gI(u)){if(gI(u))for(c=0,d=u.length;c<d;++c)x=u[c],mI(x)||gI(x)||(m=OD(r,f.data,f.gc,m,x),g+=p)}else m=OD(r,f.data,f.gc,m,u),g=p;a.push(m),i.push(g),v=Math.max(m,v),b=Math.max(g,b)}!function(e,t){jI(e,e=>{const n=e.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}})}(s,t);const y=a.indexOf(v),w=i.indexOf(b),N=e=>({width:a[e]||0,height:i[e]||0});return{first:N(0),last:N(t-1),widest:N(y),highest:N(w),widths:a,heights:i}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return iD(this._alignToPixels?QD(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return dL(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return dL(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=ZI(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,i=s?s.widest.width+a:0,o=s?s.highest.height+a:0;return this.isHorizontal()?o*n>i*r?i/n:o/r:o*r<i*n?o/n:i/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:s,position:a,border:i}=r,o=s.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),d=TR(s),u=[],h=i.setContext(this.getContext()),A=h.display?h.width:0,f=A/2,p=function(e){return QD(n,e,A)};let m,g,x,v,b,y,w,N,j,C,B,k;if("top"===a)m=p(this.bottom),y=this.bottom-d,N=m-f,C=p(e.top)+f,k=e.bottom;else if("bottom"===a)m=p(this.top),C=e.top,k=p(e.bottom)-f,y=m+f,N=this.top+d;else if("left"===a)m=p(this.right),b=this.right-d,w=m-f,j=p(e.left)+f,B=e.right;else if("right"===a)m=p(this.left),j=e.left,B=p(e.right)-f,b=m+f,w=this.left+d;else if("x"===t){if("center"===a)m=p((e.top+e.bottom)/2+.5);else if(xI(a)){const e=Object.keys(a)[0],t=a[e];m=p(this.chart.scales[e].getPixelForValue(t))}C=e.top,k=e.bottom,y=m+f,N=y+d}else if("y"===t){if("center"===a)m=p((e.left+e.right)/2);else if(xI(a)){const e=Object.keys(a)[0],t=a[e];m=p(this.chart.scales[e].getPixelForValue(t))}b=m-f,w=b-d,j=e.left,B=e.right}const S=yI(r.ticks.maxTicksLimit,c),_=Math.max(1,Math.ceil(c/S));for(g=0;g<c;g+=_){const e=this.getContext(g),t=s.setContext(e),r=i.setContext(e),a=t.lineWidth,c=t.color,d=r.dash||[],h=r.dashOffset,A=t.tickWidth,f=t.tickColor,p=t.tickBorderDash||[],m=t.tickBorderDashOffset;x=FR(this,g,o),void 0!==x&&(v=QD(n,x,a),l?b=w=j=B=v:y=N=C=k=v,u.push({tx1:b,ty1:y,tx2:w,ty2:N,x1:j,y1:C,x2:B,y2:k,width:a,color:c,borderDash:d,borderDashOffset:h,tickWidth:A,tickColor:f,tickBorderDash:p,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,u}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:s}=n,a=this.isHorizontal(),i=this.ticks,{align:o,crossAlign:l,padding:c,mirror:d}=s,u=TR(n.grid),h=u+c,A=d?-c:h,f=-ZI(this.labelRotation),p=[];let m,g,x,v,b,y,w,N,j,C,B,k,S="middle";if("top"===r)y=this.bottom-A,w=this._getXAxisLabelAlignment();else if("bottom"===r)y=this.top+A,w=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(u);w=e.textAlign,b=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(u);w=e.textAlign,b=e.x}else if("x"===t){if("center"===r)y=(e.top+e.bottom)/2+h;else if(xI(r)){const e=Object.keys(r)[0],t=r[e];y=this.chart.scales[e].getPixelForValue(t)+h}w=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)b=(e.left+e.right)/2-h;else if(xI(r)){const e=Object.keys(r)[0],t=r[e];b=this.chart.scales[e].getPixelForValue(t)}w=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===o?S="top":"end"===o&&(S="bottom"));const _=this._getLabelSizes();for(m=0,g=i.length;m<g;++m){x=i[m],v=x.label;const e=s.setContext(this.getContext(m));N=this.getPixelForTick(m)+s.labelOffset,j=this._resolveTickFontOptions(m),C=j.lineHeight,B=gI(v)?v.length:1;const t=B/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let u,h=w;if(a?(b=N,"inner"===w&&(h=m===g-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),k="top"===r?"near"===l||0!==f?-B*C+C/2:"center"===l?-_.highest.height/2-t*C+C:-_.highest.height+C/2:"near"===l||0!==f?C/2:"center"===l?_.highest.height/2-t*C:_.highest.height-B*C,d&&(k*=-1),0===f||e.showLabelBackdrop||(b+=C/2*Math.sin(f))):(y=N,k=(1-B)*C/2),e.showLabelBackdrop){const t=oL(e.backdropPadding),n=_.heights[m],r=_.widths[m];let s=k-t.top,a=0-t.left;switch(S){case"middle":s-=n/2;break;case"bottom":s-=n}switch(w){case"center":a-=r/2;break;case"right":a-=r;break;case"inner":m===g-1?a-=r:m>0&&(a-=r/2)}u={left:a,top:s,width:r+t.width,height:n+t.height,color:e.backdropColor}}p.push({label:v,font:j,textOffset:k,options:{rotation:f,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:S,translation:[b,y],backdrop:u}})}return p}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-ZI(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,a=e+s,i=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+s,"near"===n?o="left":"center"===n?(o="center",l+=i/2):(o="right",l+=i)):(l=this.right-a,"near"===n?o="right":"center"===n?(o="center",l-=i/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+s,"near"===n?o="right":"center"===n?(o="center",l-=i/2):(o="left",l-=i)):(l=this.left+a,"near"===n?o="left":"center"===n?(o="center",l+=i/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:s,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,s,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,a;const i=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(s=0,a=r.length;s<a;++s){const e=r[s];t.drawOnChartArea&&i({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&i({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,s=n.setContext(this.getContext()),a=n.display?s.width:0;if(!a)return;const i=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=QD(e,this.left,a)-a/2,c=QD(e,this.right,i)+i/2,d=u=o):(d=QD(e,this.top,a)-a/2,u=QD(e,this.bottom,i)+i/2,l=c=o),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&KD(t,n);const r=this.getLabelItems(e);for(const s of r){const e=s.options,n=s.font;ZD(t,s.label,0,s.textOffset,n,e)}n&&GD(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const s=lL(n.font),a=oL(n.padding),i=n.align;let o=s.lineHeight/2;"bottom"===t||"center"===t||xI(t)?(o+=a.bottom,gI(n.text)&&(o+=s.lineHeight*(n.text.length-1))):o+=a.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,n,r){const{top:s,left:a,bottom:i,right:o,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,A,f=0;const p=i-s,m=o-a;if(e.isHorizontal()){if(h=gD(r,a,o),xI(n)){const e=Object.keys(n)[0],r=n[e];A=d[e].getPixelForValue(r)+p-t}else A="center"===n?(c.bottom+c.top)/2+p-t:SR(e,n,t);u=o-a}else{if(xI(n)){const e=Object.keys(n)[0],r=n[e];h=d[e].getPixelForValue(r)-m+t}else h="center"===n?(c.left+c.right)/2-m+t:SR(e,n,t);A=gD(r,i,s),f="left"===n?-zI:zI}return{titleX:h,titleY:A,maxWidth:u,rotation:f}}(this,o,t,i);ZD(e,n.text,0,0,s,{color:n.color,maxWidth:d,rotation:u,textAlign:DR(i,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=yI(e.grid&&e.grid.z,-1),r=yI(e.border&&e.border.z,0);return this._isVisible()&&this.draw===LR.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,a;for(s=0,a=t.length;s<a;++s){const a=t[s];a[n]!==this.id||e&&a.type!==e||r.push(a)}return r}_resolveTickFontOptions(e){return lL(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class PR{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,function(e,t,n){const r=_I(Object.create(null),[n?UD.get(n):{},UD.get(t),e.defaults]);UD.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),s=r.pop(),a=[e].concat(r).join("."),i=t[n].split("."),o=i.pop(),l=i.join(".");UD.route(a,s,l,o)})}(t,e.defaultRoutes);e.descriptors&&UD.describe(t,e.descriptors)}(e,a,n),this.override&&UD.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in UD[r]&&(delete UD[r][n],this.override&&delete ID[n])}}class RR{constructor(){this.controllers=new PR(wP,"datasets",!0),this.elements=new PR(CR,"elements"),this.plugins=new PR(Object,"plugins"),this.scales=new PR(LR,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):jI(t,t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,n){const r=DI(e);NI(n["before"+r],[],n),t[e](n),NI(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var UR=new RR;class OR{constructor(){this._init=void 0}notify(e,t,n,r){if("beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),void 0===this._init)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(s,e,t,n);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,t,n,r){r=r||{};for(const s of e){const e=s.plugin;if(!1===NI(e[n],[t,r,s.options],e)&&r.cancelable)return!1}return!0}invalidate(){mI(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=yI(n.options&&n.options.plugins,{}),s=function(e){const t={},n=[],r=Object.keys(UR.plugins.items);for(let a=0;a<r.length;a++)n.push(UR.getPlugin(r[a]));const s=e.plugins||[];for(let a=0;a<s.length;a++){const e=s[a];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:s,localIds:a}=t;const i=[],o=e.getContext();for(const l of s){const t=l.id,s=MR(n[t],r);null!==s&&i.push({plugin:l,options:QR(e.config,{plugin:l,local:a[t]},s,o)})}return i}(e,s,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function MR(e,t){return t||!1!==e?!0===e?{}:e:null}function QR(e,t,n,r){let{plugin:s,local:a}=t;const i=e.pluginScopeKeys(s),o=e.getOptionScopes(n,i);return a&&s.defaults&&o.push(s.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function HR(e,t){const n=UD.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function zR(e){if("x"===e||"y"===e||"r"===e)return e}function WR(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function VR(e){if(zR(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const s of n){const t=s.axis||WR(s.position)||e.length>1&&zR(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function KR(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function GR(e,t){const n=ID[e.type]||{scales:{}},r=t.scales||{},s=HR(e.type,t),a=Object.create(null);return Object.keys(r).forEach(t=>{const i=r[t];if(!xI(i))return console.error("Invalid scale configuration for scale: ".concat(t));if(i._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=VR(t,i,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return KR(e,"x",n[0])||KR(e,"y",n[0])}return{}}(t,e),UD.scales[i.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,s),c=n.scales||{};a[t]=EI(Object.create(null),[{axis:o},i,c[o],c[l]])}),e.data.datasets.forEach(n=>{const s=n.type||e.type,i=n.indexAxis||HR(s,t),o=(ID[s]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,i),s=n[t+"AxisID"]||t;a[s]=a[s]||Object.create(null),EI(a[s],[{axis:t},r[s],o[e]])})}),Object.keys(a).forEach(e=>{const t=a[e];EI(t,[UD.scales[t.type],UD.scale])}),a}function qR(e){const t=e.options||(e.options={});t.plugins=yI(t.plugins,{}),t.scales=GR(e,t)}function XR(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const YR=new Map,JR=new Set;function ZR(e,t){let n=YR.get(e);return n||(n=t(),YR.set(e,n),JR.add(n)),n}const $R=(e,t,n)=>{const r=II(t,n);void 0!==r&&e.add(r)};class eU{constructor(e){this._config=function(e){return(e=e||{}).data=XR(e.data),qR(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=XR(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),qR(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ZR(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return ZR("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return ZR("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return ZR("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:s}=this,a=this._cachedScopes(e,n),i=a.get(t);if(i)return i;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>$R(o,e,t))),t.forEach(e=>$R(o,r,e)),t.forEach(e=>$R(o,ID[s]||{},e)),t.forEach(e=>$R(o,UD,e)),t.forEach(e=>$R(o,DD,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),JR.has(t)&&a.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,ID[t]||{},UD.datasets[t]||{},{type:t},UD,DD]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const s={$shared:!0},{resolver:a,subPrefixes:i}=tU(this._resolverCache,e,r);let o=a;if(function(e,t){const{isScriptable:n,isIndexable:r}=AL(e);for(const s of t){const t=n(s),a=r(s),i=(a||t)&&e[s];if(t&&(PI(i)||nU(i))||a&&gI(i))return!0}return!1}(a,t)){s.$shared=!1;o=hL(a,n=PI(n)?n():n,this.createResolver(e,n,i))}for(const l of t)s[l]=o[l];return s}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:s}=tU(this._resolverCache,e,n);return xI(t)?hL(s,t,void 0,r):s}}function tU(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let a=r.get(s);if(!a){a={resolver:uL(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},r.set(s,a)}return a}const nU=e=>xI(e)&&Object.getOwnPropertyNames(e).some(t=>PI(e[t]));const rU=["top","bottom","left","right","chartArea"];function sU(e,t){return"top"===e||"bottom"===e||-1===rU.indexOf(e)&&"x"===t}function aU(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function iU(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),NI(n&&n.onComplete,[e],t)}function oU(e){const t=e.chart,n=t.options.animation;NI(n&&n.onProgress,[e],t)}function lU(e){return TL()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const cU={},dU=e=>{const t=lU(e);return Object.values(cU).filter(e=>e.canvas===t).pop()};function uU(e,t,n){const r=Object.keys(e);for(const s of r){const r=+s;if(r>=t){const a=e[s];delete e[s],(n>0||r>t)&&(e[r+n]=a)}}}class hU{static register(){UR.add(...arguments),AU()}static unregister(){UR.remove(...arguments),AU()}constructor(e,t){const n=this.config=new eU(t),r=lU(e),s=dU(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!TL()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?cR:jR}(r)),this.platform.updateConfig(n);const i=this.platform.acquireContext(r,a.aspectRatio),o=i&&i.canvas,l=o&&o.height,c=o&&o.width;this.id=pI(),this.ctx=i,this.canvas=o,this.width=c,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new OR,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}(e=>this.update(e),a.resizeDelay||0),this._dataChanges=[],cU[this.id]=this,i&&o?(iP.listen(this,"complete",iU),iP.listen(this,"progress",oU),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:s}=this;return mI(e)?t&&s?s:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return UR}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():QL(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return HD(this.canvas,this.ctx),this}stop(){return iP.stop(this),this}resize(e,t){iP.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,t,s),i=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,QL(this,i,!0)&&(this.notifyPlugins("resize",{size:a}),NI(n.onResize,[this,a],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){jI(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let s=[];t&&(s=s.concat(Object.keys(t).map(e=>{const n=t[e],r=VR(e,n),s="r"===r,a="x"===r;return{options:n,dposition:s?"chartArea":a?"bottom":"left",dtype:s?"radialLinear":a?"category":"linear"}}))),jI(s,t=>{const s=t.options,a=s.id,i=VR(a,s),o=yI(s.type,t.dtype);void 0!==s.position&&sU(s.position,i)===sU(t.dposition)||(s.position=t.dposition),r[a]=!0;let l=null;if(a in n&&n[a].type===o)l=n[a];else{l=new(UR.getScale(o))({id:a,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(s,e)}),jI(r,(e,t)=>{e||delete n[t]}),jI(n,e=>{oR.configure(this,e,e.options),oR.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(aU("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let s=this.getDatasetMeta(n);const a=r.type||this.config.type;if(s.type&&s.type!==a&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=a,s.indexAxis=r.indexAxis||HR(a,this.options),s.order=r.order||0,s.index=n,s.label=""+r.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const t=UR.getController(a),{datasetElementType:r,dataElementType:i}=UD.datasets[a];Object.assign(t,{dataElementType:UR.getElement(i),datasetElementType:r&&UR.getElement(r)}),s.controller=new t(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){jI(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===s.indexOf(e);e.buildOrUpdateElements(t),a=Math.max(+e.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||jI(s,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(aU("z","_idx"));const{_active:i,_lastEvent:o}=this;o?this._eventHandler(o,!0):i.length&&this._updateHoverStyles(i,i,!0),this.render()}_updateScales(){jI(this.scales,e=>{oR.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);RI(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of t){uU(e,r,"_removeElements"===n?-s:s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=n(0);for(let s=1;s<t;s++)if(!RI(r,n(s)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;oR.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],jI(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,PI(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(iP.has(this)?this.attached&&!iP.running(this)&&iP.start(this):(this.draw(),iU({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];e&&!s.visible||n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=sP(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&KD(t,r),e.controller.draw(),r&&GD(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return VD(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const s=qP.modes[t];return"function"===typeof s?s(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=dL(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,r);LI(t)?(s.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(s,{visible:n}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),iP.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),HD(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete cU[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};jI(this.options.events,e=>n(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},s=(e,t)=>{this.canvas&&this.resize(e,t)};let a;const i=()=>{r("attach",i),this.attached=!0,this.resize(),n("resize",s),n("detach",a)};a=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",i)},t.isAttached(this.canvas)?i():a()}unbindEvents(){jI(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},jI(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let s,a,i,o;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),i=0,o=e.length;i<o;++i){a=e[i];const t=a&&this.getDatasetMeta(a.datasetIndex).controller;t&&t[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}});!CI(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const r=this.options.hover,s=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),a=s(t,e),i=n?e:s(e,t);a.length&&this.updateHoverStyle(a,r.mode,!1),i.length&&r.mode&&this.updateHoverStyle(i,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const s=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:s}=this,a=t,i=this._getActiveElements(e,r,n,a),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,NI(s.onHover,[e,i,this],this),o&&NI(s.onClick,[e,i,this],this));const c=!CI(i,r);return(c||t)&&(this._active=i,this._updateHoverStyles(i,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}function AU(){return jI(hU.instances,e=>e._plugins.invalidate())}function fU(e,t,n,r){const s=sL(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const a=(n-t)/2,i=Math.min(a,r*t/2),o=e=>{const t=(n-Math.min(a,e))*r/2;return iD(e,0,Math.min(a,t))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:iD(s.innerStart,0,i),innerEnd:iD(s.innerEnd,0,i)}}function pU(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function mU(e,t,n,r,s,a){const{x:i,y:o,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+r+n-c,0),h=d>0?d+r+n+c:0;let A=0;const f=s-l;if(r){const e=((d>0?d-r:0)+(u>0?u-r:0))/2;A=(f-(0!==e?f*e/(e+r):f))/2}const p=(f-Math.max(.001,f*u-n/UI)/u)/2,m=l+p+A,g=s-p-A,{outerStart:x,outerEnd:v,innerStart:b,innerEnd:y}=fU(t,h,u,g-m),w=u-x,N=u-v,j=m+x/w,C=g-v/N,B=h+b,k=h+y,S=m+b/B,_=g-y/k;if(e.beginPath(),a){const t=(j+C)/2;if(e.arc(i,o,u,j,t),e.arc(i,o,u,t,C),v>0){const t=pU(N,C,i,o);e.arc(t.x,t.y,v,C,g+zI)}const n=pU(k,g,i,o);if(e.lineTo(n.x,n.y),y>0){const t=pU(k,_,i,o);e.arc(t.x,t.y,y,g+zI,_+Math.PI)}const r=(g-y/h+(m+b/h))/2;if(e.arc(i,o,h,g-y/h,r,!0),e.arc(i,o,h,r,m+b/h,!0),b>0){const t=pU(B,S,i,o);e.arc(t.x,t.y,b,S+Math.PI,m-zI)}const s=pU(w,m,i,o);if(e.lineTo(s.x,s.y),x>0){const t=pU(w,j,i,o);e.arc(t.x,t.y,x,m-zI,j)}}else{e.moveTo(i,o);const t=Math.cos(j)*u+i,n=Math.sin(j)*u+o;e.lineTo(t,n);const r=Math.cos(C)*u+i,s=Math.sin(C)*u+o;e.lineTo(r,s)}e.closePath()}function gU(e,t,n,r,s){const{fullCircles:a,startAngle:i,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h,borderRadius:A}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,f?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let p=t.endAngle;if(a){mU(e,t,n,r,p,s);for(let t=0;t<a;++t)e.stroke();isNaN(o)||(p=i+(o%OI||OI))}f&&function(e,t,n){const{startAngle:r,pixelMargin:s,x:a,y:i,outerRadius:o,innerRadius:l}=t;let c=s/o;e.beginPath(),e.arc(a,i,o,r-c,n+c),l>s?(c=s/l,e.arc(a,i,l,n+c,r-c,!0)):e.arc(a,i,s,n+zI,r-zI),e.closePath(),e.clip()}(e,t,p),l.selfJoin&&p-i>=UI&&0===A&&"miter"!==d&&function(e,t,n){const{startAngle:r,x:s,y:a,outerRadius:i,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:d}=l,u=Math.min(c/i,sD(r-n));if(e.beginPath(),e.arc(s,a,i-c/2,r+u/2,n-u/2),o>0){const t=Math.min(c/o,sD(r-n));e.arc(s,a,o+c/2,n-t/2,r+t/2,!0)}else{const t=Math.min(c/2,i*sD(r-n));if("round"===d)e.arc(s,a,t,n-UI/2,r+UI/2,!0);else if("bevel"===d){const i=2*t*t,o=-i*Math.cos(n+UI/2)+s,l=-i*Math.sin(n+UI/2)+a,c=i*Math.cos(r+UI/2)+s,d=i*Math.sin(r+UI/2)+a;e.lineTo(o,l),e.lineTo(c,d)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,p),a||(mU(e,t,n,r,p,s),e.stroke())}(0,DT.A)(hU,"defaults",UD),(0,DT.A)(hU,"instances",cU),(0,DT.A)(hU,"overrides",ID),(0,DT.A)(hU,"registry",UR),(0,DT.A)(hU,"version","4.5.1"),(0,DT.A)(hU,"getChart",dU);class xU extends CR{constructor(e){super(),(0,DT.A)(this,"circumference",void 0),(0,DT.A)(this,"endAngle",void 0),(0,DT.A)(this,"fullCircles",void 0),(0,DT.A)(this,"innerRadius",void 0),(0,DT.A)(this,"outerRadius",void 0),(0,DT.A)(this,"pixelMargin",void 0),(0,DT.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:s,distance:a}=tD(r,{x:e,y:t}),{startAngle:i,endAngle:o,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,h=yI(d,o-i),A=aD(s,i,o)&&i!==o,f=h>=OI||A,p=oD(a,l+u,c+u);return f&&p}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:s,innerRadius:a,outerRadius:i}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+s)/2,d=(a+i+l+o)/2;return{x:t+Math.cos(c)*d,y:n+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>OI?Math.floor(n/OI):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const i=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(i)*r,Math.sin(i)*r);const o=r*(1-Math.sin(Math.min(UI,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,s){const{fullCircles:a,startAngle:i,circumference:o}=t;let l=t.endAngle;if(a){mU(e,t,n,r,l,s);for(let t=0;t<a;++t)e.fill();isNaN(o)||(l=i+(o%OI||OI))}mU(e,t,n,r,l,s),e.fill()}(e,this,o,s,a),gU(e,this,o,s,a),e.restore()}}function vU(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=yI(n.borderCapStyle,t.borderCapStyle),e.setLineDash(yI(n.borderDash,t.borderDash)),e.lineDashOffset=yI(n.borderDashOffset,t.borderDashOffset),e.lineJoin=yI(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=yI(n.borderWidth,t.borderWidth),e.strokeStyle=yI(n.borderColor,t.borderColor)}function bU(e,t,n){e.lineTo(n.x,n.y)}function yU(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:s=0,end:a=r-1}=n,{start:i,end:o}=t,l=Math.max(s,i),c=Math.min(a,o),d=s<i&&a<i||s>o&&a>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!d?r+c-l:c-l}}function wU(e,t,n,r){const{points:s,options:a}=t,{count:i,start:o,loop:l,ilen:c}=yU(s,n,r),d=function(e){return e.stepped?qD:e.tension||"monotone"===e.cubicInterpolationMode?XD:bU}(a);let u,h,A,{move:f=!0,reverse:p}=r||{};for(u=0;u<=c;++u)h=s[(o+(p?c-u:u))%i],h.skip||(f?(e.moveTo(h.x,h.y),f=!1):d(e,A,h,p,a.stepped),A=h);return l&&(h=s[(o+(p?c:0))%i],d(e,A,h,p,a.stepped)),!!l}function NU(e,t,n,r){const s=t.points,{count:a,start:i,ilen:o}=yU(s,n,r),{move:l=!0,reverse:c}=r||{};let d,u,h,A,f,p,m=0,g=0;const x=e=>(i+(c?o-e:e))%a,v=()=>{A!==f&&(e.lineTo(m,f),e.lineTo(m,A),e.lineTo(m,p))};for(l&&(u=s[x(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=s[x(d)],u.skip)continue;const t=u.x,n=u.y,r=0|t;r===h?(n<A?A=n:n>f&&(f=n),m=(g*m+t)/++g):(v(),e.lineTo(t,n),h=r,g=0,A=f=n),p=n}v()}function jU(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?NU:wU}(0,DT.A)(xU,"id","arc"),(0,DT.A)(xU,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),(0,DT.A)(xU,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,DT.A)(xU,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const CU="function"===typeof Path2D;function BU(e,t,n,r){CU&&!t.options.segment?function(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),vU(e,t.options),e.stroke(s)}(e,t,n,r):function(e,t,n,r){const{segments:s,options:a}=t,i=jU(t);for(const o of s)vU(e,a,o.style),e.beginPath(),i(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class kU extends CR{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;FL(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const a=!!e._loop,{start:i,end:o}=function(e,t,n,r){let s=0,a=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(a+=s);a>s&&e[a%t].skip;)a--;return a%=t,{start:s,end:a}}(n,s,a,r);return eP(e,!0===r?[{start:i,end:o,loop:a}]:function(e,t,n,r){const s=e.length,a=[];let i,o=t,l=e[t];for(i=t+1;i<=n;++i){const n=e[i%s];n.skip||n.stop?l.skip||(r=!1,a.push({start:t%s,end:(i-1)%s,loop:r}),t=o=n.stop?i:null):(o=i,l.skip&&(t=i)),l=n}return null!==o&&a.push({start:t%s,end:o%s,loop:r}),a}(n,i,o<i?o+s:o,!!e._fullLoop&&0===i&&o===s-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],s=this.points,a=$L(this,{property:t,start:r,end:r});if(!a.length)return;const i=[],o=function(e){return e.stepped?VL:e.tension||"monotone"===e.cubicInterpolationMode?KL:WL}(n);let l,c;for(l=0,c=a.length;l<c;++l){const{start:c,end:d}=a[l],u=s[c],h=s[d];if(u===h){i.push(u);continue}const A=o(u,h,Math.abs((r-u[t])/(h[t]-u[t])),n.stepped);A[t]=e[t],i.push(A)}return 1===i.length?i[0]:i}pathSegment(e,t,n){return jU(this)(e,this,t,n)}path(e,t,n){const r=this.segments,s=jU(this);let a=this._loop;t=t||0,n=n||this.points.length-t;for(const i of r)a&=s(e,this,i,{start:t,end:t+n-1});return!!a}draw(e,t,n,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),BU(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function SU(e,t,n,r){const s=e.options,{[n]:a}=e.getProps([n],r);return Math.abs(t-a)<s.radius+s.hitRadius}(0,DT.A)(kU,"id","line"),(0,DT.A)(kU,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,DT.A)(kU,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,DT.A)(kU,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class _U extends CR{constructor(e){super(),(0,DT.A)(this,"parsed",void 0),(0,DT.A)(this,"skip",void 0),(0,DT.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:s,y:a}=this.getProps(["x","y"],n);return Math.pow(e-s,2)+Math.pow(t-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return SU(this,e,"x",t)}inYRange(e,t){return SU(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!VD(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,zD(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function EU(e,t){const{x:n,y:r,base:s,width:a,height:i}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=i/2,o=Math.min(n,s),l=Math.max(n,s),c=r-u,d=r+u):(u=a/2,o=n-u,l=n+u,c=Math.min(r,s),d=Math.max(r,s)),{left:o,top:c,right:l,bottom:d}}function FU(e,t,n,r){return e?0:iD(t,n,r)}function TU(e){const t=EU(e),n=t.right-t.left,r=t.bottom-t.top,s=function(e,t,n){const r=e.options.borderWidth,s=e.borderSkipped,a=aL(r);return{t:FU(s.top,a.top,0,n),r:FU(s.right,a.right,0,t),b:FU(s.bottom,a.bottom,0,n),l:FU(s.left,a.left,0,t)}}(e,n/2,r/2),a=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,a=iL(s),i=Math.min(t,n),o=e.borderSkipped,l=r||xI(s);return{topLeft:FU(!l||o.top||o.left,a.topLeft,0,i),topRight:FU(!l||o.top||o.right,a.topRight,0,i),bottomLeft:FU(!l||o.bottom||o.left,a.bottomLeft,0,i),bottomRight:FU(!l||o.bottom||o.right,a.bottomRight,0,i)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:a},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,a.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(s.b,s.r))}}}}function IU(e,t,n,r){const s=null===t,a=null===n,i=e&&!(s&&a)&&EU(e,r);return i&&(s||oD(t,i.left,i.right))&&(a||oD(n,i.top,i.bottom))}function DU(e,t){e.rect(t.x,t.y,t.w,t.h)}function LU(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-r,i=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+r,y:e.y+s,w:e.w+a,h:e.h+i,radius:e.radius}}(0,DT.A)(_U,"id","point"),(0,DT.A)(_U,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,DT.A)(_U,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class PU extends CR{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:a}=TU(this),i=(o=a.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?$D:DU;var o;e.save(),a.w===s.w&&a.h===s.h||(e.beginPath(),i(e,LU(a,t,s)),e.clip(),i(e,LU(s,-t,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),i(e,LU(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return IU(this,e,t,n)}inXRange(e,t){return IU(this,e,null,t)}inYRange(e,t){return IU(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,DT.A)(PU,"id","bar"),(0,DT.A)(PU,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,DT.A)(PU,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function RU(e,t,n,r){if(r)return;let s=t[e],a=n[e];return"angle"===e&&(s=sD(s),a=sD(a)),{property:e,start:s,end:a}}function UU(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function OU(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function MU(e,t){let n=[],r=!1;return gI(e)?(r=!0,n=e):n=function(e,t){const{x:n=null,y:r=null}=e||{},s=t.points,a=[];return t.segments.forEach(e=>{let{start:t,end:i}=e;i=UU(t,i,s);const o=s[t],l=s[i];null!==r?(a.push({x:o.x,y:r}),a.push({x:l.x,y:r})):null!==n&&(a.push({x:n,y:o.y}),a.push({x:n,y:l.y}))}),a}(e,t),n.length?new kU({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function QU(e){return e&&!1!==e.fill}function HU(e,t,n){let r=e[t].fill;const s=[t];let a;if(!n)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!vI(r))return r;if(a=e[r],!a)return!1;if(a.visible)return r;s.push(r),r=a.fill}return!1}function zU(e,t,n){const r=function(e){const t=e.options,n=t.fill;let r=yI(n&&n.target,n);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(xI(r))return!isNaN(r.value)&&r;let s=parseFloat(r);return vI(s)&&Math.floor(s)===s?function(e,t,n,r){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=r)return!1;return n}(r[0],t,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function WU(e,t,n){const r=[];for(let s=0;s<n.length;s++){const a=n[s],{first:i,last:o,point:l}=VU(a,t,"x");if(!(!l||i&&o))if(i)r.unshift(l);else if(e.push(l),!o)break}e.push(...r)}function VU(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const s=r[n],a=e.segments,i=e.points;let o=!1,l=!1;for(let c=0;c<a.length;c++){const e=a[c],t=i[e.start][n],r=i[e.end][n];if(oD(s,t,r)){o=s===t,l=s===r;break}}return{first:o,last:l,point:r}}class KU{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:s,radius:a}=this;return t=t||{start:0,end:OI},e.arc(r,s,a,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}}function GU(e){const{chart:t,fill:n,line:r}=e;if(vI(n))return function(e,t){const n=e.getDatasetMeta(t),r=n&&e.isDatasetVisible(t);return r?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:r}=e,s=[],a=r.segments,i=r.points,o=function(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const e=r[s];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);o.push(MU({x:null,y:t.bottom},r));for(let l=0;l<a.length;l++){const e=a[l];for(let t=e.start;t<=e.end;t++)WU(s,i[t],o)}return new kU({points:s,options:{}})}(e);if("shape"===n)return!0;const s=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,r=t.options,s=t.getLabels().length,a=r.reverse?t.max:t.min,i=function(e,t,n){let r;return r="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:xI(e)?e.value:t.getBaseValue(),r}(n,t,a),o=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,a);return new KU({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(i)})}for(let l=0;l<s;++l)o.push(t.getPointPositionForValue(l,i));return o}(e);return function(e){const{scale:t={},fill:n}=e,r=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:xI(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(vI(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return s instanceof KU?s:MU(s,r)}function qU(e,t,n){const r=GU(t),{chart:s,index:a,line:i,scale:o,axis:l}=t,c=i.options,d=c.fill,u=c.backgroundColor,{above:h=u,below:A=u}=d||{},f=s.getDatasetMeta(a),p=sP(s,f);r&&i.points.length&&(KD(e,n),function(e,t){const{line:n,target:r,above:s,below:a,area:i,scale:o,clip:l}=t,c=n._loop?"angle":t.axis;e.save();let d=a;a!==s&&("x"===c?(XU(e,r,i.top),JU(e,{line:n,target:r,color:s,scale:o,property:c,clip:l}),e.restore(),e.save(),XU(e,r,i.bottom)):"y"===c&&(YU(e,r,i.left),JU(e,{line:n,target:r,color:a,scale:o,property:c,clip:l}),e.restore(),e.save(),YU(e,r,i.right),d=s));JU(e,{line:n,target:r,color:d,scale:o,property:c,clip:l}),e.restore()}(e,{line:i,target:r,above:h,below:A,area:n,scale:o,axis:l,clip:p}),GD(e))}function XU(e,t,n){const{segments:r,points:s}=t;let a=!0,i=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=s[r],d=s[UU(r,l,s)];a?(e.moveTo(c.x,c.y),a=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,o,{move:i}),i?e.closePath():e.lineTo(d.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function YU(e,t,n){const{segments:r,points:s}=t;let a=!0,i=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=s[r],d=s[UU(r,l,s)];a?(e.moveTo(c.x,c.y),a=!1):(e.lineTo(n,c.y),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,o,{move:i}),i?e.closePath():e.lineTo(n,d.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function JU(e,t){const{line:n,target:r,property:s,color:a,scale:i,clip:o}=t,l=function(e,t,n){const r=e.segments,s=e.points,a=t.points,i=[];for(const o of r){let{start:e,end:r}=o;r=UU(e,r,s);const l=RU(n,s[e],s[r],o.loop);if(!t.segments){i.push({source:o,target:l,start:s[e],end:s[r]});continue}const c=$L(t,l);for(const t of c){const e=RU(n,a[t.start],a[t.end],t.loop),r=ZL(o,s,e);for(const s of r)i.push({source:s,target:t,start:{[n]:OU(l,e,"start",Math.max)},end:{[n]:OU(l,e,"end",Math.min)}})}}return i}(n,r,s);for(const{source:c,target:d,start:u,end:h}of l){const{style:{backgroundColor:t=a}={}}=c,l=!0!==r;e.save(),e.fillStyle=t,ZU(e,i,o,l&&RU(s,u,h)),e.beginPath();const A=!!n.pathSegment(e,c);let f;if(l){A?e.closePath():$U(e,r,h,s);const t=!!r.pathSegment(e,d,{move:A,reverse:!0});f=A&&t,f||$U(e,r,u,s)}e.closePath(),e.fill(f?"evenodd":"nonzero"),e.restore()}}function ZU(e,t,n,r){const s=t.chart.chartArea,{property:a,start:i,end:o}=r||{};if("x"===a||"y"===a){let t,r,l,c;"x"===a?(t=i,r=s.top,l=o,c=s.bottom):(t=s.left,r=i,l=s.right,c=o),e.beginPath(),n&&(t=Math.max(t,n.left),l=Math.min(l,n.right),r=Math.max(r,n.top),c=Math.min(c,n.bottom)),e.rect(t,r,l-t,c-r),e.clip()}}function $U(e,t,n,r){const s=t.interpolate(n,r);s&&e.lineTo(s.x,s.y)}var eO={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,s=[];let a,i,o,l;for(i=0;i<r;++i)a=e.getDatasetMeta(i),o=a.dataset,l=null,o&&o.options&&o instanceof kU&&(l={visible:e.isDatasetVisible(i),index:i,fill:zU(o,i,r),chart:e,axis:a.controller.options.indexAxis,scale:a.vScale,line:o}),a.$filler=l,s.push(l);for(i=0;i<r;++i)l=s[i],l&&!1!==l.fill&&(l.fill=HU(s,i,n.propagate))},beforeDraw(e,t,n){const r="beforeDraw"===n.drawTime,s=e.getSortedVisibleDatasetMetas(),a=e.chartArea;for(let i=s.length-1;i>=0;--i){const t=s[i].$filler;t&&(t.line.updateControlPoints(a,t.axis),r&&t.fill&&qU(e.ctx,t,a))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const t=r[s].$filler;QU(t)&&qU(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;QU(r)&&"beforeDatasetDraw"===n.drawTime&&qU(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const tO=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class nO extends CR{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=NI(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=lL(n.font),s=r.size,a=this._computeTitleHeight(),{boxWidth:i,itemHeight:o}=tO(n,s);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(a,s,i,o)+10):(c=this.maxHeight,l=this._fitCols(a,r,i,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:s,maxWidth:a,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+i;let d=e;s.textAlign="left",s.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,A)=>{const f=n+t/2+s.measureText(e.text).width;(0===A||l[l.length-1]+f+2*i>a)&&(d+=c,l[l.length-(A>0?0:1)]=0,h+=c,u++),o[A]={left:0,top:h,row:u,width:f,height:r},l[l.length-1]+=f+i}),d}_fitCols(e,t,n,r){const{ctx:s,maxHeight:a,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=a-e;let d=i,u=0,h=0,A=0,f=0;return this.legendItems.forEach((e,a)=>{const{itemWidth:p,itemHeight:m}=function(e,t,n,r,s){const a=function(e,t,n,r){let s=e.text;s&&"string"!==typeof s&&(s=s.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+r.measureText(s).width}(r,e,t,n),i=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=rO(t,n));return r}(s,r,t.lineHeight);return{itemWidth:a,itemHeight:i}}(n,t,s,e,r);a>0&&h+m+2*i>c&&(d+=u+i,l.push({width:u,height:h}),A+=u+i,f++,u=h=0),o[a]={left:A,top:h,col:f,width:p,height:m},u=Math.max(u,p),h+=m+i}),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:s}}=this,a=GL(s,this.left,this.width);if(this.isHorizontal()){let s=0,i=gD(n,this.left+r,this.right-this.lineWidths[s]);for(const o of t)s!==o.row&&(s=o.row,i=gD(n,this.left+r,this.right-this.lineWidths[s])),o.top+=this.top+e+r,o.left=a.leftForLtr(a.x(i),o.width),i+=o.width+r}else{let s=0,i=gD(n,this.top+e+r,this.bottom-this.columnSizes[s].height);for(const o of t)o.col!==s&&(s=o.col,i=gD(n,this.top+e+r,this.bottom-this.columnSizes[s].height)),o.top=i,o.left+=this.left+r,o.left=a.leftForLtr(a.x(o.left),o.width),i+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;KD(e,this),this._draw(),GD(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:s,labels:a}=e,i=UD.color,o=GL(e.rtl,this.left,this.width),l=lL(a.font),{padding:c}=a,d=l.size,u=d/2;let h;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:A,boxHeight:f,itemHeight:p}=tO(a,d),m=this.isHorizontal(),g=this._computeTitleHeight();h=m?{x:gD(s,this.left+c,this.right-n[0]),y:this.top+c+g,line:0}:{x:this.left+c,y:gD(s,this.top+g+c,this.bottom-t[0].height),line:0},qL(this.ctx,e.textDirection);const x=p+c;this.legendItems.forEach((v,b)=>{r.strokeStyle=v.fontColor,r.fillStyle=v.fontColor;const y=r.measureText(v.text).width,w=o.textAlign(v.textAlign||(v.textAlign=a.textAlign)),N=A+u+y;let j=h.x,C=h.y;o.setWidth(this.width),m?b>0&&j+N+c>this.right&&(C=h.y+=x,h.line++,j=h.x=gD(s,this.left+c,this.right-n[h.line])):b>0&&C+x>this.bottom&&(j=h.x=j+t[h.line].width+c,h.line++,C=h.y=gD(s,this.top+g+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(A)||A<=0||isNaN(f)||f<0)return;r.save();const s=yI(n.lineWidth,1);if(r.fillStyle=yI(n.fillStyle,i),r.lineCap=yI(n.lineCap,"butt"),r.lineDashOffset=yI(n.lineDashOffset,0),r.lineJoin=yI(n.lineJoin,"miter"),r.lineWidth=s,r.strokeStyle=yI(n.strokeStyle,i),r.setLineDash(yI(n.lineDash,[])),a.usePointStyle){const i={radius:f*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:s},l=o.xPlus(e,A/2);WD(r,i,l,t+u,a.pointStyleWidth&&A)}else{const a=t+Math.max((d-f)/2,0),i=o.leftForLtr(e,A),l=iL(n.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?$D(r,{x:i,y:a,w:A,h:f,radius:l}):r.rect(i,a,A,f),r.fill(),0!==s&&r.stroke()}r.restore()}(o.x(j),C,v),j=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(w,j+A+u,m?j+N:this.right,e.rtl),function(e,t,n){ZD(r,n.text,e,t+p/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(j),C,v),m)h.x+=N+c;else if("string"!==typeof v.text){const e=l.lineHeight;h.y+=rO(v,e)+c}else h.y+=x}),XL(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=lL(t.font),r=oL(t.padding);if(!t.display)return;const s=GL(e.rtl,this.left,this.width),a=this.ctx,i=t.position,o=n.size/2,l=r.top+o;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=gD(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+gD(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=gD(i,d,d+u);a.textAlign=s.textAlign(mD(i)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=n.string,ZD(a,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=lL(e.font),n=oL(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,s;if(oD(e,this.left,this.right)&&oD(t,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],oD(e,r.left,r.left+r.width)&&oD(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,s=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!s&&NI(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!s&&NI(t.onHover,[e,n,this],this)}else n&&NI(t.onClick,[e,n,this],this)}}function rO(e,t){return t*(e.text?e.text.length:0)}var sO={id:"legend",_element:nO,start(e,t,n){const r=e.legend=new nO({ctx:e.ctx,options:n,chart:e});oR.configure(e,r,n),oR.addBox(e,r)},stop(e){oR.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;oR.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:a,useBorderRadius:i,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=oL(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:a,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:s||l.textAlign,borderRadius:i&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class aO extends CR{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=gI(n.text)?n.text.length:1;this._padding=oL(n.padding);const s=r*lL(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:s,options:a}=this,i=a.align;let o,l,c,d=0;return this.isHorizontal()?(l=gD(i,n,s),c=t+e,o=s-n):("left"===a.position?(l=n+e,c=gD(i,r,t),d=-.5*UI):(l=s-e,c=gD(i,t,r),d=.5*UI),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=lL(t.font),r=n.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:i,rotation:o}=this._drawArgs(r);ZD(e,t.text,0,0,n,{color:t.color,maxWidth:i,rotation:o,textAlign:mD(t.align),textBaseline:"middle",translation:[s,a]})}}var iO={id:"title",_element:aO,start(e,t,n){!function(e,t){const n=new aO({ctx:e.ctx,options:t,chart:e});oR.configure(e,n,t),oR.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;oR.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;oR.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const oO={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,a=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),s+=e.y,++a}}if(0===a||0===r.size)return!1;const i=[...r].reduce((e,t)=>e+t)/r.size;return{x:i,y:s/a}},nearest(e,t){if(!e.length)return!1;let n,r,s,a=t.x,i=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=nD(t,r.getCenterPoint());e<o&&(o=e,s=r)}}if(s){const e=s.tooltipPosition();a=e.x,i=e.y}return{x:a,y:i}}};function lO(e,t){return t&&(gI(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function cO(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function dO(e,t){const{element:n,datasetIndex:r,index:s}=t,a=e.getDatasetMeta(r).controller,{label:i,value:o}=a.getLabelAndValue(s);return{chart:e,label:i,parsed:a.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:o,dataset:a.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function uO(e,t){const n=e.chart.ctx,{body:r,footer:s,title:a}=e,{boxWidth:i,boxHeight:o}=t,l=lL(t.bodyFont),c=lL(t.titleFont),d=lL(t.footerFont),u=a.length,h=s.length,A=r.length,f=oL(t.padding);let p=f.height,m=0,g=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(g+=e.beforeBody.length+e.afterBody.length,u&&(p+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),g){p+=A*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(g-A)*l.lineHeight+(g-1)*t.bodySpacing}h&&(p+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let x=0;const v=function(e){m=Math.max(m,n.measureText(e).width+x)};return n.save(),n.font=c.string,jI(e.title,v),n.font=l.string,jI(e.beforeBody.concat(e.afterBody),v),x=t.displayColors?i+2+t.boxPadding:0,jI(r,e=>{jI(e.before,v),jI(e.lines,v),jI(e.after,v)}),x=0,n.font=d.string,jI(e.footer,v),n.restore(),m+=f.width,{width:m,height:p}}function hO(e,t,n,r){const{x:s,width:a}=n,{width:i,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=s<=(o+l)/2?"left":"right":s<=a/2?c="left":s>=i-a/2&&(c="right"),function(e,t,n,r){const{x:s,width:a}=r,i=n.caretSize+n.caretPadding;return"left"===e&&s+a+i>t.width||"right"===e&&s-a-i<0||void 0}(c,e,t,n)&&(c="center"),c}function AO(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||hO(e,t,n,r),yAlign:r}}function fO(e,t,n,r){const{caretSize:s,caretPadding:a,cornerRadius:i}=e,{xAlign:o,yAlign:l}=n,c=s+a,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:A}=iL(i);let f=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const p=function(e,t,n){let{y:r,height:s}=e;return"top"===t?r+=n:r-="bottom"===t?s+n:s/2,r}(t,l,c);return"center"===l?"left"===o?f+=c:"right"===o&&(f-=c):"left"===o?f-=Math.max(d,h)+s:"right"===o&&(f+=Math.max(u,A)+s),{x:iD(f,0,r.width-t.width),y:iD(p,0,r.height-t.height)}}function pO(e,t,n){const r=oL(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function mO(e){return lO([],cO(e))}function gO(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const xO={beforeTitle:fI,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:fI,beforeBody:fI,beforeLabel:fI,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return mI(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:fI,afterBody:fI,beforeFooter:fI,footer:fI,afterFooter:fI};function vO(e,t,n,r){const s=e[t].call(n,r);return"undefined"===typeof s?xO[t].call(n,r):s}class bO extends CR{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,s=new dP(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,dL(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=vO(n,"beforeTitle",this,e),s=vO(n,"title",this,e),a=vO(n,"afterTitle",this,e);let i=[];return i=lO(i,cO(r)),i=lO(i,cO(s)),i=lO(i,cO(a)),i}getBeforeBody(e,t){return mO(vO(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return jI(e,e=>{const t={before:[],lines:[],after:[]},s=gO(n,e);lO(t.before,cO(vO(s,"beforeLabel",this,e))),lO(t.lines,vO(s,"label",this,e)),lO(t.after,cO(vO(s,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return mO(vO(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=vO(n,"beforeFooter",this,e),s=vO(n,"footer",this,e),a=vO(n,"afterFooter",this,e);let i=[];return i=lO(i,cO(r)),i=lO(i,cO(s)),i=lO(i,cO(a)),i}_createItems(e){const t=this._active,n=this.chart.data,r=[],s=[],a=[];let i,o,l=[];for(i=0,o=t.length;i<o;++i)l.push(dO(this.chart,t[i]));return e.filter&&(l=l.filter((t,r,s)=>e.filter(t,r,s,n))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,n))),jI(l,t=>{const n=gO(e.callbacks,t);r.push(vO(n,"labelColor",this,t)),s.push(vO(n,"labelPointStyle",this,t)),a.push(vO(n,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let s,a=[];if(r.length){const e=oO[n.position].call(this,r,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const t=this._size=uO(this,n),i=Object.assign({},e,t),o=AO(this.chart,n,i),l=fO(n,i,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,s={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const s=this.getCaretPosition(e,n,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:s}=this,{caretSize:a,cornerRadius:i}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:d}=iL(i),{x:u,y:h}=e,{width:A,height:f}=t;let p,m,g,x,v,b;return"center"===s?(v=h+f/2,"left"===r?(p=u,m=p-a,x=v+a,b=v-a):(p=u+A,m=p+a,x=v-a,b=v+a),g=p):(m="left"===r?u+Math.max(o,c)+a:"right"===r?u+A-Math.max(l,d)-a:this.caretX,"top"===s?(x=h,v=x-a,p=m-a,g=m+a):(x=h+f,v=x+a,p=m+a,g=m-a),b=x),{x1:p,x2:m,x3:g,y1:x,y2:v,y3:b}}drawTitle(e,t,n){const r=this.title,s=r.length;let a,i,o;if(s){const l=GL(n.rtl,this.x,this.width);for(e.x=pO(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",a=lL(n.titleFont),i=n.titleSpacing,t.fillStyle=n.titleColor,t.font=a.string,o=0;o<s;++o)t.fillText(r[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+i,o+1===s&&(e.y+=n.titleMarginBottom-i)}}_drawColorBox(e,t,n,r,s){const a=this.labelColors[n],i=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=s,c=lL(s.bodyFont),d=pO(this,"left",s),u=r.x(d),h=o<c.lineHeight?(c.lineHeight-o)/2:0,A=t.y+h;if(s.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:1},n=r.leftForLtr(u,l)+l/2,c=A+o/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,zD(e,t,n,c),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,zD(e,t,n,c)}else{e.lineWidth=xI(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const t=r.leftForLtr(u,l),n=r.leftForLtr(r.xPlus(u,1),l-2),i=iL(a.borderRadius);Object.values(i).some(e=>0!==e)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,$D(e,{x:t,y:A,w:l,h:o,radius:i}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),$D(e,{x:n,y:A+1,w:l-2,h:o-2,radius:i}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(t,A,l,o),e.strokeRect(t,A,l,o),e.fillStyle=a.backgroundColor,e.fillRect(n,A+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:s,bodyAlign:a,displayColors:i,boxHeight:o,boxWidth:l,boxPadding:c}=n,d=lL(n.bodyFont);let u=d.lineHeight,h=0;const A=GL(n.rtl,this.x,this.width),f=function(n){t.fillText(n,A.x(e.x+h),e.y+u/2),e.y+=u+s},p=A.textAlign(a);let m,g,x,v,b,y,w;for(t.textAlign=a,t.textBaseline="middle",t.font=d.string,e.x=pO(this,p,n),t.fillStyle=n.bodyColor,jI(this.beforeBody,f),h=i&&"right"!==p?"center"===a?l/2+c:l+2+c:0,v=0,y=r.length;v<y;++v){for(m=r[v],g=this.labelTextColors[v],t.fillStyle=g,jI(m.before,f),x=m.lines,i&&x.length&&(this._drawColorBox(t,e,v,A,n),u=Math.max(d.lineHeight,o)),b=0,w=x.length;b<w;++b)f(x[b]),u=d.lineHeight;jI(m.after,f)}h=0,u=d.lineHeight,jI(this.afterBody,f),e.y-=s}drawFooter(e,t,n){const r=this.footer,s=r.length;let a,i;if(s){const o=GL(n.rtl,this.x,this.width);for(e.x=pO(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",a=lL(n.footerFont),t.fillStyle=n.footerColor,t.font=a.string,i=0;i<s;++i)t.fillText(r[i],o.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:s,yAlign:a}=this,{x:i,y:o}=e,{width:l,height:c}=n,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:A}=iL(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(i+d,o),"top"===a&&this.drawCaret(e,t,n,r),t.lineTo(i+l-u,o),t.quadraticCurveTo(i+l,o,i+l,o+u),"center"===a&&"right"===s&&this.drawCaret(e,t,n,r),t.lineTo(i+l,o+c-A),t.quadraticCurveTo(i+l,o+c,i+l-A,o+c),"bottom"===a&&this.drawCaret(e,t,n,r),t.lineTo(i+h,o+c),t.quadraticCurveTo(i,o+c,i,o+c-h),"center"===a&&"left"===s&&this.drawCaret(e,t,n,r),t.lineTo(i,o+d),t.quadraticCurveTo(i,o,i+d,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,s=n&&n.y;if(r||s){const n=oO[e.position].call(this,this._active,this._eventPosition);if(!n)return;const a=this._size=uO(this,e),i=Object.assign({},n,this._size),o=AO(t,e,i),l=fO(e,i,o,t);r._to===l.x&&s._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=a.width,this.height=a.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=oL(t.padding),i=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&i&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,r,t),qL(e,t.textDirection),s.y+=a.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),XL(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}),s=!CI(n,r),a=this._positionChanged(r,t);(s||a)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],a=this._getActiveElements(e,s,t,n),i=this._positionChanged(a,e),o=t||!CI(a,s)||i;return o&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const s=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const a=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:n,caretY:r,options:s}=this,a=oO[s.position].call(this,e,t);return!1!==a&&(n!==a.x||r!==a.y)}}(0,DT.A)(bO,"positioners",oO);var yO={id:"tooltip",_element:bO,positioners:oO,afterInit(e,t,n){n&&(e.tooltip=new bO({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",(0,$n.A)((0,$n.A)({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:xO},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function wO(e,t,n,r){const s=e.indexOf(t);if(-1===s)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return s!==e.lastIndexOf(t)?n:s}function NO(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class jO extends LR{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(mI(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:iD(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:wO(n,e,yI(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=t;a++)r.push({value:a});return r}getLabelForValue(e){return NO.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function CO(e,t){const n=[],{bounds:r,step:s,min:a,max:i,precision:o,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=s||1,A=c-1,{min:f,max:p}=t,m=!mI(a),g=!mI(i),x=!mI(l),v=(p-f)/(d+1);let b,y,w,N,j=XI((p-f)/A/h)*h;if(j<1e-14&&!m&&!g)return[{value:f},{value:p}];N=Math.ceil(p/j)-Math.floor(f/j),N>A&&(j=XI(N*j/A/h)*h),mI(o)||(b=Math.pow(10,o),j=Math.ceil(j*b)/b),"ticks"===r?(y=Math.floor(f/j)*j,w=Math.ceil(p/j)*j):(y=f,w=p),m&&g&&s&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((i-a)/s,j/1e3)?(N=Math.round(Math.min((i-a)/j,c)),j=(i-a)/N,y=a,w=i):x?(y=m?a:y,w=g?i:w,N=l-1,j=(w-y)/N):(N=(w-y)/j,N=qI(N,Math.round(N),j/1e3)?Math.round(N):Math.ceil(N));const C=Math.max(eD(j),eD(y));b=Math.pow(10,mI(o)?C:o),y=Math.round(y*b)/b,w=Math.round(w*b)/b;let B=0;for(m&&(u&&y!==a?(n.push({value:a}),y<a&&B++,qI(Math.round((y+B*j)*b)/b,a,BO(a,v,e))&&B++):y<a&&B++);B<N;++B){const e=Math.round((y+B*j)*b)/b;if(g&&e>i)break;n.push({value:e})}return g&&u&&w!==i?n.length&&qI(n[n.length-1].value,i,BO(i,v,e))?n[n.length-1].value=i:n.push({value:i}):g&&w!==i||n.push({value:w}),n}function BO(e,t,n){let{horizontal:r,minRotation:s}=n;const a=ZI(s),i=(r?Math.sin(a):Math.cos(a))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}(0,DT.A)(jO,"id","category"),(0,DT.A)(jO,"defaults",{ticks:{callback:NO}});class kO extends LR{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return mI(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const a=e=>r=t?r:e,i=e=>s=n?s:e;if(e){const e=GI(r),t=GI(s);e<0&&t<0?i(0):e>0&&t>0&&a(0)}if(r===s){let t=0===s?1:Math.abs(.05*s);i(s+t),e||a(r-t)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=CO({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&JI(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return ED(e,this.chart.options.locale,this.options.ticks.format)}}class SO extends kO{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=vI(e)?e:0,this.max=vI(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=ZI(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,DT.A)(SO,"id","linear"),(0,DT.A)(SO,"defaults",{ticks:{callback:TD.formatters.numeric}});const _O=e=>Math.floor(KI(e)),EO=(e,t)=>Math.pow(10,_O(e)+t);function FO(e){return 1===e/Math.pow(10,_O(e))}function TO(e,t,n){const r=Math.pow(10,n),s=Math.floor(e/r);return Math.ceil(t/r)-s}function IO(e,t){let{min:n,max:r}=t;n=bI(e.min,n);const s=[],a=_O(n);let i=function(e,t){let n=_O(t-e);for(;TO(e,t,n)>10;)n++;for(;TO(e,t,n)<10;)n--;return Math.min(n,_O(e))}(n,r),o=i<0?Math.pow(10,Math.abs(i)):1;const l=Math.pow(10,i),c=a>i?Math.pow(10,a):0,d=Math.round((n-c)*o)/o,u=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,i)),A=bI(e.min,Math.round((c+u+h*Math.pow(10,i))*o)/o);for(;A<r;)s.push({value:A,major:FO(A),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(i++,h=2,o=i>=0?1:o),A=Math.round((c+u+h*Math.pow(10,i))*o)/o;const f=bI(e.max,A);return s.push({value:f,major:FO(f),significand:h}),s}class DO extends LR{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=kO.prototype.parse.apply(this,[e,t]);if(0!==n)return vI(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=vI(e)?Math.max(0,e):null,this.max=vI(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!vI(this._userMin)&&(this.min=e===EO(this.min,0)?EO(this.min,-1):EO(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const s=t=>n=e?n:t,a=e=>r=t?r:e;n===r&&(n<=0?(s(1),a(10)):(s(EO(n,-1)),a(EO(r,1)))),n<=0&&s(EO(r,-1)),r<=0&&a(EO(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=IO({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&JI(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":ED(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=KI(e),this._valueRange=KI(this.max)-KI(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(KI(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function LO(e){const t=e.ticks;if(t.display&&e.display){const e=oL(t.backdropPadding);return yI(t.font&&t.font.size,UD.font.size)+e.height}return 0}function PO(e,t,n){return n=gI(n)?n:[n],{w:MD(e,t.string,n),h:n.length*t.lineHeight}}function RO(e,t,n,r,s){return e===r||e===s?{start:t-n/2,end:t+n/2}:e<r||e>s?{start:t-n,end:t}:{start:t,end:t+n}}function UO(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],s=[],a=e._pointLabels.length,i=e.options.pointLabels,o=i.centerPointLabels?UI/a:0;for(let l=0;l<a;l++){const a=i.setContext(e.getPointLabelContext(l));s[l]=a.padding;const c=e.getPointPosition(l,e.drawingArea+s[l],o),d=lL(a.font),u=PO(e.ctx,d,e._pointLabels[l]);r[l]=u;const h=sD(e.getIndexAngle(l)+o),A=Math.round($I(h));OO(n,t,h,RO(A,c.x,u.w,0,180),RO(A,c.y,u.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],s=e._pointLabels.length,a=e.options,{centerPointLabels:i,display:o}=a.pointLabels,l={extra:LO(a)/2,additionalAngle:i?UI/s:0};let c;for(let d=0;d<s;d++){l.padding=n[d],l.size=t[d];const s=MO(e,d,l);r.push(s),"auto"===o&&(s.visible=QO(s,c),s.visible&&(c=s))}return r}(e,r,s)}function OO(e,t,n,r,s){const a=Math.abs(Math.sin(n)),i=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/a,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/a,e.r=Math.max(e.r,t.r+o)),s.start<t.t?(l=(t.t-s.start)/i,e.t=Math.min(e.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/i,e.b=Math.max(e.b,t.b+l))}function MO(e,t,n){const r=e.drawingArea,{extra:s,additionalAngle:a,padding:i,size:o}=n,l=e.getPointPosition(t,r+s+i,a),c=Math.round($I(sD(l.angle+zI))),d=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+o.w,bottom:d+o.h}}function QO(e,t){if(!t)return!0;const{left:n,top:r,right:s,bottom:a}=e;return!(VD({x:n,y:r},t)||VD({x:n,y:a},t)||VD({x:s,y:r},t)||VD({x:s,y:a},t))}function HO(e,t,n){const{left:r,top:s,right:a,bottom:i}=n,{backdropColor:o}=t;if(!mI(o)){const n=iL(t.borderRadius),l=oL(t.backdropPadding);e.fillStyle=o;const c=r-l.left,d=s-l.top,u=a-r+l.width,h=i-s+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),$D(e,{x:c,y:d,w:u,h:h,radius:n}),e.fill()):e.fillRect(c,d,u,h)}}function zO(e,t,n,r){const{ctx:s}=e;if(n)s.arc(e.xCenter,e.yCenter,t,0,OI);else{let n=e.getPointPosition(0,t);s.moveTo(n.x,n.y);for(let a=1;a<r;a++)n=e.getPointPosition(a,t),s.lineTo(n.x,n.y)}}(0,DT.A)(DO,"id","logarithmic"),(0,DT.A)(DO,"defaults",{ticks:{callback:TD.formatters.logarithmic,major:{enabled:!0}}});class WO extends kO{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=oL(LO(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=vI(e)&&!isNaN(e)?e:0,this.max=vI(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/LO(this.options))}generateTickLabels(e){kO.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=NI(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?UO(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return sD(e*(OI/(this._pointLabels.length||1))+ZI(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(mI(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(mI(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return dL(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-zI+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),zO(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:s}=t,a=this._pointLabels.length;let i,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let s=t-1;s>=0;s--){const t=e._pointLabelItems[s];if(!t.visible)continue;const a=r.setContext(e.getPointLabelContext(s));HO(n,a,t);const i=lL(a.font),{x:o,y:l,textAlign:c}=t;ZD(n,e._pointLabels[s],o,l+i.lineHeight/2,i,{color:a.color,textAlign:c,textBaseline:"middle"})}}(this,a),r.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),i=r.setContext(n),l=s.setContext(n);!function(e,t,n,r,s){const a=e.ctx,i=t.circular,{color:o,lineWidth:l}=t;!i&&!r||!o||!l||n<0||(a.save(),a.strokeStyle=o,a.lineWidth=l,a.setLineDash(s.dash||[]),a.lineDashOffset=s.dashOffset,a.beginPath(),zO(e,n,i,r),a.closePath(),a.stroke(),a.restore())}(this,i,o,a,l)}}),n.display){for(e.save(),i=a-1;i>=0;i--){const r=n.setContext(this.getPointLabelContext(i)),{color:s,lineWidth:a}=r;a&&s&&(e.lineWidth=a,e.strokeStyle=s,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(i,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let s,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,i)=>{if(0===i&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(i)),l=lL(o.font);if(s=this.getDistanceFromCenterForValue(this.ticks[i].value),o.showLabelBackdrop){e.font=l.string,a=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=oL(o.backdropPadding);e.fillRect(-a/2-t.left,-s-l.size/2-t.top,a+t.width,l.size+t.height)}ZD(e,r.label,0,-s,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}(0,DT.A)(WO,"id","radialLinear"),(0,DT.A)(WO,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:TD.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,DT.A)(WO,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,DT.A)(WO,"descriptors",{angleLines:{_fallback:"grid"}});const VO={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},KO=Object.keys(VO);function GO(e,t){return e-t}function qO(e,t){if(mI(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:a}=e._parseOpts;let i=t;return"function"===typeof r&&(i=r(i)),vI(i)||(i="string"===typeof r?n.parse(i,r):n.parse(i)),null===i?null:(s&&(i="week"!==s||!YI(a)&&!0!==a?n.startOf(i,s):n.startOf(i,"isoWeek",a)),+i)}function XO(e,t,n,r){const s=KO.length;for(let a=KO.indexOf(e);a<s-1;++a){const e=VO[KO[a]],s=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(s*e.size))<=r)return KO[a]}return KO[s-1]}function YO(e,t,n){if(n){if(n.length){const{lo:r,hi:s}=lD(n,t);e[n[r]>=t?n[r]:n[s]]=!0}}else e[t]=!0}function JO(e,t,n){const r=[],s={},a=t.length;let i,o;for(i=0;i<a;++i)o=t[i],s[o]=i,r.push({value:o,major:!1});return 0!==a&&n?function(e,t,n,r){const s=e._adapter,a=+s.startOf(t[0].value,r),i=t[t.length-1].value;let o,l;for(o=a;o<=i;o=+s.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,s,n):r}class ZO extends LR{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new QP(e.adapters.date);r.init(t),EI(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:qO(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:s,minDefined:a,maxDefined:i}=this.getUserBounds();function o(e){a||isNaN(e.min)||(r=Math.min(r,e.min)),i||isNaN(e.max)||(s=Math.max(s,e.max))}a&&i||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=vI(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),s=vI(s)&&!isNaN(s)?s:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,a=function(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}(r,s,this.max);return this._unit=t.unit||(n.autoSkip?XO(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(e,t,n,r,s){for(let a=KO.length-1;a>=KO.indexOf(n);a--){const n=KO[a];if(VO[n].common&&e._adapter.diff(s,r,n)>=t-1)return n}return KO[n?KO.indexOf(n):0]}(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=KO.indexOf(e)+1,n=KO.length;t<n;++t)if(VO[KO[t]].common)return KO[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&a.reverse(),JO(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,s=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),s=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const a=n.length<3?.5:.25;r=iD(r,0,a),s=iD(s,0,a),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,s=r.time,a=s.unit||XO(s.minUnit,t,n,this._getLabelCapacity(t)),i=yI(r.ticks.stepSize,1),o="week"===a&&s.isoWeekday,l=YI(o)||!0===o,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":a),e.diff(n,t,a)>1e5*i)throw new Error(t+" and "+n+" are too far apart with stepSize of "+i+" "+a);const A="data"===r.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<n;d=+e.add(d,i,a),u++)YO(c,d,A);return d!==n&&"ticks"!==r.bounds&&1!==u||YO(c,d,A),Object.keys(c).sort(GO).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,s=t||n[r];return this._adapter.format(e,s)}_tickFormatFunction(e,t,n,r){const s=this.options,a=s.ticks.callback;if(a)return NI(a,[e,t,n],this);const i=s.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&i[o],d=l&&i[l],u=n[t],h=l&&d&&u&&u.major;return this._adapter.format(e,r||(h?d:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=ZI(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),a=Math.sin(r),i=this._resolveTickFontOptions(0).size;return{w:n*s+i*a,h:n*a+i*s}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,s=this._tickFormatFunction(e,0,JO(this,[e],this._majorUnit),r),a=this._getLabelSize(s),i=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return i>0?i:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(qO(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return AD(e.sort(GO))}}function $O(e,t,n){let r,s,a,i,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=cD(e,"pos",t)),({pos:r,time:a}=e[o]),({pos:s,time:i}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=cD(e,"time",t)),({time:r,pos:a}=e[o]),({time:s,pos:i}=e[l]));const c=s-r;return c?a+(i-a)*(t-r)/c:a}(0,DT.A)(ZO,"id","time"),(0,DT.A)(ZO,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class eM extends ZO{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=$O(t,this.min),this._tableRange=$O(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],s=[];let a,i,o,l,c;for(a=0,i=e.length;a<i;++a)l=e[a],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(a=0,i=r.length;a<i;++a)c=r[a+1],o=r[a-1],l=r[a],Math.round((c+o)/2)!==l&&s.push({time:l,pos:a/(i-1)});return s}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return($O(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return $O(this._table,n*this._tableRange+this._minPos,!0)}}(0,DT.A)(eM,"id","timeseries"),(0,DT.A)(eM,"defaults",ZO.defaults);const tM=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],nM="label";function rM(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function sM(e,t){e.labels=t}function aM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nM;const r=[];e.datasets=t.map(t=>{const s=e.datasets.find(e=>e[n]===t[n]);return s&&t.data&&!r.includes(s)?(r.push(s),Object.assign(s,t),s):(0,$n.A)({},t)})}function iM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nM;const n={labels:[],datasets:[]};return sM(n,e.labels),aM(n,e.datasets,t),n}function oM(e,t){const{height:n=150,width:s=300,redraw:a=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h}=e,A=yF(e,tM),f=(0,r.useRef)(null),p=(0,r.useRef)(null),m=()=>{f.current&&(p.current=new hU(f.current,{type:o,data:iM(l,i),options:c&&(0,$n.A)({},c),plugins:d}),rM(t,p.current))},g=()=>{rM(t,null),p.current&&(p.current.destroy(),p.current=null)};return(0,r.useEffect)(()=>{!a&&p.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(p.current,c)},[a,c]),(0,r.useEffect)(()=>{!a&&p.current&&sM(p.current.config.data,l.labels)},[a,l.labels]),(0,r.useEffect)(()=>{!a&&p.current&&l.datasets&&aM(p.current.config.data,l.datasets,i)},[a,l.datasets]),(0,r.useEffect)(()=>{p.current&&(a?(g(),setTimeout(m)):p.current.update(h))},[a,c,l.labels,l.datasets,h]),(0,r.useEffect)(()=>{p.current&&(g(),setTimeout(m))},[o]),(0,r.useEffect)(()=>(m(),()=>g()),[]),(0,Ns.jsx)("canvas",(0,$n.A)((0,$n.A)({ref:f,role:"img",height:n,width:s},A),{},{children:u}))}const lM=(0,r.forwardRef)(oM);function cM(e,t){return hU.register(t),(0,r.forwardRef)((t,n)=>(0,Ns.jsx)(lM,(0,$n.A)((0,$n.A)({},t),{},{ref:n,type:e})))}const dM=cM("line",DP),uM=cM("bar",FP);hU.register(jO,SO,PU,kU,_U,iO,yO,sO,eO);const hM=e=>{let{shopData:t}=e;const[n,s]=(0,r.useState)(null),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)("bar"),[u,h]=(0,r.useState)(_a(Fa(new Date),"yyyy-MM-dd")),[A,f]=(0,r.useState)(_a(Ia(new Date),"yyyy-MM-dd")),[p,m]=(0,r.useState)("daily");(0,r.useEffect)(()=>{g()},[u,A,p]);const g=async()=>{if(u&&A){i(!0),l("");try{const e=await ws.get("/admin/profit-loss/trends",{params:{startDate:u,endDate:A},withCredentials:!0});s(e.data)}catch(e){l("Failed to fetch trends data."),console.error("Trends data error:",e)}finally{i(!1)}}},x=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e||0),v={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(e){const t=e.dataset.label||"",n=e.parsed.y;return"Profit Margin (%)"===t?"".concat(t,": ").concat(n.toFixed(2),"%"):"".concat(t,": ").concat(x(n))}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return x(e)}}}}},b=(0,$n.A)((0,$n.A)({},v),{},{scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return"".concat(e,"%")}}}}}),y=(()=>{if(!t)return null;return{labels:t.map(e=>e.shopName),datasets:[{label:"Revenue",data:t.map(e=>e.revenue.totalBillingProfit),backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:2},{label:"Expenses",data:t.map(e=>e.expenses.totalExpenses),backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:2},{label:"Net Profit",data:t.map(e=>e.profitability.netProfit),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:2}]}})(),w=(()=>{if(!t)return null;const e=t.map(e=>e.shopName),n=t.map(e=>e.profitability.profitMargin);return{labels:e,datasets:[{label:"Profit Margin (%)",data:n,backgroundColor:n.map(e=>e>=0?"rgba(34, 197, 94, 0.8)":"rgba(239, 68, 68, 0.8)"),borderColor:n.map(e=>e>=0?"rgba(34, 197, 94, 1)":"rgba(239, 68, 68, 1)"),borderWidth:2}]}})(),N=(()=>{if(!n||!n.netProfitTrend)return null;const e=n.netProfitTrend.map(e=>e.date),t=n.netProfitTrend.map(e=>e.netProfit);return{labels:e,datasets:[{label:"Revenue",data:n.revenueTrend.map(e=>e.revenue),borderColor:"rgba(34, 197, 94, 1)",backgroundColor:"rgba(34, 197, 94, 0.1)",borderWidth:2,fill:!1,tension:.4},{label:"Expenses",data:n.expenseTrend.map(e=>e.expenses),borderColor:"rgba(239, 68, 68, 1)",backgroundColor:"rgba(239, 68, 68, 0.1)",borderWidth:2,fill:!1,tension:.4},{label:"Net Profit",data:t,borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,fill:!1,tension:.4}]}})();return(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,Ns.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,Ns.jsx)(Me,{className:"w-8 h-8 mr-3 text-blue-500"}),"Profit & Loss Charts"]}),(0,Ns.jsx)("p",{className:"text-gray-600 mt-1",children:"Visual comparison of financial performance across shops"})]}),(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Ns.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,Ns.jsx)("button",{onClick:()=>d("bar"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("bar"===c?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Bar Chart"}),(0,Ns.jsx)("button",{onClick:()=>d("line"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("line"===c?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Line Chart"})]}),(0,Ns.jsxs)("div",{className:"flex gap-2",children:[(0,Ns.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,Ns.jsx)("input",{type:"date",value:A,onChange:e=>f(e.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Ns.jsxs)("button",{onClick:g,disabled:a,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 flex items-center",children:[(0,Ns.jsx)(gt,{className:"w-4 h-4 mr-2 ".concat(a?"animate-spin":"")}),"Refresh"]})]})]})}),o&&(0,Ns.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:o}),y&&(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Revenue vs Expenses vs Profit Comparison"}),(0,Ns.jsx)("div",{className:"h-96",children:"bar"===c?(0,Ns.jsx)(uM,{data:y,options:v}):(0,Ns.jsx)(dM,{data:y,options:v})})]}),w&&(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Profit Margin Comparison"}),(0,Ns.jsx)("div",{className:"h-64",children:(0,Ns.jsx)(uM,{data:w,options:b})})]}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4",children:[(0,Ns.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,Ns.jsx)(jt,{className:"w-6 h-6 mr-2 text-green-500"}),"Profit Trends Over Time"]}),(0,Ns.jsx)("div",{className:"flex gap-2",children:(0,Ns.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Ns.jsx)("option",{value:"daily",children:"Daily"}),(0,Ns.jsx)("option",{value:"weekly",children:"Weekly"}),(0,Ns.jsx)("option",{value:"monthly",children:"Monthly"})]})})]}),N?(0,Ns.jsx)("div",{className:"h-96",children:(0,Ns.jsx)(dM,{data:N,options:(0,$n.A)((0,$n.A)({},v),{},{plugins:(0,$n.A)((0,$n.A)({},v.plugins),{},{legend:{position:"top"}})})})}):(0,Ns.jsx)("div",{className:"h-96 flex items-center justify-center",children:(0,Ns.jsxs)("div",{className:"text-center",children:[(0,Ns.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),(0,Ns.jsx)("p",{className:"text-gray-600",children:"Loading trends data..."})]})})]}),t&&t.length>0&&(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Performance Insights"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(()=>{const e=t.reduce((e,t)=>e.profitability.netProfit>t.profitability.netProfit?e:t);return(0,Ns.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Ns.jsx)("h4",{className:"font-semibold text-green-800 mb-2",children:"Top Performer"}),(0,Ns.jsx)("p",{className:"text-lg font-bold text-green-700",children:e.shopName}),(0,Ns.jsxs)("p",{className:"text-sm text-green-600",children:["Net Profit: ",x(e.profitability.netProfit)]}),(0,Ns.jsxs)("p",{className:"text-sm text-green-600",children:["Margin: ",e.profitability.profitMargin.toFixed(2),"%"]})]})})(),(()=>{const e=t.reduce((e,t)=>e.revenue.totalBillingProfit>t.revenue.totalBillingProfit?e:t);return(0,Ns.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Ns.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Highest Revenue"}),(0,Ns.jsx)("p",{className:"text-lg font-bold text-blue-700",children:e.shopName}),(0,Ns.jsxs)("p",{className:"text-sm text-blue-600",children:["Revenue: ",x(e.revenue.totalBillingProfit)]})]})})(),(()=>{const e=t.reduce((e,t)=>e.profitability.profitMargin<t.profitability.profitMargin?e:t);return(0,Ns.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg",children:[(0,Ns.jsx)("h4",{className:"font-semibold text-orange-800 mb-2",children:"Needs Attention"}),(0,Ns.jsx)("p",{className:"text-lg font-bold text-orange-700",children:e.shopName}),(0,Ns.jsxs)("p",{className:"text-sm text-orange-600",children:["Margin: ",e.profitability.profitMargin.toFixed(2),"%"]}),(0,Ns.jsxs)("p",{className:"text-sm text-orange-600",children:["Net Profit: ",x(e.profitability.netProfit)]})]})})()]})]})]})};const AM=function(){var e;const[t,n]=(0,r.useState)(null),[s,a]=(0,r.useState)(!1),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1),[h,A]=(0,r.useState)({startDate:new Date((new Date).getFullYear(),(new Date).getMonth(),1).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0]}),f=async()=>{a(!0),o("");try{const e=await ws.get("/admin/profit-loss",{params:h});n(e.data)}catch(r){var e,t;o((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch profit & loss data"),console.error("Error fetching P&L data:",r)}finally{a(!1)}};(0,r.useEffect)(()=>{f()},[h]);const p=(e,t)=>{A(n=>(0,$n.A)((0,$n.A)({},n),{},{[e]:t}))},m=e=>e>0?{color:"text-green-600",icon:jt,text:"Profit"}:e<0?{color:"text-red-600",icon:Nt,text:"Loss"}:{color:"text-gray-600",icon:Xe,text:"Break Even"},g=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);if(s)return(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col items-center justify-center h-64",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-16 h-16 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-10 h-10"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading profit & loss data..."})]});if(i)return(0,Ns.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,Ns.jsxs)("div",{className:"text-red-600 mb-4",children:[(0,Ns.jsx)(Nt,{className:"h-12 w-12 mx-auto mb-2"}),(0,Ns.jsx)("h3",{className:"text-lg font-semibold",children:"Error Loading Data"}),(0,Ns.jsx)("p",{className:"text-sm",children:i})]}),(0,Ns.jsx)("button",{onClick:f,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]});if(!t)return null;const{consolidated:x,shopData:v,summary:b}=t,y=m(x.netProfit);return(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Ns.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Profit & Loss Dashboard"}),(0,Ns.jsx)("p",{className:"text-gray-600",children:"Financial performance overview for all shops"})]}),(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mt-4 lg:mt-0",children:[(0,Ns.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ns.jsx)(Ue,{className:"h-5 w-5 text-gray-500"}),(0,Ns.jsx)("input",{type:"date",value:h.startDate,onChange:e=>p("startDate",e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,Ns.jsx)("span",{className:"text-gray-500",children:"to"}),(0,Ns.jsx)("input",{type:"date",value:h.endDate,onChange:e=>p("endDate",e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Ns.jsxs)("button",{onClick:f,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,Ns.jsx)(gt,{className:"h-4 w-4"}),(0,Ns.jsx)("span",{children:"Refresh"})]})]})]}),(0,Ns.jsxs)("div",{className:"text-center text-sm text-gray-600 mb-6",children:["Period: ",(()=>{const e=new Date(h.startDate).toLocaleDateString("en-IN"),t=new Date(h.endDate).toLocaleDateString("en-IN");return"".concat(e," - ").concat(t)})()]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Ns.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,Ns.jsx)(Xe,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),(0,Ns.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Total Revenue"}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-blue-800",children:g(x.totalRevenue)})]}),(0,Ns.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[(0,Ns.jsx)(Nt,{className:"h-8 w-8 text-red-600 mx-auto mb-2"}),(0,Ns.jsx)("p",{className:"text-sm text-red-600 font-medium",children:"Total Expenses"}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-red-800",children:g(x.totalExpenses)})]}),(0,Ns.jsxs)("div",{className:"".concat(x.netProfit>=0?"bg-green-50":"bg-red-50"," rounded-lg p-4 text-center"),children:[(0,Ns.jsx)(y.icon,{className:"h-8 w-8 ".concat(y.color," mx-auto mb-2")}),(0,Ns.jsxs)("p",{className:"text-sm ".concat(y.color," font-medium"),children:["Net ",y.text]}),(0,Ns.jsx)("p",{className:"text-2xl font-bold ".concat(x.netProfit>=0?"text-green-800":"text-red-800"),children:g(Math.abs(x.netProfit))})]}),(0,Ns.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,Ns.jsx)(Qe,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),(0,Ns.jsx)("p",{className:"text-sm text-purple-600 font-medium",children:"Profit Margin"}),(0,Ns.jsxs)("p",{className:"text-2xl font-bold text-purple-800",children:[x.profitMargin.toFixed(1),"%"]})]})]}),(0,Ns.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[(0,Ns.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Total Shops"}),(0,Ns.jsx)("p",{className:"text-lg font-bold text-gray-800",children:b.totalShops})]}),(0,Ns.jsxs)("div",{className:"bg-green-50 rounded-lg p-3",children:[(0,Ns.jsx)("p",{className:"text-sm text-green-600",children:"Profitable Shops"}),(0,Ns.jsx)("p",{className:"text-lg font-bold text-green-800",children:b.profitableShops})]}),(0,Ns.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,Ns.jsx)("p",{className:"text-sm text-blue-600",children:"Top Performer"}),(0,Ns.jsx)("p",{className:"text-lg font-bold text-blue-800",children:(null===(e=b.topPerformingShop)||void 0===e?void 0:e.shopName)||"N/A"})]})]})]}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Ns.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Ns.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Shop Performance Analysis"}),(0,Ns.jsx)(Me,{className:"h-6 w-6 text-gray-600"})]}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shop"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expenses"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net P&L"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Margin %"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(e=>{const t=m(e.profitability.netProfit);return(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.shopName}),(0,Ns.jsx)("div",{className:"text-sm text-gray-500",children:e.location||"No location"})]})}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[(0,Ns.jsx)("div",{className:"text-sm font-medium text-gray-900",children:g(e.revenue.totalBillingProfit)}),(0,Ns.jsxs)("div",{className:"text-xs text-gray-500",children:[e.revenue.totalBills," bills"]})]}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,Ns.jsx)("div",{className:"text-sm font-medium text-gray-900",children:g(e.expenses.totalExpenses)})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,Ns.jsxs)("div",{className:"flex items-center justify-end space-x-1",children:[(0,Ns.jsx)(t.icon,{className:"h-4 w-4 ".concat(t.color)}),(0,Ns.jsx)("span",{className:"text-sm font-medium ".concat(t.color),children:g(Math.abs(e.profitability.netProfit))})]})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,Ns.jsxs)("span",{className:"text-sm font-medium ".concat(t.color),children:[e.profitability.profitMargin.toFixed(1),"%"]})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,Ns.jsx)("button",{onClick:()=>(e=>{c(e),u(!0)})(e),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View Details"})})]},e.shopId)})})]})})]}),v&&v.length>0&&(0,Ns.jsx)(hM,{shopData:v}),d&&l&&(0,Ns.jsx)(IT,{shop:l,dateRange:h,onClose:()=>{u(!1),c(null)}})]})};const fM=function(){return(0,Ns.jsx)("div",{className:"p-4 md:p-6",children:(0,Ns.jsx)(AM,{})})},pM=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),[A,f]=(0,r.useState)(null),p=(0,r.useCallback)(async()=>{s(!0);try{const e=await ws.get("/admin/warehouse/daily-schedules");t(e.data)}catch(e){i("Failed to fetch production schedules.")}finally{s(!1)}},[]);(0,r.useEffect)(()=>{p()},[p]);const m=e.filter(e=>e.sweetName&&e.sweetName.toLowerCase().includes(c.toLowerCase())).sort((e,t)=>new Date(t.date)-new Date(e.date));return n?(0,Ns.jsxs)("div",{className:"p-4 flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading production schedules..."})]}):(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Production Schedules"}),(0,Ns.jsx)("p",{className:"text-gray-600 mb-6",children:"Track and manage your daily production schedules with status updates."}),a&&(0,Ns.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:a}),o&&(0,Ns.jsx)("div",{className:"text-green-700 bg-green-100 p-3 rounded mb-4",children:o}),(0,Ns.jsx)("div",{className:"mb-4",children:(0,Ns.jsx)("input",{type:"text",placeholder:"Search schedules...",className:"w-full md:w-1/3 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",value:c,onChange:e=>d(e.target.value)})}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Ns.jsx)("thead",{className:"bg-light-gray",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Product Name"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Quantity"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Unit"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Date"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Status"}),(0,Ns.jsx)("th",{className:"py-2 px-4 text-left",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{children:m.length>0?m.map(e=>(0,Ns.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.sweetName}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.quantity}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.unit}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:new Date(e.date).toLocaleDateString()}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:(0,Ns.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.status})}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:"Pending"===e.status?(0,Ns.jsx)("button",{onClick:()=>(f(e),void h(!0)),className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 text-sm",children:"Mark Complete"}):(0,Ns.jsx)("span",{className:"text-gray-500 text-sm",children:"Completed"})})]},e._id)):(0,Ns.jsx)("tr",{children:(0,Ns.jsx)("td",{colSpan:"6",className:"text-center py-4",children:"No schedules found."})})})]})}),u&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,Ns.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Confirm Completion"}),(0,Ns.jsx)("p",{className:"mb-4",children:"Are you sure you want to mark this schedule as completed? Product stock will be automatically updated."}),(0,Ns.jsxs)("p",{className:"mb-4 font-semibold",children:["Product: ",null===A||void 0===A?void 0:A.sweetName," | Quantity: ",null===A||void 0===A?void 0:A.quantity," ",null===A||void 0===A?void 0:A.unit]}),(0,Ns.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Ns.jsx)("button",{onClick:()=>{h(!1),f(null)},className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:()=>{A&&((async(e,t)=>{try{const n=await ws.put("/admin/warehouse/daily-schedules/".concat(e,"/status"),{status:t});l(n.data.message),p()}catch(s){var n,r;i((null===(n=s.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to update schedule status.")}})(A._id,"Completed"),h(!1),f(null))},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Confirm"})]})]})})]})},mM=e=>{if(!e)return"--:--";const[t,n]=e.split(":");let r=parseInt(t,10);const s=r>=12?"PM":"AM";return r=r%12||12,"".concat(r,":").concat(n," ").concat(s)},gM=()=>{const[e,t]=(0,r.useState)(""),[n,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)([]),[u,h]=(0,r.useState)({name:"",workingHours:{from:"",to:"",included:!0},lunchBreak:{from:"",to:"",included:!0},breakTime:{from:"",to:"",included:!0}}),[A,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(null),[g,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/admin/settings/gst");t(e.data.gstPercentage||"")}catch(e){console.error("Error fetching GST settings:",e),i("Failed to load GST settings."),l("error")}})(),(async()=>{try{const e=await ws.get("/admin/settings/batches");d(e.data)}catch(e){console.error("Error fetching batch settings:",e)}})()},[]);const v=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;const n=parseFloat(e)||0;if(n<=0)return{baseAmount:t.toFixed(2),gstAmount:"0.00",totalAmount:t.toFixed(2)};const r=t/(1+n/100),s=t-r;return{baseAmount:r.toFixed(2),gstAmount:s.toFixed(2),totalAmount:t.toFixed(2)}}(100);return(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Settings"}),(0,Ns.jsx)("p",{className:"text-gray-600 mb-8",children:"Configure application settings and preferences."}),a&&(0,Ns.jsx)("div",{className:"mb-6 p-4 rounded-lg ".concat("success"===o?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:a}),(0,Ns.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 mb-8",children:[(0,Ns.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"GST Management"}),(0,Ns.jsx)("p",{className:"text-gray-600 mb-6",children:"Configure GST settings for billing and invoices."}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Percentage"}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsx)("input",{type:"text",step:"0.01",min:"0",max:"100",value:e,onChange:e=>t(e.target.value),placeholder:"Enter GST percentage",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary"}),(0,Ns.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,Ns.jsx)("span",{className:"text-gray-500",children:"%"})})]}),(0,Ns.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Enter the GST percentage to be applied to all bills and invoices."})]}),(0,Ns.jsx)("div",{className:"flex items-end",children:(0,Ns.jsx)("button",{type:"button",onClick:async()=>{if(""===e||isNaN(e)||e<0)return i("Please enter a valid GST percentage."),void l("error");s(!0),i("");try{const t=await ws.post("/admin/settings/gst",{gstPercentage:e});i(t.data.message),l("success"),setTimeout(()=>{i("")},3e3)}catch(t){console.error("Error saving GST settings:",t),i("Failed to save GST settings. Please try again."),l("error")}finally{s(!1)}},disabled:n,className:"w-full bg-primary text-white py-2 px-4 rounded-md hover:bg-primary-dark transition duration-200 ".concat(n?"opacity-50 cursor-not-allowed":""),children:n?"Saving...":"Save GST Settings"})})]}),(0,Ns.jsxs)("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"GST Calculation Example"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Ns.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Base Amount"}),(0,Ns.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",v.baseAmount]})]}),(0,Ns.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,Ns.jsxs)("p",{className:"text-sm text-gray-600",children:["GST (",e||0,"%)"]}),(0,Ns.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",v.gstAmount]})]}),(0,Ns.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Total Amount"}),(0,Ns.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",v.totalAmount]})]})]}),(0,Ns.jsxs)("p",{className:"mt-3 text-sm text-gray-600",children:["When a ",e||0,"% GST is applied to a \u20b9100 bill, the calculation is shown above."]})]})]}),(0,Ns.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,Ns.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Batch Management"}),(0,Ns.jsx)("p",{className:"text-gray-600 mb-6",children:"Configure work batches with predefined working hours, lunch breaks, and break times."}),(0,Ns.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:A?"Edit Batch":"Add New Batch"}),(0,Ns.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch Name"}),(0,Ns.jsx)("input",{type:"text",value:u.name,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{name:e.target.value})),placeholder:"Enter batch name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary"})]})}),(0,Ns.jsxs)("div",{className:"mb-4 p-3 bg-white rounded border",children:[(0,Ns.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Working Hours"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"From"}),(0,Ns.jsx)("input",{type:"time",value:u.workingHours.from,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{workingHours:(0,$n.A)((0,$n.A)({},u.workingHours),{},{from:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"To"}),(0,Ns.jsx)("input",{type:"time",value:u.workingHours.to,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{workingHours:(0,$n.A)((0,$n.A)({},u.workingHours),{},{to:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Ns.jsx)("div",{className:"flex items-end",children:(0,Ns.jsxs)("label",{className:"flex items-center text-sm",children:[(0,Ns.jsx)("input",{type:"checkbox",checked:u.workingHours.included,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{workingHours:(0,$n.A)((0,$n.A)({},u.workingHours),{},{included:e.target.checked})})),className:"mr-2"}),"Included in work time"]})})]})]}),(0,Ns.jsxs)("div",{className:"mb-4 p-3 bg-white rounded border",children:[(0,Ns.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Lunch Break"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"From"}),(0,Ns.jsx)("input",{type:"time",value:u.lunchBreak.from,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{lunchBreak:(0,$n.A)((0,$n.A)({},u.lunchBreak),{},{from:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"To"}),(0,Ns.jsx)("input",{type:"time",value:u.lunchBreak.to,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{lunchBreak:(0,$n.A)((0,$n.A)({},u.lunchBreak),{},{to:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Ns.jsx)("div",{className:"flex items-end",children:(0,Ns.jsxs)("label",{className:"flex items-center text-sm",children:[(0,Ns.jsx)("input",{type:"checkbox",checked:u.lunchBreak.included,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{lunchBreak:(0,$n.A)((0,$n.A)({},u.lunchBreak),{},{included:e.target.checked})})),className:"mr-2"}),"Included in work time"]})})]})]}),(0,Ns.jsxs)("div",{className:"mb-4 p-3 bg-white rounded border",children:[(0,Ns.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Break Time"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"From"}),(0,Ns.jsx)("input",{type:"time",value:u.breakTime.from,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{breakTime:(0,$n.A)((0,$n.A)({},u.breakTime),{},{from:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"To"}),(0,Ns.jsx)("input",{type:"time",value:u.breakTime.to,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{breakTime:(0,$n.A)((0,$n.A)({},u.breakTime),{},{to:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Ns.jsx)("div",{className:"flex items-end",children:(0,Ns.jsxs)("label",{className:"flex items-center text-sm",children:[(0,Ns.jsx)("input",{type:"checkbox",checked:u.breakTime.included,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{breakTime:(0,$n.A)((0,$n.A)({},u.breakTime),{},{included:e.target.checked})})),className:"mr-2"}),"Included in work time"]})})]})]}),(0,Ns.jsxs)("div",{className:"flex gap-2",children:[(0,Ns.jsx)("button",{type:"button",onClick:async()=>{if(!u.name)return i("Please enter a batch name."),void l("error");s(!0),i("");try{const e=A||Date.now().toString(),t=await ws.post("/admin/settings/batches",{batchId:e,name:u.name,workingHours:u.workingHours,lunchBreak:u.lunchBreak,breakTime:u.breakTime});i(t.data.message),l("success"),h({name:"",workingHours:{from:"",to:"",included:!0},lunchBreak:{from:"",to:"",included:!0},breakTime:{from:"",to:"",included:!0}}),f(null);const n=await ws.get("/admin/settings/batches");d(n.data),setTimeout(()=>{i("")},3e3)}catch(e){console.error("Error saving batch settings:",e),i("Failed to save batch settings. Please try again."),l("error")}finally{s(!1)}},disabled:n,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition duration-200 ".concat(n?"opacity-50 cursor-not-allowed":""),children:n?"Saving...":A?"Update Batch":"Add Batch"}),A&&(0,Ns.jsx)("button",{type:"button",onClick:()=>{h({name:"",workingHours:{from:"",to:"",included:!0},lunchBreak:{from:"",to:"",included:!0},breakTime:{from:"",to:"",included:!0}}),f(null)},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition duration-200",children:"Cancel"})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Existing Batches"}),0===c.length?(0,Ns.jsx)("p",{className:"text-gray-600 text-center py-4",children:"No batches configured yet."}):(0,Ns.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(e=>{var t,n,r,s,a,i,o,l,c,d,u;return(0,Ns.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,Ns.jsx)("h4",{className:"font-semibold text-gray-800",children:e.name}),(0,Ns.jsxs)("div",{className:"flex gap-2",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{h({name:e.name,workingHours:e.workingHours||{from:"",to:"",included:!0},lunchBreak:e.lunchBreak||{from:"",to:"",included:!0},breakTime:e.breakTime||{from:"",to:"",included:!0}}),f(e.id)})(e),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),(0,Ns.jsx)("button",{onClick:()=>(async e=>{x(e)})(e.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]}),(0,Ns.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"font-medium text-gray-700",children:"Working Hours"}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[null!==(t=e.workingHours)&&void 0!==t&&t.from?mM(e.workingHours.from):"--:--"," -",null!==(n=e.workingHours)&&void 0!==n&&n.to?mM(e.workingHours.to):"--:--",!(null!==(r=e.workingHours)&&void 0!==r&&r.included)&&" (Excluded)"]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"font-medium text-gray-700",children:"Lunch Break"}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[null!==(s=e.lunchBreak)&&void 0!==s&&s.from?mM(e.lunchBreak.from):"--:--"," -",null!==(a=e.lunchBreak)&&void 0!==a&&a.to?mM(e.lunchBreak.to):"--:--",void 0!==(null===(i=e.lunchBreak)||void 0===i?void 0:i.included)&&!(null!==(o=e.lunchBreak)&&void 0!==o&&o.included)&&" (Excluded)"]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"font-medium text-gray-700",children:"Break Time"}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[null!==(l=e.breakTime)&&void 0!==l&&l.from?mM(e.breakTime.from):"--:--"," -",null!==(c=e.breakTime)&&void 0!==c&&c.to?mM(e.breakTime.to):"--:--",void 0!==(null===(d=e.breakTime)||void 0===d?void 0:d.included)&&!(null!==(u=e.breakTime)&&void 0!==u&&u.included)&&" (Excluded)"]})]})]})]},e.id)})})]})]}),g&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Ns.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4",children:[(0,Ns.jsxs)("div",{className:"text-center",children:[(0,Ns.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,Ns.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,Ns.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mt-4",children:"Delete Batch"}),(0,Ns.jsx)("div",{className:"mt-2",children:(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this batch?"})})]}),(0,Ns.jsxs)("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense",children:[(0,Ns.jsx)("button",{type:"button",onClick:()=>(async e=>{try{const t=await ws.delete("/admin/settings/batches/".concat(e));i(t.data.message),l("success");const n=await ws.get("/admin/settings/batches");d(n.data),setTimeout(()=>{i("")},3e3)}catch(t){console.error("Error deleting batch:",t),t.response&&t.response.data&&t.response.data.message?i("Failed to delete batch: ".concat(t.response.data.message)):i("Failed to delete batch. Please try again."),l("error")}finally{x(null)}})(g),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:col-start-2 sm:text-sm",children:"Delete"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>{x(null)},className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm",children:"Cancel"})]})]})})]})},xM=e=>{var t;const n=null!==e&&void 0!==e&&e._id?e._id.slice(-8):"N/A",r=null!==e&&void 0!==e&&e.date?new Date(e.date).toLocaleDateString():"N/A",s=(null===e||void 0===e?void 0:e.category)||"N/A",a=(null===e||void 0===e?void 0:e.description)||"N/A",i=(null===e||void 0===e?void 0:e.paymentMode)||"N/A",o=(null===e||void 0===e?void 0:e.vendor)||"N/A",l=(null===e||void 0===e?void 0:e.amount)||0,c=(null===e||void 0===e||null===(t=e.shop)||void 0===t?void 0:t.name)||(null!==e&&void 0!==e&&e.admin?"Admin":"N/A"),d='\n    <div style="font-family: Arial, sans-serif; padding: 30px; max-width: 800px; margin: 0 auto;">\n      \x3c!-- Header --\x3e\n      <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #333; padding-bottom: 20px;">\n        <h1 style="color: #333; margin: 0; font-size: 32px;">The Sweet Hub</h1>\n        <p style="color: #666; font-size: 16px; margin: 10px 0 5px 0;">156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006</p>\n        <p style="color: #666; font-size: 16px; margin: 5px 0;">Phone: 7339200636</p>\n      </div>\n      \n      <div style="text-align: center; margin-bottom: 30px;">\n        <h2 style="color: #333; margin: 0; font-size: 28px;">EXPENSE RECEIPT</h2>\n      </div>\n      \n      \x3c!-- Expense Details --\x3e\n      <div style="margin-bottom: 30px; background-color: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #dee2e6;">\n        <h3 style="color: #333; margin-top: 0; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Expense Details</h3>\n        <div style="display: flex; justify-content: space-between;">\n          <div style="width: 48%;">\n            <p style="margin: 8px 0; font-size: 16px;"><strong>Receipt ID:</strong> '.concat(n,'</p>\n            <p style="margin: 8px 0; font-size: 16px;"><strong>Date:</strong> ').concat(r,'</p>\n            <p style="margin: 8px 0; font-size: 16px;"><strong>Shop:</strong> ').concat(c,'</p>\n          </div>\n          <div style="width: 48%; text-align: right;">\n            <p style="margin: 8px 0; font-size: 16px;"><strong>Category:</strong> ').concat(s,'</p>\n            <p style="margin: 8px 0; font-size: 16px;"><strong>Payment Mode:</strong> ').concat(i,'</p>\n            <p style="margin: 8px 0; font-size: 16px;"><strong>Vendor:</strong> ').concat(o,'</p>\n          </div>\n        </div>\n      </div>\n      \n      \x3c!-- Description --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Description</h3>\n        <div style="border: 1px solid #ddd; padding: 20px; border-radius: 8px; min-height: 60px; background-color: #fff;">\n          <p style="font-size: 16px; margin: 0; color: #333;">').concat(a,'</p>\n        </div>\n      </div>\n      \n      \x3c!-- Amount --\x3e\n      <div style="text-align: right; margin-bottom: 40px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px;">Amount</h3>\n        <div style="border: 1px solid #ddd; padding: 25px; border-radius: 8px; background-color: #f9f9f9;">\n          <p style="font-size: 32px; font-weight: bold; color: #333; margin: 0;">\u20b9').concat(l.toFixed(2),'</p>\n        </div>\n      </div>\n      \n      <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; text-align: center;">\n        <p style="color: #777; font-size: 14px; margin: 0;">\n          Generated on ').concat((new Date).toLocaleDateString()," at ").concat((new Date).toLocaleTimeString(),'\n        </p>\n        <p style="color: #777; font-size: 14px; margin: 5px 0 0 0;">\n          Receipt generated by The Sweet Hub Expense Management System\n        </p>\n      </div>\n    </div>\n  '),u={margin:15,filename:"expense_".concat(n,"_").concat(r.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};fw()().from(d).set(u).save()},vM=e=>{var t;let{expense:n,onClose:r,onDownload:s}=e;const a=e=>new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,Ns.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ns.jsx)(mt,{className:"text-blue-500 text-xl"}),(0,Ns.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Expense Details"})]}),(0,Ns.jsx)("button",{onClick:r,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,Ns.jsx)(Ft,{className:"text-gray-500 text-xl"})})]}),(0,Ns.jsxs)("div",{className:"p-6",children:[(0,Ns.jsx)("div",{className:"mb-6",children:(0,Ns.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:n.category}),(0,Ns.jsx)("p",{className:"text-gray-600",children:n.description||"No description provided"})]}),(0,Ns.jsxs)("div",{className:"text-right",children:[(0,Ns.jsx)("p",{className:"text-2xl font-bold text-red-600",children:(o=n.amount,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(o))}),(0,Ns.jsxs)("p",{className:"text-sm text-gray-500",children:["Expense ID: ",n._id]})]})]})}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,Ns.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Date"}),(0,Ns.jsx)("p",{className:"font-medium",children:(i=n.date,new Date(i).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}))})]}),(0,Ns.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Payment Mode"}),(0,Ns.jsx)("p",{className:"font-medium",children:n.paymentMode})]}),(0,Ns.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Vendor"}),(0,Ns.jsx)("p",{className:"font-medium",children:n.vendor||"Not specified"})]}),(0,Ns.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Created By"}),(0,Ns.jsx)("p",{className:"font-medium",children:(null===(t=n.createdBy)||void 0===t?void 0:t.name)||(n.admin?"Admin":n.shop?n.shop.name:"Unknown")})]}),n.shop&&(0,Ns.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Shop"}),(0,Ns.jsx)("p",{className:"font-medium",children:n.shop.name})]}),n.admin&&(0,Ns.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Created By"}),(0,Ns.jsx)("p",{className:"font-medium",children:"Admin"})]})]}),(0,Ns.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg mb-6 border border-blue-100",children:(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ns.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[(0,Ns.jsxs)("p",{className:"text-sm text-blue-600 mb-1 flex items-center gap-1",children:[(0,Ns.jsx)(Ue,{className:"text-blue-500"}),"Created At"]}),(0,Ns.jsx)("p",{className:"font-medium text-blue-800",children:a(n.createdAt)})]}),(0,Ns.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[(0,Ns.jsxs)("p",{className:"text-sm text-blue-600 mb-1 flex items-center gap-1",children:[(0,Ns.jsx)(Ue,{className:"text-blue-500"}),"Last Updated"]}),(0,Ns.jsx)("p",{className:"font-medium text-blue-800",children:a(n.updatedAt)})]})]})}),(0,Ns.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,Ns.jsxs)("button",{onClick:()=>window.print(),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 text-gray-700 rounded-lg transition-all shadow-sm hover:shadow-md",children:[(0,Ns.jsx)(pt,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"Print"})]}),(0,Ns.jsxs)("button",{onClick:()=>(e=>{xM(e)})(n),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all shadow-md hover:shadow-lg",children:[(0,Ns.jsx)(Ye,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"Download PDF"})]})]})]})]})}):null;var i,o},bM=()=>{var e;const t=ee(),[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)([]),[u,h]=(0,r.useState)("admin"),[A,f]=(0,r.useState)(null),p=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(e);(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/admin/shops",{withCredentials:!0});d(e.data)}catch(e){console.error("Error fetching shops:",e)}})()},[]),(0,r.useEffect)(()=>{(async()=>{try{let e;i(!0),e="admin"===u?await ws.get("/admin/expenses?filter=admin",{withCredentials:!0}):await ws.get("/admin/expenses?shopId=".concat(u),{withCredentials:!0});let t=e.data;t="admin"===u?e.data.filter(e=>e.admin):e.data.filter(e=>e.shop&&e.shop._id===u),s(t)}catch(e){console.error("Error fetching expenses:",e),l("Failed to fetch expenses")}finally{i(!1)}})()},[u]);const m=e=>{xM(e)},g=n.reduce((e,t)=>e+t.amount,0),x=n.filter(e=>{const t=new Date(e.date),n=new Date;return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}).reduce((e,t)=>e+t.amount,0),v=n.filter(e=>{const t=new Date(e.date),n=new Date,r=new Date(n);r.setDate(n.getDate()-n.getDay());const s=new Date(r);return s.setDate(r.getDate()+6),t>=r&&t<=s}).reduce((e,t)=>e+t.amount,0);new Set(n.map(e=>e.category));return(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Expenses Management"}),(0,Ns.jsx)("p",{className:"text-gray-600",children:"Track and manage all expenses"})]}),(0,Ns.jsxs)("div",{className:"flex gap-3",children:[(0,Ns.jsxs)("button",{onClick:()=>t("/admin/expenses/history"),className:"flex items-center gap-2 bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-4 py-2 rounded-xl transition-all shadow-md hover:shadow-lg",children:[(0,Ns.jsx)(rt,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"History"})]}),(0,Ns.jsxs)("button",{onClick:()=>t("/admin/expenses/add"),className:"flex items-center gap-2 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-4 py-2 rounded-xl transition-all shadow-md hover:shadow-lg",children:[(0,Ns.jsx)(ft,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"Add Expense"})]})]})]}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Ns.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[(0,Ns.jsx)(mt,{className:"text-blue-500"}),"Expense View"]}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg py-2 pl-4 pr-10 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",children:[(0,Ns.jsx)("option",{value:"admin",children:"Admin Expenses"}),c.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]}),(0,Ns.jsx)(ze,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),(0,Ns.jsx)("div",{className:"mt-4",children:"admin"===u?(0,Ns.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-4 rounded-lg",children:(0,Ns.jsxs)("p",{className:"text-blue-800 font-bold text-lg flex items-center gap-2",children:[(0,Ns.jsx)(mt,{className:"text-blue-600"}),"Currently viewing: ",(0,Ns.jsx)("span",{className:"underline",children:"Admin expenses"})]})}):(0,Ns.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-500 p-4 rounded-lg",children:(0,Ns.jsxs)("p",{className:"text-green-800 font-bold text-lg flex items-center gap-2",children:[(0,Ns.jsx)(mt,{className:"text-green-600"}),"Currently viewing: ",(0,Ns.jsxs)("span",{className:"underline",children:[(null===(e=c.find(e=>e._id===u))||void 0===e?void 0:e.name)||"Shop"," expenses"]})]})})})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow",children:(0,Ns.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,Ns.jsx)(mt,{className:"text-gray-400"}),"Total Expenses"]}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:p(g)})]}),(0,Ns.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,Ns.jsx)(mt,{className:"text-red-600 text-xl"})})]})}),(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow",children:(0,Ns.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,Ns.jsx)(jt,{className:"text-gray-400"}),"This Month"]}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:p(x)})]}),(0,Ns.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,Ns.jsx)(jt,{className:"text-blue-600 text-xl"})})]})}),(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow",children:(0,Ns.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,Ns.jsx)(Ue,{className:"text-gray-400"}),"This Week"]}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:p(v)})]}),(0,Ns.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,Ns.jsx)(Ue,{className:"text-green-600 text-xl"})})]})})]}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,Ns.jsxs)("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[(0,Ns.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[(0,Ns.jsx)(mt,{className:"text-blue-500"}),"Recent Expenses"]}),(0,Ns.jsxs)("button",{onClick:()=>t("/admin/expenses/history"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center gap-1",children:["View All",(0,Ns.jsx)(rt,{className:"text-sm"})]})]}),(0,Ns.jsx)("div",{className:"p-6",children:a?(0,Ns.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,Ns.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):o?(0,Ns.jsxs)("div",{className:"text-center py-12",children:[(0,Ns.jsx)("div",{className:"text-red-500 mb-4 text-xl",children:"\u26a0\ufe0f"}),(0,Ns.jsx)("div",{className:"text-red-500 mb-4",children:o}),(0,Ns.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors shadow-md hover:shadow-lg",children:"Retry"})]}):0===n.length?(0,Ns.jsxs)("div",{className:"text-center py-12",children:[(0,Ns.jsx)(mt,{className:"mx-auto text-gray-300 text-5xl mb-4"}),(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No expenses recorded yet"}),(0,Ns.jsx)("p",{className:"text-gray-500 mb-4",children:"Add your first expense to get started"}),(0,Ns.jsxs)("button",{onClick:()=>t("/admin/expenses/add"),className:"flex items-center gap-2 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-4 py-2 rounded-lg transition-all shadow-md hover:shadow-lg mx-auto",children:[(0,Ns.jsx)(ft,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"Add Expense"})]})]}):(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Mode"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.slice(0,5).map(e=>{return(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(t=e.date,new Date(t).toLocaleDateString("en-IN"))}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.category})}),(0,Ns.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs",children:(0,Ns.jsx)("div",{className:"max-w-xs truncate",title:e.description||"-",children:e.description||"-"})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e.paymentMode||"-"})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.vendor||"-"}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:p(e.amount)}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Ns.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{f(e)})(e),className:"p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:(0,Ns.jsx)(Ze,{className:"h-5 w-5"})}),(0,Ns.jsx)("button",{onClick:()=>m(e),className:"p-2 text-green-600 hover:text-green-900 hover:bg-green-50 rounded-lg transition-colors",title:"Download PDF",children:(0,Ns.jsx)(Ye,{className:"h-5 w-5"})})]})})]},e._id);var t})})]})})})]}),A&&(0,Ns.jsx)(vM,{expense:A,onClose:()=>{f(null)},onDownload:m})]})},yM=()=>{const e=ee(),[t,n]=(0,r.useState)({category:"",amount:"",description:"",date:"",vendor:"",paymentMode:""}),[s,a]=(0,r.useState)(""),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),d=e=>{const{name:t,value:r}=e.target;"category"===t?(n(e=>(0,$n.A)((0,$n.A)({},e),{},{[t]:r})),"Others"!==r&&a("")):n(e=>(0,$n.A)((0,$n.A)({},e),{},{[t]:r}))};return(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ns.jsx)("button",{onClick:()=>e("/admin/expenses"),className:"p-3 rounded-xl hover:bg-gray-100 transition-colors shadow-sm hover:shadow-md",disabled:i,children:(0,Ns.jsx)(De,{className:"text-gray-600 text-xl"})}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Add New Expense"}),(0,Ns.jsx)("p",{className:"text-gray-600",children:"Record a new expense entry"})]})]}),l&&(0,Ns.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg",children:(0,Ns.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Error:"}),(0,Ns.jsx)("span",{children:l})]})}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,Ns.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,Ns.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Expense Details"})}),(0,Ns.jsxs)("form",{onSubmit:async n=>{n.preventDefault();const r="Others"===t.category?s:t.category;if(r&&t.amount&&t.date&&t.paymentMode){o(!0),c("");try{const n={category:r,amount:parseFloat(t.amount),description:t.description,date:t.date,vendor:t.vendor,paymentMode:t.paymentMode};201===(await ws.post("/admin/expenses",n,{headers:{"Content-Type":"application/json"},withCredentials:!0})).status&&e("/admin/expenses")}catch(l){var a,i;console.error("Error saving expense:",l),c((null===(a=l.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)||"Failed to save expense. Please try again.")}finally{o(!1)}}else c("Please fill in all required fields")},className:"p-6 space-y-6",children:[(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:"Category *"}),(0,Ns.jsxs)("select",{name:"category",value:t.category,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",required:!0,disabled:i,children:[(0,Ns.jsx)("option",{value:"",children:"Select Category"}),["Transport","Petrol / Diesel","Electricity","Raw Materials","Salary / Wages","Maintenance","Miscellaneous"].map(e=>(0,Ns.jsx)("option",{value:e,children:e},e)),(0,Ns.jsx)("option",{value:"Others",children:"Others"})]}),"Others"===t.category&&(0,Ns.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Custom Category *"}),(0,Ns.jsx)("input",{type:"text",name:"customCategory",value:s,onChange:e=>{const t=e.target.value;a(t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",placeholder:"Enter custom category",required:!0,disabled:i}),(0,Ns.jsx)("p",{className:"text-xs text-gray-500",children:"Enter your custom expense category"})]})]}),(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsxs)("label",{className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:[(0,Ns.jsx)(at,{className:"text-gray-500"}),"Amount *"]}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Ns.jsx)(at,{className:"text-gray-400"})}),(0,Ns.jsx)("input",{type:"text",name:"amount",value:t.amount,onChange:d,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",placeholder:"0.00",required:!0,disabled:i,min:"0",step:"0.01"})]})]}),(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsxs)("label",{className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:[(0,Ns.jsx)(Ue,{className:"text-gray-500"}),"Date *"]}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Ns.jsx)(Ue,{className:"text-gray-400"})}),(0,Ns.jsx)("input",{type:"date",name:"date",value:t.date,onChange:d,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",required:!0,disabled:i})]})]}),(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:"Payment Mode *"}),(0,Ns.jsxs)("select",{name:"paymentMode",value:t.paymentMode,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",required:!0,disabled:i,children:[(0,Ns.jsx)("option",{value:"",children:"Select Payment Mode"}),["Cash","UPI","Bank Transfer"].map(e=>(0,Ns.jsx)("option",{value:e,children:e},e))]})]}),(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Vendor"}),(0,Ns.jsx)("input",{type:"text",name:"vendor",value:t.vendor,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",placeholder:"Vendor name",disabled:i})]}),(0,Ns.jsxs)("div",{className:"space-y-1 md:col-span-2",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,Ns.jsx)("textarea",{name:"description",value:t.description,onChange:d,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",placeholder:"Enter expense description",disabled:i})]})]}),(0,Ns.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,Ns.jsx)("button",{type:"button",onClick:()=>e("/admin/expenses"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:i,children:"Cancel"}),(0,Ns.jsx)("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-6 py-2 rounded-lg transition-all ".concat(i?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white shadow-md hover:shadow-lg"),children:i?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,Ns.jsx)("span",{children:"Saving..."})]}):(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(ft,{className:"text-lg"}),"Add Expense"]})})]})]})]})]})},wM=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=t?new Date(t).toLocaleDateString():"N/A",a=n?new Date(n).toLocaleDateString():"N/A",i=e.reduce((e,t)=>e+t.amount,0),o={};e.forEach(e=>{const t=e.category||"Uncategorized";o[t]||(o[t]=[]),o[t].push(e)});const l=Object.keys(o).map(e=>{const t=o[e].reduce((e,t)=>e+t.amount,0);return'\n      <tr>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">'.concat(e,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 14px;">').concat(o[e].length,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px;">\u20b9').concat(t.toFixed(2),"</td>\n      </tr>\n    ")}).join(""),c=e.map(e=>{var t;const n=e.date?new Date(e.date).toLocaleDateString():"N/A",r=e.admin?"Admin":(null===(t=e.shop)||void 0===t?void 0:t.name)||"N/A";return'\n      <tr>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">'.concat(n,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">').concat(r,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">').concat(e.category||"N/A",'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">').concat(e.description||"-",'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">').concat(e.paymentMode||"N/A",'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px;">\u20b9').concat(e.amount.toFixed(2),"</td>\n      </tr>\n    ")}).join(""),d=[];r.shop&&d.push("Shop: ".concat(r.shop)),r.category&&d.push("Category: ".concat(r.category)),r.paymentMode&&d.push("Payment Mode: ".concat(r.paymentMode));const u=d.length>0?'<p style="margin: 8px 0; font-size: 16px;"><strong>Filters Applied:</strong> '.concat(d.join(", "),"</p>"):"",h='\n    <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 1000px; margin: 0 auto;">\n      \x3c!-- Header --\x3e\n      <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #333; padding-bottom: 20px;">\n        <h1 style="color: #333; margin: 0; font-size: 32px;">The Sweet Hub</h1>\n        <p style="color: #666; font-size: 16px; margin: 10px 0 5px 0;">156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006</p>\n        <p style="color: #666; font-size: 16px; margin: 5px 0;">Phone: 7339200636</p>\n      </div>\n      \n      <div style="text-align: center; margin-bottom: 30px;">\n        <h2 style="color: #333; margin: 0; font-size: 28px;">EXPENSE REPORT</h2>\n        <p style="color: #666; font-size: 18px; margin: 15px 0;">\n          Period: '.concat(s," to ").concat(a,"\n        </p>\n        ").concat(u,'\n      </div>\n      \n      \x3c!-- Summary --\x3e\n      <div style="margin-bottom: 30px; background-color: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #dee2e6;">\n        <h3 style="color: #333; margin-top: 0; font-size: 20px;">Report Summary</h3>\n        <div style="display: flex; justify-content: space-around; text-align: center;">\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Expenses</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(e.length,'</p>\n          </div>\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Amount</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">\u20b9').concat(i.toFixed(2),'</p>\n          </div>\n        </div>\n      </div>\n      \n      \x3c!-- Category Summary --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Expenses by Category</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Category</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: center; font-size: 16px; font-weight: bold;">Count</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: right; font-size: 16px; font-weight: bold;">Total Amount</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(l,'\n          </tbody>\n        </table>\n      </div>\n      \n      \x3c!-- Detailed Expenses --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Detailed Expenses</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Date</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Shop</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Category</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Description</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Payment Mode</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: right; font-size: 16px; font-weight: bold;">Amount</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(c,'\n          </tbody>\n        </table>\n      </div>\n      \n      <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; text-align: center;">\n        <p style="color: #777; font-size: 14px; margin: 0;">\n          Generated on ').concat((new Date).toLocaleDateString()," at ").concat((new Date).toLocaleTimeString(),'\n        </p>\n        <p style="color: #777; font-size: 14px; margin: 5px 0 0 0;">\n          Report generated by The Sweet Hub Expense Management System\n        </p>\n      </div>\n    </div>\n  '),A={margin:15,filename:"expense_report_".concat(s.replace(/\//g,"-"),"_to_").concat(a.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};fw()().from(h).set(A).save()},NM=()=>{const e=ee(),[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)([]),[h,A]=(0,r.useState)(null),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[x,v]=(0,r.useState)(""),[b,y]=(0,r.useState)(""),[w,N]=(0,r.useState)(""),j=[...new Set(t.map(e=>e.category))],C=[...new Set(t.map(e=>e.paymentMode))],B=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(e),k=e=>new Date(e).toLocaleDateString("en-IN");(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/admin/shops",{withCredentials:!0});u(e.data)}catch(e){console.error("Error fetching shops:",e)}})()},[]),(0,r.useEffect)(()=>{(async()=>{try{o(!0);const e=await ws.get("/admin/expenses",{withCredentials:!0});n(e.data),a(e.data)}catch(e){console.error("Error fetching expenses:",e),c("Failed to fetch expenses")}finally{o(!1)}})()},[]),(0,r.useEffect)(()=>{let e=[...t];w&&(e=e.filter(e=>e.admin?"admin"===w:!!e.shop&&e.shop._id===w)),f&&(e=e.filter(e=>e.category===f)),b&&(e=e.filter(e=>e.paymentMode===b)),m&&(e=e.filter(e=>new Date(e.date)>=new Date(m))),x&&(e=e.filter(e=>{const t=new Date(e.date),n=new Date(x);return n.setHours(23,59,59,999),t<=n})),a(e)},[f,m,x,b,w,t]);const S=()=>{p(""),g(""),v(""),y(""),N("")},_=e=>{xM(e)},E=e=>{const t=new Date;let n=new Date,r=new Date;switch(e){case"daily":n=new Date(t),r=new Date(t);break;case"weekly":const e=t.getDay();n=new Date(t),n.setDate(t.getDate()-e),r=new Date(n),r.setDate(n.getDate()+6);break;case"monthly":n=new Date(t.getFullYear(),t.getMonth(),1),r=new Date(t.getFullYear(),t.getMonth()+1,0);break;case"yearly":n=new Date(t.getFullYear(),0,1),r=new Date(t.getFullYear(),11,31);break;default:return}const s=e=>e.toISOString().split("T")[0];g(s(n)),v(s(r))};return(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ns.jsx)("button",{onClick:()=>e("/admin/expenses"),className:"p-3 rounded-xl hover:bg-gray-100 transition-colors shadow-sm hover:shadow-md",children:(0,Ns.jsx)(De,{className:"text-gray-600 text-xl"})}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Expense History"}),(0,Ns.jsx)("p",{className:"text-gray-600",children:"View and manage all expense records"})]})]}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[(0,Ns.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ns.jsx)(nt,{className:"text-blue-600 text-xl"}),(0,Ns.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Filter Expenses"})]}),(0,Ns.jsxs)("button",{onClick:S,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-lg transition-colors",children:[(0,Ns.jsx)(Ft,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"Clear Filters"})]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Shop"}),(0,Ns.jsxs)("select",{value:w,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[(0,Ns.jsx)("option",{value:"",children:"All Shops"}),(0,Ns.jsx)("option",{value:"admin",children:"Admin Expenses"}),d.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,Ns.jsxs)("select",{value:f,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[(0,Ns.jsx)("option",{value:"",children:"All Categories"}),j.map(e=>(0,Ns.jsx)("option",{value:e,children:e},e))]})]}),(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Mode"}),(0,Ns.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[(0,Ns.jsx)("option",{value:"",children:"All Modes"}),C.map(e=>(0,Ns.jsx)("option",{value:e,children:e},e))]})]}),(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"From Date"}),(0,Ns.jsx)("input",{type:"date",value:m,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"To Date"}),(0,Ns.jsx)("input",{type:"date",value:x,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})]}),(0,Ns.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,Ns.jsx)("button",{onClick:()=>E("daily"),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"Today"}),(0,Ns.jsx)("button",{onClick:()=>E("weekly"),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"This Week"}),(0,Ns.jsx)("button",{onClick:()=>E("monthly"),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"This Month"}),(0,Ns.jsx)("button",{onClick:()=>E("yearly"),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"This Year"})]}),(m||x)&&(0,Ns.jsx)("div",{className:"mt-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 shadow-sm",children:(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ns.jsx)(nt,{className:"text-blue-600"}),(0,Ns.jsx)("span",{className:"text-blue-800 font-semibold",children:"Filtered Report"})]}),(0,Ns.jsxs)("div",{className:"ml-6",children:[(0,Ns.jsx)("p",{className:"text-blue-700 text-sm",children:m&&x?"Period: ".concat(k(m)," to ").concat(k(x)):m?"From: ".concat(k(m)):"To: ".concat(k(x))}),(0,Ns.jsxs)("p",{className:"text-blue-800 font-bold text-lg",children:["Total: ",B(s.reduce((e,t)=>e+t.amount,0))]}),(0,Ns.jsxs)("p",{className:"text-blue-600 text-sm",children:[s.length," expense",1!==s.length?"s":""]})]})]}),(0,Ns.jsxs)("button",{onClick:()=>{if(!m||!x)return;const e={};if(w){const t=d.find(e=>e._id===w);e.shop=t?t.name:"admin"===w?"Admin Expenses":w}f&&(e.category=f),b&&(e.paymentMode=b),wM(s,m,x,e)},disabled:!m||!x,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all ".concat(m&&x?"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white shadow-md hover:shadow-lg transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,Ns.jsx)(Ye,{className:"text-lg"}),(0,Ns.jsx)("span",{className:"font-medium",children:"Download Report"})]})]})})]}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,Ns.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,Ns.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:["All Expenses (",s.length,")"]})}),(0,Ns.jsx)("div",{className:"p-6",children:i?(0,Ns.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,Ns.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l?(0,Ns.jsxs)("div",{className:"text-center py-12",children:[(0,Ns.jsx)("div",{className:"text-red-500 mb-4 text-xl",children:"\u26a0\ufe0f"}),(0,Ns.jsx)("div",{className:"text-red-500 mb-4",children:l}),(0,Ns.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors shadow-md hover:shadow-lg",children:"Retry"})]}):0===s.length?(0,Ns.jsxs)("div",{className:"text-center py-12",children:[(0,Ns.jsx)(nt,{className:"mx-auto text-gray-300 text-5xl mb-4"}),(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No expenses found"}),(0,Ns.jsx)("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters"}),(0,Ns.jsx)("button",{onClick:S,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all shadow-md hover:shadow-lg",children:"Clear Filters"})]}):(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shop"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Mode"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>{var t;return(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k(e.date)}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.admin?(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Admin"}):(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:(null===(t=e.shop)||void 0===t?void 0:t.name)||"Unknown Shop"})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.category}),(0,Ns.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs",children:(0,Ns.jsx)("div",{className:"max-w-xs truncate",title:e.description||"-",children:e.description||"-"})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e.paymentMode})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.vendor||"-"}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:B(e.amount)}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Ns.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{const t=s.find(t=>t._id===e);t&&A(t)})(e._id),className:"p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:(0,Ns.jsx)(Ze,{className:"h-5 w-5"})}),(0,Ns.jsx)("button",{onClick:()=>_(e),className:"p-2 text-green-600 hover:text-green-900 hover:bg-green-50 rounded-lg transition-colors",title:"Download PDF",children:(0,Ns.jsx)(Ye,{className:"h-5 w-5"})})]})})]},e._id)})})]})})})]}),h&&(0,Ns.jsx)(vM,{expense:h,onClose:()=>{A(null)},onDownload:_})]})},jM=(0,r.createContext)(),CM=()=>{const e=(0,r.useContext)(jM);if(!e)throw new Error("useEWayBills must be used within an EWayBillProvider");return e},BM=e=>{let{children:t}=e;const[n,s]=(0,r.useState)(()=>{try{const e=localStorage.getItem("ewayBills");return e?JSON.parse(e):[]}catch(e){return console.error("Error loading E-Way bills from localStorage:",e),[]}});(0,r.useEffect)(()=>{try{localStorage.setItem("ewayBills",JSON.stringify(n))}catch(e){console.error("Error saving E-Way bills to localStorage:",e)}},[n]);const a=e=>{const t=new Date;return new Date(e)>=t?"Active":"Expired"},i={ewayBills:n,addEWayBill:e=>{let t=0;e.totalInvoiceValue?t=parseFloat(e.totalInvoiceValue):e.goodsDetails&&e.goodsDetails.length>0&&(t=e.goodsDetails.reduce((e,t)=>e+(parseFloat(t.totalAmount)||0),0));const n=(0,$n.A)((0,$n.A)({},e),{},{id:Date.now(),totalAmount:t,status:a(e.validTo)});s(e=>[...e,n])}};return(0,Ns.jsx)(jM.Provider,{value:i,children:t})},kM=()=>{const e=ee(),{addEWayBill:t}=CM(),[n,s]=(0,r.useState)({ewbNumber:"",generatedBy:"",generatedDate:"",validFrom:"",validTo:"",supplyType:"Outward",subType:"Supply",documentType:"Invoice",documentNumber:"",documentDate:"",senderGstin:"",senderLegalName:"",senderTradeName:"",senderAddress:"",senderPlace:"",senderPincode:"",senderState:"",senderStateCode:"",receiverGstin:"",receiverLegalName:"",receiverTradeName:"",receiverAddress:"",receiverPlace:"",receiverPincode:"",receiverState:"",receiverStateCode:"",transportMode:"Road",approxDistance:"",transporterId:"",transporterName:"",transporterDocNumber:"",transporterDocDate:"",vehicleNumber:"",vehicleType:"Regular",dispatchPlace:"",dispatchState:""}),[a,i]=(0,r.useState)([{productName:"",hsnCode:"",quantity:"",unit:"",taxableValue:"",cgstRate:"",sgstRate:"",igstRate:"",cgstAmount:"",sgstAmount:"",igstAmount:"",totalAmount:""}]),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),u=e=>{const{name:t,value:n}=e.target;s(e=>(0,$n.A)((0,$n.A)({},e),{},{[t]:n}))},h=(e,t)=>{const{name:n,value:r}=t.target,s=[...a];s[e][n]=r,i(s)};return(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ns.jsx)("button",{onClick:()=>e("/admin/eway-bills/history"),className:"p-3 rounded-xl hover:bg-gray-100 transition-colors shadow-sm hover:shadow-md",disabled:o,children:(0,Ns.jsx)(De,{className:"text-gray-600 text-xl"})}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Create E-Way Bill"}),(0,Ns.jsx)("p",{className:"text-gray-600",children:"Generate a new E-Way bill for transportation"})]})]}),c&&(0,Ns.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg",children:(0,Ns.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Error:"}),(0,Ns.jsx)("span",{children:c})]})}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,Ns.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,Ns.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"E-Way Bill Details"})}),(0,Ns.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),l(!0),d("");try{const r=(0,$n.A)((0,$n.A)({},n),{},{goodsDetails:a,totalAmount:parseFloat(n.totalInvoiceValue)||0});t(r),e("/admin/eway-bills/history")}catch(s){console.error("Error creating E-Way bill:",s),d("Failed to create E-Way bill. Please try again.")}finally{l(!1)}},className:"p-6 space-y-8",children:[(0,Ns.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Ns.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-4",children:"E-Way Bill Header"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-Way Bill Number"}),(0,Ns.jsx)("input",{type:"text",name:"ewbNumber",value:n.ewbNumber,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter E-Way Bill Number",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Generated By"}),(0,Ns.jsx)("input",{type:"text",name:"generatedBy",value:n.generatedBy,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Generator Name",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Generated Date"}),(0,Ns.jsx)("input",{type:"date",name:"generatedDate",value:n.generatedDate,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid From"}),(0,Ns.jsx)("input",{type:"date",name:"validFrom",value:n.validFrom,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid To"}),(0,Ns.jsx)("input",{type:"date",name:"validTo",value:n.validTo,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supply Type"}),(0,Ns.jsxs)("select",{name:"supplyType",value:n.supplyType,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o,children:[(0,Ns.jsx)("option",{value:"Outward",children:"Outward"}),(0,Ns.jsx)("option",{value:"Inward",children:"Inward"})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub Type"}),(0,Ns.jsxs)("select",{name:"subType",value:n.subType,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o,children:[(0,Ns.jsx)("option",{value:"Supply",children:"Supply"}),(0,Ns.jsx)("option",{value:"Export",children:"Export"}),(0,Ns.jsx)("option",{value:"Job Work",children:"Job Work"}),(0,Ns.jsx)("option",{value:"Others",children:"Others"})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Type"}),(0,Ns.jsxs)("select",{name:"documentType",value:n.documentType,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o,children:[(0,Ns.jsx)("option",{value:"Invoice",children:"Invoice"}),(0,Ns.jsx)("option",{value:"Bill",children:"Bill"}),(0,Ns.jsx)("option",{value:"Challan",children:"Challan"})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Number"}),(0,Ns.jsx)("input",{type:"text",name:"documentNumber",value:n.documentNumber,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Document Number",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Date"}),(0,Ns.jsx)("input",{type:"date",name:"documentDate",value:n.documentDate,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o})]})]})]}),(0,Ns.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Ns.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-4",children:"PART-A: Sender (From) Information"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GSTIN"}),(0,Ns.jsx)("input",{type:"text",name:"senderGstin",value:n.senderGstin,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter GSTIN",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal Name"}),(0,Ns.jsx)("input",{type:"text",name:"senderLegalName",value:n.senderLegalName,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Legal Name",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trade Name"}),(0,Ns.jsx)("input",{type:"text",name:"senderTradeName",value:n.senderTradeName,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Trade Name",disabled:o})]}),(0,Ns.jsxs)("div",{className:"md:col-span-2",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Ns.jsx)("textarea",{name:"senderAddress",value:n.senderAddress,onChange:u,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Address",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Place"}),(0,Ns.jsx)("input",{type:"text",name:"senderPlace",value:n.senderPlace,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Place",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode"}),(0,Ns.jsx)("input",{type:"text",name:"senderPincode",value:n.senderPincode,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Pincode",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,Ns.jsx)("input",{type:"text",name:"senderState",value:n.senderState,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter State",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Code"}),(0,Ns.jsx)("input",{type:"text",name:"senderStateCode",value:n.senderStateCode,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter State Code",disabled:o})]})]})]}),(0,Ns.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Ns.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-4",children:"PART-A: Receiver (To) Information"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GSTIN"}),(0,Ns.jsx)("input",{type:"text",name:"receiverGstin",value:n.receiverGstin,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter GSTIN",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal Name"}),(0,Ns.jsx)("input",{type:"text",name:"receiverLegalName",value:n.receiverLegalName,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Legal Name",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trade Name"}),(0,Ns.jsx)("input",{type:"text",name:"receiverTradeName",value:n.receiverTradeName,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Trade Name",disabled:o})]}),(0,Ns.jsxs)("div",{className:"md:col-span-2",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Ns.jsx)("textarea",{name:"receiverAddress",value:n.receiverAddress,onChange:u,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Address",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Place"}),(0,Ns.jsx)("input",{type:"text",name:"receiverPlace",value:n.receiverPlace,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Place",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode"}),(0,Ns.jsx)("input",{type:"text",name:"receiverPincode",value:n.receiverPincode,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Pincode",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,Ns.jsx)("input",{type:"text",name:"receiverState",value:n.receiverState,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter State",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Code"}),(0,Ns.jsx)("input",{type:"text",name:"receiverStateCode",value:n.receiverStateCode,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter State Code",disabled:o})]})]})]}),(0,Ns.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h3",{className:"text-md font-semibold text-gray-800",children:"PART-A: Goods Details"}),(0,Ns.jsxs)("button",{type:"button",onClick:()=>{i(e=>[...e,{productName:"",hsnCode:"",quantity:"",unit:"",taxableValue:"",cgstRate:"",sgstRate:"",igstRate:"",cgstAmount:"",sgstAmount:"",igstAmount:"",totalAmount:""}])},className:"flex items-center gap-1 px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",disabled:o,children:[(0,Ns.jsx)(ft,{className:"text-sm"}),(0,Ns.jsx)("span",{children:"Add Row"})]})]}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Ns.jsx)("thead",{children:(0,Ns.jsxs)("tr",{className:"bg-gray-50",children:[(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"Product Name"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"HSN Code"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"Qty"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"Unit"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"Taxable Value"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"CGST Rate"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"SGST Rate"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"IGST Rate"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"CGST Amt"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"SGST Amt"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"IGST Amt"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"Total Amt"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"Action"})]})}),(0,Ns.jsx)("tbody",{children:a.map((e,t)=>(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Ns.jsx)("input",{type:"text",name:"productName",value:e.productName,onChange:e=>h(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Product",disabled:o})}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Ns.jsx)("input",{type:"text",name:"hsnCode",value:e.hsnCode,onChange:e=>h(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"HSN",disabled:o})}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Ns.jsx)("input",{type:"text",name:"quantity",value:e.quantity,onChange:e=>h(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Qty",disabled:o})}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Ns.jsx)("input",{type:"text",name:"unit",value:e.unit,onChange:e=>h(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Unit",disabled:o})}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Ns.jsx)("input",{type:"text",name:"taxableValue",value:e.taxableValue,onChange:e=>h(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Value",disabled:o})}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Ns.jsx)("input",{type:"text",name:"cgstRate",value:e.cgstRate,onChange:e=>h(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Rate",disabled:o})}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Ns.jsx)("input",{type:"text",name:"sgstRate",value:e.sgstRate,onChange:e=>h(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Rate",disabled:o})}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Ns.jsx)("input",{type:"text",name:"igstRate",value:e.igstRate,onChange:e=>h(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Rate",disabled:o})}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Ns.jsx)("input",{type:"text",name:"cgstAmount",value:e.cgstAmount,onChange:e=>h(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Amt",disabled:o})}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Ns.jsx)("input",{type:"text",name:"sgstAmount",value:e.sgstAmount,onChange:e=>h(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Amt",disabled:o})}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Ns.jsx)("input",{type:"text",name:"igstAmount",value:e.igstAmount,onChange:e=>h(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Amt",disabled:o})}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Ns.jsx)("input",{type:"text",name:"totalAmount",value:e.totalAmount,onChange:e=>h(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Total",disabled:o})}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-center",children:a.length>1&&(0,Ns.jsx)("button",{type:"button",onClick:()=>(e=>{if(a.length>1){const t=[...a];t.splice(e,1),i(t)}})(t),className:"text-red-500 hover:text-red-700",disabled:o,children:(0,Ns.jsx)(ft,{className:"transform rotate-45 text-sm"})})})]},t))})]})})]}),(0,Ns.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Ns.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-4",children:"PART-B: Transport Details"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport Mode"}),(0,Ns.jsxs)("select",{name:"transportMode",value:n.transportMode,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o,children:[(0,Ns.jsx)("option",{value:"Road",children:"Road"}),(0,Ns.jsx)("option",{value:"Rail",children:"Rail"}),(0,Ns.jsx)("option",{value:"Air",children:"Air"}),(0,Ns.jsx)("option",{value:"Ship",children:"Ship"})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approx Distance (KM)"}),(0,Ns.jsx)("input",{type:"number",name:"approxDistance",value:n.approxDistance,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Distance",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transporter ID"}),(0,Ns.jsx)("input",{type:"text",name:"transporterId",value:n.transporterId,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Transporter ID",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transporter Name"}),(0,Ns.jsx)("input",{type:"text",name:"transporterName",value:n.transporterName,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Transporter Name",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transporter Document Number"}),(0,Ns.jsx)("input",{type:"text",name:"transporterDocNumber",value:n.transporterDocNumber,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Document Number",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transporter Document Date"}),(0,Ns.jsx)("input",{type:"date",name:"transporterDocDate",value:n.transporterDocDate,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vehicle Number"}),(0,Ns.jsx)("input",{type:"text",name:"vehicleNumber",value:n.vehicleNumber,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Vehicle Number",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vehicle Type"}),(0,Ns.jsxs)("select",{name:"vehicleType",value:n.vehicleType,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o,children:[(0,Ns.jsx)("option",{value:"Regular",children:"Regular"}),(0,Ns.jsx)("option",{value:"ODC",children:"ODC"})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Place of Dispatch"}),(0,Ns.jsx)("input",{type:"text",name:"dispatchPlace",value:n.dispatchPlace,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Dispatch Place",disabled:o})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,Ns.jsx)("input",{type:"text",name:"dispatchState",value:n.dispatchState,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter State",disabled:o})]})]})]}),(0,Ns.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Ns.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-4",children:"Total Summary"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,Ns.jsxs)("div",{className:"md:col-span-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Taxable Amount"}),(0,Ns.jsx)("input",{type:"text",name:"totalTaxableAmount",value:n.totalTaxableAmount||"",onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",disabled:o})]}),(0,Ns.jsxs)("div",{className:"md:col-span-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total CGST"}),(0,Ns.jsx)("input",{type:"text",name:"totalCgst",value:n.totalCgst||"",onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",disabled:o})]}),(0,Ns.jsxs)("div",{className:"md:col-span-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total SGST"}),(0,Ns.jsx)("input",{type:"text",name:"totalSgst",value:n.totalSgst||"",onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",disabled:o})]}),(0,Ns.jsxs)("div",{className:"md:col-span-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total IGST"}),(0,Ns.jsx)("input",{type:"text",name:"totalIgst",value:n.totalIgst||"",onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",disabled:o})]}),(0,Ns.jsxs)("div",{className:"md:col-span-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Invoice Value"}),(0,Ns.jsx)("input",{type:"text",name:"totalInvoiceValue",value:n.totalInvoiceValue||"",onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",disabled:o})]})]})]}),(0,Ns.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Ns.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:"Notes"}),(0,Ns.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-600",children:[(0,Ns.jsx)("li",{children:"Validity depends on distance"}),(0,Ns.jsx)("li",{children:"E-Way Bill needs to be carried during transportation"})]})]}),(0,Ns.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,Ns.jsx)("button",{type:"button",onClick:()=>e("/admin/eway-bills/history"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:o,children:"Cancel"}),(0,Ns.jsx)("button",{type:"submit",disabled:o,className:"flex items-center gap-2 px-6 py-2 rounded-lg transition-all ".concat(o?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white shadow-md hover:shadow-lg"),children:o?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,Ns.jsx)("span",{children:"Creating..."})]}):(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(ft,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"Create E-Way Bill"})]})})]})]})]})]})},SM=e=>{if(!e)return console.error("Invalid E-Way bill data:",e),void alert("Unable to generate PDF: Invalid E-Way bill data");const t=(e.goodsDetails||[]).map((e,t)=>'\n    <tr>\n      <td style="border: 1px solid #000; padding: 4px; font-size: 10px;">'.concat(e.productName||"",'</td>\n      <td style="border: 1px solid #000; padding: 4px; font-size: 10px;">').concat(e.hsnCode||"",'</td>\n      <td style="border: 1px solid #000; padding: 4px; font-size: 10px; text-align: center;">').concat(e.quantity||"",'</td>\n      <td style="border: 1px solid #000; padding: 4px; font-size: 10px;">').concat(e.unit||"",'</td>\n      <td style="border: 1px solid #000; padding: 4px; font-size: 10px; text-align: right;">').concat(e.taxableValue||"",'</td>\n      <td style="border: 1px solid #000; padding: 4px; font-size: 10px; text-align: center;">').concat(e.cgstRate?"".concat(e.cgstRate,"%"):"",'</td>\n      <td style="border: 1px solid #000; padding: 4px; font-size: 10px; text-align: center;">').concat(e.sgstRate?"".concat(e.sgstRate,"%"):"",'</td>\n      <td style="border: 1px solid #000; padding: 4px; font-size: 10px; text-align: center;">').concat(e.igstRate?"".concat(e.igstRate,"%"):"",'</td>\n      <td style="border: 1px solid #000; padding: 4px; font-size: 10px; text-align: right;">').concat(e.cgstAmount||"",'</td>\n      <td style="border: 1px solid #000; padding: 4px; font-size: 10px; text-align: right;">').concat(e.sgstAmount||"",'</td>\n      <td style="border: 1px solid #000; padding: 4px; font-size: 10px; text-align: right;">').concat(e.igstAmount||"",'</td>\n      <td style="border: 1px solid #000; padding: 4px; font-size: 10px; text-align: right;">').concat(e.totalAmount||"","</td>\n    </tr>\n  ")).join(""),n='\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset="utf-8">\n      <title>E-Way Bill - '.concat(e.ewbNumber||"N/A",'</title>\n      <style>\n        @page {\n          size: A4;\n          margin: 15mm;\n        }\n        \n        body {\n          font-family: Arial, sans-serif;\n          font-size: 11px;\n          line-height: 1.3;\n          color: #000;\n          margin: 0;\n          padding: 0;\n        }\n        \n        .container {\n          max-width: 100%;\n          margin: 0 auto;\n          padding: 0;\n        }\n        \n        .header {\n          text-align: center;\n          margin-bottom: 15px;\n          border-bottom: 2px solid #000;\n          padding-bottom: 10px;\n        }\n        \n        .header h1 {\n          color: #000;\n          margin: 0;\n          font-size: 20px;\n        }\n        \n        .header p {\n          color: #000;\n          font-size: 12px;\n          margin: 3px 0;\n        }\n        \n        .section {\n          margin-bottom: 15px;\n          border: 1px solid #000;\n          padding: 10px;\n          page-break-inside: avoid;\n        }\n        \n        .section-title {\n          font-size: 14px;\n          margin: 0 0 8px 0;\n          border-bottom: 1px solid #000;\n          padding-bottom: 4px;\n          font-weight: bold;\n        }\n        \n        .grid {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 10px;\n        }\n        \n        .grid-2 {\n          grid-template-columns: repeat(2, 1fr);\n        }\n        \n        .field {\n          margin-bottom: 6px;\n        }\n        \n        .field-label {\n          font-size: 11px;\n          margin: 0 0 2px 0;\n          font-weight: bold;\n        }\n        \n        .field-value {\n          font-size: 11px;\n          margin: 0;\n        }\n        \n        table {\n          width: 100%;\n          border-collapse: collapse;\n          font-size: 10px;\n          margin-top: 8px;\n          table-layout: fixed;\n        }\n        \n        th {\n          background-color: #f2f2f2;\n          padding: 6px 4px;\n          border: 1px solid #000;\n          text-align: left;\n          font-weight: bold;\n        }\n        \n        td {\n          padding: 4px;\n          border: 1px solid #000;\n          word-wrap: break-word;\n        }\n        \n        .text-center {\n          text-align: center;\n        }\n        \n        .text-right {\n          text-align: right;\n        }\n        \n        .summary-grid {\n          display: grid;\n          grid-template-columns: repeat(5, 1fr);\n          gap: 10px;\n        }\n        \n        .summary-item {\n          padding: 8px 6px;\n          border: 1px solid #000;\n        }\n        \n        .summary-label {\n          font-size: 10px;\n          margin: 0 0 3px 0;\n          font-weight: bold;\n        }\n        \n        .summary-value {\n          font-size: 12px;\n          margin: 0;\n          font-weight: bold;\n        }\n        \n        .notes {\n          font-size: 10px;\n          padding-left: 15px;\n          margin: 0;\n        }\n        \n        .notes li {\n          margin-bottom: 3px;\n        }\n        \n        @media print {\n          body {\n            -webkit-print-color-adjust: exact;\n            print-color-adjust: exact;\n          }\n          \n          table {\n            page-break-inside: auto;\n          }\n          \n          tr {\n            page-break-inside: avoid;\n            page-break-after: auto;\n          }\n          \n          thead {\n            display: table-header-group;\n          }\n          \n          tfoot {\n            display: table-footer-group;\n          }\n        }\n      </style>\n    </head>\n    <body>\n      <div class="container">\n        \x3c!-- Header --\x3e\n        <div class="header">\n          <h1>E-Way Bill</h1>\n          <p>Generated in accordance with the Central Goods and Services Tax Act, 2017</p>\n        </div>\n        \n        \x3c!-- E-Way Bill Header --\x3e\n        <div class="section">\n          <div class="grid">\n            <div class="field">\n              <p class="field-label">E-Way Bill Number:</p>\n              <p class="field-value">').concat(e.ewbNumber||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Generated By:</p>\n              <p class="field-value">').concat(e.generatedBy||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Generated Date:</p>\n              <p class="field-value">').concat(e.generatedDate||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Valid From:</p>\n              <p class="field-value">').concat(e.validFrom||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Valid To:</p>\n              <p class="field-value">').concat(e.validTo||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Supply Type:</p>\n              <p class="field-value">').concat(e.supplyType||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Sub Type:</p>\n              <p class="field-value">').concat(e.subType||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Document Type:</p>\n              <p class="field-value">').concat(e.documentType||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Document Number:</p>\n              <p class="field-value">').concat(e.documentNumber||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Document Date:</p>\n              <p class="field-value">').concat(e.documentDate||"N/A",'</p>\n            </div>\n          </div>\n        </div>\n        \n        \x3c!-- PART-A: Sender Information --\x3e\n        <div class="section">\n          <h3 class="section-title">PART-A: Sender (From) Information</h3>\n          <div class="grid grid-2">\n            <div class="field">\n              <p class="field-label">GSTIN:</p>\n              <p class="field-value">').concat(e.senderGstin||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Legal Name:</p>\n              <p class="field-value">').concat(e.senderLegalName||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Trade Name:</p>\n              <p class="field-value">').concat(e.senderTradeName||"N/A",'</p>\n            </div>\n            \n            <div class="field" style="grid-column: span 2;">\n              <p class="field-label">Address:</p>\n              <p class="field-value">').concat(e.senderAddress||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Place:</p>\n              <p class="field-value">').concat(e.senderPlace||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Pincode:</p>\n              <p class="field-value">').concat(e.senderPincode||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">State:</p>\n              <p class="field-value">').concat(e.senderState||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">State Code:</p>\n              <p class="field-value">').concat(e.senderStateCode||"N/A",'</p>\n            </div>\n          </div>\n        </div>\n        \n        \x3c!-- PART-A: Receiver Information --\x3e\n        <div class="section">\n          <h3 class="section-title">PART-A: Receiver (To) Information</h3>\n          <div class="grid grid-2">\n            <div class="field">\n              <p class="field-label">GSTIN:</p>\n              <p class="field-value">').concat(e.receiverGstin||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Legal Name:</p>\n              <p class="field-value">').concat(e.receiverLegalName||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Trade Name:</p>\n              <p class="field-value">').concat(e.receiverTradeName||"N/A",'</p>\n            </div>\n            \n            <div class="field" style="grid-column: span 2;">\n              <p class="field-label">Address:</p>\n              <p class="field-value">').concat(e.receiverAddress||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Place:</p>\n              <p class="field-value">').concat(e.receiverPlace||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Pincode:</p>\n              <p class="field-value">').concat(e.receiverPincode||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">State:</p>\n              <p class="field-value">').concat(e.receiverState||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">State Code:</p>\n              <p class="field-value">').concat(e.receiverStateCode||"N/A",'</p>\n            </div>\n          </div>\n        </div>\n        \n        \x3c!-- PART-A: Goods Details --\x3e\n        <div class="section">\n          <h3 class="section-title">PART-A: Goods Details</h3>\n          <div style="overflow-x: auto;">\n            <table>\n              <thead>\n                <tr>\n                  <th style="width: 15%;">Product Name</th>\n                  <th style="width: 8%;">HSN Code</th>\n                  <th style="width: 6%;" class="text-center">Qty</th>\n                  <th style="width: 6%;">Unit</th>\n                  <th style="width: 10%;" class="text-right">Taxable Value</th>\n                  <th style="width: 6%;" class="text-center">CGST Rate</th>\n                  <th style="width: 6%;" class="text-center">SGST Rate</th>\n                  <th style="width: 6%;" class="text-center">IGST Rate</th>\n                  <th style="width: 10%;" class="text-right">CGST Amt</th>\n                  <th style="width: 10%;" class="text-right">SGST Amt</th>\n                  <th style="width: 10%;" class="text-right">IGST Amt</th>\n                  <th style="width: 12%;" class="text-right">Total Amt</th>\n                </tr>\n              </thead>\n              <tbody>\n                ').concat(t||'<tr><td colspan="12" style="text-align: center; padding: 15px;">No goods details available</td></tr>','\n              </tbody>\n            </table>\n          </div>\n        </div>\n        \n        \x3c!-- PART-B: Transport Details --\x3e\n        <div class="section">\n          <h3 class="section-title">PART-B: Transport Details</h3>\n          <div class="grid">\n            <div class="field">\n              <p class="field-label">Transport Mode:</p>\n              <p class="field-value">').concat(e.transportMode||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Approx Distance (KM):</p>\n              <p class="field-value">').concat(e.approxDistance||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Transporter ID:</p>\n              <p class="field-value">').concat(e.transporterId||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Transporter Name:</p>\n              <p class="field-value">').concat(e.transporterName||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Transporter Document Number:</p>\n              <p class="field-value">').concat(e.transporterDocNumber||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Transporter Document Date:</p>\n              <p class="field-value">').concat(e.transporterDocDate||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Vehicle Number:</p>\n              <p class="field-value">').concat(e.vehicleNumber||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Vehicle Type:</p>\n              <p class="field-value">').concat(e.vehicleType||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Place of Dispatch:</p>\n              <p class="field-value">').concat(e.dispatchPlace||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">State:</p>\n              <p class="field-value">').concat(e.dispatchState||"N/A",'</p>\n            </div>\n          </div>\n        </div>\n        \n        \x3c!-- Total Summary Section --\x3e\n        <div class="section">\n          <h3 class="section-title">Total Summary</h3>\n          <div class="summary-grid">\n            <div class="summary-item">\n              <p class="summary-label">Total Taxable Amount:</p>\n              <p class="summary-value">\u20b9').concat(e.totalTaxableAmount||"0.00",'</p>\n            </div>\n            \n            <div class="summary-item">\n              <p class="summary-label">Total CGST:</p>\n              <p class="summary-value">\u20b9').concat(e.totalCgst||"0.00",'</p>\n            </div>\n            \n            <div class="summary-item">\n              <p class="summary-label">Total SGST:</p>\n              <p class="summary-value">\u20b9').concat(e.totalSgst||"0.00",'</p>\n            </div>\n            \n            <div class="summary-item">\n              <p class="summary-label">Total IGST:</p>\n              <p class="summary-value">\u20b9').concat(e.totalIgst||"0.00",'</p>\n            </div>\n            \n            <div class="summary-item">\n              <p class="summary-label">Total Invoice Value:</p>\n              <p class="summary-value">\u20b9').concat(e.totalInvoiceValue||"0.00",'</p>\n            </div>\n          </div>\n        </div>\n        \n        \x3c!-- Notes Section --\x3e\n        <div class="section">\n          <h3 class="section-title">Notes</h3>\n          <ul class="notes">\n            ').concat((e.notes||["Validity depends on distance","E-Way Bill needs to be carried during transportation"]).map(e=>"<li>".concat(e,"</li>")).join(""),"\n          </ul>\n        </div>\n      </div>\n    </body>\n    </html>\n  "),r=e.ewbNumber||"EWayBill",s=e.generatedDate||(new Date).toISOString().split("T")[0],a={margin:8,filename:"eway_bill_".concat(r,"_").concat(s.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};fw()().from(n).set(a).save()},_M=()=>{const e=ee(),{ewayBills:t}=CM(),[n,s]=(0,r.useState)(t),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=t;if(a){const t=a.toLowerCase();e=e.filter(e=>e.ewbNumber.toLowerCase().includes(t)||e.documentNumber.toLowerCase().includes(t)||e.generatedBy.toLowerCase().includes(t))}o&&"All"!==o&&(e=e.filter(e=>e.status===o)),s(e)},[a,o,t]);const c=e=>{switch(e){case"Active":return"bg-green-100 text-green-800";case"Expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});return(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"E-Way Bills History"}),(0,Ns.jsx)("p",{className:"text-gray-600",children:"View and manage all E-Way bills"})]}),(0,Ns.jsxs)("button",{onClick:()=>e("/admin/eway-bills/create"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all",children:[(0,Ns.jsx)(ft,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"Create E-Way Bill"})]})]}),(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Ns.jsx)("div",{className:"md:col-span-2",children:(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Ns.jsx)(xt,{className:"text-gray-400"})}),(0,Ns.jsx)("input",{type:"text",placeholder:"Search by E-Way Bill Number, Document Number...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:a,onChange:e=>i(e.target.value)})]})}),(0,Ns.jsx)("div",{children:(0,Ns.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:o,onChange:e=>l(e.target.value),children:[(0,Ns.jsx)("option",{value:"",children:"Select Status"}),(0,Ns.jsx)("option",{value:"Active",children:"Active"}),(0,Ns.jsx)("option",{value:"Expired",children:"Expired"})]})})]})}),(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"E-Way Bill Number"}),(0,Ns.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Document Number"}),(0,Ns.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Generated By"}),(0,Ns.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Generated Date"}),(0,Ns.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valid Period"}),(0,Ns.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),(0,Ns.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Ns.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length>0?n.map(t=>(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(Bt,{className:"text-gray-400 mr-2"}),(0,Ns.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.ewbNumber})]})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ns.jsx)("div",{className:"text-sm text-gray-900",children:t.documentNumber})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ns.jsx)("div",{className:"text-sm text-gray-900",children:t.generatedBy})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ns.jsx)("div",{className:"text-sm text-gray-900",children:d(t.generatedDate)})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ns.jsxs)("div",{className:"text-sm text-gray-900",children:[d(t.validFrom)," to ",d(t.validTo)]})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ns.jsxs)("div",{className:"text-sm text-gray-900",children:["\u20b9",(t.totalAmount||0).toFixed(2)]})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Ns.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(c(t.status)),children:t.status})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Ns.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ns.jsxs)("button",{onClick:()=>e("/admin/eway-bills/view/".concat(t.id)),className:"text-blue-600 hover:text-blue-900 flex items-center gap-1",children:[(0,Ns.jsx)(tt,{className:"text-sm"}),(0,Ns.jsx)("span",{children:"View"})]}),(0,Ns.jsxs)("button",{onClick:()=>(e=>{SM(e)})(t),className:"text-green-600 hover:text-green-900 flex items-center gap-1",children:[(0,Ns.jsx)(Ye,{className:"text-sm"}),(0,Ns.jsx)("span",{children:"PDF"})]})]})})]},t.id)):(0,Ns.jsx)("tr",{children:(0,Ns.jsx)("td",{colSpan:"8",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No E-Way bills found"})})})]})})}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("div",{className:"p-3 rounded-lg bg-blue-100",children:(0,Ns.jsx)(Bt,{className:"text-blue-600 text-xl"})}),(0,Ns.jsxs)("div",{className:"ml-4",children:[(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Total E-Way Bills"}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("div",{className:"p-3 rounded-lg bg-green-100",children:(0,Ns.jsx)(Bt,{className:"text-green-600 text-xl"})}),(0,Ns.jsxs)("div",{className:"ml-4",children:[(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Active E-Way Bills"}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"Active"===e.status).length})]})]})}),(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("div",{className:"p-3 rounded-lg bg-red-100",children:(0,Ns.jsx)(Bt,{className:"text-red-600 text-xl"})}),(0,Ns.jsxs)("div",{className:"ml-4",children:[(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Expired E-Way Bills"}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"Expired"===e.status).length})]})]})})]})]})},EM=()=>{const e=ee(),{id:t}=function(){let{matches:e}=r.useContext(q),t=e[e.length-1];return t?t.params:{}}(),{ewayBills:n}=CM(),s=n.find(e=>e.id==t)||{};return s.id?(0,Ns.jsxs)("div",{className:"space-y-6 print:p-0 print:max-w-none print:w-full",children:[(0,Ns.jsx)("style",{children:"\n        @media print {\n          @page {\n            size: A4;\n            margin: 20mm;\n          }\n          \n          body {\n            -webkit-print-color-adjust: exact;\n            print-color-adjust: exact;\n            font-family: Arial, sans-serif;\n            font-size: 12px;\n            line-height: 1.4;\n            color: #000;\n            margin: 0;\n            padding: 0;\n          }\n          \n          .print-container {\n            max-width: 100%;\n            margin: 0 auto;\n            padding: 0;\n          }\n          \n          .print-header {\n            text-align: center;\n            margin-bottom: 20px;\n            border-bottom: 2px solid #000;\n            padding-bottom: 15px;\n          }\n          \n          .print-header h1 {\n            color: #000;\n            margin: 0;\n            font-size: 24px;\n          }\n          \n          .print-header p {\n            color: #000;\n            font-size: 14px;\n            margin: 5px 0;\n          }\n          \n          .print-section {\n            margin-bottom: 20px;\n            border: 1px solid #000;\n            padding: 15px;\n            page-break-inside: avoid;\n          }\n          \n          .print-section-title {\n            font-size: 16px;\n            margin: 0 0 10px 0;\n            border-bottom: 1px solid #000;\n            padding-bottom: 5px;\n            font-weight: bold;\n          }\n          \n          .print-grid {\n            display: grid;\n            grid-template-columns: repeat(3, 1fr);\n            gap: 15px;\n          }\n          \n          .print-grid-2 {\n            grid-template-columns: repeat(2, 1fr);\n          }\n          \n          .print-grid-5 {\n            grid-template-columns: repeat(5, 1fr);\n          }\n          \n          .print-field {\n            margin-bottom: 8px;\n          }\n          \n          .print-field-label {\n            font-size: 12px;\n            margin: 0 0 3px 0;\n            font-weight: bold;\n          }\n          \n          .print-field-value {\n            font-size: 13px;\n            margin: 0;\n          }\n          \n          .print-table {\n            width: 100%;\n            border-collapse: collapse;\n            font-size: 12px;\n            margin-top: 10px;\n          }\n          \n          .print-th {\n            background-color: #f2f2f2;\n            padding: 8px;\n            border: 1px solid #000;\n            text-align: left;\n            font-weight: bold;\n          }\n          \n          .print-td {\n            padding: 8px;\n            border: 1px solid #000;\n          }\n          \n          .print-text-center {\n            text-align: center;\n          }\n          \n          .print-text-right {\n            text-align: right;\n          }\n          \n          .print-summary-grid {\n            display: grid;\n            grid-template-columns: repeat(5, 1fr);\n            gap: 15px;\n          }\n          \n          .print-summary-item {\n            padding: 10px;\n            border: 1px solid #000;\n          }\n          \n          .print-summary-label {\n            font-size: 12px;\n            margin: 0 0 5px 0;\n            font-weight: bold;\n          }\n          \n          .print-summary-value {\n            font-size: 14px;\n            margin: 0;\n            font-weight: bold;\n          }\n          \n          .print-notes {\n            font-size: 12px;\n            padding-left: 20px;\n            margin: 0;\n          }\n          \n          .print-notes li {\n            margin-bottom: 5px;\n          }\n          \n          /* Existing print styles */\n          .print\\:text-xs {\n            font-size: 0.75rem !important;\n          }\n          .print\\:text-sm {\n            font-size: 0.875rem !important;\n          }\n          .print\\:px-1 {\n            padding-left: 0.25rem !important;\n            padding-right: 0.25rem !important;\n          }\n          .print\\:py-1 {\n            padding-top: 0.25rem !important;\n            padding-bottom: 0.25rem !important;\n          }\n          .print\\:gap-3 {\n            gap: 0.75rem !important;\n          }\n          .print\\:mb-2 {\n            margin-bottom: 0.5rem !important;\n          }\n          .print\\:pl-4 {\n            padding-left: 1rem !important;\n          }\n          .print\\:font-normal {\n            font-weight: normal !important;\n          }\n          .print\\:text-lg {\n            font-size: 1.125rem !important;\n          }\n          table {\n            page-break-inside: auto;\n          }\n          tr {\n            page-break-inside: avoid;\n            page-break-after: auto;\n          }\n          thead {\n            display: table-header-group;\n          }\n          tfoot {\n            display: table-footer-group;\n          }\n          .print\\:break-after {\n            page-break-after: always;\n          }\n          .print\\:break-inside-avoid {\n            page-break-inside: avoid;\n          }\n        }\n      "}),(0,Ns.jsxs)("div",{className:"flex items-center gap-4 print:hidden",children:[(0,Ns.jsx)("button",{onClick:()=>e("/admin/eway-bills/history"),className:"p-3 rounded-xl hover:bg-gray-100 transition-colors shadow-sm hover:shadow-md",children:(0,Ns.jsx)(De,{className:"text-gray-600 text-xl"})}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"E-Way Bill Details"}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:["View E-Way Bill #",s.ewbNumber||"N/A"]})]}),(0,Ns.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,Ns.jsxs)("button",{onClick:()=>{setTimeout(()=>{window.print()},100)},className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,Ns.jsx)(pt,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"Print"})]}),(0,Ns.jsxs)("button",{onClick:()=>{SM(s)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all",children:[(0,Ns.jsx)(Ye,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"Download PDF"})]})]})]}),(0,Ns.jsxs)("div",{className:"hidden print:block print-header",children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold",children:"E-Way Bill"}),(0,Ns.jsx)("p",{className:"text-sm",children:"Generated in accordance with the Central Goods and Services Tax Act, 2017"}),(0,Ns.jsx)("div",{className:"border-b-2 border-black my-4"})]}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 print:p-0 print:border-none print:shadow-none print:rounded-none print:border-0 print-container",children:[(0,Ns.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 mb-6 print:border-black print:rounded-none print:border print:p-4 print:print-section",children:[(0,Ns.jsxs)("div",{className:"text-center mb-4 print:mb-3 print-header",children:[(0,Ns.jsx)("h2",{className:"text-xl font-bold print:text-xl",children:"E-Way Bill"}),(0,Ns.jsx)("p",{className:"text-sm print:text-xs",children:"Generated in accordance with the Central Goods and Services Tax Act, 2017"})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 print:grid-cols-3 print:gap-4 print-grid",children:[(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print:text-xs print:font-normal print-field-label",children:"E-Way Bill Number:"}),(0,Ns.jsx)("p",{className:"font-bold print:text-sm print-field-value",children:s.ewbNumber||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Generated By:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.generatedBy||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Generated Date:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.generatedDate||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Valid From:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.validFrom||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Valid To:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.validTo||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Supply Type:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.supplyType||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Sub Type:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.subType||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Document Type:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.documentType||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Document Number:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.documentNumber||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Document Date:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.documentDate||"N/A"})]})]})]}),(0,Ns.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 mb-6 print:border-black print:rounded-none print:border print:p-4 print:print-section",children:[(0,Ns.jsx)("h3",{className:"text-md font-semibold mb-3 print:text-lg print:mb-2 print-section-title",children:"PART-A: Sender (From) Information"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 print:grid-cols-2 print:gap-4 print-grid print-grid-2",children:[(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print:text-xs print:font-normal print-field-label",children:"GSTIN:"}),(0,Ns.jsx)("p",{className:"print:text-sm print-field-value",children:s.senderGstin||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Legal Name:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.senderLegalName||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Trade Name:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.senderTradeName||"N/A"})]}),(0,Ns.jsxs)("div",{className:"md:col-span-2 print:col-span-2",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Address:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.senderAddress||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Place:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.senderPlace||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Pincode:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.senderPincode||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"State:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.senderState||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"State Code:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.senderStateCode||"N/A"})]})]})]}),(0,Ns.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 mb-6 print:border-black print:rounded-none print:border print:p-4 print:print-section",children:[(0,Ns.jsx)("h3",{className:"text-md font-semibold mb-3 print:text-lg print:mb-2 print-section-title",children:"PART-A: Receiver (To) Information"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 print:grid-cols-2 print:gap-4 print-grid print-grid-2",children:[(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print:text-xs print:font-normal print-field-label",children:"GSTIN:"}),(0,Ns.jsx)("p",{className:"print:text-sm print-field-value",children:s.receiverGstin||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Legal Name:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.receiverLegalName||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Trade Name:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.receiverTradeName||"N/A"})]}),(0,Ns.jsxs)("div",{className:"md:col-span-2 print:col-span-2",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Address:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.receiverAddress||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Place:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.receiverPlace||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Pincode:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.receiverPincode||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"State:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.receiverState||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"State Code:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.receiverStateCode||"N/A"})]})]})]}),(0,Ns.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 mb-6 print:border-black print:rounded-none print:border print:p-4 print:print-section",children:[(0,Ns.jsx)("h3",{className:"text-md font-semibold mb-3 print:text-lg print:mb-2 print-section-title",children:"PART-A: Goods Details"}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full border border-gray-300 print:border-black print:text-xs print-table",children:[(0,Ns.jsx)("thead",{children:(0,Ns.jsxs)("tr",{className:"bg-gray-50 print:bg-white",children:[(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th",children:"Product Name"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th",children:"HSN Code"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-center",children:"Qty"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th",children:"Unit"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-right",children:"Taxable Value"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-center",children:"CGST Rate"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-center",children:"SGST Rate"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-center",children:"IGST Rate"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-right",children:"CGST Amt"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-right",children:"SGST Amt"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-right",children:"IGST Amt"}),(0,Ns.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-right",children:"Total Amt"})]})}),(0,Ns.jsx)("tbody",{children:(s.goodsDetails||[]).map((e,t)=>(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td",children:e.productName||""}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td",children:e.hsnCode||""}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-center",children:e.quantity||""}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td",children:e.unit||""}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-right",children:e.taxableValue||""}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-center",children:e.cgstRate?"".concat(e.cgstRate,"%"):""}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-center",children:e.sgstRate?"".concat(e.sgstRate,"%"):""}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-center",children:e.igstRate?"".concat(e.igstRate,"%"):""}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-right",children:e.cgstAmount||""}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-right",children:e.sgstAmount||""}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-right",children:e.igstAmount||""}),(0,Ns.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-right",children:e.totalAmount||""})]},t))})]})})]}),(0,Ns.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 mb-6 print:border-black print:rounded-none print:border print:p-4 print:print-section",children:[(0,Ns.jsx)("h3",{className:"text-md font-semibold mb-3 print:text-lg print:mb-2 print-section-title",children:"PART-B: Transport Details"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 print:grid-cols-3 print:gap-4 print-grid",children:[(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print:text-xs print:font-normal print-field-label",children:"Transport Mode:"}),(0,Ns.jsx)("p",{className:"print:text-sm print-field-value",children:s.transportMode||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Approx Distance (KM):"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.approxDistance||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Transporter ID:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.transporterId||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Transporter Name:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.transporterName||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Transporter Document Number:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.transporterDocNumber||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Transporter Document Date:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.transporterDocDate||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Vehicle Number:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.vehicleNumber||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Vehicle Type:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.vehicleType||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Place of Dispatch:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.dispatchPlace||"N/A"})]}),(0,Ns.jsxs)("div",{className:"print-field",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-field-label",children:"State:"}),(0,Ns.jsx)("p",{className:"print-field-value",children:s.dispatchState||"N/A"})]})]})]}),(0,Ns.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 mb-6 print:border-black print:rounded-none print:border print:p-4 print:print-section",children:[(0,Ns.jsx)("h3",{className:"text-md font-semibold mb-3 print:text-lg print:mb-2 print-section-title",children:"Total Summary"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 print:grid-cols-5 print:gap-4 print-grid print-grid-5",children:[(0,Ns.jsxs)("div",{className:"print-summary-item",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print:text-xs print:font-normal print-summary-label",children:"Total Taxable Amount:"}),(0,Ns.jsxs)("p",{className:"font-bold print:text-sm print-summary-value",children:["\u20b9",s.totalTaxableAmount||"0.00"]})]}),(0,Ns.jsxs)("div",{className:"print-summary-item",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-summary-label",children:"Total CGST:"}),(0,Ns.jsxs)("p",{className:"font-bold print-summary-value",children:["\u20b9",s.totalCgst||"0.00"]})]}),(0,Ns.jsxs)("div",{className:"print-summary-item",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-summary-label",children:"Total SGST:"}),(0,Ns.jsxs)("p",{className:"font-bold print-summary-value",children:["\u20b9",s.totalSgst||"0.00"]})]}),(0,Ns.jsxs)("div",{className:"print-summary-item",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-summary-label",children:"Total IGST:"}),(0,Ns.jsxs)("p",{className:"font-bold print-summary-value",children:["\u20b9",s.totalIgst||"0.00"]})]}),(0,Ns.jsxs)("div",{className:"print-summary-item",children:[(0,Ns.jsx)("p",{className:"text-sm font-medium print-summary-label",children:"Total Invoice Value:"}),(0,Ns.jsxs)("p",{className:"font-bold print-summary-value",children:["\u20b9",s.totalInvoiceValue||"0.00"]})]})]})]}),(0,Ns.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 print:border-black print:rounded-none print:border print:p-4 print:print-section",children:[(0,Ns.jsx)("h3",{className:"text-md font-semibold mb-2 print:text-lg print:mb-2 print-section-title",children:"Notes"}),(0,Ns.jsx)("ul",{className:"list-disc pl-5 space-y-1 text-sm print:text-xs print:pl-4 print-notes",children:(s.notes||["Validity depends on distance","E-Way Bill needs to be carried during transportation"]).map((e,t)=>(0,Ns.jsx)("li",{className:"print:text-xs",children:e},t))})]})]})]}):(0,Ns.jsxs)("div",{className:"space-y-6 print:p-0",children:[(0,Ns.jsxs)("div",{className:"flex items-center gap-4 print:hidden",children:[(0,Ns.jsx)("button",{onClick:()=>e("/admin/eway-bills/history"),className:"p-3 rounded-xl hover:bg-gray-100 transition-colors shadow-sm hover:shadow-md",children:(0,Ns.jsx)(De,{className:"text-gray-600 text-xl"})}),(0,Ns.jsx)("div",{children:(0,Ns.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"E-Way Bill Not Found"})})]}),(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,Ns.jsx)("p",{className:"text-gray-600",children:"The E-Way bill you are looking for could not be found."})})]})},FM=()=>{const[e,t]=(0,r.useState)(!1),{isFullScreenBill:n}=iT(),s=()=>{t(!e)};return(0,r.useEffect)(()=>{const e=()=>{t(!1)};return window.addEventListener("close-sidebar",e),()=>{window.removeEventListener("close-sidebar",e)}},[]),(0,Ns.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[e&&!n&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 z-30 lg:hidden",onClick:s}),!n&&(0,Ns.jsx)("div",{className:"fixed inset-y-0 left-0 transform ".concat(e?"translate-x-0":"-translate-x-full"," \n                                 lg:relative lg:translate-x-0 transition-transform duration-300 ease-in-out z-40"),children:(0,Ns.jsx)(ks,{})}),(0,Ns.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden ".concat(n?"w-full":""),children:[!n&&(0,Ns.jsxs)("header",{className:"lg:hidden bg-white shadow-sm p-4 flex items-center justify-between",children:[(0,Ns.jsx)("button",{onClick:s,className:"text-gray-500 focus:outline-none",children:(0,Ns.jsx)(dt,{size:24})}),(0,Ns.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"Admin Panel"})]}),(0,Ns.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-4 md:p-6 ".concat(n?"p-0 m-0":""),children:(0,Ns.jsxs)(xe,{children:[(0,Ns.jsx)(me,{path:"dashboard",element:(0,Ns.jsx)(Da,{})}),(0,Ns.jsx)(me,{path:"workers/add",element:(0,Ns.jsx)(uw,{})}),(0,Ns.jsx)(me,{path:"workers/view",element:(0,Ns.jsx)(gw,{})}),(0,Ns.jsx)(me,{path:"workers/attendance",element:(0,Ns.jsx)(fF,{})}),(0,Ns.jsx)(me,{path:"workers/salary",element:(0,Ns.jsx)(pF,{})}),(0,Ns.jsx)(me,{path:"workers/holidays",element:(0,Ns.jsx)(mF,{})}),(0,Ns.jsx)(me,{path:"workers/face-enrollment",element:(0,Ns.jsx)(gF,{})}),(0,Ns.jsx)(me,{path:"departments/create",element:(0,Ns.jsx)(xF,{})}),(0,Ns.jsx)(me,{path:"departments/view",element:(0,Ns.jsx)(vF,{})}),(0,Ns.jsx)(me,{path:"products/add-category",element:(0,Ns.jsx)(bF,{})}),(0,Ns.jsx)(me,{path:"products/add",element:(0,Ns.jsx)(BF,{})}),(0,Ns.jsx)(me,{path:"products/view",element:(0,Ns.jsx)(IF,{})}),(0,Ns.jsx)(me,{path:"products/history",element:(0,Ns.jsx)(DF,{})}),(0,Ns.jsx)(me,{path:"warehouse/track-stock",element:(0,Ns.jsx)(LF,{})}),(0,Ns.jsx)(me,{path:"warehouse/stock-alerts",element:(0,Ns.jsx)(PF,{})}),(0,Ns.jsx)(me,{path:"warehouse/store-room",element:(0,Ns.jsx)(fT,{})}),(0,Ns.jsx)(me,{path:"warehouse/manufacturing",element:(0,Ns.jsx)(pT,{})}),(0,Ns.jsx)(me,{path:"warehouse/daily-schedule",element:(0,Ns.jsx)(mT,{})}),(0,Ns.jsx)(me,{path:"warehouse/outgoing-materials",element:(0,Ns.jsx)(gT,{})}),(0,Ns.jsx)(me,{path:"warehouse/production-schedules",element:(0,Ns.jsx)(pM,{})})," ",(0,Ns.jsx)(me,{path:"warehouse/material-stock-alerts",element:(0,Ns.jsx)(xT,{})}),(0,Ns.jsx)(me,{path:"warehouse/packing-materials/alerts",element:(0,Ns.jsx)(vT,{})}),(0,Ns.jsx)(me,{path:"warehouse/packing-materials/outgoing",element:(0,Ns.jsx)(bT,{})}),(0,Ns.jsx)(me,{path:"warehouse/return-products",element:(0,Ns.jsx)(NT,{})}),(0,Ns.jsx)(me,{path:"warehouse/return-products/history",element:(0,Ns.jsx)(wT,{})}),(0,Ns.jsx)(me,{path:"warehouse/packing-materials/view",element:(0,Ns.jsx)(BT,{})}),(0,Ns.jsx)(me,{path:"warehouse/raw-materials",element:(0,Ns.jsx)(kT,{})}),(0,Ns.jsx)(me,{path:"shops/add",element:(0,Ns.jsx)(KF,{})}),(0,Ns.jsx)(me,{path:"shops/view",element:(0,Ns.jsx)(XF,{})}),(0,Ns.jsx)(me,{path:"settings",element:(0,Ns.jsx)(gM,{})}),(0,Ns.jsx)(me,{path:"tasks/daily",element:(0,Ns.jsx)(hT,{})}),(0,Ns.jsx)(me,{path:"tasks/completed",element:(0,Ns.jsx)(AT,{})}),(0,Ns.jsx)(me,{path:"bills/create",element:(0,Ns.jsx)(lT,{})}),(0,Ns.jsx)(me,{path:"bills/view",element:(0,Ns.jsx)(dT,{})}),(0,Ns.jsx)(me,{path:"invoices/history",element:(0,Ns.jsx)(TT,{})}),(0,Ns.jsx)(me,{path:"profit-loss",element:(0,Ns.jsx)(fM,{})}),(0,Ns.jsx)(me,{path:"expenses",element:(0,Ns.jsx)(bM,{})}),(0,Ns.jsx)(me,{path:"expenses/add",element:(0,Ns.jsx)(yM,{})}),(0,Ns.jsx)(me,{path:"expenses/history",element:(0,Ns.jsx)(NM,{})}),(0,Ns.jsx)(me,{path:"eway-bills/create",element:(0,Ns.jsx)(kM,{})}),(0,Ns.jsx)(me,{path:"eway-bills/history",element:(0,Ns.jsx)(_M,{})}),(0,Ns.jsx)(me,{path:"eway-bills/view/:id",element:(0,Ns.jsx)(EM,{})}),(0,Ns.jsx)(me,{path:"*",element:(0,Ns.jsx)(pe,{to:"dashboard"})})]})})]})]})},TM=zF("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);const IM=function(){const[e,t]=(0,r.useState)(0),[n,s]=(0,r.useState)(""),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)([]),{logout:A}=(0,r.useContext)(js);(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/shop/invoices/pending");l(!!e.data)}catch(e){console.error("Failed to check for pending invoices:",e)}})(),(async()=>{try{const e=(await ws.get("/shop/products")).data.filter(e=>e.stockLevel<=(e.stockAlertThreshold||0));t(e.length)}catch(e){console.error("Failed to fetch low stock count:",e)}})(),(async()=>{try{const e=await ws.get("/shop/details");s(e.data.name)}catch(e){console.error("Failed to fetch shop name:",e)}})()},[]);const f="text-gray-700",p="text-gray-500",m="hover:bg-gray-50",g="bg-red-500 text-white shadow-sm",x="text-gray-400",v="text-white",b="bg-yellow-400 text-gray-800";return(0,Ns.jsxs)("div",{className:"h-screen w-64 ".concat("bg-white"," ").concat(f," flex flex-col border-r ").concat("border-gray-200"," overflow-hidden shadow-sm relative"),children:[(0,Ns.jsx)("div",{className:"absolute inset-0 z-0 pointer-events-none"}),(0,Ns.jsxs)("div",{className:"p-6 border-b border-gray-100 relative z-10",children:[(0,Ns.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3",children:[(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"h-16 w-auto animate-cottonCandy",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}),(0,Ns.jsxs)("div",{className:"absolute h-20 w-20 rounded-full animate-[orbit_4s_linear_infinite]",children:[(0,Ns.jsx)("span",{className:"absolute top-0 left-1/2 -ml-1 w-2 h-2 bg-primary rounded-full"}),(0,Ns.jsx)("span",{className:"absolute left-0 top-1/2 -mt-1 w-2 h-2 bg-accent-cyan rounded-full"}),(0,Ns.jsx)("span",{className:"absolute bottom-0 left-1/2 -ml-1 w-2 h-2 bg-accent-green rounded-full"}),(0,Ns.jsx)("span",{className:"absolute right-0 top-1/2 -mt-1 w-2 h-2 bg-accent-orange rounded-full"})]})]}),(0,Ns.jsx)("div",{className:"hidden bg-red-500 text-white px-4 py-2 rounded-lg transform rotate-12 shadow-lg",children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("span",{className:"text-green-400 font-bold text-lg mr-1",children:"H"}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("div",{className:"text-sm font-bold leading-tight",children:"THE"}),(0,Ns.jsx)("div",{className:"text-lg font-bold leading-tight",children:"SWEET"}),(0,Ns.jsx)("div",{className:"text-lg font-bold leading-tight",children:"HUB"})]})]})})]}),(0,Ns.jsx)("div",{className:"flex items-center space-x-3",children:(0,Ns.jsxs)("div",{className:"text-left",children:[(0,Ns.jsx)("div",{className:"".concat("text-gray-800"," font-bold text-lg leading-tight"),children:"Sweet Hub"}),(0,Ns.jsx)("div",{className:"".concat(p," text-sm"),children:"Shop Panel"})]})}),n&&(0,Ns.jsx)("div",{className:"".concat(p," font-bold text-red-600 text-lg font-large"),children:n})]}),(0,Ns.jsx)("button",{className:"lg:hidden absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none",onClick:()=>window.dispatchEvent(new CustomEvent("close-sidebar")),children:(0,Ns.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Ns.jsxs)("nav",{className:"flex-1 px-4 py-6 space-y-2 relative z-10 overflow-y-auto",children:[(0,Ns.jsx)(Wt,{to:"/shop/dashboard",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg ".concat(t?g:"".concat(f," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:e=>{let{isActive:t}=e;return(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(ot,{className:"mr-3 text-lg ".concat(t?v:x)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Dashboard"})]})}}),(0,Ns.jsxs)("details",{className:"group",children:[(0,Ns.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer ".concat(m," ").concat(f," list-none"),children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(Et,{className:"mr-3 text-lg ".concat(x)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Workers"})]}),(0,Ns.jsx)(We,{className:"w-4 h-4 text-gray-400"})]}),(0,Ns.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Ns.jsx)(Wt,{to:"/shop/workers/add",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Add Worker"})}),(0,Ns.jsx)(Wt,{to:"/shop/workers/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"View Workers"})}),(0,Ns.jsx)(Wt,{to:"/shop/workers/attendance",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Attendance Tracking"})}),(0,Ns.jsx)(Wt,{to:"/shop/workers/salary-report",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Salary Report"})}),(0,Ns.jsx)(Wt,{to:"/shop/workers/holidays",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Holidays"})}),(0,Ns.jsx)(Wt,{to:"/shop/face-enrollment",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Face Enrollment"})})]})]}),(0,Ns.jsxs)("details",{className:"group",children:[(0,Ns.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer ".concat(m," ").concat(f," list-none"),children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(Re,{className:"mr-3 text-lg ".concat(x)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Departments"})]}),(0,Ns.jsx)(We,{className:"w-4 h-4 text-gray-400"})]}),(0,Ns.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Ns.jsx)(Wt,{to:"/shop/departments/create",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Create Department"})}),(0,Ns.jsx)(Wt,{to:"/shop/departments/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"View Departments"})})]})]}),(0,Ns.jsxs)("details",{className:"group",open:a,onToggle:()=>{i(!a)},children:[(0,Ns.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer ".concat(m," ").concat(f," list-none"),children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(Pe,{className:"mr-3 text-lg ".concat(x)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Products"})]}),(0,Ns.jsxs)("div",{className:"flex items-center space-x-2",children:[!a&&e>0&&(0,Ns.jsx)("span",{className:"".concat(b," text-xs font-bold px-1.5 py-0.5 rounded-full"),children:e}),(0,Ns.jsx)(We,{className:"w-4 h-4 text-gray-400"})]})]}),(0,Ns.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Ns.jsx)(Wt,{to:"/shop/products/category",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Add Category"})}),(0,Ns.jsx)(Wt,{to:"/shop/products/add",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Add Product"})}),(0,Ns.jsx)(Wt,{to:"/shop/products/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"View Products"})}),(0,Ns.jsx)(Wt,{to:"/shop/warehouse/stock",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Track Stock"})}),(0,Ns.jsxs)(Wt,{to:"/shop/warehouse/alerts",className:e=>{let{isActive:t}=e;return"flex items-center justify-between px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Stock Alerts"}),a&&e>0&&(0,Ns.jsx)("span",{className:"".concat(b," text-xs font-bold px-1.5 py-0.5 rounded-full"),children:e})]})]})]}),(0,Ns.jsxs)(Wt,{to:"/shop/invoice/view",className:e=>{let{isActive:t}=e;return"flex items-center justify-between px-3 py-2.5 rounded-lg ".concat(t?g:"".concat(f," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(tt,{className:"mr-3 text-lg ".concat(x)}),(0,Ns.jsx)("span",{className:"font-medium",children:"View Invoice"})]}),o&&(0,Ns.jsx)("span",{className:"".concat("bg-green-500 text-white"," text-xs font-bold px-2 py-1 rounded-full animate-pulse"),children:"New"})]}),(0,Ns.jsxs)("details",{className:"group",children:[(0,Ns.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer ".concat(m," ").concat(f," list-none"),children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(mt,{className:"mr-3 text-lg ".concat(x)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Billing & Invoices"})]}),(0,Ns.jsx)(We,{className:"w-4 h-4 text-gray-400"})]}),(0,Ns.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Ns.jsx)(Wt,{to:"/shop/billing/create",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"Create Bill"})}),(0,Ns.jsx)(Wt,{to:"/shop/billing/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg ".concat(t?g:"".concat(p," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:(0,Ns.jsx)("span",{className:"font-medium",children:"View Bills"})})]})]}),(0,Ns.jsx)(Wt,{to:"/shop/expenses",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg ".concat(t?g:"".concat(f," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:e=>{let{isActive:t}=e;return(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(mt,{className:"mr-3 text-lg ".concat(t?v:x)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Expenses"})]})}}),(0,Ns.jsx)(Wt,{to:"/shop/return-products",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg ".concat(t?g:"".concat(f," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:e=>{let{isActive:t}=e;return(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(gt,{className:"mr-3 text-lg ".concat(t?v:x)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Return Products"})]})}}),(0,Ns.jsx)(Wt,{to:"/shop/settings",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg ".concat(t?g:"".concat(f," ").concat(m))},onClick:()=>{window.innerWidth<1024&&window.dispatchEvent(new CustomEvent("close-sidebar"))},children:e=>{let{isActive:t}=e;return(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(bt,{className:"mr-3 text-lg ".concat(t?v:x)}),(0,Ns.jsx)("span",{className:"font-medium",children:"Settings"})]})}})]}),(0,Ns.jsx)("div",{className:"px-4 py-6 border-t border-gray-200 relative z-10",children:(0,Ns.jsxs)("button",{onClick:()=>{d(!0)},className:"flex items-center w-full px-3 py-2.5 rounded-lg ".concat(f," ").concat(m," font-medium"),children:[(0,Ns.jsx)(ct,{className:"mr-3 text-lg ".concat(x)}),(0,Ns.jsx)("span",{children:"Logout"})]})}),(0,Ns.jsx)(Bs,{isOpen:c,onClose:()=>{d(!1)},onConfirm:()=>{d(!1),A()}})]})};const DM=function(){var e,t,n;const[s,a]=(0,r.useState)({}),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),d=ee();if((0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("".concat("/shop","/dashboard"),{headers:{"Content-Type":"application/json"},withCredentials:!0});a(e.data)}catch(e){c("Failed to fetch dashboard data."),console.error(e)}finally{o(!1)}})()},[]),i)return(0,Ns.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center h-64",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-16 h-16 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-10 h-10"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading dashboard..."})]});if(l)return(0,Ns.jsx)("div",{className:"p-6 text-center text-red-500",children:l});const u=()=>{d("/shop/departments/create")},h=()=>{d("/shop/workers/view")},A=()=>{d("/shop/products/view")};return(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Ns.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Shop Dashboard"}),(0,Ns.jsx)("p",{className:"text-gray-600",children:"Overview of your shop's performance and statistics"})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 cursor-pointer hover:shadow-xl transition-shadow duration-300",onClick:u,children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("div",{className:"p-3 rounded-lg bg-blue-100",children:(0,Ns.jsx)(Re,{className:"h-6 w-6 text-blue-600"})}),(0,Ns.jsxs)("div",{className:"ml-4",children:[(0,Ns.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Departments"}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(e=s.departments)||void 0===e?void 0:e.length)||0})]})]})}),(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 cursor-pointer hover:shadow-xl transition-shadow duration-300",onClick:h,children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("div",{className:"p-3 rounded-lg bg-green-100",children:(0,Ns.jsx)(Et,{className:"h-6 w-6 text-green-600"})}),(0,Ns.jsxs)("div",{className:"ml-4",children:[(0,Ns.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Workers"}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(t=s.workers)||void 0===t?void 0:t.length)||0})]})]})}),(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 cursor-pointer hover:shadow-xl transition-shadow duration-300",onClick:A,children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("div",{className:"p-3 rounded-lg bg-purple-100",children:(0,Ns.jsx)(Pe,{className:"h-6 w-6 text-purple-600"})}),(0,Ns.jsxs)("div",{className:"ml-4",children:[(0,Ns.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Products"}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(n=s.stockLevels)||void 0===n?void 0:n.length)||0})]})]})}),(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 cursor-pointer hover:shadow-xl transition-shadow duration-300",onClick:()=>{d("/shop/billing/view")},children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("div",{className:"p-3 rounded-lg bg-yellow-100",children:(0,Ns.jsx)(tt,{className:"h-6 w-6 text-yellow-600"})}),(0,Ns.jsxs)("div",{className:"ml-4",children:[(0,Ns.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Invoices"}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.invoiceCount||0})]})]})}),(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 cursor-pointer hover:shadow-xl transition-shadow duration-300",onClick:()=>{d("/shop/settings")},children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("div",{className:"p-3 rounded-lg bg-indigo-100",children:(0,Ns.jsx)(bt,{className:"h-6 w-6 text-indigo-600"})}),(0,Ns.jsxs)("div",{className:"ml-4",children:[(0,Ns.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Settings"}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"Manage"})]})]})})]}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Ns.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Financial Overview"}),(0,Ns.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(0,Ns.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 cursor-pointer hover:bg-blue-100 transition-colors duration-300",onClick:()=>{d("/shop/billing/view")},children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)(Xe,{className:"h-8 w-8 text-blue-600"}),(0,Ns.jsxs)("div",{className:"ml-3",children:[(0,Ns.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Total Sales"}),(0,Ns.jsx)("p",{className:"text-xl font-bold text-blue-800",children:(f=s.totalSales,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(f||0))})]})]})})})]}),s.departments&&s.departments.length>0&&(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Departments"}),(0,Ns.jsx)("button",{onClick:u,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All"})]}),(0,Ns.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.departments.map(e=>(0,Ns.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("div",{className:"p-2 rounded-lg bg-blue-100",children:(0,Ns.jsx)(Re,{className:"h-5 w-5 text-blue-600"})}),(0,Ns.jsx)("div",{className:"ml-3",children:(0,Ns.jsx)("h4",{className:"font-medium text-gray-900",children:e.name})})]})},e._id))})]}),s.workers&&s.workers.length>0&&(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Workers"}),(0,Ns.jsx)("button",{onClick:h,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All"})]}),(0,Ns.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.workers.map(e=>{var t,n;return(0,Ns.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("div",{className:"p-2 rounded-lg bg-green-100",children:(0,Ns.jsx)(Et,{className:"h-5 w-5 text-green-600"})}),(0,Ns.jsxs)("div",{className:"ml-3",children:[(0,Ns.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,Ns.jsxs)("p",{className:"text-sm text-gray-500",children:[null===(t=e.workingHours)||void 0===t?void 0:t.from," - ",null===(n=e.workingHours)||void 0===n?void 0:n.to]})]})]})},e._id)})})]}),s.stockLevels&&s.stockLevels.length>0&&(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Current Stock Levels"}),(0,Ns.jsx)("button",{onClick:A,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All"})]}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Level"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.stockLevels.map(e=>(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.stockLevel," ",e.unit]})]},e._id))})]})})]})]});var f},LM=e=>{if(!e)return"";const[t,n]=e.split(":");let r=parseInt(t,10);const s=r>=12?"PM":"AM";return r=r%12||12,"".concat(r,":").concat(n," ").concat(s)},PM=()=>{const e=ee(),t=(0,r.useRef)(null),[n,s]=(0,r.useState)({name:"",department:"",salary:"",selectedBatch:""}),[a,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),[A,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,x]=(0,r.useState)(!0),[v,b]=(0,r.useState)(""),[y,w]=(0,r.useState)(!1),[N,j]=(0,r.useState)([]),[C,B]=(0,r.useState)({type:"",text:""}),[k,S]=(0,r.useState)(!1),[_,E]=(0,r.useState)(null),[F,T]=(0,r.useState)(null),[I,D]=(0,r.useState)(!1),[L,P]=(0,r.useState)(null),[R,U]=(0,r.useState)(!1),[O,M]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(g){const e=(()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="0123456789";let n="",r="";for(let s=0;s<2;s++)n+=e.charAt(Math.floor(26*Math.random()));for(let s=0;s<4;s++)r+=t.charAt(Math.floor(10*Math.random()));return n+r})();b(e)}else b("")},[g]),(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/shop/departments",{withCredentials:!0});i(e.data);const t=await ws.get("/shop/settings/batches");l(t.data),e.data.length>0&&s(t=>(0,$n.A)((0,$n.A)({},t),{},{department:e.data[0]._id}))}catch(e){console.error("Failed to fetch data:",e),h(!0),d("Failed to load data. Please try again later.")}})()},[]);const Q=e=>{const{name:t,value:r}=e.target;s((0,$n.A)((0,$n.A)({},n),{},{[t]:r}))},H=async t=>{if(t&&0!==N.length){S(!0),B({type:"",text:""});try{await cw.initialize();const n=[];for(const e of N)try{const t=await cw.loadImageFromDataURL(e.preview),r=await cw.detectFaceFromImage(t);r&&r.descriptor&&n.push(Array.from(r.descriptor))}catch(s){console.warn("Failed to detect face in one image:",s)}if(0===n.length)return B({type:"error",text:"No faces detected in the captured images. Please try again."}),void S(!1);const r=new FormData;r.append("workerId",t),r.append("faceDescriptors",JSON.stringify(n)),N.forEach(e=>{r.append("faces",e.file)});await ws.post("/shop/attendance/enroll-face",r);B({type:"success",text:"Face enrolled successfully!"}),setTimeout(()=>{e("/shop/workers/view")},2e3)}catch(a){var n,r;console.error("Error enrolling face:",a),console.error("Error response:",a.response);const e=(null===(n=a.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||a.message||"An error occurred during enrollment.";B({type:"error",text:e})}finally{S(!1),j([]),w(!1)}}},z="w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400",W="block text-sm font-semibold text-gray-600 mb-1",V="w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400 appearance-none",K="inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500";return(0,Ns.jsxs)("div",{className:"container mx-auto p-6 bg-white rounded-2xl shadow-xl h-full max-h-[calc(100vh-2rem)] overflow-y-auto",children:[R&&L&&(0,Ns.jsx)("div",{className:"fixed top-4 right-4 bg-green-500 text-white py-3 px-6 rounded-lg shadow-lg z-50 animate-fade-in-down",children:(0,Ns.jsxs)("div",{className:"flex items-start",children:[(0,Ns.jsx)("div",{className:"flex-shrink-0",children:(0,Ns.jsx)(St,{className:"h-6 w-6 text-white"})}),(0,Ns.jsxs)("div",{className:"ml-3",children:[(0,Ns.jsx)("h3",{className:"text-sm font-medium text-white",children:"Worker Added Successfully!"}),(0,Ns.jsxs)("div",{className:"mt-2 text-sm text-white",children:[(0,Ns.jsxs)("p",{children:["Name: ",L.name]}),(0,Ns.jsxs)("p",{children:["Department: ",L.department]}),O&&N.length>0&&(0,Ns.jsxs)("p",{children:["Face enrolled with ",N.length," images"]})]})]}),(0,Ns.jsx)("div",{className:"ml-4 flex",children:(0,Ns.jsx)("button",{type:"button",onClick:()=>U(!1),className:"inline-flex rounded-md bg-green-500 text-white hover:text-gray-200 focus:outline-none",children:(0,Ns.jsx)(Ft,{className:"h-5 w-5"})})})]})}),(0,Ns.jsxs)("div",{className:"flex items-center mb-6 text-gray-800",children:[(0,Ns.jsx)(_t,{className:"text-3xl text-red-500"}),(0,Ns.jsx)("h1",{className:"text-3xl font-bold ml-3",children:"Add New Worker"})]}),c&&(0,Ns.jsxs)("div",{className:"flex items-center p-4 mb-4 rounded-lg ".concat(u?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),role:"alert",children:[(0,Ns.jsx)(Ve,{className:"w-5 h-5 mr-3"}),(0,Ns.jsx)("span",{className:"font-medium",children:c}),!u&&A&&(0,Ns.jsxs)("span",{className:"ml-2",children:["Temporary Password: ",(0,Ns.jsx)("strong",{children:A})]}),!u&&p&&(0,Ns.jsxs)("span",{className:"ml-2",children:["RFID: ",(0,Ns.jsx)("strong",{children:p})]})]}),(0,Ns.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),d(""),h(!1),f(""),m(""),D(!1),!n.name.trim())return h(!0),void d("Please enter a name for the worker.");if(!n.department)return h(!0),void d("Please select a department.");let r=null,s=null,i=null;if(n.selectedBatch){const e=o.find(e=>e.id===n.selectedBatch);e&&(r=e.workingHours||null,s=e.lunchBreak||null,i=e.breakTime||null)}const l=(0,$n.A)((0,$n.A)((0,$n.A)({},n),{},{workingHours:r,lunchBreak:s,breakTime:i,createRFID:g},g&&{rfid:v}),{},{batchId:n.selectedBatch});try{const t=await ws.post("/shop/workers",l);if(d(t.data.message||"Worker added successfully!"),h(!1),f(t.data.tempPassword||""),t.data.rfid&&m(t.data.rfid),t.data.workerId){var c;E(t.data.workerId);const r={_id:t.data.workerId,name:n.name,department:(null===(c=a.find(e=>e._id===n.department))||void 0===c?void 0:c.name)||"",salary:n.salary,rfid:t.data.rfid||v};P(r),U(!0),setTimeout(()=>{U(!1)},5e3),O&&N.length>0?await H(t.data.workerId):setTimeout(()=>{e("/shop/workers/view")},2e3)}D(!0)}catch(b){var u,A;if(h(!0),400===(null===(u=b.response)||void 0===u?void 0:u.status))d(b.response.data.message||"Validation error. Please check your inputs.");else if(500===(null===(A=b.response)||void 0===A?void 0:A.status))d("Server error. Please try again later.");else{var p,x;d((null===(p=b.response)||void 0===p||null===(x=p.data)||void 0===x?void 0:x.message)||"An error occurred while adding the worker.")}console.error("Error adding worker:",b)}},className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{htmlFor:"name",className:W,children:"Full Name"}),(0,Ns.jsx)("input",{type:"text",name:"name",id:"name",value:n.name,onChange:Q,className:z,placeholder:"e.g., John Doe",required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{htmlFor:"department",className:W,children:"Department"}),(0,Ns.jsxs)("select",{name:"department",id:"department",value:n.department,onChange:Q,className:V,required:!0,children:[(0,Ns.jsx)("option",{value:"",children:"Select Department"}),a.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{htmlFor:"selectedBatch",className:W,children:"Batch (Optional)"}),(0,Ns.jsxs)("select",{name:"selectedBatch",id:"selectedBatch",value:n.selectedBatch,onChange:Q,className:V,children:[(0,Ns.jsx)("option",{value:"",children:"Select Batch"}),o.map(e=>(0,Ns.jsx)("option",{value:e.id,children:e.name},e.id))]}),n.selectedBatch&&(0,Ns.jsxs)("div",{className:"mt-2 p-2 bg-gray-100 rounded text-sm",children:[(0,Ns.jsx)("p",{className:"font-medium",children:"Batch Details:"}),((e,t,r,s,a,i)=>{const l=o.find(e=>e.id===n.selectedBatch);return l?(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("p",{children:["Working Hours: ",null!==(e=l.workingHours)&&void 0!==e&&e.from?LM(l.workingHours.from):"--:--"," - ",null!==(t=l.workingHours)&&void 0!==t&&t.to?LM(l.workingHours.to):"--:--"]}),(0,Ns.jsxs)("p",{children:["Lunch Break: ",null!==(r=l.lunchBreak)&&void 0!==r&&r.from?LM(l.lunchBreak.from):"--:--"," - ",null!==(s=l.lunchBreak)&&void 0!==s&&s.to?LM(l.lunchBreak.to):"--:--"]}),(0,Ns.jsxs)("p",{children:["Break Time: ",null!==(a=l.breakTime)&&void 0!==a&&a.startTime?LM(l.breakTime.startTime):"--:--"," - ",null!==(i=l.breakTime)&&void 0!==i&&i.endTime?LM(l.breakTime.endTime):"--:--"]})]}):null})()]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{htmlFor:"salary",className:W,children:"Salary (per month)"}),(0,Ns.jsx)("input",{type:"text",name:"salary",id:"salary",value:n.salary,onChange:Q,className:z,placeholder:"Enter monthly salary amount",required:!0})]})]}),(0,Ns.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"RFID Card"}),(0,Ns.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Ns.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Ns.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Create RFID for this worker"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>x(!g),className:"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ".concat(g?"bg-red-600":"bg-gray-200"),children:(0,Ns.jsx)("span",{"aria-hidden":"true",className:"pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 ".concat(g?"translate-x-5":"translate-x-0")})})]}),g&&(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"RFID"}),(0,Ns.jsx)("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 bg-gray-100",value:v,readOnly:!0}),(0,Ns.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This RFID will be automatically assigned to the worker"})]}),!g&&(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"RFID creation is disabled. You can enable it using the toggle above."})]})]}),(0,Ns.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Face Enrollment"}),(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ns.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Enable Face Enrollment for this worker"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>M(!O),className:"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ".concat(O?"bg-red-600":"bg-gray-200"),children:(0,Ns.jsx)("span",{"aria-hidden":"true",className:"pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 ".concat(O?"translate-x-5":"translate-x-0")})})]}),(0,Ns.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:O?"Face enrollment is enabled. Capture images below to enroll worker's face.":"Face enrollment is disabled. Worker will be added without face enrollment."})]}),C.text&&(0,Ns.jsx)("div",{className:"p-3 mb-4 rounded-lg ".concat("success"===C.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:C.text}),O&&(0,Ns.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,Ns.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[y?(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)(Pa(),{audio:!1,ref:t,screenshotFormat:"image/jpeg",className:"w-full max-w-xs mx-auto rounded-md",videoConstraints:{width:320,height:240}}),(0,Ns.jsxs)("button",{type:"button",onClick:()=>{if(t.current&&N.length<5){const e=t.current.getScreenshot();if(e){const t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),s=new Uint8Array(r);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);const a=new Blob([r],{type:n}),i=new File([a],"capture-".concat(Date.now(),".jpeg"),{type:n});j(t=>[...t,{file:i,preview:e}])}}},disabled:k||N.length>=5,className:"".concat(K," bg-red-600 text-white ").concat(k||N.length>=5?"opacity-50":"hover:bg-red-700"),children:[(0,Ns.jsx)(Oe,{className:"mr-1"})," Capture Image"]}),(0,Ns.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Captured: ",N.length,"/5 images"]})]}):(0,Ns.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,Ns.jsx)(Oe,{className:"text-4xl text-gray-400 mb-2"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>w(!0),className:"".concat(K," text-red-600"),children:"Use Camera"})]}),y&&(0,Ns.jsx)("button",{type:"button",onClick:()=>w(!1),className:"".concat(K," text-gray-600 mt-2"),children:"Close Camera"})]}),N.length>0&&(0,Ns.jsxs)("div",{className:"space-y-2",children:[(0,Ns.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["Captured Images (",N.length,"/5)"]}),(0,Ns.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-2",children:N.map((e,t)=>(0,Ns.jsxs)("div",{className:"relative group",children:[(0,Ns.jsx)("img",{src:e.preview,alt:"Captured face ".concat(t+1),className:"w-full h-20 object-cover rounded-md"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>(e=>{j(t=>t.filter((t,n)=>n!==e))})(t),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:(0,Ns.jsx)(Ft,{size:12})})]},t))})]})]})]}),(0,Ns.jsx)("button",{type:"submit",className:"w-full bg-red-500 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 shadow-md",disabled:k,children:k?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(lt,{className:"animate-spin mr-2"}),"Adding Worker..."]}):"Add Worker"})]})]})},RM=e=>{if(!e)return"Not set";const[t,n]=e.split(":");let r=parseInt(t,10);const s=r>=12?"PM":"AM";return r=r%12||12,"".concat(r,":").concat(n," ").concat(s)},UM="/shop/workers",OM=()=>{const e=J(),[t,n]=(ee(),(0,r.useState)([])),[s,a]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(""),d=(0,r.useRef)(null),[u,h]=(0,r.useState)(!1),[A,f]=(0,r.useState)(null),[p,m]=(0,r.useState)({}),[g,x]=(0,r.useState)([]),[v,b]=(0,r.useState)([]),[y,w]=(0,r.useState)(!1),[N,j]=(0,r.useState)(null),[C,B]=(0,r.useState)([]),[k,S]=(0,r.useState)(!1),[_,E]=(0,r.useState)(!1),[F,T]=(0,r.useState)({type:"",text:""}),[I,D]=(0,r.useState)(!1),[L,P]=(0,r.useState)(null),R=async()=>{try{const[e,t,r]=await Promise.all([ws.get(UM,{withCredentials:!0}),ws.get("/shop/departments",{withCredentials:!0}),ws.get("/shop/settings/batches")]);n(e.data),x(t.data),b(r.data)}catch(e){o("Failed to fetch data."),console.error(e)}finally{a(!1)}};(0,r.useEffect)(()=>{R()},[e.key]);const U=t.filter(e=>{var t;return e.name&&e.name.toLowerCase().includes(l.toLowerCase())||(null===(t=e.department)||void 0===t?void 0:t.name)&&e.department.name.toLowerCase().includes(l.toLowerCase())}),O=()=>{h(!1),f(null),m({})},M=(e,t)=>{const{value:n}=e.target;if(t.includes(".")){const[e,r]=t.split(".");m(t=>(0,$n.A)((0,$n.A)({},t),{},{[e]:(0,$n.A)((0,$n.A)({},t[e]),{},{[r]:n})}))}else m("selectedBatch"===t?e=>{const t=v.find(e=>e.id===n);return t?(0,$n.A)((0,$n.A)({},e),{},{selectedBatch:n,workingHours:t.workingHours||null,lunchBreak:t.lunchBreak||null,breakTime:t.breakTime||null}):(0,$n.A)((0,$n.A)({},e),{},{selectedBatch:n,workingHours:null,lunchBreak:null,breakTime:null})}:(0,$n.A)((0,$n.A)({},p),{},{[t]:n}))},Q=()=>{w(!1),j(null),B([]),S(!1),T({type:"",text:""})};return s?(0,Ns.jsx)("div",{className:"p-6 text-center",children:"Loading workers..."}):i?(0,Ns.jsx)("div",{className:"p-6 text-center text-red-500",children:i}):(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Ns.jsx)("h3",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Existing Workers"}),(0,Ns.jsx)("div",{className:"relative w-full sm:w-1/3 mb-6",children:(0,Ns.jsx)("input",{type:"text",placeholder:"Search by staff name or ID...",className:"w-full pl-10 pr-4 py-2 border border-medium-gray rounded-lg text-sm",value:l,onChange:e=>c(e.target.value)})}),0===U.length?(0,Ns.jsx)("p",{children:"No workers found. Please add a worker."}):(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salary"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Batch Details"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RFID"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:U.map(e=>{var t,n,r,s,a,i,o,l,c,d,u,A,p;return(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:null===(t=e.department)||void 0===t?void 0:t.name}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.salary}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.batchId?(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("div",{children:["Working Hours: ",null!==(n=e.workingHours)&&void 0!==n&&n.from&&null!==(r=e.workingHours)&&void 0!==r&&r.to?"".concat(RM(e.workingHours.from)," - ").concat(RM(e.workingHours.to)):"Not set"]}),(0,Ns.jsxs)("div",{children:["Lunch Break: ",null!==(s=e.lunchBreak)&&void 0!==s&&s.from&&null!==(a=e.lunchBreak)&&void 0!==a&&a.to?"".concat(RM(e.lunchBreak.from)," - ").concat(RM(e.lunchBreak.to)):"Not set"]}),(0,Ns.jsxs)("div",{children:["Break Time: ",null!==(i=e.breakTime)&&void 0!==i&&i.startTime&&null!==(o=e.breakTime)&&void 0!==o&&o.endTime?"".concat(RM(e.breakTime.startTime)," - ").concat(RM(e.breakTime.endTime)):"Not set"]})]}):(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("div",{children:["Working Hours: ",null!==(l=e.workingHours)&&void 0!==l&&l.from&&null!==(c=e.workingHours)&&void 0!==c&&c.to?"".concat(RM(e.workingHours.from)," - ").concat(RM(e.workingHours.to)):"Not set"]}),(0,Ns.jsxs)("div",{children:["Lunch Break: ",null!==(d=e.lunchBreak)&&void 0!==d&&d.from&&null!==(u=e.lunchBreak)&&void 0!==u&&u.to?"".concat(RM(e.lunchBreak.from)," - ").concat(RM(e.lunchBreak.to)):"Not set"]}),(0,Ns.jsxs)("div",{children:["Break Time: ",null!==(A=e.breakTime)&&void 0!==A&&A.startTime&&null!==(p=e.breakTime)&&void 0!==p&&p.endTime?"".concat(RM(e.breakTime.startTime)," - ").concat(RM(e.breakTime.endTime)):"Not set"]})]})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.rfid||"Not Assigned"}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{var t;f(e),m((0,$n.A)((0,$n.A)({},e),{},{department:(null===(t=e.department)||void 0===t?void 0:t._id)||e.department||"",selectedBatch:e.batchId||""})),h(!0)})(e),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),(0,Ns.jsx)("button",{onClick:()=>(e=>{P(e),D(!0)})(e),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e._id)})})]})}),(0,Ns.jsx)(hw,{isOpen:u,onClose:O,title:"Edit Worker",children:A&&(0,Ns.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=(0,$n.A)({},p);void 0!==p.selectedBatch&&(e.batchId=p.selectedBatch||null),A&&A.faceEncodings&&(e.faceEncodings=A.faceEncodings),A&&A.faceImages&&(e.faceImages=A.faceImages);const r=await ws.put("".concat(UM,"/").concat(A._id),e,{withCredentials:!0});n(t.map(e=>e._id===A._id?r.data.worker:e)),O()}catch(r){o("Failed to update worker."),console.error(r)}},className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Ns.jsx)("input",{type:"text",value:p.name||"",onChange:e=>M(e,"name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,Ns.jsxs)("select",{value:p.department||"",onChange:e=>{m((0,$n.A)((0,$n.A)({},p),{},{department:e.target.value}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,Ns.jsx)("option",{value:"",children:"Select Department"}),g.map(e=>(0,Ns.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salary"}),(0,Ns.jsx)("input",{type:"number",value:p.salary||"",onChange:e=>M(e,"salary"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RFID"}),(0,Ns.jsx)("input",{type:"text",value:p.rfid||"",onChange:e=>M(e,"rfid"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch"}),(0,Ns.jsxs)("select",{value:p.selectedBatch||"",onChange:e=>M(e,"selectedBatch"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,Ns.jsx)("option",{value:"",children:"No Batch"}),v.map(e=>(0,Ns.jsx)("option",{value:e.id,children:e.name},e.id))]}),p.selectedBatch&&(0,Ns.jsxs)("div",{className:"mt-2 p-2 bg-gray-100 rounded text-sm",children:[(0,Ns.jsx)("p",{className:"font-medium",children:"Batch Details:"}),((e,t,n,r,s,a)=>{const i=v.find(e=>e.id===p.selectedBatch);return i?(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("p",{children:["Working Hours: ",null!==(e=i.workingHours)&&void 0!==e&&e.from?RM(i.workingHours.from):"--:--"," - ",null!==(t=i.workingHours)&&void 0!==t&&t.to?RM(i.workingHours.to):"--:--"]}),(0,Ns.jsxs)("p",{children:["Lunch Break: ",null!==(n=i.lunchBreak)&&void 0!==n&&n.from?RM(i.lunchBreak.from):"--:--"," - ",null!==(r=i.lunchBreak)&&void 0!==r&&r.to?RM(i.lunchBreak.to):"--:--"]}),(0,Ns.jsxs)("p",{children:["Break Time: ",null!==(s=i.breakTime)&&void 0!==s&&s.from?RM(i.breakTime.from):"--:--"," - ",null!==(a=i.breakTime)&&void 0!==a&&a.to?RM(i.breakTime.to):"--:--"]})]}):null})()]})]}),(0,Ns.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ns.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Face Enrollment"}),A.faceImages&&A.faceImages.length>0?(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Enrolled"}):(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Not Enrolled"})]}),(0,Ns.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:A.faceImages&&A.faceImages.length>0?"Worker has ".concat(A.faceImages.length," face images enrolled."):"Worker has not been enrolled for face recognition."}),(0,Ns.jsxs)("button",{type:"button",onClick:()=>(j(A),B([]),S(!0),T({type:"",text:""}),void w(!0)),className:"mt-2 inline-flex items-center px-3 py-1.5 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,Ns.jsx)(_t,{className:"mr-1",size:16}),A.faceImages&&A.faceImages.length>0?"Update Face Enrollment":"Enroll Face"]})]}),(0,Ns.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Ns.jsx)("button",{type:"button",onClick:O,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,Ns.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 rounded-md shadow-sm text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Update Worker"})]})]})}),(0,Ns.jsx)(hw,{isOpen:y,onClose:Q,title:"Face Enrollment",children:N&&(0,Ns.jsxs)("div",{className:"space-y-4",children:[(0,Ns.jsxs)("p",{className:"text-sm text-gray-600",children:["Enrolling face for worker: ",(0,Ns.jsx)("span",{className:"font-medium",children:N.name})]}),(0,Ns.jsxs)("div",{className:"bg-blue-50 p-4 rounded-md",children:[(0,Ns.jsx)("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Instructions"}),(0,Ns.jsxs)("ul",{className:"text-xs text-blue-700 list-disc pl-5 space-y-1",children:[(0,Ns.jsx)("li",{children:"Position the worker's face clearly in the camera frame"}),(0,Ns.jsx)("li",{children:"Capture multiple images from different angles for better recognition"}),(0,Ns.jsx)("li",{children:"Ensure good lighting and avoid glare or shadows on the face"})]})]}),F.text&&(0,Ns.jsx)("div",{className:"p-3 rounded-md ".concat("success"===F.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:F.text}),(0,Ns.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),N&&0!==C.length){E(!0),T({type:"",text:""});try{await cw.initialize();const e=[];for(const n of C)try{const t=await cw.loadImageFromDataURL(n.preview),r=await cw.detectFaceFromImage(t);r&&r.descriptor&&e.push(Array.from(r.descriptor))}catch(r){console.warn("Failed to detect face in one image:",r)}if(0===e.length)return T({type:"error",text:"No faces detected in the uploaded images. Please ensure faces are clearly visible."}),void E(!1);await cw.enrollFace(N._id,e.map(e=>new Float32Array(e)));const t=new FormData;t.append("workerId",N._id),t.append("faceDescriptors",JSON.stringify(e)),C.forEach(e=>{t.append("faces",e.file)}),await ws.post("/shop/attendance/enroll-face",t),T({type:"success",text:"Face enrollment successful!"}),await R();try{await new Promise(e=>setTimeout(e,500));const e=await ws.get("".concat(UM,"/").concat(N._id),{withCredentials:!0});A&&A._id===N._id&&f(e.data)}catch(i){console.error("Error fetching updated worker data:",i),A&&A._id===N._id&&f(t=>(0,$n.A)((0,$n.A)({},t),{},{faceImages:[...t.faceImages||[],...C],faceEncodings:e}))}try{const t=e.map(e=>new Float32Array(e));cw.addEnrolledFace(N._id,t),await new Promise(e=>setTimeout(e,100));const n=await cw._loadEnrolledFaces();console.log("Reloaded enrolled faces. Total enrolled workers:",n),window.dispatchEvent(new CustomEvent("faceEnrollmentUpdated",{detail:{workerId:N._id,timestamp:Date.now()}})),window.dispatchEvent(new CustomEvent("faceEnrollmentCompleted",{detail:{workerId:N._id,workerName:N.name,descriptorsCount:t.length,timestamp:Date.now()}}))}catch(s){console.warn("Failed to update face recognition service:",s)}setTimeout(()=>{Q()},2e3)}catch(i){var t,n;console.error("Error enrolling face:",i);const r=(null===(t=i.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||i.message||"An error occurred during enrollment.";T({type:"error",text:r})}finally{E(!1)}}else T({type:"error",text:"Please select a worker and provide at least one image."})},className:"space-y-4",children:[(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ns.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[k?(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)(Pa(),{audio:!1,ref:d,screenshotFormat:"image/jpeg",className:"w-full max-w-xs mx-auto rounded-md",videoConstraints:{width:320,height:240}}),(0,Ns.jsxs)("button",{type:"button",onClick:()=>{if(C.length<5){const e=d.current.getScreenshot();if(e){const t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]);let s=r.length;const a=new Uint8Array(s);for(;s--;)a[s]=r.charCodeAt(s);const i=new Blob([a],{type:n}),o=new File([i],"capture-".concat(Date.now(),".jpeg"),{type:n});B(t=>[...t,{file:o,preview:e}])}}else T({type:"error",text:"You can only add up to 5 images."})},disabled:_||C.length>=5,className:"mt-4 w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[(0,Ns.jsx)(Oe,{className:"mr-2"})," Capture Image"]})]}):(0,Ns.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,Ns.jsx)(kt,{className:"text-4xl text-gray-400 mb-2"}),(0,Ns.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer text-sm font-medium text-red-600 hover:text-red-500",children:"Upload up to 5 images"}),(0,Ns.jsx)("input",{id:"file-upload",type:"file",multiple:!0,accept:"image/*",onChange:e=>{const t=Array.from(e.target.files),n=[];C.length+t.length<=5?t.forEach(e=>{const r=new FileReader;r.onload=r=>{n.push({file:e,preview:r.target.result}),n.length===t.length&&B(e=>[...e,...n])},r.readAsDataURL(e)}):T({type:"error",text:"You can only add up to 5 images."})},className:"sr-only",disabled:_||C.length>=5}),(0,Ns.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"or"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>S(!0),className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-500",children:"Use Camera"})]}),k&&(0,Ns.jsx)("button",{type:"button",onClick:()=>S(!1),className:"mt-2 text-sm text-gray-600 hover:text-gray-800",children:"Close Camera"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Preview (",C.length,"/5)"]}),C.length>0?(0,Ns.jsx)("div",{className:"grid grid-cols-3 gap-2",children:C.map((e,t)=>(0,Ns.jsxs)("div",{className:"relative group",children:[(0,Ns.jsx)("img",{src:e.preview,alt:"preview ".concat(t),className:"w-full h-20 object-cover rounded-md"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>(e=>{B(C.filter((t,n)=>n!==e))})(t),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2715"})]},t))}):(0,Ns.jsx)("div",{className:"flex items-center justify-center h-24 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"No images selected"})})]})]}),(0,Ns.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Ns.jsx)("button",{type:"button",onClick:Q,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:_,children:"Cancel"}),(0,Ns.jsx)("button",{type:"submit",disabled:_||0===C.length,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:_?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Ns.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ns.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enrolling..."]}):(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(_t,{className:"mr-2"})," Enroll Face"]})})]})]})]})}),I&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Ns.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4",children:[(0,Ns.jsxs)("div",{className:"text-center",children:[(0,Ns.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,Ns.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,Ns.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mt-4",children:"Delete Worker"}),(0,Ns.jsx)("div",{className:"mt-2",children:(0,Ns.jsxs)("p",{className:"text-sm text-gray-500",children:["Are you sure you want to delete ",(0,Ns.jsx)("span",{className:"font-semibold",children:null===L||void 0===L?void 0:L.name}),"? This action cannot be undone."]})})]}),(0,Ns.jsxs)("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense",children:[(0,Ns.jsx)("button",{type:"button",onClick:async()=>{if(L)try{await ws.delete("".concat(UM,"/").concat(L._id),{withCredentials:!0}),n(t.filter(e=>e._id!==L._id)),D(!1),P(null)}catch(e){o("Failed to delete worker."),console.error(e)}},className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:col-start-2 sm:text-sm",children:"Delete"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>{D(!1),P(null)},className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm",children:"Cancel"})]})]})})]})};const MM=function(e){let{onAttendanceRecorded:t}=e;const[n,s]=(0,r.useState)(""),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)("");return(0,r.useEffect)(()=>()=>{A&&clearTimeout(A)},[A]),(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold mb-4 text-text-primary",children:"RFID Attendance"}),(0,Ns.jsx)("form",{onSubmit:async e=>{e.preventDefault(),i(""),l(""),d(null),h("");const t=n.trim();t?(x(t),m(!0)):l("Please enter an RFID.")},className:"mb-6",children:(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Scan RFID"}),(0,Ns.jsx)("input",{type:"text",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:n,onChange:e=>s(e.target.value),placeholder:"Enter RFID (e.g., AB0000)",autoFocus:!0})]}),(0,Ns.jsxs)("div",{className:"flex gap-2",children:[(0,Ns.jsx)("button",{type:"submit",className:"bg-primary text-white font-semibold py-2 px-6 rounded-lg hover:bg-primary-dark transition-colors",children:"Submit"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>{s(""),i(""),l(""),d(null),h(""),m(!1),x(""),A&&(clearTimeout(A),f(null))},className:"bg-gray-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-gray-600 transition-colors",children:"Clear"})]})]})}),p&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full",children:[(0,Ns.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Confirm RFID Submission"}),(0,Ns.jsx)("p",{className:"mb-4",children:"Are you sure you want to submit this RFID for attendance?"}),(0,Ns.jsxs)("p",{className:"mb-6 font-semibold",children:["RFID: ",g]}),(0,Ns.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,Ns.jsx)("button",{onClick:()=>{m(!1),x("")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:async()=>{m(!1);try{const e=await ws.post("/shop/attendance/rfid-attendance",{rfid:g},{withCredentials:!0});i(e.data.message),d({name:e.data.worker}),h(e.data.type),A&&clearTimeout(A);const n=setTimeout(()=>{s("")},3e3);f(n),t&&e.data.attendance&&setTimeout(()=>{t({workerName:e.data.worker,rfid:e.data.rfid,checkIn:e.data.attendance.checkIn,checkOut:e.data.attendance.checkOut,type:e.data.type,attendance:e.data.attendance})},100)}catch(c){var e,n,r,a,o;if(429===(null===(e=c.response)||void 0===e?void 0:e.status)&&null!==(n=c.response)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.message)l(c.response.data.message);else l((null===(a=c.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)||"Failed to process RFID attendance.");console.error(c)}},className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark",children:"Confirm"})]})]})}),a&&(0,Ns.jsx)("div",{className:"p-4 rounded-lg mb-4 ".concat("checkin"===u?"bg-green-500 text-white":"checkout"===u?"bg-red-500 text-white":"bg-green-100 text-green-800"),children:a}),o&&(0,Ns.jsx)("div",{className:"p-4 bg-red-100 text-red-800 rounded-lg mb-4",children:o}),c&&(0,Ns.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsx)("h4",{className:"font-semibold text-lg mb-2",children:"Attendance Recorded"}),(0,Ns.jsxs)("p",{className:"text-gray-700",children:["Worker: ",(0,Ns.jsx)("span",{className:"font-semibold",children:c.name})]}),(0,Ns.jsxs)("p",{className:"text-gray-700",children:["Action: ",(0,Ns.jsx)("span",{className:"font-semibold capitalize ".concat("checkin"===u?"text-green-500":"checkout"===u?"text-red-500":""),children:u})]}),(0,Ns.jsx)("p",{className:"text-gray-700 text-sm mt-2",children:"RFID input will clear automatically in 3 seconds..."})]})]})},QM=e=>{var t;let{onAttendanceRecorded:n}=e;const s=(0,r.useRef)(null),[a,i]=(0,r.useState)({type:"info",text:"Initializing Camera..."}),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!0),[A,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(0),[g,x]=(0,r.useState)(!1),[v,b]=(0,r.useState)(""),[y,w]=(0,r.useState)(""),[N,j]=(0,r.useState)({}),[C,B]=(0,r.useState)(!1),k=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{try{console.log("Initializing face recognition service..."),await cw.initialize(),console.log("Face recognition service initialized successfully"),await cw._loadEnrolledFaces();const e=await ws.get("/shop/attendance/face-status");console.log("Service status response:",e.data),f(e.data),e.data.serviceReady?i({type:"success",text:"Face recognition service is ready!"}):i({type:"error",text:"Face recognition service unavailable. Use RFID attendance instead."})}catch(e){console.error("Failed to check service status:",e),f({serviceReady:!1}),i({type:"error",text:"Unable to initialize face recognition: ".concat(e.message)})}})()},[]),(0,r.useEffect)(()=>{const e=async()=>{try{await cw._loadEnrolledFaces(),i({type:"success",text:"Face recognition service updated with latest enrollment data!"}),setTimeout(()=>{i({type:"success",text:"Face recognition service is ready!"})},3e3)}catch(e){console.error("Failed to update face recognition service:",e),i({type:"error",text:"Failed to update face recognition data. Please refresh the page."})}},t=async e=>{try{const{workerName:t,descriptorsCount:n}=e.detail;console.log("Face enrollment completed for worker: ".concat(t,", descriptors: ").concat(n)),await cw._loadEnrolledFaces(),i({type:"success",text:"Face enrollment completed for ".concat(t,"! Ready for recognition.")}),setTimeout(()=>{i({type:"success",text:"Face recognition service is ready!"})},3e3)}catch(t){console.error("Failed to handle face enrollment completion:",t),i({type:"error",text:"Failed to update face recognition data. Please refresh the page."})}};return window.addEventListener("faceEnrollmentUpdated",e),window.addEventListener("faceEnrollmentCompleted",t),()=>{window.removeEventListener("faceEnrollmentUpdated",e),window.removeEventListener("faceEnrollmentCompleted",t)}},[]),(0,r.useEffect)(()=>{const e=setInterval(()=>{const e=Date.now(),t={};Object.keys(N).forEach(n=>{N[n]>e&&(t[n]=N[n])}),j(t)},3e4);return()=>clearInterval(e)},[N]);const S=(0,r.useCallback)(async()=>{if(o||!s.current||!c)return;if(A&&!A.serviceReady)return void i({type:"error",text:"Face recognition service is not available. Please use RFID attendance."});const e=s.current.getScreenshot();if(!e)return i({type:"error",text:"Failed to capture image. Please try again."}),void setTimeout(()=>{l(!1),"success"!==a.type&&i({type:"info",text:"Scanning for face..."})},3e3);l(!0),i({type:"info",text:"Detecting face..."});try{await cw.initialize();const s=await cw.loadImageFromDataURL(e);console.log("Attempting face recognition...");const o=await cw.recognizeFace(s);if(console.log("Face recognition result:",o),o.success){const e=Date.now();if(N[o.workerId]&&N[o.workerId]>e){const t=Math.ceil((N[o.workerId]-e)/1e3);return i({type:"error",text:"Please wait ".concat(t," seconds before marking attendance again. Attendance must alternate between IN and OUT punches.")}),void setTimeout(()=>{l(!1),i({type:"info",text:"Scanning for face..."})},3e3)}const s={faceDescriptor:Array.from(o.descriptor||[]),workerId:o.workerId,confidence:o.confidence};console.log("Sending recognition data to backend:",s);const a=await ws.post("/shop/attendance/recognize-face",s);var t,r;if(console.log("Backend response:",a.data),i({type:"success",text:a.data.message}),m(0),j(t=>(0,$n.A)((0,$n.A)({},t),{},{[o.workerId]:e+12e4})),w(a.data.worker),b(a.data.message),x(!0),B(!0),k.current&&clearInterval(k.current),setTimeout(()=>{x(!1),l(!1),i({type:"info",text:"Scanning for next face..."})},2e3),n)n({workerName:a.data.worker,rfid:"FACE",checkIn:null===(t=a.data.attendance)||void 0===t?void 0:t.checkIn,checkOut:null===(r=a.data.attendance)||void 0===r?void 0:r.checkOut,type:a.data.type,attendance:a.data.attendance,isYesterdayPunchOut:a.data.message.includes("completed yesterday's session")})}else i({type:"error",text:"Face not recognized. Please enroll first or try again."}),setTimeout(()=>{l(!1),"success"!==a.type&&i({type:"info",text:"Scanning for face..."})},3e3)}catch(v){var d,u,h,f,g;console.error("Face recognition error:",v);let e="Face recognition failed.";v.message.includes("No face detected")?e="No face detected. Please position your face clearly in the camera.":v.message.includes("not recognized")?e="Face not recognized. Please enroll first or try again.":(429===(null===(d=v.response)||void 0===d?void 0:d.status)&&null!==(u=v.response)&&void 0!==u&&null!==(h=u.data)&&void 0!==h&&h.message||null!==(f=v.response)&&void 0!==f&&null!==(g=f.data)&&void 0!==g&&g.message)&&(e=v.response.data.message),i({type:"error",text:e});const t=p+1;m(t);const n=3e3,r=Math.min(n*Math.pow(2,Math.min(t-1,4)),3e4);setTimeout(()=>{l(!1),"success"!==a.type&&i({type:"info",text:"Scanning for face..."})},r)}},[o,c,a.type,A,p,n,N]);(0,r.useEffect)(()=>(k.current&&clearInterval(k.current),c&&u&&!C&&(S(),k.current=setInterval(()=>{S()},2e3)),()=>{k.current&&clearInterval(k.current)}),[c,S,u,C]);const _=(()=>{let e=(0,Ns.jsx)(lt,{className:"animate-spin text-4xl text-gray-500"}),t="border-gray-400";return c&&(o?(e=(0,Ns.jsx)(lt,{className:"animate-spin text-4xl text-blue-500"}),t="border-blue-500"):"success"===a.type?(e=(0,Ns.jsx)(Ke,{className:"text-4xl text-green-500"}),t="border-green-500"):"error"===a.type?(e=(0,Ns.jsx)(Ct,{className:"text-4xl text-red-500"}),t="border-red-500"):(e=(0,Ns.jsx)(Oe,{className:"text-4xl text-gray-500"}),t="border-gray-400")),{icon:e,color:t}})();return(0,Ns.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-lg max-w-2xl mx-auto",children:[g&&(0,Ns.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-2",children:[(0,Ns.jsx)("div",{className:"absolute inset-0 bg-black opacity-50"}),(0,Ns.jsx)("div",{className:"relative bg-white rounded-lg p-4 sm:p-6 max-w-md w-full mx-2 shadow-xl",children:(0,Ns.jsxs)("div",{className:"text-center",children:[(0,Ns.jsx)(Ke,{className:"text-3xl sm:text-4xl text-green-500 mx-auto mb-3 sm:mb-4"}),(0,Ns.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2 sm:mb-4",children:"Attendance Recorded"}),(0,Ns.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mb-3 sm:mb-4",children:v}),(0,Ns.jsxs)("div",{className:"bg-gray-100 rounded-lg p-3 sm:p-4 mb-4",children:[(0,Ns.jsx)("p",{className:"font-medium text-gray-800 text-sm",children:"Worker:"}),(0,Ns.jsx)("p",{className:"text-base sm:text-lg font-bold text-blue-600",children:y})]})]})})]}),(0,Ns.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4 text-center",children:"Automatic Face Attendance"}),(0,Ns.jsx)("p",{className:"text-center text-gray-600 mb-4 sm:mb-6 text-sm sm:text-base",children:"Position your face in the camera frame. The system will automatically mark your attendance."}),(0,Ns.jsxs)("div",{className:"relative w-full aspect-square bg-gray-900 rounded-lg overflow-hidden border-4 ".concat(_.color," transition-colors duration-500 mb-4 sm:mb-6"),children:[C?(0,Ns.jsx)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center bg-gray-800",children:(0,Ns.jsx)(Ke,{className:"text-6xl text-green-500"})}):(0,Ns.jsx)(Pa(),{audio:!1,ref:s,screenshotFormat:"image/jpeg",videoConstraints:{facingMode:"user",width:720,height:720},onUserMedia:()=>{d(!0),i({type:"info",text:"Scanning for face..."}),u&&S()},className:"absolute top-0 left-0 w-full h-full object-cover"}),(0,Ns.jsx)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center pointer-events-none",children:(0,Ns.jsx)("div",{className:"w-3/4 h-3/4 border-4 border-dashed border-white rounded-full opacity-30"})})]}),(0,Ns.jsxs)("div",{className:"text-center p-3 sm:p-4 rounded-lg bg-gray-50",children:[A&&(0,Ns.jsxs)("div",{className:"mb-3 sm:mb-4 p-3 rounded-lg ".concat(A.serviceReady?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:[(0,Ns.jsx)("div",{className:"text-xs sm:text-sm font-medium",children:A.serviceReady?"\u2705 React Face Recognition: Ready (High Accuracy)":"\u26a0\ufe0f Face Recognition Service: Unavailable"}),A.currentMode&&(0,Ns.jsxs)("div",{className:"text-xs mt-1",children:[(0,Ns.jsx)("strong",{children:"Mode:"})," ",A.currentMode]}),A.features&&A.serviceReady&&(0,Ns.jsxs)("div",{className:"text-xs mt-1",children:[(0,Ns.jsx)("strong",{children:"Features:"})," Real-time detection, Neural networks, Browser-based"]}),!A.serviceReady&&A.alternatives&&(0,Ns.jsxs)("div",{className:"text-xs mt-1",children:["Available alternatives: ",A.alternatives.map(e=>e.name).join(", ")]})]}),C?(0,Ns.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Ns.jsx)("p",{className:"text-green-600 font-medium mb-2",children:"Attendance marked successfully!"}),(0,Ns.jsx)("button",{onClick:()=>{B(!1),d(!1),i({type:"info",text:"Restarting Camera..."})},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Mark Another Attendance"})]}):(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)("p",{className:"text-gray-600 text-sm sm:text-base mb-2",children:"Position your face in the camera frame. The system will automatically mark your attendance."}),(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[(0,Ns.jsx)("div",{className:"flex items-center justify-center",children:_.icon}),(0,Ns.jsx)("span",{className:"text-sm sm:text-base font-medium text-gray-700",children:a.text})]}),(0,Ns.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,Ns.jsxs)("label",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:[(0,Ns.jsx)("input",{type:"checkbox",checked:u,onChange:e=>h(e.target.checked),disabled:A&&!A.serviceReady,className:"w-4 h-4"}),"Enable auto-scan (every 2 seconds)"]}),A&&!A.serviceReady&&(0,Ns.jsxs)("div",{className:"mt-4 p-3 sm:p-4 bg-blue-50 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-xs sm:text-sm font-medium text-blue-800 mb-2 sm:mb-3",children:"Face Recognition Setup Required:"}),A.setupInstructions&&(0,Ns.jsxs)("div",{className:"text-xs text-blue-700 mb-2 sm:mb-3",children:[(0,Ns.jsxs)("div",{className:"mb-1 sm:mb-2",children:[(0,Ns.jsx)("strong",{children:"Missing:"})," ",null===(t=A.missingDependencies)||void 0===t?void 0:t.join(", ")]}),(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsxs)("div",{children:["1. ",A.setupInstructions.step1]}),(0,Ns.jsxs)("div",{children:["2. ",A.setupInstructions.step2]}),(0,Ns.jsxs)("div",{children:["3. ",A.setupInstructions.step3]}),A.setupInstructions.note&&(0,Ns.jsxs)("div",{className:"text-yellow-700 mt-1 sm:mt-2 text-xs",children:["\u26a0\ufe0f ",A.setupInstructions.note]})]})]}),(0,Ns.jsxs)("div",{className:"text-xs text-blue-600 border-t border-blue-200 pt-2",children:[(0,Ns.jsx)("strong",{children:"Alternative Methods (Available Now):"}),(0,Ns.jsx)("br",{}),"\u2022 Use RFID card scanner for quick check-in/out",(0,Ns.jsx)("br",{}),"\u2022 Manual attendance tracking is available",(0,Ns.jsx)("br",{}),"\u2022 Contact admin to configure face recognition"]})]})]})]})]})]})},HM=e=>{if(!e)return"--:--";const t=new Date(e);let n=t.getHours();const r=t.getMinutes().toString().padStart(2,"0"),s=t.getSeconds().toString().padStart(2,"0"),a=n>=12?"PM":"AM";return n=n%12||12,"".concat(n,":").concat(r,":").concat(s," ").concat(a)},zM=e=>{if(!e)return"--/--/----";let t;return t="string"===typeof e?(e.includes("-"),new Date(e)):e,isNaN(t.getTime())?"--/--/----":t.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})},WM=e=>{const t=new Map;e.forEach(e=>{e._id&&t.set(e._id.toString(),e)});const n=new Map;t.forEach(e=>{if(e.attendanceRecordsGroupedByDate&&e.attendanceRecordsGroupedByDate.length>0)e.attendanceRecordsGroupedByDate.forEach(t=>{const r=t.date,s=t.records,a=e._id.toString(),i="".concat(a,"-").concat(r);n.has(i)||n.set(i,{worker:e,date:r,records:[]}),n.get(i).records.push(...s)});else if(e.attendanceRecords&&e.attendanceRecords.length>0){const t=new Map;e.attendanceRecords.forEach(r=>{if(r._id&&t.has(r._id))return;let s;r._id&&t.set(r._id,!0);try{if(!e._id)return void console.warn("Worker missing _id:",e);s=e._id.toString()}catch(o){return void console.error("Error processing worker ID:",e,o)}const a=new Date(r.checkIn).toISOString().split("T")[0],i="".concat(s,"-").concat(a);n.has(i)||n.set(i,{worker:e,date:a,records:[]}),n.get(i).records.push(r)})}});const r=[];return n.forEach(e=>{e.records.sort((e,t)=>new Date(e.checkIn)-new Date(t.checkIn)),r.push(e)}),r},VM=(e,t)=>{const n=new Date(t);n.setDate(n.getDate()-1);const r=n.toISOString().split("T")[0];return new Date(e.checkIn).toISOString().split("T")[0]===r&&e.checkOut&&e.isManualCorrection};const KM=function(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(2),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[y,w]=(0,r.useState)(""),N=(0,r.useCallback)(async()=>{try{const e=await ws.get("/shop/attendance",{withCredentials:!0});console.log("Attendance data received:",e.data),t(e.data),l(!1)}catch(e){d("Failed to fetch today's attendance data."),console.error(e),l(!1)}},[]);(0,r.useEffect)(()=>{N();const e=setInterval(()=>{N()},2e3);return()=>{clearInterval(e)}},[N]),(0,r.useEffect)(()=>{const t=e.filter(e=>!!(e.attendanceRecordsGroupedByDate&&e.attendanceRecordsGroupedByDate.length>0)||!!(e.attendanceRecords&&e.attendanceRecords.length>0)).filter((e,t,n)=>t===n.findIndex(t=>t._id===e._id)),n=[...WM(t)].sort((e,t)=>{const n=e=>{let t=new Date(0);return e.records.forEach(e=>{e.checkIn&&new Date(e.checkIn)>t&&(t=new Date(e.checkIn)),e.checkOut&&new Date(e.checkOut)>t&&(t=new Date(e.checkOut))}),t},r=n(e);return n(t)-r}),r=(new Date).toISOString().split("T")[0],i=n.filter(e=>e.date===r),o=n.filter(e=>e.date!==r),l=[...new Set(o.map(e=>e.date))].sort((e,t)=>new Date(t)-new Date(e)),c=(l.length,l.slice(0,a)),d=[...i,...o.filter(e=>c.includes(e.date))];s(d)},[e,a]);const j=e.filter(e=>!!(e.attendanceRecordsGroupedByDate&&e.attendanceRecordsGroupedByDate.length>0)||!!(e.attendanceRecords&&e.attendanceRecords.length>0)).filter((e,t,n)=>t===n.findIndex(t=>t._id===e._id)),C=[...WM(j)].sort((e,t)=>{const n=e=>{let t=new Date(0);return e.records.forEach(e=>{e.checkIn&&new Date(e.checkIn)>t&&(t=new Date(e.checkIn)),e.checkOut&&new Date(e.checkOut)>t&&(t=new Date(e.checkOut))}),t},r=n(e);return n(t)-r}),B=(new Date).toISOString().split("T")[0],k=(C.filter(e=>e.date===B),C.filter(e=>e.date!==B)),S=[...new Set(k.map(e=>e.date))].sort((e,t)=>new Date(t)-new Date(e)),_=S.length>a;return o?(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg flex flex-col items-center justify-center h-64",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-16 h-16 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-10 h-10"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading attendance data..."})]}):c?(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg flex flex-col items-center justify-center h-64",children:[(0,Ns.jsxs)("div",{className:"text-red-500 font-medium mb-4",children:["Error: ",c]}),(0,Ns.jsx)("button",{onClick:N,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Retry"})]}):(0,Ns.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-lg space-y-6",children:[(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[(0,Ns.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Attendance Tracker"}),(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 w-full sm:w-auto",children:[(0,Ns.jsx)("button",{onClick:()=>f(!0),className:"bg-primary text-white font-semibold py-2 px-4 rounded-lg hover:bg-primary-dark transition-colors text-sm sm:text-base",children:"RFID"}),(0,Ns.jsx)("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base",children:"Face Attendance"}),(0,Ns.jsx)("button",{onClick:()=>{const e=[];n.forEach(t=>{const n=[...t.records].sort((e,t)=>new Date(e.checkIn)-new Date(t.checkIn)),r=n.filter(e=>e.checkIn).map(e=>{const n=new Date(t.date);return VM(e,n)?{time:HM(e.checkIn),isMissedPunchOut:!0,checkOutTime:HM(e.checkOut)}:{time:HM(e.checkIn),isMissedPunchOut:!1}}),s=n.filter(e=>e.checkOut).map(e=>{const n=new Date(t.date);return VM(e,n)?{time:HM(e.checkOut),isMissedPunchOut:!0}:{time:HM(e.checkOut),isMissedPunchOut:!1}});let a=0;n.forEach(e=>{if(e.checkIn&&e.checkOut){const t=new Date(e.checkIn),n=new Date(e.checkOut);a+=n-t}});const i=Math.floor(a/1e3),o=Math.floor(i/3600).toString().padStart(2,"0"),l=Math.floor(i%3600/60).toString().padStart(2,"0"),c=(i%60).toString().padStart(2,"0"),d="".concat(o,".").concat(l,".").concat(c),u=Math.max(r.length,s.length);for(let h=0;h<u;h++)e.push({"Employee Name":t.worker.name,"RF ID":t.worker.rfid||"N/A",Date:t.date,"Punch In":r[h]?r[h].time:"--:--","Punch Out":s[h]?s[h].time:"--:--","Total Duration":d})});const t=iF.json_to_sheet(e),r=iF.book_new();iF.book_append_sheet(r,t,"Attendance Report"),qE(r,"attendance_report.xlsx")},className:"bg-green-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-700 transition-colors text-sm sm:text-base",children:"Download"})]})]}),(0,Ns.jsx)(hw,{isOpen:A,onClose:()=>f(!1),title:"RFID Attendance",children:(0,Ns.jsx)(MM,{onAttendanceRecorded:e=>{N()}})}),(0,Ns.jsx)(hw,{isOpen:p,onClose:()=>m(!1),title:"Face Attendance",children:(0,Ns.jsx)(QM,{onAttendanceRecorded:e=>{N()}})}),(0,Ns.jsx)(hw,{isOpen:g,onClose:()=>{x(!1),b(null),w("")},title:"Correct Missing Punch Out",children:(0,Ns.jsxs)("div",{className:"p-4",children:[v&&(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsxs)("p",{className:"font-semibold text-sm sm:text-base",children:["Worker: ",v.worker.name]}),(0,Ns.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Missing Punch In: ",HM(v.incompleteRecord.checkIn)]})]}),(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Punch Out Time"}),(0,Ns.jsx)("input",{type:"datetime-local",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",value:y,onChange:e=>w(e.target.value)})]}),(0,Ns.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2",children:[(0,Ns.jsx)("button",{onClick:()=>{x(!1),b(null),w("")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 text-sm",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:async()=>{if(v&&y)try{await ws.post("/shop/attendance/correct-missing-punch",{workerId:v.worker._id,checkOutTime:y},{withCredentials:!0});alert("Missing punch corrected successfully"),x(!1),w(""),b(null),N()}catch(n){var e,t;console.error("Error correcting missing punch:",n),alert("Failed to correct missing punch: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Server error"))}else alert("Please select a worker and enter a punch out time")},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm",children:"Correct Punch"})]})]})}),(0,Ns.jsx)("div",{className:"relative w-full sm:w-1/3 mb-6",children:(0,Ns.jsx)("input",{type:"text",placeholder:"Search by staff name or ID...",className:"w-full pl-10 pr-4 py-2 border border-medium-gray rounded-lg text-sm",value:u,onChange:e=>h(e.target.value)})}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white rounded-lg shadow-md",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee Name"}),(0,Ns.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RF ID"}),(0,Ns.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Ns.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Punch In"}),(0,Ns.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Punch Out"}),(0,Ns.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Duration"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((e,t)=>{const n=[...e.records].sort((e,t)=>new Date(e.checkIn)-new Date(t.checkIn)),r=n.filter(e=>e.checkIn).map(t=>{const n=new Date(e.date);return VM(t,n)?{time:HM(t.checkIn),isMissedPunchOut:!0,checkOutTime:HM(t.checkOut)}:{time:HM(t.checkIn),isMissedPunchOut:!1}}),s=n.filter(e=>e.checkOut).map(t=>{const n=new Date(e.date);return VM(t,n)?{time:HM(t.checkOut),isMissedPunchOut:!0}:{time:HM(t.checkOut),isMissedPunchOut:!1}});let a=0;n.forEach(e=>{if(e.checkIn&&e.checkOut){const t=new Date(e.checkIn),n=new Date(e.checkOut);a+=n-t}});const i=Math.floor(a/1e3),o=Math.floor(i/3600).toString().padStart(2,"0"),l=Math.floor(i%3600/60).toString().padStart(2,"0"),c=(i%60).toString().padStart(2,"0"),d="".concat(o,".").concat(l,".").concat(c),u=new Date(e.date),h=(((e,t)=>{const n=new Date(t);n.setDate(n.getDate()-1);const r=n.toISOString().split("T")[0];e.filter(e=>new Date(e.checkIn).toISOString().split("T")[0]===r).find(e=>!e.checkOut)})(e.records,u),"".concat(e.worker._id,"-").concat(e.date,"-").concat(Math.random().toString(36).substr(2,9)));return(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm font-medium text-gray-900",children:e.worker.name}),(0,Ns.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:e.worker.rfid||"N/A"}),(0,Ns.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:zM(e.date)}),(0,Ns.jsx)("td",{className:"px-4 sm:px-6 py-4 text-xs sm:text-sm",children:(0,Ns.jsx)("div",{className:"space-y-1",children:r.length>0?r.map((e,t)=>(0,Ns.jsx)("div",{className:"flex items-center",children:e.isMissedPunchOut?(0,Ns.jsxs)("span",{className:"text-xs sm:text-sm text-gray-400 flex items-center",children:[(0,Ns.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Ns.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.time]}):(0,Ns.jsx)("span",{className:"text-xs sm:text-sm text-green-500",children:e.time})},"in-".concat(t))):(0,Ns.jsx)("span",{className:"text-xs sm:text-sm text-green-500",children:"--:--"})})}),(0,Ns.jsx)("td",{className:"px-4 sm:px-6 py-4 text-xs sm:text-sm",children:(0,Ns.jsx)("div",{className:"space-y-1",children:s.length>0?s.map((e,t)=>(0,Ns.jsx)("div",{className:"flex items-center",children:e.isMissedPunchOut?(0,Ns.jsxs)("span",{className:"text-xs sm:text-sm text-gray-400 flex items-center",children:[(0,Ns.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Ns.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.time]}):(0,Ns.jsx)("span",{className:"text-xs sm:text-sm text-red-500",children:e.time})},"out-".concat(t))):(0,Ns.jsx)("span",{className:"text-xs sm:text-sm text-red-500",children:"--:--"})})}),(0,Ns.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:d})]},h)})})]})}),_&&(0,Ns.jsx)("div",{className:"flex justify-center mt-4",children:(0,Ns.jsx)("button",{onClick:()=>{i(e=>e+2)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Load More"})})]})};const GM=function(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(null),[a,i]=(0,r.useState)(new Set),[o,l]=(0,r.useState)({}),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)(!0),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[v,b]=(0,r.useState)(!1),[y,w]=(0,r.useState)([]),N=(0,r.useCallback)(async()=>{f(!0),d(""),h("");try{const e=await ws.get("/shop/invoices/all");t(e.data||[])}catch(e){d("Failed to fetch invoices. Please try again later."),console.error(e)}finally{f(!1)}},[]);(0,r.useEffect)(()=>{N()},[N]);const j=()=>{x(!1),s(null),i(new Set),l({}),d(""),h("")},C=()=>{if(a.size===n.items.length)i(new Set);else{const e=new Set(n.items.map(e=>e.product));i(e)}},B=e=>{i(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},k=(e,t)=>{l(n=>(0,$n.A)((0,$n.A)({},n),{},{[e]:t}))},S=async()=>{if(0===a.size&&"Pending"===n.status)return void d("You must select at least one item to confirm.");const e=n.items.filter(e=>a.has(e.product)).map(e=>{const t=o[e.product]||e.receivedQuantity||0;return(0,$n.A)((0,$n.A)({},e),{},{receivedQuantity:t})});w(e),b(!0)},_=()=>{(async()=>{m(!0),d(""),h(""),b(!1),w([]);try{const e={confirmedItems:Array.from(a),receivedQuantities:o},t=await ws.post("/shop/invoices/".concat(n._id,"/confirm"),e);h(t.data.message),setTimeout(()=>{N(),j()},1500)}catch(r){var e,t;d((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to confirm the invoice."),console.error(r)}finally{m(!1)}})()},E=()=>{b(!1),w([])},F=e=>{const t=new Date(e);return{date:t.toLocaleDateString(),time:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}},T=e=>"Pending"===e?(0,Ns.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,Ns.jsx)(qe,{className:"mr-1 h-3 w-3"}),"Pending"]}):"Partial"===e?(0,Ns.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[(0,Ns.jsx)(Ct,{className:"mr-1 h-3 w-3"}),"Partial"]}):"Confirmed"===e?(0,Ns.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,Ns.jsx)(He,{className:"mr-1 h-3 w-3"}),"Confirmed"]}):(0,Ns.jsx)("span",{className:"text-gray-500",children:e});if(A)return(0,Ns.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Loading invoices..."});if(g&&n){var I;const e=n.items.filter(e=>e.shopConfirmed&&e.receivedQuantity===e.quantity),t=n.items.filter(e=>e.shopConfirmed&&e.receivedQuantity!==e.quantity),r=n.items.filter(e=>!e.shopConfirmed),s=e.length>0,i=t.length>0,l=r.length>0;return(0,Ns.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-md",children:[(0,Ns.jsx)(hw,{isOpen:v,onClose:E,title:"Confirm Invoice Submission",children:(0,Ns.jsxs)("div",{className:"p-4",children:[(0,Ns.jsx)("p",{className:"text-gray-700 mb-4",children:"You are about to confirm the following pending product(s):"}),(0,Ns.jsx)("ul",{className:"mb-4 text-gray-700",children:y.map((e,t)=>(0,Ns.jsx)("li",{className:"mb-2 p-2 bg-yellow-50 rounded",children:(0,Ns.jsxs)("div",{className:"font-medium",children:[e.productName," \u2014 Quantity: ",e.quantity," | Received: ",e.receivedQuantity||0]})},t))}),(0,Ns.jsx)("p",{className:"text-gray-700 mb-4",children:"Do you want to confirm this pending product?"}),(0,Ns.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Ns.jsx)("button",{onClick:E,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:_,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark",children:"Confirm"})]})]})}),(0,Ns.jsx)("button",{onClick:j,className:"mb-4 text-blue-600 hover:text-blue-800 flex items-center",children:"\u2190 Back to Invoice List"}),(0,Ns.jsxs)("div",{className:"flex items-center justify-between mb-4 border-b pb-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Pending"===n.status?"Review Incoming Invoice":"Invoice Details"}),(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"Pending"===n.status?"Confirm the items you have received from the admin.":"Partial"===n.status?"This invoice has been partially confirmed. You can confirm additional items.":"This invoice has been fully confirmed."})]}),(0,Ns.jsx)($e,{className:"text-3xl text-primary"})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Invoice Number"}),(0,Ns.jsx)("p",{className:"font-semibold text-gray-800",children:n.invoiceNumber})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Issue Date"}),(0,Ns.jsx)("p",{className:"font-semibold text-gray-800",children:F(n.issueDate).date})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"From (Admin)"}),(0,Ns.jsx)("p",{className:"font-semibold text-gray-800",children:(null===(I=n.admin)||void 0===I?void 0:I.name)||"N/A"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Status"}),T(n.status)]})]}),("Confirmed"===n.status||"Partial"===n.status)&&(0,Ns.jsxs)("div",{className:"space-y-8",children:[s&&(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h4",{className:"text-lg font-semibold text-gray-700 mb-3 pb-2 border-b border-green-200",children:"\u2705 Received Products"}),(0,Ns.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-green-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Received Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,Ns.jsxs)("tr",{className:"hover:bg-green-50",children:[(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.receivedQuantity||"-"}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},"".concat(e.product,"-confirmed")))})]})})]}),i&&(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h4",{className:"text-lg font-semibold text-gray-700 mb-3 pb-2 border-b border-blue-200",children:"\ud83d\udccb Partial Products"}),(0,Ns.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-blue-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Received Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,Ns.jsxs)("tr",{className:"hover:bg-blue-50",children:[(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.receivedQuantity||"-"}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},"".concat(e.product,"-partial")))})]})})]}),l&&(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h4",{className:"text-lg font-semibold text-gray-700 mb-3 pb-2 border-b border-yellow-200",children:"\u23f3 Pending Products"}),(0,Ns.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-yellow-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase w-12",children:"Confirm"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Received Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(e=>(0,Ns.jsxs)("tr",{className:"hover:bg-yellow-50",children:[(0,Ns.jsx)("td",{className:"px-4 py-4",children:(0,Ns.jsx)("input",{type:"checkbox",checked:a.has(e.product),onChange:()=>B(e.product),className:"h-5 w-5 rounded border-gray-300 text-primary focus:ring-primary",disabled:"Confirmed"===n.status})}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center",children:(0,Ns.jsx)("input",{type:"text",min:"0",value:o[e.product]||"",onChange:t=>k(e.product,t.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-center",placeholder:"0",disabled:"Confirmed"===n.status})}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},"".concat(e.product,"-pending")))})]})}),(0,Ns.jsxs)("div",{className:"mt-6",children:[c&&(0,Ns.jsx)("p",{className:"mb-4 text-center text-red-600 bg-red-100 p-3 rounded-lg",children:c}),u&&(0,Ns.jsx)("p",{className:"mb-4 text-center text-green-600 bg-green-100 p-3 rounded-lg",children:u}),(0,Ns.jsxs)("button",{onClick:S,disabled:p||0===a.size,className:"w-full bg-primary hover:bg-primary-dark text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline flex items-center justify-center transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:[(0,Ns.jsx)(vt,{className:"mr-2"}),p?"Submitting...":"Confirm & Add ".concat(a.size," Item(s) to Inventory")]})]})]})]}),"Pending"===n.status&&(0,Ns.jsxs)("div",{className:"mt-6",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Ns.jsx)("h4",{className:"text-lg font-semibold text-gray-700",children:"Invoice Items"}),(0,Ns.jsx)("button",{onClick:C,className:"text-sm text-primary hover:text-primary-dark font-medium",children:a.size===n.items.length?"Deselect All":"Select All"})]}),(0,Ns.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase w-12",children:"Confirm"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Received Quantity"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Ns.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.items.map(e=>(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"px-4 py-4",children:(0,Ns.jsx)("input",{type:"checkbox",checked:a.has(e.product),onChange:()=>B(e.product),className:"h-5 w-5 rounded border-gray-300 text-primary focus:ring-primary"})}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Ns.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center",children:(0,Ns.jsx)("input",{type:"text",min:"0",value:o[e.product]||"",onChange:t=>k(e.product,t.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-center",placeholder:"0"})}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Ns.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},e.product))})]})})]}),(0,Ns.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Total Invoice Amount:"}),(0,Ns.jsxs)("span",{className:"font-semibold text-gray-800",children:["\u20b9",n.grandTotal.toFixed(2)]})]}),("Pending"===n.status||"Partial"===n.status)&&(0,Ns.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Selected Items Total:"}),(0,Ns.jsxs)("span",{className:"text-xl font-bold text-primary",children:["\u20b9",n.items.filter(e=>a.has(e.product)).reduce((e,t)=>e+t.totalPrice,0).toFixed(2)]})]})]}),"Pending"===n.status&&(0,Ns.jsxs)("div",{className:"mt-8",children:[c&&(0,Ns.jsx)("p",{className:"mb-4 text-center text-red-600 bg-red-100 p-3 rounded-lg",children:c}),u&&(0,Ns.jsx)("p",{className:"mb-4 text-center text-green-600 bg-green-100 p-3 rounded-lg",children:u}),(0,Ns.jsxs)("button",{onClick:S,disabled:p||0===a.size,className:"w-full bg-primary hover:bg-primary-dark text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline flex items-center justify-center transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:[(0,Ns.jsx)(vt,{className:"mr-2"}),p?"Submitting...":"Confirm & Add ".concat(a.size," Item(s) to Inventory")]})]})]})}return(0,Ns.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-md",children:[(0,Ns.jsxs)("div",{className:"flex items-center justify-between mb-6 border-b pb-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Invoice History"}),(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"View all invoices sent by admin with date and time."})]}),(0,Ns.jsx)($e,{className:"text-3xl text-primary"})]}),c&&(0,Ns.jsx)("div",{className:"mb-4 p-4 bg-red-100 text-red-800 rounded-lg",children:(0,Ns.jsx)("p",{children:c})}),u&&(0,Ns.jsx)("div",{className:"mb-4 p-4 bg-green-100 text-green-800 rounded-lg",children:(0,Ns.jsx)("p",{children:u})}),0===e.length?(0,Ns.jsxs)("div",{className:"text-center py-12",children:[(0,Ns.jsx)(st,{className:"mx-auto text-5xl text-gray-400 mb-4"}),(0,Ns.jsx)("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Invoices Found"}),(0,Ns.jsx)("p",{className:"text-gray-500",children:"There are no invoices from admin yet. When admin sends invoices, they will appear here."})]}):(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice #"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"From Admin"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var t;const{date:n,time:r}=F(e.issueDate);return(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.invoiceNumber}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("div",{className:"font-medium",children:n}),(0,Ns.jsx)("div",{className:"text-xs text-gray-500",children:r})]})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:(null===(t=e.admin)||void 0===t?void 0:t.name)||"N/A"}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:T(e.status)}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:["\u20b9",e.grandTotal.toFixed(2)]}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium space-x-2",children:[(0,Ns.jsxs)("button",{onClick:()=>(e=>{if(s(e),x(!0),"Pending"===e.status){const t=new Set(e.items.map(e=>e.product));i(t);const n={};e.items.forEach(e=>{n[e.product]=e.receivedQuantity||""}),l(n)}else{i(new Set);const t={};e.items.forEach(e=>{t[e.product]=e.receivedQuantity||""}),l(t)}})(e),className:"inline-flex items-center px-3 py-1.5 bg-blue-100 text-blue-700 text-sm font-medium rounded-md hover:bg-blue-200 transition-colors",children:[(0,Ns.jsx)(Ze,{className:"mr-1 h-4 w-4"}),"Partial"===e.status?"View Partial":"View"]}),(0,Ns.jsxs)("button",{onClick:()=>{var t,n,r,s,a;e?YF(e,{name:null===(t=e.shop)||void 0===t?void 0:t.name,address:null===(n=e.shop)||void 0===n?void 0:n.location,gstNumber:null===(r=e.shop)||void 0===r?void 0:r.gstNumber,fssaiNumber:null===(s=e.shop)||void 0===s?void 0:s.fssaiNumber,phone:null===(a=e.shop)||void 0===a?void 0:a.shopPhoneNumber}):console.error("No invoice data provided")},className:"inline-flex items-center px-3 py-1.5 bg-green-100 text-green-700 text-sm font-medium rounded-md hover:bg-green-200 transition-colors",children:[(0,Ns.jsx)(Ye,{className:"mr-1 h-4 w-4"}),"PDF"]})]})]},e._id)})})]})})]})},qM=()=>{const[e,t]=(0,r.useState)(()=>{const e=localStorage.getItem("keyboardShortcutsExpanded");return null===e||JSON.parse(e)});return(0,Ns.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,Ns.jsxs)("div",{className:"flex items-center justify-between cursor-pointer hover:bg-blue-100 rounded p-1 -m-1",onClick:()=>{const n=!e;t(n),localStorage.setItem("keyboardShortcutsExpanded",JSON.stringify(n))},children:[(0,Ns.jsxs)("h4",{className:"text-lg font-semibold text-blue-800 flex items-center",children:[(0,Ns.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ns.jsx)("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.68a1 1 0 011.414 0 1 1 0 010 1.414l-1.49 1.493a1 1 0 01-1.414 0 1 1 0 010-1.414l1.49-1.493zm-4.93 4.93a1 1 0 010 1.414l-1.49 1.493a1 1 0 01-1.414 0 1 1 0 010-1.414l1.49-1.493a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Keyboard Shortcuts Guide"]}),(0,Ns.jsx)("svg",{className:"w-5 h-5 text-blue-600 transform transition-transform ".concat(e?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e&&(0,Ns.jsxs)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Ctrl"}),(0,Ns.jsx)("span",{className:"text-gray-600",children:"+"}),(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded ml-2 mr-2 font-mono",children:"N"}),(0,Ns.jsx)("span",{className:"text-gray-700",children:"New Bill"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Ctrl"}),(0,Ns.jsx)("span",{className:"text-gray-600",children:"+"}),(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded ml-2 mr-2 font-mono",children:"F"}),(0,Ns.jsx)("span",{className:"text-gray-700",children:"Focus Search"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Alt"}),(0,Ns.jsx)("span",{className:"text-gray-600",children:"+"}),(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded ml-2 mr-2 font-mono",children:"D"}),(0,Ns.jsx)("span",{className:"text-gray-700",children:"Focus Discount"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Ctrl"}),(0,Ns.jsx)("span",{className:"text-gray-600",children:"+"}),(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded ml-2 mr-2 font-mono",children:"Enter"}),(0,Ns.jsx)("span",{className:"text-gray-700",children:"Submit Bill"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"F2"}),(0,Ns.jsx)("span",{className:"text-gray-700 ml-2",children:"Edit Quantity"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Ctrl"}),(0,Ns.jsx)("span",{className:"text-gray-600",children:"+"}),(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded ml-2 mr-2 font-mono",children:"D"}),(0,Ns.jsx)("span",{className:"text-gray-700",children:"Delete Last Item"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Tab"}),(0,Ns.jsx)("span",{className:"text-gray-700 ml-2",children:"Navigate Fields"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Esc"}),(0,Ns.jsx)("span",{className:"text-gray-700 ml-2",children:"Close Dropdowns"})]}),(0,Ns.jsxs)("div",{className:"flex items-center",children:[(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 font-mono",children:"Ctrl"}),(0,Ns.jsx)("span",{className:"text-gray-600",children:"+"}),(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded ml-2 mr-2 font-mono",children:"Alt"}),(0,Ns.jsx)("span",{className:"text-gray-600",children:"+"}),(0,Ns.jsx)("kbd",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded ml-2 mr-2 font-mono",children:"F"}),(0,Ns.jsx)("span",{className:"text-gray-700",children:"Focus Search"})]})]})]})};const XM=function(e){var t,n;let{baseUrl:s="/shop"}=e;const a=ee(),{enterFullScreenBill:i,exitFullScreenBill:o}=iT(),[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[h,A]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[x,v]=(0,r.useState)("All");(0,r.useEffect)(()=>(i(),()=>{o()}),[i,o]);const[b,y]=(0,r.useState)({product:null,unit:"",quantity:"",price:0,productName:"",sku:"",isDecimalAsGram:!1,rawInput:""}),[w,N]=(0,r.useState)([]),[j,C]=(0,r.useState)(0),[B,k]=(0,r.useState)("none"),[S,_]=(0,r.useState)(""),[E,F]=(0,r.useState)(0),[T,I]=(0,r.useState)(0),[D,L]=(0,r.useState)(0),[P,R]=(0,r.useState)(0),[U,O]=(0,r.useState)(0),[M,Q]=(0,r.useState)("Cash"),[H,z]=(0,r.useState)(""),[W,V]=(0,r.useState)(""),[K,G]=(0,r.useState)(""),[q,X]=(0,r.useState)(!0),[Y,J]=(0,r.useState)(!0),[Z,$]=(0,r.useState)(!1),[te,ne]=(0,r.useState)(!1),[re,se]=(0,r.useState)(!1),[ae,ie]=(0,r.useState)(!1),[oe,le]=(0,r.useState)(!1),[ce,de]=(0,r.useState)(null),[ue,he]=(0,r.useState)(0),Ae=(0,r.useRef)(null),fe=(0,r.useRef)(null),pe=(0,r.useRef)(null),me=(0,r.useRef)(null),ge=(0,r.useRef)(null),xe=(0,r.useRef)(null),ve=(0,r.useRef)(null),be=(0,r.useRef)(null),ye="".concat(s,"/products"),we=(0,r.useCallback)(async()=>{X(!0);try{const e=await ws.get(ye,{headers:{"Content-Type":"application/json"},withCredentials:!0});c(e.data)}catch(e){G("Failed to fetch products."),console.error(e)}finally{X(!1)}},[ye]);(0,r.useEffect)(()=>{(async()=>{X(!0);try{await we();const e=await ws.get("/shop/settings/gst");L(e.data.gstPercentage||0)}catch(e){G("Failed to fetch products or GST settings."),console.error(e)}finally{X(!1)}})()},[we]),(0,r.useEffect)(()=>{const e=w.reduce((e,t)=>e+t.quantity*t.price,0);C(e);let t=0;if("percentage"===B&&S){const n=parseFloat(S);!isNaN(n)&&n>=0&&n<=100&&(t=e*n/100)}else if("cash"===B&&S){const n=parseFloat(S);!isNaN(n)&&n>=0&&n<=e&&(t=n)}F(t);const n=e-t;if(I(n),D>0){R(n-n/(1+D/100)),O(n)}else R(0),O(n)},[w,B,S,D]),(0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&(ne(!1),se(!1))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]);const[Ne,je]=(0,r.useState)(-1);(0,r.useEffect)(()=>{te&&d.length>0?je(0):je(-1)},[te,d]);const Ce=e=>{if(e.stockLevel<=0)return de(e),he(e.stockLevel),se(!1),void setTimeout(()=>{ie(!0)},100);if(p("".concat(e.name," (").concat(e.sku,")")),se(!1),ne(!1),g(""),v("All"),e.prices&&e.prices.length>0){var t;const n=rT(e.prices);y({product:e,unit:n[0],quantity:"",price:(null===(t=e.prices.find(e=>e.unit===n[0]))||void 0===t?void 0:t.sellingPrice)||e.prices[0].sellingPrice,productName:e.name,sku:e.sku}),G("")}else G('Product "'.concat(e.name,'" has no purchase rates set. Please add them first.')),y({product:null,unit:"",quantity:"",price:0,productName:"",sku:""})},Be=()=>{let e,t=!1;if(b.isDecimalAsGram&&"number"===typeof b.quantity&&""!==b.quantity)e=parseFloat(b.quantity),t=!0;else if(b.rawInput&&""!==b.rawInput){const n=parseFloat(b.rawInput);!isNaN(n)&&isFinite(n)&&n>=0&&(e=n,t=!0)}else if(""!==b.quantity){const n=parseFloat(b.quantity);!isNaN(n)&&isFinite(n)&&n>=0&&(e=n,t=!0)}if(!t)return void G("Please enter a valid quantity number.");if(!b.product||e<=0)return void G("Please select a valid product and quantity.");let n=b.price;if(b.product.prices&&b.product.prices.length>0){const e=b.product.prices[0].unit;if(b.unit!==e&&nT(b.unit,e)){const t=tT(1,b.unit,e);n=b.price*t}}const r={product:b.product._id,productName:b.productName,sku:b.sku,unit:b.unit,quantity:e,price:n,baseUnitPrice:b.price,baseUnit:b.product.prices[0].unit},s=w.findIndex(e=>e.product===r.product&&e.unit===r.unit);if(s>-1){const e=[...w];e[s].quantity+=r.quantity,N(e)}else N([...w,r]);p(""),y({product:null,unit:"",quantity:"",price:0,productName:"",sku:"",isDecimalAsGram:!1,rawInput:""}),G("")},ke=e=>{const t=w.filter((t,n)=>n!==e);N(t)},Se=async e=>{if(e.preventDefault(),V(""),G(""),!h)return void G("Please enter customer mobile number.");if(0===w.length)return void G("Please add at least one item to the bill.");if("none"!==B&&S){const e=parseFloat(S);if(isNaN(e))return void G("Please enter a valid discount value.");if("percentage"===B&&(e<0||e>100))return void G("Percentage discount must be between 0 and 100.");if("cash"===B&&(e<0||e>j))return void G("Cash discount cannot be negative or exceed subtotal.")}const t=Number(H);if(t<U)return void G("Amount paid cannot be less than total amount.");const n="".concat(s,"/billing");try{const e={customerMobileNumber:h,items:w,baseAmount:D>0?T/(1+D/100):T,gstPercentage:D,gstAmount:P,totalAmount:U,paymentMethod:M,amountPaid:t,discountType:B,discountValue:S?parseFloat(S):0,discountAmount:E},r=await ws.post(n,e,{headers:{"Content-Type":"application/json"},withCredentials:!0});V("Bill created successfully!"),Y&&YF(r.data,{name:r.data.shopName,address:r.data.shopAddress,gstNumber:r.data.shopGstNumber,fssaiNumber:r.data.shopFssaiNumber,phone:r.data.shopPhone}),Z&&JF(r.data,{name:r.data.shopName,address:r.data.shopAddress,gstNumber:r.data.shopGstNumber,fssaiNumber:r.data.shopFssaiNumber,phone:r.data.shopPhone}),A(""),N([]),C(0),k("none"),_(""),F(0),I(0),L(0),R(0),O(0),z(""),p(""),y({product:null,unit:"",quantity:"",price:0,productName:"",sku:""})}catch(i){var r,a;G((null===(r=i.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to create bill. Please try again."),console.error(i)}},_e=e=>{e&&"function"===typeof e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})};return(0,r.useEffect)(()=>{const e=e=>{if(e.ctrlKey&&"n"===e.key&&(e.preventDefault(),A(""),N([]),C(0),k("none"),_(""),F(0),I(0),L(0),R(0),O(0),z(""),p(""),y({product:null,unit:"",quantity:"",price:0,productName:"",sku:""}),V(""),G(""),Ae.current&&(Ae.current.focus(),_e(Ae.current))),e.ctrlKey&&"f"===e.key&&(e.preventDefault(),fe.current&&(fe.current.focus(),_e(fe.current))),e.altKey&&"d"===e.key&&(e.preventDefault(),me.current&&(me.current.focus(),_e(me.current))),e.ctrlKey&&"Enter"===e.key&&(e.preventDefault(),Se(e)),"F2"===e.key&&b.product&&(e.preventDefault(),pe.current&&(pe.current.focus(),pe.current.select(),_e(pe.current))),e.ctrlKey&&"d"===e.key&&(e.preventDefault(),w.length>0)){const e=w.length-1;ke(e)}e.ctrlKey&&e.altKey&&"F"===e.key&&(e.preventDefault(),fe.current&&(fe.current.focus(),fe.current.select(),_e(fe.current))),"Enter"===e.key&&f&&1===d.length&&(e.preventDefault(),Ce(d[0]),setTimeout(()=>{fe.current&&(fe.current.focus(),fe.current.select(),_e(fe.current))},10)),"Enter"===e.key&&b.product&&(""!==b.quantity||b.rawInput&&""!==b.rawInput)&&(e.preventDefault(),Be(),setTimeout(()=>{fe.current&&(fe.current.focus(),fe.current.select(),_e(fe.current))},10))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[b,f,d,w]),(0,r.useEffect)(()=>{const e=e=>{e.target&&e.target.scrollIntoView&&setTimeout(()=>{e.target.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},10)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]),q?(0,Ns.jsx)("div",{className:"p-6 text-center",children:"Loading data..."}):(0,Ns.jsxs)("div",{className:"bg-white h-screen flex flex-col",children:[(0,Ns.jsxs)("div",{className:"p-4 sm:p-6 border-b flex justify-between items-center",children:[(0,Ns.jsx)("h3",{className:"text-xl sm:text-2xl font-semibold text-text-primary",children:"Create Bill"}),(0,Ns.jsx)("button",{onClick:()=>a("/admin"===s?"/admin/bills/view":"/shop/billing/view"),className:"text-gray-500 hover:text-gray-700 text-2xl focus:outline-none","aria-label":"Close full screen bill",children:"\u2715"})]}),(0,Ns.jsxs)("div",{className:"flex-1 overflow-auto p-4 sm:p-6",children:[(0,Ns.jsx)(qM,{}),(0,Ns.jsx)(hw,{isOpen:ae,onClose:()=>ie(!1),title:"Out of Stock",children:(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"text-red-500 text-5xl mb-4",children:"\u26a0\ufe0f"}),(0,Ns.jsx)("p",{className:"text-lg mb-2",children:"Product is out of stock!"}),(0,Ns.jsxs)("p",{className:"text-gray-600 mb-4",children:[null===ce||void 0===ce?void 0:ce.name," (SKU: ",null===ce||void 0===ce?void 0:ce.sku,") is currently out of stock. Available quantity: ",ue]}),(0,Ns.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,Ns.jsx)("button",{onClick:()=>ie(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:()=>{ie(!1),le(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Continue Anyway"})]})]})}),(0,Ns.jsx)(hw,{isOpen:oe,onClose:()=>le(!1),title:"Confirm Out of Stock Product",children:(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"text-orange-500 text-5xl mb-4",children:"\u26a0\ufe0f"}),(0,Ns.jsx)("p",{className:"text-lg mb-2",children:"Are you sure?"}),(0,Ns.jsx)("p",{className:"text-gray-600 mb-4",children:"You are about to add an out-of-stock product to the bill:"}),(0,Ns.jsxs)("p",{className:"font-semibold mb-4",children:[null===ce||void 0===ce?void 0:ce.name," (SKU: ",null===ce||void 0===ce?void 0:ce.sku,")"]}),(0,Ns.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,Ns.jsx)("button",{onClick:()=>le(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"Cancel"}),(0,Ns.jsx)("button",{onClick:()=>{le(!1),ce&&(p("".concat(ce.name," (").concat(ce.sku,")")),se(!1),ne(!1),g(""),v("All"),ce.prices&&ce.prices.length>0?(y({product:ce,unit:ce.prices[0].unit,quantity:"",price:ce.prices[0].sellingPrice,productName:ce.name,sku:ce.sku}),G("")):(G('Product "'.concat(ce.name,'" has no purchase rates set. Please add them first.')),y({product:null,unit:"",quantity:"",price:0,productName:"",sku:""})))},className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Confirm & Add"})]})]})}),(0,Ns.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[(0,Ns.jsx)("h4",{className:"text-lg sm:text-xl font-medium text-gray-700 mb-3",children:"Customer Details"}),(0,Ns.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-text-secondary text-sm font-medium mb-1",htmlFor:"mobileNumber",children:"Customer Mobile Number"}),(0,Ns.jsx)("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75",id:"mobileNumber",ref:Ae,value:h,onChange:e=>A(e.target.value),required:!0,onKeyDown:e=>{"Tab"!==e.key||e.shiftKey||(e.preventDefault(),fe.current&&fe.current.focus())}})]})})]}),(0,Ns.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[(0,Ns.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Add Products"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,Ns.jsxs)("div",{className:"md:col-span-2",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Product"}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsxs)("div",{className:"flex",children:[(0,Ns.jsx)("input",{type:"text",value:f,onChange:e=>{const t=e.target.value;if(p(t),ne(!0),t){const e=l.filter(e=>e.name&&e.name.toLowerCase().includes(t.toLowerCase())||e.sku&&e.sku.toLowerCase().includes(t.toLowerCase()));u(e)}else u([]),ne(!1)},placeholder:"Search by name or SKU...",className:"w-full px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75",ref:fe,onFocus:()=>{},onKeyDown:e=>{if(te&&d.length>0)switch(e.key){case"ArrowDown":e.preventDefault(),je(e=>e<d.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),je(e=>e>0?e-1:d.length-1);break;case"Enter":e.preventDefault(),Ne>=0&&d[Ne]&&(Ce(d[Ne]),setTimeout(()=>{fe.current&&(fe.current.focus(),fe.current.select())},10));break;case"Escape":ne(!1),je(-1);break;default:-1===Ne&&d.length>0&&je(0)}if("Tab"===e.key&&!e.shiftKey){if(w.length>0&&""===f.trim())return e.preventDefault(),void(me.current&&(me.current.focus(),_e(me.current)));if(b.product)return e.preventDefault(),void(pe.current&&pe.current.focus())}},tabIndex:"0"}),(0,Ns.jsx)("button",{type:"button",className:"px-3 py-2 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md hover:bg-gray-200 focus:outline-none",onClick:()=>{se(!re),ne(!1),re||(g(""),v("All"))},children:(0,Ns.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,Ns.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),te&&d.length>0&&(0,Ns.jsx)("ul",{className:"absolute z-10 mt-1 max-h-40 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:d.map((e,t)=>{var n;return(0,Ns.jsxs)("li",{className:"relative cursor-default select-none py-2 pl-3 pr-9 ".concat(Ne===t?"bg-indigo-600 text-white":"hover:bg-indigo-600 hover:text-white"),onClick:()=>Ce(e),onMouseEnter:()=>je(t),children:[(0,Ns.jsxs)("div",{className:"flex justify-between",children:[(0,Ns.jsx)("span",{className:"font-normal truncate",children:e.name}),(0,Ns.jsxs)("span",{className:"ml-2 text-gray-500",children:["(",e.sku,")"]})]}),(0,Ns.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Qty: ",e.stockLevel," | Price: \u20b9",(null===(n=e.prices[0])||void 0===n?void 0:n.sellingPrice)||0]})]},"".concat(e._id,"-").concat(e.sku))})}),(te||re)&&(0,Ns.jsx)("div",{className:"fixed inset-0 z-0",onClick:()=>{ne(!1),se(!1)}}),re&&(0,Ns.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Ns.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,Ns.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,Ns.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:()=>se(!1)})}),(0,Ns.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,Ns.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full",children:(0,Ns.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,Ns.jsx)("div",{className:"sm:flex sm:items-start",children:(0,Ns.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Select Product"}),(0,Ns.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-500 focus:outline-none",onClick:()=>se(!1),children:(0,Ns.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Ns.jsxs)("div",{className:"mt-2 w-full",children:[(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[(0,Ns.jsx)("div",{className:"flex-1",children:(0,Ns.jsx)("input",{type:"text",placeholder:"Search products...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75",value:m,onChange:e=>g(e.target.value)})}),(0,Ns.jsx)("div",{className:"flex-1",children:(0,Ns.jsx)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75",value:x,onChange:e=>v(e.target.value),children:(e=>{const t=e.map(e=>{var t;return(null===(t=e.category)||void 0===t?void 0:t.name)||"Uncategorized"});return["All",...new Set(t)]})(l).map(e=>(0,Ns.jsx)("option",{value:e,children:e},e))})})]}),(0,Ns.jsx)("div",{className:"max-h-96 overflow-y-auto",children:(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l.filter(e=>{var t;const n=""===m||e.name&&e.name.toLowerCase().includes(m.toLowerCase())||e.sku&&e.sku.toLowerCase().includes(m.toLowerCase()),r=(null===(t=e.category)||void 0===t?void 0:t.name)||"Uncategorized";return n&&("All"===x||r===x)}).map(e=>{var t,n;return(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>Ce(e),children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.sku}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.stockLevel<=(e.stockAlertThreshold||0)?"bg-red-100 text-red-800":e.stockLevel<=2*(e.stockAlertThreshold||0)?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.stockLevel})}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-semibold",children:["\u20b9",(null===(t=e.prices[0])||void 0===t?void 0:t.sellingPrice)||0]}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(null===(n=e.category)||void 0===n?void 0:n.name)||"N/A"})]},e._id)})})]})})})]})]})})})})]})})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,Ns.jsx)("select",{value:b.unit,onChange:e=>{const t=e.target.value,n=b.product.prices.find(e=>e.unit===t);if(n)y(e=>(0,$n.A)((0,$n.A)({},e),{},{unit:n.unit,price:n.sellingPrice}));else{const e=b.product.prices[0];y(n=>(0,$n.A)((0,$n.A)({},n),{},{unit:t,price:e.sellingPrice}))}},disabled:!b.product,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75 disabled:bg-gray-200",onKeyDown:e=>{"Tab"!==e.key||e.shiftKey||(e.preventDefault(),pe.current&&pe.current.focus())},children:null===(t=rT((null===(n=b.product)||void 0===n?void 0:n.prices)||[]))||void 0===t?void 0:t.map(e=>(0,Ns.jsx)("option",{value:e,children:e},e))})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,Ns.jsx)("input",{type:"text",inputMode:"decimal",value:void 0!==b.rawInput&&""!==b.rawInput?b.rawInput:b.quantity,onChange:e=>{const t=e.target.value,n=parseFloat(t);if(""===t||"0."===t||"."===t||!isNaN(n)&&n>=0)if("0."===t||"."===t)y(e=>(0,$n.A)((0,$n.A)({},e),{},{quantity:"",rawInput:t,isDecimalAsGram:!1}));else if(""===t)y(e=>(0,$n.A)((0,$n.A)({},e),{},{quantity:"",rawInput:"",isDecimalAsGram:!1}));else if(!isNaN(n)&&n>=0)if(b.product&&b.product.prices&&b.product.prices.length>0&&"kg"===b.product.prices[0].unit&&n<1&&t.includes(".")&&n>0){var r,s;const e=1e3*n;y(n=>(0,$n.A)((0,$n.A)({},n),{},{quantity:e,rawInput:t,unit:"gram",isDecimalAsGram:!0}));const a=null===(r=b.product)||void 0===r||null===(s=r.prices)||void 0===s?void 0:s.find(e=>"gram"===e.unit);a&&y(e=>(0,$n.A)((0,$n.A)({},e),{},{price:a.sellingPrice}))}else y(e=>(0,$n.A)((0,$n.A)({},e),{},{quantity:n,rawInput:t,isDecimalAsGram:!1}))},disabled:!b.product,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75 disabled:bg-gray-200",min:"0",ref:pe,onKeyDown:e=>{if("Enter"===e.key&&b.product)e.preventDefault(),Be();else if("Tab"!==e.key||e.shiftKey)"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),fe.current&&fe.current.focus());else{e.preventDefault();const t=document.querySelector('button[type="button"][onClick*="handleAddItem"]');t&&t.focus()}}})]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),(0,Ns.jsx)("input",{type:"text",value:b.price,readOnly:!0,tabIndex:"-1",className:"mt-1 block w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm"})]}),(0,Ns.jsx)("div",{className:"md:col-span-2 flex items-end",children:(0,Ns.jsx)("button",{type:"button",onClick:Be,disabled:!b.product,className:"w-full px-4 py-2 bg-blue-600 text-white font-semibold rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75 disabled:bg-gray-400",onKeyDown:e=>{"Tab"!==e.key||e.shiftKey?"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),pe.current&&pe.current.focus()):(e.preventDefault(),me.current&&me.current.focus())},children:"Add Item"})})]}),K&&!K.includes("purchase rates")&&(0,Ns.jsx)("div",{className:"mt-2 text-red-500 text-sm",children:K})]}),w.length>0&&(0,Ns.jsx)("div",{className:"mt-6 overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Product"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"SKU"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Unit"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Quantity"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Price"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Total"}),(0,Ns.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map((e,t)=>(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.productName}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.sku}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.unit}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.quantity}),(0,Ns.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",e.baseUnitPrice.toFixed(2)]}),(0,Ns.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",(e.quantity*e.price).toFixed(2)]}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Ns.jsx)("button",{onClick:()=>ke(t),className:"text-red-600 hover:text-red-900",children:"Remove"})})]},t))})]})}),(0,Ns.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[(0,Ns.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Discount"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Type"}),(0,Ns.jsxs)("select",{value:B,onChange:e=>k(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75",ref:me,onKeyDown:e=>{if("Tab"!==e.key||e.shiftKey){if("Tab"===e.key&&e.shiftKey){e.preventDefault();const t=document.querySelector('button[onClick*="handleAddItem"]');t&&t.focus()}}else e.preventDefault(),"none"!==B?ge.current&&ge.current.focus():xe.current&&xe.current.focus()},children:[(0,Ns.jsx)("option",{value:"none",children:"No Discount"}),(0,Ns.jsx)("option",{value:"percentage",children:"Percentage (%)"}),(0,Ns.jsx)("option",{value:"cash",children:"Cash (\u20b9)"})]})]}),"none"!==B&&(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"percentage"===B?"Discount Percentage":"Discount Amount"}),(0,Ns.jsx)("input",{type:"text",value:S,onChange:e=>_(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus-visible:ring-4 focus-visible:ring-blue-500 focus-visible:ring-opacity-75",min:"0",step:"0.01",max:"percentage"===B?"100":j,ref:ge,onKeyDown:e=>{"Tab"!==e.key||e.shiftKey?"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),me.current&&me.current.focus()):(e.preventDefault(),xe.current&&xe.current.focus())}})]}),(0,Ns.jsx)("div",{className:"flex items-end",children:(0,Ns.jsx)("div",{className:"text-sm",children:(0,Ns.jsxs)("p",{className:"font-medium",children:["Discount Amount: \u20b9",E.toFixed(2)]})})})]})]}),(0,Ns.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[(0,Ns.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Bill Summary"}),(0,Ns.jsxs)("div",{className:"space-y-2",children:[(0,Ns.jsxs)("div",{className:"flex justify-between",children:[(0,Ns.jsx)("span",{children:"Subtotal:"}),(0,Ns.jsxs)("span",{children:["\u20b9",j.toFixed(2)]})]}),E>0&&(0,Ns.jsxs)("div",{className:"flex justify-between",children:[(0,Ns.jsx)("span",{children:"Discount:"}),(0,Ns.jsxs)("span",{children:["-\u20b9",E.toFixed(2)]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between",children:[(0,Ns.jsx)("span",{children:"Net Amount:"}),(0,Ns.jsxs)("span",{children:["\u20b9",T.toFixed(2)]})]}),D>0&&(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsxs)("div",{className:"flex justify-between",children:[(0,Ns.jsx)("span",{children:"Base Amount:"}),(0,Ns.jsxs)("span",{children:["\u20b9",(T/(1+D/100)).toFixed(2)]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between",children:[(0,Ns.jsxs)("span",{children:["GST (",D,"%):"]}),(0,Ns.jsxs)("span",{children:["\u20b9",P.toFixed(2)]})]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,Ns.jsx)("span",{children:"Total Amount:"}),(0,Ns.jsxs)("span",{children:["\u20b9",U.toFixed(2)]})]})]})]}),(0,Ns.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[(0,Ns.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Payment Details"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"paymentMethod",children:"Payment Method"}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsxs)("select",{id:"paymentMethod",value:M,onChange:e=>Q(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline pr-8",ref:xe,onKeyDown:e=>{"Tab"!==e.key||e.shiftKey?"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),"none"!==B?ge.current&&ge.current.focus():me.current&&me.current.focus()):(e.preventDefault(),ve.current&&ve.current.focus())},children:[(0,Ns.jsx)("option",{value:"Cash",children:"Cash"}),(0,Ns.jsx)("option",{value:"UPI",children:"UPI"}),(0,Ns.jsx)("option",{value:"Card",children:"Card"})]}),(0,Ns.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:(0,Ns.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,Ns.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"amountPaid",children:"Amount Paid"}),(0,Ns.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"amountPaid",value:H,onChange:e=>z(e.target.value),required:!0,ref:ve,onKeyDown:e=>{"Tab"!==e.key||e.shiftKey?"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),xe.current&&xe.current.focus()):(e.preventDefault(),be.current&&be.current.focus())}})]})]}),(0,Ns.jsxs)("div",{className:"flex justify-end items-center mt-4",children:[(0,Ns.jsx)("span",{className:"text-lg font-bold text-gray-800 mr-4",children:"Balance:"}),(0,Ns.jsxs)("span",{className:"text-lg font-bold text-red-600",children:["\u20b9",(U-Number(H)).toFixed(2)]})]})]}),(0,Ns.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[(0,Ns.jsx)("label",{htmlFor:"autoDownload",className:"text-gray-700 font-bold",children:"Auto Download Bill after Creation"}),(0,Ns.jsx)("input",{type:"checkbox",id:"autoDownload",checked:Y,onChange:e=>J(e.target.checked),className:"form-checkbox h-5 w-5 text-primary"})]}),(0,Ns.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[(0,Ns.jsx)("label",{htmlFor:"autoPrint",className:"text-gray-700 font-bold",children:"Auto Print Bill after Creation"}),(0,Ns.jsx)("input",{type:"checkbox",id:"autoPrint",checked:Z,onChange:e=>$(e.target.checked),className:"form-checkbox h-5 w-5 text-primary"})]}),(0,Ns.jsx)("button",{type:"submit",onClick:Se,className:"w-full bg-primary hover:bg-primary-dark text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:shadow-outline",ref:be,onKeyDown:e=>{"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),ve.current&&ve.current.focus())},children:"Create Bill"}),W&&(0,Ns.jsx)("p",{className:"mt-4 text-green-500",children:W}),K&&(0,Ns.jsx)("p",{className:"mt-4 text-red-500",children:K})]})]})},YM=e=>{var t,n,r,s,a,i;let{bill:o,onClose:l}=e;return o?(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Ns.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,Ns.jsxs)("div",{className:"p-6",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,Ns.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Bill Details"}),(0,Ns.jsx)("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Bill Information"}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Bill ID:"})," ",o.billId||o._id]}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Date:"})," ",new Date(o.billDate).toLocaleDateString()]}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Payment Method:"})," ",o.paymentMethod]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Customer Information"}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Name:"})," ",o.customerName]}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[(0,Ns.jsx)("span",{className:"font-medium",children:"Mobile:"})," ",o.customerMobileNumber]})]})]}),(0,Ns.jsxs)("div",{className:"mb-8",children:[(0,Ns.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Purchased Items"}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.items.map((e,t)=>{var n,r,s;return(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.productName||(e.product?e.product.name:"[Deleted Product]")}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.unit||(e.product?e.product.unit:"N/A")}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.quantity}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["\u20b9",(null===(n=e.price)||void 0===n?void 0:n.toFixed(2))||(null===(r=e.unitPrice)||void 0===r?void 0:r.toFixed(2))||"0.00"]}),(0,Ns.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["\u20b9",(null===(s=e.totalPrice)||void 0===s?void 0:s.toFixed(2))||((e.price||e.unitPrice||0)*e.quantity).toFixed(2)]})]},t)})})]})})]}),(0,Ns.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,Ns.jsx)("div",{className:"flex justify-end",children:(0,Ns.jsxs)("div",{className:"w-full max-w-xs",children:[o.gstPercentage>0?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Base Amount:"}),(0,Ns.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(t=o.baseAmount)||void 0===t?void 0:t.toFixed(2))||"0.00"]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Ns.jsxs)("span",{className:"text-gray-600",children:["GST (",o.gstPercentage,"%):"]}),(0,Ns.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(n=o.gstAmount)||void 0===n?void 0:n.toFixed(2))||"0.00"]})]}),(0,Ns.jsxs)("div",{className:"flex justify-between py-2 border-t border-gray-300 mt-2",children:[(0,Ns.jsx)("span",{className:"text-lg font-bold text-gray-800",children:"Total Amount:"}),(0,Ns.jsxs)("span",{className:"text-lg font-bold text-gray-800",children:["\u20b9",(null===(r=o.totalAmount)||void 0===r?void 0:r.toFixed(2))||"0.00"]})]})]}):(0,Ns.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Total Amount:"}),(0,Ns.jsxs)("span",{className:"text-lg font-bold text-gray-800",children:["\u20b9",(null===(s=o.totalAmount)||void 0===s?void 0:s.toFixed(2))||"0.00"]})]}),o.amountPaid>0&&(0,Ns.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Amount Paid:"}),(0,Ns.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(a=o.amountPaid)||void 0===a?void 0:a.toFixed(2))||"0.00"]})]}),o.balance>0&&(0,Ns.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Ns.jsx)("span",{className:"text-gray-600",children:"Balance:"}),(0,Ns.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(i=o.balance)||void 0===i?void 0:i.toFixed(2))||"0.00"]})]})]})})})]})})}):null};const JM=function(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)("All"),[A,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,x]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async()=>{try{const e=[...(await ws.get("/shop/billing",{headers:{"Content-Type":"application/json"},withCredentials:!0})).data].sort((e,t)=>{const n=e.billDate?new Date(e.billDate).getTime():1e3*parseInt(e._id.slice(0,8),16);return(t.billDate?new Date(t.billDate).getTime():1e3*parseInt(t._id.slice(0,8),16))-n});t(e)}catch(e){l("Failed to fetch bills."),console.error(e)}finally{i(!1)}})()},[]),(0,r.useEffect)(()=>{let t=[...e];if(c&&(t=t.filter(e=>e.customerName.toLowerCase().includes(c.toLowerCase())||e.customerMobileNumber.includes(c))),"All"!==u&&(t=t.filter(e=>e.paymentMethod===u)),A){const e=new Date(A).getTime();t=t.filter(t=>new Date(t.billDate).getTime()>=e)}if(p){const e=new Date(p).getTime();t=t.filter(t=>new Date(t.billDate).getTime()<=e+864e5)}s(t)},[e,c,u,A,p]),a?(0,Ns.jsx)("div",{className:"p-6 text-center",children:"Loading bills..."}):o?(0,Ns.jsx)("div",{className:"p-6 text-center text-red-500",children:o}):(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Ns.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800",children:"View Bills"}),(0,Ns.jsx)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Search"}),(0,Ns.jsx)("input",{type:"text",placeholder:"Search by name or number...",value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border rounded-lg"})]}),(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Payment Method"}),(0,Ns.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border rounded-lg",children:[(0,Ns.jsx)("option",{value:"All",children:"All"}),(0,Ns.jsx)("option",{value:"Cash",children:"Cash"}),(0,Ns.jsx)("option",{value:"UPI",children:"UPI"}),(0,Ns.jsx)("option",{value:"Card",children:"Card"})]})]}),(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"From Date"}),(0,Ns.jsx)("input",{type:"date",value:A,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 border rounded-lg"})]}),(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"To Date"}),(0,Ns.jsx)("input",{type:"date",value:p,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 border rounded-lg"})]})]})}),0===n.length?(0,Ns.jsx)("p",{children:"No bills found."}):(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bill ID"}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items Purchased"}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),(0,Ns.jsx)("td",{className:"hidden md:table-cell px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bill Date"}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>{var t;return(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.billId||e._id.slice(-6).toUpperCase()}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("div",{className:"font-medium text-gray-900",children:e.customerName}),(0,Ns.jsx)("div",{className:"text-gray-500",children:e.customerMobileNumber})]})}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 text-sm text-gray-500",children:(0,Ns.jsxs)("div",{className:"max-w-xs",children:[e.items.slice(0,2).map((e,t)=>(0,Ns.jsxs)("div",{className:"text-xs",children:[e.productName," x",e.quantity]},t)),e.items.length>2&&(0,Ns.jsxs)("div",{className:"text-xs text-gray-400",children:["+",e.items.length-2," more items"]})]})}),(0,Ns.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("div",{className:"font-medium text-gray-900",children:["\u20b9",(null===(t=e.totalAmount)||void 0===t?void 0:t.toFixed(2))||"0.00"]}),(0,Ns.jsx)("div",{className:"text-xs text-gray-500",children:e.paymentMethod})]})}),(0,Ns.jsx)("td",{className:"hidden md:table-cell px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.billDate?new Date(e.billDate).toLocaleDateString():"N/A"}),(0,Ns.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{x(e),b(!0)})(e),className:"text-blue-600 hover:text-blue-900 bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded-md transition-colors duration-200",children:"View"}),(0,Ns.jsx)("button",{onClick:()=>(e=>{var t,n,r,s,a;YF(e,{name:e.shopName||(null===(t=e.shop)||void 0===t?void 0:t.name),address:e.shopAddress||(null===(n=e.shop)||void 0===n?void 0:n.location),gstNumber:e.shopGstNumber||(null===(r=e.shop)||void 0===r?void 0:r.gstNumber),fssaiNumber:e.shopFssaiNumber||(null===(s=e.shop)||void 0===s?void 0:s.fssaiNumber),phone:e.shopPhone||(null===(a=e.shop)||void 0===a?void 0:a.shopPhoneNumber)})})(e),className:"text-indigo-600 hover:text-indigo-900 bg-indigo-100 hover:bg-indigo-200 px-3 py-1 rounded-md transition-colors duration-200",children:"Print"})]})]},e._id)})})]})}),v&&g&&(0,Ns.jsx)(YM,{bill:g,onClose:()=>b(!1)})]})},ZM=e=>{if(!e)return"--:--";const[t,n]=e.split(":");let r=parseInt(t,10);const s=r>=12?"PM":"AM";return r=r%12||12,"".concat(r,":").concat(n," ").concat(s)},$M=()=>{const[e,t]=(0,r.useState)(""),[n,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)([]),[u,h]=(0,r.useState)({name:"",workingHours:{from:"",to:"",included:!0},lunchBreak:{from:"",to:"",included:!0},breakTime:{from:"",to:"",included:!0}}),[A,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(null),[g,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/shop/settings/gst");t(e.data.gstPercentage||"")}catch(e){console.error("Error fetching GST settings:",e),i("Failed to load GST settings."),l("error")}})(),(async()=>{try{const e=await ws.get("/shop/settings/batches");d(e.data)}catch(e){console.error("Error fetching batch settings:",e)}})()},[]);const v=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;const n=parseFloat(e)||0;if(n<=0)return{baseAmount:t.toFixed(2),gstAmount:"0.00",totalAmount:t.toFixed(2)};const r=t/(1+n/100),s=t-r;return{baseAmount:r.toFixed(2),gstAmount:s.toFixed(2),totalAmount:t.toFixed(2)}}(100);return(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Shop Settings"}),(0,Ns.jsx)("p",{className:"text-gray-600 mb-8",children:"Configure shop-specific settings and preferences."}),a&&(0,Ns.jsx)("div",{className:"mb-6 p-4 rounded-lg ".concat("success"===o?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:a}),(0,Ns.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 mb-8",children:[(0,Ns.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"GST Management"}),(0,Ns.jsx)("p",{className:"text-gray-600 mb-6",children:"Configure GST settings for billing and invoices."}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Percentage"}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsx)("input",{type:"text",step:"0.01",min:"0",max:"100",value:e,onChange:e=>t(e.target.value),placeholder:"Enter GST percentage",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary"}),(0,Ns.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,Ns.jsx)("span",{className:"text-gray-500",children:"%"})})]}),(0,Ns.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Enter the GST percentage to be applied to all bills and invoices."})]}),(0,Ns.jsx)("div",{className:"flex items-end",children:(0,Ns.jsx)("button",{type:"button",onClick:async()=>{if(""===e||isNaN(e)||e<0)return i("Please enter a valid GST percentage."),void l("error");s(!0),i("");try{const t=await ws.post("/shop/settings/gst",{gstPercentage:e});i(t.data.message),l("success"),setTimeout(()=>{i("")},3e3)}catch(t){console.error("Error saving GST settings:",t),i("Failed to save GST settings. Please try again."),l("error")}finally{s(!1)}},disabled:n,className:"w-full bg-primary text-white py-2 px-4 rounded-md hover:bg-primary-dark transition duration-200 ".concat(n?"opacity-50 cursor-not-allowed":""),children:n?"Saving...":"Save GST Settings"})})]}),(0,Ns.jsxs)("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"GST Calculation Example"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Ns.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Base Amount"}),(0,Ns.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",v.baseAmount]})]}),(0,Ns.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,Ns.jsxs)("p",{className:"text-sm text-gray-600",children:["GST (",e||0,"%)"]}),(0,Ns.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",v.gstAmount]})]}),(0,Ns.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Total Amount"}),(0,Ns.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",v.totalAmount]})]})]}),(0,Ns.jsxs)("p",{className:"mt-3 text-sm text-gray-600",children:["When a ",e||0,"% GST is applied to a \u20b9100 bill, the calculation is shown above."]})]})]}),(0,Ns.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,Ns.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Batch Management"}),(0,Ns.jsx)("p",{className:"text-gray-600 mb-6",children:"Configure work batches with predefined working hours, lunch breaks, and break times."}),(0,Ns.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:A?"Edit Batch":"Add New Batch"}),(0,Ns.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch Name"}),(0,Ns.jsx)("input",{type:"text",value:u.name,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{name:e.target.value})),placeholder:"Enter batch name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary"})]})}),(0,Ns.jsxs)("div",{className:"mb-4 p-3 bg-white rounded border",children:[(0,Ns.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Working Hours"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"From"}),(0,Ns.jsx)("input",{type:"time",value:u.workingHours.from,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{workingHours:(0,$n.A)((0,$n.A)({},u.workingHours),{},{from:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"To"}),(0,Ns.jsx)("input",{type:"time",value:u.workingHours.to,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{workingHours:(0,$n.A)((0,$n.A)({},u.workingHours),{},{to:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Ns.jsx)("div",{className:"flex items-end",children:(0,Ns.jsxs)("label",{className:"flex items-center text-sm",children:[(0,Ns.jsx)("input",{type:"checkbox",checked:u.workingHours.included,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{workingHours:(0,$n.A)((0,$n.A)({},u.workingHours),{},{included:e.target.checked})})),className:"mr-2"}),"Included in work time"]})})]})]}),(0,Ns.jsxs)("div",{className:"mb-4 p-3 bg-white rounded border",children:[(0,Ns.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Lunch Break"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"From"}),(0,Ns.jsx)("input",{type:"time",value:u.lunchBreak.from,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{lunchBreak:(0,$n.A)((0,$n.A)({},u.lunchBreak),{},{from:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"To"}),(0,Ns.jsx)("input",{type:"time",value:u.lunchBreak.to,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{lunchBreak:(0,$n.A)((0,$n.A)({},u.lunchBreak),{},{to:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Ns.jsx)("div",{className:"flex items-end",children:(0,Ns.jsxs)("label",{className:"flex items-center text-sm",children:[(0,Ns.jsx)("input",{type:"checkbox",checked:u.lunchBreak.included,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{lunchBreak:(0,$n.A)((0,$n.A)({},u.lunchBreak),{},{included:e.target.checked})})),className:"mr-2"}),"Included in work time"]})})]})]}),(0,Ns.jsxs)("div",{className:"mb-4 p-3 bg-white rounded border",children:[(0,Ns.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Break Time"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"From"}),(0,Ns.jsx)("input",{type:"time",value:u.breakTime.from,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{breakTime:(0,$n.A)((0,$n.A)({},u.breakTime),{},{from:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"To"}),(0,Ns.jsx)("input",{type:"time",value:u.breakTime.to,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{breakTime:(0,$n.A)((0,$n.A)({},u.breakTime),{},{to:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Ns.jsx)("div",{className:"flex items-end",children:(0,Ns.jsxs)("label",{className:"flex items-center text-sm",children:[(0,Ns.jsx)("input",{type:"checkbox",checked:u.breakTime.included,onChange:e=>h((0,$n.A)((0,$n.A)({},u),{},{breakTime:(0,$n.A)((0,$n.A)({},u.breakTime),{},{included:e.target.checked})})),className:"mr-2"}),"Included in work time"]})})]})]}),(0,Ns.jsxs)("div",{className:"flex gap-2",children:[(0,Ns.jsx)("button",{type:"button",onClick:async()=>{if(!u.name)return i("Please enter a batch name."),void l("error");s(!0),i("");try{const e=A||Date.now().toString(),t=await ws.post("/shop/settings/batches",{batchId:e,name:u.name,workingHours:u.workingHours,lunchBreak:u.lunchBreak,breakTime:u.breakTime});i(t.data.message),l("success"),h({name:"",workingHours:{from:"",to:"",included:!0},lunchBreak:{from:"",to:"",included:!0},breakTime:{from:"",to:"",included:!0}}),f(null);const n=await ws.get("/shop/settings/batches");d(n.data),setTimeout(()=>{i("")},3e3)}catch(e){console.error("Error saving batch settings:",e),i("Failed to save batch settings. Please try again."),l("error")}finally{s(!1)}},disabled:n,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition duration-200 ".concat(n?"opacity-50 cursor-not-allowed":""),children:n?"Saving...":A?"Update Batch":"Add Batch"}),A&&(0,Ns.jsx)("button",{type:"button",onClick:()=>{h({name:"",workingHours:{from:"",to:"",included:!0},lunchBreak:{from:"",to:"",included:!0},breakTime:{from:"",to:"",included:!0}}),f(null)},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition duration-200",children:"Cancel"})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Existing Batches"}),0===c.length?(0,Ns.jsx)("p",{className:"text-gray-600 text-center py-4",children:"No batches configured yet."}):(0,Ns.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(e=>{var t,n,r,s,a,i,o,l,c,d,u;return(0,Ns.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,Ns.jsx)("h4",{className:"font-semibold text-gray-800",children:e.name}),(0,Ns.jsxs)("div",{className:"flex gap-2",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{h({name:e.name,workingHours:e.workingHours||{from:"",to:"",included:!0},lunchBreak:e.lunchBreak||{from:"",to:"",included:!0},breakTime:e.breakTime||{from:"",to:"",included:!0}}),f(e.id)})(e),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),(0,Ns.jsx)("button",{onClick:()=>(async e=>{x(e)})(e.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]}),(0,Ns.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"font-medium text-gray-700",children:"Working Hours"}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[null!==(t=e.workingHours)&&void 0!==t&&t.from?ZM(e.workingHours.from):"--:--"," -",null!==(n=e.workingHours)&&void 0!==n&&n.to?ZM(e.workingHours.to):"--:--",!(null!==(r=e.workingHours)&&void 0!==r&&r.included)&&" (Excluded)"]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"font-medium text-gray-700",children:"Lunch Break"}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[null!==(s=e.lunchBreak)&&void 0!==s&&s.from?ZM(e.lunchBreak.from):"--:--"," -",null!==(a=e.lunchBreak)&&void 0!==a&&a.to?ZM(e.lunchBreak.to):"--:--",void 0!==(null===(i=e.lunchBreak)||void 0===i?void 0:i.included)&&!(null!==(o=e.lunchBreak)&&void 0!==o&&o.included)&&" (Excluded)"]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"font-medium text-gray-700",children:"Break Time"}),(0,Ns.jsxs)("p",{className:"text-gray-600",children:[null!==(l=e.breakTime)&&void 0!==l&&l.from?ZM(e.breakTime.from):"--:--"," -",null!==(c=e.breakTime)&&void 0!==c&&c.to?ZM(e.breakTime.to):"--:--",void 0!==(null===(d=e.breakTime)||void 0===d?void 0:d.included)&&!(null!==(u=e.breakTime)&&void 0!==u&&u.included)&&" (Excluded)"]})]})]})]},e.id)})})]})]}),g&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Ns.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4",children:[(0,Ns.jsxs)("div",{className:"text-center",children:[(0,Ns.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,Ns.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,Ns.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mt-4",children:"Delete Batch"}),(0,Ns.jsx)("div",{className:"mt-2",children:(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this batch?"})})]}),(0,Ns.jsxs)("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense",children:[(0,Ns.jsx)("button",{type:"button",onClick:()=>(async e=>{try{const t=await ws.delete("/shop/settings/batches/".concat(e));i(t.data.message),l("success");const n=await ws.get("/shop/settings/batches");d(n.data),setTimeout(()=>{i("")},3e3)}catch(t){console.error("Error deleting batch:",t),t.response&&t.response.data&&t.response.data.message?i("Failed to delete batch: ".concat(t.response.data.message)):i("Failed to delete batch. Please try again."),l("error")}finally{x(null)}})(g),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:col-start-2 sm:text-sm",children:"Delete"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>{x(null)},className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm",children:"Cancel"})]})]})})]})},eQ=()=>{const e=J(),[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)(""),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[h,A]=(0,r.useState)({type:"",text:""}),[f,p]=(0,r.useState)(null),[m,g]=(0,r.useState)(!1),[x,v]=(0,r.useState)(""),[b,y]=(0,r.useState)({type:"info",text:"Ready to mark attendance..."}),[w,N]=(0,r.useState)(!1),[j,C]=(0,r.useState)(!1),[B,k]=(0,r.useState)(!0),S=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{try{console.log("Initializing face recognition service..."),await cw.initialize(),console.log("Face recognition service initialized successfully");const t=await ws.get("/shop/attendance/face-status");console.log("Service status response:",t.data),console.log("Service ready status:",t.data.serviceReady),p(t.data),t.data.serviceReady?(console.log("Service IS ready - showing success message"),A({type:"success",text:"Face recognition service ready!"})):(console.log("Service is NOT ready - showing error message"),A({type:"error",text:"Face recognition service is not available. Please use RFID attendance instead."}));const r=(await ws.get("/shop/workers")).data.filter(e=>!e.faceImages||0===e.faceImages.length);n(r);const s=new URLSearchParams(e.search).get("workerId");if(s){const e=r.find(e=>e._id===s);e&&(a(s),A({type:"info",text:"Setting up face enrollment for ".concat(e.name,". Please upload or capture images.")}))}}catch(t){console.error("Error fetching data:",t),A({type:"error",text:"Failed to initialize: ".concat(t.message)})}})()},[e.search]);const _=(0,r.useCallback)(async()=>{if(w||!S.current||!j||"success"===b.type)return;if(f&&!f.serviceReady)return void y({type:"error",text:"Face recognition service is not available."});const e=S.current.getScreenshot();if(e){N(!0),y({type:"info",text:"Recognizing face..."});try{await cw.initialize();const t=await cw.loadImageFromDataURL(e),n=await cw.recognizeFace(t);if(n.success){const e=await ws.post("/shop/attendance/recognize-face",{faceDescriptor:Array.from(n.descriptor||[]),workerId:n.workerId,confidence:n.confidence});y({type:"success",text:e.data.message}),k(!1)}else y({type:"error",text:"Face not recognized. Please enroll first or try again."})}catch(r){var t,n;console.error("Face recognition error:",r);let e="Face recognition failed.";r.message.includes("No face detected")?e="No face detected. Please position your face clearly in the camera.":r.message.includes("not recognized")?e="Face not recognized. Please enroll first or try again.":null!==(t=r.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.message&&(e=r.response.data.message),y({type:"error",text:e}),setTimeout(()=>{N(!1),"success"!==b.type&&y({type:"info",text:"Ready to scan again..."})},3e3)}}},[w,j,b.type,f]);(0,r.useEffect)(()=>{if(m&&j&&"success"!==b.type&&B){const e=setInterval(()=>{_()},3e3);return()=>clearInterval(e)}},[m,j,b.type,_,B]);const E=()=>{let e=(0,Ns.jsx)(lt,{className:"animate-spin text-4xl text-gray-500"}),t="border-gray-400";return j&&(w?(e=(0,Ns.jsx)(lt,{className:"animate-spin text-4xl text-blue-500"}),t="border-blue-500"):"success"===b.type?(e=(0,Ns.jsx)(Ke,{className:"text-4xl text-green-500"}),t="border-green-500"):"error"===b.type?(e=(0,Ns.jsx)(Ct,{className:"text-4xl text-red-500"}),t="border-red-500"):(e=(0,Ns.jsx)(Oe,{className:"text-4xl text-gray-500"}),t="border-gray-400")),{icon:e,color:t}};return(0,Ns.jsx)("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-lg",children:m?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Ns.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:["Mark Attendance - ",x]}),(0,Ns.jsxs)("button",{onClick:()=>{g(!1),v(""),c(!1),C(!1),y({type:"info",text:"Ready to mark attendance..."}),N(!1),k(!0),A({type:"",text:""})},className:"flex items-center px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:[(0,Ns.jsx)(De,{className:"mr-2"})," Back to Enrollment"]})]}),(0,Ns.jsx)("p",{className:"text-center text-gray-600 mb-6",children:"Enrollment successful! Now position your face in the camera frame to mark your attendance."}),(0,Ns.jsxs)("div",{className:"relative w-full aspect-square bg-gray-900 rounded-lg overflow-hidden border-4 ".concat(E().color," transition-colors duration-500 mb-6"),children:[(0,Ns.jsx)(Pa(),{audio:!1,ref:S,screenshotFormat:"image/jpeg",videoConstraints:{facingMode:"user",width:720,height:720},onUserMedia:()=>{C(!0),y({type:"info",text:"Ready to scan for attendance"})},className:"absolute top-0 left-0 w-full h-full object-cover"}),(0,Ns.jsx)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center pointer-events-none",children:(0,Ns.jsx)("div",{className:"w-3/4 h-3/4 border-4 border-dashed border-white rounded-full opacity-30"})})]}),(0,Ns.jsxs)("div",{className:"text-center p-4 rounded-lg bg-gray-50",children:[(0,Ns.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[E().icon,(0,Ns.jsx)("span",{className:"text-lg font-medium text-gray-700",children:b.text})]}),(0,Ns.jsx)("button",{onClick:_,disabled:w||!j||"success"===b.type,className:"w-full py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300",children:w?"Processing...":"Mark Attendance Now"}),(0,Ns.jsx)("div",{className:"mt-4 flex items-center justify-center space-x-4",children:(0,Ns.jsxs)("label",{className:"flex items-center",children:[(0,Ns.jsx)("input",{type:"checkbox",checked:B,onChange:e=>k(e.target.checked),className:"mr-2",disabled:"success"===b.type}),(0,Ns.jsx)("span",{className:"text-sm text-gray-600",children:"Auto-scan enabled"})]})})]})]}):(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Face Enrollment"}),f&&(0,Ns.jsxs)("div",{className:"mb-4 p-3 rounded-lg ".concat(f.serviceReady?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:[(0,Ns.jsx)("div",{className:"text-sm font-medium",children:f.serviceReady?"\u2705 React Face Recognition: Ready (High Accuracy)":"\u26a0\ufe0f Face Recognition Service: Unavailable"}),f.currentMode&&(0,Ns.jsxs)("div",{className:"text-xs mt-1",children:[(0,Ns.jsx)("strong",{children:"Current Mode:"})," ",f.currentMode]}),f.features&&f.serviceReady&&(0,Ns.jsxs)("div",{className:"text-xs mt-1 space-y-1",children:[(0,Ns.jsx)("div",{children:(0,Ns.jsx)("strong",{children:"Features:"})}),(0,Ns.jsxs)("ul",{className:"text-xs text-green-700 ml-4 space-y-1",children:[(0,Ns.jsx)("li",{children:"\u2022 Real-time face detection and recognition"}),(0,Ns.jsx)("li",{children:"\u2022 High accuracy with neural networks"}),(0,Ns.jsx)("li",{children:"\u2022 Works entirely in the browser"}),(0,Ns.jsx)("li",{children:"\u2022 No server dependencies required"})]})]})]}),h.text&&(0,Ns.jsx)("div",{className:"p-4 mb-4 rounded-lg ".concat("success"===h.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:h.text}),(0,Ns.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==f&&void 0!==f&&f.serviceReady)if(s&&0!==i.length){u(!0),A({type:"",text:""});try{var r;await cw.initialize();const e=[];for(const t of i)try{const n=await cw.loadImageFromDataURL(t.preview),r=await cw.detectFaceFromImage(n);r&&r.descriptor&&e.push(Array.from(r.descriptor))}catch(h){console.warn("Failed to detect face in one image:",h)}if(0===e.length)return A({type:"error",text:"No faces detected in the uploaded images. Please ensure faces are clearly visible."}),void u(!1);await cw.enrollFace(s,e.map(e=>new Float32Array(e)));const l=new FormData;l.append("workerId",s),l.append("faceDescriptors",JSON.stringify(e)),console.log("Sending enrollment data:",{workerId:s,faceDescriptorsCount:e.length,faceDescriptorsStringified:JSON.stringify(e),imageFilesCount:i.length}),i.forEach(e=>{l.append("faces",e.file)}),await ws.post("/shop/attendance/enroll-face",l);const d=t.find(e=>e._id===s);v((null===d||void 0===d?void 0:d.name)||"Worker"),A({type:"success",text:"".concat(null===d||void 0===d?void 0:d.name," enrolled successfully! Now mark attendance by looking at the camera.")}),g(!0),c(!0),y({type:"info",text:"Position your face in the camera to mark attendance..."}),a(""),o([]);const f=(await ws.get("/shop/workers")).data.filter(e=>!e.faceImages||0===e.faceImages.length);n(f),window.dispatchEvent(new CustomEvent("faceEnrollmentUpdated",{detail:{workerId:s,timestamp:Date.now()}})),window.dispatchEvent(new CustomEvent("faceEnrollmentCompleted",{detail:{workerId:s,workerName:s?null===(r=t.find(e=>e._id===s))||void 0===r?void 0:r.name:"Unknown",descriptorsCount:e.length,timestamp:Date.now()}}))}catch(p){var l,d;console.error("Error enrolling face:",p);const e=(null===(l=p.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||p.message||"An error occurred during enrollment.";A({type:"error",text:e})}finally{u(!1)}}else A({type:"error",text:"Please select a worker and provide at least one image."});else A({type:"error",text:"Face recognition service is not available."})},className:"space-y-6",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{htmlFor:"worker",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Worker"}),(0,Ns.jsxs)("select",{id:"worker",value:s,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",disabled:d,children:[(0,Ns.jsx)("option",{value:"",children:"-- Select a Worker --"}),t.map(e=>(0,Ns.jsxs)("option",{value:e._id,children:[e.name," (",e.username,")"]},e._id))]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ns.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[l?(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)(Pa(),{audio:!1,ref:S,screenshotFormat:"image/jpeg",className:"w-full rounded-md"}),(0,Ns.jsxs)("button",{type:"button",onClick:()=>{if(S.current&&i.length<5){const e=S.current.getScreenshot();if(e){const t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),s=new Uint8Array(r);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);const a=new Blob([r],{type:n}),i=new File([a],"capture-".concat(Date.now(),".jpeg"),{type:n});o(t=>[...t,{file:i,preview:e}])}}else A({type:"error",text:"You can only add up to 5 images."})},disabled:d||i.length>=5,className:"mt-4 w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[(0,Ns.jsx)(Oe,{className:"mr-2"})," Capture Image"]})]}):(0,Ns.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,Ns.jsx)(kt,{className:"text-4xl text-gray-400 mb-2"}),(0,Ns.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer text-sm font-medium text-red-600 hover:text-red-500",children:"Upload up to 5 images"}),(0,Ns.jsx)("input",{id:"file-upload",type:"file",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files){const t=Array.from(e.target.files).slice(0,5-i.length).map(e=>({file:e,preview:URL.createObjectURL(e)}));o(e=>[...e,...t])}},className:"sr-only",disabled:d||i.length>=5}),(0,Ns.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"or"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>c(!0),className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-500",children:"Use Camera"})]}),l&&(0,Ns.jsx)("button",{type:"button",onClick:()=>c(!1),className:"mt-2 text-sm text-gray-600 hover:text-gray-800",children:"Close Camera"})]}),(0,Ns.jsxs)("div",{className:"space-y-2",children:[(0,Ns.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["Image Previews (",i.length,"/5)"]}),i.length>0?(0,Ns.jsx)("div",{className:"grid grid-cols-3 gap-2",children:i.map((e,t)=>(0,Ns.jsxs)("div",{className:"relative group",children:[(0,Ns.jsx)("img",{src:e.preview,alt:"preview ".concat(t),className:"w-full h-24 object-cover rounded-md"}),(0,Ns.jsx)("button",{type:"button",onClick:()=>(e=>{o(i.filter((t,n)=>n!==e))})(t),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2715"})]},t))}):(0,Ns.jsx)("div",{className:"flex items-center justify-center h-full bg-gray-50 rounded-lg",children:(0,Ns.jsx)("p",{className:"text-sm text-gray-500",children:"No images selected"})})]})]}),(0,Ns.jsx)("div",{children:(0,Ns.jsx)("button",{type:"submit",disabled:d||!s||0===i.length||!(null!==f&&void 0!==f&&f.serviceReady),className:"w-full flex justify-center items-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-300",children:d?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Ns.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ns.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enrolling..."]}):(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(_t,{className:"mr-2"})," Enroll Worker"]})})})]})]})})},tQ=()=>{const e=ee(),[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(null),d=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(e);(0,r.useEffect)(()=>{(async()=>{try{a(!0);const e=await ws.get("/shop/expenses",{withCredentials:!0});n(e.data)}catch(e){console.error("Error fetching expenses:",e),o("Failed to fetch expenses")}finally{a(!1)}})()},[]);const u=e=>{alert("Downloading expense as PDF:\n".concat(e.category," - ").concat(d(e.amount),"\nThis feature will generate a PDF receipt in a future implementation."))},h=t.reduce((e,t)=>e+t.amount,0),A=t.filter(e=>{const t=new Date(e.date),n=new Date;return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}).reduce((e,t)=>e+t.amount,0),f=t.filter(e=>{const t=new Date(e.date),n=new Date,r=new Date(n);r.setDate(n.getDate()-n.getDay());const s=new Date(r);return s.setDate(r.getDate()+6),t>=r&&t<=s}).reduce((e,t)=>e+t.amount,0);new Set(t.map(e=>e.category));return(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Shop Expenses"}),(0,Ns.jsx)("p",{className:"text-gray-600",children:"Track and manage shop expenses"})]}),(0,Ns.jsxs)("div",{className:"flex gap-2",children:[(0,Ns.jsxs)("button",{onClick:()=>e("/shop/expenses/history"),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,Ns.jsx)(rt,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"History"})]}),(0,Ns.jsxs)("button",{onClick:()=>e("/shop/expenses/add"),className:"flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,Ns.jsx)(ft,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"Add Expense"})]})]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow",children:(0,Ns.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,Ns.jsx)(mt,{className:"text-gray-400"}),"Total Expenses"]}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:d(h)})]}),(0,Ns.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,Ns.jsx)(mt,{className:"text-red-600 text-xl"})})]})}),(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow",children:(0,Ns.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,Ns.jsx)(jt,{className:"text-gray-400"}),"This Month"]}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:d(A)})]}),(0,Ns.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,Ns.jsx)(jt,{className:"text-blue-600 text-xl"})})]})}),(0,Ns.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow",children:(0,Ns.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,Ns.jsx)(Ue,{className:"text-gray-400"}),"This Week"]}),(0,Ns.jsx)("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:d(f)})]}),(0,Ns.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,Ns.jsx)(Ue,{className:"text-green-600 text-xl"})})]})})]}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,Ns.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,Ns.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Recent Expenses"})}),(0,Ns.jsx)("div",{className:"p-6",children:s?(0,Ns.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading expenses..."})]}):i?(0,Ns.jsxs)("div",{className:"text-center py-12",children:[(0,Ns.jsx)("div",{className:"text-red-500 mb-4",children:i}),(0,Ns.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Retry"})]}):0===t.length?(0,Ns.jsxs)("div",{className:"text-center py-12",children:[(0,Ns.jsx)(mt,{className:"mx-auto text-gray-300 text-4xl mb-4"}),(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No expenses recorded yet"}),(0,Ns.jsx)("p",{className:"text-gray-500 mb-4",children:"Add your first expense to get started"}),(0,Ns.jsxs)("button",{onClick:()=>e("/shop/expenses/add"),className:"flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors mx-auto",children:[(0,Ns.jsx)(ft,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"Add Expense"})]})]}):(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Mode"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.slice(0,5).map(e=>{return(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(t=e.date,new Date(t).toLocaleDateString("en-IN"))}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.category})}),(0,Ns.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs",children:(0,Ns.jsx)("div",{className:"max-w-xs truncate",title:e.description||"-",children:e.description||"-"})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e.paymentMode||"-"})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.vendor||"-"}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:d(e.amount)}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Ns.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{c(e)})(e),className:"p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:(0,Ns.jsx)(Ze,{className:"h-5 w-5"})}),(0,Ns.jsx)("button",{onClick:()=>u(e),className:"p-2 text-green-600 hover:text-green-900 hover:bg-green-50 rounded-lg transition-colors",title:"Download PDF",children:(0,Ns.jsx)(Ye,{className:"h-5 w-5"})})]})})]},e._id);var t})})]})})})]}),l&&(0,Ns.jsx)(vM,{expense:l,onClose:()=>{c(null)},onDownload:u})]})},nQ=()=>{const e=ee(),[t,n]=(0,r.useState)({category:"",amount:"",description:"",date:"",vendor:"",paymentMode:""}),[s,a]=(0,r.useState)(""),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),d=e=>{const{name:t,value:r}=e.target;"category"===t?(n(e=>(0,$n.A)((0,$n.A)({},e),{},{[t]:r})),"Others"!==r&&a("")):n(e=>(0,$n.A)((0,$n.A)({},e),{},{[t]:r}))};return(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ns.jsx)("button",{onClick:()=>e("/shop/expenses"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",disabled:i,children:(0,Ns.jsx)(De,{className:"text-gray-600 text-xl"})}),(0,Ns.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Add New Expense"})]}),l&&(0,Ns.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,Ns.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,Ns.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Expense Details"})}),(0,Ns.jsxs)("form",{onSubmit:async n=>{n.preventDefault();const r="Others"===t.category?s:t.category;if(r&&t.amount&&t.date&&t.paymentMode){o(!0),c("");try{const n={category:r,amount:parseFloat(t.amount),description:t.description,date:t.date,vendor:t.vendor,paymentMode:t.paymentMode};201===(await ws.post("/shop/expenses",n,{headers:{"Content-Type":"application/json"},withCredentials:!0})).status&&e("/shop/expenses")}catch(l){var a,i;console.error("Error saving expense:",l),c((null===(a=l.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)||"Failed to save expense. Please try again.")}finally{o(!1)}}else c("Please fill in all required fields")},className:"p-6 space-y-6",children:[(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,Ns.jsxs)("select",{name:"category",value:t.category,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",required:!0,disabled:i,children:[(0,Ns.jsx)("option",{value:"",children:"Select Category"}),["Transport","Petrol / Diesel","Electricity","Raw Materials","Salary / Wages","Maintenance","Miscellaneous"].map(e=>(0,Ns.jsx)("option",{value:e,children:e},e)),(0,Ns.jsx)("option",{value:"Others",children:"Others"})]}),"Others"===t.category&&(0,Ns.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Custom Category *"}),(0,Ns.jsx)("input",{type:"text",name:"customCategory",value:s,onChange:e=>{const t=e.target.value;a(t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Enter custom category",required:!0,disabled:i}),(0,Ns.jsx)("p",{className:"text-xs text-gray-500",children:"Enter your custom expense category"})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount *"}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Ns.jsx)(at,{className:"text-gray-400"})}),(0,Ns.jsx)("input",{type:"textd",name:"amount",value:t.amount,onChange:d,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"0.00",required:!0,disabled:i,min:"0",step:"0.01"})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Ns.jsx)(Ue,{className:"text-gray-400"})}),(0,Ns.jsx)("input",{type:"date",name:"date",value:t.date,onChange:d,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",required:!0,disabled:i})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Mode *"}),(0,Ns.jsxs)("select",{name:"paymentMode",value:t.paymentMode,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",required:!0,disabled:i,children:[(0,Ns.jsx)("option",{value:"",children:"Select Payment Mode"}),["Cash","UPI","Bank Transfer"].map(e=>(0,Ns.jsx)("option",{value:e,children:e},e))]})]}),(0,Ns.jsxs)("div",{className:"md:col-span-2",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paid To / Vendor"}),(0,Ns.jsx)("input",{type:"text",name:"vendor",value:t.vendor,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Vendor or payee name",disabled:i})]}),(0,Ns.jsxs)("div",{className:"md:col-span-2",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description / Notes"}),(0,Ns.jsx)("textarea",{name:"description",value:t.description,onChange:d,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Add any notes or description about this expense",disabled:i})]})]}),(0,Ns.jsxs)("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-100",children:[(0,Ns.jsx)("button",{type:"button",onClick:()=>e("/shop/expenses"),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",disabled:i,children:"Cancel"}),(0,Ns.jsx)("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors disabled:opacity-50",disabled:i,children:i?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)("span",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),(0,Ns.jsx)("span",{children:"Saving..."})]}):(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)(ft,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"Add Expense"})]})})]})]})]})]})},rQ=()=>{const e=ee(),[t,n]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(null),[h,A]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[x,v]=(0,r.useState)(""),b=[...new Set(t.map(e=>e.category))],y=[...new Set(t.map(e=>e.paymentMode))],w=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(e),N=e=>new Date(e).toLocaleDateString("en-IN");(0,r.useEffect)(()=>{(async()=>{try{o(!0);const e=await ws.get("/shop/expenses",{withCredentials:!0});n(e.data),a(e.data)}catch(e){console.error("Error fetching expenses:",e),c("Failed to fetch expenses")}finally{o(!1)}})()},[]),(0,r.useEffect)(()=>{let e=[...t];h&&(e=e.filter(e=>e.category===h)),x&&(e=e.filter(e=>e.paymentMode===x)),f&&(e=e.filter(e=>new Date(e.date)>=new Date(f))),m&&(e=e.filter(e=>{const t=new Date(e.date),n=new Date(m);return n.setHours(23,59,59,999),t<=n})),a(e)},[h,f,m,x,t]);const j=()=>{A(""),p(""),g(""),v("")},C=e=>{xM(e)};return(0,Ns.jsxs)("div",{className:"space-y-6",children:[(0,Ns.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Ns.jsx)("button",{onClick:()=>e("/shop/expenses"),className:"p-3 rounded-xl hover:bg-gray-100 transition-colors shadow-sm hover:shadow-md",children:(0,Ns.jsx)(De,{className:"text-gray-600 text-xl"})}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Expense History"}),(0,Ns.jsx)("p",{className:"text-gray-600",children:"View and manage all expense records"})]})]}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[(0,Ns.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ns.jsx)(nt,{className:"text-blue-600 text-xl"}),(0,Ns.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Filter Expenses"})]}),(0,Ns.jsxs)("button",{onClick:j,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-lg transition-colors",children:[(0,Ns.jsx)(Ft,{className:"text-lg"}),(0,Ns.jsx)("span",{children:"Clear Filters"})]})]}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,Ns.jsxs)("select",{value:h,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[(0,Ns.jsx)("option",{value:"",children:"All Categories"}),b.map(e=>(0,Ns.jsx)("option",{value:e,children:e},e))]})]}),(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Mode"}),(0,Ns.jsxs)("select",{value:x,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[(0,Ns.jsx)("option",{value:"",children:"All Modes"}),y.map(e=>(0,Ns.jsx)("option",{value:e,children:e},e))]})]}),(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"From Date"}),(0,Ns.jsx)("input",{type:"date",value:f,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),(0,Ns.jsxs)("div",{className:"space-y-1",children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"To Date"}),(0,Ns.jsx)("input",{type:"date",value:m,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})]}),(f||m)&&(0,Ns.jsx)("div",{className:"mt-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 shadow-sm",children:(0,Ns.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Ns.jsxs)("div",{className:"flex-1",children:[(0,Ns.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Ns.jsx)(nt,{className:"text-blue-600"}),(0,Ns.jsx)("span",{className:"text-blue-800 font-semibold",children:"Filtered Report"})]}),(0,Ns.jsxs)("div",{className:"ml-6",children:[(0,Ns.jsx)("p",{className:"text-blue-700 text-sm",children:f&&m?"Period: ".concat(N(f)," to ").concat(N(m)):f?"From: ".concat(N(f)):"To: ".concat(N(m))}),(0,Ns.jsxs)("p",{className:"text-blue-800 font-bold text-lg",children:["Total: ",w(s.reduce((e,t)=>e+t.amount,0))]}),(0,Ns.jsxs)("p",{className:"text-blue-600 text-sm",children:[s.length," expense",1!==s.length?"s":""]})]})]}),(0,Ns.jsxs)("button",{onClick:()=>{f&&m&&wM(s,f,m)},disabled:!f||!m,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all ".concat(f&&m?"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white shadow-md hover:shadow-lg transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,Ns.jsx)(Ye,{className:"text-lg"}),(0,Ns.jsx)("span",{className:"font-medium",children:"Download Report"})]})]})})]}),(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,Ns.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,Ns.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:["All Expenses (",s.length,")"]})}),(0,Ns.jsx)("div",{className:"p-6",children:i?(0,Ns.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,Ns.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l?(0,Ns.jsxs)("div",{className:"text-center py-12",children:[(0,Ns.jsx)("div",{className:"text-red-500 mb-4 text-xl",children:"\u26a0\ufe0f"}),(0,Ns.jsx)("div",{className:"text-red-500 mb-4",children:l}),(0,Ns.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors shadow-md hover:shadow-lg",children:"Retry"})]}):0===s.length?(0,Ns.jsxs)("div",{className:"text-center py-12",children:[(0,Ns.jsx)(nt,{className:"mx-auto text-gray-300 text-5xl mb-4"}),(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No expenses found"}),(0,Ns.jsx)("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters"}),(0,Ns.jsx)("button",{onClick:j,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all shadow-md hover:shadow-lg",children:"Clear Filters"})]}):(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Ns.jsx)("thead",{className:"bg-gray-50",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Mode"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Ns.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>(0,Ns.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N(e.date)}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.category})}),(0,Ns.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs",children:(0,Ns.jsx)("div",{className:"max-w-xs truncate",title:e.description||"-",children:e.description||"-"})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Ns.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e.paymentMode})}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.vendor||"-"}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:w(e.amount)}),(0,Ns.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Ns.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Ns.jsx)("button",{onClick:()=>(e=>{const t=s.find(t=>t._id===e);t&&u(t)})(e._id),className:"p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:(0,Ns.jsx)(Ze,{className:"h-5 w-5"})}),(0,Ns.jsx)("button",{onClick:()=>C(e),className:"p-2 text-green-600 hover:text-green-900 hover:bg-green-50 rounded-lg transition-colors",title:"Download PDF",children:(0,Ns.jsx)(Ye,{className:"h-5 w-5"})})]})})]},e._id))})]})})})]}),d&&(0,Ns.jsx)(vM,{expense:d,onClose:()=>{u(null)},onDownload:C})]})},sQ=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)({}),[p,m]=(0,r.useState)([]),[g,x]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1),[y,w]=(0,r.useState)(null),[N,j]=(0,r.useState)(""),[C,B]=(0,r.useState)((new Date).getMonth()+1),[k,S]=(0,r.useState)((new Date).getFullYear()),[_,E]=(0,r.useState)(!1),[F,T]=(0,r.useState)(null),[I,D]=(0,r.useState)((new Date).getMonth()+1),[L,P]=(0,r.useState)((new Date).getFullYear()),[R,U]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{i(!0),l("");try{const e=await ws.get("/shop/workers");console.log("Workers data:",e.data),t(e.data),s(e.data)}catch(e){l("Failed to fetch data"),console.error(e)}finally{i(!1)}})()},[]),(0,r.useEffect)(()=>{const t=e.filter(e=>{var t;const n=e.name.toLowerCase().includes(u.toLowerCase()),r=e.rfid&&e.rfid.toLowerCase().includes(u.toLowerCase()),s=(null===(t=e.department)||void 0===t?void 0:t.name)&&e.department.name.toLowerCase().includes(u.toLowerCase());return n||r||s});s(t)},[u,e,A]);const O=e=>e.workingHours&&e.workingHours.from&&e.workingHours.to?"".concat(e.workingHours.from," - ").concat(e.workingHours.to):"N/A",M=async()=>{if(y&&N)try{await ws.post("/admin/incentives",{workerId:y._id,amount:parseFloat(N),month:C,year:k}),d("Incentive of \u20b9".concat(N," added for ").concat(y.name)),b(!1);const e=await ws.get("/shop/workers");t(e.data),s(e.data),setTimeout(()=>d(""),3e3)}catch(r){var e,n;l("Failed to add incentive: "+((null===(e=r.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||r.message)),console.error("Incentive error:",r)}},Q=async()=>{if(F){U(!0),l("");try{var e;new Date(L,I-1,1);const t=new Date(L,I,0).getDate(),n=[];let r=0,s=0,a=0,i=0,o=0,l=0,c=0;for(let e=1;e<=t;e++){const t=new Date(L,I-1,e),d=0===t.getDay(),u=Math.random()>.95;let h="Present";if(d?h="Sunday":u?h="Holiday":Math.random()>.9?h="Absent":Math.random()>.8&&(h="Permission"),"Present"===h){r++;const e="09:00 AM",s="06:00 PM",a=Math.random()>.7?"00:15":"-",i="-"!==a?"\u20b9".concat((50*Math.random()).toFixed(2)):"\u20b90.00";if(n.push({date:t.getDate(),status:h,inTime:e,outTime:s,delayTime:a,delayDeduction:i}),o+=8,"-"!==a){c+=parseFloat(i.replace("\u20b9",""))}}else if("Permission"===h){r++;const e="09:00 AM",s="03:00 PM",a=3,i="-",c="\u20b90.00";n.push({date:t.getDate(),status:h,inTime:e,outTime:s,delayTime:i,delayDeduction:c}),o+=8-a,l+=60*a}else"Absent"===h?(s++,n.push({date:t.getDate(),status:h,inTime:"Absent",outTime:"Absent",delayTime:"-",delayDeduction:"\u20b9333.33"}),c+=333.33):"Holiday"===h?(a++,n.push({date:t.getDate(),status:h,inTime:"-",outTime:"-",delayTime:"-",delayDeduction:"\u20b90.00"})):"Sunday"===h&&(i++,n.push({date:t.getDate(),status:h,inTime:"-",outTime:"-",delayTime:"-",delayDeduction:"\u20b90.00"}))}const d=parseFloat(F.salary)||0,u=t,h=r,A=25,f=d/A,p=f/480,m=s*(d/A),g=l*p,v=c+m+g,b=d-v,y=n.map(e=>{let t=0;if("Present"===e.status){const n=parseFloat(e.delayDeduction.replace("\u20b9",""))||0;t=f-n}else"Absent"===e.status?t=0:"Holiday"!==e.status&&"Sunday"!==e.status||(t=f);return(0,$n.A)((0,$n.A)({},e),{},{totalSalaryForDay:"\u20b9".concat(t.toFixed(2))})});x({worker:F,month:I,year:L,summary:{employeeId:(null===(e=F.user)||void 0===e?void 0:e.username)||"N/A",originalSalary:"\u20b9".concat(d.toFixed(2)),actualEarnedSalary:"\u20b9".concat(b.toFixed(2)),totalFinalSalary:"\u20b9".concat(b.toFixed(2)),totalDaysInPeriod:u,totalWorkingDays:r,totalAbsentDays:s,totalHolidays:a,totalSundays:i,actualWorkingDays:h,totalWorkingHours:o.toFixed(2),totalPermissionTime:l.toFixed(2),absentDeduction:"\u20b9".concat(m.toFixed(2)),permissionDeduction:"\u20b9".concat(g.toFixed(2)),totalDeductions:"\u20b9".concat(v.toFixed(2)),attendanceRate:"".concat((r/u*100).toFixed(2),"%"),perMinuteSalary:"\u20b9".concat(p.toFixed(4))},dailyData:y})}catch(t){l("Failed to generate salary report"),console.error("Salary report error:",t)}finally{U(!1)}}},H=()=>{alert("PDF download functionality would be implemented here")},z=e=>["January","February","March","April","May","June","July","August","September","October","November","December"][e-1]||"",W=e=>(parseFloat(e.salary)||0)+(e.currentMonthIncentives||0),V=()=>v?(0,Tt.createPortal)((0,Ns.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Ns.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:(0,Ns.jsxs)("div",{className:"p-6",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Add Incentive"}),(0,Ns.jsx)("button",{onClick:()=>b(!1),className:"text-gray-500 hover:text-gray-700",children:(0,Ns.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),y&&(0,Ns.jsx)("div",{className:"mb-4",children:(0,Ns.jsxs)("p",{className:"text-gray-700",children:["Adding incentive for: ",(0,Ns.jsx)("strong",{children:y.name})]})}),(0,Ns.jsxs)("div",{className:"mb-4",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Incentive Amount (\u20b9)"}),(0,Ns.jsx)("input",{type:"number",value:N,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter amount",min:"0",step:"0.01",autoFocus:!0})]}),(0,Ns.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Ns.jsx)("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none",children:"Cancel"}),(0,Ns.jsx)("button",{type:"button",onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none",children:"Add Incentive"})]})]})})}),document.body):null,K=()=>{var e;return _?(0,Tt.createPortal)((0,Ns.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Ns.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-screen overflow-y-auto",children:(0,Ns.jsxs)("div",{className:"p-6",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Ns.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Salary Report"}),(0,Ns.jsx)("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-gray-700",children:(0,Ns.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),F&&(0,Ns.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Employee"}),(0,Ns.jsx)("p",{className:"font-medium",children:F.name})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Period"}),(0,Ns.jsxs)("p",{className:"font-medium",children:[z(I)," ",L]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Employee ID"}),(0,Ns.jsx)("p",{className:"font-medium",children:(null===g||void 0===g||null===(e=g.summary)||void 0===e?void 0:e.employeeId)||"N/A"})]})]}),(0,Ns.jsxs)("div",{className:"mt-4 flex space-x-3",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Month"}),(0,Ns.jsx)("select",{value:I,onChange:e=>D(parseInt(e.target.value)),className:"px-3 py-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(e=>(0,Ns.jsx)("option",{value:e,children:z(e)},e))})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Year"}),(0,Ns.jsx)("select",{value:L,onChange:e=>P(parseInt(e.target.value)),className:"px-3 py-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[2022,2023,2024,2025,2026].map(e=>(0,Ns.jsx)("option",{value:e,children:e},e))})]}),(0,Ns.jsx)("div",{className:"self-end",children:(0,Ns.jsx)("button",{onClick:Q,className:"px-4 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none text-sm",children:"Generate"})})]})]}),R&&(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,Ns.jsx)("p",{className:"mt-2 text-gray-600",children:"Generating report..."})]}),g&&!R&&(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("div",{className:"mb-6",children:[(0,Ns.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Salary Summary"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Ns.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Original Salary"}),(0,Ns.jsx)("p",{className:"text-lg font-bold text-blue-700",children:g.summary.originalSalary})]}),(0,Ns.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Actual Earned"}),(0,Ns.jsx)("p",{className:"text-lg font-bold text-green-700",children:g.summary.actualEarnedSalary})]}),(0,Ns.jsxs)("div",{className:"p-3 bg-yellow-50 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Total Deductions"}),(0,Ns.jsx)("p",{className:"text-lg font-bold text-yellow-700",children:g.summary.totalDeductions})]}),(0,Ns.jsxs)("div",{className:"p-3 bg-purple-50 rounded-lg",children:[(0,Ns.jsx)("p",{className:"text-sm text-gray-600",children:"Attendance Rate"}),(0,Ns.jsx)("p",{className:"text-lg font-bold text-purple-700",children:g.summary.attendanceRate})]})]})]}),(0,Ns.jsxs)("div",{className:"mb-6",children:[(0,Ns.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Detailed Summary"}),(0,Ns.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-gray-600",children:"Total Days"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.totalDaysInPeriod})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-gray-600",children:"Working Days"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.totalWorkingDays})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-gray-600",children:"Absent Days"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.totalAbsentDays})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-gray-600",children:"Holidays"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.totalHolidays})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-gray-600",children:"Sundays"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.totalSundays})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-gray-600",children:"Working Hours"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.totalWorkingHours})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-gray-600",children:"Permission Time (min)"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.totalPermissionTime})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("p",{className:"text-gray-600",children:"Per Minute Salary"}),(0,Ns.jsx)("p",{className:"font-medium",children:g.summary.perMinuteSalary})]})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Ns.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Daily Attendance"}),(0,Ns.jsxs)("button",{onClick:H,className:"px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none text-sm flex items-center",children:[(0,Ns.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download PDF"]})]}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,Ns.jsx)("thead",{children:(0,Ns.jsxs)("tr",{className:"bg-gray-100",children:[(0,Ns.jsx)("th",{className:"px-4 py-2 border-b text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,Ns.jsx)("th",{className:"px-4 py-2 border-b text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,Ns.jsx)("th",{className:"px-4 py-2 border-b text-left text-xs font-medium text-gray-500 uppercase",children:"In Time"}),(0,Ns.jsx)("th",{className:"px-4 py-2 border-b text-left text-xs font-medium text-gray-500 uppercase",children:"Out Time"}),(0,Ns.jsx)("th",{className:"px-4 py-2 border-b text-left text-xs font-medium text-gray-500 uppercase",children:"Delay"}),(0,Ns.jsx)("th",{className:"px-4 py-2 border-b text-left text-xs font-medium text-gray-500 uppercase",children:"Deduction"}),(0,Ns.jsx)("th",{className:"px-4 py-2 border-b text-left text-xs font-medium text-gray-500 uppercase",children:"Salary"})]})}),(0,Ns.jsx)("tbody",{children:g.dailyData.map((e,t)=>(0,Ns.jsxs)("tr",{className:t%2===0?"bg-gray-50":"",children:[(0,Ns.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.date}),(0,Ns.jsx)("td",{className:"px-4 py-3 text-sm font-medium ".concat("Present"===e.status?"text-green-600":"Absent"===e.status?"text-red-600":"Holiday"===e.status||"Sunday"===e.status?"text-blue-600":"text-yellow-600"),children:e.status}),(0,Ns.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.inTime}),(0,Ns.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.outTime}),(0,Ns.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.delayTime}),(0,Ns.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.delayDeduction}),(0,Ns.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.totalSalaryForDay})]},t))})]})})]})]}),!R&&!g&&(0,Ns.jsx)("div",{className:"text-center py-4 text-gray-500",children:(0,Ns.jsx)("p",{children:"Select a worker and generate a report to view details."})})]})})}),document.body):null};return(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Ns.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Ns.jsx)("h3",{className:"text-2xl font-semibold text-gray-800",children:"Salary Report"})}),c&&(0,Ns.jsx)("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg",children:c}),o&&(0,Ns.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:o}),(0,Ns.jsx)("div",{className:"mb-6",children:(0,Ns.jsxs)("div",{className:"relative w-full sm:w-1/3",children:[(0,Ns.jsx)("input",{type:"text",placeholder:"Search workers...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:u,onChange:e=>h(e.target.value)}),(0,Ns.jsx)("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),a&&(0,Ns.jsxs)("div",{className:"text-center py-8",children:[(0,Ns.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,Ns.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading workers..."})]}),!a&&n.length>0&&(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,Ns.jsx)("thead",{children:(0,Ns.jsxs)("tr",{className:"bg-gray-100",children:[(0,Ns.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Name"}),(0,Ns.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Salary"}),(0,Ns.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Salary (This Month)"}),(0,Ns.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Working Hours"}),(0,Ns.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Employee ID"}),(0,Ns.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Department"}),(0,Ns.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Actions"})]})}),(0,Ns.jsx)("tbody",{children:n.map((e,t)=>{var n;return(0,Ns.jsxs)("tr",{className:t%2===0?"bg-gray-50":"",children:[(0,Ns.jsx)("td",{className:"py-3 px-4 border-b",children:e.name}),(0,Ns.jsxs)("td",{className:"py-3 px-4 border-b",children:["\u20b9",e.salary||0]}),(0,Ns.jsxs)("td",{className:"py-3 px-4 border-b",children:["\u20b9",W(e)]}),(0,Ns.jsx)("td",{className:"py-3 px-4 border-b",children:O(e)}),(0,Ns.jsx)("td",{className:"py-3 px-4 border-b",children:e.rfid||"N/A"}),(0,Ns.jsx)("td",{className:"py-3 px-4 border-b",children:(null===(n=e.department)||void 0===n?void 0:n.name)||"N/A"}),(0,Ns.jsx)("td",{className:"py-3 px-4 border-b",children:(0,Ns.jsxs)("div",{className:"flex space-x-2",children:[(0,Ns.jsxs)("button",{onClick:()=>(e=>{w(e),j(""),B((new Date).getMonth()+1),S((new Date).getFullYear()),b(!0)})(e),className:"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none text-sm flex items-center",title:"Add Incentive",children:[(0,Ns.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Incentive"]}),(0,Ns.jsxs)("button",{onClick:()=>(e=>{T(e),D((new Date).getMonth()+1),P((new Date).getFullYear()),x(null),E(!0),Promise.resolve().then(()=>{Q()})})(e),className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none text-sm flex items-center",title:"Generate Report",children:[(0,Ns.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Report"]})]})})]},e._id)})})]})}),!a&&0===n.length&&!o&&(0,Ns.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,Ns.jsx)("p",{children:"No workers found."})}),!a&&e.length>0&&0===n.length&&u&&(0,Ns.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,Ns.jsx)("p",{children:"No workers match your search criteria."})}),(0,Ns.jsx)(V,{}),(0,Ns.jsx)(K,{})]})},aQ=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[A,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(!0),[g,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{v()},[]);const v=async()=>{s(!0),i("");try{const e=await ws.get("/shop/holidays");t(e.data)}catch(e){i("Failed to fetch holidays"),console.error(e)}finally{s(!1)}};return(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Ns.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Ns.jsx)("h3",{className:"text-2xl font-semibold text-gray-800",children:"Holiday Management"})}),o&&(0,Ns.jsx)("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg",children:o}),a&&(0,Ns.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:a}),(0,Ns.jsxs)("div",{className:"mb-8 p-4 border rounded-lg bg-gray-50",children:[(0,Ns.jsx)("h4",{className:"text-lg font-medium text-gray-800 mb-4",children:g?"Edit Holiday":"Add New Holiday"}),(0,Ns.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i(""),l(""),c&&u)try{i("Shops cannot create or modify holidays. Please contact admin.")}catch(r){var t,n;i((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to save holiday"),console.error(r)}else i("Name and date are required")},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Holiday Name *"}),(0,Ns.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter holiday name",required:!0,readOnly:!0})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Date *"}),(0,Ns.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,readOnly:!0})]}),(0,Ns.jsxs)("div",{className:"md:col-span-2",children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),(0,Ns.jsx)("textarea",{value:A,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter holiday description (optional)",rows:"3",readOnly:!0})]}),(0,Ns.jsx)("div",{children:(0,Ns.jsxs)("label",{className:"flex items-center",children:[(0,Ns.jsx)("input",{type:"checkbox",checked:p,onChange:e=>m(e.target.checked),className:"rounded text-blue-600 focus:ring-blue-500",disabled:!0}),(0,Ns.jsx)("span",{className:"ml-2 text-gray-700",children:"Paid Holiday"})]})}),(0,Ns.jsxs)("div",{className:"flex space-x-3 md:col-span-2",children:[(0,Ns.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none",disabled:!0,children:g?"Update Holiday":"Add Holiday"}),g&&(0,Ns.jsx)("button",{type:"button",onClick:()=>{d(""),h(""),f(""),m(!0),x(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none",children:"Cancel"})]})]}),(0,Ns.jsx)("div",{className:"mt-4 p-3 bg-blue-50 text-blue-700 rounded-lg",children:(0,Ns.jsxs)("p",{className:"text-sm",children:[(0,Ns.jsx)("strong",{children:"Note:"})," Shops can only view holidays. To create or modify holidays, please contact your administrator."]})})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h4",{className:"text-lg font-medium text-gray-800 mb-4",children:"Existing Holidays"}),n&&(0,Ns.jsxs)("div",{className:"text-center py-4",children:[(0,Ns.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,Ns.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading holidays..."})]}),!n&&e.length>0&&(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,Ns.jsx)("thead",{children:(0,Ns.jsxs)("tr",{className:"bg-gray-100",children:[(0,Ns.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Name"}),(0,Ns.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Date"}),(0,Ns.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Description"}),(0,Ns.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Paid"})]})}),(0,Ns.jsx)("tbody",{children:e.map((e,t)=>{return(0,Ns.jsxs)("tr",{className:t%2===0?"bg-gray-50":"",children:[(0,Ns.jsx)("td",{className:"py-2 px-4 border-b",children:e.name}),(0,Ns.jsx)("td",{className:"py-2 px-4 border-b",children:(n=e.date,new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}))}),(0,Ns.jsx)("td",{className:"py-2 px-4 border-b",children:e.description||"-"}),(0,Ns.jsx)("td",{className:"py-2 px-4 border-b",children:(0,Ns.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(e.isPaid?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isPaid?"Yes":"No"})})]},e._id);var n})})]})}),!n&&0===e.length&&(0,Ns.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,Ns.jsx)("p",{children:"No holidays found. Add a new holiday to get started."})})]})]})},iQ=e=>{let{onReturnSuccess:t}=e;const[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)({productName:"",batchNumber:"",quantityReturned:"",reasonForReturn:"Damaged",source:"Shop",remarks:""}),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/shop/products",{headers:{"Content-Type":"application/json"},withCredentials:!0});s(e.data),l("")}catch(e){console.error("Failed to fetch products:",e),l("Failed to load products. Check your API connection.")}})()},[]);const A=e=>{const{name:t,value:n}=e.target;i(e=>(0,$n.A)((0,$n.A)({},e),{},{[t]:n}))};return(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md h-full",children:[(0,Ns.jsxs)("h3",{className:"text-xl font-semibold mb-4 flex items-center text-primary",children:[(0,Ns.jsx)(Te,{className:"mr-2"})," Return Product Form"]}),c&&(0,Ns.jsxs)("div",{className:"bg-green-100 text-green-700 p-3 rounded-md mb-4 flex items-center",children:[(0,Ns.jsx)(Ke,{className:"mr-2"}),c]}),o&&(0,Ns.jsxs)("div",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4 flex items-center",children:[(0,Ns.jsx)(Ft,{className:"mr-2"}),o]}),(0,Ns.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(""),d(""),h(!0);try{await ws.post("/shop/returns",a),d("Product return registered successfully!"),i({productName:"",batchNumber:"",quantityReturned:"",reasonForReturn:"Damaged",source:"Shop",remarks:""}),t()}catch(n){console.error("Failed to register return:",n),l("Failed to register return. Please try again.")}finally{h(!1)}},className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Product Name"}),(0,Ns.jsxs)("select",{name:"productName",value:a.productName,onChange:A,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50",children:[(0,Ns.jsx)("option",{value:"",children:"Select a product"}),n.map(e=>(0,Ns.jsx)("option",{value:e.name,children:e.name},e._id))]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Batch Number (Optional)"}),(0,Ns.jsx)("input",{type:"text",name:"batchNumber",value:a.batchNumber,onChange:A,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity Returned"}),(0,Ns.jsx)("input",{type:"number",name:"quantityReturned",value:a.quantityReturned,onChange:A,required:!0,min:"1",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50"})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Reason for Return"}),(0,Ns.jsxs)("select",{name:"reasonForReturn",value:a.reasonForReturn,onChange:A,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50",children:[(0,Ns.jsx)("option",{value:"Damaged",children:"Damaged"}),(0,Ns.jsx)("option",{value:"Expired",children:"Expired"}),(0,Ns.jsx)("option",{value:"Overproduction",children:"Overproduction"}),(0,Ns.jsx)("option",{value:"Customer Return",children:"Customer Return"})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Source"}),(0,Ns.jsxs)("select",{name:"source",value:a.source,onChange:A,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50",children:[(0,Ns.jsx)("option",{value:"Shop",children:"Shop"}),(0,Ns.jsx)("option",{value:"Customer",children:"Customer"}),(0,Ns.jsx)("option",{value:"Factory",children:"Factory"})]})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks (Optional)"}),(0,Ns.jsx)("textarea",{name:"remarks",value:a.remarks,onChange:A,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50"})]}),(0,Ns.jsx)("button",{type:"submit",disabled:u,className:"w-full py-2 px-4 rounded-md text-white font-semibold transition-colors ".concat(u?"bg-gray-400":"bg-primary hover:bg-opacity-90"),children:u?"Registering...":"Register Return"})]})]})},oQ=e=>{let{refresh:t}=e;const[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)("");return(0,r.useEffect)(()=>{(async()=>{try{const e=await ws.get("/shop/returns");s(e.data)}catch(e){l("Failed to fetch return history")}finally{i(!1)}})()},[t]),a?(0,Ns.jsxs)("div",{className:"p-6 text-center flex flex-col items-center justify-center",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-4",children:[(0,Ns.jsx)("div",{className:"w-12 h-12 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-8 h-8"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading..."})]}):(0,Ns.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[o&&(0,Ns.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:o}),(0,Ns.jsx)("div",{className:"overflow-x-auto",children:(0,Ns.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Ns.jsx)("thead",{className:"bg-gray-100",children:(0,Ns.jsxs)("tr",{children:[(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Return ID"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Product Name"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Quantity"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Reason"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Source"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Date"}),(0,Ns.jsx)("th",{className:"py-3 px-4 text-left",children:"Remarks"})]})}),(0,Ns.jsx)("tbody",{children:n.map(e=>(0,Ns.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.returnId}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.productName}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.quantityReturned}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.reasonForReturn}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.source}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:new Date(e.dateOfReturn).toLocaleDateString()}),(0,Ns.jsx)("td",{className:"border px-4 py-2",children:e.remarks||"-"})]},e._id))})]})})]})},lQ=()=>{const[e,t]=(0,r.useState)(!1),[n,s]=(0,r.useState)(!1);return(0,Ns.jsxs)("div",{className:"p-6 h-full flex flex-col",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Ns.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\ud83d\udce6 Return Products Module"}),(0,Ns.jsxs)("button",{onClick:()=>s(!0),className:"flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,Ns.jsx)(rt,{className:"mr-2"})," View History"]})]}),(0,Ns.jsx)("div",{className:"flex-1",children:(0,Ns.jsx)(iQ,{onReturnSuccess:()=>{t(e=>!e)}})}),n&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Ns.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,Ns.jsxs)("div",{className:"flex justify-between items-center border-b p-4",children:[(0,Ns.jsx)("h2",{className:"text-xl font-bold",children:"Return Products History"}),(0,Ns.jsx)("button",{onClick:()=>s(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,Ns.jsx)("div",{className:"overflow-y-auto flex-1",children:(0,Ns.jsx)(oQ,{refresh:e})})]})})]})},cQ=()=>{const[e,t]=(0,r.useState)(!1),{isFullScreenBill:n}=iT(),s=()=>{t(!e)};return(0,r.useEffect)(()=>{const e=()=>{t(!1)};return window.addEventListener("close-sidebar",e),()=>{window.removeEventListener("close-sidebar",e)}},[]),(0,Ns.jsxs)("div",{className:"flex h-screen bg-background",children:[e&&!n&&(0,Ns.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 z-30 lg:hidden",onClick:s}),!n&&(0,Ns.jsx)("div",{className:"fixed inset-y-0 left-0 transform ".concat(e?"translate-x-0":"-translate-x-full"," \n                                 lg:relative lg:translate-x-0 transition-transform duration-300 ease-in-out z-40"),children:(0,Ns.jsx)(IM,{})}),(0,Ns.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden ".concat(n?"w-full":""),children:[!n&&(0,Ns.jsxs)("header",{className:"lg:hidden bg-white shadow-sm p-4 flex items-center justify-between",children:[(0,Ns.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:(0,Ns.jsx)(TM,{className:"h-6 w-6"})}),(0,Ns.jsx)("h1",{className:"text-xl font-semibold text-gray-800",children:"SweetHub"})]}),(0,Ns.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-background p-4 lg:p-6 ".concat(n?"p-0 m-0":""),children:(0,Ns.jsxs)(xe,{children:[(0,Ns.jsx)(me,{path:"dashboard",element:(0,Ns.jsx)(DM,{})}),(0,Ns.jsx)(me,{path:"settings",element:(0,Ns.jsx)($M,{})}),(0,Ns.jsx)(me,{path:"departments/create",element:(0,Ns.jsx)(xF,{baseUrl:"/shop"})}),(0,Ns.jsx)(me,{path:"departments/view",element:(0,Ns.jsx)(vF,{baseUrl:"/shop"})}),(0,Ns.jsx)(me,{path:"workers/add",element:(0,Ns.jsx)(PM,{baseUrl:"/shop"})}),(0,Ns.jsx)(me,{path:"workers/view",element:(0,Ns.jsx)(OM,{baseUrl:"/shop"})}),(0,Ns.jsx)(me,{path:"workers/attendance",element:(0,Ns.jsx)(KM,{baseUrl:"/shop"})}),(0,Ns.jsx)(me,{path:"workers/salary-report",element:(0,Ns.jsx)(sQ,{})}),(0,Ns.jsx)(me,{path:"workers/holidays",element:(0,Ns.jsx)(aQ,{})}),(0,Ns.jsx)(me,{path:"face-enrollment",element:(0,Ns.jsx)(eQ,{})}),(0,Ns.jsx)(me,{path:"products/add",element:(0,Ns.jsx)(BF,{baseUrl:"/shop"})}),(0,Ns.jsx)(me,{path:"products/category",element:(0,Ns.jsx)(bF,{baseUrl:"/shop"})}),(0,Ns.jsx)(me,{path:"products/view",element:(0,Ns.jsx)(IF,{baseUrl:"/shop"})}),(0,Ns.jsx)(me,{path:"warehouse/stock",element:(0,Ns.jsx)(LF,{baseUrl:"/shop"})}),(0,Ns.jsx)(me,{path:"warehouse/alerts",element:(0,Ns.jsx)(PF,{baseUrl:"/shop"})}),(0,Ns.jsx)(me,{path:"invoice/view",element:(0,Ns.jsx)(GM,{})}),(0,Ns.jsx)(me,{path:"billing/create",element:(0,Ns.jsx)(XM,{})}),(0,Ns.jsx)(me,{path:"billing/view",element:(0,Ns.jsx)(JM,{})}),(0,Ns.jsx)(me,{path:"expenses",element:(0,Ns.jsx)(tQ,{})}),(0,Ns.jsx)(me,{path:"expenses/add",element:(0,Ns.jsx)(nQ,{})}),(0,Ns.jsx)(me,{path:"expenses/history",element:(0,Ns.jsx)(rQ,{})}),(0,Ns.jsx)(me,{path:"return-products",element:(0,Ns.jsx)(lQ,{})}),(0,Ns.jsx)(me,{index:!0,element:(0,Ns.jsx)(pe,{to:"dashboard"})})]})})]})]})};const dQ=function(){const{login:e}=(0,r.useContext)(js),t=ee(),n=(0,r.useRef)(null),[s,a]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),[h,A]=(0,r.useState)(!1);return(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center min-h-screen bg-gradient-to-br from-white via-red-50 to-white px-4 py-6",children:[(0,Ns.jsx)("div",{className:"absolute inset-0 z-0"}),(0,Ns.jsxs)("div",{ref:n,className:"relative z-10 bg-white p-6 sm:p-8 rounded-xl shadow-lg w-full max-w-md",children:[(0,Ns.jsx)("div",{className:"flex justify-center mb-6",children:(0,Ns.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"h-16 sm:h-20 w-auto animate-cottonCandy"}),(0,Ns.jsxs)("div",{className:"absolute h-20 w-20 sm:h-24 sm:w-24 rounded-full animate-[orbit_4s_linear_infinite]",children:[(0,Ns.jsx)("span",{className:"absolute top-0 left-1/2 -ml-1 w-2 h-2 bg-primary rounded-full"}),(0,Ns.jsx)("span",{className:"absolute left-0 top-1/2 -mt-1 w-2 h-2 bg-accent-cyan rounded-full"}),(0,Ns.jsx)("span",{className:"absolute bottom-0 left-1/2 -ml-1 w-2 h-2 bg-accent-green rounded-full"}),(0,Ns.jsx)("span",{className:"absolute right-0 top-1/2 -mt-1 w-2 h-2 bg-accent-orange rounded-full"})]})]})}),(0,Ns.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-center text-red-600 mb-2",children:"Sign In"}),(0,Ns.jsx)("p",{className:"text-center text-gray-600 mb-6",children:"to access your account"}),(0,Ns.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),c(""),A(!0);try{const n=await ws.post("/auth/login",JSON.stringify({username:s,password:i}),{headers:{"Content-Type":"application/json"},withCredentials:!0}),{token:r,role:a}=n.data;e(r,a),t("admin"===a?"/admin":"/shop")}catch(o){var r,a;null!==o&&void 0!==o&&o.response?400===(null===(r=o.response)||void 0===r?void 0:r.status)?c("Missing Username or Password"):401===(null===(a=o.response)||void 0===a?void 0:a.status)?c("Unauthorized"):c("Login Failed"):c("No Server Response")}finally{A(!1)}},className:"space-y-4",children:[(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-1",htmlFor:"username",children:"Username"}),(0,Ns.jsx)("input",{type:"text",id:"username",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",value:s,onChange:e=>a(e.target.value),required:!0,disabled:h})]}),(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-1",htmlFor:"password",children:"Password"}),(0,Ns.jsxs)("div",{className:"relative",children:[(0,Ns.jsx)("input",{type:d?"text":"password",id:"password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 pr-10",value:i,onChange:e=>o(e.target.value),required:!0,disabled:h}),(0,Ns.jsx)("button",{type:"button",onClick:()=>u(!d),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500",disabled:h,children:d?(0,Ns.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.243 4.243L6.228 6.228"})}):(0,Ns.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,Ns.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),l&&(0,Ns.jsx)("div",{className:"text-red-500 text-sm text-center",children:l}),(0,Ns.jsx)("button",{type:"submit",className:"w-full bg-red-500 text-white py-2 px-4 rounded-lg font-semibold hover:bg-red-600 transition duration-200 flex items-center justify-center",disabled:h,children:h?(0,Ns.jsxs)(Ns.Fragment,{children:[(0,Ns.jsx)("div",{className:"relative flex justify-center items-center mr-2",children:(0,Ns.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"})}),"Signing In..."]}):"Sign In"})]}),(0,Ns.jsxs)("p",{className:"text-center text-sm text-gray-600 mt-4",children:["Forgot your password?"," ",(0,Ns.jsx)(zt,{to:"/forgot-password",className:"text-red-500 hover:underline",children:"Reset it here"})]})]})]})};const uQ=function(){return(0,Ns.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-200 text-gray-800 text-center",children:(0,Ns.jsxs)("div",{children:[(0,Ns.jsx)("h1",{className:"text-6xl font-bold",children:"404"}),(0,Ns.jsx)("p",{className:"text-xl mt-4",children:"Page Not Found"}),(0,Ns.jsx)("p",{className:"mt-2",children:"The page you are looking for does not exist."}),(0,Ns.jsx)(zt,{to:"/",className:"mt-6 inline-block bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors",children:"Go to Home"})]})})};const hQ=function(){const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const e=setTimeout(()=>{t(!0)},800);return()=>clearTimeout(e)},[]),e?(0,Ns.jsx)("div",{className:"min-h-screen",children:(0,Ns.jsx)(oT,{children:(0,Ns.jsx)(NF,{children:(0,Ns.jsx)(BM,{children:(0,Ns.jsxs)(xe,{children:[(0,Ns.jsx)(me,{path:"/",element:(0,Ns.jsx)(dQ,{})}),(0,Ns.jsx)(me,{path:"/admin/*",element:(0,Ns.jsx)(FM,{})}),(0,Ns.jsx)(me,{path:"/shop/*",element:(0,Ns.jsx)(cQ,{})}),(0,Ns.jsx)(me,{path:"*",element:(0,Ns.jsx)(uQ,{})})]})})})})}):(0,Ns.jsxs)("div",{className:"fixed inset-0 bg-white flex flex-col items-center justify-center z-50",children:[(0,Ns.jsxs)("div",{className:"relative flex justify-center items-center mb-6",children:[(0,Ns.jsx)("div",{className:"w-20 h-20 border-4 border-red-100 border-t-red-500 rounded-full animate-spin"}),(0,Ns.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"absolute w-14 h-14"})]}),(0,Ns.jsx)("div",{className:"text-red-500 font-medium",children:"Loading Sweet Hub..."})]})};a.createRoot(document.getElementById("root")).render((0,Ns.jsx)(r.StrictMode,{children:(0,Ns.jsx)(Mt,{children:(0,Ns.jsx)(Cs,{children:(0,Ns.jsx)(hQ,{})})})}))})()})();