/*! For license information please see main.ee49befb.js.LICENSE.txt */
(()=>{var e={745:()=>{},1052:function(e){e.exports=function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n.apply(this,arguments)};function r(e,t,n,r){function a(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,s){function i(e){try{l(r.next(e))}catch(Pt){s(Pt)}}function o(e){try{l(r.throw(e))}catch(Pt){s(Pt)}}function l(e){e.done?n(e.value):a(e.value).then(i,o)}l((r=r.apply(e,t||[])).next())})}function a(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return l([e,t])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(Pt){s=[6,Pt],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function s(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||t)}for(var i=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,a){return new e(this.left+t,this.top+n,this.width+r,this.height+a)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find(function(e){return 0!==e.width});return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),o=function(e,t){return i.fromClientRect(e,t.getBoundingClientRect())},l=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),a=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new i(0,0,r,a)},c=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var s=e.charCodeAt(n++);56320===(64512&s)?t.push(((1023&a)<<10)+(1023&s)+65536):(t.push(a),n--)}else t.push(a)}return t},u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],a=-1,s="";++a<n;){var i=e[a];i<=65535?r.push(i):(i-=65536,r.push(55296+(i>>10),i%1024+56320)),(a+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A="undefined"===typeof Uint8Array?[]:new Uint8Array(256),h=0;h<d.length;h++)A[d.charCodeAt(h)]=h;for(var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p="undefined"===typeof Uint8Array?[]:new Uint8Array(256),m=0;m<f.length;m++)p[f.charCodeAt(m)]=m;for(var g=function(e){var t,n,r,a,s,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),u=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<o;t+=4)n=p[e.charCodeAt(t)],r=p[e.charCodeAt(t+1)],a=p[e.charCodeAt(t+2)],s=p[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|a>>2,u[l++]=(3&a)<<6|63&s;return c},x=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},v=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},y=5,b=11,w=2,N=65536>>y,j=(1<<y)-1,C=N+(1024>>y)+32,B=65536>>b,k=(1<<b-y)-1,S=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},E=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},F=function(e,t){var n=g(e),r=Array.isArray(n)?v(n):new Uint32Array(n),a=Array.isArray(n)?x(n):new Uint16Array(n),s=24,i=S(a,s/2,r[4]/2),o=2===r[5]?S(a,(s+r[4])/2):E(r,Math.ceil((s+r[4])/4));return new _(r[0],r[1],r[2],r[3],i,o)},_=function(){function e(e,t,n,r,a,s){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=a,this.data=s}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>y])<<w)+(e&j),this.data[t];if(e<=65535)return t=((t=this.index[N+(e-55296>>y)])<<w)+(e&j),this.data[t];if(e<this.highStart)return t=C-B+(e>>b),t=this.index[t],t+=e>>y&k,t=((t=this.index[t])<<w)+(e&j),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T="undefined"===typeof Uint8Array?[]:new Uint8Array(256),D=0;D<I.length;D++)T[I.charCodeAt(D)]=D;var L=50,U=1,P=2,R=3,O=4,M=5,Q=7,H=8,z=9,W=10,V=11,K=12,G=13,q=14,X=15,Y=16,J=17,Z=18,$=19,ee=20,te=21,ne=22,re=23,ae=24,se=25,ie=26,oe=27,le=28,ce=29,ue=30,de=31,Ae=32,he=33,fe=34,pe=35,me=36,ge=37,xe=38,ve=39,ye=40,be=41,we=42,Ne=43,je=[9001,65288],Ce="!",Be="\xd7",ke="\xf7",Se=F("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),Ee=[ue,me],Fe=[U,P,R,M],_e=[W,H],Ie=[oe,ie],Te=Fe.concat(_e),De=[xe,ve,ye,fe,pe],Le=[X,G],Ue=function(e,t){void 0===t&&(t="strict");var n=[],r=[],a=[];return e.forEach(function(e,s){var i=Se.get(e);if(i>L?(a.push(!0),i-=L):a.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(s),n.push(Y);if(i===O||i===V){if(0===s)return r.push(s),n.push(ue);var o=n[s-1];return-1===Te.indexOf(o)?(r.push(r[s-1]),n.push(o)):(r.push(s),n.push(ue))}return r.push(s),i===de?n.push("strict"===t?te:ge):i===we||i===ce?n.push(ue):i===Ne?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(ge):n.push(ue):void n.push(i)}),[r,n,a]},Pe=function(e,t,n,r){var a=r[n];if(Array.isArray(e)?-1!==e.indexOf(a):e===a)for(var s=n;s<=r.length;){if((l=r[++s])===t)return!0;if(l!==W)break}if(a===W)for(s=n;s>0;){var i=r[--s];if(Array.isArray(e)?-1!==e.indexOf(i):e===i)for(var o=n;o<=r.length;){var l;if((l=r[++o])===t)return!0;if(l!==W)break}if(i!==W)break}return!1},Re=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r!==W)return r;n--}return 0},Oe=function(e,t,n,r,a){if(0===n[r])return Be;var s=r-1;if(Array.isArray(a)&&!0===a[s])return Be;var i=s-1,o=s+1,l=t[s],c=i>=0?t[i]:0,u=t[o];if(l===P&&u===R)return Be;if(-1!==Fe.indexOf(l))return Ce;if(-1!==Fe.indexOf(u))return Be;if(-1!==_e.indexOf(u))return Be;if(Re(s,t)===H)return ke;if(Se.get(e[s])===V)return Be;if((l===Ae||l===he)&&Se.get(e[o])===V)return Be;if(l===Q||u===Q)return Be;if(l===z)return Be;if(-1===[W,G,X].indexOf(l)&&u===z)return Be;if(-1!==[J,Z,$,ae,le].indexOf(u))return Be;if(Re(s,t)===ne)return Be;if(Pe(re,ne,s,t))return Be;if(Pe([J,Z],te,s,t))return Be;if(Pe(K,K,s,t))return Be;if(l===W)return ke;if(l===re||u===re)return Be;if(u===Y||l===Y)return ke;if(-1!==[G,X,te].indexOf(u)||l===q)return Be;if(c===me&&-1!==Le.indexOf(l))return Be;if(l===le&&u===me)return Be;if(u===ee)return Be;if(-1!==Ee.indexOf(u)&&l===se||-1!==Ee.indexOf(l)&&u===se)return Be;if(l===oe&&-1!==[ge,Ae,he].indexOf(u)||-1!==[ge,Ae,he].indexOf(l)&&u===ie)return Be;if(-1!==Ee.indexOf(l)&&-1!==Ie.indexOf(u)||-1!==Ie.indexOf(l)&&-1!==Ee.indexOf(u))return Be;if(-1!==[oe,ie].indexOf(l)&&(u===se||-1!==[ne,X].indexOf(u)&&t[o+1]===se)||-1!==[ne,X].indexOf(l)&&u===se||l===se&&-1!==[se,le,ae].indexOf(u))return Be;if(-1!==[se,le,ae,J,Z].indexOf(u))for(var d=s;d>=0;){if((A=t[d])===se)return Be;if(-1===[le,ae].indexOf(A))break;d--}if(-1!==[oe,ie].indexOf(u))for(d=-1!==[J,Z].indexOf(l)?i:s;d>=0;){var A;if((A=t[d])===se)return Be;if(-1===[le,ae].indexOf(A))break;d--}if(xe===l&&-1!==[xe,ve,fe,pe].indexOf(u)||-1!==[ve,fe].indexOf(l)&&-1!==[ve,ye].indexOf(u)||-1!==[ye,pe].indexOf(l)&&u===ye)return Be;if(-1!==De.indexOf(l)&&-1!==[ee,ie].indexOf(u)||-1!==De.indexOf(u)&&l===oe)return Be;if(-1!==Ee.indexOf(l)&&-1!==Ee.indexOf(u))return Be;if(l===ae&&-1!==Ee.indexOf(u))return Be;if(-1!==Ee.concat(se).indexOf(l)&&u===ne&&-1===je.indexOf(e[o])||-1!==Ee.concat(se).indexOf(u)&&l===Z)return Be;if(l===be&&u===be){for(var h=n[s],f=1;h>0&&t[--h]===be;)f++;if(f%2!==0)return Be}return l===Ae&&u===he?Be:ke},Me=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=Ue(e,t.lineBreak),r=n[0],a=n[1],s=n[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(a=a.map(function(e){return-1!==[se,ue,we].indexOf(e)?ge:e}));var i="keep-all"===t.wordBreak?s.map(function(t,n){return t&&e[n]>=19968&&e[n]<=40959}):void 0;return[r,a,i]},Qe=function(){function e(e,t,n,r){this.codePoints=e,this.required=t===Ce,this.start=n,this.end=r}return e.prototype.slice=function(){return u.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),He=function(e,t){var n=c(e),r=Me(n,t),a=r[0],s=r[1],i=r[2],o=n.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var e=Be;u<o&&(e=Oe(n,s,a,++u,i))===Be;);if(e!==Be||u===o){var t=new Qe(n,e,l,u);return l=u,{value:t,done:!1}}return{done:!0,value:null}}}},ze=1,We=2,Ve=4,Ke=8,Ge=10,qe=47,Xe=92,Ye=9,Je=32,Ze=34,$e=61,et=35,tt=36,nt=37,rt=39,at=40,st=41,it=95,ot=45,lt=33,ct=60,ut=62,dt=64,At=91,ht=93,ft=61,pt=123,mt=63,gt=125,xt=124,vt=126,yt=128,bt=65533,wt=42,Nt=43,jt=44,Ct=58,Bt=59,kt=46,St=0,Et=8,Ft=11,_t=14,It=31,Tt=127,Dt=-1,Lt=48,Ut=97,Pt=101,Rt=102,Ot=117,Mt=122,Qt=65,Ht=69,zt=70,Wt=85,Vt=90,Kt=function(e){return e>=Lt&&e<=57},Gt=function(e){return e>=55296&&e<=57343},qt=function(e){return Kt(e)||e>=Qt&&e<=zt||e>=Ut&&e<=Rt},Xt=function(e){return e>=Ut&&e<=Mt},Yt=function(e){return e>=Qt&&e<=Vt},Jt=function(e){return Xt(e)||Yt(e)},Zt=function(e){return e>=yt},$t=function(e){return e===Ge||e===Ye||e===Je},en=function(e){return Jt(e)||Zt(e)||e===it},tn=function(e){return en(e)||Kt(e)||e===ot},nn=function(e){return e>=St&&e<=Et||e===Ft||e>=_t&&e<=It||e===Tt},rn=function(e,t){return e===Xe&&t!==Ge},an=function(e,t,n){return e===ot?en(t)||rn(t,n):!!en(e)||!(e!==Xe||!rn(e,t))},sn=function(e,t,n){return e===Nt||e===ot?!!Kt(t)||t===kt&&Kt(n):Kt(e===kt?t:e)},on=function(e){var t=0,n=1;e[t]!==Nt&&e[t]!==ot||(e[t]===ot&&(n=-1),t++);for(var r=[];Kt(e[t]);)r.push(e[t++]);var a=r.length?parseInt(u.apply(void 0,r),10):0;e[t]===kt&&t++;for(var s=[];Kt(e[t]);)s.push(e[t++]);var i=s.length,o=i?parseInt(u.apply(void 0,s),10):0;e[t]!==Ht&&e[t]!==Pt||t++;var l=1;e[t]!==Nt&&e[t]!==ot||(e[t]===ot&&(l=-1),t++);for(var c=[];Kt(e[t]);)c.push(e[t++]);var d=c.length?parseInt(u.apply(void 0,c),10):0;return n*(a+o*Math.pow(10,-i))*Math.pow(10,l*d)},ln={type:2},cn={type:3},un={type:4},dn={type:13},An={type:8},hn={type:21},fn={type:9},pn={type:10},mn={type:11},gn={type:12},xn={type:14},vn={type:23},yn={type:1},bn={type:25},wn={type:24},Nn={type:26},jn={type:27},Cn={type:28},Bn={type:29},kn={type:31},Sn={type:32},En=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(c(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Sn;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Ze:return this.consumeStringToken(Ze);case et:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(tn(t)||rn(n,r)){var a=an(t,n,r)?We:ze;return{type:5,value:this.consumeName(),flags:a}}break;case tt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),dn;break;case rt:return this.consumeStringToken(rt);case at:return ln;case st:return cn;case wt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),xn;break;case Nt:if(sn(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case jt:return un;case ot:var s=e,i=this.peekCodePoint(0),o=this.peekCodePoint(1);if(sn(s,i,o))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(an(s,i,o))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(i===ot&&o===ut)return this.consumeCodePoint(),this.consumeCodePoint(),wn;break;case kt:if(sn(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case qe:if(this.peekCodePoint(0)===wt)for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(l===wt&&(l=this.consumeCodePoint())===qe)return this.consumeToken();if(l===Dt)return this.consumeToken()}break;case Ct:return Nn;case Bt:return jn;case ct:if(this.peekCodePoint(0)===lt&&this.peekCodePoint(1)===ot&&this.peekCodePoint(2)===ot)return this.consumeCodePoint(),this.consumeCodePoint(),bn;break;case dt:var c=this.peekCodePoint(0),d=this.peekCodePoint(1),A=this.peekCodePoint(2);if(an(c,d,A))return{type:7,value:this.consumeName()};break;case At:return Cn;case Xe:if(rn(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case ht:return Bn;case ft:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),An;break;case pt:return mn;case gt:return gn;case Ot:case Wt:var h=this.peekCodePoint(0),f=this.peekCodePoint(1);return h!==Nt||!qt(f)&&f!==mt||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case xt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),fn;if(this.peekCodePoint(0)===xt)return this.consumeCodePoint(),hn;break;case vt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),pn;break;case Dt:return Sn}return $t(e)?(this.consumeWhiteSpace(),kn):Kt(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):en(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:u(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return"undefined"===typeof e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();qt(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===mt&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(u.apply(void 0,e.map(function(e){return e===mt?Lt:e})),16),end:parseInt(u.apply(void 0,e.map(function(e){return e===mt?zt:e})),16)};var r=parseInt(u.apply(void 0,e),16);if(this.peekCodePoint(0)===ot&&qt(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];qt(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();return{type:30,start:r,end:parseInt(u.apply(void 0,a),16)}}return{type:30,start:r,end:r}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&this.peekCodePoint(0)===at?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===at?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Dt)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===rt||t===Ze){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Dt||this.peekCodePoint(0)===st)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),vn)}for(;;){var r=this.consumeCodePoint();if(r===Dt||r===st)return{type:22,value:u.apply(void 0,e)};if($t(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Dt||this.peekCodePoint(0)===st?(this.consumeCodePoint(),{type:22,value:u.apply(void 0,e)}):(this.consumeBadUrlRemnants(),vn);if(r===Ze||r===rt||r===at||nn(r))return this.consumeBadUrlRemnants(),vn;if(r===Xe){if(!rn(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),vn;e.push(this.consumeEscapedCodePoint())}else e.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;$t(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===st||e===Dt)return;rn(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var r=Math.min(t,e);n+=u.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),n},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var r=this._value[n];if(r===Dt||void 0===r||r===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(r===Ge)return this._value.splice(0,n),yn;if(r===Xe){var a=this._value[n+1];a!==Dt&&void 0!==a&&(a===Ge?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):rn(r,a)&&(t+=this.consumeStringSlice(n),t+=u(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=Ve,n=this.peekCodePoint(0);for(n!==Nt&&n!==ot||e.push(this.consumeCodePoint());Kt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===kt&&Kt(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Ke;Kt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((n===Ht||n===Pt)&&((r===Nt||r===ot)&&Kt(a)||Kt(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Ke;Kt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[on(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),a=this.peekCodePoint(1),s=this.peekCodePoint(2);return an(r,a,s)?{type:15,number:t,flags:n,unit:this.consumeName()}:r===nt?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(qt(e)){for(var t=u(e);qt(this.peekCodePoint(0))&&t.length<6;)t+=u(this.consumeCodePoint());$t(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||Gt(n)||n>1114111?bt:n}return e===Dt?bt:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(tn(t))e+=u(t);else{if(!rn(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=u(this.consumeEscapedCodePoint())}}},e}(),Fn=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new En;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||On(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return"undefined"===typeof e?Sn:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),_n=function(e){return 15===e.type},In=function(e){return 17===e.type},Tn=function(e){return 20===e.type},Dn=function(e){return 0===e.type},Ln=function(e,t){return Tn(e)&&e.value===t},Un=function(e){return 31!==e.type},Pn=function(e){return 31!==e.type&&4!==e.type},Rn=function(e){var t=[],n=[];return e.forEach(function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)}),n.length&&t.push(n),t},On=function(e,t){return 11===t&&12===e.type||28===t&&29===e.type||2===t&&3===e.type},Mn=function(e){return 17===e.type||15===e.type},Qn=function(e){return 16===e.type||Mn(e)},Hn=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},zn={type:17,number:0,flags:Ve},Wn={type:16,number:50,flags:Ve},Vn={type:16,number:100,flags:Ve},Kn=function(e,t,n){var r=e[0],a=e[1];return[Gn(r,t),Gn("undefined"!==typeof a?a:r,n)]},Gn=function(e,t){if(16===e.type)return e.number/100*t;if(_n(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},qn="deg",Xn="grad",Yn="rad",Jn="turn",Zn={name:"angle",parse:function(e,t){if(15===t.type)switch(t.unit){case qn:return Math.PI*t.number/180;case Xn:return Math.PI/200*t.number;case Yn:return t.number;case Jn:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")}},$n=function(e){return 15===e.type&&(e.unit===qn||e.unit===Xn||e.unit===Yn||e.unit===Jn)},er=function(e){switch(e.filter(Tn).map(function(e){return e.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[zn,zn];case"to top":case"bottom":return tr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[zn,Vn];case"to right":case"left":return tr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Vn,Vn];case"to bottom":case"top":return tr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Vn,zn];case"to left":case"right":return tr(270)}return 0},tr=function(e){return Math.PI*e/180},nr={name:"color",parse:function(e,t){if(18===t.type){var n=ur[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var r=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return sr(parseInt(r+r,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(4===t.value.length){r=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);var i=t.value.substring(3,4);return sr(parseInt(r+r,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(6===t.value.length)return r=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),sr(parseInt(r,16),parseInt(a,16),parseInt(s,16),1);if(8===t.value.length)return r=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8),sr(parseInt(r,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}if(20===t.type){var o=Ar[t.value.toUpperCase()];if("undefined"!==typeof o)return o}return Ar.TRANSPARENT}},rr=function(e){return 0===(255&e)},ar=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+r+","+n+","+t/255+")":"rgb("+a+","+r+","+n+")"},sr=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r))>>>0},ir=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},or=function(e,t){var n=t.filter(Pn);if(3===n.length){var r=n.map(ir),a=r[0],s=r[1],i=r[2];return sr(a,s,i,1)}if(4===n.length){var o=n.map(ir),l=(a=o[0],s=o[1],i=o[2],o[3]);return sr(a,s,i,l)}return 0};function lr(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var cr=function(e,t){var n=t.filter(Pn),r=n[0],a=n[1],s=n[2],i=n[3],o=(17===r.type?tr(r.number):Zn.parse(e,r))/(2*Math.PI),l=Qn(a)?a.number/100:0,c=Qn(s)?s.number/100:0,u="undefined"!==typeof i&&Qn(i)?Gn(i,1):1;if(0===l)return sr(255*c,255*c,255*c,1);var d=c<=.5?c*(l+1):c+l-c*l,A=2*c-d,h=lr(A,d,o+1/3),f=lr(A,d,o),p=lr(A,d,o-1/3);return sr(255*h,255*f,255*p,u)},ur={hsl:cr,hsla:cr,rgb:or,rgba:or},dr=function(e,t){return nr.parse(e,Fn.create(t).parseComponentValue())},Ar={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},hr={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(Tn(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},fr={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},pr=function(e,t){var n=nr.parse(e,t[0]),r=t[1];return r&&Qn(r)?{color:n,stop:r}:{color:n,stop:null}},mr=function(e,t){var n=e[0],r=e[e.length-1];null===n.stop&&(n.stop=zn),null===r.stop&&(r.stop=Vn);for(var a=[],s=0,i=0;i<e.length;i++){var o=e[i].stop;if(null!==o){var l=Gn(o,t);l>s?a.push(l):a.push(s),s=l}else a.push(null)}var c=null;for(i=0;i<a.length;i++){var u=a[i];if(null===u)null===c&&(c=i);else if(null!==c){for(var d=i-c,A=(u-a[c-1])/(d+1),h=1;h<=d;h++)a[c+h-1]=A*h;c=null}}return e.map(function(e,n){return{color:e.color,stop:Math.max(Math.min(1,a[n]/t),0)}})},gr=function(e,t,n){var r=t/2,a=n/2,s=Gn(e[0],t)-r,i=a-Gn(e[1],n);return(Math.atan2(i,s)+2*Math.PI)%(2*Math.PI)},xr=function(e,t,n){var r="number"===typeof e?e:gr(e,t,n),a=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),s=t/2,i=n/2,o=a/2,l=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[a,s-c,s+c,i-l,i+l]},vr=function(e,t){return Math.sqrt(e*e+t*t)},yr=function(e,t,n,r,a){return[[0,0],[0,t],[e,0],[e,t]].reduce(function(e,t){var s=t[0],i=t[1],o=vr(n-s,r-i);return(a?o<e.optimumDistance:o>e.optimumDistance)?{optimumCorner:t,optimumDistance:o}:e},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},br=function(e,t,n,r,a){var s=0,i=0;switch(e.size){case 0:0===e.shape?s=i=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-a)):1===e.shape&&(s=Math.min(Math.abs(t),Math.abs(t-r)),i=Math.min(Math.abs(n),Math.abs(n-a)));break;case 2:if(0===e.shape)s=i=Math.min(vr(t,n),vr(t,n-a),vr(t-r,n),vr(t-r,n-a));else if(1===e.shape){var o=Math.min(Math.abs(n),Math.abs(n-a))/Math.min(Math.abs(t),Math.abs(t-r)),l=yr(r,a,t,n,!0),c=l[0],u=l[1];i=o*(s=vr(c-t,(u-n)/o))}break;case 1:0===e.shape?s=i=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-a)):1===e.shape&&(s=Math.max(Math.abs(t),Math.abs(t-r)),i=Math.max(Math.abs(n),Math.abs(n-a)));break;case 3:if(0===e.shape)s=i=Math.max(vr(t,n),vr(t,n-a),vr(t-r,n),vr(t-r,n-a));else if(1===e.shape){o=Math.max(Math.abs(n),Math.abs(n-a))/Math.max(Math.abs(t),Math.abs(t-r));var d=yr(r,a,t,n,!1);c=d[0],u=d[1],i=o*(s=vr(c-t,(u-n)/o))}}return Array.isArray(e.size)&&(s=Gn(e.size[0],r),i=2===e.size.length?Gn(e.size[1],a):s),[s,i]},wr=function(e,t){var n=tr(180),r=[];return Rn(t).forEach(function(t,a){if(0===a){var s=t[0];if(20===s.type&&-1!==["top","left","right","bottom"].indexOf(s.value))return void(n=er(t));if($n(s))return void(n=(Zn.parse(e,s)+tr(270))%tr(360))}var i=pr(e,t);r.push(i)}),{angle:n,stops:r,type:1}},Nr="closest-side",jr="farthest-side",Cr="closest-corner",Br="farthest-corner",kr="circle",Sr="ellipse",Er="cover",Fr="contain",_r=function(e,t){var n=0,r=3,a=[],s=[];return Rn(t).forEach(function(t,i){var o=!0;if(0===i?o=t.reduce(function(e,t){if(Tn(t))switch(t.value){case"center":return s.push(Wn),!1;case"top":case"left":return s.push(zn),!1;case"right":case"bottom":return s.push(Vn),!1}else if(Qn(t)||Mn(t))return s.push(t),!1;return e},o):1===i&&(o=t.reduce(function(e,t){if(Tn(t))switch(t.value){case kr:return n=0,!1;case Sr:return n=1,!1;case Fr:case Nr:return r=0,!1;case jr:return r=1,!1;case Cr:return r=2,!1;case Er:case Br:return r=3,!1}else if(Mn(t)||Qn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},o)),o){var l=pr(e,t);a.push(l)}}),{size:r,shape:n,stops:a,position:s,type:2}},Ir=function(e){return 1===e.type},Tr=function(e){return 2===e.type},Dr={name:"image",parse:function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var r=Pr[t.name];if("undefined"===typeof r)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Lr(e){return!(20===e.type&&"none"===e.value)&&(18!==e.type||!!Pr[e.name])}var Ur,Pr={"linear-gradient":function(e,t){var n=tr(180),r=[];return Rn(t).forEach(function(t,a){if(0===a){var s=t[0];if(20===s.type&&"to"===s.value)return void(n=er(t));if($n(s))return void(n=Zn.parse(e,s))}var i=pr(e,t);r.push(i)}),{angle:n,stops:r,type:1}},"-moz-linear-gradient":wr,"-ms-linear-gradient":wr,"-o-linear-gradient":wr,"-webkit-linear-gradient":wr,"radial-gradient":function(e,t){var n=0,r=3,a=[],s=[];return Rn(t).forEach(function(t,i){var o=!0;if(0===i){var l=!1;o=t.reduce(function(e,t){if(l)if(Tn(t))switch(t.value){case"center":return s.push(Wn),e;case"top":case"left":return s.push(zn),e;case"right":case"bottom":return s.push(Vn),e}else(Qn(t)||Mn(t))&&s.push(t);else if(Tn(t))switch(t.value){case kr:return n=0,!1;case Sr:return n=1,!1;case"at":return l=!0,!1;case Nr:return r=0,!1;case Er:case jr:return r=1,!1;case Fr:case Cr:return r=2,!1;case Br:return r=3,!1}else if(Mn(t)||Qn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},o)}if(o){var c=pr(e,t);a.push(c)}}),{size:r,shape:n,stops:a,position:s,type:2}},"-moz-radial-gradient":_r,"-ms-radial-gradient":_r,"-o-radial-gradient":_r,"-webkit-radial-gradient":_r,"-webkit-gradient":function(e,t){var n=tr(180),r=[],a=1,s=0,i=3,o=[];return Rn(t).forEach(function(t,n){var s=t[0];if(0===n){if(Tn(s)&&"linear"===s.value)return void(a=1);if(Tn(s)&&"radial"===s.value)return void(a=2)}if(18===s.type)if("from"===s.name){var i=nr.parse(e,s.values[0]);r.push({stop:zn,color:i})}else if("to"===s.name)i=nr.parse(e,s.values[0]),r.push({stop:Vn,color:i});else if("color-stop"===s.name){var o=s.values.filter(Pn);if(2===o.length){i=nr.parse(e,o[1]);var l=o[0];In(l)&&r.push({stop:{type:16,number:100*l.number,flags:l.flags},color:i})}}}),1===a?{angle:(n+tr(180))%tr(360),stops:r,type:a}:{size:i,shape:s,stops:r,position:o,type:a}}},Rr={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter(function(e){return Pn(e)&&Lr(e)}).map(function(t){return Dr.parse(e,t)})}},Or={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(Tn(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Mr={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Rn(t).map(function(e){return e.filter(Qn)}).map(Hn)}},Qr={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Rn(t).map(function(e){return e.filter(Tn).map(function(e){return e.value}).join(" ")}).map(Hr)}},Hr=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Ur||(Ur={}));var zr,Wr={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Rn(t).map(function(e){return e.filter(Vr)})}},Vr=function(e){return Tn(e)||Qn(e)},Kr=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Gr=Kr("top"),qr=Kr("right"),Xr=Kr("bottom"),Yr=Kr("left"),Jr=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return Hn(t.filter(Qn))}}},Zr=Jr("top-left"),$r=Jr("top-right"),ea=Jr("bottom-right"),ta=Jr("bottom-left"),na=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ra=na("top"),aa=na("right"),sa=na("bottom"),ia=na("left"),oa=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return _n(t)?t.number:0}}},la=oa("top"),ca=oa("right"),ua=oa("bottom"),da=oa("left"),Aa={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ha={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},fa={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Tn).reduce(function(e,t){return e|pa(t.value)},0)}},pa=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ma={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},ga={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(zr||(zr={}));var xa,va={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?zr.STRICT:zr.NORMAL}},ya={name:"line-height",initialValue:"normal",prefix:!1,type:4},ba=function(e,t){return Tn(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:Qn(e)?Gn(e,t):t},wa={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Dr.parse(e,t)}},Na={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},ja={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Ca=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Ba=Ca("top"),ka=Ca("right"),Sa=Ca("bottom"),Ea=Ca("left"),Fa={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Tn).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},_a={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},Ia=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Ta=Ia("top"),Da=Ia("right"),La=Ia("bottom"),Ua=Ia("left"),Pa={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Ra={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Oa={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Ln(t[0],"none")?[]:Rn(t).map(function(t){for(var n={color:Ar.TRANSPARENT,offsetX:zn,offsetY:zn,blur:zn},r=0,a=0;a<t.length;a++){var s=t[a];Mn(s)?(0===r?n.offsetX=s:1===r?n.offsetY=s:n.blur=s,r++):n.color=nr.parse(e,s)}return n})}},Ma={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Qa={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=Ha[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},Ha={matrix:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number});return 6===t.length?t:null},matrix3d:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number}),n=t[0],r=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],16===t.length?[n,r,a,s,i,o]:null}},za={type:16,number:50,flags:Ve},Wa=[za,za],Va={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(Qn);return 2!==n.length?Wa:[n[0],n[1]]}},Ka={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(xa||(xa={}));for(var Ga={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return xa.BREAK_ALL;case"keep-all":return xa.KEEP_ALL;default:return xa.NORMAL}}},qa={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(In(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Xa={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Ya={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return In(t)?t.number:1}},Ja={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Za={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Tn).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return 0!==e})}},$a={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach(function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}}),n.length&&r.push(n.join(" ")),r.map(function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"})}},es={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ts={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return In(t)?t.number:Tn(t)&&"bold"===t.value?700:400}},ns={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Tn).map(function(e){return e.value})}},rs={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},as=function(e,t){return 0!==(e&t)},ss={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},is={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],a=t.filter(Un),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(20===i.type){var l=o&&In(o)?o.number:1;r.push({counter:i.value,increment:l})}}return r}},os={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],r=t.filter(Un),a=0;a<r.length;a++){var s=r[a],i=r[a+1];if(Tn(s)&&"none"!==s.value){var o=i&&In(i)?i.number:0;n.push({counter:s.value,reset:o})}}return n}},ls={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(_n).map(function(t){return Xa.parse(e,t)})}},cs={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var r=[],a=t.filter(Dn);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;r.push({open:i,close:o})}return r}},us=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},ds={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Ln(t[0],"none")?[]:Rn(t).map(function(t){for(var n={color:255,offsetX:zn,offsetY:zn,blur:zn,spread:zn,inset:!1},r=0,a=0;a<t.length;a++){var s=t[a];Ln(s,"inset")?n.inset=!0:Mn(s)?(0===r?n.offsetX=s:1===r?n.offsetY=s:2===r?n.blur=s:n.spread=s,r++):n.color=nr.parse(e,s)}return n})}},As={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(Tn).forEach(function(e){switch(e.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2)}}),n.forEach(function(e){-1===r.indexOf(e)&&r.push(e)}),r}},hs={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},fs={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return _n(t)?t.number:0}},ps=function(){function e(e,t){var n,r;this.animationDuration=xs(e,ls,t.animationDuration),this.backgroundClip=xs(e,hr,t.backgroundClip),this.backgroundColor=xs(e,fr,t.backgroundColor),this.backgroundImage=xs(e,Rr,t.backgroundImage),this.backgroundOrigin=xs(e,Or,t.backgroundOrigin),this.backgroundPosition=xs(e,Mr,t.backgroundPosition),this.backgroundRepeat=xs(e,Qr,t.backgroundRepeat),this.backgroundSize=xs(e,Wr,t.backgroundSize),this.borderTopColor=xs(e,Gr,t.borderTopColor),this.borderRightColor=xs(e,qr,t.borderRightColor),this.borderBottomColor=xs(e,Xr,t.borderBottomColor),this.borderLeftColor=xs(e,Yr,t.borderLeftColor),this.borderTopLeftRadius=xs(e,Zr,t.borderTopLeftRadius),this.borderTopRightRadius=xs(e,$r,t.borderTopRightRadius),this.borderBottomRightRadius=xs(e,ea,t.borderBottomRightRadius),this.borderBottomLeftRadius=xs(e,ta,t.borderBottomLeftRadius),this.borderTopStyle=xs(e,ra,t.borderTopStyle),this.borderRightStyle=xs(e,aa,t.borderRightStyle),this.borderBottomStyle=xs(e,sa,t.borderBottomStyle),this.borderLeftStyle=xs(e,ia,t.borderLeftStyle),this.borderTopWidth=xs(e,la,t.borderTopWidth),this.borderRightWidth=xs(e,ca,t.borderRightWidth),this.borderBottomWidth=xs(e,ua,t.borderBottomWidth),this.borderLeftWidth=xs(e,da,t.borderLeftWidth),this.boxShadow=xs(e,ds,t.boxShadow),this.color=xs(e,Aa,t.color),this.direction=xs(e,ha,t.direction),this.display=xs(e,fa,t.display),this.float=xs(e,ma,t.cssFloat),this.fontFamily=xs(e,$a,t.fontFamily),this.fontSize=xs(e,es,t.fontSize),this.fontStyle=xs(e,rs,t.fontStyle),this.fontVariant=xs(e,ns,t.fontVariant),this.fontWeight=xs(e,ts,t.fontWeight),this.letterSpacing=xs(e,ga,t.letterSpacing),this.lineBreak=xs(e,va,t.lineBreak),this.lineHeight=xs(e,ya,t.lineHeight),this.listStyleImage=xs(e,wa,t.listStyleImage),this.listStylePosition=xs(e,Na,t.listStylePosition),this.listStyleType=xs(e,ja,t.listStyleType),this.marginTop=xs(e,Ba,t.marginTop),this.marginRight=xs(e,ka,t.marginRight),this.marginBottom=xs(e,Sa,t.marginBottom),this.marginLeft=xs(e,Ea,t.marginLeft),this.opacity=xs(e,Ya,t.opacity);var a=xs(e,Fa,t.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=xs(e,_a,t.overflowWrap),this.paddingTop=xs(e,Ta,t.paddingTop),this.paddingRight=xs(e,Da,t.paddingRight),this.paddingBottom=xs(e,La,t.paddingBottom),this.paddingLeft=xs(e,Ua,t.paddingLeft),this.paintOrder=xs(e,As,t.paintOrder),this.position=xs(e,Ra,t.position),this.textAlign=xs(e,Pa,t.textAlign),this.textDecorationColor=xs(e,Ja,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=xs(e,Za,null!==(r=t.textDecorationLine)&&void 0!==r?r:t.textDecoration),this.textShadow=xs(e,Oa,t.textShadow),this.textTransform=xs(e,Ma,t.textTransform),this.transform=xs(e,Qa,t.transform),this.transformOrigin=xs(e,Va,t.transformOrigin),this.visibility=xs(e,Ka,t.visibility),this.webkitTextStrokeColor=xs(e,hs,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=xs(e,fs,t.webkitTextStrokeWidth),this.wordBreak=xs(e,Ga,t.wordBreak),this.zIndex=xs(e,qa,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return rr(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return as(this.display,4)||as(this.display,33554432)||as(this.display,268435456)||as(this.display,536870912)||as(this.display,67108864)||as(this.display,134217728)},e}(),ms=function(){function e(e,t){this.content=xs(e,ss,t.content),this.quotes=xs(e,cs,t.quotes)}return e}(),gs=function(){function e(e,t){this.counterIncrement=xs(e,is,t.counterIncrement),this.counterReset=xs(e,os,t.counterReset)}return e}(),xs=function(e,t,n){var r=new En,a=null!==n&&"undefined"!==typeof n?n.toString():t.initialValue;r.write(a);var s=new Fn(r.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,Tn(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return Zn.parse(e,s.parseComponentValue());case"color":return nr.parse(e,s.parseComponentValue());case"image":return Dr.parse(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Mn(o)?o:zn;case"length-percentage":var l=s.parseComponentValue();return Qn(l)?l:zn;case"time":return Xa.parse(e,s.parseComponentValue())}}},vs="data-html2canvas-debug",ys=function(e){switch(e.getAttribute(vs)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},bs=function(e,t){var n=ys(e);return 1===n||t===n},ws=function(){function e(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,bs(t,3),this.styles=new ps(e,window.getComputedStyle(t,null)),co(t)&&(this.styles.animationDuration.some(function(e){return e>0})&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=o(this.context,t),bs(t,4)&&(this.flags|=16)}return e}(),Ns="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",js="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cs="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Bs=0;Bs<js.length;Bs++)Cs[js.charCodeAt(Bs)]=Bs;for(var ks=function(e){var t,n,r,a,s,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),u=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<o;t+=4)n=Cs[e.charCodeAt(t)],r=Cs[e.charCodeAt(t+1)],a=Cs[e.charCodeAt(t+2)],s=Cs[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|a>>2,u[l++]=(3&a)<<6|63&s;return c},Ss=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},Es=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},Fs=5,_s=11,Is=2,Ts=65536>>Fs,Ds=(1<<Fs)-1,Ls=Ts+(1024>>Fs)+32,Us=65536>>_s,Ps=(1<<_s-Fs)-1,Rs=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Os=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Ms=function(e,t){var n=ks(e),r=Array.isArray(n)?Es(n):new Uint32Array(n),a=Array.isArray(n)?Ss(n):new Uint16Array(n),s=24,i=Rs(a,s/2,r[4]/2),o=2===r[5]?Rs(a,(s+r[4])/2):Os(r,Math.ceil((s+r[4])/4));return new Qs(r[0],r[1],r[2],r[3],i,o)},Qs=function(){function e(e,t,n,r,a,s){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=a,this.data=s}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>Fs])<<Is)+(e&Ds),this.data[t];if(e<=65535)return t=((t=this.index[Ts+(e-55296>>Fs)])<<Is)+(e&Ds),this.data[t];if(e<this.highStart)return t=Ls-Us+(e>>_s),t=this.index[t],t+=e>>Fs&Ps,t=((t=this.index[t])<<Is)+(e&Ds),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Hs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zs="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Ws=0;Ws<Hs.length;Ws++)zs[Hs.charCodeAt(Ws)]=Ws;var Vs,Ks=1,Gs=2,qs=3,Xs=4,Ys=5,Js=7,Zs=8,$s=9,ei=10,ti=11,ni=12,ri=13,ai=14,si=15,ii=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var s=e.charCodeAt(n++);56320===(64512&s)?t.push(((1023&a)<<10)+(1023&s)+65536):(t.push(a),n--)}else t.push(a)}return t},oi=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],a=-1,s="";++a<n;){var i=e[a];i<=65535?r.push(i):(i-=65536,r.push(55296+(i>>10),i%1024+56320)),(a+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},li=Ms(Ns),ci="\xd7",ui="\xf7",di=function(e){return li.get(e)},Ai=function(e,t,n){var r=n-2,a=t[r],s=t[n-1],i=t[n];if(s===Gs&&i===qs)return ci;if(s===Gs||s===qs||s===Xs)return ui;if(i===Gs||i===qs||i===Xs)return ui;if(s===Zs&&-1!==[Zs,$s,ti,ni].indexOf(i))return ci;if((s===ti||s===$s)&&(i===$s||i===ei))return ci;if((s===ni||s===ei)&&i===ei)return ci;if(i===ri||i===Ys)return ci;if(i===Js)return ci;if(s===Ks)return ci;if(s===ri&&i===ai){for(;a===Ys;)a=t[--r];if(a===ai)return ci}if(s===si&&i===si){for(var o=0;a===si;)o++,a=t[--r];if(o%2===0)return ci}return ui},hi=function(e){var t=ii(e),n=t.length,r=0,a=0,s=t.map(di);return{next:function(){if(r>=n)return{done:!0,value:null};for(var e=ci;r<n&&(e=Ai(t,s,++r))===ci;);if(e!==ci||r===n){var i=oi.apply(null,t.slice(a,r));return a=r,{value:i,done:!1}}return{done:!0,value:null}}}},fi=function(e){for(var t,n=hi(e),r=[];!(t=n.next()).done;)t.value&&r.push(t.value.slice());return r},pi=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),n.selectNode(r);var a=n.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(r),s===t)return!0}}return!1},mi=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"===typeof"".repeat?"&#128104;".repeat(10):"";var r=t.firstChild,a=c(r.data).map(function(e){return u(e)}),s=0,i={},o=a.every(function(e,t){n.setStart(r,s),n.setEnd(r,s+e.length);var a=n.getBoundingClientRect();s+=e.length;var o=a.x>i.x||a.y>i.y;return i=a,0===t||o});return e.body.removeChild(t),o},gi=function(){return"undefined"!==typeof(new Image).crossOrigin},xi=function(){return"string"===typeof(new XMLHttpRequest).responseType},vi=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(Pt){return!1}return!0},yi=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},bi=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var a=new Image,s=t.toDataURL();a.src=s;var i=wi(n,n,0,0,a);return r.fillStyle="red",r.fillRect(0,0,n,n),Ni(i).then(function(t){r.drawImage(t,0,0);var a=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var i=e.createElement("div");return i.style.backgroundImage="url("+s+")",i.style.height=n+"px",yi(a)?Ni(wi(n,n,0,0,i)):Promise.reject(!1)}).then(function(e){return r.drawImage(e,0,0),yi(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},wi=function(e,t,n,r,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},Ni=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},ji={get SUPPORT_RANGE_BOUNDS(){var e=pi(document);return Object.defineProperty(ji,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=ji.SUPPORT_RANGE_BOUNDS&&mi(document);return Object.defineProperty(ji,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=vi(document);return Object.defineProperty(ji,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"===typeof Array.from&&"function"===typeof window.fetch?bi(document):Promise.resolve(!1);return Object.defineProperty(ji,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=gi();return Object.defineProperty(ji,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=xi();return Object.defineProperty(ji,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ji,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"===typeof Intl||!Intl.Segmenter);return Object.defineProperty(ji,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Ci=function(){function e(e,t){this.text=e,this.bounds=t}return e}(),Bi=function(e,t,n,r){var a=_i(t,n),s=[],o=0;return a.forEach(function(t){if(n.textDecorationLine.length||t.trim().length>0)if(ji.SUPPORT_RANGE_BOUNDS){var a=Si(r,o,t.length).getClientRects();if(a.length>1){var l=Ei(t),c=0;l.forEach(function(t){s.push(new Ci(t,i.fromDOMRectList(e,Si(r,c+o,t.length).getClientRects()))),c+=t.length})}else s.push(new Ci(t,i.fromDOMRectList(e,a)))}else{var u=r.splitText(t.length);s.push(new Ci(t,ki(e,r))),r=u}else ji.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));o+=t.length}),s},ki=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(r,t);var s=o(e,r);return r.firstChild&&a.replaceChild(r.firstChild,r),s}}return i.EMPTY},Si=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var a=r.createRange();return a.setStart(e,t),a.setEnd(e,t+n),a},Ei=function(e){if(ji.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(e){return e.segment})}return fi(e)},Fi=function(e,t){if(ji.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(e){return e.segment})}return Ti(e,t)},_i=function(e,t){return 0!==t.letterSpacing?Ei(e):Fi(e,t)},Ii=[32,160,4961,65792,65793,4153,4241],Ti=function(e,t){for(var n,r=He(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),a=[],s=function(){if(n.value){var e=n.value.slice(),t=c(e),r="";t.forEach(function(e){-1===Ii.indexOf(e)?r+=u(e):(r.length&&a.push(r),a.push(u(e)),r="")}),r.length&&a.push(r)}};!(n=r.next()).done;)s();return a},Di=function(){function e(e,t,n){this.text=Li(t.data,n.textTransform),this.textBounds=Bi(e,this.text,n,t)}return e}(),Li=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Ui,Pi);case 2:return e.toUpperCase();default:return e}},Ui=/(^|\s|:|-|\(|\))([a-z])/g,Pi=function(e,t,n){return e.length>0?t+n.toUpperCase():e},Ri=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return t(n,e),n}(ws),Oi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return t(n,e),n}(ws),Mi=function(e){function n(t,n){var r=e.call(this,t,n)||this,a=new XMLSerializer,s=o(t,n);return n.setAttribute("width",s.width+"px"),n.setAttribute("height",s.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t(n,e),n}(ws),Qi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(ws),Hi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed="boolean"===typeof n.reversed&&!0===n.reversed,r}return t(n,e),n}(ws),zi=[{type:15,flags:0,unit:"px",number:3}],Wi=[{type:16,flags:0,number:50}],Vi=function(e){return e.width>e.height?new i(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new i(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Ki=function(e){var t=e.type===Xi?new Array(e.value.length+1).join("\u2022"):e.value;return 0===t.length?e.placeholder||"":t},Gi="checkbox",qi="radio",Xi="password",Yi=707406591,Ji=function(e){function n(t,n){var r=e.call(this,t,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=Ki(n),r.type!==Gi&&r.type!==qi||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=Vi(r.bounds)),r.type){case Gi:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=zi;break;case qi:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Wi}return r}return t(n,e),n}(ws),Zi=function(e){function n(t,n){var r=e.call(this,t,n)||this,a=n.options[n.selectedIndex||0];return r.value=a&&a.text||"",r}return t(n,e),n}(ws),$i=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(ws),eo=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=ao(t,n.contentWindow.document.documentElement);var a=n.contentWindow.document.documentElement?dr(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Ar.TRANSPARENT,s=n.contentWindow.document.body?dr(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):Ar.TRANSPARENT;r.backgroundColor=rr(a)?rr(s)?r.styles.backgroundColor:s:a}}catch(Pt){}return r}return t(n,e),n}(ws),to=["OL","UL","MENU"],no=function(e,t,n,r){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,oo(a)&&a.data.trim().length>0)n.textNodes.push(new Di(e,a,n.styles));else if(lo(a))if(Bo(a)&&a.assignedNodes)a.assignedNodes().forEach(function(t){return no(e,t,n,r)});else{var i=ro(e,a);i.styles.isVisible()&&(so(a,i,r)?i.flags|=4:io(i.styles)&&(i.flags|=2),-1!==to.indexOf(a.tagName)&&(i.flags|=8),n.elements.push(i),a.slot,a.shadowRoot?no(e,a.shadowRoot,i,r):jo(a)||mo(a)||Co(a)||no(e,a,i,r))}},ro=function(e,t){return yo(t)?new Ri(e,t):xo(t)?new Oi(e,t):mo(t)?new Mi(e,t):Ao(t)?new Qi(e,t):ho(t)?new Hi(e,t):fo(t)?new Ji(e,t):Co(t)?new Zi(e,t):jo(t)?new $i(e,t):bo(t)?new eo(e,t):new ws(e,t)},ao=function(e,t){var n=ro(e,t);return n.flags|=4,no(e,t,n,n),n},so=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||go(e)&&n.styles.isTransparent()},io=function(e){return e.isPositioned()||e.isFloating()},oo=function(e){return e.nodeType===Node.TEXT_NODE},lo=function(e){return e.nodeType===Node.ELEMENT_NODE},co=function(e){return lo(e)&&"undefined"!==typeof e.style&&!uo(e)},uo=function(e){return"object"===typeof e.className},Ao=function(e){return"LI"===e.tagName},ho=function(e){return"OL"===e.tagName},fo=function(e){return"INPUT"===e.tagName},po=function(e){return"HTML"===e.tagName},mo=function(e){return"svg"===e.tagName},go=function(e){return"BODY"===e.tagName},xo=function(e){return"CANVAS"===e.tagName},vo=function(e){return"VIDEO"===e.tagName},yo=function(e){return"IMG"===e.tagName},bo=function(e){return"IFRAME"===e.tagName},wo=function(e){return"STYLE"===e.tagName},No=function(e){return"SCRIPT"===e.tagName},jo=function(e){return"TEXTAREA"===e.tagName},Co=function(e){return"SELECT"===e.tagName},Bo=function(e){return"SLOT"===e.tagName},ko=function(e){return e.tagName.indexOf("-")>0},So=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach(function(e){return t.counters[e].pop()})},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,a=!0;null!==n&&n.forEach(function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(a=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)});var s=[];return a&&r.forEach(function(e){var n=t.counters[e.counter];s.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)}),s},e}(),Eo={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Fo={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},_o={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},Io={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},To=function(e,t,n,r,a,s){return e<t||e>n?Ko(e,a,s.length>0):r.integers.reduce(function(t,n,a){for(;e>=n;)e-=n,t+=r.values[a];return t},"")+s},Do=function(e,t,n,r){var a="";do{n||e--,a=r(e)+a,e/=t}while(e*t>=t);return a},Lo=function(e,t,n,r,a){var s=n-t+1;return(e<0?"-":"")+(Do(Math.abs(e),s,r,function(e){return u(Math.floor(e%s)+t)})+a)},Uo=function(e,t,n){void 0===n&&(n=". ");var r=t.length;return Do(Math.abs(e),r,!1,function(e){return t[Math.floor(e%r)]})+n},Po=1,Ro=2,Oo=4,Mo=8,Qo=function(e,t,n,r,a,s){if(e<-9999||e>9999)return Ko(e,4,a.length>0);var i=Math.abs(e),o=a;if(0===i)return t[0]+o;for(var l=0;i>0&&l<=4;l++){var c=i%10;0===c&&as(s,Po)&&""!==o?o=t[c]+o:c>1||1===c&&0===l||1===c&&1===l&&as(s,Ro)||1===c&&1===l&&as(s,Oo)&&e>100||1===c&&l>1&&as(s,Mo)?o=t[c]+(l>0?n[l-1]:"")+o:1===c&&l>0&&(o=n[l-1]+o),i=Math.floor(i/10)}return(e<0?r:"")+o},Ho="\u5341\u767e\u5343\u842c",zo="\u62fe\u4f70\u4edf\u842c",Wo="\u30de\u30a4\u30ca\u30b9",Vo="\ub9c8\uc774\ub108\uc2a4",Ko=function(e,t,n){var r=n?". ":"",a=n?"\u3001":"",s=n?", ":"",i=n?" ":"";switch(t){case 0:return"\u2022"+i;case 1:return"\u25e6"+i;case 2:return"\u25fe"+i;case 5:var o=Lo(e,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return Uo(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",a);case 6:return To(e,1,3999,Eo,3,r).toLowerCase();case 7:return To(e,1,3999,Eo,3,r);case 8:return Lo(e,945,969,!1,r);case 9:return Lo(e,97,122,!1,r);case 10:return Lo(e,65,90,!1,r);case 11:return Lo(e,1632,1641,!0,r);case 12:case 49:return To(e,1,9999,Fo,3,r);case 35:return To(e,1,9999,Fo,3,r).toLowerCase();case 13:return Lo(e,2534,2543,!0,r);case 14:case 30:return Lo(e,6112,6121,!0,r);case 15:return Uo(e,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",a);case 16:return Uo(e,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",a);case 17:case 48:return Qo(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Ho,"\u8ca0",a,Ro|Oo|Mo);case 47:return Qo(e,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396",zo,"\u8ca0",a,Po|Ro|Oo|Mo);case 42:return Qo(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Ho,"\u8d1f",a,Ro|Oo|Mo);case 41:return Qo(e,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396",zo,"\u8d1f",a,Po|Ro|Oo|Mo);case 26:return Qo(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07",Wo,a,0);case 25:return Qo(e,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07",Wo,a,Po|Ro|Oo);case 31:return Qo(e,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",Vo,s,Po|Ro|Oo);case 33:return Qo(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",Vo,s,0);case 32:return Qo(e,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",Vo,s,Po|Ro|Oo);case 18:return Lo(e,2406,2415,!0,r);case 20:return To(e,1,19999,Io,3,r);case 21:return Lo(e,2790,2799,!0,r);case 22:return Lo(e,2662,2671,!0,r);case 22:return To(e,1,10999,_o,3,r);case 23:return Uo(e,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return Uo(e,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return Lo(e,3302,3311,!0,r);case 28:return Uo(e,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",a);case 29:return Uo(e,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",a);case 34:return Lo(e,3792,3801,!0,r);case 37:return Lo(e,6160,6169,!0,r);case 38:return Lo(e,4160,4169,!0,r);case 39:return Lo(e,2918,2927,!0,r);case 40:return Lo(e,1776,1785,!0,r);case 43:return Lo(e,3046,3055,!0,r);case 44:return Lo(e,3174,3183,!0,r);case 45:return Lo(e,3664,3673,!0,r);case 46:return Lo(e,3872,3881,!0,r);default:return Lo(e,48,57,!0,r)}},Go="data-html2canvas-ignore",qo=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new So,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,s=Yo(e,t);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=s.contentWindow,c=l.document,u=$o(s).then(function(){return r(n,void 0,void 0,function(){var e,n;return a(this,function(r){switch(r.label){case 0:return this.scrolledElements.forEach(al),l&&(l.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.scrollY===t.top&&l.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-t.left,l.scrollY-t.top,0,0))),e=this.options.onclone,"undefined"===typeof(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Zo(c)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"===typeof e?[2,Promise.resolve().then(function(){return e(c,n)}).then(function(){return s})]:[2,s]}})})});return c.open(),c.write(nl(document.doctype)+"<html></html>"),rl(this.referenceElement.ownerDocument,i,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(e){if(bs(e,2),xo(e))return this.createCanvasClone(e);if(vo(e))return this.createVideoClone(e);if(wo(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return yo(t)&&(yo(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),ko(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return tl(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(e,t){return t&&"string"===typeof t.cssText?e+t.cssText:e},""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(Pt){if(this.context.logger.error("Unable to access cssRules property",Pt),"SecurityError"!==Pt.name)throw Pt}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(Pt){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var a=e.getContext("2d"),s=r.getContext("2d");if(s)if(!this.options.allowTaint&&a)s.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var i=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(i){var o=i.getContextAttributes();!1===(null===o||void 0===o?void 0:o.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}s.drawImage(e,0,0)}return r}catch(Pt){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(Pt){this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){lo(t)&&(No(t)||t.hasAttribute(Go)||"function"===typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&lo(t)&&wo(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(lo(a)&&Bo(a)&&"function"===typeof a.assignedNodes){var s=a.assignedNodes();s.length&&s.forEach(function(e){return r.appendChildNode(t,e,n)})}else this.appendChildNode(t,a,n)},e.prototype.cloneNode=function(e,t){if(oo(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&lo(e)&&(co(e)||uo(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var a=n.getComputedStyle(e),s=n.getComputedStyle(e,":before"),i=n.getComputedStyle(e,":after");this.referenceElement===e&&co(r)&&(this.clonedReferenceElement=r),go(r)&&ul(r);var o=this.counters.parse(new gs(this.context,a)),l=this.resolvePseudoContent(e,r,s,Vs.BEFORE);ko(e)&&(t=!0),vo(e)||this.cloneChildNodes(e,r,t),l&&r.insertBefore(l,r.firstChild);var c=this.resolvePseudoContent(e,r,i,Vs.AFTER);return c&&r.appendChild(c),this.counters.pop(o),(a&&(this.options.copyStyles||uo(e))&&!bo(e)||t)&&tl(a,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(jo(e)||Co(e))&&(jo(r)||Co(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var a=this;if(n){var s=n.content,i=t.ownerDocument;if(i&&s&&"none"!==s&&"-moz-alt-content"!==s&&"none"!==n.display){this.counters.parse(new gs(this.context,n));var o=new ms(this.context,n),l=i.createElement("html2canvaspseudoelement");tl(n,l),o.content.forEach(function(t){if(0===t.type)l.appendChild(i.createTextNode(t.value));else if(22===t.type){var n=i.createElement("img");n.src=t.value,n.style.opacity="1",l.appendChild(n)}else if(18===t.type){if("attr"===t.name){var r=t.values.filter(Tn);r.length&&l.appendChild(i.createTextNode(e.getAttribute(r[0].value)||""))}else if("counter"===t.name){var s=t.values.filter(Pn),c=s[0],u=s[1];if(c&&Tn(c)){var d=a.counters.getCounterValue(c.value),A=u&&Tn(u)?ja.parse(a.context,u.value):3;l.appendChild(i.createTextNode(Ko(d,A,!1)))}}else if("counters"===t.name){var h=t.values.filter(Pn),f=(c=h[0],h[1]);if(u=h[2],c&&Tn(c)){var p=a.counters.getCounterValues(c.value),m=u&&Tn(u)?ja.parse(a.context,u.value):3,g=f&&0===f.type?f.value:"",x=p.map(function(e){return Ko(e,m,!1)}).join(g);l.appendChild(i.createTextNode(x))}}}else if(20===t.type)switch(t.value){case"open-quote":l.appendChild(i.createTextNode(us(o.quotes,a.quoteDepth++,!0)));break;case"close-quote":l.appendChild(i.createTextNode(us(o.quotes,--a.quoteDepth,!1)));break;default:l.appendChild(i.createTextNode(t.value))}}),l.className=ol+" "+ll;var c=r===Vs.BEFORE?" "+ol:" "+ll;return uo(t)?t.className.baseValue+=c:t.className+=c,l}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(Vs||(Vs={}));var Xo,Yo=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(Go,"true"),e.body.appendChild(n),n},Jo=function(e){return new Promise(function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()})},Zo=function(e){return Promise.all([].slice.call(e.images,0).map(Jo))},$o=function(e){return new Promise(function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var a=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval(function(){a.body.childNodes.length>0&&"complete"===a.readyState&&(clearInterval(n),t(e))},50)}})},el=["all","d","content"],tl=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);-1===el.indexOf(r)&&t.style.setProperty(r,e.getPropertyValue(r))}return t},nl=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},rl=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},al=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},sl=":before",il=":after",ol="___html2canvas___pseudoelement_before",ll="___html2canvas___pseudoelement_after",cl='{\n    content: "" !important;\n    display: none !important;\n}',ul=function(e){dl(e,"."+ol+sl+cl+"\n         ."+ll+il+cl)},dl=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},Al=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),hl=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:yl(e)||gl(e)?((this._cache[e]=this.loadImage(e)).catch(function(){}),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return r(this,void 0,void 0,function(){var t,n,r,s,i=this;return a(this,function(a){switch(a.label){case 0:return t=Al.isSameOrigin(e),n=!xl(e)&&!0===this._options.useCORS&&ji.SUPPORT_CORS_IMAGES&&!t,r=!xl(e)&&!t&&!yl(e)&&"string"===typeof this._options.proxy&&ji.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||xl(e)||yl(e)||r||n?(s=e,r?[4,this.proxy(s)]:[3,2]):[2];case 1:s=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(vl(s)||n)&&(r.crossOrigin="anonymous"),r.src=s,!0===r.complete&&setTimeout(function(){return e(r)},500),i._options.imageTimeout>0&&setTimeout(function(){return t("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},e.prototype.has=function(e){return"undefined"!==typeof this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise(function(a,s){var i=ji.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(200===o.status)if("text"===i)a(o.response);else{var e=new FileReader;e.addEventListener("load",function(){return a(e.result)},!1),e.addEventListener("error",function(e){return s(e)},!1),e.readAsDataURL(o.response)}else s("Failed to proxy resource "+r+" with status code "+o.status)},o.onerror=s;var l=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+l+"url="+encodeURIComponent(e)+"&responseType="+i),"text"!==i&&o instanceof XMLHttpRequest&&(o.responseType=i),t._options.imageTimeout){var c=t._options.imageTimeout;o.timeout=c,o.ontimeout=function(){return s("Timed out ("+c+"ms) proxying "+r)}}o.send()})},e}(),fl=/^data:image\/svg\+xml/i,pl=/^data:image\/.*;base64,/i,ml=/^data:image\/.*/i,gl=function(e){return ji.SUPPORT_SVG_DRAWING||!bl(e)},xl=function(e){return ml.test(e)},vl=function(e){return pl.test(e)},yl=function(e){return"blob"===e.substr(0,4)},bl=function(e){return"svg"===e.substr(-3).toLowerCase()||fl.test(e)},wl=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),Nl=function(e,t,n){return new wl(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},jl=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=Nl(this.start,this.startControl,t),a=Nl(this.startControl,this.endControl,t),s=Nl(this.endControl,this.end,t),i=Nl(r,a,t),o=Nl(a,s,t),l=Nl(i,o,t);return n?new e(this.start,r,i,l):new e(l,o,s,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Cl=function(e){return 1===e.type},Bl=function(){function e(e){var t=e.styles,n=e.bounds,r=Kn(t.borderTopLeftRadius,n.width,n.height),a=r[0],s=r[1],i=Kn(t.borderTopRightRadius,n.width,n.height),o=i[0],l=i[1],c=Kn(t.borderBottomRightRadius,n.width,n.height),u=c[0],d=c[1],A=Kn(t.borderBottomLeftRadius,n.width,n.height),h=A[0],f=A[1],p=[];p.push((a+o)/n.width),p.push((h+u)/n.width),p.push((s+f)/n.height),p.push((l+d)/n.height);var m=Math.max.apply(Math,p);m>1&&(a/=m,s/=m,o/=m,l/=m,u/=m,d/=m,h/=m,f/=m);var g=n.width-o,x=n.height-d,v=n.width-u,y=n.height-f,b=t.borderTopWidth,w=t.borderRightWidth,N=t.borderBottomWidth,j=t.borderLeftWidth,C=Gn(t.paddingTop,e.bounds.width),B=Gn(t.paddingRight,e.bounds.width),k=Gn(t.paddingBottom,e.bounds.width),S=Gn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||s>0?kl(n.left+j/3,n.top+b/3,a-j/3,s-b/3,Xo.TOP_LEFT):new wl(n.left+j/3,n.top+b/3),this.topRightBorderDoubleOuterBox=a>0||s>0?kl(n.left+g,n.top+b/3,o-w/3,l-b/3,Xo.TOP_RIGHT):new wl(n.left+n.width-w/3,n.top+b/3),this.bottomRightBorderDoubleOuterBox=u>0||d>0?kl(n.left+v,n.top+x,u-w/3,d-N/3,Xo.BOTTOM_RIGHT):new wl(n.left+n.width-w/3,n.top+n.height-N/3),this.bottomLeftBorderDoubleOuterBox=h>0||f>0?kl(n.left+j/3,n.top+y,h-j/3,f-N/3,Xo.BOTTOM_LEFT):new wl(n.left+j/3,n.top+n.height-N/3),this.topLeftBorderDoubleInnerBox=a>0||s>0?kl(n.left+2*j/3,n.top+2*b/3,a-2*j/3,s-2*b/3,Xo.TOP_LEFT):new wl(n.left+2*j/3,n.top+2*b/3),this.topRightBorderDoubleInnerBox=a>0||s>0?kl(n.left+g,n.top+2*b/3,o-2*w/3,l-2*b/3,Xo.TOP_RIGHT):new wl(n.left+n.width-2*w/3,n.top+2*b/3),this.bottomRightBorderDoubleInnerBox=u>0||d>0?kl(n.left+v,n.top+x,u-2*w/3,d-2*N/3,Xo.BOTTOM_RIGHT):new wl(n.left+n.width-2*w/3,n.top+n.height-2*N/3),this.bottomLeftBorderDoubleInnerBox=h>0||f>0?kl(n.left+2*j/3,n.top+y,h-2*j/3,f-2*N/3,Xo.BOTTOM_LEFT):new wl(n.left+2*j/3,n.top+n.height-2*N/3),this.topLeftBorderStroke=a>0||s>0?kl(n.left+j/2,n.top+b/2,a-j/2,s-b/2,Xo.TOP_LEFT):new wl(n.left+j/2,n.top+b/2),this.topRightBorderStroke=a>0||s>0?kl(n.left+g,n.top+b/2,o-w/2,l-b/2,Xo.TOP_RIGHT):new wl(n.left+n.width-w/2,n.top+b/2),this.bottomRightBorderStroke=u>0||d>0?kl(n.left+v,n.top+x,u-w/2,d-N/2,Xo.BOTTOM_RIGHT):new wl(n.left+n.width-w/2,n.top+n.height-N/2),this.bottomLeftBorderStroke=h>0||f>0?kl(n.left+j/2,n.top+y,h-j/2,f-N/2,Xo.BOTTOM_LEFT):new wl(n.left+j/2,n.top+n.height-N/2),this.topLeftBorderBox=a>0||s>0?kl(n.left,n.top,a,s,Xo.TOP_LEFT):new wl(n.left,n.top),this.topRightBorderBox=o>0||l>0?kl(n.left+g,n.top,o,l,Xo.TOP_RIGHT):new wl(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||d>0?kl(n.left+v,n.top+x,u,d,Xo.BOTTOM_RIGHT):new wl(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=h>0||f>0?kl(n.left,n.top+y,h,f,Xo.BOTTOM_LEFT):new wl(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||s>0?kl(n.left+j,n.top+b,Math.max(0,a-j),Math.max(0,s-b),Xo.TOP_LEFT):new wl(n.left+j,n.top+b),this.topRightPaddingBox=o>0||l>0?kl(n.left+Math.min(g,n.width-w),n.top+b,g>n.width+w?0:Math.max(0,o-w),Math.max(0,l-b),Xo.TOP_RIGHT):new wl(n.left+n.width-w,n.top+b),this.bottomRightPaddingBox=u>0||d>0?kl(n.left+Math.min(v,n.width-j),n.top+Math.min(x,n.height-N),Math.max(0,u-w),Math.max(0,d-N),Xo.BOTTOM_RIGHT):new wl(n.left+n.width-w,n.top+n.height-N),this.bottomLeftPaddingBox=h>0||f>0?kl(n.left+j,n.top+Math.min(y,n.height-N),Math.max(0,h-j),Math.max(0,f-N),Xo.BOTTOM_LEFT):new wl(n.left+j,n.top+n.height-N),this.topLeftContentBox=a>0||s>0?kl(n.left+j+S,n.top+b+C,Math.max(0,a-(j+S)),Math.max(0,s-(b+C)),Xo.TOP_LEFT):new wl(n.left+j+S,n.top+b+C),this.topRightContentBox=o>0||l>0?kl(n.left+Math.min(g,n.width+j+S),n.top+b+C,g>n.width+j+S?0:o-j+S,l-(b+C),Xo.TOP_RIGHT):new wl(n.left+n.width-(w+B),n.top+b+C),this.bottomRightContentBox=u>0||d>0?kl(n.left+Math.min(v,n.width-(j+S)),n.top+Math.min(x,n.height+b+C),Math.max(0,u-(w+B)),d-(N+k),Xo.BOTTOM_RIGHT):new wl(n.left+n.width-(w+B),n.top+n.height-(N+k)),this.bottomLeftContentBox=h>0||f>0?kl(n.left+j+S,n.top+y,Math.max(0,h-(j+S)),f-(N+k),Xo.BOTTOM_LEFT):new wl(n.left+j+S,n.top+n.height-(N+k))}return e}();!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(Xo||(Xo={}));var kl=function(e,t,n,r,a){var s=(Math.sqrt(2)-1)/3*4,i=n*s,o=r*s,l=e+n,c=t+r;switch(a){case Xo.TOP_LEFT:return new jl(new wl(e,c),new wl(e,c-o),new wl(l-i,t),new wl(l,t));case Xo.TOP_RIGHT:return new jl(new wl(e,t),new wl(e+i,t),new wl(l,c-o),new wl(l,c));case Xo.BOTTOM_RIGHT:return new jl(new wl(l,t),new wl(l,t+o),new wl(e+i,c),new wl(e,c));case Xo.BOTTOM_LEFT:default:return new jl(new wl(l,c),new wl(l-i,c),new wl(e,t+o),new wl(e,t))}},Sl=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},El=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Fl=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},_l=function(){function e(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return e}(),Il=function(){function e(e,t){this.path=e,this.target=t,this.type=1}return e}(),Tl=function(){function e(e){this.opacity=e,this.type=2,this.target=6}return e}(),Dl=function(e){return 0===e.type},Ll=function(e){return 1===e.type},Ul=function(e){return 2===e.type},Pl=function(e,t){return e.length===t.length&&e.some(function(e,n){return e===t[n]})},Rl=function(e,t,n,r,a){return e.map(function(e,s){switch(s){case 0:return e.add(t,n);case 1:return e.add(t+r,n);case 2:return e.add(t+r,n+a);case 3:return e.add(t,n+a)}return e})},Ol=function(){function e(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Ml=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Bl(this.container),this.container.styles.opacity<1&&this.effects.push(new Tl(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new _l(n,r,a))}if(0!==this.container.styles.overflowX){var s=Sl(this.curves),i=Fl(this.curves);Pl(s,i)?this.effects.push(new Il(s,6)):(this.effects.push(new Il(s,2)),this.effects.push(new Il(i,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var a=n.effects.filter(function(e){return!Ll(e)});if(t||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,a),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var s=Sl(n.curves),i=Fl(n.curves);Pl(s,i)||r.unshift(new Il(i,6))}}else r.unshift.apply(r,a);n=n.parent}return r.filter(function(t){return as(t.target,e)})},e}(),Ql=function(e,t,n,r){e.container.elements.forEach(function(a){var s=as(a.flags,4),i=as(a.flags,2),o=new Ml(a,e);as(a.styles.display,2048)&&r.push(o);var l=as(a.flags,8)?[]:r;if(s||i){var c=s||a.styles.isPositioned()?n:t,u=new Ol(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var d=a.styles.zIndex.order;if(d<0){var A=0;c.negativeZIndex.some(function(e,t){return d>e.element.container.styles.zIndex.order?(A=t,!1):A>0}),c.negativeZIndex.splice(A,0,u)}else if(d>0){var h=0;c.positiveZIndex.some(function(e,t){return d>=e.element.container.styles.zIndex.order?(h=t+1,!1):h>0}),c.positiveZIndex.splice(h,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else a.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);Ql(o,u,s?u:n,l)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),Ql(o,t,n,l);as(a.flags,8)&&Hl(a,l)})},Hl=function(e,t){for(var n=e instanceof Hi?e.start:1,r=e instanceof Hi&&e.reversed,a=0;a<t.length;a++){var s=t[a];s.container instanceof Qi&&"number"===typeof s.container.value&&0!==s.container.value&&(n=s.container.value),s.listValue=Ko(n,s.container.styles.listStyleType,!0),n+=r?-1:1}},zl=function(e){var t=new Ml(e,null),n=new Ol(t),r=[];return Ql(t,n,n,r),Hl(t.container,r),n},Wl=function(e,t){switch(t){case 0:return Xl(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Xl(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Xl(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return Xl(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Vl=function(e,t){switch(t){case 0:return Xl(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Xl(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Xl(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return Xl(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Kl=function(e,t){switch(t){case 0:return Xl(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Xl(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Xl(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return Xl(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Gl=function(e,t){switch(t){case 0:return ql(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return ql(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return ql(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return ql(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},ql=function(e,t){var n=[];return Cl(e)?n.push(e.subdivide(.5,!1)):n.push(e),Cl(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Xl=function(e,t,n,r){var a=[];return Cl(e)?a.push(e.subdivide(.5,!1)):a.push(e),Cl(n)?a.push(n.subdivide(.5,!0)):a.push(n),Cl(r)?a.push(r.subdivide(.5,!0).reverse()):a.push(r),Cl(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},Yl=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Jl=function(e){var t=e.styles,n=e.bounds,r=Gn(t.paddingLeft,n.width),a=Gn(t.paddingRight,n.width),s=Gn(t.paddingTop,n.width),i=Gn(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},Zl=function(e,t){return 0===e?t.bounds:2===e?Jl(t):Yl(t)},$l=function(e,t){return 0===e?t.bounds:2===e?Jl(t):Yl(t)},ec=function(e,t,n){var r=Zl(ac(e.styles.backgroundOrigin,t),e),a=$l(ac(e.styles.backgroundClip,t),e),s=rc(ac(e.styles.backgroundSize,t),n,r),i=s[0],o=s[1],l=Kn(ac(e.styles.backgroundPosition,t),r.width-i,r.height-o);return[sc(ac(e.styles.backgroundRepeat,t),l,s,r,a),Math.round(r.left+l[0]),Math.round(r.top+l[1]),i,o]},tc=function(e){return Tn(e)&&e.value===Ur.AUTO},nc=function(e){return"number"===typeof e},rc=function(e,t,n){var r=t[0],a=t[1],s=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(Qn(i)&&o&&Qn(o))return[Gn(i,n.width),Gn(o,n.height)];var l=nc(s);if(Tn(i)&&(i.value===Ur.CONTAIN||i.value===Ur.COVER))return nc(s)?n.width/n.height<s!==(i.value===Ur.COVER)?[n.width,n.width/s]:[n.height*s,n.height]:[n.width,n.height];var c=nc(r),u=nc(a),d=c||u;if(tc(i)&&(!o||tc(o)))return c&&u?[r,a]:l||d?d&&l?[c?r:a*s,u?a:r/s]:[c?r:n.width,u?a:n.height]:[n.width,n.height];if(l){var A=0,h=0;return Qn(i)?A=Gn(i,n.width):Qn(o)&&(h=Gn(o,n.height)),tc(i)?A=h*s:o&&!tc(o)||(h=A/s),[A,h]}var f=null,p=null;if(Qn(i)?f=Gn(i,n.width):o&&Qn(o)&&(p=Gn(o,n.height)),null===f||o&&!tc(o)||(p=c&&u?f/r*a:n.height),null!==p&&tc(i)&&(f=c&&u?p/a*r:n.width),null!==f&&null!==p)return[f,p];throw new Error("Unable to calculate background-size for element")},ac=function(e,t){var n=e[t];return"undefined"===typeof n?e[0]:n},sc=function(e,t,n,r,a){var s=t[0],i=t[1],o=n[0],l=n[1];switch(e){case 2:return[new wl(Math.round(r.left),Math.round(r.top+i)),new wl(Math.round(r.left+r.width),Math.round(r.top+i)),new wl(Math.round(r.left+r.width),Math.round(l+r.top+i)),new wl(Math.round(r.left),Math.round(l+r.top+i))];case 3:return[new wl(Math.round(r.left+s),Math.round(r.top)),new wl(Math.round(r.left+s+o),Math.round(r.top)),new wl(Math.round(r.left+s+o),Math.round(r.height+r.top)),new wl(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new wl(Math.round(r.left+s),Math.round(r.top+i)),new wl(Math.round(r.left+s+o),Math.round(r.top+i)),new wl(Math.round(r.left+s+o),Math.round(r.top+i+l)),new wl(Math.round(r.left+s),Math.round(r.top+i+l))];default:return[new wl(Math.round(a.left),Math.round(a.top)),new wl(Math.round(a.left+a.width),Math.round(a.top)),new wl(Math.round(a.left+a.width),Math.round(a.height+a.top)),new wl(Math.round(a.left),Math.round(a.height+a.top))]}},ic="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",oc="Hidden Text",lc=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),a=this._document.createElement("span"),s=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",s.appendChild(n),r.src=ic,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=t,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(oc)),n.appendChild(a),n.appendChild(r);var i=r.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(oc)),n.style.lineHeight="normal",r.style.verticalAlign="super";var o=r.offsetTop-n.offsetTop+2;return s.removeChild(n),{baseline:i,middle:o}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return"undefined"===typeof this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),cc=function(){function e(e,t){this.context=e,this.options=t}return e}(),uc=1e4,dc=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new lc(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return t(n,e),n.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach(function(e){return t.applyEffect(e)})},n.prototype.applyEffect=function(e){this.ctx.save(),Ul(e)&&(this.ctx.globalAlpha=e.opacity),Dl(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),Ll(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(e){return r(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.renderNode=function(e){return r(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return as(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},n.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):Ei(e.text).reduce(function(t,a){return r.ctx.fillText(a,t,e.bounds.top+n),t+r.ctx.measureText(a).width},e.bounds.left)},n.prototype.createFontStyle=function(e){var t=e.fontVariant.filter(function(e){return"normal"===e||"small-caps"===e}).join(""),n=mc(e.fontFamily).join(", "),r=_n(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},n.prototype.renderTextNode=function(e,t){return r(this,void 0,void 0,function(){var n,r,s,i,o,l,c,u,d=this;return a(this,function(a){return n=this.createFontStyle(t),r=n[0],s=n[1],i=n[2],this.ctx.font=r,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(s,i),l=o.baseline,c=o.middle,u=t.paintOrder,e.textBounds.forEach(function(e){u.forEach(function(n){switch(n){case 0:d.ctx.fillStyle=ar(t.color),d.renderTextWithLetterSpacing(e,t.letterSpacing,l);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach(function(n){d.ctx.shadowColor=ar(n.color),d.ctx.shadowOffsetX=n.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=n.offsetY.number*d.options.scale,d.ctx.shadowBlur=n.blur.number,d.renderTextWithLetterSpacing(e,t.letterSpacing,l)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),t.textDecorationLine.length&&(d.ctx.fillStyle=ar(t.textDecorationColor||t.color),t.textDecorationLine.forEach(function(t){switch(t){case 1:d.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+l),e.bounds.width,1);break;case 2:d.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:d.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+c),e.bounds.width,1)}}));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(d.ctx.strokeStyle=ar(t.webkitTextStrokeColor),d.ctx.lineWidth=t.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+l)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter"}})}),[2]})})},n.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=Jl(e),a=Fl(t);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,function(){var t,r,s,o,l,c,u,d,A,h,f,p,m,g,x,v,y,b;return a(this,function(a){switch(a.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,r=e.curves,s=t.styles,o=0,l=t.textNodes,a.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:a.sent(),a.label=3;case 3:return o++,[3,1];case 4:if(!(t instanceof Ri))return[3,8];a.label=5;case 5:return a.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return x=a.sent(),this.renderReplacedElement(t,r,x),[3,8];case 7:return a.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof Oi&&this.renderReplacedElement(t,r,t.canvas),!(t instanceof Mi))return[3,12];a.label=9;case 9:return a.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return x=a.sent(),this.renderReplacedElement(t,r,x),[3,12];case 11:return a.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof eo&&t.tree?[4,new n(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:u=a.sent(),t.width&&t.height&&this.ctx.drawImage(u,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),a.label=14;case 14:if(t instanceof Ji&&(d=Math.min(t.bounds.width,t.bounds.height),t.type===Gi?t.checked&&(this.ctx.save(),this.path([new wl(t.bounds.left+.39363*d,t.bounds.top+.79*d),new wl(t.bounds.left+.16*d,t.bounds.top+.5549*d),new wl(t.bounds.left+.27347*d,t.bounds.top+.44071*d),new wl(t.bounds.left+.39694*d,t.bounds.top+.5649*d),new wl(t.bounds.left+.72983*d,t.bounds.top+.23*d),new wl(t.bounds.left+.84*d,t.bounds.top+.34085*d),new wl(t.bounds.left+.39363*d,t.bounds.top+.79*d)]),this.ctx.fillStyle=ar(Yi),this.ctx.fill(),this.ctx.restore()):t.type===qi&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+d/2,t.bounds.top+d/2,d/4,0,2*Math.PI,!0),this.ctx.fillStyle=ar(Yi),this.ctx.fill(),this.ctx.restore())),Ac(t)&&t.value.length){switch(A=this.createFontStyle(s),y=A[0],h=A[1],f=this.fontMetrics.getMetrics(y,h).baseline,this.ctx.font=y,this.ctx.fillStyle=ar(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=fc(t.styles.textAlign),b=Jl(t),p=0,t.styles.textAlign){case 1:p+=b.width/2;break;case 2:p+=b.width}m=b.add(p,0,0,-b.height/2+1),this.ctx.save(),this.path([new wl(b.left,b.top),new wl(b.left+b.width,b.top),new wl(b.left+b.width,b.top+b.height),new wl(b.left,b.top+b.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ci(t.value,m),s.letterSpacing,f),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!as(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(g=t.styles.listStyleImage).type)return[3,18];x=void 0,v=g.url,a.label=15;case 15:return a.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return x=a.sent(),this.ctx.drawImage(x,t.bounds.left-(x.width+10),t.bounds.top),[3,18];case 17:return a.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(y=this.createFontStyle(s)[0],this.ctx.font=y,this.ctx.fillStyle=ar(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",b=new i(t.bounds.left,t.bounds.top+Gn(t.styles.paddingTop,t.bounds.width),t.bounds.width,ba(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ci(e.listValue,b),s.letterSpacing,ba(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),a.label=20;case 20:return[2]}})})},n.prototype.renderStackContent=function(e){return r(this,void 0,void 0,function(){var t,n,r,s,i,o,l,c,u,d,A,h,f,p,m;return a(this,function(a){switch(a.label){case 0:return as(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:a.sent(),t=0,n=e.negativeZIndex,a.label=2;case 2:return t<n.length?(m=n[t],[4,this.renderStack(m)]):[3,5];case 3:a.sent(),a.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:a.sent(),r=0,s=e.nonInlineLevel,a.label=7;case 7:return r<s.length?(m=s[r],[4,this.renderNode(m)]):[3,10];case 8:a.sent(),a.label=9;case 9:return r++,[3,7];case 10:i=0,o=e.nonPositionedFloats,a.label=11;case 11:return i<o.length?(m=o[i],[4,this.renderStack(m)]):[3,14];case 12:a.sent(),a.label=13;case 13:return i++,[3,11];case 14:l=0,c=e.nonPositionedInlineLevel,a.label=15;case 15:return l<c.length?(m=c[l],[4,this.renderStack(m)]):[3,18];case 16:a.sent(),a.label=17;case 17:return l++,[3,15];case 18:u=0,d=e.inlineLevel,a.label=19;case 19:return u<d.length?(m=d[u],[4,this.renderNode(m)]):[3,22];case 20:a.sent(),a.label=21;case 21:return u++,[3,19];case 22:A=0,h=e.zeroOrAutoZIndexOrTransformedOrOpacity,a.label=23;case 23:return A<h.length?(m=h[A],[4,this.renderStack(m)]):[3,26];case 24:a.sent(),a.label=25;case 25:return A++,[3,23];case 26:f=0,p=e.positiveZIndex,a.label=27;case 27:return f<p.length?(m=p[f],[4,this.renderStack(m)]):[3,30];case 28:a.sent(),a.label=29;case 29:return f++,[3,27];case 30:return[2]}})})},n.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},n.prototype.formatPath=function(e){var t=this;e.forEach(function(e,n){var r=Cl(e)?e.start:e;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),Cl(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})},n.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},n.prototype.resizeImage=function(e,t,n){var r;if(e.width===t&&e.height===n)return e;var a=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return a.width=Math.max(1,t),a.height=Math.max(1,n),a.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),a},n.prototype.renderBackgroundImage=function(e){return r(this,void 0,void 0,function(){var t,n,r,s,i,o;return a(this,function(l){switch(l.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var s,i,o,l,c,u,d,A,h,f,p,m,g,x,v,y,b,w,N,j,C,B,k,S,E,F,_,I,T,D,L;return a(this,function(a){switch(a.label){case 0:if(0!==n.type)return[3,5];s=void 0,i=n.url,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r.context.cache.match(i)];case 2:return s=a.sent(),[3,4];case 3:return a.sent(),r.context.logger.error("Error loading background-image "+i),[3,4];case 4:return s&&(o=ec(e,t,[s.width,s.height,s.width/s.height]),y=o[0],B=o[1],k=o[2],N=o[3],j=o[4],x=r.ctx.createPattern(r.resizeImage(s,N,j),"repeat"),r.renderRepeat(y,x,B,k)),[3,6];case 5:Ir(n)?(l=ec(e,t,[null,null,null]),y=l[0],B=l[1],k=l[2],N=l[3],j=l[4],c=xr(n.angle,N,j),u=c[0],d=c[1],A=c[2],h=c[3],f=c[4],(p=document.createElement("canvas")).width=N,p.height=j,m=p.getContext("2d"),g=m.createLinearGradient(d,h,A,f),mr(n.stops,u).forEach(function(e){return g.addColorStop(e.stop,ar(e.color))}),m.fillStyle=g,m.fillRect(0,0,N,j),N>0&&j>0&&(x=r.ctx.createPattern(p,"repeat"),r.renderRepeat(y,x,B,k))):Tr(n)&&(v=ec(e,t,[null,null,null]),y=v[0],b=v[1],w=v[2],N=v[3],j=v[4],C=0===n.position.length?[Wn]:n.position,B=Gn(C[0],N),k=Gn(C[C.length-1],j),S=br(n,B,k,N,j),E=S[0],F=S[1],E>0&&F>0&&(_=r.ctx.createRadialGradient(b+B,w+k,0,b+B,w+k,E),mr(n.stops,2*E).forEach(function(e){return _.addColorStop(e.stop,ar(e.color))}),r.path(y),r.ctx.fillStyle=_,E!==F?(I=e.bounds.left+.5*e.bounds.width,T=e.bounds.top+.5*e.bounds.height,L=1/(D=F/E),r.ctx.save(),r.ctx.translate(I,T),r.ctx.transform(1,0,0,D,0,0),r.ctx.translate(-I,-T),r.ctx.fillRect(b,L*(w-T)+T,N,j*L),r.ctx.restore()):r.ctx.fill())),a.label=6;case 6:return t--,[2]}})},r=this,s=0,i=e.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return s<i.length?(o=i[s],[5,n(o)]):[3,4];case 2:l.sent(),l.label=3;case 3:return s++,[3,1];case 4:return[2]}})})},n.prototype.renderSolidBorder=function(e,t,n){return r(this,void 0,void 0,function(){return a(this,function(r){return this.path(Wl(n,t)),this.ctx.fillStyle=ar(e),this.ctx.fill(),[2]})})},n.prototype.renderDoubleBorder=function(e,t,n,s){return r(this,void 0,void 0,function(){var r,i;return a(this,function(a){switch(a.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,s)]:[3,2];case 1:return a.sent(),[2];case 2:return r=Vl(s,n),this.path(r),this.ctx.fillStyle=ar(e),this.ctx.fill(),i=Kl(s,n),this.path(i),this.ctx.fill(),[2]}})})},n.prototype.renderNodeBackgroundAndBorders=function(e){return r(this,void 0,void 0,function(){var t,n,r,s,i,o,l,c,u=this;return a(this,function(a){switch(a.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!rr(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],s=hc(ac(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),rr(t.backgroundColor)||(this.ctx.fillStyle=ar(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:a.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach(function(t){u.ctx.save();var n=Sl(e.curves),r=t.inset?0:uc,a=Rl(n,-r+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(u.path(n),u.ctx.clip(),u.mask(a)):(u.mask(n),u.ctx.clip(),u.path(a)),u.ctx.shadowOffsetX=t.offsetX.number+r,u.ctx.shadowOffsetY=t.offsetY.number,u.ctx.shadowColor=ar(t.color),u.ctx.shadowBlur=t.blur.number,u.ctx.fillStyle=t.inset?ar(t.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),a.label=2;case 2:i=0,o=0,l=r,a.label=3;case 3:return o<l.length?0!==(c=l[o]).style&&!rr(c.color)&&c.width>0?2!==c.style?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,i,e.curves,2)]:[3,11]:[3,13];case 4:return a.sent(),[3,11];case 5:return 3!==c.style?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,i,e.curves,3)];case 6:return a.sent(),[3,11];case 7:return 4!==c.style?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,i,e.curves)];case 8:return a.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,i,e.curves)];case 10:a.sent(),a.label=11;case 11:i++,a.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},n.prototype.renderDashedDottedBorder=function(e,t,n,s,i){return r(this,void 0,void 0,function(){var r,o,l,c,u,d,A,h,f,p,m,g,x,v,y,b;return a(this,function(a){return this.ctx.save(),r=Gl(s,n),o=Wl(s,n),2===i&&(this.path(o),this.ctx.clip()),Cl(o[0])?(l=o[0].start.x,c=o[0].start.y):(l=o[0].x,c=o[0].y),Cl(o[1])?(u=o[1].end.x,d=o[1].end.y):(u=o[1].x,d=o[1].y),A=0===n||2===n?Math.abs(l-u):Math.abs(c-d),this.ctx.beginPath(),3===i?this.formatPath(r):this.formatPath(o.slice(0,2)),h=t<3?3*t:2*t,f=t<3?2*t:t,3===i&&(h=t,f=t),p=!0,A<=2*h?p=!1:A<=2*h+f?(h*=m=A/(2*h+f),f*=m):(g=Math.floor((A+f)/(h+f)),x=(A-g*h)/(g-1),f=(v=(A-(g+1)*h)/g)<=0||Math.abs(f-x)<Math.abs(f-v)?x:v),p&&(3===i?this.ctx.setLineDash([0,h+f]):this.ctx.setLineDash([h,f])),3===i?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=ar(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===i&&(Cl(o[0])&&(y=o[3],b=o[0],this.ctx.beginPath(),this.formatPath([new wl(y.end.x,y.end.y),new wl(b.start.x,b.start.y)]),this.ctx.stroke()),Cl(o[1])&&(y=o[1],b=o[2],this.ctx.beginPath(),this.formatPath([new wl(y.end.x,y.end.y),new wl(b.start.x,b.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},n.prototype.render=function(e){return r(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ar(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=zl(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},n}(cc),Ac=function(e){return e instanceof $i||e instanceof Zi||e instanceof Ji&&e.type!==qi&&e.type!==Gi},hc=function(e,t){switch(e){case 0:return Sl(t);case 2:return El(t);default:return Fl(t)}},fc=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},pc=["-apple-system","system-ui"],mc=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(e){return-1===pc.indexOf(e)}):e},gc=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return t(n,e),n.prototype.render=function(e){return r(this,void 0,void 0,function(){var t,n;return a(this,function(r){switch(r.label){case 0:return t=wi(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,xc(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ar(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},n}(cc),xc=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},vc=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.debug?console.debug.apply(console,s([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!==typeof window&&window.console&&"function"===typeof console.info&&console.info.apply(console,s([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.warn?console.warn.apply(console,s([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.error?console.error.apply(console,s([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),yc=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new vc({id:this.instanceName,enabled:t.logging}),this.cache=null!==(r=t.cache)&&void 0!==r?r:new hl(this,t)}return e.instanceCount=1,e}(),bc=function(e,t){return void 0===t&&(t={}),wc(e,t)};"undefined"!==typeof window&&Al.setContext(window);var wc=function(e,t){return r(void 0,void 0,void 0,function(){var r,s,c,u,d,A,h,f,p,m,g,x,v,y,b,w,N,j,C,B,k,S,E,F,_,I,T,D,L,U,P,R,O,M,Q,H,z,W;return a(this,function(a){switch(a.label){case 0:if(!e||"object"!==typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(r=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(s=r.defaultView))throw new Error("Document is not attached to a Window");return c={allowTaint:null!==(S=t.allowTaint)&&void 0!==S&&S,imageTimeout:null!==(E=t.imageTimeout)&&void 0!==E?E:15e3,proxy:t.proxy,useCORS:null!==(F=t.useCORS)&&void 0!==F&&F},u=n({logging:null===(_=t.logging)||void 0===_||_,cache:t.cache},c),d={windowWidth:null!==(I=t.windowWidth)&&void 0!==I?I:s.innerWidth,windowHeight:null!==(T=t.windowHeight)&&void 0!==T?T:s.innerHeight,scrollX:null!==(D=t.scrollX)&&void 0!==D?D:s.pageXOffset,scrollY:null!==(L=t.scrollY)&&void 0!==L?L:s.pageYOffset},A=new i(d.scrollX,d.scrollY,d.windowWidth,d.windowHeight),h=new yc(u,A),f=null!==(U=t.foreignObjectRendering)&&void 0!==U&&U,p={allowTaint:null!==(P=t.allowTaint)&&void 0!==P&&P,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:f,copyStyles:f},h.logger.debug("Starting document clone with size "+A.width+"x"+A.height+" scrolled to "+-A.left+","+-A.top),m=new qo(h,e,p),(g=m.clonedReferenceElement)?[4,m.toIFrame(r,A)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return x=a.sent(),v=go(g)||po(g)?l(g.ownerDocument):o(h,g),y=v.width,b=v.height,w=v.left,N=v.top,j=Nc(h,g,t.backgroundColor),C={canvas:t.canvas,backgroundColor:j,scale:null!==(O=null!==(R=t.scale)&&void 0!==R?R:s.devicePixelRatio)&&void 0!==O?O:1,x:(null!==(M=t.x)&&void 0!==M?M:0)+w,y:(null!==(Q=t.y)&&void 0!==Q?Q:0)+N,width:null!==(H=t.width)&&void 0!==H?H:Math.ceil(y),height:null!==(z=t.height)&&void 0!==z?z:Math.ceil(b)},f?(h.logger.debug("Document cloned, using foreign object rendering"),[4,new gc(h,C).render(g)]):[3,3];case 2:return B=a.sent(),[3,5];case 3:return h.logger.debug("Document cloned, element located at "+w+","+N+" with size "+y+"x"+b+" using computed rendering"),h.logger.debug("Starting DOM parsing"),k=ao(h,g),j===k.styles.backgroundColor&&(k.styles.backgroundColor=Ar.TRANSPARENT),h.logger.debug("Starting renderer for element at "+C.x+","+C.y+" with size "+C.width+"x"+C.height),[4,new dc(h,C).render(k)];case 4:B=a.sent(),a.label=5;case 5:return(null===(W=t.removeContainer)||void 0===W||W)&&(qo.destroy(x)||h.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),h.logger.debug("Finished rendering"),[2,B]}})})},Nc=function(e,t,n){var r=t.ownerDocument,a=r.documentElement?dr(e,getComputedStyle(r.documentElement).backgroundColor):Ar.TRANSPARENT,s=r.body?dr(e,getComputedStyle(r.body).backgroundColor):Ar.TRANSPARENT,i="string"===typeof n?dr(e,n):null===n?Ar.TRANSPARENT:4294967295;return t===r.documentElement?rr(a)?rr(s)?i:s:a:i};return bc}()},1352:(e,t,n)=>{"use strict";var r=n(7119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<a&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,A=null,h=3,f=!1,p=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(m=!1,y(e),!p)if(null!==r(c))p=!0,T(w);else{var t=r(u);null!==t&&D(b,t.startTime-e)}}function w(e,n){p=!1,m&&(m=!1,x(B),B=-1),f=!0;var s=h;try{for(y(n),A=r(c);null!==A&&(!(A.expirationTime>n)||e&&!E());){var i=A.callback;if("function"===typeof i){A.callback=null,h=A.priorityLevel;var o=i(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?A.callback=o:A===r(c)&&a(c),y(n)}else a(c);A=r(c)}if(null!==A)var l=!0;else{var d=r(u);null!==d&&D(b,d.startTime-n),l=!1}return l}finally{A=null,h=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,j=!1,C=null,B=-1,k=5,S=-1;function E(){return!(t.unstable_now()-S<k)}function F(){if(null!==C){var e=t.unstable_now();S=e;var n=!0;try{n=C(!0,e)}finally{n?N():(j=!1,C=null)}}else j=!1}if("function"===typeof v)N=function(){v(F)};else if("undefined"!==typeof MessageChannel){var _=new MessageChannel,I=_.port2;_.port1.onmessage=F,N=function(){I.postMessage(null)}}else N=function(){g(F,0)};function T(e){C=e,j||(j=!0,N())}function D(e,n){B=g(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,T(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(x(B),B=-1):m=!0,D(b,s-i))):(e.sortIndex=o,n(c,e),p||f||(p=!0,T(w))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},1766:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)},i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function o(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise(function(n,r){t.call(navigator,e,n,r)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var l=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return a(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,o()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(o()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),a=e.minScreenshotWidth!==t.minScreenshotWidth,s=e.minScreenshotHeight!==t.minScreenshotHeight;(r||a||s)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map(function(t){e.removeTrack(t),t.stop()}),e.getAudioTracks().map(function(t){e.removeTrack(t),t.stop()})):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,a=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var s=r/a;a=(r=n.minScreenshotWidth||this.video.clientWidth)/s,n.minScreenshotHeight&&a<n.minScreenshotHeight&&(r=(a=n.minScreenshotHeight)*s)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||a,this.ctx=this.canvas.getContext("2d")}var i=this.ctx,o=this.canvas;return i&&o&&(o.width=(null===e||void 0===e?void 0:e.width)||o.width,o.height=(null===e||void 0===e?void 0:e.height)||o.height,n.mirrored&&(i.translate(o.width,0),i.scale(-1,1)),i.imageSmoothingEnabled=n.imageSmoothing,i.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||o.width,(null===e||void 0===e?void 0:e.height)||o.height),n.mirrored&&(i.scale(-1,1),i.translate(-o.width,0))),o},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,a){var s={video:"undefined"===typeof a||a};n.audio&&(s.audio="undefined"===typeof r||r),e.requestUserMediaId++;var i=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(s).then(function(n){e.unmounted||i!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)}).catch(function(t){e.handleUserMedia(t)})};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var a=function(e){return{optional:[{sourceId:e}]}},s=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources(function(e){var t=null,i=null;e.forEach(function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(i=e.id)});var o=s(n.audioConstraints);o&&(t=o);var l=s(n.videoConstraints);l&&(i=l),r(a(t),a(i))})}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,a=n.audio,o=(n.forceScreenshotSourceSize,n.disablePictureInPicture),l=(n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),c=n.style,u=void 0===c?{}:c,d=n.children,A=i(n,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),h=l?s(s({},u),{transform:(u.transform||"")+" scaleX(-1)"}):u,f={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",s({autoPlay:!0,disablePictureInPicture:o,src:t.src,muted:!a,playsInline:!0,ref:function(t){e.video=t},style:h},A)),d&&d(f))},t.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=l},react:function(t,n){t.exports=e}}).default},e.exports=r(n(9950))},2049:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function x(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=g.prototype;var y=v.prototype=new x;y.constructor=v,p(y,g.prototype),y.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,a)&&!j.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:o,props:s,_owner:N.current}}function B(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===s?"."+S(l,0):s,b(i)?(a="",null!=e&&(a=e.replace(k,"$&/")+"/"),E(i,t,a,"",function(e){return e})):null!=i&&(B(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(k,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+S(o=e[c],c);l+=E(o,t,a,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=E(o=o.value,t,a,u=s+S(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function F(e,t,n){if(null==e)return e;var r=[],a=0;return E(e,r,"","",function(e){return t.call(n,e,a++)}),r}function _(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},T={transition:null},D={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:T,ReactCurrentOwner:N};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:F,forEach:function(e,t,n){F(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return F(e,function(){t++}),t},toArray:function(e){return F(e,function(e){return e})||[]},only:function(e){if(!B(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=i,t.PureComponent=v,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=p({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=N.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!j.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=B,t.lazy=function(e){return{$$typeof:A,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},2284:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},2654:(e,t,n)=>{"use strict";var r=n(9950),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},3826:(e,t,n)=>{"use strict";var r=n(4414),a=n(9950),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)};function i(e,t){var n,r;switch(t.type){case"TYPE":return s(s({},e),{speed:t.speed,text:null===(n=t.payload)||void 0===n?void 0:n.substring(0,e.text.length+1)});case"DELAY":return s(s({},e),{speed:t.payload});case"DELETE":return s(s({},e),{speed:t.speed,text:null===(r=t.payload)||void 0===r?void 0:r.substring(0,e.text.length-1)});case"COUNT":return s(s({},e),{count:e.count+1});default:return e}}var o=function(e){var t=e.words,n=void 0===t?["Hello World!","This is","a simple Typewriter"]:t,r=e.loop,s=void 0===r?1:r,o=e.typeSpeed,l=void 0===o?80:o,c=e.deleteSpeed,u=void 0===c?50:c,d=e.delaySpeed,A=void 0===d?1500:d,h=e.onLoopDone,f=e.onType,p=e.onDelete,m=e.onDelay,g=a.useReducer(i,{speed:l,text:"",count:0}),x=g[0],v=x.speed,y=x.text,b=x.count,w=g[1],N=a.useRef(0),j=a.useRef(!1),C=a.useRef(!1),B=a.useRef(!1),k=a.useRef(!1),S=a.useCallback(function(){var e=b%n.length,t=n[e];C.current?(w({type:"DELETE",payload:t,speed:u}),""===y&&(C.current=!1,w({type:"COUNT"}))):(w({type:"TYPE",payload:t,speed:l}),B.current=!0,y===t&&(w({type:"DELAY",payload:A}),B.current=!1,k.current=!0,setTimeout(function(){k.current=!1,C.current=!0},A),s>0&&(N.current+=1,N.current/n.length===s&&(k.current=!1,j.current=!0)))),B.current&&f&&f(N.current),C.current&&p&&p(),k.current&&m&&m()},[b,A,u,s,l,n,y,f,p,m]);return a.useEffect(function(){var e=setTimeout(S,v);return j.current&&clearTimeout(e),function(){return clearTimeout(e)}},[S,v]),a.useEffect(function(){h&&j.current&&h()},[h]),[y,{isType:B.current,isDelay:k.current,isDelete:C.current,isDone:j.current}]};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".styles-module_blinkingCursor__yugAC{color:inherit;font:inherit;left:3px;line-height:inherit;opacity:1;position:relative;top:0}.styles-module_blinking__9VXRT{animation-duration:.8s;animation-iteration-count:infinite;animation-name:styles-module_blink__rqfaf}@keyframes styles-module_blink__rqfaf{0%{opacity:1}to{opacity:0}}");var l=a.memo(function(e){var t=e.cursorBlinking,n=void 0===t||t,a=e.cursorStyle,i=void 0===a?"|":a,o=e.cursorColor,l=void 0===o?"inherit":o;return r.jsx("span",s({style:{color:l},className:"".concat("styles-module_blinkingCursor__yugAC"," ").concat(n?"styles-module_blinking__9VXRT":"")},{children:i}))});t.d1=o},4414:(e,t,n)=>{"use strict";e.exports=n(2654)},4980:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(2284);function a(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=(0,r.A)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}function s(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},5340:(e,t,n)=>{"use strict";e.exports=n(1761)},5612:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AcroForm:()=>Us,AcroFormAppearance:()=>Ds,AcroFormButton:()=>ks,AcroFormCheckBox:()=>_s,AcroFormChoiceField:()=>Ns,AcroFormComboBox:()=>Cs,AcroFormEditBox:()=>Bs,AcroFormListBox:()=>js,AcroFormPasswordField:()=>Ts,AcroFormPushButton:()=>Ss,AcroFormRadioButton:()=>Es,AcroFormTextField:()=>Is,GState:()=>Va,ShadingPattern:()=>Ga,TilingPattern:()=>qa,default:()=>Xa,jsPDF:()=>Xa});var r=n(2284),a=Uint8Array,s=Uint16Array,i=Int32Array,o=new a([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new a([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new a([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(e,t){for(var n=new s(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var a=new i(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)a[o]=o-n[r]<<5|r;return{b:n,r:a}},d=u(o,2),A=d.b,h=d.r;A[28]=258,h[258]=28;for(var f=u(l,0),p=(f.b,f.r),m=new s(32768),g=0;g<32768;++g){var x=(43690&g)>>1|(21845&g)<<1;x=(61680&(x=(52428&x)>>2|(13107&x)<<2))>>4|(3855&x)<<4,m[g]=((65280&x)>>8|(255&x)<<8)>>1}var v=function(e,t,n){for(var r=e.length,a=0,i=new s(t);a<r;++a)e[a]&&++i[e[a]-1];var o,l=new s(t);for(a=1;a<t;++a)l[a]=l[a-1]+i[a-1]<<1;if(n){o=new s(1<<t);var c=15-t;for(a=0;a<r;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],A=l[e[a]-1]++<<d,h=A|(1<<d)-1;A<=h;++A)o[m[A]>>c]=u}else for(o=new s(r),a=0;a<r;++a)e[a]&&(o[a]=m[l[e[a]-1]++]>>15-e[a]);return o},y=new a(288);for(g=0;g<144;++g)y[g]=8;for(g=144;g<256;++g)y[g]=9;for(g=256;g<280;++g)y[g]=7;for(g=280;g<288;++g)y[g]=8;var b=new a(32);for(g=0;g<32;++g)b[g]=5;var w=v(y,9,0),N=v(b,5,0),j=function(e){return(e+7)/8|0},C=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new a(e.subarray(t,n))},B=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},k=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},S=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return{t:L,l:0};if(1==i){var l=new a(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var c=n[0],u=n[1],d=0,A=1,h=2;for(n[0]={s:-1,f:c.f+u.f,l:c,r:u};A!=i-1;)c=n[n[d].f<n[h].f?d++:h++],u=n[d!=A&&n[d].f<n[h].f?d++:h++],n[A++]={s:-1,f:c.f+u.f,l:c,r:u};var f=o[0].s;for(r=1;r<i;++r)o[r].s>f&&(f=o[r].s);var p=new s(f+1),m=E(n[A-1],p,0);if(m>t){r=0;var g=0,x=m-t,v=1<<x;for(o.sort(function(e,t){return p[t.s]-p[e.s]||e.f-t.f});r<i;++r){var y=o[r].s;if(!(p[y]>t))break;g+=v-(1<<m-p[y]),p[y]=t}for(g>>=x;g>0;){var b=o[r].s;p[b]<t?g-=1<<t-p[b]++-1:++r}for(;r>=0&&g;--r){var w=o[r].s;p[w]==t&&(--p[w],++g)}m=t}return{t:new a(p),l:m}},E=function(e,t,n){return-1==e.s?Math.max(E(e.l,t,n+1),E(e.r,t,n+1)):t[e.s]=n},F=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new s(++t),r=0,a=e[0],i=1,o=function(e){n[r++]=e},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:n.subarray(0,r),n:t}},_=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},I=function(e,t,n){var r=n.length,a=j(t+2);e[a]=255&r,e[a+1]=r>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var s=0;s<r;++s)e[a+s+4]=n[s];return 8*(a+4+r)},T=function(e,t,n,r,a,i,u,d,A,h,f){B(t,f++,n),++a[256];for(var p=S(a,15),m=p.t,g=p.l,x=S(i,15),j=x.t,C=x.l,E=F(m),T=E.c,D=E.n,L=F(j),U=L.c,P=L.n,R=new s(19),O=0;O<T.length;++O)++R[31&T[O]];for(O=0;O<U.length;++O)++R[31&U[O]];for(var M=S(R,7),Q=M.t,H=M.l,z=19;z>4&&!Q[c[z-1]];--z);var W,V,K,G,q=h+5<<3,X=_(a,y)+_(i,b)+u,Y=_(a,m)+_(i,j)+u+14+3*z+_(R,Q)+2*R[16]+3*R[17]+7*R[18];if(A>=0&&q<=X&&q<=Y)return I(t,f,e.subarray(A,A+h));if(B(t,f,1+(Y<X)),f+=2,Y<X){W=v(m,g,0),V=m,K=v(j,C,0),G=j;var J=v(Q,H,0);B(t,f,D-257),B(t,f+5,P-1),B(t,f+10,z-4),f+=14;for(O=0;O<z;++O)B(t,f+3*O,Q[c[O]]);f+=3*z;for(var Z=[T,U],$=0;$<2;++$){var ee=Z[$];for(O=0;O<ee.length;++O){var te=31&ee[O];B(t,f,J[te]),f+=Q[te],te>15&&(B(t,f,ee[O]>>5&127),f+=ee[O]>>12)}}}else W=w,V=y,K=N,G=b;for(O=0;O<d;++O){var ne=r[O];if(ne>255){k(t,f,W[(te=ne>>18&31)+257]),f+=V[te+257],te>7&&(B(t,f,ne>>23&31),f+=o[te]);var re=31&ne;k(t,f,K[re]),f+=G[re],re>3&&(k(t,f,ne>>5&8191),f+=l[re])}else k(t,f,W[ne]),f+=V[ne]}return k(t,f,W[256]),f+V[256]},D=new i([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),L=new a(0),U=function(e,t,n,r,c,u){var d=u.z||e.length,A=new a(r+d+5*(1+Math.ceil(d/7e3))+c),f=A.subarray(r,A.length-c),m=u.l,g=7&(u.r||0);if(t){g&&(f[0]=u.r>>3);for(var x=D[t-1],v=x>>13,y=8191&x,b=(1<<n)-1,w=u.p||new s(32768),N=u.h||new s(b+1),B=Math.ceil(n/3),k=2*B,S=function(t){return(e[t]^e[t+1]<<B^e[t+2]<<k)&b},E=new i(25e3),F=new s(288),_=new s(32),L=0,U=0,P=u.i||0,R=0,O=u.w||0,M=0;P+2<d;++P){var Q=S(P),H=32767&P,z=N[Q];if(w[H]=z,N[Q]=H,O<=P){var W=d-P;if((L>7e3||R>24576)&&(W>423||!m)){g=T(e,f,0,E,F,_,U,R,M,P-M,g),R=L=U=0,M=P;for(var V=0;V<286;++V)F[V]=0;for(V=0;V<30;++V)_[V]=0}var K=2,G=0,q=y,X=H-z&32767;if(W>2&&Q==S(P-X))for(var Y=Math.min(v,W)-1,J=Math.min(32767,P),Z=Math.min(258,W);X<=J&&--q&&H!=z;){if(e[P+K]==e[P+K-X]){for(var $=0;$<Z&&e[P+$]==e[P+$-X];++$);if($>K){if(K=$,G=X,$>Y)break;var ee=Math.min(X,$-2),te=0;for(V=0;V<ee;++V){var ne=P-X+V&32767,re=ne-w[ne]&32767;re>te&&(te=re,z=ne)}}}X+=(H=z)-(z=w[H])&32767}if(G){E[R++]=268435456|h[K]<<18|p[G];var ae=31&h[K],se=31&p[G];U+=o[ae]+l[se],++F[257+ae],++_[se],O=P+K,++L}else E[R++]=e[P],++F[e[P]]}}for(P=Math.max(P,O);P<d;++P)E[R++]=e[P],++F[e[P]];g=T(e,f,m,E,F,_,U,R,M,P-M,g),m||(u.r=7&g|f[g/8|0]<<3,g-=7,u.h=N,u.p=w,u.i=P,u.w=O)}else{for(P=u.w||0;P<d+m;P+=65535){var ie=P+65535;ie>=d&&(f[g/8|0]=m,ie=d),g=I(f,g+1,e.subarray(P,ie))}u.i=d}return C(A,0,r+j(g)+c)},P=function(){var e=1,t=0;return{p:function(n){for(var r=e,a=t,s=0|n.length,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=r+=n[i];r=(65535&r)+15*(r>>16),a=(65535&a)+15*(a>>16)}e=r,t=a},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},R=function(e,t,n,r,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new a(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return U(e,null==t.level?6:t.level,null==t.mem?s.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,s)},O=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},M=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=P();a.p(t.dictionary),O(e,2,a.d())}};function Q(e,t){t||(t={});var n=P();n.p(e);var r=R(e,t,t.dictionary?6:2,4);return M(r,t),O(r,r.length-4,n.d()),r}var H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(L,{stream:!0})}catch(Wi){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var V=n(4980);function K(e){return new TextDecoder(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8").decode(e)}const G=new TextEncoder;const q=(()=>{const e=new Uint8Array(4);return!((new Uint32Array(e.buffer)[0]=1)&e[0])})(),X={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Y{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8192,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,V.A)(this,"buffer",void 0),(0,V.A)(this,"byteLength",void 0),(0,V.A)(this,"byteOffset",void 0),(0,V.A)(this,"length",void 0),(0,V.A)(this,"offset",void 0),(0,V.A)(this,"lastWrittenByte",void 0),(0,V.A)(this,"littleEndian",void 0),(0,V.A)(this,"_data",void 0),(0,V.A)(this,"_mark",void 0),(0,V.A)(this,"_marks",void 0);let n=!1;"number"===typeof e?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const r=t.offset?t.offset>>>0:0,a=e.byteLength-r;let s=r;(ArrayBuffer.isView(e)||e instanceof Y)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+r),e=e.buffer),this.lastWrittenByte=n?a:0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,a),this._mark=0,this._marks=[]}available(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+=e,this}back(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(void 0===e)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.available(e)){const t=2*(this.offset+e),n=new Uint8Array(t);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=t,this.byteLength=t,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.readArray(e,"uint8")}readArray(e,t){const n=X[t].BYTES_PER_ELEMENT*e,r=this.byteOffset+this.offset,a=this.buffer.slice(r,r+n);if(this.littleEndian===q&&"uint8"!==t&&"int8"!==t){const e=new Uint8Array(this.buffer.slice(r,r+n));e.reverse();const a=new X[t](e.buffer);return this.offset+=n,a.reverse(),a}const s=new X[t](a);return this.offset+=n,s}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return K(this.readBytes(e))}decodeText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return K(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(function(e){return G.encode(e)}(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function J(e){let t=e.length;for(;--t>=0;)e[t]=0}const Z=256,$=286,ee=30,te=15,ne=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),re=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ae=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),se=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ie=new Array(576);J(ie);const oe=new Array(60);J(oe);const le=new Array(512);J(le);const ce=new Array(256);J(ce);const ue=new Array(29);J(ue);const de=new Array(ee);function Ae(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}let he,fe,pe;function me(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}J(de);const ge=e=>e<256?le[e]:le[256+(e>>>7)],xe=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ve=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,xe(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},ye=(e,t,n)=>{ve(e,n[2*t],n[2*t+1])},be=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},we=(e,t,n)=>{const r=new Array(16);let a,s,i=0;for(a=1;a<=te;a++)i=i+n[a-1]<<1,r[a]=i;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=be(r[t]++,t))}},Ne=e=>{let t;for(t=0;t<$;t++)e.dyn_ltree[2*t]=0;for(t=0;t<ee;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},je=e=>{e.bi_valid>8?xe(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Ce=(e,t,n,r)=>{const a=2*t,s=2*n;return e[a]<e[s]||e[a]===e[s]&&r[t]<=r[n]},Be=(e,t,n)=>{const r=e.heap[n];let a=n<<1;for(;a<=e.heap_len&&(a<e.heap_len&&Ce(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!Ce(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r},ke=(e,t,n)=>{let r,a,s,i,o=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+o++],r+=(255&e.pending_buf[e.sym_buf+o++])<<8,a=e.pending_buf[e.sym_buf+o++],0===r?ye(e,a,t):(s=ce[a],ye(e,s+Z+1,t),i=ne[s],0!==i&&(a-=ue[s],ve(e,a,i)),r--,s=ge(r),ye(e,s,n),i=re[s],0!==i&&(r-=de[s],ve(e,r,i)))}while(o<e.sym_next);ye(e,256,t)},Se=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.elems;let i,o,l,c=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<s;i++)0!==n[2*i]?(e.heap[++e.heap_len]=c=i,e.depth[i]=0):n[2*i+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,a&&(e.static_len-=r[2*l+1]);for(t.max_code=c,i=e.heap_len>>1;i>=1;i--)Be(e,n,i);l=s;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Be(e,n,1),o=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=o,n[2*l]=n[2*i]+n[2*o],e.depth[l]=(e.depth[i]>=e.depth[o]?e.depth[i]:e.depth[o])+1,n[2*i+1]=n[2*o+1]=l,e.heap[1]=l++,Be(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,i=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,A,h,f,p=0;for(A=0;A<=te;A++)e.bl_count[A]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)u=e.heap[c],A=n[2*n[2*u+1]+1]+1,A>l&&(A=l,p++),n[2*u+1]=A,u>r||(e.bl_count[A]++,h=0,u>=o&&(h=i[u-o]),f=n[2*u],e.opt_len+=f*(A+h),s&&(e.static_len+=f*(a[2*u+1]+h)));if(0!==p){do{for(A=l-1;0===e.bl_count[A];)A--;e.bl_count[A]--,e.bl_count[A+1]+=2,e.bl_count[l]--,p-=2}while(p>0);for(A=l;0!==A;A--)for(u=e.bl_count[A];0!==u;)d=e.heap[--c],d>r||(n[2*d+1]!==A&&(e.opt_len+=(A-n[2*d+1])*n[2*d],n[2*d+1]=A),u--)}})(e,t),we(n,c,e.bl_count)},Ee=(e,t,n)=>{let r,a,s=-1,i=t[1],o=0,l=7,c=4;for(0===i&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=i,i=t[2*(r+1)+1],++o<l&&a===i||(o<c?e.bl_tree[2*a]+=o:0!==a?(a!==s&&e.bl_tree[2*a]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,s=a,0===i?(l=138,c=3):a===i?(l=6,c=3):(l=7,c=4))},Fe=(e,t,n)=>{let r,a,s=-1,i=t[1],o=0,l=7,c=4;for(0===i&&(l=138,c=3),r=0;r<=n;r++)if(a=i,i=t[2*(r+1)+1],!(++o<l&&a===i)){if(o<c)do{ye(e,a,e.bl_tree)}while(0!==--o);else 0!==a?(a!==s&&(ye(e,a,e.bl_tree),o--),ye(e,16,e.bl_tree),ve(e,o-3,2)):o<=10?(ye(e,17,e.bl_tree),ve(e,o-3,3)):(ye(e,18,e.bl_tree),ve(e,o-11,7));o=0,s=a,0===i?(l=138,c=3):a===i?(l=6,c=3):(l=7,c=4)}};let _e=!1;const Ie=(e,t,n,r)=>{ve(e,0+(r?1:0),3),je(e),xe(e,n),xe(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var Te=e=>{_e||((()=>{let e,t,n,r,a;const s=new Array(16);for(n=0,r=0;r<28;r++)for(ue[r]=n,e=0;e<1<<ne[r];e++)ce[n++]=r;for(ce[n-1]=r,a=0,r=0;r<16;r++)for(de[r]=a,e=0;e<1<<re[r];e++)le[a++]=r;for(a>>=7;r<ee;r++)for(de[r]=a<<7,e=0;e<1<<re[r]-7;e++)le[256+a++]=r;for(t=0;t<=te;t++)s[t]=0;for(e=0;e<=143;)ie[2*e+1]=8,e++,s[8]++;for(;e<=255;)ie[2*e+1]=9,e++,s[9]++;for(;e<=279;)ie[2*e+1]=7,e++,s[7]++;for(;e<=287;)ie[2*e+1]=8,e++,s[8]++;for(we(ie,287,s),e=0;e<ee;e++)oe[2*e+1]=5,oe[2*e]=be(e,5);he=new Ae(ie,ne,257,$,te),fe=new Ae(oe,re,0,ee,te),pe=new Ae(new Array(0),ae,0,19,7)})(),_e=!0),e.l_desc=new me(e.dyn_ltree,he),e.d_desc=new me(e.dyn_dtree,fe),e.bl_desc=new me(e.bl_tree,pe),e.bi_buf=0,e.bi_valid=0,Ne(e)},De=(e,t,n,r)=>{let a,s,i=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<Z;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),Se(e,e.l_desc),Se(e,e.d_desc),i=(e=>{let t;for(Ee(e,e.dyn_ltree,e.l_desc.max_code),Ee(e,e.dyn_dtree,e.d_desc.max_code),Se(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*se[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==t?Ie(e,t,n,r):4===e.strategy||s===a?(ve(e,2+(r?1:0),3),ke(e,ie,oe)):(ve(e,4+(r?1:0),3),((e,t,n,r)=>{let a;for(ve(e,t-257,5),ve(e,n-1,5),ve(e,r-4,4),a=0;a<r;a++)ve(e,e.bl_tree[2*se[a]+1],3);Fe(e,e.dyn_ltree,t-1),Fe(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),ke(e,e.dyn_ltree,e.dyn_dtree)),Ne(e),r&&je(e)},Le=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ce[n]+Z+1)]++,e.dyn_dtree[2*ge(t)]++),e.sym_next===e.sym_end),Ue=e=>{ve(e,2,3),ye(e,256,ie),(e=>{16===e.bi_valid?(xe(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},Pe={_tr_init:Te,_tr_stored_block:Ie,_tr_flush_block:De,_tr_tally:Le,_tr_align:Ue};var Re=(e,t,n,r)=>{let a=65535&e,s=e>>>16&65535,i=0;for(;0!==n;){i=n>2e3?2e3:n,n-=i;do{a=a+t[r++]|0,s=s+a|0}while(--i);a%=65521,s%=65521}return a|s<<16};const Oe=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Me=(e,t,n,r)=>{const a=Oe,s=r+n;e^=-1;for(let i=r;i<s;i++)e=e>>>8^a[255&(e^t[i])];return-1^e},Qe={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},He={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ze,_tr_stored_block:We,_tr_flush_block:Ve,_tr_tally:Ke,_tr_align:Ge}=Pe,{Z_NO_FLUSH:qe,Z_PARTIAL_FLUSH:Xe,Z_FULL_FLUSH:Ye,Z_FINISH:Je,Z_BLOCK:Ze,Z_OK:$e,Z_STREAM_END:et,Z_STREAM_ERROR:tt,Z_DATA_ERROR:nt,Z_BUF_ERROR:rt,Z_DEFAULT_COMPRESSION:at,Z_FILTERED:st,Z_HUFFMAN_ONLY:it,Z_RLE:ot,Z_FIXED:lt,Z_DEFAULT_STRATEGY:ct,Z_UNKNOWN:ut,Z_DEFLATED:dt}=He,At=258,ht=262,ft=42,pt=113,mt=666,gt=(e,t)=>(e.msg=Qe[t],t),xt=e=>2*e-(e>4?9:0),vt=e=>{let t=e.length;for(;--t>=0;)e[t]=0},yt=e=>{let t,n,r,a=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=a?n-a:0}while(--t);t=a,r=t;do{n=e.prev[--r],e.prev[r]=n>=a?n-a:0}while(--t)};let bt=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const wt=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Nt=(e,t)=>{Ve(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,wt(e.strm)},jt=(e,t)=>{e.pending_buf[e.pending++]=t},Ct=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Bt=(e,t,n,r)=>{let a=e.avail_in;return a>r&&(a=r),0===a?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),n),1===e.state.wrap?e.adler=Re(e.adler,t,a,n):2===e.state.wrap&&(e.adler=Me(e.adler,t,a,n)),e.next_in+=a,e.total_in+=a,a)},kt=(e,t)=>{let n,r,a=e.max_chain_length,s=e.strstart,i=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-ht?e.strstart-(e.w_size-ht):0,c=e.window,u=e.w_mask,d=e.prev,A=e.strstart+At;let h=c[s+i-1],f=c[s+i];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,c[n+i]===f&&c[n+i-1]===h&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<A);if(r=At-(A-s),s=A-At,r>i){if(e.match_start=t,i=r,r>=o)break;h=c[s+i-1],f=c[s+i]}}}while((t=d[t&u])>l&&0!==--a);return i<=e.lookahead?i:e.lookahead},St=e=>{const t=e.w_size;let n,r,a;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ht)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),yt(e),r+=t),0===e.strm.avail_in)break;if(n=Bt(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=bt(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=bt(e,e.ins_h,e.window[a+3-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ht&&0!==e.strm.avail_in)},Et=(e,t)=>{let n,r,a,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,i=0,o=e.strm.avail_in;do{if(n=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a)break;if(a=e.strm.avail_out-a,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>a&&(n=a),n<s&&(0===n&&t!==Je||t===qe||n!==r+e.strm.avail_in))break;i=t===Je&&n===r+e.strm.avail_in?1:0,We(e,0,0,i),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,wt(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Bt(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===i);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),i?4:t!==qe&&t!==Je&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(Bt(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,s=a>e.w_size?e.w_size:a,r=e.strstart-e.block_start,(r>=s||(r||t===Je)&&t!==qe&&0===e.strm.avail_in&&r<=a)&&(n=r>a?a:r,i=t===Je&&0===e.strm.avail_in&&n===r?1:0,We(e,e.block_start,n,i),e.block_start+=n,wt(e.strm)),i?3:1)},Ft=(e,t)=>{let n,r;for(;;){if(e.lookahead<ht){if(St(e),e.lookahead<ht&&t===qe)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=bt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ht&&(e.match_length=kt(e,n)),e.match_length>=3)if(r=Ke(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=bt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=bt(e,e.ins_h,e.window[e.strstart+1]);else r=Ke(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Nt(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Je?(Nt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Nt(e,!1),0===e.strm.avail_out)?1:2},_t=(e,t)=>{let n,r,a;for(;;){if(e.lookahead<ht){if(St(e),e.lookahead<ht&&t===qe)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=bt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ht&&(e.match_length=kt(e,n),e.match_length<=5&&(e.strategy===st||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=Ke(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=bt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Nt(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=Ke(e,0,e.window[e.strstart-1]),r&&Nt(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Ke(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Je?(Nt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Nt(e,!1),0===e.strm.avail_out)?1:2};function It(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}const Tt=[new It(0,0,0,0,Et),new It(4,4,8,4,Ft),new It(4,5,16,8,Ft),new It(4,6,32,32,Ft),new It(4,4,16,16,_t),new It(8,16,32,32,_t),new It(8,16,128,128,_t),new It(8,32,128,256,_t),new It(32,128,258,1024,_t),new It(32,258,258,4096,_t)];function Dt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=dt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),vt(this.dyn_ltree),vt(this.dyn_dtree),vt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),vt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),vt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Lt=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==ft&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==pt&&t.status!==mt?1:0},Ut=e=>{if(Lt(e))return gt(e,tt);e.total_in=e.total_out=0,e.data_type=ut;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?ft:pt,e.adler=2===t.wrap?0:1,t.last_flush=-2,ze(t),$e},Pt=e=>{const t=Ut(e);return t===$e&&(e=>{e.window_size=2*e.w_size,vt(e.head),e.max_lazy_match=Tt[e.level].max_lazy,e.good_match=Tt[e.level].good_length,e.nice_match=Tt[e.level].nice_length,e.max_chain_length=Tt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},Rt=(e,t,n,r,a,s)=>{if(!e)return tt;let i=1;if(t===at&&(t=6),r<0?(i=0,r=-r):r>15&&(i=2,r-=16),a<1||a>9||n!==dt||r<8||r>15||t<0||t>9||s<0||s>lt||8===r&&1!==i)return gt(e,tt);8===r&&(r=9);const o=new Dt;return e.state=o,o.strm=e,o.status=ft,o.wrap=i,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=s,o.method=n,Pt(e)};var Ot=(e,t)=>{if(Lt(e)||t>Ze||t<0)return e?gt(e,tt):tt;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===mt&&t!==Je)return gt(e,0===e.avail_out?rt:tt);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(wt(e),0===e.avail_out)return n.last_flush=-1,$e}else if(0===e.avail_in&&xt(t)<=xt(r)&&t!==Je)return gt(e,rt);if(n.status===mt&&0!==e.avail_in)return gt(e,rt);if(n.status===ft&&0===n.wrap&&(n.status=pt),n.status===ft){let t=dt+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=it||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,Ct(n,t),0!==n.strstart&&(Ct(n,e.adler>>>16),Ct(n,65535&e.adler)),e.adler=1,n.status=pt,wt(e),0!==n.pending)return n.last_flush=-1,$e}if(57===n.status)if(e.adler=0,jt(n,31),jt(n,139),jt(n,8),n.gzhead)jt(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),jt(n,255&n.gzhead.time),jt(n,n.gzhead.time>>8&255),jt(n,n.gzhead.time>>16&255),jt(n,n.gzhead.time>>24&255),jt(n,9===n.level?2:n.strategy>=it||n.level<2?4:0),jt(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(jt(n,255&n.gzhead.extra.length),jt(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Me(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(jt(n,0),jt(n,0),jt(n,0),jt(n,0),jt(n,0),jt(n,9===n.level?2:n.strategy>=it||n.level<2?4:0),jt(n,3),n.status=pt,wt(e),0!==n.pending)return n.last_flush=-1,$e;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let a=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=Me(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=a,wt(e),0!==n.pending)return n.last_flush=-1,$e;t=0,r-=a}let a=new Uint8Array(n.gzhead.extra);n.pending_buf.set(a.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=Me(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Me(e.adler,n.pending_buf,n.pending-r,r)),wt(e),0!==n.pending)return n.last_flush=-1,$e;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,jt(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Me(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Me(e.adler,n.pending_buf,n.pending-r,r)),wt(e),0!==n.pending)return n.last_flush=-1,$e;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,jt(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Me(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(wt(e),0!==n.pending))return n.last_flush=-1,$e;jt(n,255&e.adler),jt(n,e.adler>>8&255),e.adler=0}if(n.status=pt,wt(e),0!==n.pending)return n.last_flush=-1,$e}if(0!==e.avail_in||0!==n.lookahead||t!==qe&&n.status!==mt){let r=0===n.level?Et(n,t):n.strategy===it?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(St(e),0===e.lookahead)){if(t===qe)return 1;break}if(e.match_length=0,n=Ke(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Nt(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Je?(Nt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Nt(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===ot?((e,t)=>{let n,r,a,s;const i=e.window;for(;;){if(e.lookahead<=At){if(St(e),e.lookahead<=At&&t===qe)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(a=e.strstart-1,r=i[a],r===i[++a]&&r===i[++a]&&r===i[++a])){s=e.strstart+At;do{}while(r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&a<s);e.match_length=At-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Ke(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ke(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Nt(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Je?(Nt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Nt(e,!1),0===e.strm.avail_out)?1:2})(n,t):Tt[n.level].func(n,t);if(3!==r&&4!==r||(n.status=mt),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),$e;if(2===r&&(t===Xe?Ge(n):t!==Ze&&(We(n,0,0,!1),t===Ye&&(vt(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),wt(e),0===e.avail_out))return n.last_flush=-1,$e}return t!==Je?$e:n.wrap<=0?et:(2===n.wrap?(jt(n,255&e.adler),jt(n,e.adler>>8&255),jt(n,e.adler>>16&255),jt(n,e.adler>>24&255),jt(n,255&e.total_in),jt(n,e.total_in>>8&255),jt(n,e.total_in>>16&255),jt(n,e.total_in>>24&255)):(Ct(n,e.adler>>>16),Ct(n,65535&e.adler)),wt(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?$e:et)},Mt=(e,t)=>{let n=t.length;if(Lt(e))return tt;const r=e.state,a=r.wrap;if(2===a||1===a&&r.status!==ft||r.lookahead)return tt;if(1===a&&(e.adler=Re(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===a&&(vt(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const s=e.avail_in,i=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,St(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=bt(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,St(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=i,e.input=o,e.avail_in=s,r.wrap=a,$e},Qt={deflateInit:(e,t)=>Rt(e,t,dt,15,8,ct),deflateInit2:Rt,deflateReset:Pt,deflateResetKeep:Ut,deflateSetHeader:(e,t)=>Lt(e)||2!==e.state.wrap?tt:(e.state.gzhead=t,$e),deflate:Ot,deflateEnd:e=>{if(Lt(e))return tt;const t=e.state.status;return e.state=null,t===pt?gt(e,nt):$e},deflateSetDictionary:Mt,deflateInfo:"pako deflate (from Nodeca project)"};const Ht=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var zt=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Ht(n,t)&&(e[t]=n[t])}}return e},Wt=e=>{let t=0;for(let r=0,a=e.length;r<a;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,a=0,s=e.length;r<s;r++){let t=e[r];n.set(t,a),a+=t.length}return n};let Vt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Vi){Vt=!1}const Kt=new Uint8Array(256);for(let Ki=0;Ki<256;Ki++)Kt[Ki]=Ki>=252?6:Ki>=248?5:Ki>=240?4:Ki>=224?3:Ki>=192?2:1;Kt[254]=Kt[254]=1;var Gt=e=>{if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,a,s,i=e.length,o=0;for(a=0;a<i;a++)n=e.charCodeAt(a),55296===(64512&n)&&a+1<i&&(r=e.charCodeAt(a+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),a++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),s=0,a=0;s<o;a++)n=e.charCodeAt(a),55296===(64512&n)&&a+1<i&&(r=e.charCodeAt(a+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),a++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},qt=(e,t)=>{const n=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,a;const s=new Array(2*n);for(a=0,r=0;r<n;){let t=e[r++];if(t<128){s[a++]=t;continue}let i=Kt[t];if(i>4)s[a++]=65533,r+=i-1;else{for(t&=2===i?31:3===i?15:7;i>1&&r<n;)t=t<<6|63&e[r++],i--;i>1?s[a++]=65533:t<65536?s[a++]=t:(t-=65536,s[a++]=55296|t>>10&1023,s[a++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Vt)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(s,a)},Xt=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128===(192&e[n]);)n--;return n<0||0===n?t:n+Kt[e[n]]>t?n:t};var Yt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Jt=Object.prototype.toString,{Z_NO_FLUSH:Zt,Z_SYNC_FLUSH:$t,Z_FULL_FLUSH:en,Z_FINISH:tn,Z_OK:nn,Z_STREAM_END:rn,Z_DEFAULT_COMPRESSION:an,Z_DEFAULT_STRATEGY:sn,Z_DEFLATED:on}=He;function ln(e){this.options=zt({level:an,method:on,chunkSize:16384,windowBits:15,memLevel:8,strategy:sn},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Yt,this.strm.avail_out=0;let n=Qt.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==nn)throw new Error(Qe[n]);if(t.header&&Qt.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"===typeof t.dictionary?Gt(t.dictionary):"[object ArrayBuffer]"===Jt.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Qt.deflateSetDictionary(this.strm,e),n!==nn)throw new Error(Qe[n]);this._dict_set=!0}}function cn(e,t){const n=new ln(t);if(n.push(e,!0),n.err)throw n.msg||Qe[n.err];return n.result}ln.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let a,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?tn:Zt,"string"===typeof e?n.input=Gt(e):"[object ArrayBuffer]"===Jt.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===$t||s===en)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(a=Qt.deflate(n,s),a===rn)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),a=Qt.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===nn;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},ln.prototype.onData=function(e){this.chunks.push(e)},ln.prototype.onEnd=function(e){e===nn&&(this.result=Wt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var un={Deflate:ln,deflate:cn,deflateRaw:function(e,t){return(t=t||{}).raw=!0,cn(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,cn(e,t)},constants:He};const dn=16209;var An=function(e,t){let n,r,a,s,i,o,l,c,u,d,A,h,f,p,m,g,x,v,y,b,w,N,j,C;const B=e.state;n=e.next_in,j=e.input,r=n+(e.avail_in-5),a=e.next_out,C=e.output,s=a-(t-e.avail_out),i=a+(e.avail_out-257),o=B.dmax,l=B.wsize,c=B.whave,u=B.wnext,d=B.window,A=B.hold,h=B.bits,f=B.lencode,p=B.distcode,m=(1<<B.lenbits)-1,g=(1<<B.distbits)-1;e:do{h<15&&(A+=j[n++]<<h,h+=8,A+=j[n++]<<h,h+=8),x=f[A&m];t:for(;;){if(v=x>>>24,A>>>=v,h-=v,v=x>>>16&255,0===v)C[a++]=65535&x;else{if(!(16&v)){if(0===(64&v)){x=f[(65535&x)+(A&(1<<v)-1)];continue t}if(32&v){B.mode=16191;break e}e.msg="invalid literal/length code",B.mode=dn;break e}y=65535&x,v&=15,v&&(h<v&&(A+=j[n++]<<h,h+=8),y+=A&(1<<v)-1,A>>>=v,h-=v),h<15&&(A+=j[n++]<<h,h+=8,A+=j[n++]<<h,h+=8),x=p[A&g];n:for(;;){if(v=x>>>24,A>>>=v,h-=v,v=x>>>16&255,!(16&v)){if(0===(64&v)){x=p[(65535&x)+(A&(1<<v)-1)];continue n}e.msg="invalid distance code",B.mode=dn;break e}if(b=65535&x,v&=15,h<v&&(A+=j[n++]<<h,h+=8,h<v&&(A+=j[n++]<<h,h+=8)),b+=A&(1<<v)-1,b>o){e.msg="invalid distance too far back",B.mode=dn;break e}if(A>>>=v,h-=v,v=a-s,b>v){if(v=b-v,v>c&&B.sane){e.msg="invalid distance too far back",B.mode=dn;break e}if(w=0,N=d,0===u){if(w+=l-v,v<y){y-=v;do{C[a++]=d[w++]}while(--v);w=a-b,N=C}}else if(u<v){if(w+=l+u-v,v-=u,v<y){y-=v;do{C[a++]=d[w++]}while(--v);if(w=0,u<y){v=u,y-=v;do{C[a++]=d[w++]}while(--v);w=a-b,N=C}}}else if(w+=u-v,v<y){y-=v;do{C[a++]=d[w++]}while(--v);w=a-b,N=C}for(;y>2;)C[a++]=N[w++],C[a++]=N[w++],C[a++]=N[w++],y-=3;y&&(C[a++]=N[w++],y>1&&(C[a++]=N[w++]))}else{w=a-b;do{C[a++]=C[w++],C[a++]=C[w++],C[a++]=C[w++],y-=3}while(y>2);y&&(C[a++]=C[w++],y>1&&(C[a++]=C[w++]))}break}}break}}while(n<r&&a<i);y=h>>3,n-=y,h-=y<<3,A&=(1<<h)-1,e.next_in=n,e.next_out=a,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=a<i?i-a+257:257-(a-i),B.hold=A,B.bits=h};const hn=15,fn=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),pn=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),mn=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),gn=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var xn=(e,t,n,r,a,s,i,o)=>{const l=o.bits;let c,u,d,A,h,f,p=0,m=0,g=0,x=0,v=0,y=0,b=0,w=0,N=0,j=0,C=null;const B=new Uint16Array(16),k=new Uint16Array(16);let S,E,F,_=null;for(p=0;p<=hn;p++)B[p]=0;for(m=0;m<r;m++)B[t[n+m]]++;for(v=l,x=hn;x>=1&&0===B[x];x--);if(v>x&&(v=x),0===x)return a[s++]=20971520,a[s++]=20971520,o.bits=1,0;for(g=1;g<x&&0===B[g];g++);for(v<g&&(v=g),w=1,p=1;p<=hn;p++)if(w<<=1,w-=B[p],w<0)return-1;if(w>0&&(0===e||1!==x))return-1;for(k[1]=0,p=1;p<hn;p++)k[p+1]=k[p]+B[p];for(m=0;m<r;m++)0!==t[n+m]&&(i[k[t[n+m]]++]=m);if(0===e?(C=_=i,f=20):1===e?(C=fn,_=pn,f=257):(C=mn,_=gn,f=0),j=0,m=0,p=g,h=s,y=v,b=0,d=-1,N=1<<v,A=N-1,1===e&&N>852||2===e&&N>592)return 1;for(;;){S=p-b,i[m]+1<f?(E=0,F=i[m]):i[m]>=f?(E=_[i[m]-f],F=C[i[m]-f]):(E=96,F=0),c=1<<p-b,u=1<<y,g=u;do{u-=c,a[h+(j>>b)+u]=S<<24|E<<16|F}while(0!==u);for(c=1<<p-1;j&c;)c>>=1;if(0!==c?(j&=c-1,j+=c):j=0,m++,0===--B[p]){if(p===x)break;p=t[n+i[m]]}if(p>v&&(j&A)!==d){for(0===b&&(b=v),h+=g,y=p-b,w=1<<y;y+b<x&&(w-=B[y+b],!(w<=0));)y++,w<<=1;if(N+=1<<y,1===e&&N>852||2===e&&N>592)return 1;d=j&A,a[d]=v<<24|y<<16|h-s}}return 0!==j&&(a[h+j]=p-b<<24|64<<16),o.bits=v,0};const{Z_FINISH:vn,Z_BLOCK:yn,Z_TREES:bn,Z_OK:wn,Z_STREAM_END:Nn,Z_NEED_DICT:jn,Z_STREAM_ERROR:Cn,Z_DATA_ERROR:Bn,Z_MEM_ERROR:kn,Z_BUF_ERROR:Sn,Z_DEFLATED:En}=He,Fn=16180,_n=16190,In=16191,Tn=16192,Dn=16194,Ln=16199,Un=16200,Pn=16206,Rn=16209,On=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Mn(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Qn=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Fn||t.mode>16211?1:0},Hn=e=>{if(Qn(e))return Cn;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Fn,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,wn},zn=e=>{if(Qn(e))return Cn;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Hn(e)},Wn=(e,t)=>{let n;if(Qn(e))return Cn;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Cn:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,zn(e))},Vn=(e,t)=>{if(!e)return Cn;const n=new Mn;e.state=n,n.strm=e,n.window=null,n.mode=Fn;const r=Wn(e,t);return r!==wn&&(e.state=null),r};let Kn,Gn,qn=!0;const Xn=e=>{if(qn){Kn=new Int32Array(512),Gn=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(xn(1,e.lens,0,288,Kn,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;xn(2,e.lens,0,32,Gn,0,e.work,{bits:5}),qn=!1}e.lencode=Kn,e.lenbits=9,e.distcode=Gn,e.distbits=5},Yn=(e,t,n,r)=>{let a;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>r&&(a=r),s.window.set(t.subarray(n-r,n-r+a),s.wnext),(r-=a)?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0};var Jn=(e,t)=>{let n,r,a,s,i,o,l,c,u,d,A,h,f,p,m,g,x,v,y,b,w,N,j=0;const C=new Uint8Array(4);let B,k;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Qn(e)||!e.output||!e.input&&0!==e.avail_in)return Cn;n=e.state,n.mode===In&&(n.mode=Tn),i=e.next_out,a=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,c=n.hold,u=n.bits,d=o,A=l,N=wn;e:for(;;)switch(n.mode){case Fn:if(0===n.wrap){n.mode=Tn;break}for(;u<16;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,C[0]=255&c,C[1]=c>>>8&255,n.check=Me(n.check,C,2,0),c=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Rn;break}if((15&c)!==En){e.msg="unknown compression method",n.mode=Rn;break}if(c>>>=4,u-=4,w=8+(15&c),0===n.wbits&&(n.wbits=w),w>15||w>n.wbits){e.msg="invalid window size",n.mode=Rn;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:In,c=0,u=0;break;case 16181:for(;u<16;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==En){e.msg="unknown compression method",n.mode=Rn;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Rn;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Me(n.check,C,2,0)),c=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,n.check=Me(n.check,C,4,0)),c=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Me(n.check,C,2,0)),c=0,u=0,n.mode=16184;case 16184:if(1024&n.flags){for(;u<16;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Me(n.check,C,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(h=n.length,h>o&&(h=o),h&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+h),w)),512&n.flags&&4&n.wrap&&(n.check=Me(n.check,r,h,s)),o-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break e;h=0;do{w=r[s+h++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&h<o);if(512&n.flags&&4&n.wrap&&(n.check=Me(n.check,r,h,s)),o-=h,s+=h,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break e;h=0;do{w=r[s+h++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&h<o);if(512&n.flags&&4&n.wrap&&(n.check=Me(n.check,r,h,s)),o-=h,s+=h,w)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;u<16;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Rn;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=In;break;case 16189:for(;u<32;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}e.adler=n.check=On(c),c=0,u=0,n.mode=_n;case _n:if(0===n.havedict)return e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=u,jn;e.adler=n.check=1,n.mode=In;case In:if(t===yn||t===bn)break e;case Tn:if(n.last){c>>>=7&u,u-=7&u,n.mode=Pn;break}for(;u<3;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}switch(n.last=1&c,c>>>=1,u-=1,3&c){case 0:n.mode=16193;break;case 1:if(Xn(n),n.mode=Ln,t===bn){c>>>=2,u-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Rn}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if((65535&c)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Rn;break}if(n.length=65535&c,c=0,u=0,n.mode=Dn,t===bn)break e;case Dn:n.mode=16195;case 16195:if(h=n.length,h){if(h>o&&(h=o),h>l&&(h=l),0===h)break e;a.set(r.subarray(s,s+h),i),o-=h,s+=h,l-=h,i+=h,n.length-=h;break}n.mode=In;break;case 16196:for(;u<14;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Rn;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}n.lens[S[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[S[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,B={bits:n.lenbits},N=xn(0,n.lens,0,19,n.lencode,0,n.work,B),n.lenbits=B.bits,N){e.msg="invalid code lengths set",n.mode=Rn;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;j=n.lencode[c&(1<<n.lenbits)-1],m=j>>>24,g=j>>>16&255,x=65535&j,!(m<=u);){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(x<16)c>>>=m,u-=m,n.lens[n.have++]=x;else{if(16===x){for(k=m+2;u<k;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(c>>>=m,u-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=Rn;break}w=n.lens[n.have-1],h=3+(3&c),c>>>=2,u-=2}else if(17===x){for(k=m+3;u<k;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}c>>>=m,u-=m,w=0,h=3+(7&c),c>>>=3,u-=3}else{for(k=m+7;u<k;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}c>>>=m,u-=m,w=0,h=11+(127&c),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Rn;break}for(;h--;)n.lens[n.have++]=w}}if(n.mode===Rn)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Rn;break}if(n.lenbits=9,B={bits:n.lenbits},N=xn(1,n.lens,0,n.nlen,n.lencode,0,n.work,B),n.lenbits=B.bits,N){e.msg="invalid literal/lengths set",n.mode=Rn;break}if(n.distbits=6,n.distcode=n.distdyn,B={bits:n.distbits},N=xn(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,B),n.distbits=B.bits,N){e.msg="invalid distances set",n.mode=Rn;break}if(n.mode=Ln,t===bn)break e;case Ln:n.mode=Un;case Un:if(o>=6&&l>=258){e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=u,An(e,A),i=e.next_out,a=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,c=n.hold,u=n.bits,n.mode===In&&(n.back=-1);break}for(n.back=0;j=n.lencode[c&(1<<n.lenbits)-1],m=j>>>24,g=j>>>16&255,x=65535&j,!(m<=u);){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(g&&0===(240&g)){for(v=m,y=g,b=x;j=n.lencode[b+((c&(1<<v+y)-1)>>v)],m=j>>>24,g=j>>>16&255,x=65535&j,!(v+m<=u);){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}c>>>=v,u-=v,n.back+=v}if(c>>>=m,u-=m,n.back+=m,n.length=x,0===g){n.mode=16205;break}if(32&g){n.back=-1,n.mode=In;break}if(64&g){e.msg="invalid literal/length code",n.mode=Rn;break}n.extra=15&g,n.mode=16201;case 16201:if(n.extra){for(k=n.extra;u<k;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;j=n.distcode[c&(1<<n.distbits)-1],m=j>>>24,g=j>>>16&255,x=65535&j,!(m<=u);){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(0===(240&g)){for(v=m,y=g,b=x;j=n.distcode[b+((c&(1<<v+y)-1)>>v)],m=j>>>24,g=j>>>16&255,x=65535&j,!(v+m<=u);){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}c>>>=v,u-=v,n.back+=v}if(c>>>=m,u-=m,n.back+=m,64&g){e.msg="invalid distance code",n.mode=Rn;break}n.offset=x,n.extra=15&g,n.mode=16203;case 16203:if(n.extra){for(k=n.extra;u<k;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Rn;break}n.mode=16204;case 16204:if(0===l)break e;if(h=A-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Rn;break}h>n.wnext?(h-=n.wnext,f=n.wsize-h):f=n.wnext-h,h>n.length&&(h=n.length),p=n.window}else p=a,f=i-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do{a[i++]=p[f++]}while(--h);0===n.length&&(n.mode=Un);break;case 16205:if(0===l)break e;a[i++]=n.length,l--,n.mode=Un;break;case Pn:if(n.wrap){for(;u<32;){if(0===o)break e;o--,c|=r[s++]<<u,u+=8}if(A-=l,e.total_out+=A,n.total+=A,4&n.wrap&&A&&(e.adler=n.check=n.flags?Me(n.check,a,A,i-A):Re(n.check,a,A,i-A)),A=l,4&n.wrap&&(n.flags?c:On(c))!==n.check){e.msg="incorrect data check",n.mode=Rn;break}c=0,u=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;u<32;){if(0===o)break e;o--,c+=r[s++]<<u,u+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Rn;break}c=0,u=0}n.mode=16208;case 16208:N=Nn;break e;case Rn:N=Bn;break e;case 16210:return kn;default:return Cn}return e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=c,n.bits=u,(n.wsize||A!==e.avail_out&&n.mode<Rn&&(n.mode<Pn||t!==vn))&&Yn(e,e.output,e.next_out,A-e.avail_out),d-=e.avail_in,A-=e.avail_out,e.total_in+=d,e.total_out+=A,n.total+=A,4&n.wrap&&A&&(e.adler=n.check=n.flags?Me(n.check,a,A,e.next_out-A):Re(n.check,a,A,e.next_out-A)),e.data_type=n.bits+(n.last?64:0)+(n.mode===In?128:0)+(n.mode===Ln||n.mode===Dn?256:0),(0===d&&0===A||t===vn)&&N===wn&&(N=Sn),N},Zn={inflateReset:zn,inflateReset2:Wn,inflateResetKeep:Hn,inflateInit:e=>Vn(e,15),inflateInit2:Vn,inflate:Jn,inflateEnd:e=>{if(Qn(e))return Cn;let t=e.state;return t.window&&(t.window=null),e.state=null,wn},inflateGetHeader:(e,t)=>{if(Qn(e))return Cn;const n=e.state;return 0===(2&n.wrap)?Cn:(n.head=t,t.done=!1,wn)},inflateSetDictionary:(e,t)=>{const n=t.length;let r,a,s;return Qn(e)?Cn:(r=e.state,0!==r.wrap&&r.mode!==_n?Cn:r.mode===_n&&(a=1,a=Re(a,t,n,0),a!==r.check)?Bn:(s=Yn(e,t,n,n),s?(r.mode=16210,kn):(r.havedict=1,wn)))},inflateInfo:"pako inflate (from Nodeca project)"};var $n=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const er=Object.prototype.toString,{Z_NO_FLUSH:tr,Z_FINISH:nr,Z_OK:rr,Z_STREAM_END:ar,Z_NEED_DICT:sr,Z_STREAM_ERROR:ir,Z_DATA_ERROR:or,Z_MEM_ERROR:lr}=He;function cr(e){this.options=zt({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Yt,this.strm.avail_out=0;let n=Zn.inflateInit2(this.strm,t.windowBits);if(n!==rr)throw new Error(Qe[n]);if(this.header=new $n,Zn.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=Gt(t.dictionary):"[object ArrayBuffer]"===er.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Zn.inflateSetDictionary(this.strm,t.dictionary),n!==rr)))throw new Error(Qe[n])}function ur(e,t){const n=new cr(t);if(n.push(e),n.err)throw n.msg||Qe[n.err];return n.result}cr.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,a=this.options.dictionary;let s,i,o;if(this.ended)return!1;for(i=t===~~t?t:!0===t?nr:tr,"[object ArrayBuffer]"===er.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Zn.inflate(n,i),s===sr&&a&&(s=Zn.inflateSetDictionary(n,a),s===rr?s=Zn.inflate(n,i):s===or&&(s=sr));n.avail_in>0&&s===ar&&n.state.wrap>0&&0!==e[n.next_in];)Zn.inflateReset(n),s=Zn.inflate(n,i);switch(s){case ir:case or:case sr:case lr:return this.onEnd(s),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||s===ar))if("string"===this.options.to){let e=Xt(n.output,n.next_out),t=n.next_out-e,a=qt(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(a)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==rr||0!==o){if(s===ar)return s=Zn.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},cr.prototype.onData=function(e){this.chunks.push(e)},cr.prototype.onEnd=function(e){e===rr&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Wt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var dr={Inflate:cr,inflate:ur,inflateRaw:function(e,t){return(t=t||{}).raw=!0,ur(e,t)},ungzip:ur,constants:He};const{Deflate:Ar,deflate:hr,deflateRaw:fr,gzip:pr}=un,{Inflate:mr,inflate:gr,inflateRaw:xr,ungzip:vr}=dr;var yr=mr,br=gr;const wr=[];for(let Ki=0;Ki<256;Ki++){let e=Ki;for(let t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;wr[Ki]=e}const Nr=4294967295;function jr(e,t){return(function(e,t,n){let r=e;for(let a=0;a<n;a++)r=wr[255&(r^t[a])]^r>>>8;return r}(Nr,e,t)^Nr)>>>0}function Cr(e,t,n){const r=e.readUint32(),a=jr(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==r)throw new Error("CRC mismatch for chunk ".concat(n,". Expected ").concat(r,", found ").concat(a))}function Br(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function kr(e,t,n,r){let a=0;for(;a<r;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+t[a-r]&255}function Sr(e,t,n,r){let a=0;if(0===n.length)for(;a<r;a++)t[a]=e[a];else for(;a<r;a++)t[a]=e[a]+n[a]&255}function Er(e,t,n,r,a){let s=0;if(0===n.length){for(;s<a;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+(t[s-a]>>1)&255}else{for(;s<a;s++)t[s]=e[s]+(n[s]>>1)&255;for(;s<r;s++)t[s]=e[s]+(t[s-a]+n[s]>>1)&255}}function Fr(e,t,n,r,a){let s=0;if(0===n.length){for(;s<a;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+t[s-a]&255}else{for(;s<a;s++)t[s]=e[s]+n[s]&255;for(;s<r;s++)t[s]=e[s]+_r(t[s-a],n[s],n[s-a])&255}}function _r(e,t,n){const r=e+t-n,a=Math.abs(r-e),s=Math.abs(r-t),i=Math.abs(r-n);return a<=s&&a<=i?e:s<=i?t:n}function Ir(e,t,n,r,a,s){switch(e){case 0:Br(t,n,a);break;case 1:kr(t,n,a,s);break;case 2:Sr(t,n,r,a);break;case 3:Er(t,n,r,a,s);break;case 4:Fr(t,n,r,a,s);break;default:throw new Error("Unsupported filter: ".concat(e))}}const Tr=new Uint16Array([255]),Dr=255===new Uint8Array(Tr.buffer)[0];function Lr(e){return(255&e)<<8|e>>8&255}const Ur=new Uint16Array([255]),Pr=255===new Uint8Array(Ur.buffer)[0],Rr=new Uint8Array(0);function Or(e){const{data:t,width:n,height:r,channels:a,depth:s}=e,i=Math.ceil(s/8)*a,o=Math.ceil(s/8*a*n),l=new Uint8Array(r*o);let c,u,d=Rr,A=0;for(let h=0;h<r;h++){switch(c=t.subarray(A+1,A+1+o),u=l.subarray(h*o,(h+1)*o),t[A]){case 0:Br(c,u,o);break;case 1:kr(c,u,o,i);break;case 2:Sr(c,u,d,o);break;case 3:Er(c,u,d,o,i);break;case 4:Fr(c,u,d,o,i);break;default:throw new Error("Unsupported filter: ".concat(t[A]))}d=u,A+=o+1}if(16===s){const e=new Uint16Array(l.buffer);if(Pr)for(let t=0;t<e.length;t++)e[t]=Mr(e[t]);return e}return l}function Mr(e){return(255&e)<<8|e>>8&255}const Qr=Uint8Array.of(137,80,78,71,13,10,26,10);function Hr(e){if(!function(e){if(e.length<Qr.length)return!1;for(let t=0;t<Qr.length;t++)if(e[t]!==Qr[t])return!1;return!0}(e.readBytes(Qr.length)))throw new Error("wrong PNG signature")}const zr="tEXt",Wr=new TextDecoder("latin1");function Vr(e){if(Gr(e),0===e.length||e.length>79)throw new Error("keyword length must be between 1 and 79")}const Kr=/^[\u0000-\u00FF]*$/;function Gr(e){if(!Kr.test(e))throw new Error("invalid latin1 text")}function qr(e,t,n){const r=Xr(t);e[r]=function(e,t){return Wr.decode(e.readBytes(t))}(t,n-r.length-1)}function Xr(e){for(e.mark();0!==e.readByte(););const t=e.offset;e.reset();const n=Wr.decode(e.readBytes(t-e.offset-1));return e.skip(1),Vr(n),n}const Yr=-1,Jr=0,Zr=2,$r=3,ea=4,ta=6,na=-1,ra=0,aa=-1,sa=0,ia=-1,oa=0,la=1,ca=0,ua=1,da=2,Aa=0,ha=1;class fa extends Y{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),(0,V.A)(this,"_checkCrc",void 0),(0,V.A)(this,"_inflator",void 0),(0,V.A)(this,"_png",void 0),(0,V.A)(this,"_apng",void 0),(0,V.A)(this,"_end",void 0),(0,V.A)(this,"_hasPalette",void 0),(0,V.A)(this,"_palette",void 0),(0,V.A)(this,"_hasTransparency",void 0),(0,V.A)(this,"_transparency",void 0),(0,V.A)(this,"_compressionMethod",void 0),(0,V.A)(this,"_filterMethod",void 0),(0,V.A)(this,"_interlaceMethod",void 0),(0,V.A)(this,"_colorType",void 0),(0,V.A)(this,"_isAnimated",void 0),(0,V.A)(this,"_numberOfFrames",void 0),(0,V.A)(this,"_numberOfPlays",void 0),(0,V.A)(this,"_frames",void 0),(0,V.A)(this,"_writingDataChunks",void 0);const{checkCrc:n=!1}=t;this._checkCrc=n,this._inflator=new yr,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=na,this._filterMethod=aa,this._interlaceMethod=ia,this._colorType=Yr,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Hr(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(Hr(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const n=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case zr:qr(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e)}if(this.offset-n!==e)throw new Error("Length mismatch while decoding chunk ".concat(t));this._checkCrc?Cr(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const n=this.offset;switch("fdAT"!==t&&"IDAT"!==t&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=n+e}if(this.offset-n!==e)throw new Error("Length mismatch while decoding chunk ".concat(t));this._checkCrc?Cr(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=function(e){if(1!==e&&2!==e&&4!==e&&8!==e&&16!==e)throw new Error("invalid bit depth: ".concat(e));return e}(this.readUint8());const t=this.readUint8();let n;switch(this._colorType=t,t){case Jr:n=1;break;case Zr:n=3;break;case $r:n=1;break;case ea:n=2;break;case ta:n=4;break;default:throw new Error("Unknown color type: ".concat(t))}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==ra)throw new Error("Unsupported compression method: ".concat(this._compressionMethod));this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError("PLTE field length must be a multiple of 3. Got ".concat(e));const t=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let r=0;r<t;r++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,n=this.offset+this.byteOffset;if(n+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));this.skip(e)}decodetRNS(e){switch(this._colorType){case Jr:case Zr:if(e%2!==0)throw new RangeError("tRNS chunk length must be a multiple of 2. Got ".concat(e));if(e/2>this._png.width*this._png.height)throw new Error("tRNS chunk contains more alpha values than there are pixels (".concat(e/2," vs ").concat(this._png.width*this._png.height,")"));this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break;case $r:{if(e>this._palette.length)throw new Error("tRNS chunk contains more alpha values than there are palette colors (".concat(e," vs ").concat(this._palette.length,")"));let t=0;for(;t<e;t++){const e=this.readByte();this._palette[t].push(e)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}default:throw new Error("tRNS chunk is not supported for color type ".concat(this._colorType))}}decodeiCCP(e){const t=Xr(this),n=this.readUint8();if(n!==ra)throw new Error("Unsupported iCCP compression method: ".concat(n));const r=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:br(r)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:t,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:8===this._apng.depth?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=Or({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),0===e||0===n.xOffset&&0===n.yOffset&&n.width===this._png.width&&n.height===this._png.height)t.data=n.data;else{const r=this._apng.frames.at(e-1);this.disposeFrame(n,r,t),this.addFrameDataToCanvas(t,n)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,n){switch(e.disposeOp){case ca:break;case ua:for(let t=0;t<this._png.height;t++)for(let r=0;r<this._png.width;r++){const a=(t*e.width+r)*this._png.channels;for(let e=0;e<this._png.channels;e++)n.data[a+e]=0}break;case da:n.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const n=1<<this._png.depth,r=(e,n)=>({index:((e+t.yOffset)*this._png.width+t.xOffset+n)*this._png.channels,frameIndex:(e*t.width+n)*this._png.channels});switch(t.blendOp){case Aa:for(let n=0;n<t.height;n++)for(let a=0;a<t.width;a++){const{index:s,frameIndex:i}=r(n,a);for(let n=0;n<this._png.channels;n++)e.data[s+n]=t.data[i+n]}break;case ha:for(let a=0;a<t.height;a++)for(let s=0;s<t.width;s++){const{index:i,frameIndex:o}=r(a,s);for(let r=0;r<this._png.channels;r++){const a=t.data[o+this._png.channels-1]/n,s=r%(this._png.channels-1)===0?1:t.data[o+r],l=Math.floor(a*s+(1-a)*e.data[i+r]);e.data[i+r]+=l}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var e;if(this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));const t=this._isAnimated?(null===(e=this._frames)||void 0===e?void 0:e.at(0)).data:this._inflator.result;if(this._filterMethod!==sa)throw new Error("Filter method ".concat(this._filterMethod," not supported"));if(this._interlaceMethod===oa)this._png.data=Or({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else{if(this._interlaceMethod!==la)throw new Error("Interlace method ".concat(this._interlaceMethod," not supported"));this._png.data=function(e){const{data:t,width:n,height:r,channels:a,depth:s}=e,i=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*a,l=new Uint8Array(r*n*o);let c=0;for(let u=0;u<7;u++){const e=i[u],a=Math.ceil((n-e.x)/e.xStep),s=Math.ceil((r-e.y)/e.yStep);if(a<=0||s<=0)continue;const d=a*o,A=new Uint8Array(d);for(let i=0;i<s;i++){const s=t[c++],u=t.subarray(c,c+d);c+=d;const h=new Uint8Array(d);Ir(s,u,h,A,d,o),A.set(h);for(let t=0;t<a;t++){const a=e.x+t*e.xStep,s=e.y+i*e.yStep;if(!(a>=n||s>=r))for(let e=0;e<o;e++)l[(s*n+a)*o+e]=h[t*o+e]}}}if(16===s){const e=new Uint16Array(l.buffer);if(Dr)for(let t=0;t<e.length;t++)e[t]=Lr(e[t]);return e}return l}({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth})}this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:ca,blendOp:Aa,data:e}),this._inflator=new yr,this._writingDataChunks=!1}}n(9379);var pa;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"}(pa||(pa={}));var ma=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function ga(){ma.console&&"function"==typeof ma.console.log&&ma.console.log.apply(ma.console,arguments)}var xa={log:ga,warn:function(e){ma.console&&("function"==typeof ma.console.warn?ma.console.warn.apply(ma.console,arguments):ga.call(null,arguments))},error:function(e){ma.console&&("function"==typeof ma.console.error?ma.console.error.apply(ma.console,arguments):ga(e))}};function va(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){wa(r.response,t,n)},r.onerror=function(){xa.error("could not download file")},r.send()}function ya(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return t.status>=200&&t.status<=299}function ba(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var wa=ma.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,r.A)(window))||window!==ma?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=ma.URL||ma.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener","string"==typeof e?(a.href=e,a.origin!==location.origin?ya(a.href)?va(e,t,n):ba(a,a.target="_blank"):ba(a)):(a.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){ba(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(ya(e))va(e,t,n);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){ba(a)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,r.A)(t)&&(xa.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return va(e,t,n);var s="application/octet-stream"===e.type,i=/constructor/i.test(ma.HTMLElement)||ma.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&"object"===("undefined"==typeof FileReader?"undefined":(0,r.A)(FileReader))){var l=new FileReader;l.onloadend=function(){var e=l.result;e=o?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},l.readAsDataURL(e)}else{var c=ma.URL||ma.webkitURL,u=c.createObjectURL(e);a?a.location=u:location.href=u,a=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});function Na(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<n.length;r++){var a=n[r].re,s=n[r].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}var ja=ma.atob.bind(ma),Ca=ma.btoa.bind(ma);function Ba(e,t){var n=e[0],r=e[1],a=e[2],s=e[3];n=Sa(n,r,a,s,t[0],7,-680876936),s=Sa(s,n,r,a,t[1],12,-389564586),a=Sa(a,s,n,r,t[2],17,606105819),r=Sa(r,a,s,n,t[3],22,-1044525330),n=Sa(n,r,a,s,t[4],7,-176418897),s=Sa(s,n,r,a,t[5],12,1200080426),a=Sa(a,s,n,r,t[6],17,-1473231341),r=Sa(r,a,s,n,t[7],22,-45705983),n=Sa(n,r,a,s,t[8],7,1770035416),s=Sa(s,n,r,a,t[9],12,-1958414417),a=Sa(a,s,n,r,t[10],17,-42063),r=Sa(r,a,s,n,t[11],22,-1990404162),n=Sa(n,r,a,s,t[12],7,1804603682),s=Sa(s,n,r,a,t[13],12,-40341101),a=Sa(a,s,n,r,t[14],17,-1502002290),n=Ea(n,r=Sa(r,a,s,n,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Ea(s,n,r,a,t[6],9,-1069501632),a=Ea(a,s,n,r,t[11],14,643717713),r=Ea(r,a,s,n,t[0],20,-373897302),n=Ea(n,r,a,s,t[5],5,-701558691),s=Ea(s,n,r,a,t[10],9,38016083),a=Ea(a,s,n,r,t[15],14,-660478335),r=Ea(r,a,s,n,t[4],20,-405537848),n=Ea(n,r,a,s,t[9],5,568446438),s=Ea(s,n,r,a,t[14],9,-1019803690),a=Ea(a,s,n,r,t[3],14,-187363961),r=Ea(r,a,s,n,t[8],20,1163531501),n=Ea(n,r,a,s,t[13],5,-1444681467),s=Ea(s,n,r,a,t[2],9,-51403784),a=Ea(a,s,n,r,t[7],14,1735328473),n=Fa(n,r=Ea(r,a,s,n,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Fa(s,n,r,a,t[8],11,-2022574463),a=Fa(a,s,n,r,t[11],16,1839030562),r=Fa(r,a,s,n,t[14],23,-35309556),n=Fa(n,r,a,s,t[1],4,-1530992060),s=Fa(s,n,r,a,t[4],11,1272893353),a=Fa(a,s,n,r,t[7],16,-155497632),r=Fa(r,a,s,n,t[10],23,-1094730640),n=Fa(n,r,a,s,t[13],4,681279174),s=Fa(s,n,r,a,t[0],11,-358537222),a=Fa(a,s,n,r,t[3],16,-722521979),r=Fa(r,a,s,n,t[6],23,76029189),n=Fa(n,r,a,s,t[9],4,-640364487),s=Fa(s,n,r,a,t[12],11,-421815835),a=Fa(a,s,n,r,t[15],16,530742520),n=_a(n,r=Fa(r,a,s,n,t[2],23,-995338651),a,s,t[0],6,-198630844),s=_a(s,n,r,a,t[7],10,1126891415),a=_a(a,s,n,r,t[14],15,-1416354905),r=_a(r,a,s,n,t[5],21,-57434055),n=_a(n,r,a,s,t[12],6,1700485571),s=_a(s,n,r,a,t[3],10,-1894986606),a=_a(a,s,n,r,t[10],15,-1051523),r=_a(r,a,s,n,t[1],21,-2054922799),n=_a(n,r,a,s,t[8],6,1873313359),s=_a(s,n,r,a,t[15],10,-30611744),a=_a(a,s,n,r,t[6],15,-1560198380),r=_a(r,a,s,n,t[13],21,1309151649),n=_a(n,r,a,s,t[4],6,-145523070),s=_a(s,n,r,a,t[11],10,-1120210379),a=_a(a,s,n,r,t[2],15,718787259),r=_a(r,a,s,n,t[9],21,-343485551),e[0]=Oa(n,e[0]),e[1]=Oa(r,e[1]),e[2]=Oa(a,e[2]),e[3]=Oa(s,e[3])}function ka(e,t,n,r,a,s){return t=Oa(Oa(t,e),Oa(r,s)),Oa(t<<a|t>>>32-a,n)}function Sa(e,t,n,r,a,s,i){return ka(t&n|~t&r,e,t,a,s,i)}function Ea(e,t,n,r,a,s,i){return ka(t&r|n&~r,e,t,a,s,i)}function Fa(e,t,n,r,a,s,i){return ka(t^n^r,e,t,a,s,i)}function _a(e,t,n,r,a,s,i){return ka(n^(t|~r),e,t,a,s,i)}function Ia(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Ba(r,Ta(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(Ba(r,a),t=0;t<16;t++)a[t]=0;return a[14]=8*n,Ba(r,a),r}function Ta(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var Da="0123456789abcdef".split("");function La(e){for(var t="",n=0;n<4;n++)t+=Da[e>>8*n+4&15]+Da[e>>8*n&15];return t}function Ua(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Pa(e){return Ia(e).map(Ua).join("")}var Ra="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=La(e[t]);return e.join("")}(Ia("hello"));function Oa(e,t){if(Ra){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function Ma(e,t){var n,r,a,s;if(e!==n){for(var i=(a=e,s=1+(256/e.length|0),new Array(s+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+i.charCodeAt(l))%256,o[l]=o[c],o[c]=u}n=e,r=o}else o=r;var d=t.length,A=0,h=0,f="";for(l=0;l<d;l++)h=(h+(u=o[A=(A+1)%256]))%256,o[A]=o[h],o[h]=u,i=o[(o[A]+o[h])%256],f+=String.fromCharCode(t.charCodeAt(l)^i);return f}var Qa={print:4,modify:8,copy:16,"annot-forms":32};function Ha(e,t,n,r){this.v=1,this.r=2;var a=192;e.forEach(function(e){if(void 0!==Qa.perm)throw new Error("Invalid permission: "+e);a+=Qa[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var s=(t+this.padding).substr(0,32),i=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=Pa(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Ma(this.encryptionKey,this.padding)}function za(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var a=e.charCodeAt(r);t+=a<33||35===a||37===a||40===a||41===a||47===a||60===a||62===a||91===a||93===a||123===a||125===a||a>126?"#"+("0"+a.toString(16)).slice(-2):e[r]}return t}function Wa(e){if("object"!==(0,r.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var a=Math.random().toString(35);return t[e][a]=[n,!!r],a},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[n]){var i=t[n][s];try{i[0].apply(e,r)}catch(ba){ma.console&&xa.error("jsPDF PubSub Error",ba.message,ba)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Va(e){if(!(this instanceof Va))return new Va(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Ka(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Ga(e,t,n,r,a){if(!(this instanceof Ga))return new Ga(e,t,n,r,a);this.type="axial"===e?2:3,this.coords=t,this.colors=n,Ka.call(this,r,a)}function qa(e,t,n,r,a){if(!(this instanceof qa))return new qa(e,t,n,r,a);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Ka.call(this,r,a)}function Xa(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",a=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,u="S",d=null;"object"===(0,r.A)(e=e||{})&&(n=e.orientation,a=e.unit||a,s=e.format||s,i=e.compress||e.compressPdf||i,null!==(d=e.encryption||null)&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(!0===i?["FlateEncode"]:o),a=a||"mm",n=(""+(n||"P")).toLowerCase();var A=e.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=Wa;var p="1.3",m=f.__private__.getPdfVersion=function(){return p};f.__private__.setPdfVersion=function(e){p=e};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return g};var x=f.__private__.getPageFormat=function(e){return g[e]};s=s||"a4";var v="compat",y="advanced",b=v;function w(){this.saveGraphicsState(),Z(new Ie(he,0,0,-he,0,un()*he).toString()+" cm"),this.setFontSize(this.getFontSize()/he),u="n",b=y}function N(){this.restoreGraphicsState(),u="S",b=v}var j=f.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};f.advancedAPI=function(e){var t=b===v;return t&&w.call(this),"function"!=typeof e||(e(this),t&&N.call(this)),this},f.compatAPI=function(e){var t=b===y;return t&&N.call(this),"function"!=typeof e||(e(this),t&&w.call(this)),this},f.isAdvancedAPI=function(){return b===y};var C,B=function(e){if(b!==y)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=f.roundToPrecision=f.__private__.roundToPrecision=function(e,n){var r=t||n;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};C=f.hpf=f.__private__.hpf="number"==typeof c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return k(e,c)}:"smart"===c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return k(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return k(e,16)};var S=f.f2=f.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return k(e,2)},E=f.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return k(e,3)},F=f.scale=f.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return b===v?e*he:b===y?e:void 0},_=function(e){return F(function(e){return b===v?un()-e:b===y?e:void 0}(e))};f.__private__.setPrecision=f.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var I,T="00000000000000000000000000000000",D=f.__private__.getFileId=function(){return T},L=f.__private__.setFileId=function(e){return T=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():T.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==d&&(vt=new Ha(d.userPermissions,d.userPassword,d.ownerPassword,T)),T};f.setFileId=function(e){return L(e),this},f.getFileId=function(){return D()};var U=f.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),a=Math.abs(t%60),s=[n,Q(r),"'",Q(a),"'"].join("");return["D:",e.getFullYear(),Q(e.getMonth()+1),Q(e.getDate()),Q(e.getHours()),Q(e.getMinutes()),Q(e.getSeconds()),s].join("")},P=f.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),i=parseInt(e.substr(14,2),10);return new Date(t,n,r,a,s,i,0)},R=f.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=U(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return I=t},O=f.__private__.getCreationDate=function(e){var t=I;return"jsDate"===e&&(t=P(I)),t};f.setCreationDate=function(e){return R(e),this},f.getCreationDate=function(e){return O(e)};var M,Q=f.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},H=f.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},z=0,W=[],V=[],K=0,G=[],q=[],X=!1,Y=V;f.__private__.setCustomOutputDestination=function(e){X=!0,Y=e};var J=function(e){X||(Y=e)};f.__private__.resetCustomOutputDestination=function(){X=!1,Y=V};var Z=f.__private__.out=function(e){return e=e.toString(),K+=e.length+1,Y.push(e),Y},$=f.__private__.write=function(e){return Z(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},ee=f.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},te=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return te};var ne=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(e){return ne=b===y?e/he:e,this};var re,ae=f.__private__.getFontSize=f.getFontSize=function(){return b===v?ne:ne*he},se=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(e){return se=e,this},f.__private__.getR2L=f.getR2L=function(){return se};var ie,oe=f.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))re=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');re=e}else re=parseInt(e,10)};f.__private__.getZoomMode=function(){return re};var le,ce=f.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');ie=e};f.__private__.getPageMode=function(){return ie};var ue=f.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');le=e};f.__private__.getLayoutMode=function(){return le},f.__private__.setDisplayMode=f.setDisplayMode=function(e,t,n){return oe(e),ue(t),ce(n),this};var de={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(e){if(-1===Object.keys(de).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return de[e]},f.__private__.getDocumentProperties=function(){return de},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(e){for(var t in de)de.hasOwnProperty(t)&&e[t]&&(de[t]=e[t]);return this},f.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(de).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return de[e]=t};var Ae,he,fe,pe,me,ge={},xe={},ve=[],ye={},be={},we={},Ne={},je=null,Ce=0,Be=[],ke=new Wa(f),Se=e.hotfixes||[],Ee={},Fe={},_e=[],Ie=function e(t,n,r,a,s,i){if(!(this instanceof e))return new e(t,n,r,a,s,i);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(a)&&(a=1),isNaN(s)&&(s=0),isNaN(i)&&(i=0),this._matrix=[t,n,r,a,s,i]};Object.defineProperty(Ie.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ie.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ie.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ie.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ie.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ie.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ie.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ie.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ie.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ie.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ie.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ie.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ie.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ie.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ie.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ie.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Ie.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(e)},Ie.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,a=e.shx*this.shy+e.sy*this.sy,s=e.tx*this.sx+e.ty*this.shx+this.tx,i=e.tx*this.shy+e.ty*this.sy+this.ty;return new Ie(t,n,r,a,s,i)},Ie.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,a=this.tx,s=this.ty,i=Math.sqrt(e*e+t*t),o=(e/=i)*n+(t/=i)*r;n-=e*o,r-=t*o;var l=Math.sqrt(n*n+r*r);return o/=l,e*(r/=l)<t*(n/=l)&&(e=-e,t=-t,o=-o,i=-i),{scale:new Ie(i,0,0,l,0,0),translate:new Ie(1,0,0,1,a,s),rotate:new Ie(e,t,-t,e,0,0),skew:new Ie(1,0,o,1,0,0)}},Ie.prototype.toString=function(e){return this.join(" ")},Ie.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,a=this.tx,s=this.ty,i=1/(e*r-t*n),o=r*i,l=-t*i,c=-n*i,u=e*i;return new Ie(o,l,c,u,-o*a-c*s,-l*a-u*s)},Ie.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new nn(t,n)},Ie.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new nn(e.x+e.w,e.y+e.h));return new rn(t.x,t.y,n.x-t.x,n.y-t.y)},Ie.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,a=this.tx,s=this.ty;return new Ie(e,t,n,r,a,s)},f.Matrix=Ie;var Te=f.matrixMult=function(e,t){return t.multiply(e)},De=new Ie(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=De;var Le=function(e,t){if(!be[e]){var n=(t instanceof Ga?"Sh":"P")+(Object.keys(ye).length+1).toString(10);t.id=n,be[e]=n,ye[n]=t,ke.publish("addPattern",t)}};f.ShadingPattern=Ga,f.TilingPattern=qa,f.addShadingPattern=function(e,t){return B("addShadingPattern()"),Le(e,t),this},f.beginTilingPattern=function(e){B("beginTilingPattern()"),sn(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},f.endTilingPattern=function(e,t){B("endTilingPattern()"),t.stream=q[M].join("\n"),Le(e,t),ke.publish("endTilingPattern",t),_e.pop().restore()};var Ue,Pe=f.__private__.newObject=function(){var e=Re();return Oe(e,!0),e},Re=f.__private__.newObjectDeferred=function(){return z++,W[z]=function(){return K},z},Oe=function(e,t){return t="boolean"==typeof t&&t,W[e]=K,t&&Z(e+" 0 obj"),e},Me=f.__private__.newAdditionalObject=function(){var e={objId:Re(),content:""};return G.push(e),e},Qe=Re(),He=Re(),ze=f.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var r="#",a=0;a<3;a++)r+=("0"+Math.floor(255*parseFloat(t[a])).toString(16)).slice(-2);return r},We=f.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,a=e.ch2,s=e.ch3,i=e.ch4,o="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var l=new Na(n);if(l.ok)n=l.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var c=parseInt(n.substr(1),16);n=c>>16&255,a=c>>8&255,s=255&c}if(void 0===a||void 0===i&&n===a&&a===s)t="string"==typeof n?n+" "+o[0]:2===e.precision?S(n/255)+" "+o[0]:E(n/255)+" "+o[0];else if(void 0===i||"object"===(0,r.A)(i)){if(i&&!isNaN(i.a)&&0===i.a)return["1.","1.","1.",o[1]].join(" ");t="string"==typeof n?[n,a,s,o[1]].join(" "):2===e.precision?[S(n/255),S(a/255),S(s/255),o[1]].join(" "):[E(n/255),E(a/255),E(s/255),o[1]].join(" ")}else t="string"==typeof n?[n,a,s,i,o[2]].join(" "):2===e.precision?[S(n),S(a),S(s),S(i),o[2]].join(" "):[E(n),E(a),E(s),E(i),o[2]].join(" ");return t},Ve=f.__private__.getFilters=function(){return o},Ke=f.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||Ve(),r=e.alreadyAppliedFilters||[],a=e.addLength1||!1,s=t.length,i=e.objectId,o=function(e){return e};if(null!==d&&void 0===i)throw new Error("ObjectId must be passed to putStream for file encryption");null!==d&&(o=vt.encryptor(i,0));var l={};!0===n&&(n=["FlateEncode"]);var c=e.additionalKeyValues||[],u=(l=void 0!==Xa.API.processDataByFilters?Xa.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===a&&c.push({key:"Length1",value:s})),0!=u.length)if(u.split("/").length-1==1)c.push({key:"Filter",value:u});else{c.push({key:"Filter",value:"["+u+"]"});for(var A=0;A<c.length;A+=1)if("DecodeParms"===c[A].key){for(var h=[],f=0;f<l.reverseChain.split("/").length-1;f+=1)h.push("null");h.push(c[A].value),c[A].value="["+h.join(" ")+"]"}}Z("<<");for(var p=0;p<c.length;p++)Z("/"+c[p].key+" "+c[p].value);Z(">>"),0!==l.data.length&&(Z("stream"),Z(o(l.data)),Z("endstream"))},Ge=f.__private__.putPage=function(e){var t=e.number,n=e.data,r=e.objId,a=e.contentsObjId;Oe(r,!0),Z("<</Type /Page"),Z("/Parent "+e.rootDictionaryObjId+" 0 R"),Z("/Resources "+e.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(C(e.mediaBox.bottomLeftX))+" "+parseFloat(C(e.mediaBox.bottomLeftY))+" "+C(e.mediaBox.topRightX)+" "+C(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&Z("/CropBox ["+C(e.cropBox.bottomLeftX)+" "+C(e.cropBox.bottomLeftY)+" "+C(e.cropBox.topRightX)+" "+C(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&Z("/BleedBox ["+C(e.bleedBox.bottomLeftX)+" "+C(e.bleedBox.bottomLeftY)+" "+C(e.bleedBox.topRightX)+" "+C(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&Z("/TrimBox ["+C(e.trimBox.bottomLeftX)+" "+C(e.trimBox.bottomLeftY)+" "+C(e.trimBox.topRightX)+" "+C(e.trimBox.topRightY)+"]"),null!==e.artBox&&Z("/ArtBox ["+C(e.artBox.bottomLeftX)+" "+C(e.artBox.bottomLeftY)+" "+C(e.artBox.topRightX)+" "+C(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&Z("/UserUnit "+e.userUnit),ke.publish("putPage",{objId:r,pageContext:Be[t],pageNumber:t,page:n}),Z("/Contents "+a+" 0 R"),Z(">>"),Z("endobj");var s=n.join("\n");return b===y&&(s+="\nQ"),Oe(a,!0),Ke({data:s,filters:Ve(),objectId:a}),Z("endobj"),r},qe=f.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=Ce;e++)Be[e].objId=Re(),Be[e].contentsObjId=Re();for(e=1;e<=Ce;e++)n.push(Ge({number:e,data:q[e],objId:Be[e].objId,contentsObjId:Be[e].contentsObjId,mediaBox:Be[e].mediaBox,cropBox:Be[e].cropBox,bleedBox:Be[e].bleedBox,trimBox:Be[e].trimBox,artBox:Be[e].artBox,userUnit:Be[e].userUnit,rootDictionaryObjId:Qe,resourceDictionaryObjId:He}));Oe(Qe,!0),Z("<</Type /Pages");var r="/Kids [";for(t=0;t<Ce;t++)r+=n[t]+" 0 R ";Z(r+"]"),Z("/Count "+Ce),Z(">>"),Z("endobj"),ke.publish("postPutPages")},Xe=function(e){ke.publish("putFont",{font:e,out:Z,newObject:Pe,putStream:Ke}),!0!==e.isAlreadyPutted&&(e.objectNumber=Pe(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+za(e.postScriptName)),Z("/Subtype /Type1"),"string"==typeof e.encoding&&Z("/Encoding /"+e.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},Ye=function(e){e.objectNumber=Pe();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[C(e.x),C(e.y),C(e.x+e.width),C(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");Ke({data:n,additionalKeyValues:t,objectId:e.objectNumber}),Z("endobj")},Je=function(e,t){t||(t=21);var n=Pe(),r=function(e,t){var n,r=[],a=1/(t-1);for(n=0;n<1;n+=a)r.push(n);if(r.push(1),0!=e[0].offset){var s={offset:0,color:e[0].color};e.unshift(s)}if(1!=e[e.length-1].offset){var i={offset:1,color:e[e.length-1].color};e.push(i)}for(var o="",l=0,c=0;c<r.length;c++){for(n=r[c];n>e[l+1].offset;)l++;var u=e[l].offset,d=(n-u)/(e[l+1].offset-u),A=e[l].color,h=e[l+1].color;o+=H(Math.round((1-d)*A[0]+d*h[0]).toString(16))+H(Math.round((1-d)*A[1]+d*h[1]).toString(16))+H(Math.round((1-d)*A[2]+d*h[2]).toString(16))}return o.trim()}(e.colors,t),a=[];a.push({key:"FunctionType",value:"0"}),a.push({key:"Domain",value:"[0.0 1.0]"}),a.push({key:"Size",value:"["+t+"]"}),a.push({key:"BitsPerSample",value:"8"}),a.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),a.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke({data:r,additionalKeyValues:a,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Z("endobj"),e.objectNumber=Pe(),Z("<< /ShadingType "+e.type),Z("/ColorSpace /DeviceRGB");var s="/Coords ["+C(parseFloat(e.coords[0]))+" "+C(parseFloat(e.coords[1]))+" ";2===e.type?s+=C(parseFloat(e.coords[2]))+" "+C(parseFloat(e.coords[3])):s+=C(parseFloat(e.coords[2]))+" "+C(parseFloat(e.coords[3]))+" "+C(parseFloat(e.coords[4]))+" "+C(parseFloat(e.coords[5])),Z(s+="]"),e.matrix&&Z("/Matrix ["+e.matrix.toString()+"]"),Z("/Function "+n+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},Ze=function(e,t){var n=Re(),r=Pe();t.push({resourcesOid:n,objectOid:r}),e.objectNumber=r;var a=[];a.push({key:"Type",value:"/Pattern"}),a.push({key:"PatternType",value:"1"}),a.push({key:"PaintType",value:"1"}),a.push({key:"TilingType",value:"1"}),a.push({key:"BBox",value:"["+e.boundingBox.map(C).join(" ")+"]"}),a.push({key:"XStep",value:C(e.xStep)}),a.push({key:"YStep",value:C(e.yStep)}),a.push({key:"Resources",value:n+" 0 R"}),e.matrix&&a.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),Ke({data:e.stream,additionalKeyValues:a,objectId:e.objectNumber}),Z("endobj")},$e=function(e){for(var t in e.objectNumber=Pe(),Z("<<"),e)switch(t){case"opacity":Z("/ca "+S(e[t]));break;case"stroke-opacity":Z("/CA "+S(e[t]))}Z(">>"),Z("endobj")},et=function(e){Oe(e.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in Z("/Font <<"),ge)ge.hasOwnProperty(e)&&(!1===A||!0===A&&h.hasOwnProperty(e))&&Z("/"+e+" "+ge[e].objectNumber+" 0 R");Z(">>")}(),function(){if(Object.keys(ye).length>0){for(var e in Z("/Shading <<"),ye)ye.hasOwnProperty(e)&&ye[e]instanceof Ga&&ye[e].objectNumber>=0&&Z("/"+e+" "+ye[e].objectNumber+" 0 R");ke.publish("putShadingPatternDict"),Z(">>")}}(),function(e){if(Object.keys(ye).length>0){for(var t in Z("/Pattern <<"),ye)ye.hasOwnProperty(t)&&ye[t]instanceof f.TilingPattern&&ye[t].objectNumber>=0&&ye[t].objectNumber<e&&Z("/"+t+" "+ye[t].objectNumber+" 0 R");ke.publish("putTilingPatternDict"),Z(">>")}}(e.objectOid),function(){if(Object.keys(we).length>0){var e;for(e in Z("/ExtGState <<"),we)we.hasOwnProperty(e)&&we[e].objectNumber>=0&&Z("/"+e+" "+we[e].objectNumber+" 0 R");ke.publish("putGStateDict"),Z(">>")}}(),function(){for(var e in Z("/XObject <<"),Ee)Ee.hasOwnProperty(e)&&Ee[e].objectNumber>=0&&Z("/"+e+" "+Ee[e].objectNumber+" 0 R");ke.publish("putXobjectDict"),Z(">>")}(),Z(">>"),Z("endobj")},tt=function(e){xe[e.fontName]=xe[e.fontName]||{},xe[e.fontName][e.fontStyle]=e.id},nt=function(e,t,n,r,a){var s={id:"F"+(Object.keys(ge).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:r,isStandardFont:a||!1,metadata:{}};return ke.publish("addFont",{font:s,instance:this}),ge[s.id]=s,tt(s),s.id},rt=f.__private__.pdfEscape=f.pdfEscape=function(e,t){return function(e,t){var n,r,a,s,i,o,l,c,u;if(a=(t=t||{}).sourceEncoding||"Unicode",i=t.outputEncoding,(t.autoencode||i)&&ge[Ae].metadata&&ge[Ae].metadata[a]&&ge[Ae].metadata[a].encoding&&(s=ge[Ae].metadata[a].encoding,!i&&ge[Ae].encoding&&(i=ge[Ae].encoding),!i&&s.codePages&&(i=s.codePages[0]),"string"==typeof i&&(i=s[i]),i)){for(l=!1,o=[],n=0,r=e.length;n<r;n++)(c=i[e.charCodeAt(n)])?o.push(String.fromCharCode(c)):o.push(e[n]),o[n].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(o=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if((u=(c=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(u),o.push(c-(u<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},at=f.__private__.beginPage=function(e){q[++Ce]=[],Be[Ce]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},ot(Ce),J(q[M])},st=function(e,t){var r,a,i;switch(n=t||n,"string"==typeof e&&(r=x(e.toLowerCase()),Array.isArray(r)&&(a=r[0],i=r[1])),Array.isArray(e)&&(a=e[0]*he,i=e[1]*he),isNaN(a)&&(a=s[0],i=s[1]),(a>14400||i>14400)&&(xa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),a=Math.min(14400,a),i=Math.min(14400,i)),s=[a,i],n.substr(0,1)){case"l":i>a&&(s=[i,a]);break;case"p":a>i&&(s=[i,a])}at(s),Ot(Pt),Z(Gt),0!==$t&&Z($t+" J"),0!==en&&Z(en+" j"),ke.publish("addPage",{pageNumber:Ce})},it=function(e){e>0&&e<=Ce&&(q.splice(e,1),Be.splice(e,1),Ce--,M>Ce&&(M=Ce),this.setPage(M))},ot=function(e){e>0&&e<=Ce&&(M=e)},lt=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return q.length-1},ct=function(e,t,n){var r,a=void 0;return n=n||{},e=void 0!==e?e:ge[Ae].fontName,t=void 0!==t?t:ge[Ae].fontStyle,r=e.toLowerCase(),void 0!==xe[r]&&void 0!==xe[r][t]?a=xe[r][t]:void 0!==xe[e]&&void 0!==xe[e][t]?a=xe[e][t]:!1===n.disableWarning&&xa.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),a||n.noFallback||null==(a=xe.times[t])&&(a=xe.times.normal),a},ut=f.__private__.putInfo=function(){var e=Pe(),t=function(e){return e};for(var n in null!==d&&(t=vt.encryptor(e,0)),Z("<<"),Z("/Producer ("+rt(t("jsPDF "+Xa.version))+")"),de)de.hasOwnProperty(n)&&de[n]&&Z("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+rt(t(de[n]))+")");Z("/CreationDate ("+rt(t(I))+")"),Z(">>"),Z("endobj")},dt=f.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Qe;switch(Pe(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+t+" 0 R"),re||(re="fullwidth"),re){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+re;"%"===n.substr(n.length-1)&&(re=parseInt(re)/100),"number"==typeof re&&Z("/OpenAction [3 0 R /XYZ null null "+S(re)+"]")}switch(le||(le="continuous"),le){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}ie&&Z("/PageMode /"+ie),ke.publish("putCatalog"),Z(">>"),Z("endobj")},At=f.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(z+1)),Z("/Root "+z+" 0 R"),Z("/Info "+(z-1)+" 0 R"),null!==d&&Z("/Encrypt "+vt.oid+" 0 R"),Z("/ID [ <"+T+"> <"+T+"> ]"),Z(">>")},ht=f.__private__.putHeader=function(){Z("%PDF-"+p),Z("%\xba\xdf\xac\xe0")},ft=f.__private__.putXRef=function(){var e="0000000000";Z("xref"),Z("0 "+(z+1)),Z("0000000000 65535 f ");for(var t=1;t<=z;t++)"function"==typeof W[t]?Z((e+W[t]()).slice(-10)+" 00000 n "):void 0!==W[t]?Z((e+W[t]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},pt=f.__private__.buildDocument=function(){var e;z=0,K=0,V=[],W=[],G=[],Qe=Re(),He=Re(),J(V),ke.publish("buildDocument"),ht(),qe(),function(){ke.publish("putAdditionalObjects");for(var e=0;e<G.length;e++){var t=G[e];Oe(t.objId,!0),Z(t.content),Z("endobj")}ke.publish("postPutAdditionalObjects")}(),e=[],function(){for(var e in ge)ge.hasOwnProperty(e)&&(!1===A||!0===A&&h.hasOwnProperty(e))&&Xe(ge[e])}(),function(){var e;for(e in we)we.hasOwnProperty(e)&&$e(we[e])}(),function(){for(var e in Ee)Ee.hasOwnProperty(e)&&Ye(Ee[e])}(),function(e){var t;for(t in ye)ye.hasOwnProperty(t)&&(ye[t]instanceof Ga?Je(ye[t]):ye[t]instanceof qa&&Ze(ye[t],e))}(e),ke.publish("putResources"),e.forEach(et),et({resourcesOid:He,objectOid:Number.MAX_SAFE_INTEGER}),ke.publish("postPutResources"),null!==d&&(vt.oid=Pe(),Z("<<"),Z("/Filter /Standard"),Z("/V "+vt.v),Z("/R "+vt.r),Z("/U <"+vt.toHexString(vt.U)+">"),Z("/O <"+vt.toHexString(vt.O)+">"),Z("/P "+vt.P),Z(">>"),Z("endobj")),ut(),dt();var t=K;return ft(),At(),Z("startxref"),Z(""+t),Z("%%EOF"),J(q[M]),V.join("\n")},mt=f.__private__.getBlob=function(e){return new Blob([ee(e)],{type:"application/pdf"})},gt=f.output=f.__private__.output=(Ue=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return pt();case"save":f.save(t.filename);break;case"arraybuffer":return ee(pt());case"blob":return mt(pt());case"bloburi":case"bloburl":if(void 0!==ma.URL&&"function"==typeof ma.URL.createObjectURL)return ma.URL&&ma.URL.createObjectURL(mt(pt()))||void 0;xa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=pt();try{n=Ca(r)}catch(d){n=Ca(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(ma)){var a="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",s=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(a=t.pdfObjectUrl,s="");var i='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+a+'"'+s+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=ma.open();return null!==o&&o.document.write(i),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(ma)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=ma.open();if(null!==c){c.document.write(l);var u=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(ma))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var A='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',h=ma.open();if(null!==h&&(h.document.write(A),h.document.title=t.filename),h||"undefined"==typeof safari)return h;break;case"datauri":case"dataurl":return ma.document.location.href=this.output("datauristring",t);default:return null}},Ue.foo=function(){try{return Ue.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var n="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!ma.console)throw new Error(n);ma.console.error(n,t),ma.alert&&alert(n)}},Ue.foo.bar=Ue,Ue.foo),xt=function(e){return!0===Array.isArray(Se)&&Se.indexOf(e)>-1};switch(a){case"pt":he=1;break;case"mm":he=72/25.4;break;case"cm":he=72/2.54;break;case"in":he=72;break;case"px":he=1==xt("px_scaling")?.75:96/72;break;case"pc":case"em":he=12;break;case"ex":he=6;break;default:if("number"!=typeof a)throw new Error("Invalid unit: "+a);he=a}var vt=null;R(),L();var yt=f.__private__.getPageInfo=f.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Be[e].objId,pageNumber:e,pageContext:Be[e]}},bt=f.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Be)if(Be[t].objId===e)break;return yt(t)},wt=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Be[M].objId,pageNumber:M,pageContext:Be[M]}};f.addPage=function(){return st.apply(this,arguments),this},f.setPage=function(){return ot.apply(this,arguments),J.call(this,q[M]),this},f.insertPage=function(e){return this.addPage(),this.movePage(M,e),this},f.movePage=function(e,t){var n,r;if(e>t){n=q[e],r=Be[e];for(var a=e;a>t;a--)q[a]=q[a-1],Be[a]=Be[a-1];q[t]=n,Be[t]=r,this.setPage(t)}else if(e<t){n=q[e],r=Be[e];for(var s=e;s<t;s++)q[s]=q[s+1],Be[s]=Be[s+1];q[t]=n,Be[t]=r,this.setPage(t)}return this},f.deletePage=function(){return it.apply(this,arguments),this},f.__private__.text=f.text=function(e,t,n,a,s){var i,o,l,c,u,d,A,f,p,m=(a=a||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var g=n;n=t,t=e,e=g}if(arguments[3]instanceof Ie==0?(l=arguments[4],c=arguments[5],"object"===(0,r.A)(A=arguments[3])&&null!==A||("string"==typeof l&&(c=l,l=null),"string"==typeof A&&(c=A,A=null),"number"==typeof A&&(l=A,A=null),a={flags:A,angle:l,align:c})):(B("The transform parameter of text() with a Matrix value"),p=s),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return m;var x,v="",w="number"==typeof a.lineHeightFactor?a.lineHeightFactor:Ut,N=m.internal.scaleFactor;function j(e){return e=e.split("\t").join(Array(a.TabLen||9).join(" ")),rt(e,A)}function k(e){for(var t,n=e.concat(),r=[],a=n.length;a--;)"string"==typeof(t=n.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function S(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var r,a,s=e.concat(),i=[],o=s.length;o--;)"string"==typeof(r=s.shift())?i.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(a=t(r[0],r[1],r[2]),i.push([a[0],a[1],a[2]]));n=i}return n}var E=!1,_=!0;if("string"==typeof e)E=!0;else if(Array.isArray(e)){var I=e.concat();o=[];for(var T,D=I.length;D--;)("string"!=typeof(T=I.shift())||Array.isArray(T)&&"string"!=typeof T[0])&&(_=!1);E=_}if(!1===E)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var L=ne/m.internal.scaleFactor,U=L*(w-1);switch(a.baseline){case"bottom":n-=U;break;case"top":n+=L-U;break;case"hanging":n+=L-2*U;break;case"middle":n+=L/2-U}if((d=a.maxWidth||0)>0&&("string"==typeof e?e=m.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(m.splitTextToSize(t,d))},[]))),i={text:e,x:t,y:n,options:a,mutex:{pdfEscape:rt,activeFontKey:Ae,fonts:ge,activeFontSize:ne}},ke.publish("preProcessText",i),e=i.text,l=(a=i.options).angle,p instanceof Ie==0&&l&&"number"==typeof l){l*=Math.PI/180,0===a.rotationDirection&&(l=-l),b===y&&(l=-l);var P=Math.cos(l),R=Math.sin(l);p=new Ie(P,R,-R,P,0,0)}else l&&l instanceof Ie&&(p=l);b!==y||p||(p=De),void 0!==(u=a.charSpace||Jt)&&(v+=C(F(u))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(f=a.horizontalScale)&&(v+=C(100*f)+" Tz\n"),a.lang;var O=-1,M=void 0!==a.renderingMode?a.renderingMode:a.stroke,Q=m.internal.getCurrentPageInfo().pageContext;switch(M){case 0:case!1:case"fill":O=0;break;case 1:case!0:case"stroke":O=1;break;case 2:case"fillThenStroke":O=2;break;case 3:case"invisible":O=3;break;case 4:case"fillAndAddForClipping":O=4;break;case 5:case"strokeAndAddPathForClipping":O=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":O=6;break;case 7:case"addToPathForClipping":O=7}var H=void 0!==Q.usedRenderingMode?Q.usedRenderingMode:-1;-1!==O?v+=O+" Tr\n":-1!==H&&(v+="0 Tr\n"),-1!==O&&(Q.usedRenderingMode=O),c=a.align||"left";var z,W=ne*w,V=m.internal.pageSize.getWidth(),K=ge[Ae];u=a.charSpace||Jt,d=a.maxWidth||0,A=Object.assign({autoencode:!0,noBOM:!0},a.flags);var G=[],q=function(e){return m.getStringUnitWidth(e,{font:K,charSpace:u,fontSize:ne,doKerning:!1})*ne/N};if("[object Array]"===Object.prototype.toString.call(e)){var X;o=k(e),"left"!==c&&(z=o.map(q));var Y,J=0;if("right"===c){t-=z[0],e=[],D=o.length;for(var $=0;$<D;$++)0===$?(Y=zt(t),X=Wt(n)):(Y=F(J-z[$]),X=-W),e.push([o[$],Y,X]),J=z[$]}else if("center"===c){t-=z[0]/2,e=[],D=o.length;for(var ee=0;ee<D;ee++)0===ee?(Y=zt(t),X=Wt(n)):(Y=F((J-z[ee])/2),X=-W),e.push([o[ee],Y,X]),J=z[ee]}else if("left"===c){e=[],D=o.length;for(var te=0;te<D;te++)e.push(o[te])}else if("justify"===c&&"Identity-H"===K.encoding){e=[],D=o.length,d=0!==d?d:V;for(var re=0,ae=0;ae<D;ae++)if(X=0===ae?Wt(n):-W,Y=0===ae?zt(t):re,ae<D-1){var ie=F((d-z[ae])/(o[ae].split(" ").length-1)),oe=o[ae].split(" ");e.push([oe[0]+" ",Y,X]),re=0;for(var le=1;le<oe.length;le++){var ce=(q(oe[le-1]+" "+oe[le])-q(oe[le]))*N+ie;le==oe.length-1?e.push([oe[le],ce,0]):e.push([oe[le]+" ",ce,0]),re-=ce}}else e.push([o[ae],Y,X]);e.push(["",re,0])}else{if("justify"!==c)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],D=o.length,d=0!==d?d:V,ae=0;ae<D;ae++)X=0===ae?Wt(n):-W,Y=0===ae?zt(t):0,ae<D-1?G.push(C(F((d-z[ae])/(o[ae].split(" ").length-1)))):G.push(0),e.push([o[ae],Y,X])}}!0===("boolean"==typeof a.R2L?a.R2L:se)&&(e=S(e,function(e,t,n){return[e.split("").reverse().join(""),t,n]})),i={text:e,x:t,y:n,options:a,mutex:{pdfEscape:rt,activeFontKey:Ae,fonts:ge,activeFontSize:ne}},ke.publish("postProcessText",i),e=i.text,x=i.mutex.isHex||!1;var ue=ge[Ae].encoding;"WinAnsiEncoding"!==ue&&"StandardEncoding"!==ue||(e=S(e,function(e,t,n){return[j(e),t,n]})),o=k(e),e=[];for(var de,he,fe,pe=Array.isArray(o[0])?1:0,me="",xe=function(e,t,n){var r="";return n instanceof Ie?(n="number"==typeof a.angle?Te(n,new Ie(1,0,0,1,e,t)):Te(new Ie(1,0,0,1,e,t),n),b===y&&(n=Te(new Ie(1,0,0,-1,0,0),n)),r=n.join(" ")+" Tm\n"):r=C(e)+" "+C(t)+" Td\n",r},ve=0;ve<o.length;ve++){switch(me="",pe){case 1:fe=(x?"<":"(")+o[ve][0]+(x?">":")"),de=parseFloat(o[ve][1]),he=parseFloat(o[ve][2]);break;case 0:fe=(x?"<":"(")+o[ve]+(x?">":")"),de=zt(t),he=Wt(n)}void 0!==G&&void 0!==G[ve]&&(me=G[ve]+" Tw\n"),0===ve?e.push(me+xe(de,he,p)+fe):0===pe?e.push(me+fe):1===pe&&e.push(me+xe(de,he,p)+fe)}e=0===pe?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var ye="BT\n/";return ye+=Ae+" "+ne+" Tf\n",ye+=C(ne*w)+" TL\n",ye+=Xt+"\n",ye+=v,ye+=e,Z(ye+="ET"),h[Ae]=!0,m};var Nt=f.__private__.clip=f.clip=function(e){return Z("evenodd"===e?"W*":"W"),this};f.clipEvenOdd=function(){return Nt("evenodd")},f.__private__.discardPath=f.discardPath=function(){return Z("n"),this};var jt=f.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(e){return jt(e)&&(u=e),this};var Ct=f.__private__.getStyle=f.getStyle=function(e){var t=u;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Bt=f.close=function(){return Z("h"),this};f.stroke=function(){return Z("S"),this},f.fill=function(e){return kt("f",e),this},f.fillEvenOdd=function(e){return kt("f*",e),this},f.fillStroke=function(e){return kt("B",e),this},f.fillStrokeEvenOdd=function(e){return kt("B*",e),this};var kt=function(e,t){"object"===(0,r.A)(t)?Ft(t,e):Z(e)},St=function(e){null===e||b===y&&void 0===e||(e=Ct(e),Z(e))};function Et(e,t,n,r,a){var s=new qa(t||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,a||this.matrix);s.stream=this.stream;var i=e+"$$"+this.cloneIndex+++"$$";return Le(i,s),s}var Ft=function(e,t){var n=be[e.key],r=ye[n];if(r instanceof Ga)Z("q"),Z(_t(t)),r.gState&&f.setGState(r.gState),Z(e.matrix.toString()+" cm"),Z("/"+n+" sh"),Z("Q");else if(r instanceof qa){var a=new Ie(1,0,0,-1,0,un());e.matrix&&(a=a.multiply(e.matrix||De),n=Et.call(r,e.key,e.boundingBox,e.xStep,e.yStep,a).id),Z("q"),Z("/Pattern cs"),Z("/"+n+" scn"),r.gState&&f.setGState(r.gState),Z(t),Z("Q")}},_t=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},It=f.moveTo=function(e,t){return Z(C(F(e))+" "+C(_(t))+" m"),this},Tt=f.lineTo=function(e,t){return Z(C(F(e))+" "+C(_(t))+" l"),this},Dt=f.curveTo=function(e,t,n,r,a,s){return Z([C(F(e)),C(_(t)),C(F(n)),C(_(r)),C(F(a)),C(_(s)),"c"].join(" ")),this};f.__private__.line=f.line=function(e,t,n,r,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!jt(a))throw new Error("Invalid arguments passed to jsPDF.line");return b===v?this.lines([[n-e,r-t]],e,t,[1,1],a||"S"):this.lines([[n-e,r-t]],e,t,[1,1]).stroke()},f.__private__.lines=f.lines=function(e,t,n,r,a,s){var i,o,l,c,u,d,A,h,f,p,m,g;if("number"==typeof e&&(g=n,n=t,t=e,e=g),r=r||[1,1],s=s||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(r)||!jt(a)||"boolean"!=typeof s)throw new Error("Invalid arguments passed to jsPDF.lines");for(It(t,n),i=r[0],o=r[1],c=e.length,p=t,m=n,l=0;l<c;l++)2===(u=e[l]).length?(p=u[0]*i+p,m=u[1]*o+m,Tt(p,m)):(d=u[0]*i+p,A=u[1]*o+m,h=u[2]*i+p,f=u[3]*o+m,p=u[4]*i+p,m=u[5]*o+m,Dt(d,A,h,f,p,m));return s&&Bt(),St(a),this},f.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.c;switch(n.op){case"m":It(r[0],r[1]);break;case"l":Tt(r[0],r[1]);break;case"c":Dt.apply(this,r);break;case"h":Bt()}}return this},f.__private__.rect=f.rect=function(e,t,n,r,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!jt(a))throw new Error("Invalid arguments passed to jsPDF.rect");return b===v&&(r=-r),Z([C(F(e)),C(_(t)),C(F(n)),C(F(r)),"re"].join(" ")),St(a),this},f.__private__.triangle=f.triangle=function(e,t,n,r,a,s,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(a)||isNaN(s)||!jt(i))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,r-t],[a-n,s-r],[e-a,t-s]],e,t,[1,1],i,!0),this},f.__private__.roundedRect=f.roundedRect=function(e,t,n,r,a,s,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(a)||isNaN(s)||!jt(i))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return a=Math.min(a,.5*n),s=Math.min(s,.5*r),this.lines([[n-2*a,0],[a*o,0,a,s-s*o,a,s],[0,r-2*s],[0,s*o,-a*o,s,-a,s],[2*a-n,0],[-a*o,0,-a,-s*o,-a,-s],[0,2*s-r],[0,-s*o,a*o,-s,a,-s]],e+a,t,[1,1],i,!0),this},f.__private__.ellipse=f.ellipse=function(e,t,n,r,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!jt(a))throw new Error("Invalid arguments passed to jsPDF.ellipse");var s=4/3*(Math.SQRT2-1)*n,i=4/3*(Math.SQRT2-1)*r;return It(e+n,t),Dt(e+n,t-i,e+s,t-r,e,t-r),Dt(e-s,t-r,e-n,t-i,e-n,t),Dt(e-n,t+i,e-s,t+r,e,t+r),Dt(e+s,t+r,e+n,t+i,e+n,t),St(a),this},f.__private__.circle=f.circle=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||!jt(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,r)},f.setFont=function(e,t,n){return n&&(t=j(t,n)),Ae=ct(e,t,{disableWarning:!1}),this};var Lt=f.__private__.getFont=f.getFont=function(){return ge[ct.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var e,t,n={};for(e in xe)if(xe.hasOwnProperty(e))for(t in n[e]=[],xe[e])xe[e].hasOwnProperty(t)&&n[e].push(t);return n},f.addFont=function(e,t,n,r,a){var s=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==s.indexOf(arguments[3])?a=arguments[3]:arguments[3]&&-1==s.indexOf(arguments[3])&&(n=j(n,r)),nt.call(this,e,t,n,a=a||"Identity-H")};var Ut,Pt=e.lineWidth||.200025,Rt=f.__private__.getLineWidth=f.getLineWidth=function(){return Pt},Ot=f.__private__.setLineWidth=f.setLineWidth=function(e){return Pt=e,Z(C(F(e))+" w"),this};f.__private__.setLineDash=Xa.API.setLineDash=Xa.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return C(F(e))}).join(" "),t=C(F(t)),Z("["+e+"] "+t+" d"),this};var Mt=f.__private__.getLineHeight=f.getLineHeight=function(){return ne*Ut};f.__private__.getLineHeight=f.getLineHeight=function(){return ne*Ut};var Qt=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Ut=e),this},Ht=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Ut};Qt(e.lineHeight);var zt=f.__private__.getHorizontalCoordinate=function(e){return F(e)},Wt=f.__private__.getVerticalCoordinate=function(e){return b===y?e:Be[M].mediaBox.topRightY-Be[M].mediaBox.bottomLeftY-F(e)},Vt=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(e){return C(zt(e))},Kt=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(e){return C(Wt(e))},Gt=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return ze(Gt)},f.__private__.setStrokeColor=f.setDrawColor=function(e,t,n,r){return Gt=We({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),Z(Gt),this};var qt=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return ze(qt)},f.__private__.setFillColor=f.setFillColor=function(e,t,n,r){return qt=We({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),Z(qt),this};var Xt=e.textColor||"0 g",Yt=f.__private__.getTextColor=f.getTextColor=function(){return ze(Xt)};f.__private__.setTextColor=f.setTextColor=function(e,t,n,r){return Xt=We({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var Jt=e.charSpace,Zt=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Jt||0)};f.__private__.setCharSpace=f.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Jt=e,this};var $t=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(e){var t=f.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $t=t,Z(t+" J"),this};var en=0;f.__private__.setLineJoin=f.setLineJoin=function(e){var t=f.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return en=t,Z(t+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(C(F(e))+" M"),this},f.GState=Va,f.setGState=function(e){(e="string"==typeof e?we[Ne[e]]:tn(null,e)).equals(je)||(Z("/"+e.id+" gs"),je=e)};var tn=function(e,t){if(!e||!Ne[e]){var n=!1;for(var r in we)if(we.hasOwnProperty(r)&&we[r].equals(t)){n=!0;break}if(n)t=we[r];else{var a="GS"+(Object.keys(we).length+1).toString(10);we[a]=t,t.id=a}return e&&(Ne[e]=t.id),ke.publish("addGState",t),t}};f.addGState=function(e,t){return tn(e,t),this},f.saveGraphicsState=function(){return Z("q"),ve.push({key:Ae,size:ne,color:Xt}),this},f.restoreGraphicsState=function(){Z("Q");var e=ve.pop();return Ae=e.key,ne=e.size,Xt=e.color,je=null,this},f.setCurrentTransformationMatrix=function(e){return Z(e.toString()+" cm"),this},f.comment=function(e){return Z("#"+e),this};var nn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var a="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return a},set:function(e){a=e.toString()}}),this},rn=function(e,t,n,r){nn.call(this,e,t),this.type="rect";var a=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}});var s=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return s},set:function(e){isNaN(e)||(s=parseFloat(e))}}),this},an=function(){this.page=Ce,this.currentPage=M,this.pages=q.slice(0),this.pagesContext=Be.slice(0),this.x=fe,this.y=pe,this.matrix=me,this.width=ln(M),this.height=un(M),this.outputDestination=Y,this.id="",this.objectNumber=-1};an.prototype.restore=function(){Ce=this.page,M=this.currentPage,Be=this.pagesContext,q=this.pages,fe=this.x,pe=this.y,me=this.matrix,cn(M,this.width),dn(M,this.height),Y=this.outputDestination};var sn=function(e,t,n,r,a){_e.push(new an),Ce=M=0,q=[],fe=e,pe=t,me=a,at([n,r])};for(var on in f.beginFormObject=function(e,t,n,r,a){return sn(e,t,n,r,a),this},f.endFormObject=function(e){return function(e){if(Fe[e])_e.pop().restore();else{var t=new an,n="Xo"+(Object.keys(Ee).length+1).toString(10);t.id=n,Fe[e]=n,Ee[n]=t,ke.publish("addFormObject",t),_e.pop().restore()}}(e),this},f.doFormObject=function(e,t){var n=Ee[Fe[e]];return Z("q"),Z(t.toString()+" cm"),Z("/"+n.id+" Do"),Z("Q"),this},f.getFormObject=function(e){var t=Ee[Fe[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},f.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(wa(mt(pt()),e),"function"==typeof wa.unload&&ma.setTimeout&&setTimeout(wa.unload,911),this):new Promise(function(t,n){try{var r=wa(mt(pt()),e);"function"==typeof wa.unload&&ma.setTimeout&&setTimeout(wa.unload,911),t(r)}catch(a){n(a.message)}})},Xa.API)Xa.API.hasOwnProperty(on)&&("events"===on&&Xa.API.events.length?function(e,t){var n,r,a;for(a=t.length-1;-1!==a;a--)n=t[a][0],r=t[a][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(ke,Xa.API.events):f[on]=Xa.API[on]);var ln=f.getPageWidth=function(e){return(Be[e=e||M].mediaBox.topRightX-Be[e].mediaBox.bottomLeftX)/he},cn=f.setPageWidth=function(e,t){Be[e].mediaBox.topRightX=t*he+Be[e].mediaBox.bottomLeftX},un=f.getPageHeight=function(e){return(Be[e=e||M].mediaBox.topRightY-Be[e].mediaBox.bottomLeftY)/he},dn=f.setPageHeight=function(e,t){Be[e].mediaBox.topRightY=t*he+Be[e].mediaBox.bottomLeftY};return f.internal={pdfEscape:rt,getStyle:Ct,getFont:Lt,getFontSize:ae,getCharSpace:Zt,getTextColor:Yt,getLineHeight:Mt,getLineHeightFactor:Ht,getLineWidth:Rt,write:$,getHorizontalCoordinate:zt,getVerticalCoordinate:Wt,getCoordinateString:Vt,getVerticalCoordinateString:Kt,collections:{},newObject:Pe,newAdditionalObject:Me,newObjectDeferred:Re,newObjectDeferredBegin:Oe,getFilters:Ve,putStream:Ke,events:ke,scaleFactor:he,pageSize:{getWidth:function(){return ln(M)},setWidth:function(e){cn(M,e)},getHeight:function(){return un(M)},setHeight:function(e){dn(M,e)}},encryptionOptions:d,encryption:vt,getEncryptor:function(e){return null!==d?vt.encryptor(e,0):function(e){return e}},output:gt,getNumberOfPages:lt,pages:q,out:Z,f2:S,f3:E,getPageInfo:yt,getPageInfoByObjId:bt,getCurrentPageInfo:wt,getPDFVersion:m,Point:nn,Rectangle:rn,Matrix:Ie,hasHotfix:xt},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return ln(M)},set:function(e){cn(M,e)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return un(M)},set:function(e){dn(M,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=te.length;t<n;t++){var r=nt.call(this,e[t][0],e[t][1],e[t][2],te[t][3],!0);!1===A&&(h[r]=!0);var a=e[t][0].split("-");tt({id:r,fontName:a[0],fontStyle:a[1]||""})}ke.publish("addFonts",{fonts:ge,dictionary:xe})}.call(f,te),Ae="F1",st(s,n),ke.publish("initialized"),f}Ha.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Ha.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ha.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Ha.prototype.processOwnerPassword=function(e,t){return Ma(Pa(t).substr(0,5),e)},Ha.prototype.encryptor=function(e,t){var n=Pa(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return Ma(n,e)}},Va.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,r.A)(e)!==(0,r.A)(this))return!1;var a=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&a--;return 0===a},Xa.API={events:[]},Xa.version="3.0.2";var Ya=Xa.API,Ja=1,Za=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$a=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},es=function(e){return e.toFixed(2)},ts=function(e){return e.toFixed(5)};Ya.__acroform__={};var ns=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},rs=function(e){return e*Ja},as=function(e){var t=new ys,n=Ds.internal.getHeight(e)||0,r=Ds.internal.getWidth(e)||0;return t.BBox=[0,0,Number(es(r)),Number(es(n))],t},ss=Ya.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},is=Ya.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},os=Ya.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ls=Ya.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return os(e,t-1)},cs=Ya.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ss(e,t-1)},us=Ya.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return is(e,t-1)},ds=Ya.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],l={};return l.lowerLeft_X=n(a)||0,l.lowerLeft_Y=r(s+o)||0,l.upperRight_X=n(a+i)||0,l.upperRight_Y=r(s)||0,[Number(es(l.lowerLeft_X)),Number(es(l.lowerLeft_Y)),Number(es(l.upperRight_X)),Number(es(l.upperRight_Y))]},As=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=hs(e,n),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+es(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=as(e);return s.scope=e.scope,s.stream=t.join("\n"),s}},hs=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},a=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(e){return e.split("\n")}):a.map(function(e){return[e]});var s=n,i=Ds.internal.getHeight(e)||0;i=i<0?-i:i;var o=Ds.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,n,r){if(t+1<a.length){var s=n+" "+a[t+1][0];return fs(s,e,r).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var c,u,d=fs("3",e,s).height,A=e.multiline?i-s:(i-d)/2,h=A+=2,f=0,p=0,m=0;if(s<=0){t="(...) Tj\n",t+="% Width of Text: "+fs(t,e,s=12).width+", FieldWidth:"+o+"\n";break}for(var g="",x=0,v=0;v<a.length;v++)if(a.hasOwnProperty(v)){var y=!1;if(1!==a[v].length&&m!==a[v].length-1){if((d+2)*(x+2)+2>i)continue e;g+=a[v][m],y=!0,p=v,v--}else{g=" "==(g+=a[v][m]+" ").substr(g.length-1)?g.substr(0,g.length-1):g;var b=parseInt(v),w=l(b,g,s),N=v>=a.length-1;if(w&&!N){g+=" ",m=0;continue}if(w||N){if(N)p=b;else if(e.multiline&&(d+2)*(x+2)+2>i)continue e}else{if(!e.multiline)continue e;if((d+2)*(x+2)+2>i)continue e;p=b}}for(var j="",C=f;C<=p;C++){var B=a[C];if(e.multiline){if(C===p){j+=B[m]+" ",m=(m+1)%B.length;continue}if(C===f){j+=B[B.length-1]+" ";continue}}j+=B[0]+" "}switch(j=" "==j.substr(j.length-1)?j.substr(0,j.length-1):j,u=fs(j,e,s).width,e.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;default:c=2}t+=es(c)+" "+es(h)+" Td\n",t+="("+Za(j)+") Tj\n",t+=-es(c)+" 0 Td\n",h=-(s+2),u=0,f=y?p:p+1,x++,g=""}break}return r.text=t,r.fontSize=s,r},fs=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},ps={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ms=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===n.type&&e.object===n.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},gs=Ya.__acroform__.arrayToPdfArray=function(e,t,n){var a=function(e){return e};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(0!==i&&(s+=" "),(0,r.A)(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":"/"!==e[i].substr(0,1)?(void 0!==t&&n&&(a=n.internal.getEncryptor(t)),s+="("+Za(a(e[i].toString()))+")"):s+=e[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},xs=function(e,t,n){var r=function(e){return e};return void 0!==t&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Za(r(e))+")"},vs=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};vs.prototype.toString=function(){return this.objId+" 0 R"},vs.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},vs.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var r=t[n],a=this[r];a&&(Array.isArray(a)?e.push({key:r,value:gs(a,this.objId,this.scope)}):a instanceof vs?(a.scope=this.scope,e.push({key:r,value:a.objId+" 0 R"})):"function"!=typeof a&&e.push({key:r,value:a}))}return e};var ys=function(){vs.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};ns(ys,vs);var bs=function(){vs.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Za(t(e))+")"}},set:function(t){e=t}})};ns(bs,vs);var ws=function e(){vs.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(t,3))},set:function(e){!0===Boolean(e)?this.F=cs(t,3):this.F=us(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Fs)return;s="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Za(t(s))+")"},set:function(e){s=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(e){s=e}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/Ja:c},set:function(e){c=e}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(e){u=e}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Fs||this instanceof Is))return xs(d,this.objId,this.scope)},set:function(e){e=e.toString(),d=e}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof ks==0?xs(A,this.objId,this.scope):A},set:function(e){e=e.toString(),A=this instanceof ks==0?"("===e.substr(0,1)?$a(e.substr(1,e.length-2)):$a(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ks==1?$a(A.substr(1,A.length-1)):A},set:function(e){e=e.toString(),A=this instanceof ks==1?"/"+e:e}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof ks==0?xs(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof ks==0?"("===e.substr(0,1)?$a(e.substr(1,e.length-2)):$a(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ks==1?$a(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof ks==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var f,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(e){e=Boolean(e),p=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(f)return f},set:function(e){f=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,1):this.Ff=us(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,2):this.Ff=us(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,3):this.Ff=us(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==m)return m},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');m=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(m){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:m=2;break;case"center":case 1:m=1;break;default:m=0}}})};ns(ws,vs);var Ns=function(){ws.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return gs(t,this.objId,this.scope)},set:function(e){var n,r;r=[],"string"==typeof(n=e)&&(r=function(e,t,n){n||(n=1);for(var r,a=[];r=t.exec(e);)a.push(r[n]);return a}(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,18):this.Ff=us(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=cs(this.Ff,19):this.Ff=us(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=cs(this.Ff,20),t.sort()):this.Ff=us(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,22):this.Ff=us(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,23):this.Ff=us(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,27):this.Ff=us(this.Ff,27)}}),this.hasAppearanceStream=!1};ns(Ns,ws);var js=function(){Ns.call(this),this.fontName="helvetica",this.combo=!1};ns(js,Ns);var Cs=function(){js.call(this),this.combo=!0};ns(Cs,js);var Bs=function(){Cs.call(this),this.edit=!0};ns(Bs,Cs);var ks=function(){ws.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,15):this.Ff=us(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,16):this.Ff=us(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,17):this.Ff=us(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,26):this.Ff=us(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+Za(e(t[n]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===(0,r.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};ns(ks,ws);var Ss=function(){ks.call(this),this.pushButton=!0};ns(Ss,ks);var Es=function(){ks.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};ns(Es,ks);var Fs=function(){var e,t;ws.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),a)n.push("/"+t+" ("+Za(e(a[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,r.A)(e)&&(a=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(e){"string"==typeof e&&(a.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ds.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ns(Fs,ws),Es.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Es.prototype.createOption=function(e){var t=new Fs;return t.Parent=this,t.optionName=e,this.Kids.push(t),Ls.call(this.scope,t),t};var _s=function(){ks.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ds.CheckBox.createAppearanceStream()};ns(_s,ks);var Is=function(){ws.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,13):this.Ff=us(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,21):this.Ff=us(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,23):this.Ff=us(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,24):this.Ff=us(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,25):this.Ff=us(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,26):this.Ff=us(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ns(Is,ws);var Ts=function(){Is.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(ls(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=cs(this.Ff,14):this.Ff=us(this.Ff,14)}}),this.password=!0};ns(Ts,Is);var Ds={CheckBox:{createAppearanceStream:function(){return{N:{On:Ds.CheckBox.YesNormal},D:{On:Ds.CheckBox.YesPushDown,Off:Ds.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=as(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=hs(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+es(Ds.internal.getWidth(e))+" "+es(Ds.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+es(s.fontSize)+" Tf "+a),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=as(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),a=[],s=Ds.internal.getHeight(e),i=Ds.internal.getWidth(e),o=hs(e,e.caption);return a.push("1 g"),a.push("0 0 "+es(i)+" "+es(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+es(i-1)+" "+es(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+es(o.fontSize)+" Tf "+r),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join("\n"),t},OffPushDown:function(e){var t=as(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+es(Ds.internal.getWidth(e))+" "+es(Ds.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ds.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ds.RadioButton.Circle.YesNormal,t.D[e]=Ds.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=as(e);t.scope=e.scope;var n=[],r=Ds.internal.getWidth(e)<=Ds.internal.getHeight(e)?Ds.internal.getWidth(e)/4:Ds.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Ds.internal.Bezier_C,s=Number((r*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+ts(Ds.internal.getWidth(e)/2)+" "+ts(Ds.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=as(e);t.scope=e.scope;var n=[],r=Ds.internal.getWidth(e)<=Ds.internal.getHeight(e)?Ds.internal.getWidth(e)/4:Ds.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),s=Number((a*Ds.internal.Bezier_C).toFixed(5)),i=Number((r*Ds.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ts(Ds.internal.getWidth(e)/2)+" "+ts(Ds.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+ts(Ds.internal.getWidth(e)/2)+" "+ts(Ds.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=as(e);t.scope=e.scope;var n=[],r=Ds.internal.getWidth(e)<=Ds.internal.getHeight(e)?Ds.internal.getWidth(e)/4:Ds.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),s=Number((a*Ds.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ts(Ds.internal.getWidth(e)/2)+" "+ts(Ds.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ds.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ds.RadioButton.Cross.YesNormal,t.D[e]=Ds.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=as(e);t.scope=e.scope;var n=[],r=Ds.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+es(Ds.internal.getWidth(e)-2)+" "+es(Ds.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(es(r.x1.x)+" "+es(r.x1.y)+" m"),n.push(es(r.x2.x)+" "+es(r.x2.y)+" l"),n.push(es(r.x4.x)+" "+es(r.x4.y)+" m"),n.push(es(r.x3.x)+" "+es(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=as(e);t.scope=e.scope;var n=Ds.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+es(Ds.internal.getWidth(e))+" "+es(Ds.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+es(Ds.internal.getWidth(e)-2)+" "+es(Ds.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(es(n.x1.x)+" "+es(n.x1.y)+" m"),r.push(es(n.x2.x)+" "+es(n.x2.y)+" l"),r.push(es(n.x4.x)+" "+es(n.x4.y)+" m"),r.push(es(n.x3.x)+" "+es(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=as(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+es(Ds.internal.getWidth(e))+" "+es(Ds.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Ds.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ds.internal.getWidth(e),n=Ds.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Ds.internal.getWidth=function(e){var t=0;return"object"===(0,r.A)(e)&&(t=rs(e.Rect[2])),t},Ds.internal.getHeight=function(e){var t=0;return"object"===(0,r.A)(e)&&(t=rs(e.Rect[3])),t};var Ls=Ya.addField=function(e){if(function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(ws.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(ps)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Ja=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new bs,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.objId=void 0,r.hasAnnotation&&ms(r,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var n=!e;for(var a in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(a)){var s=e[a],i=[],o=s.Rect;if(s.Rect&&(s.Rect=ds(s.Rect,t)),t.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Ds.createDefaultAppearanceStream(s),"object"===(0,r.A)(s)&&"function"==typeof s.getKeyValueListForStream&&(i=s.getKeyValueListForStream()),s.Rect=o,s.hasAppearanceStream&&!s.appearanceStreamContent){var l=As(s);i.push({key:"AP",value:"<</N "+l+">>"}),t.internal.acroformPlugin.xForms.push(l)}if(s.appearanceStreamContent){var c="";for(var u in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(u)){var d=s.appearanceStreamContent[u];if(c+="/"+u+" ",c+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var a in d)if(d.hasOwnProperty(a)){var A=d[a];"function"==typeof A&&(A=A.call(t,s)),c+="/"+a+" "+A+" ",t.internal.acroformPlugin.xForms.indexOf(A)>=0||t.internal.acroformPlugin.xForms.push(A)}}else"function"==typeof(A=d)&&(A=A.call(t,s)),c+="/"+a+" "+A,t.internal.acroformPlugin.xForms.indexOf(A)>=0||t.internal.acroformPlugin.xForms.push(A);c+=">>"}i.push({key:"AP",value:"<<\n"+c+">>"})}t.internal.putStream({additionalKeyValues:i,objectId:s.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var a=n,s=e[n];t.internal.newObjectDeferredBegin(s.objId,!0),"object"===(0,r.A)(s)&&"function"==typeof s.putStream&&s.putStream(),delete e[a]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}}(this,e),!(e instanceof ws))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ya.AcroFormChoiceField=Ns,Ya.AcroFormListBox=js,Ya.AcroFormComboBox=Cs,Ya.AcroFormEditBox=Bs,Ya.AcroFormButton=ks,Ya.AcroFormPushButton=Ss,Ya.AcroFormRadioButton=Es,Ya.AcroFormCheckBox=_s,Ya.AcroFormTextField=Is,Ya.AcroFormPasswordField=Ts,Ya.AcroFormAppearance=Ds,Ya.AcroForm={ChoiceField:Ns,ListBox:js,ComboBox:Cs,EditBox:Bs,Button:ks,PushButton:Ss,RadioButton:Es,CheckBox:_s,TextField:Is,PasswordField:Ts,Appearance:Ds},Xa.AcroForm={ChoiceField:Ns,ListBox:js,ComboBox:Cs,EditBox:Bs,Button:ks,PushButton:Ss,RadioButton:Es,CheckBox:_s,TextField:Is,PasswordField:Ts,Appearance:Ds};var Us=Xa.AcroForm;function Ps(e){return e.reduce(function(e,t,n){return e[t]=n,e},{})}!function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(e,t){var r,s,i,o,l,c=n;if("RGBA"===(t=t||n)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(N(e))for(l in a)for(i=a[l],r=0;r<i.length;r+=1){for(o=!0,s=0;s<i[r].length;s+=1)if(void 0!==i[r][s]&&i[r][s]!==e[s]){o=!1;break}if(!0===o){c=l;break}}else for(l in a)for(i=a[l],r=0;r<i.length;r+=1){for(o=!0,s=0;s<i[r].length;s+=1)if(void 0!==i[r][s]&&i[r][s]!==e.charCodeAt(s)){o=!1;break}if(!0===o){c=l;break}}return c===n&&t!==n&&(c=t),c},i=function e(t){for(var n=this.internal.write,r=this.internal.putStream,a=(0,this.internal.getFilters)();-1!==a.indexOf("FlateEncode");)a.splice(a.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var s=[];if(s.push({key:"Type",value:"/XObject"}),s.push({key:"Subtype",value:"/Image"}),s.push({key:"Width",value:t.width}),s.push({key:"Height",value:t.height}),t.colorSpace===x.INDEXED?s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(s.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===x.DEVICE_CMYK&&s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),s.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&s.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var i="",o=0,l=t.transparency.length;o<l;o++)i+=t.transparency[o]+" "+t.transparency[o]+" ";s.push({key:"Mask",value:"["+i+"]"})}void 0!==t.sMask&&s.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:s,alreadyAppliedFilters:c,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var u=(null!=t.predictor?"/Predictor "+t.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+t.width,d={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:u,data:t.sMask};"filter"in t&&(d.filter=t.filter),e.call(this,d)}if(t.colorSpace===x.INDEXED){var A=this.internal.newObject();r({data:C(new Uint8Array(t.palette)),objectId:A}),n("endobj")}},o=function(){var e=this.internal.collections[t+"images"];for(var n in e)i.call(this,e[n])},l=function(){var e,n=this.internal.collections[t+"images"],r=this.internal.write;for(var a in n)r("/I"+(e=n[a]).index,e.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var e=this.internal.collections[t+"images"];return c.call(this),e},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},A=function(t){return"function"==typeof e["process"+t.toUpperCase()]},h=function(e){return"object"===(0,r.A)(e)&&1===e.nodeType},f=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return ja(unescape(r).split("base64,").pop());var a=e.loadFile(r,!0);if(void 0!==a)return a}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var s;switch(n){case"PNG":s="image/png";break;case"WEBP":s="image/webp";break;default:s="image/jpeg"}return ja(t.toDataURL(s,1).split("base64,").pop())}},p=function(e){var n=this.internal.collections[t+"images"];if(n)for(var r in n)if(e===n[r].alias)return n[r]},m=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},g=function(e,t,n,r,a,s){var i=m.call(this,n,r,a),o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=u.call(this);if(n=i[0],r=i[1],c[a.index]=a,s){s*=Math.PI/180;var d=Math.cos(s),A=Math.sin(s),h=function(e){return e.toFixed(4)},f=[h(d),h(A),h(-1*A),h(d),0,0,"cm"]}this.internal.write("q"),s?(this.internal.write([1,"0","0",1,o(e),l(t+r),"cm"].join(" ")),this.internal.write(f.join(" ")),this.internal.write([o(n),"0","0",o(r),"0","0","cm"].join(" "))):this.internal.write([o(n),"0","0",o(r),o(e),l(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+a.index+" Do"),this.internal.write("Q")},x=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(e){var t,n,r=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(N(e))for(n=e.byteLength/2,t=0;t<n;t++)r=(r<<5)-r+e[t],r|=0;return r},b=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},w=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null};e.__addimage__.isArrayBuffer=function(e){return e instanceof ArrayBuffer};var N=e.__addimage__.isArrayBufferView=function(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array},j=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},C=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=N(e)?e:new Uint8Array(e),r=0;r<n.length;r+=8192)t+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return t};e.addImage=function(){var e,t,a,s,i,o,l,u,d;if("number"==typeof arguments[1]?(t=n,a=arguments[1],s=arguments[2],i=arguments[3],o=arguments[4],l=arguments[5],u=arguments[6],d=arguments[7]):(t=arguments[1],a=arguments[2],s=arguments[3],i=arguments[4],o=arguments[5],l=arguments[6],u=arguments[7],d=arguments[8]),"object"===(0,r.A)(e=arguments[0])&&!h(e)&&"imageData"in e){var A=e;e=A.imageData,t=A.format||t||n,a=A.x||a||0,s=A.y||s||0,i=A.w||A.width||i,o=A.h||A.height||o,l=A.alias||l,u=A.compression||u,d=A.rotation||A.angle||d}var f=this.internal.getFilters();if(void 0===u&&-1!==f.indexOf("FlateEncode")&&(u="SLOW"),isNaN(a)||isNaN(s))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var p=B.call(this,e,t,l,u);return g.call(this,a,s,i,o,p,d),this};var B=function(t,r,a,i){var o,l,c;if("string"==typeof t&&s(t)===n){t=unescape(t);var u=k(t,!1);(""!==u||void 0!==(u=e.loadFile(t,!0)))&&(t=u)}if(h(t)&&(t=f(t,r)),r=s(t,r),!A(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if((null==(c=a)||0===c.length)&&(a=function(e){return"string"==typeof e||N(e)?y(e):N(e.data)?y(e.data):null}(t)),(o=p.call(this,a))||(t instanceof Uint8Array||"RGBA"===r||(l=t,t=j(t)),o=this["process"+r.toUpperCase()](t,d.call(this),a,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:v.NONE}(i),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},k=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var n,r="";if("string"==typeof e){var a;n=null!==(a=w(e))&&void 0!==a?a:e;try{r=ja(n)}catch(s){if(t)throw b(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+s.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};e.getImageProperties=function(t){var r,a,i="";if(h(t)&&(t=f(t)),"string"==typeof t&&s(t)===n&&(""===(i=k(t,!1))&&(i=e.loadFile(t)||""),t=i),a=s(t),!A(a))throw new Error("addImage does not support files of type '"+a+"', please ensure that a plugin for '"+a+"' support is added.");if(t instanceof Uint8Array||(t=j(t)),!(r=this["process"+a.toUpperCase()](t)))throw new Error("An unknown error occurred whilst processing the image");return r.fileType=a,r}}(Xa.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};Xa.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,r,a,s=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,u=0;u<l.length&&!c;u++)switch((n=l[u]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var d=0;d<l.length;d++){n=l[d];var A=this.internal.pdfEscape,h=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),m=this.internal.getEncryptor(f.objId),g=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(r="/Rect ["+s(n.bounds.x)+" "+i(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+i(n.bounds.y)+"] ")+"/Contents ("+A(m(n.contents))+")",a+=" /Popup "+p.objId+" 0 R",a+=" /P "+o.objId+" 0 R",a+=" /T ("+A(m(g))+") >>",f.content=a;var x=f.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+s(n.bounds.x+30)+" "+i(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+i(n.bounds.y)+"] ")+" /Parent "+x,n.open&&(a+=" /Open true"),a+=" >>",p.content=a,this.internal.write(f.objId,"0 R",p.objId,"0 R");break;case"freetext":r="/Rect ["+s(n.bounds.x)+" "+i(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+i(n.bounds.y+n.bounds.h)+"] ";var v=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+A(h(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+v+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var y=this.annotations._nameMap[n.options.name];n.options.pageNumber=y.page,n.options.top=y.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+A(h(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var b=i(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+b+" "+n.options.zoom+"]"}""!=a&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,r,a){var s=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:i(e),y:o(t),w:i(e+n),h:o(t+r)},options:a,type:"link"})},e.textWithLink=function(e,t,n,r){var a,s,i=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){s=r.maxWidth;var l=this.splitTextToSize(e,s).length;a=Math.ceil(o*l)}else s=i,a=o;return this.text(e,t,n,r),n+=.2*o,"center"===r.align&&(t-=i/2),"right"===r.align&&(t-=i),this.link(t,n-o,s,a,r),i},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(Xa.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},i=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return i(e)&&a.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return i(e)&&s(e)&&4==t[e.charCodeAt(0)].length},d=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=n,a="",s=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(s++,"number"==typeof(r=r[e.charCodeAt(t)])&&(a+=String.fromCharCode(r),r=n,s=0),t===e.length-1&&(r=n,a+=e.charAt(t-(s-1)),t-=s-1,s=0)):(r=n,a+=e.charAt(t-s),t-=s,s=0);return a};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var A=e.__arabicParser__.getCorrectForm=function(e,t,n){return i(e)?!1===s(e)?-1:!c(e)||!i(t)&&!i(n)||!i(n)&&o(t)||o(e)&&!i(t)||o(e)&&l(t)||o(e)&&o(t)?0:u(e)&&i(t)&&!o(t)&&i(n)&&c(n)?3:o(e)||!i(n)?1:2:-1},h=function(e){var n=0,r=0,a=0,s="",o="",l="",c=(e=e||"").split("\\s+"),u=[];for(n=0;n<c.length;n+=1){for(u.push(""),r=0;r<c[n].length;r+=1)s=c[n][r],o=c[n][r-1],l=c[n][r+1],i(s)?(a=A(s,o,l),u[n]+=-1!==a?String.fromCharCode(t[s.charCodeAt(0)][a]):s):u[n]+=s;u[n]=d(u[n])}return u.join(" ")},f=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?n.push([h(t[r][0]),t[r][1],t[r][2]]):n.push([h(t[r])]);e=n}else e=h(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",f])}(Xa.API),Xa.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform","javascript"===e.variant?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Xa.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,a=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var a=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var s=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return s},set:function(e){s=e}});var i=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return i},set:function(e){i=e}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return a.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){a.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),r=t.font||this.getFont(),s=t.scaleFactor||this.internal.scaleFactor,i=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var u=t.maxWidth;u>0?"string"==typeof e?e=this.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,u))},[])):e=Array.isArray(e)?e:[e];for(var d=0;d<e.length;d++)i<(l=this.getStringUnitWidth(e[d],{font:r})*n)&&(i=l);return 0!==i&&(o=e.length),{w:i/=s,h:Math.max((o*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/s,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var e;e=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var r=this.internal.__cell__.lastCell,s=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==r.lineNumber&&(r.lineNumber===e.lineNumber?(e.x=(r.x||0)+(r.width||0),e.y=r.y||0):r.y+r.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=r.y+r.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-s,e.y+s,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+s,{align:"center",baseline:"top",maxWidth:e.width-s-s}):this.text(e.text,e.x+s,e.y+s,{align:"left",baseline:"top",maxWidth:e.width-s-s})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,c,u,d){if(a.call(this),!c)throw new Error("No data for PDF table.");var A,h,f,p,m=[],g=[],x=[],v={},y={},b=[],w=[],N=(d=d||{}).autoSize||!1,j=!1!==d.printHeaders,C=d.css&&void 0!==d.css["font-size"]?16*d.css["font-size"]:d.fontSize||12,B=d.margins||Object.assign({width:this.getPageWidth()},t),k="number"==typeof d.padding?d.padding:3,S=d.headerBackgroundColor||"#c8c8c8",E=d.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=C,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=S,this.internal.__cell__.headerTextColor=E,this.setFontSize(C),null==u)g=m=Object.keys(c[0]),x=m.map(function(){return"left"});else if(Array.isArray(u)&&"object"===(0,r.A)(u[0]))for(m=u.map(function(e){return e.name}),g=u.map(function(e){return e.prompt||e.name||""}),x=u.map(function(e){return e.align||"left"}),A=0;A<u.length;A+=1)y[u[A].name]=.7499990551181103*u[A].width;else Array.isArray(u)&&"string"==typeof u[0]&&(g=m=u,x=m.map(function(){return"left"}));if(N||Array.isArray(u)&&"string"==typeof u[0])for(A=0;A<m.length;A+=1){for(v[p=m[A]]=c.map(function(e){return e[p]}),this.setFont(void 0,"bold"),b.push(this.getTextDimensions(g[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=v[p],this.setFont(void 0,"normal"),f=0;f<h.length;f+=1)b.push(this.getTextDimensions(h[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);y[p]=Math.max.apply(null,b)+k+k,b=[]}if(j){var F={};for(A=0;A<m.length;A+=1)F[m[A]]={},F[m[A]].text=g[A],F[m[A]].align=x[A];var _=l.call(this,F,y);w=m.map(function(t){return new i(e,n,y[t],_,F[t].text,void 0,F[t].align)}),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var I=u.reduce(function(e,t){return e[t.name]=t.align,e},{});for(A=0;A<c.length;A+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:A,data:c[A]},this);var T=l.call(this,c[A],y);for(f=0;f<m.length;f+=1){var D=c[A][m[f]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:A,col:f,data:D},this),o.call(this,new i(e,n,y[m[f]],T,D,A+2,I[m[f]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var l=function(e,t){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,a=this.internal.scaleFactor;return Object.keys(e).map(function(r){var a=e[r];return this.splitTextToSize(a.hasOwnProperty("text")?a.text:a,t[r]-n-n)},this).map(function(e){return this.getLineHeightFactor()*e.length*r/a+n+n},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){a.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var r;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){r=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(r.y=this.internal.__cell__.margins.top||0,l.push(r)),r.lineNumber=e;var u=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,r),this.setTextColor(u)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(Xa.API);var Rs={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Os=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ms=Ps(Os),Qs=[100,200,300,400,500,600,700,800,900],Hs=Ps(Qs);function zs(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return Rs[e=e||"normal"]?e:"normal"}(e.style),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),a=function(e){return"number"==typeof Ms[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,n,r].join(" ")}}}function Ws(e,t,n,r){var a;for(a=n;a>=0&&a<t.length;a+=r)if(e[t[a]])return e[t[a]];for(a=n;a>=0&&a<t.length;a-=r)if(e[t[a]])return e[t[a]]}var Vs={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Ks={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Gs(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function qs(e){return e.trimLeft()}function Xs(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Ys(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var Js,Zs,$s,ei,ti,ni,ri,ai,si,ii=["times"];function oi(e,t,n,r){var a=4,s=ui;switch(r){case Xa.API.image_compression.FAST:a=1,s=ci;break;case Xa.API.image_compression.MEDIUM:a=6,s=di;break;case Xa.API.image_compression.SLOW:a=9,s=Ai}e=function(e,t,n,r){for(var a,s=e.length/t,i=new Uint8Array(e.length+s),o=[li,ci,ui,di,Ai],l=0;l<s;l+=1){var c=l*t,u=e.subarray(c,c+t);if(r)i.set(r(u,n,a),c+l);else{for(var d=o.length,A=[],h=0;h<d;h+=1)A[h]=o[h](u,n,a);var f=fi(A.concat());i.set(A[f],c+l)}a=u}return i}(e,t,n,s);var i=Q(e,{level:a});return Xa.API.__addimage__.arrayBufferToBinaryString(i)}function li(e){var t=Array.apply([],e);return t.unshift(0),t}function ci(e,t){var n=e.length,r=[];r[0]=1;for(var a=0;a<n;a+=1){var s=e[a-t]||0;r[a+1]=e[a]-s+256&255}return r}function ui(e,t,n){var r=e.length,a=[];a[0]=2;for(var s=0;s<r;s+=1){var i=n&&n[s]||0;a[s+1]=e[s]-i+256&255}return a}function di(e,t,n){var r=e.length,a=[];a[0]=3;for(var s=0;s<r;s+=1){var i=e[s-t]||0,o=n&&n[s]||0;a[s+1]=e[s]+256-(i+o>>>1)&255}return a}function Ai(e,t,n){var r=e.length,a=[];a[0]=4;for(var s=0;s<r;s+=1){var i=hi(e[s-t]||0,n&&n[s]||0,n&&n[s-t]||0);a[s+1]=e[s]-i+256&255}return a}function hi(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),a=Math.abs(e-n),s=Math.abs(e+t-n-n);return r<=a&&r<=s?e:a<=s?t:n}function fi(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))}function pi(e,t,n){var r=t*n,a=Math.floor(r/8),s=16-(r-8*a+n),i=(1<<n)-1;return gi(e,a)>>s&i}function mi(e,t,n,r){var a=n*r,s=Math.floor(a/8),i=16-(a-8*s+r),o=(1<<r)-1,l=(t&o)<<i;!function(e,t,n){if(t+1<e.byteLength)e.setUint16(t,n,!1);else{var r=n>>8&255;e.setUint8(t,r)}}(e,s,gi(e,s)&~(o<<i)&65535|l)}function gi(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function xi(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<1+(7&a);e[t++],e[t++];var o=null,l=null;s&&(o=t,l=i,t+=3*i);var c=!0,u=[],d=0,A=null,h=0,f=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,f=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(0===k)break;t+=k}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var p=e[t++];d=e[t++]|e[t++]<<8,A=e[t++],1&p||(A=null),h=p>>2&7,t++;break;case 254:for(;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(0===k)break;t+=k}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var m=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,y=e[t++],b=y>>6&1,w=1<<1+(7&y),N=o,j=l,C=!1;y>>7&&(C=!0,N=t,j=w,t+=3*w);var B=t;for(t++;;){var k;if(!((k=e[t++])>=0))throw Error("Invalid block size");if(0===k)break;t+=k}u.push({x:m,y:g,width:x,height:v,has_local_palette:C,palette_offset:N,palette_size:j,data_offset:B,data_length:t-B,transparent_index:A,interlaced:!!b,delay:d,disposal:h});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return f},this.frameInfo=function(e){if(e<0||e>=u.length)throw new Error("Frame index out of range.");return u[e]},this.decodeAndBlitFrameBGRA=function(t,r){var a=this.frameInfo(t),s=a.width*a.height,i=new Uint8Array(s);vi(e,a.data_offset,i,s);var o=a.palette_offset,l=a.transparent_index;null===l&&(l=256);var c=a.width,u=n-c,d=c,A=4*(a.y*n+a.x),h=4*((a.y+a.height)*n+a.x),f=A,p=4*u;!0===a.interlaced&&(p+=4*n*7);for(var m=8,g=0,x=i.length;g<x;++g){var v=i[g];if(0===d&&(d=c,(f+=p)>=h&&(p=4*u+4*n*(m-1),f=A+(c+u)*(m<<1),m>>=1)),v===l)f+=4;else{var y=e[o+3*v],b=e[o+3*v+1],w=e[o+3*v+2];r[f++]=w,r[f++]=b,r[f++]=y,r[f++]=255}--d}},this.decodeAndBlitFrameRGBA=function(t,r){var a=this.frameInfo(t),s=a.width*a.height,i=new Uint8Array(s);vi(e,a.data_offset,i,s);var o=a.palette_offset,l=a.transparent_index;null===l&&(l=256);var c=a.width,u=n-c,d=c,A=4*(a.y*n+a.x),h=4*((a.y+a.height)*n+a.x),f=A,p=4*u;!0===a.interlaced&&(p+=4*n*7);for(var m=8,g=0,x=i.length;g<x;++g){var v=i[g];if(0===d&&(d=c,(f+=p)>=h&&(p=4*u+4*n*(m-1),f=A+(c+u)*(m<<1),m>>=1)),v===l)f+=4;else{var y=e[o+3*v],b=e[o+3*v+1],w=e[o+3*v+2];r[f++]=y,r[f++]=b,r[f++]=w,r[f++]=255}--d}}}function vi(e,t,n,r){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,l=a+1,c=(1<<l)-1,u=0,d=0,A=0,h=e[t++],f=new Int32Array(4096),p=null;;){for(;u<16&&0!==h;)d|=e[t++]<<u,u+=8,1===h?h=e[t++]:--h;if(u<l)break;var m=d&c;if(d>>=l,u-=l,m!==s){if(m===i)break;for(var g=m<o?m:p,x=0,v=g;v>s;)v=f[v]>>8,++x;var y=v;if(A+x+(g!==m?1:0)>r)return void xa.log("Warning, gif stream longer than expected.");n[A++]=y;var b=A+=x;for(g!==m&&(n[A++]=y),v=g;x--;)v=f[v],n[--b]=255&v,v>>=8;null!==p&&o<4096&&(f[o++]=p<<8|y,o>=c+1&&l<12&&(++l,c=c<<1|1)),p=m}else o=i+1,c=(1<<(l=a+1))-1,p=null}return A!==r&&xa.log("Warning, gif stream shorter than expected."),n}function yi(e){var t,n,r,a,s,i=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),A=new Array(65535),h=new Array(64),f=new Array(64),p=[],m=0,g=7,x=new Array(64),v=new Array(64),y=new Array(64),b=new Array(256),w=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],_=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function I(e,t){for(var n=0,r=0,a=new Array,s=1;s<=16;s++){for(var i=1;i<=e[s];i++)a[t[r]]=[],a[t[r]][0]=n,a[t[r]][1]=s,r++,n++;n*=2}return a}function T(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(m|=1<<g),n--,--g<0&&(255==m?(D(255),D(0)):D(m),g=7,m=0)}function D(e){p.push(e)}function L(e){D(e>>8&255),D(255&e)}function U(e,t,n,r,a){for(var s,i=a[0],o=a[240],l=function(e,t){var n,r,a,s,i,o,l,c,u,d,A=0;for(u=0;u<8;++u){n=e[A],r=e[A+1],a=e[A+2],s=e[A+3],i=e[A+4],o=e[A+5],l=e[A+6];var f=n+(c=e[A+7]),p=n-c,m=r+l,g=r-l,x=a+o,v=a-o,y=s+i,b=s-i,w=f+y,N=f-y,j=m+x,C=m-x;e[A]=w+j,e[A+4]=w-j;var B=.707106781*(C+N);e[A+2]=N+B,e[A+6]=N-B;var k=.382683433*((w=b+v)-(C=g+p)),S=.5411961*w+k,E=1.306562965*C+k,F=.707106781*(j=v+g),_=p+F,I=p-F;e[A+5]=I+S,e[A+3]=I-S,e[A+1]=_+E,e[A+7]=_-E,A+=8}for(A=0,u=0;u<8;++u){n=e[A],r=e[A+8],a=e[A+16],s=e[A+24],i=e[A+32],o=e[A+40],l=e[A+48];var T=n+(c=e[A+56]),D=n-c,L=r+l,U=r-l,P=a+o,R=a-o,O=s+i,M=s-i,Q=T+O,H=T-O,z=L+P,W=L-P;e[A]=Q+z,e[A+32]=Q-z;var V=.707106781*(W+H);e[A+16]=H+V,e[A+48]=H-V;var K=.382683433*((Q=M+R)-(W=U+D)),G=.5411961*Q+K,q=1.306562965*W+K,X=.707106781*(z=R+U),Y=D+X,J=D-X;e[A+40]=J+G,e[A+24]=J-G,e[A+8]=Y+q,e[A+56]=Y-q,A++}for(u=0;u<64;++u)d=e[u]*t[u],h[u]=d>0?d+.5|0:d-.5|0;return h}(e,t),c=0;c<64;++c)f[N[c]]=l[c];var u=f[0]-n;n=f[0],0==u?T(r[0]):(T(r[A[s=32767+u]]),T(d[s]));for(var p=63;p>0&&0==f[p];)p--;if(0==p)return T(i),n;for(var m,g=1;g<=p;){for(var x=g;0==f[g]&&g<=p;)++g;var v=g-x;if(v>=16){m=v>>4;for(var y=1;y<=m;++y)T(o);v&=15}s=32767+f[g],T(a[(v<<4)+A[s]]),T(d[s]),g++}return 63!=p&&T(i),n}function P(e){e=Math.min(Math.max(e,1),100),s!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=i((t[n]*e+50)/100);r=Math.min(Math.max(r,1),255),o[N[n]]=r}for(var a=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var d=i((a[s]*e+50)/100);d=Math.min(Math.max(d,1),255),l[N[s]]=d}for(var A=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],h=0,f=0;f<8;f++)for(var p=0;p<8;p++)c[h]=1/(o[N[h]]*A[f]*A[p]*8),u[h]=1/(l[N[h]]*A[f]*A[p]*8),h++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),s=e)}this.encode=function(e,s){s&&P(s),p=new Array,m=0,g=7,L(65496),L(65504),L(16),D(74),D(70),D(73),D(70),D(0),D(1),D(1),D(0),L(1),L(1),D(0),D(0),function(){L(65499),L(132),D(0);for(var e=0;e<64;e++)D(o[e]);D(1);for(var t=0;t<64;t++)D(l[t])}(),function(e,t){L(65472),L(17),D(8),L(t),L(e),D(3),D(1),D(17),D(0),D(2),D(17),D(1),D(3),D(17),D(1)}(e.width,e.height),function(){L(65476),L(418),D(0);for(var e=0;e<16;e++)D(j[e+1]);for(var t=0;t<=11;t++)D(C[t]);D(16);for(var n=0;n<16;n++)D(B[n+1]);for(var r=0;r<=161;r++)D(k[r]);D(1);for(var a=0;a<16;a++)D(S[a+1]);for(var s=0;s<=11;s++)D(E[s]);D(17);for(var i=0;i<16;i++)D(F[i+1]);for(var o=0;o<=161;o++)D(_[o])}(),L(65498),L(12),D(3),D(1),D(0),D(2),D(17),D(3),D(17),D(0),D(63),D(0);var i=0,d=0,A=0;m=0,g=7,this.encode.displayName="_encode_";for(var h,f,b,N,I,R,O,M,Q,H=e.data,z=e.width,W=e.height,V=4*z,K=0;K<W;){for(h=0;h<V;){for(I=V*K+h,O=-1,M=0,Q=0;Q<64;Q++)R=I+(M=Q>>3)*V+(O=4*(7&Q)),K+M>=W&&(R-=V*(K+1+M-W)),h+O>=V&&(R-=h+O-V+4),f=H[R++],b=H[R++],N=H[R++],x[Q]=(w[f]+w[b+256|0]+w[N+512|0]>>16)-128,v[Q]=(w[f+768|0]+w[b+1024|0]+w[N+1280|0]>>16)-128,y[Q]=(w[f+1280|0]+w[b+1536|0]+w[N+1792|0]>>16)-128;i=U(x,c,i,t,r),d=U(v,u,d,n,a),A=U(y,u,A,n,a),h+=32}K+=8}if(g>=0){var G=[];G[1]=g+1,G[0]=(1<<g+1)-1,T(G)}return L(65497),new Uint8Array(p)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)b[t]=e(t)}(),t=I(j,C),n=I(S,E),r=I(B,k),a=I(F,_),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)A[32767+r]=n,d[32767+r]=[],d[32767+r][1]=n,d[32767+r][0]=r;for(var a=-(t-1);a<=-e;a++)A[32767+a]=n,d[32767+a]=[],d[32767+a][1]=n,d[32767+a][0]=t-1+a;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)w[e]=19595*e,w[e+256|0]=38470*e,w[e+512|0]=7471*e+32768,w[e+768|0]=-11059*e,w[e+1024|0]=-21709*e,w[e+1280|0]=32768*e+8421375,w[e+1536|0]=-27439*e,w[e+1792|0]=-5329*e}(),P(e)}function bi(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function wi(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var r=0;4>r;r++)if(e[t+r]!=n.charCodeAt(r))return!0;return!1}function r(e,t,n,r,a){for(var s=0;s<a;s++)e[t+s]=n[r+s]}function a(e,t,n,r){for(var a=0;a<r;a++)e[t+a]=n}function s(e){return new Int32Array(e)}function i(e,t){for(var n=[],r=0;r<e;r++)n.push(new t);return n}function o(e,t){var n=[];return function e(n,r,a){for(var s=a[r],i=0;i<s&&(n.push(a.length>r+1?[]:new t),!(a.length<r+1));i++)e(n[i],r+1,a)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function c(e,n,r,a,s){t(!(a%r));do{e[n+(a-=r)]=s}while(0<a)}function u(e,n,r,a,i){if(t(2328>=i),512>=i)var o=s(512);else if(null==(o=s(i)))return 0;return function(e,n,r,a,i,o){var u,A,h=n,f=1<<r,p=s(16),m=s(16);for(t(0!=i),t(null!=a),t(null!=e),t(0<r),A=0;A<i;++A){if(15<a[A])return 0;++p[a[A]]}if(p[0]==i)return 0;for(m[1]=0,u=1;15>u;++u){if(p[u]>1<<u)return 0;m[u+1]=m[u]+p[u]}for(A=0;A<i;++A)u=a[A],0<a[A]&&(o[m[u]++]=A);if(1==m[15])return(a=new d).g=0,a.value=o[0],c(e,h,1,f,a),f;var g,x=-1,v=f-1,y=0,b=1,w=1,N=1<<r;for(A=0,u=1,i=2;u<=r;++u,i<<=1){if(b+=w<<=1,0>(w-=p[u]))return 0;for(;0<p[u];--p[u])(a=new d).g=u,a.value=o[A++],c(e,h+y,i,N,a),y=l(y,u)}for(u=r+1,i=2;15>=u;++u,i<<=1){if(b+=w<<=1,0>(w-=p[u]))return 0;for(;0<p[u];--p[u]){if(a=new d,(y&v)!=x){for(h+=N,g=1<<(x=u)-r;15>x&&!(0>=(g-=p[x]));)++x,g<<=1;f+=N=1<<(g=x-r),e[n+(x=y&v)].g=g+r,e[n+x].value=h-n-x}a.g=u-r,a.value=o[A++],c(e,h+(y>>r),i,N,a),y=l(y,u)}}return b!=2*m[15]-1?0:f}(e,n,r,a,i,o)}function d(){this.value=this.g=0}function A(){this.value=this.g=0}function h(){this.G=i(5,d),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Rn,A)}function f(e,n,r,a){t(null!=e),t(null!=n),t(2147483648>a),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=r,e.Jd=n,e.Yc=r+a,e.Zc=4<=a?r+a-4+1:r,B(e)}function p(e,t){for(var n=0;0<t--;)n|=S(e,128)<<t;return n}function m(e,t){var n=p(e,t);return k(e)?-n:n}function g(e,n,r,a){var s,i=0;for(t(null!=e),t(null!=n),t(4294967288>a),e.Sb=a,e.Ra=0,e.u=0,e.h=0,4<a&&(a=4),s=0;s<a;++s)i+=n[r+s]<<8*s;e.Ra=i,e.bb=a,e.oa=n,e.pa=r}function x(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Qn-8>>>0,++e.bb,e.u-=8;N(e)&&(e.h=1,e.u=0)}function v(e,n){if(t(0<=n),!e.h&&n<=Mn){var r=w(e)&On[n];return e.u+=n,x(e),r}return e.h=1,e.u=0}function y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function b(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function w(e){return e.Ra>>>(e.u&Qn-1)>>>0}function N(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Qn}function j(e,t){e.u=t,e.h=N(e)}function C(e){e.u>=Hn&&(t(e.u>=Hn),x(e))}function B(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function k(e){return p(e,1)}function S(e,t){var n=e.Ca;0>e.b&&B(e);var r=e.b,a=n*t>>>8,s=(e.I>>>r>a)+0;for(s?(n-=a,e.I-=a+1<<r>>>0):n=a+1,r=n,a=0;256<=r;)a+=8,r>>=8;return r=7^a+zn[r],e.b-=r,e.Ca=(n<<r)-1,s}function E(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function F(e,t){return e[t+0]|e[t+1]<<8}function _(e,t){return F(e,t)|e[t+2]<<16}function I(e,t){return F(e,t)|F(e,t+2)<<16}function T(e,n){var r=1<<n;return t(null!=e),t(0<n),e.X=s(r),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function D(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function L(){this.X=[],this.Xa=this.Mb=0}function U(e,n,r,a){t(null!=r),t(null!=a);var s=r[0],i=a[0];return 0==s&&(s=(e*i+n/2)/n),0==i&&(i=(n*s+e/2)/e),0>=s||0>=i?0:(r[0]=s,a[0]=i,1)}function P(e,t){return e+(1<<t)-1>>>t}function R(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function O(t,n){e[n]=function(n,r,a,s,i,o,l){var c;for(c=0;c<i;++c){var u=e[t](o[l+c-1],a,s+c);o[l+c]=R(n[r+c],u)}}}function M(){this.ud=this.hd=this.jd=0}function Q(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function H(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function z(e,t){return H(e+(e-t+.5>>1))}function W(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function V(e,t,n,r,a,s,i){for(r=s[i-1],n=0;n<a;++n)s[i+n]=r=R(e[t+n],r)}function K(e,t,n,r,a){var s;for(s=0;s<n;++s){var i=e[t+s],o=i>>8&255,l=16711935&(l=(l=16711935&i)+((o<<16)+o));r[a+s]=(4278255360&i)+l>>>0}}function G(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function q(e,t,n,r,a,s){var i;for(i=0;i<r;++i){var o=t[n+i],l=o>>>8,c=o,u=255&(u=(u=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(u<<24>>24)>>>5)),a[s+i]=(4278255360&o)+(u<<16)+c}}function X(t,n,r,a,s){e[n]=function(e,t,n,r,i,o,l,c,u){for(r=l;r<c;++r)for(l=0;l<u;++l)i[o++]=s(n[a(e[t++])])},e[t]=function(t,n,i,o,l,c,u){var d=8>>t.b,A=t.Ea,h=t.K[0],f=t.w;if(8>d)for(t=(1<<t.b)-1,f=(1<<d)-1;n<i;++n){var p,m=0;for(p=0;p<A;++p)p&t||(m=a(o[l++])),c[u++]=s(h[m&f]),m>>=d}else e["VP8LMapColor"+r](o,l,h,f,c,u,n,i,A)}}function Y(e,t,n,r,a){for(n=t+n;t<n;){var s=e[t++];r[a++]=s>>16&255,r[a++]=s>>8&255,r[a++]=255&s}}function J(e,t,n,r,a){for(n=t+n;t<n;){var s=e[t++];r[a++]=s>>16&255,r[a++]=s>>8&255,r[a++]=255&s,r[a++]=s>>24&255}}function Z(e,t,n,r,a){for(n=t+n;t<n;){var s=(i=e[t++])>>16&240|i>>12&15,i=240&i|i>>28&15;r[a++]=s,r[a++]=i}}function $(e,t,n,r,a){for(n=t+n;t<n;){var s=(i=e[t++])>>16&248|i>>13&7,i=i>>5&224|i>>3&31;r[a++]=s,r[a++]=i}}function ee(e,t,n,r,a){for(n=t+n;t<n;){var s=e[t++];r[a++]=255&s,r[a++]=s>>8&255,r[a++]=s>>16&255}}function te(e,t,n,a,s,i){if(0==i)for(n=t+n;t<n;)E(a,((i=e[t++])[0]>>24|i[1]>>8&65280|i[2]<<8&16711680|i[3]<<24)>>>0),s+=32;else r(a,s,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function re(e){return e==Hr||e==zr||e==Wr||e==Vr}function ae(){this.eb=[],this.size=this.A=this.fb=0}function se(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ie(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ae,this.f.kb=new se,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ue(e,t){var n=e.T,a=t.ba.f.RGBA,s=a.eb,i=a.fb+e.ka*a.A,o=ma[t.ba.S],l=e.y,c=e.O,u=e.f,d=e.N,A=e.ea,h=e.W,f=t.cc,p=t.dc,m=t.Mc,g=t.Nc,x=e.ka,v=e.ka+e.T,y=e.U,b=y+1>>1;for(0==x?o(l,c,null,null,u,d,A,h,u,d,A,h,s,i,null,null,y):(o(t.ec,t.fc,l,c,f,p,m,g,u,d,A,h,s,i-a.A,s,i,y),++n);x+2<v;x+=2)f=u,p=d,m=A,g=h,d+=e.Rc,h+=e.Rc,i+=2*a.A,o(l,(c+=2*e.fa)-e.fa,l,c,f,p,m,g,u,d,A,h,s,i-a.A,s,i,y);return c+=e.fa,e.j+v<e.o?(r(t.ec,t.fc,l,c,y),r(t.cc,t.dc,u,d,b),r(t.Mc,t.Nc,A,h,b),n--):1&v||o(l,c,null,null,u,d,A,h,u,d,A,h,s,i+a.A,null,null,y),n}function de(e,n,r){var a=e.F,s=[e.J];if(null!=a){var i=e.U,o=n.ba.S,l=o==Or||o==Wr;n=n.ba.f.RGBA;var c=[0],u=e.ka;c[0]=e.T,e.Kb&&(0==u?--c[0]:(--u,s[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-u));var d=n.eb;u=n.fb+u*n.A,e=jr(a,s[0],e.width,i,c,d,u+(l?0:3),n.A),t(r==c),e&&re(o)&&wr(d,u,l,i,c,n.A)}return 0}function Ae(e){var t=e.ma,n=t.ba.S,r=11>n,a=n==Ur||n==Rr||n==Or||n==Mr||12==n||re(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Ln(t.Oa,e,a?11:12))return 0;if(a&&re(n)&&xn(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=ce,e.Kb){if(n=e.U+1>>1,t.memory=s(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=ue,xn()}}else alert("todo:EmitYUV");a&&(t.Jb=de,r&&mn())}if(r&&!Fa){for(e=0;256>e;++e)_a[e]=89858*(e-128)+Ca>>ja,Da[e]=-22014*(e-128)+Ca,Ta[e]=-45773*(e-128),Ia[e]=113618*(e-128)+Ca>>ja;for(e=Ba;e<ka;++e)t=76283*(e-16)+Ca>>ja,La[e-Ba]=Ve(t,255),Ua[e-Ba]=Ve(t+8>>4,15);Fa=1}return 1}function he(e){var n=e.ma,r=e.U,a=e.T;return t(!(1&e.ka)),0>=r||0>=a?0:(r=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,r),n.Dc+=r,1)}function fe(e){e.ma.memory=null}function pe(e,t,n,r){return 47!=v(e,8)?0:(t[0]=v(e,14)+1,n[0]=v(e,14)+1,r[0]=v(e,1),0!=v(e,3)?0:!e.h)}function me(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+v(t,n)+1}function ge(e,t){return 120<t?t-120:1<=(n=((n=Jr[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function xe(e,t,n){var r=w(n),a=e[t+=255&r].g-8;return 0<a&&(j(n,n.u+8),r=w(n),t+=e[t].value,t+=r&(1<<a)-1),j(n,n.u+e[t].g),e[t].value}function ve(e,n,r){return r.g+=e.g,r.value+=e.value<<n>>>0,t(8>=r.g),e.g}function ye(e,n,r){var a=e.xc;return t((n=0==a?0:e.vc[e.md*(r>>a)+(n>>a)])<e.Wb),e.Ya[n]}function be(e,n,a,s){var i=e.ab,o=e.c*n,l=e.C;n=l+n;var c=a,u=s;for(s=e.Ta,a=e.Ua;0<i--;){var d=e.gc[i],A=l,h=n,f=c,p=u,m=(u=s,c=a,d.Ea);switch(t(A<h),t(h<=d.nc),d.hc){case 2:Kn(f,p,(h-A)*m,u,c);break;case 0:var g=A,x=h,v=u,y=c,b=(B=d).Ea;0==g&&(Wn(f,p,null,null,1,v,y),V(f,p+1,0,0,b-1,v,y+1),p+=b,y+=b,++g);for(var w=1<<B.b,N=w-1,j=P(b,B.b),C=B.K,B=B.w+(g>>B.b)*j;g<x;){var k=C,S=B,E=1;for(Vn(f,p,v,y-b,1,v,y);E<b;){var F=(E&~N)+w;F>b&&(F=b),(0,Jn[k[S++]>>8&15])(f,p+ +E,v,y+E-b,F-E,v,y+E),E=F}p+=b,y+=b,++g&N||(B+=j)}h!=d.nc&&r(u,c-m,u,c+(h-A-1)*m,m);break;case 1:for(m=f,x=p,b=(f=d.Ea)-(y=f&~(v=(p=1<<d.b)-1)),g=P(f,d.b),w=d.K,d=d.w+(A>>d.b)*g;A<h;){for(N=w,j=d,C=new M,B=x+y,k=x+f;x<B;)G(N[j++],C),Zn(C,m,x,p,u,c),x+=p,c+=p;x<k&&(G(N[j++],C),Zn(C,m,x,b,u,c),x+=b,c+=b),++A&v||(d+=g)}break;case 3:if(f==u&&p==c&&0<d.b){for(x=u,f=m=c+(h-A)*m-(y=(h-A)*P(d.Ea,d.b)),p=u,v=c,g=[],y=(b=y)-1;0<=y;--y)g[y]=p[v+y];for(y=b-1;0<=y;--y)x[f+y]=g[y];Gn(d,A,h,u,m,u,c)}else Gn(d,A,h,f,p,u,c)}c=s,u=a}u!=a&&r(s,a,c,u,o)}function we(e,n){var r=e.V,a=e.Ba+e.c*e.C,s=n-e.C;if(t(n<=e.l.o),t(16>=s),0<s){var i=e.l,o=e.Ta,l=e.Ua,c=i.width;if(be(e,s,r,a),s=l=[l],t((r=e.C)<(a=n)),t(i.v<i.va),a>i.o&&(a=i.o),r<i.j){var u=i.j-r;r=i.j,s[0]+=u*c}if(r>=a?r=0:(s[0]+=4*i.v,i.ka=r-i.j,i.U=i.va-i.v,i.T=a-r,r=1),r){if(l=l[0],11>(r=e.ca).S){var d=r.f.RGBA,A=(a=r.S,s=i.U,i=i.T,u=d.eb,d.A),h=i;for(d=d.fb+e.Ma*d.A;0<h--;){var f=o,p=l,m=s,g=u,x=d;switch(a){case Lr:$n(f,p,m,g,x);break;case Ur:er(f,p,m,g,x);break;case Hr:er(f,p,m,g,x),wr(g,x,0,m,1,0);break;case Pr:rr(f,p,m,g,x);break;case Rr:te(f,p,m,g,x,1);break;case zr:te(f,p,m,g,x,1),wr(g,x,0,m,1,0);break;case Or:te(f,p,m,g,x,0);break;case Wr:te(f,p,m,g,x,0),wr(g,x,1,m,1,0);break;case Mr:tr(f,p,m,g,x);break;case Vr:tr(f,p,m,g,x),Nr(g,x,m,1,0);break;case Qr:nr(f,p,m,g,x);break;default:t(0)}l+=c,d+=A}e.Ma+=i}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=n,t(e.C<=e.i)}function Ne(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,r=e.Ya[t].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function je(e,n,r,a,s,i){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=pa[e.Z]);n<r;++n)pa[e.Z](o,l,a,s,a,s,i),o=a,l=s,s+=i;e.qd=o,e.rd=l}}function Ce(e,n){var r=e.l.ma,a=0==r.Z||1==r.Z?e.l.j:e.C;if(a=e.C<a?a:e.C,t(n<=e.l.o),n>a){var s=e.l.width,i=r.ca,o=r.tb+s*a,l=e.V,c=e.Ba+e.c*a,u=e.gc;t(1==e.ab),t(3==u[0].hc),Xn(u[0],a,n,l,c,i,o),je(r,a,n,i,o,s)}e.C=e.Ma=n}function Be(e,n,r,a,s,i,o){var l=e.$/a,c=e.$%a,u=e.m,d=e.s,A=r+e.$,h=A;s=r+a*s;var f=r+a*i,p=280+d.ua,m=e.Pb?l:16777216,g=0<d.ua?d.Wa:null,x=d.wc,v=A<f?ye(d,c,l):null;t(e.C<i),t(f<=s);var y=!1;e:for(;;){for(;y||A<f;){var b=0;if(l>=m){var B=A-r;t((m=e).Pb),m.wd=m.m,m.xd=B,0<m.s.ua&&D(m.s.Wa,m.s.vb),m=l+$r}if(c&x||(v=ye(d,c,l)),t(null!=v),v.Qb&&(n[A]=v.qb,y=!0),!y)if(C(u),v.jc){b=u,B=n;var k=A,S=v.pd[w(b)&Rn-1];t(v.jc),256>S.g?(j(b,b.u+S.g),B[k]=S.value,b=0):(j(b,b.u+S.g-256),t(256<=S.value),b=S.value),0==b&&(y=!0)}else b=xe(v.G[0],v.H[0],u);if(u.h)break;if(y||256>b){if(!y)if(v.nd)n[A]=(v.qb|b<<8)>>>0;else{if(C(u),y=xe(v.G[1],v.H[1],u),C(u),B=xe(v.G[2],v.H[2],u),k=xe(v.G[3],v.H[3],u),u.h)break;n[A]=(k<<24|y<<16|b<<8|B)>>>0}if(y=!1,++A,++c>=a&&(c=0,++l,null!=o&&l<=i&&!(l%16)&&o(e,l),null!=g))for(;h<A;)b=n[h++],g.X[(506832829*b&4294967295)>>>g.Mb]=b}else if(280>b){if(b=me(b-256,u),B=xe(v.G[4],v.H[4],u),C(u),B=ge(a,B=me(B,u)),u.h)break;if(A-r<B||s-A<b)break e;for(k=0;k<b;++k)n[A+k]=n[A+k-B];for(A+=b,c+=b;c>=a;)c-=a,++l,null!=o&&l<=i&&!(l%16)&&o(e,l);if(t(A<=s),c&x&&(v=ye(d,c,l)),null!=g)for(;h<A;)b=n[h++],g.X[(506832829*b&4294967295)>>>g.Mb]=b}else{if(!(b<p))break e;for(y=b-280,t(null!=g);h<A;)b=n[h++],g.X[(506832829*b&4294967295)>>>g.Mb]=b;b=A,t(!(y>>>(B=g).Xa)),n[b]=B.X[y],y=!0}y||t(u.h==N(u))}if(e.Pb&&u.h&&A<s)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&D(e.s.vb,e.s.Wa);else{if(u.h)break e;null!=o&&o(e,l>i?i:l),e.a=0,e.$=A-r}return 1}return e.a=3,0}function ke(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Se(){var t=new sn;return null==t?null:(t.a=0,t.xb=fa,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Kn=K,Zn=q,$n=Y,er=J,tr=Z,nr=$,rr=ee,e.VP8LMapColor32b=qn,e.VP8LMapColor8b=Yn,t)}function Ee(e,n,r,o,l){var c=1,A=[e],f=[n],p=o.m,m=o.s,g=null,x=0;e:for(;;){if(r)for(;c&&v(p,1);){var y=A,b=f,N=o,B=1,k=N.m,S=N.gc[N.ab],E=v(k,2);if(N.Oc&1<<E)c=0;else{switch(N.Oc|=1<<E,S.hc=E,S.Ea=y[0],S.nc=b[0],S.K=[null],++N.ab,t(4>=N.ab),E){case 0:case 1:S.b=v(k,3)+2,B=Ee(P(S.Ea,S.b),P(S.nc,S.b),0,N,S.K),S.K=S.K[0];break;case 3:var F,_=v(k,8)+1,I=16<_?0:4<_?1:2<_?2:3;if(y[0]=P(S.Ea,I),S.b=I,F=B=Ee(_,1,0,N,S.K)){var D,L=_,U=S,O=1<<(8>>U.b),M=s(O);if(null==M)F=0;else{var Q=U.K[0],H=U.w;for(M[0]=U.K[0][0],D=1;D<1*L;++D)M[D]=R(Q[H+D],M[D-1]);for(;D<4*O;++D)M[D]=0;U.K[0]=null,U.K[0]=M,F=1}}B=F;break;case 2:break;default:t(0)}c=B}}if(A=A[0],f=f[0],c&&v(p,1)&&!(c=1<=(x=v(p,4))&&11>=x)){o.a=3;break e}var z;if(z=c)t:{var W,V,K,G=o,q=A,X=f,Y=x,J=r,Z=G.m,$=G.s,ee=[null],te=1,ne=0,re=Zr[Y];n:for(;;){if(J&&v(Z,1)){var ae=v(Z,3)+2,se=P(q,ae),ie=P(X,ae),oe=se*ie;if(!Ee(se,ie,0,G,ee))break n;for(ee=ee[0],$.xc=ae,W=0;W<oe;++W){var le=ee[W]>>8&65535;ee[W]=le,le>=te&&(te=le+1)}}if(Z.h)break n;for(V=0;5>V;++V){var ce=qr[V];!V&&0<Y&&(ce+=1<<Y),ne<ce&&(ne=ce)}var ue=i(te*re,d),de=te,Ae=i(de,h);if(null==Ae)var he=null;else t(65536>=de),he=Ae;var fe=s(ne);if(null==he||null==fe||null==ue){G.a=1;break n}var pe=ue;for(W=K=0;W<te;++W){var me=he[W],ge=me.G,xe=me.H,ye=0,be=1,we=0;for(V=0;5>V;++V){ce=qr[V],ge[V]=pe,xe[V]=K,!V&&0<Y&&(ce+=1<<Y);r:{var Ne,je=ce,Ce=G,Se=fe,Fe=pe,_e=K,Ie=0,Te=Ce.m,De=v(Te,1);if(a(Se,0,0,je),De){var Le=v(Te,1)+1,Ue=v(Te,1),Pe=v(Te,0==Ue?1:8);Se[Pe]=1,2==Le&&(Se[Pe=v(Te,8)]=1);var Re=1}else{var Oe=s(19),Me=v(Te,4)+4;if(19<Me){Ce.a=3;var Qe=0;break r}for(Ne=0;Ne<Me;++Ne)Oe[Yr[Ne]]=v(Te,3);var He=void 0,ze=void 0,We=Ce,Ve=Oe,Ke=je,Ge=Se,qe=0,Xe=We.m,Ye=8,Je=i(128,d);a:for(;u(Je,0,7,Ve,19);){if(v(Xe,1)){var Ze=2+2*v(Xe,3);if((He=2+v(Xe,Ze))>Ke)break a}else He=Ke;for(ze=0;ze<Ke&&He--;){C(Xe);var $e=Je[0+(127&w(Xe))];j(Xe,Xe.u+$e.g);var et=$e.value;if(16>et)Ge[ze++]=et,0!=et&&(Ye=et);else{var tt=16==et,nt=et-16,rt=Gr[nt],at=v(Xe,Kr[nt])+rt;if(ze+at>Ke)break a;for(var st=tt?Ye:0;0<at--;)Ge[ze++]=st}}qe=1;break a}qe||(We.a=3),Re=qe}(Re=Re&&!Te.h)&&(Ie=u(Fe,_e,8,Se,je)),Re&&0!=Ie?Qe=Ie:(Ce.a=3,Qe=0)}if(0==Qe)break n;if(be&&1==Xr[V]&&(be=0==pe[K].g),ye+=pe[K].g,K+=Qe,3>=V){var it,ot=fe[0];for(it=1;it<ce;++it)fe[it]>ot&&(ot=fe[it]);we+=ot}}if(me.nd=be,me.Qb=0,be&&(me.qb=(ge[3][xe[3]+0].value<<24|ge[1][xe[1]+0].value<<16|ge[2][xe[2]+0].value)>>>0,0==ye&&256>ge[0][xe[0]+0].value&&(me.Qb=1,me.qb+=ge[0][xe[0]+0].value<<8)),me.jc=!me.Qb&&6>we,me.jc){var lt,ct=me;for(lt=0;lt<Rn;++lt){var ut=lt,dt=ct.pd[ut],At=ct.G[0][ct.H[0]+ut];256<=At.value?(dt.g=At.g+256,dt.value=At.value):(dt.g=0,dt.value=0,ut>>=ve(At,8,dt),ut>>=ve(ct.G[1][ct.H[1]+ut],16,dt),ut>>=ve(ct.G[2][ct.H[2]+ut],0,dt),ve(ct.G[3][ct.H[3]+ut],24,dt))}}}$.vc=ee,$.Wb=te,$.Ya=he,$.yc=ue,z=1;break t}z=0}if(!(c=z)){o.a=3;break e}if(0<x){if(m.ua=1<<x,!T(m.Wa,x)){o.a=1,c=0;break e}}else m.ua=0;var ht=o,ft=A,pt=f,mt=ht.s,gt=mt.xc;if(ht.c=ft,ht.i=pt,mt.md=P(ft,gt),mt.wc=0==gt?-1:(1<<gt)-1,r){o.xb=ha;break e}if(null==(g=s(A*f))){o.a=1,c=0;break e}c=(c=Be(o,g,0,A,f,f,null))&&!p.h;break e}return c?(null!=l?l[0]=g:(t(null==g),t(r)),o.$=0,r||ke(m)):ke(m),c}function Fe(e,n){var r=e.c*e.i,a=r+n+16*n;return t(e.c<=n),e.V=s(a),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+n,1)}function _e(e,n){var r=e.C,a=n-r,s=e.V,i=e.Ba+e.c*r;for(t(n<=e.l.o);0<a;){var o=16<a?16:a,l=e.l.ma,c=e.l.width,u=c*o,d=l.ca,A=l.tb+c*r,h=e.Ta,f=e.Ua;be(e,o,s,i),Cr(h,f,d,A,u),je(l,r,r+o,d,A,c),a-=o,s+=o*e.c,r+=o}t(r==n),e.C=e.Ma=n}function Ie(){this.ub=this.yd=this.td=this.Rb=0}function Te(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function De(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Le(){this.Yb=function(){var e=[];return function e(t,n,r){for(var a=r[n],s=0;s<a&&(t.push(r.length>n+1?[]:0),!(r.length<n+1));s++)e(t[s],n+1,r)}(e,0,[3,11]),e}()}function Ue(){this.jb=s(3),this.Wc=o([4,8],Le),this.Xc=o([4,17],Le)}function Pe(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Re(){this.ld=this.La=this.dd=this.tc=0}function Oe(){this.Na=this.la=0}function Me(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Qe(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function He(){this.uc=this.M=this.Nb=0,this.wa=Array(new Re),this.Y=0,this.ya=Array(new Qe),this.aa=0,this.l=new Ke}function ze(){this.y=s(16),this.f=s(8),this.ea=s(8)}function We(){this.cb=this.a=0,this.sc="",this.m=new y,this.Od=new Ie,this.Kc=new Te,this.ed=new Pe,this.Qa=new De,this.Ic=this.$c=this.Aa=0,this.D=new He,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,y),this.ia=0,this.pb=i(4,Me),this.Pa=new Ue,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ze),this.Hd=0,this.rb=Array(new Oe),this.sb=0,this.wa=Array(new Re),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Qe),this.L=this.aa=0,this.gd=o([4,2],Re),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ve(e,t){return 0>e?0:e>t?t:e}function Ke(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ge(){var e=new We;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,na||(na=Je)),e}function qe(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Xe(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Ye(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return qe(e,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,s=n.w,i=n.ha;if(4>i)return qe(e,7,"Truncated header.");var o=r[s+0]|r[s+1]<<8|r[s+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return qe(e,3,"Incorrect keyframe parameters.");if(!l.yd)return qe(e,4,"Frame not displayable.");s+=3,i-=3;var c=e.Kc;if(l.Rb){if(7>i)return qe(e,7,"cannot parse picture header");if(!Xe(r,s,i))return qe(e,3,"Bad code word");c.c=16383&(r[s+4]<<8|r[s+3]),c.Td=r[s+4]>>6,c.i=16383&(r[s+6]<<8|r[s+5]),c.Ud=r[s+6]>>6,s+=7,i-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,a((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,a(o.Zb,0,0,o.Zb.length),a(o.Lb,0,0,o.Lb)}if(l.ub>i)return qe(e,7,"bad partition length");f(o=e.m,r,s,l.ub),s+=l.ub,i-=l.ub,l.Rb&&(c.Ld=k(o),c.Kd=k(o)),c=e.Qa;var u,d=e.Pa;if(t(null!=o),t(null!=c),c.Cb=k(o),c.Cb){if(c.Bb=k(o),k(o)){for(c.Fb=k(o),u=0;4>u;++u)c.Zb[u]=k(o)?m(o,7):0;for(u=0;4>u;++u)c.Lb[u]=k(o)?m(o,6):0}if(c.Bb)for(u=0;3>u;++u)d.jb[u]=k(o)?p(o,8):255}else c.Bb=0;if(o.Ka)return qe(e,3,"cannot parse segment header");if((c=e.ed).zd=k(o),c.Tb=p(o,6),c.wb=p(o,3),c.Pc=k(o),c.Pc&&k(o)){for(d=0;4>d;++d)k(o)&&(c.vd[d]=m(o,6));for(d=0;4>d;++d)k(o)&&(c.od[d]=m(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return qe(e,3,"cannot parse filter header");var A=i;if(i=u=s,s=u+A,c=A,e.Xb=(1<<p(e.m,2))-1,A<3*(d=e.Xb))r=7;else{for(u+=3*d,c-=3*d,A=0;A<d;++A){var h=r[i+0]|r[i+1]<<8|r[i+2]<<16;h>c&&(h=c),f(e.Jc[+A],r,u,h),u+=h,c-=h,i+=3}f(e.Jc[+d],r,u,c),r=u<s?0:5}if(0!=r)return qe(e,r,"cannot parse partitions");for(r=p(u=e.m,7),i=k(u)?m(u,4):0,s=k(u)?m(u,4):0,c=k(u)?m(u,4):0,d=k(u)?m(u,4):0,u=k(u)?m(u,4):0,A=e.Qa,h=0;4>h;++h){if(A.Cb){var g=A.Zb[h];A.Fb||(g+=r)}else{if(0<h){e.pb[h]=e.pb[0];continue}g=r}var x=e.pb[h];x.Sc[0]=ea[Ve(g+i,127)],x.Sc[1]=ta[Ve(g+0,127)],x.Eb[0]=2*ea[Ve(g+s,127)],x.Eb[1]=101581*ta[Ve(g+c,127)]>>16,8>x.Eb[1]&&(x.Eb[1]=8),x.Qc[0]=ea[Ve(g+d,117)],x.Qc[1]=ta[Ve(g+u,127)],x.lc=g+u}if(!l.Rb)return qe(e,4,"Not a key frame.");for(k(o),l=e.Pa,r=0;4>r;++r){for(i=0;8>i;++i)for(s=0;3>s;++s)for(c=0;11>c;++c)d=S(o,la[r][i][s][c])?p(o,8):ia[r][i][s][c],l.Wc[r][i].Yb[s][c]=d;for(i=0;17>i;++i)l.Xc[r][i]=l.Wc[r][ca[i]]}return e.kc=k(o),e.kc&&(e.Bd=p(o,8)),e.cb=1}function Je(e,t,n,r,a,s,i){var o=t[a].Yb[n];for(n=0;16>a;++a){if(!S(e,o[n+0]))return a;for(;!S(e,o[n+1]);)if(o=t[++a].Yb[0],n=0,16==a)return 16;var l=t[a+1].Yb;if(S(e,o[n+2])){var c=e,u=0;if(S(c,(A=o)[(d=n)+3]))if(S(c,A[d+6])){for(o=0,d=2*(u=S(c,A[d+8]))+(A=S(c,A[d+9+u])),u=0,A=ra[d];A[o];++o)u+=u+S(c,A[o]);u+=3+(8<<d)}else S(c,A[d+7])?(u=7+2*S(c,165),u+=S(c,145)):u=5+S(c,159);else u=S(c,A[d+4])?3+S(c,A[d+5]):2;o=l[2]}else u=1,o=l[1];l=i+aa[a],0>(c=e).b&&B(c);var d,A=c.b,h=(d=c.Ca>>1)-(c.I>>A)>>31;--c.b,c.Ca+=h,c.Ca|=1,c.I-=(d+1&h)<<A,s[l]=((u^h)-h)*r[(0<a)+0]}return 16}function Ze(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,a(e.zc,0,0,e.zc.length),e.ja=0}function $e(e,t,n,r,a){a=e[t+n+32*r]+(a>>3),e[t+n+32*r]=-256&a?0>a?0:255:a}function et(e,t,n,r,a,s){$e(e,t,0,n,r+a),$e(e,t,1,n,r+s),$e(e,t,2,n,r-s),$e(e,t,3,n,r-a)}function tt(e){return(20091*e>>16)+e}function nt(e,t,n,r){var a,i=0,o=s(16);for(a=0;4>a;++a){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],u=(35468*e[t+4]>>16)-tt(e[t+12]),d=tt(e[t+4])+(35468*e[t+12]>>16);o[i+0]=l+d,o[i+1]=c+u,o[i+2]=c-u,o[i+3]=l-d,i+=4,t++}for(a=i=0;4>a;++a)l=(e=o[i+0]+4)+o[i+8],c=e-o[i+8],u=(35468*o[i+4]>>16)-tt(o[i+12]),$e(n,r,0,0,l+(d=tt(o[i+4])+(35468*o[i+12]>>16))),$e(n,r,1,0,c+u),$e(n,r,2,0,c-u),$e(n,r,3,0,l-d),i++,r+=32}function rt(e,t,n,r){var a=e[t+0]+4,s=35468*e[t+4]>>16,i=tt(e[t+4]),o=35468*e[t+1]>>16;et(n,r,0,a+i,e=tt(e[t+1]),o),et(n,r,1,a+s,e,o),et(n,r,2,a-s,e,o),et(n,r,3,a-i,e,o)}function at(e,t,n,r,a){nt(e,t,n,r),a&&nt(e,t+16,n,r+4)}function st(e,t,n,r){sr(e,t+0,n,r,1),sr(e,t+32,n,r+128,1)}function it(e,t,n,r){var a;for(e=e[t+0]+4,a=0;4>a;++a)for(t=0;4>t;++t)$e(n,r,t,a,e)}function ot(e,t,n,r){e[t+0]&&lr(e,t+0,n,r),e[t+16]&&lr(e,t+16,n,r+4),e[t+32]&&lr(e,t+32,n,r+128),e[t+48]&&lr(e,t+48,n,r+128+4)}function lt(e,t,n,r){var a,i=s(16);for(a=0;4>a;++a){var o=e[t+0+a]+e[t+12+a],l=e[t+4+a]+e[t+8+a],c=e[t+4+a]-e[t+8+a],u=e[t+0+a]-e[t+12+a];i[0+a]=o+l,i[8+a]=o-l,i[4+a]=u+c,i[12+a]=u-c}for(a=0;4>a;++a)o=(e=i[0+4*a]+3)+i[3+4*a],l=i[1+4*a]+i[2+4*a],c=i[1+4*a]-i[2+4*a],u=e-i[3+4*a],n[r+0]=o+l>>3,n[r+16]=u+c>>3,n[r+32]=o-l>>3,n[r+48]=u-c>>3,r+=64}function ct(e,t,n){var r,a=t-32,s=Tr,i=255-e[a-1];for(r=0;r<n;++r){var o,l=s,c=i+e[t-1];for(o=0;o<n;++o)e[t+o]=l[c+e[a+o]];t+=32}}function ut(e,t){ct(e,t,4)}function dt(e,t){ct(e,t,8)}function At(e,t){ct(e,t,16)}function ht(e,t){var n;for(n=0;16>n;++n)r(e,t+32*n,e,t-32,16)}function ft(e,t){var n;for(n=16;0<n;--n)a(e,t,e[t-1],16),t+=32}function pt(e,t,n){var r;for(r=0;16>r;++r)a(t,n+32*r,e,16)}function mt(e,t){var n,r=16;for(n=0;16>n;++n)r+=e[t-1+32*n]+e[t+n-32];pt(r>>5,e,t)}function gt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t-1+32*n];pt(r>>4,e,t)}function xt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t+n-32];pt(r>>4,e,t)}function vt(e,t){pt(128,e,t)}function yt(e,t,n){return e+2*t+n+2>>2}function bt(e,t){var n,a=t-32;for(a=new Uint8Array([yt(e[a-1],e[a+0],e[a+1]),yt(e[a+0],e[a+1],e[a+2]),yt(e[a+1],e[a+2],e[a+3]),yt(e[a+2],e[a+3],e[a+4])]),n=0;4>n;++n)r(e,t+32*n,a,0,a.length)}function wt(e,t){var n=e[t-1],r=e[t-1+32],a=e[t-1+64],s=e[t-1+96];E(e,t+0,16843009*yt(e[t-1-32],n,r)),E(e,t+32,16843009*yt(n,r,a)),E(e,t+64,16843009*yt(r,a,s)),E(e,t+96,16843009*yt(a,s,s))}function Nt(e,t){var n,r=4;for(n=0;4>n;++n)r+=e[t+n-32]+e[t-1+32*n];for(r>>=3,n=0;4>n;++n)a(e,t+32*n,r,4)}function jt(e,t){var n=e[t-1+0],r=e[t-1+32],a=e[t-1+64],s=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=yt(r,a,e[t-1+96]),e[t+1+96]=e[t+0+64]=yt(n,r,a),e[t+2+96]=e[t+1+64]=e[t+0+32]=yt(s,n,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=yt(i,s,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=yt(o,i,s),e[t+3+32]=e[t+2+0]=yt(l,o,i),e[t+3+0]=yt(c,l,o)}function Ct(e,t){var n=e[t+1-32],r=e[t+2-32],a=e[t+3-32],s=e[t+4-32],i=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=yt(e[t+0-32],n,r),e[t+1+0]=e[t+0+32]=yt(n,r,a),e[t+2+0]=e[t+1+32]=e[t+0+64]=yt(r,a,s),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=yt(a,s,i),e[t+3+32]=e[t+2+64]=e[t+1+96]=yt(s,i,o),e[t+3+64]=e[t+2+96]=yt(i,o,l),e[t+3+96]=yt(o,l,l)}function Bt(e,t){var n=e[t-1+0],r=e[t-1+32],a=e[t-1+64],s=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=s+i+1>>1,e[t+1+0]=e[t+2+64]=i+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=yt(a,r,n),e[t+0+64]=yt(r,n,s),e[t+0+32]=e[t+1+96]=yt(n,s,i),e[t+1+32]=e[t+2+96]=yt(s,i,o),e[t+2+32]=e[t+3+96]=yt(i,o,l),e[t+3+32]=yt(o,l,c)}function kt(e,t){var n=e[t+0-32],r=e[t+1-32],a=e[t+2-32],s=e[t+3-32],i=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=n+r+1>>1,e[t+1+0]=e[t+0+64]=r+a+1>>1,e[t+2+0]=e[t+1+64]=a+s+1>>1,e[t+3+0]=e[t+2+64]=s+i+1>>1,e[t+0+32]=yt(n,r,a),e[t+1+32]=e[t+0+96]=yt(r,a,s),e[t+2+32]=e[t+1+96]=yt(a,s,i),e[t+3+32]=e[t+2+96]=yt(s,i,o),e[t+3+64]=yt(i,o,l),e[t+3+96]=yt(o,l,c)}function St(e,t){var n=e[t-1+0],r=e[t-1+32],a=e[t-1+64],s=e[t-1+96];e[t+0+0]=n+r+1>>1,e[t+2+0]=e[t+0+32]=r+a+1>>1,e[t+2+32]=e[t+0+64]=a+s+1>>1,e[t+1+0]=yt(n,r,a),e[t+3+0]=e[t+1+32]=yt(r,a,s),e[t+3+32]=e[t+1+64]=yt(a,s,s),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=s}function Et(e,t){var n=e[t-1+0],r=e[t-1+32],a=e[t-1+64],s=e[t-1+96],i=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=n+i+1>>1,e[t+0+32]=e[t+2+64]=r+n+1>>1,e[t+0+64]=e[t+2+96]=a+r+1>>1,e[t+0+96]=s+a+1>>1,e[t+3+0]=yt(o,l,c),e[t+2+0]=yt(i,o,l),e[t+1+0]=e[t+3+32]=yt(n,i,o),e[t+1+32]=e[t+3+64]=yt(r,n,i),e[t+1+64]=e[t+3+96]=yt(a,r,n),e[t+1+96]=yt(s,a,r)}function Ft(e,t){var n;for(n=0;8>n;++n)r(e,t+32*n,e,t-32,8)}function _t(e,t){var n;for(n=0;8>n;++n)a(e,t,e[t-1],8),t+=32}function It(e,t,n){var r;for(r=0;8>r;++r)a(t,n+32*r,e,8)}function Tt(e,t){var n,r=8;for(n=0;8>n;++n)r+=e[t+n-32]+e[t-1+32*n];It(r>>4,e,t)}function Dt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t+n-32];It(r>>3,e,t)}function Lt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t-1+32*n];It(r>>3,e,t)}function Ut(e,t){It(128,e,t)}function Pt(e,t,n){var r=e[t-n],a=e[t+0],s=3*(a-r)+_r[1020+e[t-2*n]-e[t+n]],i=Ir[112+(s+4>>3)];e[t-n]=Tr[255+r+Ir[112+(s+3>>3)]],e[t+0]=Tr[255+a-i]}function Rt(e,t,n,r){var a=e[t+0],s=e[t+n];return Dr[255+e[t-2*n]-e[t-n]]>r||Dr[255+s-a]>r}function Ot(e,t,n,r){return 4*Dr[255+e[t-n]-e[t+0]]+Dr[255+e[t-2*n]-e[t+n]]<=r}function Mt(e,t,n,r,a){var s=e[t-3*n],i=e[t-2*n],o=e[t-n],l=e[t+0],c=e[t+n],u=e[t+2*n],d=e[t+3*n];return 4*Dr[255+o-l]+Dr[255+i-c]>r?0:Dr[255+e[t-4*n]-s]<=a&&Dr[255+s-i]<=a&&Dr[255+i-o]<=a&&Dr[255+d-u]<=a&&Dr[255+u-c]<=a&&Dr[255+c-l]<=a}function Qt(e,t,n,r){var a=2*r+1;for(r=0;16>r;++r)Ot(e,t+r,n,a)&&Pt(e,t+r,n)}function Ht(e,t,n,r){var a=2*r+1;for(r=0;16>r;++r)Ot(e,t+r*n,1,a)&&Pt(e,t+r*n,1)}function zt(e,t,n,r){var a;for(a=3;0<a;--a)Qt(e,t+=4*n,n,r)}function Wt(e,t,n,r){var a;for(a=3;0<a;--a)Ht(e,t+=4,n,r)}function Vt(e,t,n,r,a,s,i,o){for(s=2*s+1;0<a--;){if(Mt(e,t,n,s,i))if(Rt(e,t,n,o))Pt(e,t,n);else{var l=e,c=t,u=n,d=l[c-2*u],A=l[c-u],h=l[c+0],f=l[c+u],p=l[c+2*u],m=27*(x=_r[1020+3*(h-A)+_r[1020+d-f]])+63>>7,g=18*x+63>>7,x=9*x+63>>7;l[c-3*u]=Tr[255+l[c-3*u]+x],l[c-2*u]=Tr[255+d+g],l[c-u]=Tr[255+A+m],l[c+0]=Tr[255+h-m],l[c+u]=Tr[255+f-g],l[c+2*u]=Tr[255+p-x]}t+=r}}function Kt(e,t,n,r,a,s,i,o){for(s=2*s+1;0<a--;){if(Mt(e,t,n,s,i))if(Rt(e,t,n,o))Pt(e,t,n);else{var l=e,c=t,u=n,d=l[c-u],A=l[c+0],h=l[c+u],f=Ir[112+(4+(p=3*(A-d))>>3)],p=Ir[112+(p+3>>3)],m=f+1>>1;l[c-2*u]=Tr[255+l[c-2*u]+m],l[c-u]=Tr[255+d+p],l[c+0]=Tr[255+A-f],l[c+u]=Tr[255+h-m]}t+=r}}function Gt(e,t,n,r,a,s){Vt(e,t,n,1,16,r,a,s)}function qt(e,t,n,r,a,s){Vt(e,t,1,n,16,r,a,s)}function Xt(e,t,n,r,a,s){var i;for(i=3;0<i;--i)Kt(e,t+=4*n,n,1,16,r,a,s)}function Yt(e,t,n,r,a,s){var i;for(i=3;0<i;--i)Kt(e,t+=4,1,n,16,r,a,s)}function Jt(e,t,n,r,a,s,i,o){Vt(e,t,a,1,8,s,i,o),Vt(n,r,a,1,8,s,i,o)}function Zt(e,t,n,r,a,s,i,o){Vt(e,t,1,a,8,s,i,o),Vt(n,r,1,a,8,s,i,o)}function $t(e,t,n,r,a,s,i,o){Kt(e,t+4*a,a,1,8,s,i,o),Kt(n,r+4*a,a,1,8,s,i,o)}function en(e,t,n,r,a,s,i,o){Kt(e,t+4,1,a,8,s,i,o),Kt(n,r+4,1,a,8,s,i,o)}function tn(){this.ba=new ie,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function an(){this.ua=0,this.Wa=new L,this.vb=new L,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new h,this.yc=new d}function sn(){this.xb=this.a=0,this.l=new Ke,this.ca=new ie,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new b,this.Pb=0,this.wd=new b,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new an,this.ab=0,this.gc=i(4,rn),this.Oc=0}function on(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ke,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ln(e,t,n,r,a,s,i){for(e=null==e?0:e[t+0],t=0;t<i;++t)a[s+t]=e+n[r+t]&255,e=a[s+t]}function cn(e,t,n,r,a,s,i){var o;if(null==e)ln(null,null,n,r,a,s,i);else for(o=0;o<i;++o)a[s+o]=e[t+o]+n[r+o]&255}function un(e,t,n,r,a,s,i){if(null==e)ln(null,null,n,r,a,s,i);else{var o,l=e[t+0],c=l,u=l;for(o=0;o<i;++o)c=u+(l=e[t+o])-c,u=n[r+o]+(-256&c?0>c?0:255:c)&255,c=l,a[s+o]=u}}function dn(e,n,a,i){var o=n.width,l=n.o;if(t(null!=e&&null!=n),0>a||0>=i||a+i>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new on,(c=null==e.ga)||(c=n.width*n.o,t(0==e.Gb.length),e.Gb=s(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var u=e.Fa,d=e.P,A=e.qc,h=e.mb,f=e.nb,p=d+1,m=A-1,x=c.l;if(t(null!=u&&null!=h&&null!=n),pa[0]=null,pa[1]=ln,pa[2]=cn,pa[3]=un,c.ca=h,c.tb=f,c.c=n.width,c.i=n.height,t(0<c.c&&0<c.i),1>=A)n=0;else if(c.$a=3&u[d+0],c.Z=u[d+0]>>2&3,c.Lc=u[d+0]>>4&3,d=u[d+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||d)n=0;else if(x.put=he,x.ac=Ae,x.bc=fe,x.ma=c,x.width=n.width,x.height=n.height,x.Da=n.Da,x.v=n.v,x.va=n.va,x.j=n.j,x.o=n.o,c.$a)e:{t(1==c.$a),n=Se();t:for(;;){if(null==n){n=0;break e}if(t(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,g(n.m,u,p,m),!Ee(c.c,c.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Ne(n.s)?(c.ic=1,u=n.c*n.i,n.Ta=null,n.Ua=0,n.V=s(u),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Fe(n,c.c)),!n)break t;n=1;break e}c.mc=null,n=0}else n=m>=c.c*c.i;c=!n}if(c)return null;1!=e.ga.Lc?e.Ga=0:i=l-a}t(null!=e.ga),t(a+i<=l);e:{if(n=(u=e.ga).c,l=u.l.o,0==u.$a){if(p=e.rc,m=e.Vc,x=e.Fa,d=e.P+1+a*n,A=e.mb,h=e.nb+a*n,t(d<=e.P+e.qc),0!=u.Z)for(t(null!=pa[u.Z]),c=0;c<i;++c)pa[u.Z](p,m,x,d,A,h,n),p=A,m=h,h+=n,d+=n;else for(c=0;c<i;++c)r(A,h,x,d,n),p=A,m=h,h+=n,d+=n;e.rc=p,e.Vc=m}else{if(t(null!=u.mc),n=a+i,t(null!=(c=u.mc)),t(n<=c.i),c.C>=n)n=1;else if(u.ic||mn(),u.ic){u=c.V,p=c.Ba,m=c.c;var v=c.i,y=(x=1,d=c.$/m,A=c.$%m,h=c.m,f=c.s,c.$),b=m*v,w=m*n,j=f.wc,B=y<w?ye(f,A,d):null;t(y<=b),t(n<=v),t(Ne(f));t:for(;;){for(;!h.h&&y<w;){if(A&j||(B=ye(f,A,d)),t(null!=B),C(h),256>(v=xe(B.G[0],B.H[0],h)))u[p+y]=v,++y,++A>=m&&(A=0,++d<=n&&!(d%16)&&Ce(c,d));else{if(!(280>v)){x=0;break t}v=me(v-256,h);var k,S=xe(B.G[4],B.H[4],h);if(C(h),!(y>=(S=ge(m,S=me(S,h)))&&b-y>=v)){x=0;break t}for(k=0;k<v;++k)u[p+y+k]=u[p+y+k-S];for(y+=v,A+=v;A>=m;)A-=m,++d<=n&&!(d%16)&&Ce(c,d);y<w&&A&j&&(B=ye(f,A,d))}t(h.h==N(h))}Ce(c,d>n?n:d);break t}!x||h.h&&y<b?(x=0,c.a=h.h?5:3):c.$=y,n=x}else n=Be(c,c.V,c.Ba,c.c,c.i,n,_e);if(!n){i=0;break e}}a+i>=l&&(e.Cc=1),i=1}if(!i)return null;if(e.Cc&&(null!=(i=e.ga)&&(i.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+a*o}function An(e,t,n,r,a,s){for(;0<a--;){var i,o=e,l=t+(n?1:0),c=e,u=t+(n?0:3);for(i=0;i<r;++i){var d=c[u+4*i];255!=d&&(d*=32897,o[l+4*i+0]=o[l+4*i+0]*d>>23,o[l+4*i+1]=o[l+4*i+1]*d>>23,o[l+4*i+2]=o[l+4*i+2]*d>>23)}t+=s}}function hn(e,t,n,r,a){for(;0<r--;){var s;for(s=0;s<n;++s){var i=e[t+2*s+0],o=15&(c=e[t+2*s+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*s+0]=(240&i|i>>4)*l>>16&240|(15&i|i<<4)*l>>16>>4&15,e[t+2*s+1]=240&c|o}t+=a}}function fn(e,t,n,r,a,s,i,o){var l,c,u=255;for(c=0;c<a;++c){for(l=0;l<r;++l){var d=e[t+l];s[i+4*l]=d,u&=d}t+=n,i+=o}return 255!=u}function pn(e,t,n,r,a){var s;for(s=0;s<a;++s)n[r+s]=e[t+s]>>8}function mn(){wr=An,Nr=hn,jr=fn,Cr=pn}function gn(n,r,a){e[n]=function(e,n,s,i,o,l,c,u,d,A,h,f,p,m,g,x,v){var y,b=v-1>>1,w=o[l+0]|c[u+0]<<16,N=d[A+0]|h[f+0]<<16;t(null!=e);var j=3*w+N+131074>>2;for(r(e[n+0],255&j,j>>16,p,m),null!=s&&(j=3*N+w+131074>>2,r(s[i+0],255&j,j>>16,g,x)),y=1;y<=b;++y){var C=o[l+y]|c[u+y]<<16,B=d[A+y]|h[f+y]<<16,k=w+C+N+B+524296,S=k+2*(C+N)>>3;j=S+w>>1,w=(k=k+2*(w+B)>>3)+C>>1,r(e[n+2*y-1],255&j,j>>16,p,m+(2*y-1)*a),r(e[n+2*y-0],255&w,w>>16,p,m+(2*y-0)*a),null!=s&&(j=k+N>>1,w=S+B>>1,r(s[i+2*y-1],255&j,j>>16,g,x+(2*y-1)*a),r(s[i+2*y+0],255&w,w>>16,g,x+(2*y+0)*a)),w=C,N=B}1&v||(j=3*w+N+131074>>2,r(e[n+v-1],255&j,j>>16,p,m+(v-1)*a),null!=s&&(j=3*N+w+131074>>2,r(s[i+v-1],255&j,j>>16,g,x+(v-1)*a)))}}function xn(){ma[Lr]=ga,ma[Ur]=va,ma[Pr]=xa,ma[Rr]=ya,ma[Or]=ba,ma[Mr]=wa,ma[Qr]=Na,ma[Hr]=va,ma[zr]=ya,ma[Wr]=ba,ma[Vr]=wa}function vn(e){return e&~Ea?0>e?0:255:e>>Sa}function yn(e,t){return vn((19077*e>>8)+(26149*t>>8)-14234)}function bn(e,t,n){return vn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function wn(e,t){return vn((19077*e>>8)+(33050*t>>8)-17685)}function Nn(e,t,n,r,a){r[a+0]=yn(e,n),r[a+1]=bn(e,t,n),r[a+2]=wn(e,t)}function jn(e,t,n,r,a){r[a+0]=wn(e,t),r[a+1]=bn(e,t,n),r[a+2]=yn(e,n)}function Cn(e,t,n,r,a){var s=bn(e,t,n);t=s<<3&224|wn(e,t)>>3,r[a+0]=248&yn(e,n)|s>>5,r[a+1]=t}function Bn(e,t,n,r,a){var s=240&wn(e,t)|15;r[a+0]=240&yn(e,n)|bn(e,t,n)>>4,r[a+1]=s}function kn(e,t,n,r,a){r[a+0]=255,Nn(e,t,n,r,a+1)}function Sn(e,t,n,r,a){jn(e,t,n,r,a),r[a+3]=255}function En(e,t,n,r,a){Nn(e,t,n,r,a),r[a+3]=255}function Ve(e,t){return 0>e?0:e>t?t:e}function Fn(t,n,r){e[t]=function(e,t,a,s,i,o,l,c,u){for(var d=c+(-2&u)*r;c!=d;)n(e[t+0],a[s+0],i[o+0],l,c),n(e[t+1],a[s+0],i[o+0],l,c+r),t+=2,++s,++o,c+=2*r;1&u&&n(e[t+0],a[s+0],i[o+0],l,c)}}function _n(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function In(e,t,n,r,a){switch(e>>>30){case 3:sr(t,n,r,a,0);break;case 2:ir(t,n,r,a);break;case 1:lr(t,n,r,a)}}function Tn(e,t){var n,s,i=t.M,o=t.Nb,l=e.oc,c=e.pc+40,u=e.oc,d=e.pc+584,A=e.oc,h=e.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)u[d+32*n-1]=129,A[h+32*n-1]=129;for(0<i?l[c-1-32]=u[d-1-32]=A[h-1-32]=129:(a(l,c-32-1,127,21),a(u,d-32-1,127,9),a(A,h-32-1,127,9)),s=0;s<e.za;++s){var f=t.ya[t.aa+s];if(0<s){for(n=-1;16>n;++n)r(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)r(u,d+32*n-4,u,d+32*n+4,4),r(A,h+32*n-4,A,h+32*n+4,4)}var p=e.Gd,m=e.Hd+s,g=f.ad,x=f.Hc;if(0<i&&(r(l,c-32,p[m].y,0,16),r(u,d-32,p[m].f,0,8),r(A,h-32,p[m].ea,0,8)),f.Za){var v=l,y=c-32+16;for(0<i&&(s>=e.za-1?a(v,y,p[m].y[15],4):r(v,y,p[m+1].y,0,4)),n=0;4>n;n++)v[y+128+n]=v[y+256+n]=v[y+384+n]=v[y+0+n];for(n=0;16>n;++n,x<<=2)v=l,y=c+Pa[n],da[f.Ob[n]](v,y),In(x,g,16*+n,v,y)}else if(v=_n(s,i,f.Ob[0]),ua[v](l,c),0!=x)for(n=0;16>n;++n,x<<=2)In(x,g,16*+n,l,c+Pa[n]);for(n=f.Gc,v=_n(s,i,f.Dd),Aa[v](u,d),Aa[v](A,h),x=g,v=u,y=d,255&(f=0|n)&&(170&f?or(x,256,v,y):cr(x,256,v,y)),f=A,x=h,255&(n>>=8)&&(170&n?or(g,320,f,x):cr(g,320,f,x)),i<e.Ub-1&&(r(p[m].y,0,l,c+480,16),r(p[m].f,0,u,d+224,8),r(p[m].ea,0,A,h+224,8)),n=8*o*e.B,p=e.sa,m=e.ta+16*s+16*o*e.R,g=e.qa,f=e.ra+8*s+n,x=e.Ha,v=e.Ia+8*s+n,n=0;16>n;++n)r(p,m+n*e.R,l,c+32*n,16);for(n=0;8>n;++n)r(g,f+n*e.B,u,d+32*n,8),r(x,v+n*e.B,A,h+32*n,8)}}function Dn(e,r,a,s,i,o,l,c,u){var d=[0],A=[0],h=0,f=null!=u?u.kd:0,p=null!=u?u:new nn;if(null==e||12>a)return 7;p.data=e,p.w=r,p.ha=a,r=[r],a=[a],p.gb=[p.gb];e:{var m=r,x=a,v=p.gb;if(t(null!=e),t(null!=x),t(null!=v),v[0]=0,12<=x[0]&&!n(e,m[0],"RIFF")){if(n(e,m[0]+8,"WEBP")){v=3;break e}var y=I(e,m[0]+4);if(12>y||4294967286<y){v=3;break e}if(f&&y>x[0]-8){v=7;break e}v[0]=y,m[0]+=12,x[0]-=12}v=0}if(0!=v)return v;for(y=0<p.gb[0],a=a[0];;){e:{var w=e;x=r,v=a;var N=d,j=A,C=m=[0];if((S=h=[h])[0]=0,8>v[0])v=7;else{if(!n(w,x[0],"VP8X")){if(10!=I(w,x[0]+4)){v=3;break e}if(18>v[0]){v=7;break e}var B=I(w,x[0]+8),k=1+_(w,x[0]+12);if(2147483648<=k*(w=1+_(w,x[0]+15))){v=3;break e}null!=C&&(C[0]=B),null!=N&&(N[0]=k),null!=j&&(j[0]=w),x[0]+=18,v[0]-=18,S[0]=1}v=0}}if(h=h[0],m=m[0],0!=v)return v;if(x=!!(2&m),!y&&h)return 3;if(null!=o&&(o[0]=!!(16&m)),null!=l&&(l[0]=x),null!=c&&(c[0]=0),l=d[0],m=A[0],h&&x&&null==u){v=0;break}if(4>a){v=7;break}if(y&&h||!y&&!h&&!n(e,r[0],"ALPH")){a=[a],p.na=[p.na],p.P=[p.P],p.Sa=[p.Sa];e:{B=e,v=r,y=a;var S=p.gb;N=p.na,j=p.P,C=p.Sa,k=22,t(null!=B),t(null!=y),w=v[0];var E=y[0];for(t(null!=N),t(null!=C),N[0]=null,j[0]=null,C[0]=0;;){if(v[0]=w,y[0]=E,8>E){v=7;break e}var F=I(B,w+4);if(4294967286<F){v=3;break e}var T=8+F+1&-2;if(k+=T,0<S&&k>S){v=3;break e}if(!n(B,w,"VP8 ")||!n(B,w,"VP8L")){v=0;break e}if(E[0]<T){v=7;break e}n(B,w,"ALPH")||(N[0]=B,j[0]=w+8,C[0]=F),w+=T,E-=T}}if(a=a[0],p.na=p.na[0],p.P=p.P[0],p.Sa=p.Sa[0],0!=v)break}a=[a],p.Ja=[p.Ja],p.xa=[p.xa];e:if(S=e,v=r,y=a,N=p.gb[0],j=p.Ja,C=p.xa,B=v[0],w=!n(S,B,"VP8 "),k=!n(S,B,"VP8L"),t(null!=S),t(null!=y),t(null!=j),t(null!=C),8>y[0])v=7;else{if(w||k){if(S=I(S,B+4),12<=N&&S>N-12){v=3;break e}if(f&&S>y[0]-8){v=7;break e}j[0]=S,v[0]+=8,y[0]-=8,C[0]=k}else C[0]=5<=y[0]&&47==S[B+0]&&!(S[B+4]>>5),j[0]=y[0];v=0}if(a=a[0],p.Ja=p.Ja[0],p.xa=p.xa[0],r=r[0],0!=v)break;if(4294967286<p.Ja)return 3;if(null==c||x||(c[0]=p.xa?2:1),l=[l],m=[m],p.xa){if(5>a){v=7;break}c=l,f=m,x=o,null==e||5>a?e=0:5<=a&&47==e[r+0]&&!(e[r+4]>>5)?(y=[0],S=[0],N=[0],g(j=new b,e,r,a),pe(j,y,S,N)?(null!=c&&(c[0]=y[0]),null!=f&&(f[0]=S[0]),null!=x&&(x[0]=N[0]),e=1):e=0):e=0}else{if(10>a){v=7;break}c=m,null==e||10>a||!Xe(e,r+3,a-3)?e=0:(f=e[r+0]|e[r+1]<<8|e[r+2]<<16,x=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&f||3<(f>>1&7)||!(f>>4&1)||f>>5>=p.Ja||!x||!e?e=0:(l&&(l[0]=x),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],m=m[0],h&&(d[0]!=l||A[0]!=m))return 3;null!=u&&(u[0]=p,u.offset=r-u.w,t(4294967286>r-u.w),t(u.offset==u.ha-a));break}return 0==v||7==v&&h&&null==u?(null!=o&&(o[0]|=null!=p.na&&0<p.na.length),null!=s&&(s[0]=l),null!=i&&(i[0]=m),0):v}function Ln(e,t,n){var r=t.width,a=t.height,s=0,i=0,o=r,l=a;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,s=e.v,i=e.j,11>n||(s&=-2,i&=-2),0>s||0>i||0>=o||0>=l||s+o>r||i+l>a))return 0;if(t.v=s,t.j=i,t.va=s+o,t.o=i+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!U(o,l,n=[e.ib],s=[e.hb]))return 0;t.ib=n[0],t.hb=s[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*a/4,t.Kb=0),1}function Un(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Pn(e,t,n,r){if(null==r||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var a=n.cd,i=n.bd,o=-2&n.v,l=-2&n.j;if(0>o||0>l||0>=a||0>=i||o+a>e||l+i>t)return 2;e=a,t=i}if(n.da){if(!U(e,t,a=[n.ib],i=[n.hb]))return 2;e=a[0],t=i[0]}}r.width=e,r.height=t;e:{var c=r.width,u=r.height;if(e=r.S,0>=c||0>=u||!(e>=Lr&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){o=i=a=t=0;var d=(l=c*Ma[e])*u;if(11>e||(i=(u+1)/2*(t=(c+1)/2),12==e&&(o=(a=c)*u)),null==(u=s(d+2*i+o))){e=1;break e}r.sd=u,11>e?((c=r.f.RGBA).eb=u,c.fb=0,c.A=l,c.size=d):((c=r.f.kb).y=u,c.O=0,c.fa=l,c.Fd=d,c.f=u,c.N=0+d,c.Ab=t,c.Cd=i,c.ea=u,c.W=0+d+i,c.Db=t,c.Ed=i,12==e&&(c.F=u,c.J=0+d+2*i),c.Tc=o,c.lb=a)}if(t=1,a=r.S,i=r.width,o=r.height,a>=Lr&&13>a)if(11>a)e=r.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+i<=e.size,t&=l>=i*Ma[a],t&=null!=e.eb;else{e=r.f.kb,l=(i+1)/2,d=(o+1)/2,c=Math.abs(e.fa),u=Math.abs(e.Ab);var A=Math.abs(e.Db),h=Math.abs(e.lb),f=h*(o-1)+i;t&=c*(o-1)+i<=e.Fd,t&=u*(d-1)+l<=e.Cd,t=(t&=A*(d-1)+l<=e.Ed)&c>=i&u>=l&A>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==a&&(t&=h>=i,t&=f<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Un(r)),e}var Rn=64,On=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Mn=24,Qn=32,Hn=8,zn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];O("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return Q(Q(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return Q(e,t[n-1])},e.Predictor7=function(e,t,n){return Q(e,t[n+0])},e.Predictor8=function(e,t,n){return Q(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return Q(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return Q(Q(e,t[n-1]),Q(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var r=t[n+0];return 0>=W(r>>24&255,e>>24&255,(t=t[n-1])>>24&255)+W(r>>16&255,e>>16&255,t>>16&255)+W(r>>8&255,e>>8&255,t>>8&255)+W(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,n){var r=t[n+0];return(H((e>>24&255)+(r>>24&255)-((t=t[n-1])>>24&255))<<24|H((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|H((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|H((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var r=t[n-1];return(z((e=Q(e,t[n+0]))>>24&255,r>>24&255)<<24|z(e>>16&255,r>>16&255)<<16|z(e>>8&255,r>>8&255)<<8|z(255&e,255&r))>>>0};var Wn=e.PredictorAdd0;e.PredictorAdd1=V,O("Predictor2","PredictorAdd2"),O("Predictor3","PredictorAdd3"),O("Predictor4","PredictorAdd4"),O("Predictor5","PredictorAdd5"),O("Predictor6","PredictorAdd6"),O("Predictor7","PredictorAdd7"),O("Predictor8","PredictorAdd8"),O("Predictor9","PredictorAdd9"),O("Predictor10","PredictorAdd10"),O("Predictor11","PredictorAdd11"),O("Predictor12","PredictorAdd12"),O("Predictor13","PredictorAdd13");var Vn=e.PredictorAdd2;X("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),X("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Kn,Gn=e.ColorIndexInverseTransform,qn=e.MapARGB,Xn=e.VP8LColorIndexInverseTransformAlpha,Yn=e.MapAlpha,Jn=e.VP8LPredictorsAdd=[];Jn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Zn,$n,er,tr,nr,rr,ar,sr,ir,or,lr,cr,ur,dr,Ar,hr,fr,pr,mr,gr,xr,vr,yr,br,wr,Nr,jr,Cr,Br=s(511),kr=s(2041),Sr=s(225),Er=s(767),Fr=0,_r=kr,Ir=Sr,Tr=Er,Dr=Br,Lr=0,Ur=1,Pr=2,Rr=3,Or=4,Mr=5,Qr=6,Hr=7,zr=8,Wr=9,Vr=10,Kr=[2,3,7],Gr=[3,3,11],qr=[280,256,256,256,40],Xr=[0,1,1,1,0],Yr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$r=8,ea=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ta=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],na=null,ra=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],aa=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],sa=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ia=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],oa=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],la=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ca=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ua=[],da=[],Aa=[],ha=1,fa=2,pa=[],ma=[];gn("UpsampleRgbLinePair",Nn,3),gn("UpsampleBgrLinePair",jn,3),gn("UpsampleRgbaLinePair",En,4),gn("UpsampleBgraLinePair",Sn,4),gn("UpsampleArgbLinePair",kn,4),gn("UpsampleRgba4444LinePair",Bn,2),gn("UpsampleRgb565LinePair",Cn,2);var ga=e.UpsampleRgbLinePair,xa=e.UpsampleBgrLinePair,va=e.UpsampleRgbaLinePair,ya=e.UpsampleBgraLinePair,ba=e.UpsampleArgbLinePair,wa=e.UpsampleRgba4444LinePair,Na=e.UpsampleRgb565LinePair,ja=16,Ca=1<<ja-1,Ba=-227,ka=482,Sa=6,Ea=(256<<Sa)-1,Fa=0,_a=s(256),Ia=s(256),Ta=s(256),Da=s(256),La=s(ka-Ba),Ua=s(ka-Ba);Fn("YuvToRgbRow",Nn,3),Fn("YuvToBgrRow",jn,3),Fn("YuvToRgbaRow",En,4),Fn("YuvToBgraRow",Sn,4),Fn("YuvToArgbRow",kn,4),Fn("YuvToRgba4444Row",Bn,2),Fn("YuvToRgb565Row",Cn,2);var Pa=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ra=[0,2,8],Oa=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(e,n,o,l,c){var u=Ur,d=new tn,A=new ie;d.ba=A,A.S=u,A.width=[A.width],A.height=[A.height];var h=A.width,f=A.height,p=new oe;if(null==p||null==e)var m=2;else t(null!=p),m=Dn(e,n,o,p.width,p.height,p.Pd,p.Qd,p.format,null);if(0!=m?h=0:(null!=h&&(h[0]=p.width[0]),null!=f&&(f[0]=p.height[0]),h=1),h){A.width=A.width[0],A.height=A.height[0],null!=l&&(l[0]=A.width),null!=c&&(c[0]=A.height);e:{if(l=new Ke,(c=new nn).data=e,c.w=n,c.ha=o,c.kd=1,n=[0],t(null!=c),(0==(e=Dn(c.data,c.w,c.ha,null,null,null,n,null,c))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=d),l.data=c.data,l.w=c.w+c.offset,l.ha=c.ha-c.offset,l.put=he,l.ac=Ae,l.bc=fe,l.ma=d,c.xa){if(null==(e=Se())){d=1;break e}if(function(e,n){var r=[0],a=[0],s=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,g(e.m,n.data,n.w,n.ha),!pe(e.m,r,a,s)){e.a=3;break t}if(e.xb=fa,n.width=r[0],n.height=a[0],!Ee(r[0],a[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,l)){if(l=0==(n=Pn(l.width,l.height,d.Oa,d.ba))){t:{l=e;n:for(;;){if(null==l){l=0;break t}if(t(null!=l.s.yc),t(null!=l.s.Ya),t(0<l.s.Wb),t(null!=(o=l.l)),t(null!=(c=o.ma)),0!=l.xb){if(l.ca=c.ba,l.tb=c.tb,t(null!=l.ca),!Ln(c.Oa,o,Rr)){l.a=2;break n}if(!Fe(l,o.width))break n;if(o.da)break n;if((o.da||re(l.ca.S))&&mn(),11>l.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=l.ca.f.kb.F&&mn()),l.Pb&&0<l.s.ua&&null==l.s.vb.X&&!T(l.s.vb,l.s.Wa.Xa)){l.a=1;break n}l.xb=0}if(!Be(l,l.V,l.Ba,l.c,l.i,o.o,we))break n;c.Dc=l.Ma,l=1;break t}t(0!=l.a),l=0}l=!l}l&&(n=e.a)}else n=e.a}else{if(null==(e=new Ge)){d=1;break e}if(e.Fa=c.na,e.P=c.P,e.qc=c.Sa,Ye(e,l)){if(0==(n=Pn(l.width,l.height,d.Oa,d.ba))){if(e.Aa=0,o=d.Oa,t(null!=(c=e)),null!=o){if(0<(h=0>(h=o.Md)?0:100<h?255:255*h/100)){for(f=p=0;4>f;++f)12>(m=c.pb[f]).lc&&(m.ia=h*Oa[0>m.lc?0:m.lc]>>3),p|=m.ia;p&&(alert("todo:VP8InitRandom"),c.ia=1)}c.Ga=o.Id,100<c.Ga?c.Ga=100:0>c.Ga&&(c.Ga=0)}(function(e,n){if(null==e)return 0;if(null==n)return qe(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Ye(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var o=Ra[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-o>>4,e.zb=n.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+o>>4,e.Hb=n.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var u=e.Qa.Lb[o];e.Qa.Fb||(u+=l.Tb)}else u=l.Tb;for(c=0;1>=c;++c){var d=e.gd[o][c],A=u;if(l.Pc&&(A+=l.vd[0],c&&(A+=l.od[0])),0<(A=0>A?0:63<A?63:A)){var h=A;0<l.wb&&(h=4<l.wb?h>>2:h>>1)>9-l.wb&&(h=9-l.wb),1>h&&(h=1),d.dd=h,d.tc=2*A+h,d.ld=40<=A?2:15<=A?1:0}else d.tc=0;d.La=c}}}o=0}else qe(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=1);t:{o=e.Ic,l=4*(h=e.za);var f=32*h,p=h+1,m=0<e.L?h*(0<e.Aa?2:1):0,g=(2==e.Aa?2:1)*h;if((d=l+832+(c=3*(16*o+Ra[e.L])/2*f)+(u=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=d)o=0;else{if(d>e.Vb){if(e.Vb=0,e.Ec=s(d),e.Fc=0,null==e.Ec){o=qe(e,1,"no memory during frame initialization.");break t}e.Vb=d}d=e.Ec,A=e.Fc,e.Ac=d,e.Bc=A,A+=l,e.Gd=i(f,ze),e.Hd=0,e.rb=i(p+1,Oe),e.sb=1,e.wa=m?i(m,Re):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=h),t(!0),e.oc=d,e.pc=A,A+=832,e.ya=i(g,Qe),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=h),e.R=16*h,e.B=8*h,h=(f=Ra[e.L])*e.R,f=f/2*e.B,e.sa=d,e.ta=A+h,e.qa=e.sa,e.ra=e.ta+16*o*e.R+f,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+f,e.$c=0,A+=c,e.mb=u?d:null,e.nb=u?A:null,t(A+u<=e.Fc+e.Vb),Ze(e),a(e.Ac,e.Bc,0,l),o=1}}if(o){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Fr){for(o=-255;255>=o;++o)Br[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)kr[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)Sr[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)Er[255+o]=0>o?0:255<o?255:o;Fr=1}ar=lt,sr=at,or=st,lr=it,cr=ot,ir=rt,ur=Gt,dr=qt,Ar=Jt,hr=Zt,fr=Xt,pr=Yt,mr=$t,gr=en,xr=Qt,vr=Ht,yr=zt,br=Wt,da[0]=Nt,da[1]=ut,da[2]=bt,da[3]=wt,da[4]=jt,da[5]=Bt,da[6]=Ct,da[7]=kt,da[8]=Et,da[9]=St,ua[0]=mt,ua[1]=At,ua[2]=ht,ua[3]=ft,ua[4]=gt,ua[5]=xt,ua[6]=vt,Aa[0]=Tt,Aa[1]=dt,Aa[2]=Ft,Aa[3]=_t,Aa[4]=Lt,Aa[5]=Dt,Aa[6]=Ut,o=1}else o=0}o&&(o=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var i,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(i=0;i<c.za;++i){var u=l,d=c,A=d.Ac,h=d.Bc+4*i,f=d.zc,p=d.ya[d.aa+i];if(d.Qa.Bb?p.$b=S(u,d.Pa.jb[0])?2+S(u,d.Pa.jb[2]):S(u,d.Pa.jb[1]):p.$b=0,d.kc&&(p.Ad=S(u,d.Bd)),p.Za=!S(u,145)+0,p.Za){var m=p.Ob,g=0;for(d=0;4>d;++d){var x,v=f[0+d];for(x=0;4>x;++x){v=oa[A[h+x]][v];for(var y=sa[S(u,v[0])];0<y;)y=sa[2*y+S(u,v[y])];v=-y,A[h+x]=v}r(m,g,A,h,4),g+=4,f[0+d]=v}}else v=S(u,156)?S(u,128)?1:3:S(u,163)?2:0,p.Ob[0]=v,a(A,h,v,4),a(f,0,v,4);p.Dd=S(u,142)?S(u,114)?S(u,183)?1:3:2:0}if(c.m.Ka)return qe(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,u=(l=e).rb[l.sb-1],A=l.rb[l.sb+l.ja],i=l.ya[l.aa+l.ja],h=l.kc?i.Ad:0)u.la=A.la=0,i.Za||(u.Na=A.Na=0),i.Hc=0,i.Gc=0,i.ia=0;else{var b,w;if(u=A,A=c,h=l.Pa.Xc,f=l.ya[l.aa+l.ja],p=l.pb[f.$b],d=f.ad,m=0,g=l.rb[l.sb-1],v=x=0,a(d,m,0,384),f.Za)var N=0,j=h[3];else{y=s(16);var C=u.Na+g.Na;if(C=na(A,h[1],C,p.Eb,0,y,0),u.Na=g.Na=(0<C)+0,1<C)ar(y,0,d,m);else{var B=y[0]+3>>3;for(y=0;256>y;y+=16)d[m+y]=B}N=1,j=h[0]}var k=15&u.la,E=15&g.la;for(y=0;4>y;++y){var F=1&E;for(B=w=0;4>B;++B)k=k>>1|(F=(C=na(A,j,C=F+(1&k),p.Sc,N,d,m))>N)<<7,w=w<<2|(3<C?3:1<C?2:0!=d[m+0]),m+=16;k>>=4,E=E>>1|F<<7,x=(x<<8|w)>>>0}for(j=k,N=E>>4,b=0;4>b;b+=2){for(w=0,k=u.la>>4+b,E=g.la>>4+b,y=0;2>y;++y){for(F=1&E,B=0;2>B;++B)C=F+(1&k),k=k>>1|(F=0<(C=na(A,h[2],C,p.Qc,0,d,m)))<<3,w=w<<2|(3<C?3:1<C?2:0!=d[m+0]),m+=16;k>>=2,E=E>>1|F<<5}v|=w<<4*b,j|=k<<4<<b,N|=(240&E)<<b}u.la=j,g.la=N,f.Hc=x,f.Gc=v,f.ia=43690&v?0:p.ia,h=!(x|v)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[i.$b][i.Za],l.wa[l.Y+l.ja].La|=!h),c.Ka)return qe(e,7,"Premature end-of-file encountered.")}if(Ze(e),l=n,c=1,i=(o=e).D,u=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)t:{if(i.M=o.M,i.uc=u,Tn(o,i),c=1,i=(w=o.D).Nb,u=(v=Ra[o.L])*o.R,A=v/2*o.B,y=16*i*o.R,B=8*i*o.B,h=o.sa,f=o.ta-u+y,p=o.qa,d=o.ra-A+B,m=o.Ha,g=o.Ia-A+B,E=0==(k=w.M),x=k>=o.Va-1,2==o.Aa&&Tn(o,w),w.uc)for(F=(C=o).D.M,t(C.D.uc),w=C.yb;w<C.Hb;++w){N=w,j=F;var _=(I=(Q=C).D).Nb;b=Q.R;var I=I.wa[I.Y+N],T=Q.sa,D=Q.ta+16*_*b+16*N,L=I.dd,U=I.tc;if(0!=U)if(t(3<=U),1==Q.L)0<N&&vr(T,D,b,U+4),I.La&&br(T,D,b,U),0<j&&xr(T,D,b,U+4),I.La&&yr(T,D,b,U);else{var P=Q.B,R=Q.qa,O=Q.ra+8*_*P+8*N,M=Q.Ha,Q=Q.Ia+8*_*P+8*N;_=I.ld,0<N&&(dr(T,D,b,U+4,L,_),hr(R,O,M,Q,P,U+4,L,_)),I.La&&(pr(T,D,b,U,L,_),gr(R,O,M,Q,P,U,L,_)),0<j&&(ur(T,D,b,U+4,L,_),Ar(R,O,M,Q,P,U+4,L,_)),I.La&&(fr(T,D,b,U,L,_),mr(R,O,M,Q,P,U,L,_))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(w=16*k,k=16*(k+1),E?(l.y=o.sa,l.O=o.ta+y,l.f=o.qa,l.N=o.ra+B,l.ea=o.Ha,l.W=o.Ia+B):(w-=v,l.y=h,l.O=f,l.f=p,l.N=d,l.ea=m,l.W=g),x||(k-=v),k>l.o&&(k=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&w<k&&(l.J=dn(o,l,w,k-w),l.F=o.mb,null==l.F&&0==l.F.length)){c=qe(o,3,"Could not decode alpha data.");break t}w<l.j&&(v=l.j-w,w=l.j,t(!(1&v)),l.O+=o.R*v,l.N+=o.B*(v>>1),l.W+=o.B*(v>>1),null!=l.F&&(l.J+=l.width*v)),w<k&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=w-l.j,l.U=l.va-l.v,l.T=k-w,c=l.put(l))}i+1!=o.Ic||x||(r(o.sa,o.ta-u,h,f+16*o.R,u),r(o.qa,o.ra-A,p,d+8*o.B,A),r(o.Ha,o.Ia-A,m,g+8*o.B,A))}if(!c)return qe(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),o&=1}return o?(e.cb=0,o):0})(e,l)||(n=e.a)}}else n=e.a}0==n&&null!=d.Oa&&d.Oa.fd&&(n=Un(d.ba))}d=n}u=0!=d?null:11>u?A.f.RGBA.eb:A.f.kb.y}else u=null;return u};var Ma=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(e[t++]);return n}function u(e,t){return e[t+0]|e[t+1]<<8}function d(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function A(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var h=[0],f=[0],p=[],m=new l,g=e,x=function(e,t){var n={},r=0,a=!1,s=0,i=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){for(A(e,t+=4),t+=8;t<e.length;){var o=c(e,t),l=A(e,t+=4);t+=4;var h=l+(1&l);switch(o){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(m=n.frames[r]).src_off=a?i:t-8,m.src_size=s+l+8,r++,a&&(a=!1,s=0,i=0);break;case"VP8X":(m=n.header={}).feature_flags=e[t];var f=t+4;m.canvas_width=1+d(e,f),f+=3,m.canvas_height=1+d(e,f),f+=3;break;case"ALPH":a=!0,s=h+8,i=t-8;break;case"ANIM":(m=n.header).bgcolor=A(e,t),f=t+4,m.loop_count=u(e,f),f+=2;break;case"ANMF":var p,m;(m=n.frames[r]={}).offset_x=2*d(e,t),t+=3,m.offset_y=2*d(e,t),t+=3,m.width=1+d(e,t),t+=3,m.height=1+d(e,t),t+=3,m.duration=d(e,t),t+=3,p=e[t++],m.dispose=1&p,m.blend=p>>1&1}"ANMF"!=o&&(t+=h)}return n}}(g,0);x.response=g,x.rgbaoutput=!0,x.dataurl=!1;var v=x.header?x.header:null,y=x.frames?x.frames:null;if(v){v.loop_counter=v.loop_count,h=[v.canvas_height],f=[v.canvas_width];for(var b=0;b<y.length&&0!=y[b].blend;b++);}var w=y[0],N=m.WebPDecodeRGBA(g,w.src_off,w.src_size,f,h);w.rgba=N,w.imgwidth=f[0],w.imgheight=h[0];for(var j=0;j<f[0]*h[0]*4;j++)p[j]=N[j];return this.width=f,this.height=h,this.data=p,this}!function(e){var t,n,a,s,i,o,l,c,u,d=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new c,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new o,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new o,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new A(this),t=this.internal.f2,n=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var A=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var a=0;Object.defineProperty(this,"posX",{get:function(){return a},set:function(e){isNaN(e)||(a=e)}});var s=0;Object.defineProperty(this,"posY",{get:function(){return s},set:function(e){isNaN(e)||(s=e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),u.margin=t}});var i=!1;Object.defineProperty(this,"autoPaging",{get:function(){return i},set:function(e){i=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(e){e instanceof d&&(u=e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(e){u.path=e}});var c=[];Object.defineProperty(this,"ctxStack",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=h(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=h(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var A=null,f=null;Object.defineProperty(this,"fontFaces",{get:function(){return f},set:function(e){A=null,f=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1];t[2];var r=t[3],a=t[4];t[5];var s=t[6],i=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(a)[2];a="px"===i?Math.floor(parseFloat(a)*this.pdf.internal.scaleFactor):"em"===i?Math.floor(parseFloat(a)*this.pdf.getFontSize()):Math.floor(parseFloat(a)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(a);var o=function(e){var t,n,r=[],a=e.trim();if(""===a)return ii;if(a in Ks)return[Ks[a]];for(;""!==a;){switch(n=null,t=(a=qs(a)).charAt(0)){case'"':case"'":n=Xs(a.substring(1),t);break;default:n=Ys(a)}if(null===n)return ii;if(r.push(n[0]),""!==(a=qs(n[1]))&&","!==a.charAt(0))return ii;a=a.replace(/^,/,"")}return r}(s);if(this.fontFaces){var l=function(e,t){if(null===A){var n=function(e){var t=[];return Object.keys(e).forEach(function(n){e[n].forEach(function(e){var r=null;switch(e){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:e},t.push(r))})}),t}(e.getFontList());A=function(e){for(var t={},n=0;n<e.length;++n){var r=zs(e[n]),a=r.family,s=r.stretch,i=r.style,o=r.weight;t[a]=t[a]||{},t[a][s]=t[a][s]||{},t[a][s][i]=t[a][s][i]||{},t[a][s][i][o]=r}return t}(n.concat(t))}return A}(this.pdf,this.fontFaces),c=o.map(function(e){return{family:e,stretch:"normal",weight:r,style:n}}),u=function(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",a=Object.assign({},Vs,n.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=zs(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[r]))throw new Error("Could not find a font-family for the rule '"+Gs(s)+"' and default family '"+r+"'.");if(i=function(e,t){if(t[e])return t[e];var n=Ms[e],r=n<=Ms.normal?-1:1,a=Ws(t,Os,n,r);if(!a)throw new Error("Could not find a matching font-stretch value for "+e);return a}(s.stretch,i),i=function(e,t){if(t[e])return t[e];for(var n=Rs[e],r=0;r<n.length;++r)if(t[n[r]])return t[n[r]];throw new Error("Could not find a matching font-style for "+e)}(s.style,i),!(i=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=Hs[e],r=Ws(t,Qs,n,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+Gs(s)+"'.");return i}(l,c);this.pdf.setFont(u.ref.name,u.ref.style)}else{var d="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(d="bold"),"italic"===n&&(d+="italic"),0===d.length&&(d="normal");for(var h="",f={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},p=0;p<o.length;p++){if(void 0!==this.pdf.internal.getFont(o[p],d,{noFallback:!0,disableWarning:!0})){h=o[p];break}if("bolditalic"===d&&void 0!==this.pdf.internal.getFont(o[p],"bold",{noFallback:!0,disableWarning:!0}))h=o[p],d="bold";else if(void 0!==this.pdf.internal.getFont(o[p],"normal",{noFallback:!0,disableWarning:!0})){h=o[p],d="normal";break}}if(""===h)for(var m=0;m<o.length;m++)if(f[o[m]]){h=f[o[m]];break}h=""===h?"Times":h,this.pdf.setFont(h,d)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,R.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,R.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};A.prototype.setLineDash=function(e){this.lineDash=e},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){b.call(this,"fill",!1)},A.prototype.stroke=function(){b.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw xa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(e,t)},A.prototype.closePath=function(){var e=new o(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,r.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new o(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(e.x,e.y)},A.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw xa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(n.x,n.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},A.prototype.quadraticCurveTo=function(e,t,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t))throw xa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var a=this.ctx.transform.applyToPoint(new o(n,r)),s=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"qct",x1:s.x,y1:s.y,x:a.x,y:a.y}),this.ctx.lastPoint=new o(a.x,a.y)},A.prototype.bezierCurveTo=function(e,t,n,r,a,s){if(isNaN(a)||isNaN(s)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw xa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var i=this.ctx.transform.applyToPoint(new o(a,s)),l=this.ctx.transform.applyToPoint(new o(e,t)),c=this.ctx.transform.applyToPoint(new o(n,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:i.x,y:i.y}),this.ctx.lastPoint=new o(i.x,i.y)},A.prototype.arc=function(e,t,n,r,a,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(a))throw xa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(s=Boolean(s),!this.ctx.transform.isIdentity){var i=this.ctx.transform.applyToPoint(new o(e,t));e=i.x,t=i.y;var l=this.ctx.transform.applyToPoint(new o(0,n)),c=this.ctx.transform.applyToPoint(new o(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(a-r)>=2*Math.PI&&(r=0,a=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:a,counterclockwise:s})},A.prototype.arcTo=function(e,t,n,r,a){throw new Error("arcTo not implemented.")},A.prototype.rect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw xa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},A.prototype.fillRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw xa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var a={};"butt"!==this.lineCap&&(a.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(a.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,r),this.fill(),a.hasOwnProperty("lineCap")&&(this.lineCap=a.lineCap),a.hasOwnProperty("lineJoin")&&(this.lineJoin=a.lineJoin)}},A.prototype.strokeRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw xa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(e,t,n,r),this.stroke())},A.prototype.clearRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw xa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,r))},A.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},A.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(e){var t,n,r,a;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,r=0,a=0;else{var s=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==s)t=parseInt(s[1]),n=parseInt(s[2]),r=parseInt(s[3]),a=1;else if(null!==(s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(s[1]),n=parseInt(s[2]),r=parseInt(s[3]),a=parseFloat(s[4]);else{if(a=1,"string"==typeof e&&"#"!==e.charAt(0)){var i=new Na(e);e=i.ok?i.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:t,g:n,b:r,a:a,style:e}},f=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},p=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};A.prototype.fillText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw xa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!f.call(this)){var a=L(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;E.call(this,{text:e,x:t,y:n,scale:s,angle:a,align:this.textAlign,maxWidth:r})}},A.prototype.strokeText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw xa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){r=isNaN(r)?void 0:r;var a=L(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;E.call(this,{text:e,x:t,y:n,scale:s,renderingMode:"stroke",angle:a,align:this.textAlign,maxWidth:r})}},A.prototype.measureText=function(e){if("string"!=typeof e)throw xa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),a=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:a*=Math.round(96*n/72*1e4)/1e4})},A.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw xa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new c(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},A.prototype.rotate=function(e){if(isNaN(e))throw xa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new c(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},A.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw xa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new c(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},A.prototype.transform=function(e,t,n,r,a,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(a)||isNaN(s))throw xa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var i=new c(e,t,n,r,a,s);this.ctx.transform=this.ctx.transform.multiply(i)},A.prototype.setTransform=function(e,t,n,r,a,s){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,r=isNaN(r)?1:r,a=isNaN(a)?0:a,s=isNaN(s)?0:s,this.ctx.transform=new c(e,t,n,r,a,s)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(e,t,n,r,a,s,i,o,u){var d=this.pdf.getImageProperties(e),A=1,h=1,f=1,p=1;void 0!==r&&void 0!==o&&(f=o/r,p=u/a,A=d.width/r*o/r,h=d.height/a*u/a),void 0===s&&(s=t,i=n,t=0,n=0),void 0!==r&&void 0===o&&(o=r,u=a),void 0===r&&void 0===o&&(o=d.width,u=d.height);for(var x,b=this.ctx.transform.decompose(),N=L(b.rotate.shx),j=new c,C=(j=(j=(j=j.multiply(b.translate)).multiply(b.skew)).multiply(b.scale)).applyToRectangle(new l(s-t*f,i-n*p,r*A,a*h)),B=g.call(this,C),k=[],S=0;S<B.length;S+=1)-1===k.indexOf(B[S])&&k.push(B[S]);if(y(k),this.autoPaging)for(var E=k[0],F=k[k.length-1],_=E;_<F+1;_++){this.pdf.setPage(_);var I=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],T=1===_?this.posY+this.margin[0]:this.margin[0],D=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],U=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],P=1===_?0:D+(_-2)*U;if(0!==this.ctx.clip_path.length){var R=this.path;x=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(x,this.posX+this.margin[3],-P+T+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=R}var O=JSON.parse(JSON.stringify(C));O=v([O],this.posX+this.margin[3],-P+T+this.ctx.prevPageLastElemOffset)[0];var M=(_>E||_<F)&&m.call(this);M&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],I,U,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",O.x,O.y,O.w,O.h,null,null,N),M&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",C.x,C.y,C.w,C.h,null,null,N)};var g=function(e,t,n){var r=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var a=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+a)/n)+1);break;case"arc":r.push(Math.floor((e.y+a-e.radius)/n)+1),r.push(Math.floor((e.y+a+e.radius)/n)+1);break;case"qct":var s=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((s.y+a)/n)+1),r.push(Math.floor((s.y+s.h+a)/n)+1);break;case"bct":var i=P(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((i.y+a)/n)+1),r.push(Math.floor((i.y+i.h+a)/n)+1);break;case"rect":r.push(Math.floor((e.y+a)/n)+1),r.push(Math.floor((e.y+e.h+a)/n)+1)}for(var o=0;o<r.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<r[o];)x.call(this);return r},x=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,r=this.lineCap,a=this.lineWidth,s=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=r,this.lineWidth=a,this.lineJoin=s},v=function(e,t,n){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=n;case"qct":e[r].x1+=t,e[r].y1+=n;default:e[r].x+=t,e[r].y+=n}return e},y=function(e){return e.sort(function(e,t){return e-t})},b=function(e,t){for(var n,r,a=this.fillStyle,s=this.strokeStyle,i=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),d=JSON.parse(JSON.stringify(this.path)),A=[],h=0;h<d.length;h++)if(void 0!==d[h].x)for(var f=g.call(this,d[h]),p=0;p<f.length;p+=1)-1===A.indexOf(f[p])&&A.push(f[p]);for(var b=0;b<A.length;b++)for(;this.pdf.internal.getNumberOfPages()<A[b];)x.call(this);if(y(A),this.autoPaging)for(var N=A[0],j=A[A.length-1],C=N;C<j+1;C++){this.pdf.setPage(C),this.fillStyle=a,this.strokeStyle=s,this.lineCap=i,this.lineWidth=l,this.lineJoin=c;var B=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],k=1===C?this.posY+this.margin[0]:this.margin[0],S=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],E=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],F=1===C?0:S+(C-2)*E;if(0!==this.ctx.clip_path.length){var _=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(n,this.posX+this.margin[3],-F+k+this.ctx.prevPageLastElemOffset),w.call(this,e,!0),this.path=_}if(r=JSON.parse(JSON.stringify(u)),this.path=v(r,this.posX+this.margin[3],-F+k+this.ctx.prevPageLastElemOffset),!1===t||0===C){var I=(C>N||C<j)&&m.call(this);I&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],B,E,null).clip().discardPath()),w.call(this,e,t),I&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,w.call(this,e,t),this.lineWidth=o;this.path=u},w=function(e,t){if(("stroke"!==e||t||!p.call(this))&&("stroke"===e||t||!f.call(this))){for(var n,r,a=[],s=this.path,i=0;i<s.length;i++){var o=s[i];switch(o.type){case"begin":a.push({begin:!0});break;case"close":a.push({close:!0});break;case"mt":a.push({start:o,deltas:[],abs:[]});break;case"lt":var l=a.length;if(s[i-1]&&!isNaN(s[i-1].x)&&(n=[o.x-s[i-1].x,o.y-s[i-1].y],l>0))for(;l>=0;l--)if(!0!==a[l-1].close&&!0!==a[l-1].begin){a[l-1].deltas.push(n),a[l-1].abs.push(o);break}break;case"bct":n=[o.x1-s[i-1].x,o.y1-s[i-1].y,o.x2-s[i-1].x,o.y2-s[i-1].y,o.x-s[i-1].x,o.y-s[i-1].y],a[a.length-1].deltas.push(n);break;case"qct":var c=s[i-1].x+2/3*(o.x1-s[i-1].x),u=s[i-1].y+2/3*(o.y1-s[i-1].y),d=o.x+2/3*(o.x1-o.x),A=o.y+2/3*(o.y1-o.y),h=o.x,m=o.y;n=[c-s[i-1].x,u-s[i-1].y,d-s[i-1].x,A-s[i-1].y,h-s[i-1].x,m-s[i-1].y],a[a.length-1].deltas.push(n);break;case"arc":a.push({deltas:[],abs:[],arc:!0}),Array.isArray(a[a.length-1].abs)&&a[a.length-1].abs.push(o)}}r=t?null:"stroke"===e?"stroke":"fill";for(var g=!1,x=0;x<a.length;x++)if(a[x].arc)for(var v=a[x].abs,y=0;y<v.length;y++){var b=v[y];"arc"===b.type?C.call(this,b.x,b.y,b.radius,b.startAngle,b.endAngle,b.counterclockwise,void 0,t,!g):F.call(this,b.x,b.y),g=!0}else if(!0===a[x].close)this.pdf.internal.out("h"),g=!1;else if(!0!==a[x].begin){var w=a[x].start.x,N=a[x].start.y;_.call(this,a[x].deltas,w,N),g=!0}r&&B.call(this,r),t&&k.call(this)}},N=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},j=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(e,t,n,r,a,s,i,o,l){for(var c=T.call(this,n,r,a,s),u=0;u<c.length;u++){var d=c[u];0===u&&(l?S.call(this,d.x1+e,d.y1+t):F.call(this,d.x1+e,d.y1+t)),I.call(this,e,t,d.x2,d.y2,d.x3,d.y3,d.x4,d.y4)}o?k.call(this):B.call(this,i)},B=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},k=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(e,t){this.pdf.internal.out(n(e)+" "+a(t)+" m")},E=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),r=N.call(this,e.y),a=j.call(this,r)-n.h,s=this.ctx.transform.applyToPoint(new o(e.x,r)),i=this.ctx.transform.decompose(),u=new c;u=(u=(u=u.multiply(i.translate)).multiply(i.skew)).multiply(i.scale);for(var d,A,h,f=this.ctx.transform.applyToRectangle(new l(e.x,r,n.w,n.h)),p=u.applyToRectangle(new l(e.x,a,n.w,n.h)),x=g.call(this,p),b=[],C=0;C<x.length;C+=1)-1===b.indexOf(x[C])&&b.push(x[C]);if(y(b),this.autoPaging)for(var B=b[0],k=b[b.length-1],S=B;S<k+1;S++){this.pdf.setPage(S);var E=1===S?this.posY+this.margin[0]:this.margin[0],F=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_=this.pdf.internal.pageSize.height-this.margin[2],I=_-this.margin[0],T=this.pdf.internal.pageSize.width-this.margin[1],D=T-this.margin[3],L=1===S?0:F+(S-2)*I;if(0!==this.ctx.clip_path.length){var U=this.path;d=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(d,this.posX+this.margin[3],-1*L+E),w.call(this,"fill",!0),this.path=U}var P=v([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-L+E+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(A=this.pdf.internal.getFontSize(),this.pdf.setFontSize(A*e.scale),h=this.lineWidth,this.lineWidth=h*e.scale);var R="text"!==this.autoPaging;if(R||P.y+P.h<=_){if(R||P.y>=E&&P.x<=T){var O=R?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||T-P.x)[0],M=v([JSON.parse(JSON.stringify(f))],this.posX+this.margin[3],-L+E+this.ctx.prevPageLastElemOffset)[0],Q=R&&(S>B||S<k)&&m.call(this);Q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],D,I,null).clip().discardPath()),this.pdf.text(O,M.x,M.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),Q&&this.pdf.restoreGraphicsState()}}else P.y<_&&(this.ctx.prevPageLastElemOffset+=_-P.y);e.scale>=.01&&(this.pdf.setFontSize(A),this.lineWidth=h)}else e.scale>=.01&&(A=this.pdf.internal.getFontSize(),this.pdf.setFontSize(A*e.scale),h=this.lineWidth,this.lineWidth=h*e.scale),this.pdf.text(e.text,s.x+this.posX,s.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(A),this.lineWidth=h)},F=function(e,t,r,s){r=r||0,s=s||0,this.pdf.internal.out(n(e+r)+" "+a(t+s)+" l")},_=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},I=function(e,n,r,a,o,l,c,u){this.pdf.internal.out([t(s(r+e)),t(i(a+n)),t(s(o+e)),t(i(l+n)),t(s(c+e)),t(i(u+n)),"c"].join(" "))},T=function(e,t,n,r){for(var a=2*Math.PI,s=Math.PI/2;t>n;)t-=a;var i=Math.abs(n-t);i<a&&r&&(i=a-i);for(var o=[],l=r?-1:1,c=t;i>1e-5;){var u=c+l*Math.min(i,s);o.push(D.call(this,e,c,u)),i-=Math.abs(u-c),c=u}return o},D=function(e,t,n){var r=(n-t)/2,a=e*Math.cos(r),s=e*Math.sin(r),i=a,o=-s,l=i*i+o*o,c=l+i*a+o*s,u=4/3*(Math.sqrt(2*l*c)-c)/(i*s-o*a),d=i-u*o,A=o+u*i,h=d,f=-A,p=r+t,m=Math.cos(p),g=Math.sin(p);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:d*m-A*g,y2:d*g+A*m,x3:h*m-f*g,y3:h*g+f*m,x4:e*Math.cos(n),y4:e*Math.sin(n)}},L=function(e){return 180*e/Math.PI},U=function(e,t,n,r,a,s){var i=e+.5*(n-e),o=t+.5*(r-t),c=a+.5*(n-a),u=s+.5*(r-s),d=Math.min(e,a,i,c),A=Math.max(e,a,i,c),h=Math.min(t,s,o,u),f=Math.max(t,s,o,u);return new l(d,h,A-d,f-h)},P=function(e,t,n,r,a,s,i,o){var c,u,d,A,h,f,p,m,g,x,v,y,b,w,N=n-e,j=r-t,C=a-n,B=s-r,k=i-a,S=o-s;for(u=0;u<41;u++)g=(p=(d=e+(c=u/40)*N)+c*((h=n+c*C)-d))+c*(h+c*(a+c*k-h)-p),x=(m=(A=t+c*j)+c*((f=r+c*B)-A))+c*(f+c*(s+c*S-f)-m),0==u?(v=g,y=x,b=g,w=x):(v=Math.min(v,g),y=Math.min(y,x),b=Math.max(b,g),w=Math.max(w,x));return new l(Math.round(v),Math.round(y),Math.round(b-v),Math.round(w-y))},R=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(Xa.API),function(e){var t=function(e){var t,n,r,a,s,i,o,l,c,u;for(/[^\x00-\xFF]/.test(e),n=[],r=0,a=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;a>r;r+=4)0!==(s=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(i=(s=((s=((s=((s=(s-(u=s%85))/85)-(c=s%85))/85)-(l=s%85))/85)-(o=s%85))/85)%85,n.push(i+33,o+33,l+33,c+33,u+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,r,a,s,i=String,o="length",l=255,c="charCodeAt",u="slice",d="replace";for(e[u](-2),e=e[u](0,-2)[d](/\s/g,"")[d]("z","!!!!!"),r=[],a=0,s=(e+=t="uuuuu"[u](e[o]%5||5))[o];s>a;a+=5)n=52200625*(e[c](a)-33)+614125*(e[c](a+1)-33)+7225*(e[c](a+2)-33)+85*(e[c](a+3)-33)+(e[c](a+4)-33),r.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(r,t[o]),i.fromCharCode.apply(i,r)},r=function(e){return e.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",r=0;r<e.length;r+=2)n+=String.fromCharCode("0x"+(e[r]+e[r+1]));return n},s=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=Q(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,i){var o=0,l=e||"",c=[];for("string"==typeof(i=i||[])&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=a(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=r(l),c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Xa.API),(si=Xa.API).loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(e,t,n){var r=new XMLHttpRequest,a=0,s=function(e){var t=e.length,n=[],r=String.fromCharCode;for(a=0;a<t;a+=1)n.push(r(255&e.charCodeAt(a)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?n(s(this.responseText)):n(void 0)}),r.send(null),t&&200===r.status)return s(r.responseText)}(e,t,n)}catch(g){}return r}(e,t,n)},si.loadImageFile=si.loadFile,function(e){function t(){return(ma.html2canvas?Promise.resolve(ma.html2canvas):Promise.resolve().then(n.t.bind(n,1052,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function a(){return(ma.DOMPurify?Promise.resolve(ma.DOMPurify):n.e(82).then(n.bind(n,7082))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var s=function(e){var t=(0,r.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},i=function(e,t){var n=document.createElement(e);for(var r in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[r]=t.style[r];return n},o=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),a=t.firstChild;a;a=a.nextSibling)!0!==n&&1===a.nodeType&&"SCRIPT"===a.nodeName||r.appendChild(e(a,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft},!0)),r},l=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),n);return(r=r.setProgress(1,e,1,[e])).set(t)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(e,t){return e.__proto__=t||l.prototype,e},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(s(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e),t){case"string":return this.then(a).then(function(t){return this.set({src:i("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},l.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,a=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete a.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var s=0;s<n.length;++s){var i=n[s],o=i.src.find(function(e){return"truetype"===e.format});o&&t.addFont(o.url,i.ref.name,i.ref.style)}return a.windowHeight=a.windowHeight||0,a.windowHeight=0==a.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):a.windowHeight,t.context2d.save(!0),e(this.prop.container,a)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},l.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},l.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},l.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(e){if("object"!==s(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in l.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},l.prototype.get=function(e,t){return this.then(function(){var n=e in l.template.prop?this.prop[e]:this.opt[e];return t?t(n):n})},l.prototype.setMargin=function(e){return this.then(function(){switch(s(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},l.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||Xa.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},l.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},l.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return n.updateProgress(null,e),t}).then(e,t).then(function(e){return n.updateProgress(1),e})})},l.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then;var r=this;e&&(e=e.bind(r)),t&&(t=t.bind(r));var a=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?r:l.convert(Object.assign({},r),Promise.prototype),s=n.call(a,e,t);return l.convert(s,r.__proto__)},l.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},l.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},l.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return l.convert(t,this)},l.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},l.prototype.error=function(e){return this.then(function(){throw new Error(e)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Xa.getPageSize=function(e,t,n){if("object"===(0,r.A)(e)){var a=e;e=a.orientation,t=a.unit||t,n=a.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var s,i=(""+n).toLowerCase(),o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":s=1;break;case"mm":s=72/25.4;break;case"cm":s=72/2.54;break;case"in":s=72;break;case"px":s=.75;break;case"pc":case"em":s=12;break;case"ex":s=6;break;default:throw"Invalid unit: "+t}var l,c=0,u=0;if(o.hasOwnProperty(i))c=o[i][1]/s,u=o[i][0]/s;else try{c=n[1],u=n[0]}catch(Na){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",u>c&&(l=u,u=c,c=l);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",c>u&&(l=u,u=c,c=l)}return{width:u,height:c,unit:t,k:s,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(zs):null;var n=new l(t);return t.worker?n:n.from(e).doCallback()}}(Xa.API),Xa.API.addJS=function(e){return $s=e,this.internal.events.subscribe("postPutResources",function(){Js=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Js+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Zs=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+$s+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==Js&&void 0!==Zs&&this.internal.out("/Names <</JavaScript "+Js+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),a=0;a<r.length;a++){var s=r[a],i=n.exec(s);if(null!=i){var o=i[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(a=0;a<l;a++){var u=e.internal.newObject();c.push(u);var d=e.internal.getPageInfo(a+1);e.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var A=e.internal.newObject();for(e.internal.write("<< /Names [ "),a=0;a<c.length;a++)e.internal.write("(page_"+(a+1)+")"+c[a]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+A+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var a=t.children[r];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var s=this.count=this.count_r({count:0},a);if(s>0&&this.line("/Count "+s),a.options&&a.options.pageNumber){var i=e.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(Xa.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,r,a,s,i){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=s||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,o=function(e){for(var n,r=256*e.charCodeAt(4)+e.charCodeAt(5),a=e.length,s={width:0,height:0,numcomponents:1},i=4;i<a;i+=2){if(i+=r,-1!==t.indexOf(e.charCodeAt(i+1))){n=256*e.charCodeAt(i+5)+e.charCodeAt(i+6),s={width:256*e.charCodeAt(i+7)+e.charCodeAt(i+8),height:n,numcomponents:e.charCodeAt(i+9)};break}r=256*e.charCodeAt(i+2)+e.charCodeAt(i+3)}return s}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),o.numcomponents){case 1:i=this.color_spaces.DEVICE_GRAY;break;case 4:i=this.color_spaces.DEVICE_CMYK;break;case 3:i=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:i,bitsPerComponent:8,filter:l,index:n,alias:r}}return c}}(Xa.API),Xa.API.processPNG=function(e,t,n,r){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,s=new fa(e,{checkCrc:!0}).decode(),i=s.width,o=s.height,l=s.channels,c=s.palette,u=s.depth;a=c&&1===l?function(e){for(var t=e.width,n=e.height,r=e.data,a=e.palette,s=e.depth,i=!1,o=[],l=[],c=void 0,u=!1,d=0,A=0;A<a.length;A++){var h=W(a[A],4),f=h[0],p=h[1],m=h[2],g=h[3];o.push(f,p,m),null!=g&&(0===g?(d++,l.length<1&&l.push(A)):g<255&&(u=!0))}if(u||d>1){i=!0,l=void 0;var x=t*n;c=new Uint8Array(x);for(var v=new DataView(r.buffer),y=0;y<x;y++){var b=W(a[pi(v,y,s)],4)[3];c[y]=b}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:r,alphaBytes:c,needSMask:i,palette:o,mask:l}}(s):2===l||4===l?function(e){for(var t=e.data,n=e.width,r=e.height,a=e.channels,s=e.depth,i=2===a?"DeviceGray":"DeviceRGB",o=a-1,l=n*r,c=o,u=l*c,d=1*l,A=Math.ceil(u*s/8),h=Math.ceil(d*s/8),f=new Uint8Array(A),p=new Uint8Array(h),m=new DataView(t.buffer),g=new DataView(f.buffer),x=new DataView(p.buffer),v=!1,y=0;y<l;y++){for(var b=y*a,w=0;w<c;w++)mi(g,pi(m,b+w,s),y*c+w,s);var N=pi(m,b+c,s);N<(1<<s)-1&&(v=!0),mi(x,N,1*y,s)}return{colorSpace:i,colorsPerPixel:o,colorBytes:f,alphaBytes:p,needSMask:v}}(s):function(e){var t=e.data,n=1===e.channels?"DeviceGray":"DeviceRGB";return{colorSpace:n,colorsPerPixel:"DeviceGray"===n?1:3,colorBytes:t instanceof Uint8Array?t:new Uint8Array(t.buffer),needSMask:!1}}(s);var d,A,h,f=a,p=f.colorSpace,m=f.colorsPerPixel,g=f.colorBytes,x=f.alphaBytes,v=f.needSMask,y=f.palette,b=f.mask,w=null;return r!==Xa.API.image_compression.NONE?(w=function(e){var t;switch(e){case Xa.API.image_compression.FAST:t=11;break;case Xa.API.image_compression.MEDIUM:t=13;break;case Xa.API.image_compression.SLOW:t=14;break;default:t=12}return t}(r),d=this.decode.FLATE_DECODE,A="/Predictor ".concat(w," "),e=oi(g,i*m,m,r),v&&(h=oi(x,i,1,r))):(d=void 0,A="",e=g,v&&(h=x)),A+="/Colors ".concat(m," /BitsPerComponent ").concat(u," /Columns ").concat(i),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:n,data:e,index:t,filter:d,decodeParameters:A,transparency:b,palette:y,sMask:h,predictor:w,width:i,height:o,bitsPerComponent:u,colorSpace:p}}},function(e){e.processGIF89A=function(t,n,r,a){var s=new xi(t),i=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:i,height:o},u=new yi(100).encode(c,100);return e.processJPEG.call(this,u,n,r,a)},e.processGIF87A=e.processGIF89A}(Xa.API),bi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},bi.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){xa.log("bit decode error:"+n)}},bi.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}0!==n&&(this.pos+=4-n)}},bi.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*a*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[i]=c.blue,this.data[i+1]=c.green,this.data[i+2]=c.red,this.data[i+3]=255,2*a+1>=this.width)break;c=this.palette[l],this.data[i+4]=c.blue,this.data[i+4+1]=c.green,this.data[i+4+2]=c.red,this.data[i+4+3]=255}0!==t&&(this.pos+=4-t)}},bi.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==e&&(this.pos+=4-e)}},bi.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,c=s>>15?255:0,u=r*this.width*4+4*a;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=i,this.data[u+3]=c}this.pos+=e}},bi.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&n)/n*255|0,c=(i>>11)/t*255|0,u=a*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=e}},bi.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*n;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},bi.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=r,this.data[o+3]=i}},bi.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,a){var s=new bi(t,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},c=new yi(100).encode(l,100);return e.processJPEG.call(this,c,n,r,a)}}(Xa.API),wi.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,a){var s=new wi(t),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},c=new yi(100).encode(l,100);return e.processJPEG.call(this,c,n,r,a)}}(Xa.API),Xa.API.processRGBA=function(e,t,n){for(var r=e.data,a=r.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,l=0,c=0;c<a;c+=4){var u=r[c],d=r[c+1],A=r[c+2],h=r[c+3];s[o++]=u,s[o++]=d,s[o++]=A,i[l++]=h}var f=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:f,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Xa.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ei=Xa.API,ti=ei.getCharWidthsArray=function(e,t){var n,a,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:s.metadata.Unicode.kerning,d=u.fof?u.fof:1,A=!1!==t.doKerning,h=0,f=e.length,p=0,m=l[0]||c,g=[];for(n=0;n<f;n++)a=e.charCodeAt(n),"function"==typeof s.metadata.widthOfString?g.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(h=A&&"object"===(0,r.A)(u[a])&&!isNaN(parseInt(u[a][p],10))?u[a][p]/d:0,g.push((l[a]||m)/c+h)),p=a;return g},ni=ei.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return ei.processArabic&&(e=ei.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,n,a)/n:ti.apply(this,arguments).reduce(function(e,t){return e+t},0)},ri=function(e,t,n,r){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<n;)o+=t[s],s++;a.push(e.slice(0,s));var l=s;for(o=0;s!==i;)o+t[s]>r&&(a.push(e.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&a.push(e.slice(l,s)),a},ai=function(e,t,n){n||(n={});var r,a,s,i,o,l,c,u=[],d=[u],A=n.textIndent||0,h=0,f=0,p=e.split(" "),m=ti.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?p[0].length+2:n.lineIndent||0){var g=Array(l).join(" "),x=[];p.map(function(e){(e=e.split(/\s*\n/)).length>1?x=x.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):x.push(e[0])}),p=x,l=ni.apply(this,[g,n])}for(s=0,i=p.length;s<i;s++){var v=0;if(r=p[s],l&&"\n"==r[0]&&(r=r.substr(1),v=1),A+h+(f=(a=ti.apply(this,[r,n])).reduce(function(e,t){return e+t},0))>t||v){if(f>t){for(o=ri.apply(this,[r,a,t-(A+h),t]),u.push(o.shift()),u=[o.pop()];o.length;)d.push([o.shift()]);f=a.slice(r.length-(u[0]?u[0].length:0)).reduce(function(e,t){return e+t},0)}else u=[r];d.push(u),A=f+l,h=m}else u.push(r),A+=h+f,h=m}return c=l?function(e,t){return(t?g:"")+e.join(" ")}:function(e){return e.join(" ")},d.map(c)},ei.splitTextToSize=function(e,t,n){var r,a=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle),n="Unicode";return t.metadata[n]?{widths:t.metadata[n].widths||{0:1},kerning:t.metadata[n].kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(ai.apply(this,[r[o],i,s]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",a={},s={},i=0;i<16;i++)a[n[i]]=t[i],s[t[i]]=n[i];var o=function(e){return"0x"+parseInt(e,10).toString(16)},l=e.__fontmetrics__.compress=function(e){var t,n,a,i,c=["{"];for(var u in e){if(t=e[u],isNaN(parseInt(u,10))?n="'"+u+"'":(u=parseInt(u,10),n=(n=o(u).slice(2)).slice(0,-1)+s[n.slice(-1)]),"number"==typeof t)t<0?(a=o(t).slice(3),i="-"):(a=o(t).slice(2),i=""),a=i+a.slice(0,-1)+s[a.slice(-1)];else{if("object"!==(0,r.A)(t))throw new Error("Don't know what to do with value type "+(0,r.A)(t)+".");a=l(t)}c.push(n+a)}return c.push("}"),c.join("")},c=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,n,r,s,i={},o=1,l=i,c=[],u="",d="",A=e.length-1,h=1;h<A;h+=1)"'"==(s=e[h])?t?(r=t.join(""),t=void 0):t=[]:t?t.push(s):"{"==s?(c.push([l,r]),l={},r=void 0):"}"==s?((n=c.pop())[0][n[1]]=l,r=void 0,l=n[0]):"-"==s?o=-1:void 0===r?a.hasOwnProperty(s)?(u+=a[s],r=parseInt(u,16)*o,o=1,u=""):u+=s:a.hasOwnProperty(s)?(d+=a[s],l[r]=parseInt(d,16)*o,o=1,r=void 0,d=""):d+=s;return i},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},A={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=A.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var r=d.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}(Xa.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n};e.API.events.push(["addFont",function(n){var r=void 0,a=n.font,s=n.instance;if(!a.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if("string"!=typeof(r=!1===s.existsFileInVFS(a.postScriptName)?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?t(r):t(ja(r)),n.metadata=e.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(a,r)}}])}(Xa),Xa.API.addSvgAsImage=function(e,t,r,a,s,i,o,l){if(isNaN(t)||isNaN(r))throw xa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(s))throw xa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=a,c.height=s;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return(ma.canvg?Promise.resolve(ma.canvg):n.e(239).then(n.bind(n,2239))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e}).then(function(t){return t.fromString(u,e,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(d)}).then(function(){A.addImage(c.toDataURL("image/jpeg",1),t,r,a,s,o,l)})},Xa.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(t,n);return this},Xa.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var a,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,A=0;function h(e,t){var n,r=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var f=l.length;for(A=0;A<f;A+=1)n[l[A]].value=n[l[A]].defaultValue,n[l[A]].explicitSet=!1}if("object"===(0,r.A)(e))for(s in e)if(i=e[s],h(l,s)&&void 0!==i){if("boolean"===n[s].type&&"boolean"==typeof i)n[s].value=i;else if("name"===n[s].type&&h(n[s].valueSet,i))n[s].value=i;else if("integer"===n[s].type&&Number.isInteger(i))n[s].value=i;else if("array"===n[s].type){for(u=0;u<i.length;u+=1)if(a=!0,1===i[u].length&&"number"==typeof i[u][0])c.push(String(i[u]-1));else if(i[u].length>1){for(d=0;d<i[u].length;d+=1)"number"!=typeof i[u][d]&&(a=!1);!0===a&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}n[s].value="["+c.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),s=unescape(encodeURIComponent("</x:xmpmeta>")),i=n.length+r.length+a.length+t.length+s.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+i+" >>"),this.internal.write("stream"),this.internal.write(t+n+r+a+s),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Xa.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,r=t.metadata.Unicode.widths,a=["","0","00","000","0000"],s=[""],i=0,o=e.length;i<o;++i){if(n=t.metadata.characterToGlyph(e.charCodeAt(i)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(i),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return s.join("");n=n.toString(16),s.push(a[4-n.length],n)}return s.join("")},r=function(e){var t,n,r,a,s,i,o;for(s="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],i=0,o=(n=Object.keys(e).sort(function(e,t){return e-t})).length;i<o;i++)t=n[i],r.length>=100&&(s+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(a=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+a+">"));return r.length&&(s+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),s+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,a=t.out,s=t.newObject,i=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var o=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",u=0;u<l.length;u++)c+=String.fromCharCode(l[u]);var d=s();i({data:c,addLength1:!0,objectId:d}),a("endobj");var A=s();i({data:r(n.metadata.toUnicode),addLength1:!0,objectId:A}),a("endobj");var h=s();a("<<"),a("/Type /FontDescriptor"),a("/FontName /"+za(n.fontName)),a("/FontFile2 "+d+" 0 R"),a("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),a("/Flags "+n.metadata.flags),a("/StemV "+n.metadata.stemV),a("/ItalicAngle "+n.metadata.italicAngle),a("/Ascent "+n.metadata.ascender),a("/Descent "+n.metadata.decender),a("/CapHeight "+n.metadata.capHeight),a(">>"),a("endobj");var f=s();a("<<"),a("/Type /Font"),a("/BaseFont /"+za(n.fontName)),a("/FontDescriptor "+h+" 0 R"),a("/W "+e.API.PDFObject.convert(o)),a("/CIDToGIDMap /Identity"),a("/DW 1000"),a("/Subtype /CIDFontType2"),a("/CIDSystemInfo"),a("<<"),a("/Supplement 0"),a("/Registry (Adobe)"),a("/Ordering ("+n.encoding+")"),a(">>"),a(">>"),a("endobj"),n.objectNumber=s(),a("<<"),a("/Type /Font"),a("/Subtype /Type0"),a("/ToUnicode "+A+" 0 R"),a("/BaseFont /"+za(n.fontName)),a("/Encoding /"+n.encoding),a("/DescendantFonts ["+f+" 0 R]"),a(">>"),a("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,a=t.out,s=t.newObject,i=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var o=n.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var u=s();i({data:l,addLength1:!0,objectId:u}),a("endobj");var d=s();i({data:r(n.metadata.toUnicode),addLength1:!0,objectId:d}),a("endobj");var A=s();a("<<"),a("/Descent "+n.metadata.decender),a("/CapHeight "+n.metadata.capHeight),a("/StemV "+n.metadata.stemV),a("/Type /FontDescriptor"),a("/FontFile2 "+u+" 0 R"),a("/Flags 96"),a("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),a("/FontName /"+za(n.fontName)),a("/ItalicAngle "+n.metadata.italicAngle),a("/Ascent "+n.metadata.ascender),a(">>"),a("endobj"),n.objectNumber=s();for(var h=0;h<n.metadata.hmtx.widths.length;h++)n.metadata.hmtx.widths[h]=parseInt(n.metadata.hmtx.widths[h]*(1e3/n.metadata.head.unitsPerEm));a("<</Subtype/TrueType/Type/Font/ToUnicode "+d+" 0 R/BaseFont/"+za(n.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),a("endobj"),n.isAlreadyPutted=!0}}(t)}]);var a=function(e){var t,r=e.text||"",a=e.x,s=e.y,i=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,u=o.fonts,d=c,A="",h=0,f="",p=u[d].encoding;if("Identity-H"!==u[d].encoding)return{text:r,x:a,y:s,options:i,mutex:o};for(f=r,d=c,Array.isArray(r)&&(f=r[0]),h=0;h<f.length;h+=1)u[d].metadata.hasOwnProperty("cmap")&&(t=u[d].metadata.cmap.unicode.codeMap[f[h].charCodeAt(0)]),t||f[h].charCodeAt(0)<256&&u[d].metadata.hasOwnProperty("Unicode")?A+=f[h]:A+="";var m="";return parseInt(d.slice(1))<14||"WinAnsiEncoding"===p?m=l(A,d).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===p&&(m=n(A,u[d])),o.isHex=!0,{text:m,x:a,y:s,options:i,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var s=0;for(s=0;s<t.length;s+=1)Array.isArray(t[s])&&3===t[s].length?n.push([a(Object.assign({},r,{text:t[s][0]})).text,t[s][1],t[s][2]]):n.push(a(Object.assign({},r,{text:t[s]})).text);e.text=n}else e.text=a(Object.assign({},r,{text:t})).text}])}(Xa),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(Xa.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,r,a,s,i,o,l,c=t,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},h={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},f=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],p=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,g=0;this.__bidiEngine__={};var x=function(e){var t=e.charCodeAt(),n=t>>8,r=h[n];return void 0!==r?c[256*r+(255&t)]:252===n||253===n?"AL":p.test(n)?"L":8===n?"R":"N"},v=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=x(e.charAt(n))))return!1;if("R"===t)return!0}return!1},y=function(e,t,i,o){var l,c,u,d,A=t[o];switch(A){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"N":case"AN":break;case"EN":m&&(A="AN");break;case"AL":m=!0,A="R";break;case"WS":case"BN":A="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=i[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?A="N":m&&(c="AN"),A=c===l?c:"N";break;case"ES":A="EN"===(l=o>0?i[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===i[o-1]){A="EN";break}if(m){A="N";break}for(u=o+1,d=t.length;u<d&&"ET"===t[u];)u++;A=u<d&&"EN"===t[u]?"EN":"N";break;case"NSM":if(a&&!s){for(d=t.length,u=o+1;u<d&&"NSM"===t[u];)u++;if(u<d){var h=e[o],f=h>=1425&&h<=2303||64286===h;if(l=t[u],f&&("R"===l||"AL"===l)){A="R";break}}}A=o<1||"B"===(l=t[o-1])?"N":i[o-1];break;case"B":m=!1,n=!0,A=g;break;case"S":r=!0,A="N"}return A},b=function(e,t,n){var r=e.split("");return n&&w(r,n,{hiLevel:g}),r.reverse(),t&&t.reverse(),r.join("")},w=function(e,t,a){var s,i,o,l,c,h=-1,f=e.length,p=0,v=[],b=g?d:u,w=[];for(m=!1,n=!1,r=!1,i=0;i<f;i++)w[i]=x(e[i]);for(o=0;o<f;o++){if(c=p,v[o]=y(e,w,v,o),s=240&(p=b[c][A[v[o]]]),p&=15,t[o]=l=b[p][5],s>0)if(16===s){for(i=h;i<o;i++)t[i]=1;h=-1}else h=-1;if(b[p][6])-1===h&&(h=o);else if(h>-1){for(i=h;i<o;i++)t[i]=l;h=-1}"B"===w[o]&&(t[o]=0),a.hiLevel|=l}r&&function(e,t,n){for(var r=0;r<n;r++)if("S"===e[r]){t[r]=g;for(var a=r-1;a>=0&&"WS"===e[a];a--)t[a]=g}}(w,t,f)},N=function(e,t,r,a,s){if(!(s.hiLevel<e)){if(1===e&&1===g&&!n)return t.reverse(),void(r&&r.reverse());for(var i,o,l,c,u=t.length,d=0;d<u;){if(a[d]>=e){for(l=d+1;l<u&&a[l]>=e;)l++;for(c=d,o=l-1;c<o;c++,o--)i=t[c],t[c]=t[o],t[o]=i,r&&(i=r[c],r[c]=r[o],r[o]=i);d=l}d++}}},j=function(e,t,n){var r=e.split(""),a={hiLevel:g};return n||(n=[]),w(r,n,a),function(e,t,n){if(0!==n.hiLevel&&l)for(var r,a=0;a<e.length;a++)1===t[a]&&(r=f.indexOf(e[a]))>=0&&(e[a]=f[r+1])}(r,n,a),N(2,r,t,n,a),N(1,r,t,n,a),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===s&&(s=v(e)),void 0===o&&(o=v(e))}(e,t),a||!i||o)if(a&&i&&s^o)g=s?1:0,e=b(e,t,n);else if(!a&&i&&o)g=s?1:0,e=j(e,t,n),e=b(e,t);else if(!a||s||i||o){if(a&&!i&&s^o)e=b(e,t),s?(g=0,e=j(e,t,n)):(g=1,e=j(e,t,n),e=b(e,t));else if(a&&s&&!i&&o)g=1,e=j(e,t,n),e=b(e,t);else if(!a&&!i&&s^o){var r=l;s?(g=1,e=j(e,t,n),g=0,l=!1,e=j(e,t,n),l=r):(g=0,e=j(e,t,n),e=b(e,t),g=1,l=!1,e=j(e,t,n),l=r,e=b(e,t))}}else g=0,e=j(e,t,n);else g=s?1:0,e=j(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(a=e.isInputVisual,i=e.isOutputVisual,s=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var r=e.options||{};e.mutex,r.lang;var a=[];if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var s=0;for(a=[],s=0;s<t.length;s+=1)"[object Array]"===Object.prototype.toString.call(t[s])?a.push([n.doBidiReorder(t[s][0]),t[s][1],t[s][2]]):a.push([n.doBidiReorder(t[s])]);e.text=a}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(Xa),Xa.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new ji(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new zi(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Ci(this.contents),this.head=new Si(this),this.name=new Li(this),this.cmap=new Fi(this),this.toUnicode={},this.hhea=new _i(this),this.maxp=new Ui(this),this.hmtx=new Pi(this),this.post=new Ti(this),this.os2=new Ii(this),this.loca=new Hi(this),this.glyf=new Oi(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,r,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,r,a;for(a=[],t=0,n=(r=this.bbox).length;t<n;t++)e=r[t],a.push(Math.round(e*this.scaleFactor));return a}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),32768&(t=r>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(a=this.familyClass)||2===a||3===a||4===a||5===a||7===a,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var r,a,s,i;for(s=0,a=0,i=(e=""+e).length;0<=i?a<i:a>i;a=0<=i?++a:--a)r=e.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return s*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var Ni,ji=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,r,a,s,i,o;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^a)+65536*(255^s)+256*(255^i)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*a+65536*s+256*i+o},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,r,a;for(a=[],n=0,r=e.length;n<r;n++)t=e[n],a.push(this.writeByte(t));return a},e}(),Ci=function(){var e;function t(e){var t,n,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,r,a,s,i,o,l,c,u,d,A,h,f;for(f in A=Object.keys(t).length,o=Math.log(2),u=16*Math.floor(Math.log(A)/o),s=Math.floor(u/o),c=16*A-u,(r=new ji).writeInt(this.scalarType),r.writeShort(A),r.writeShort(u),r.writeShort(s),r.writeShort(c),a=16*A,l=r.pos+a,i=null,h=[],t)for(d=t[f],r.writeString(f),r.writeInt(e(d)),r.writeInt(l),r.writeInt(d.length),h=h.concat(d),"head"===f&&(i=l),l+=d.length;l%4;)h.push(0),l++;return r.write(h),n=2981146554-e(r.data),r.pos=i+8,r.writeUInt32(n),r.data},e=function(e){var t,n,r,a;for(e=Ri.call(e);e.length%4;)e.push(0);for(r=new ji(e),n=0,t=0,a=e.length;t<a;t=t+=4)n+=r.readUInt32();return 4294967295&n},t}(),Bi={}.hasOwnProperty,ki=function(e,t){for(var n in t)Bi.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Ni=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Si=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new ji).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),Ei=function(){function e(e,t){var n,r,a,s,i,o,l,c,u,d,A,h,f,p,m,g,x;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(A=e.readUInt16(),d=A/2,e.pos+=6,a=function(){var t,n;for(n=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,f=function(){var t,n;for(n=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)n.push(e.readUInt16());return n}(),r=(this.length-e.pos+this.offset)/2,i=function(){var t,n;for(n=[],o=t=0;0<=r?t<r:t>r;o=0<=r?++t:--t)n.push(e.readUInt16());return n}(),o=m=0,x=a.length;m<x;o=++m)for(p=a[o],n=g=h=f[o];h<=p?g<=p:g>=p;n=h<=p?++g:--g)0===c[o]?s=n+l[o]:0!==(s=i[c[o]/2+(n-h)-(d-o)]||0)&&(s+=l[o]),this.codeMap[n]=65535&s}e.pos=u}return e.encode=function(e,t){var n,r,a,s,i,o,l,c,u,d,A,h,f,p,m,g,x,v,y,b,w,N,j,C,B,k,S,E,F,_,I,T,D,L,U,P,R,O,M,Q,H,z,W,V,K,G;switch(E=new ji,s=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(f=0,p=function(){var e=[];for(h=0;h<256;++h)e.push(0);return e}(),g={0:0},a={},F=0,D=s.length;F<D;F++)null==g[W=e[r=s[F]]]&&(g[W]=++f),a[r]={old:e[r],new:g[e[r]]},p[r]=g[e[r]];return E.writeUInt16(1),E.writeUInt16(0),E.writeUInt32(12),E.writeUInt16(0),E.writeUInt16(262),E.writeUInt16(0),E.write(p),{charMap:a,subtable:E.data,maxGlyphID:f+1};case"unicode":for(k=[],u=[],x=0,g={},n={},m=l=null,_=0,L=s.length;_<L;_++)null==g[y=e[r=s[_]]]&&(g[y]=++x),n[r]={old:y,new:g[y]},i=g[y]-r,null!=m&&i===l||(m&&u.push(m),k.push(r),l=i),m=r;for(m&&u.push(m),u.push(65535),k.push(65535),C=2*(j=k.length),N=2*Math.pow(Math.log(j)/Math.LN2,2),d=Math.log(N/2)/Math.LN2,w=2*j-N,o=[],b=[],A=[],h=I=0,U=k.length;I<U;h=++I){if(B=k[h],c=u[h],65535===B){o.push(0),b.push(0);break}if(B-(S=n[B].new)>=32768)for(o.push(0),b.push(2*(A.length+j-h)),r=T=B;B<=c?T<=c:T>=c;r=B<=c?++T:--T)A.push(n[r].new);else o.push(S-B),b.push(0)}for(E.writeUInt16(3),E.writeUInt16(1),E.writeUInt32(12),E.writeUInt16(4),E.writeUInt16(16+8*j+2*A.length),E.writeUInt16(0),E.writeUInt16(C),E.writeUInt16(N),E.writeUInt16(d),E.writeUInt16(w),H=0,P=u.length;H<P;H++)r=u[H],E.writeUInt16(r);for(E.writeUInt16(0),z=0,R=k.length;z<R;z++)r=k[z],E.writeUInt16(r);for(V=0,O=o.length;V<O;V++)i=o[V],E.writeUInt16(i);for(K=0,M=b.length;K<M;K++)v=b[K],E.writeUInt16(v);for(G=0,Q=A.length;G<Q;G++)f=A[G],E.writeUInt16(f);return{charMap:n,subtable:E.data,maxGlyphID:x+1}}},e}(),Fi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new Ei(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,r;return null==t&&(t="macroman"),n=Ei.encode(e,t),(r=new ji).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),_i=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),Ii=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),Ti=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,r;for(r=[],a=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;a=0<=n?++t:--t)r.push(e.readUInt32());return r}.call(this)}},e}(),Di=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Li=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,r,a,s,i,o,l,c,u,d;for(e.pos=this.offset,e.readShort(),t=e.readShort(),i=e.readShort(),n=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+i+e.readShort()});for(o={},a=c=0,u=n.length;c<u;a=++c)r=n[a],e.pos=r.offset,l=e.readString(r.length),s=new Di(l,r),null==o[d=r.nameID]&&(o[d]=[]),o[r.nameID].push(s);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(ja){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),Ui=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),Pi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,r,a,s,i,o;for(e.pos=this.offset,this.metrics=[],t=0,i=this.file.hhea.numberOfMetrics;0<=i?t<i:t>i;t=0<=i?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,a;for(a=[],t=n=0;0<=r?n<r:n>r;t=0<=r?++n:--n)a.push(e.readInt16());return a}(),this.widths=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.metrics).length;e<t;e++)a=n[e],r.push(a.advance);return r}.call(this),n=this.widths[this.widths.length-1],o=[],t=s=0;0<=r?s<r:s>r;t=0<=r?++s:--s)o.push(this.widths.push(n));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),Ri=[].slice,Oi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,r,a,s,i,o,l,c,u;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,n=a.indexOf(e),0===(r=a.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,s=(i=new ji(t.read(r))).readShort(),l=i.readShort(),u=i.readShort(),o=i.readShort(),c=i.readShort(),this.cache[e]=-1===s?new Qi(i,l,u,o,c):new Mi(i,s,l,u,o,c),this.cache[e]))},e.prototype.encode=function(e,t,n){var r,a,s,i,o;for(s=[],a=[],i=0,o=t.length;i<o;i++)r=e[t[i]],a.push(s.length),r&&(s=s.concat(r.encode(n)));return a.push(s.length),{table:s,offsets:a}},e}(),Mi=function(){function e(e,t,n,r,a,s){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=a,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Qi=function(){function e(e,t,n,r,a){var s,i;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;i=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&i;)s.pos+=1&i?4:2,128&i?s.pos+=8:64&i?s.pos+=4:8&i&&(s.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new ji(Ri.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),Hi=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ki(e,Ni),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=4)r.push(e.readUInt32());return r}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,a=0,s=0;s<n.length;++s)if(n[s]=r,a<t.length&&t[a]==s){++a,n[s]=r;var i=this.offsets[s],o=this.offsets[s+1]-i;o>0&&(r+=o)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),zi=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,r,a;for(t in r=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[t],e[t]=r[n];return e},e.prototype.glyphsFor=function(e){var t,n,r,a,s,i,o;for(r={},s=0,i=e.length;s<i;s++)r[a=e[s]]=this.font.glyf.glyphFor(a);for(a in t=[],r)(null!=(n=r[a])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(a in o=this.glyphsFor(t))n=o[a],r[a]=n;return r},e.prototype.encode=function(e,t){var n,r,a,s,i,o,l,c,u,d,A,h,f,p,m;for(r in n=Fi.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),A={0:0},m=n.charMap)A[(o=m[r]).old]=o.new;for(h in d=n.maxGlyphID,s)h in A||(A[h]=d++);return c=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(A),u=Object.keys(c).sort(function(e,t){return e-t}),f=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)i=u[e],n.push(c[i]);return n}(),a=this.font.glyf.encode(s,f,A),l=this.font.loca.encode(a.offsets,f),p={cmap:this.font.cmap.raw(),glyf:a.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},e}();Xa.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var r,a,s,i;if(Array.isArray(n))return"["+function(){var e,a,s;for(s=[],e=0,a=n.length;e<a;e++)r=n[e],s.push(t.convert(r));return s}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(a in s=["<<"],n)i=n[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join("\n")}return""+n},t}()},7119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(8345)},7307:(e,t,n)=>{var r;self,r=function(e,t){return function(){var r={"./src/plugin/hyperlinks.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/core-js/modules/web.dom-collections.for-each.js"),n("./node_modules/core-js/modules/es.string.link.js");var r=n("./src/worker.js"),a=n("./src/utils.js"),s=[],i={toContainer:r.default.prototype.toContainer,toPdf:r.default.prototype.toPdf};r.default.prototype.toContainer=function(){return i.toContainer.call(this).then(function(){if(this.opt.enableLinks){var e=this.prop.container,t=e.querySelectorAll("a"),n=(0,a.unitConvert)(e.getBoundingClientRect(),this.prop.pageSize.k);s=[],Array.prototype.forEach.call(t,function(e){for(var t=e.getClientRects(),r=0;r<t.length;r++){var i=(0,a.unitConvert)(t[r],this.prop.pageSize.k);i.left-=n.left,i.top-=n.top;var o=Math.floor(i.top/this.prop.pageSize.inner.height)+1,l=this.opt.margin[0]+i.top%this.prop.pageSize.inner.height,c=this.opt.margin[1]+i.left;s.push({page:o,top:l,left:c,clientRect:i,link:e})}},this)}})},r.default.prototype.toPdf=function(){return i.toPdf.call(this).then(function(){if(this.opt.enableLinks){s.forEach(function(e){this.prop.pdf.setPage(e.page),this.prop.pdf.link(e.left,e.top,e.clientRect.width,e.clientRect.height,{url:e.link.href})},this);var e=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(e)}})}},"./src/plugin/jspdf-plugin.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/core-js/modules/es.symbol.js"),n("./node_modules/core-js/modules/es.symbol.description.js"),n("./node_modules/core-js/modules/es.object.to-string.js"),n("./node_modules/core-js/modules/es.symbol.iterator.js"),n("./node_modules/core-js/modules/es.array.iterator.js"),n("./node_modules/core-js/modules/es.string.iterator.js"),n("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("jspdf");function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}r.jsPDF.getPageSize=function(e,t,n){if("object"===a(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var s=(""+n).toLowerCase(),i={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":var o=1;break;case"mm":o=72/25.4;break;case"cm":o=72/2.54;break;case"in":o=72;break;case"px":o=.75;break;case"pc":case"em":o=12;break;case"ex":o=6;break;default:throw"Invalid unit: "+t}if(i.hasOwnProperty(s))var l=i[s][1]/o,c=i[s][0]/o;else try{l=n[1],c=n[0]}catch(d){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e){if(e="p",c>l){var u=c;c=l,l=u}}else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(u=c,c=l,l=u)}return{width:c,height:l,unit:t,k:o}},t.default=r.jsPDF},"./src/plugin/pagebreaks.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/core-js/modules/es.array.concat.js"),n("./node_modules/core-js/modules/es.array.slice.js"),n("./node_modules/core-js/modules/es.array.join.js"),n("./node_modules/core-js/modules/web.dom-collections.for-each.js"),n("./node_modules/core-js/modules/es.object.keys.js");var r=n("./src/worker.js"),a=n("./src/utils.js"),s={toContainer:r.default.prototype.toContainer};r.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},r.default.prototype.toContainer=function(){return s.toContainer.call(this).then(function(){var e=this.prop.container,t=this.prop.pageSize.inner.px.height,n=[].concat(this.opt.pagebreak.mode),r={avoidAll:-1!==n.indexOf("avoid-all"),css:-1!==n.indexOf("css"),legacy:-1!==n.indexOf("legacy")},s={},i=this;["before","after","avoid"].forEach(function(t){var n=r.avoidAll&&"avoid"===t;s[t]=n?[]:[].concat(i.opt.pagebreak[t]||[]),s[t].length>0&&(s[t]=Array.prototype.slice.call(e.querySelectorAll(s[t].join(", "))))});var o=e.querySelectorAll(".html2pdf__page-break");o=Array.prototype.slice.call(o);var l=e.querySelectorAll("*");Array.prototype.forEach.call(l,function(e){var n={before:!1,after:r.legacy&&-1!==o.indexOf(e),avoid:r.avoidAll};if(r.css){var i=window.getComputedStyle(e),l=["always","page","left","right"];n={before:n.before||-1!==l.indexOf(i.breakBefore||i.pageBreakBefore),after:n.after||-1!==l.indexOf(i.breakAfter||i.pageBreakAfter),avoid:n.avoid||-1!==["avoid","avoid-page"].indexOf(i.breakInside||i.pageBreakInside)}}Object.keys(n).forEach(function(t){n[t]=n[t]||-1!==s[t].indexOf(e)});var c=e.getBoundingClientRect();if(n.avoid&&!n.before){var u=Math.floor(c.top/t),d=Math.floor(c.bottom/t),A=Math.abs(c.bottom-c.top)/t;d!==u&&A<=1&&(n.before=!0)}if(n.before){var h=(0,a.createElement)("div",{style:{display:"block",height:t-c.top%t+"px"}});e.parentNode.insertBefore(h,e)}n.after&&(h=(0,a.createElement)("div",{style:{display:"block",height:t-c.bottom%t+"px"}}),e.parentNode.insertBefore(h,e.nextSibling))})})}},"./src/utils.js":function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.r(t),n.d(t,{objType:function(){return a},createElement:function(){return s},cloneNode:function(){return i},unitConvert:function(){return o},toPx:function(){return l}}),n("./node_modules/core-js/modules/es.number.constructor.js"),n("./node_modules/core-js/modules/es.symbol.js"),n("./node_modules/core-js/modules/es.symbol.description.js"),n("./node_modules/core-js/modules/es.object.to-string.js"),n("./node_modules/core-js/modules/es.symbol.iterator.js"),n("./node_modules/core-js/modules/es.array.iterator.js"),n("./node_modules/core-js/modules/es.string.iterator.js"),n("./node_modules/core-js/modules/web.dom-collections.iterator.js");var a=function(e){var t=r(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},s=function(e,t){var n=document.createElement(e);if(t.className&&(n.className=t.className),t.innerHTML){n.innerHTML=t.innerHTML;for(var r=n.getElementsByTagName("script"),a=r.length;a-- >0;null)r[a].parentNode.removeChild(r[a])}for(var s in t.style)n.style[s]=t.style[s];return n},i=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),a=t.firstChild;a;a=a.nextSibling)!0!==n&&1===a.nodeType&&"SCRIPT"===a.nodeName||r.appendChild(e(a,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft},!0)),r},o=function(e,t){if("number"===a(e))return 72*e/96/t;var n={};for(var r in e)n[r]=72*e[r]/96/t;return n},l=function(e,t){return Math.floor(e*t/72*96)}},"./src/worker.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/core-js/modules/es.object.assign.js"),n("./node_modules/core-js/modules/es.array.map.js"),n("./node_modules/core-js/modules/es.object.keys.js"),n("./node_modules/core-js/modules/es.array.concat.js"),n("./node_modules/core-js/modules/es.object.to-string.js"),n("./node_modules/core-js/modules/es.regexp.to-string.js"),n("./node_modules/core-js/modules/es.function.name.js"),n("./node_modules/core-js/modules/web.dom-collections.for-each.js");var r=n("jspdf"),a=n("html2canvas"),s=n("./src/utils.js"),i=n("./node_modules/es6-promise/dist/es6-promise.js"),o=n.n(i)().Promise,l=function e(t){var n=Object.assign(e.convert(o.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(o.resolve(),n);return r=(r=r.setProgress(1,e,1,[e])).set(t)};(l.prototype=Object.create(o.prototype)).constructor=l,l.convert=function(e,t){return e.__proto__=t||l.prototype,e},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},l.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch((0,s.objType)(e)){case"string":return"string";case"element":return e.nodeName.toLowerCase&&"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e),t){case"string":return this.set({src:(0,s.createElement)("div",{innerHTML:e})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},l.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},t={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};e.opacity=0;var n=(0,s.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,s.createElement)("div",{className:"html2pdf__overlay",style:e}),this.prop.container=(0,s.createElement)("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(n),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)})},l.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(function(){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,a(this.prop.container,e)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},l.prototype.toPdf=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e=this.prop.canvas,t=this.opt,n=e.height,a=Math.floor(e.width*this.prop.pageSize.inner.ratio),s=Math.ceil(n/a),i=this.prop.pageSize.inner.height,o=document.createElement("canvas"),l=o.getContext("2d");o.width=e.width,o.height=a,this.prop.pdf=this.prop.pdf||new r.jsPDF(t.jsPDF);for(var c=0;c<s;c++){c===s-1&&n%a!==0&&(o.height=n%a,i=o.height*this.prop.pageSize.inner.width/o.width);var u=o.width,d=o.height;l.fillStyle="white",l.fillRect(0,0,u,d),l.drawImage(e,0,c*a,u,d,0,0,u,d),c&&this.prop.pdf.addPage();var A=o.toDataURL("image/"+t.image.type,t.image.quality);this.prop.pdf.addImage(A,t.image.type,t.margin[1],t.margin[0],this.prop.pageSize.inner.width,i)}})},l.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},l.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},l.prototype.outputImg=function(e,t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},l.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.set=function(e){if("object"!==(0,s.objType)(e))return this;var t=Object.keys(e||{}).map(function(t){switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return t in l.template.prop?function(){this.prop[t]=e[t]}:function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},l.prototype.get=function(e,t){return this.then(function(){var n=e in l.template.prop?this.prop[e]:this.opt[e];return t?t(n):n})},l.prototype.setMargin=function(e){return this.then(function(){switch((0,s.objType)(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},l.prototype.setPageSize=function(e){return this.then(function(){(e=e||r.jsPDF.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:(0,s.toPx)(e.inner.width,e.k),height:(0,s.toPx)(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},l.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},l.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,function(e,t){return n.updateProgress(null,null,1,[e]),o.prototype.then.call(this,function(t){return n.updateProgress(null,e),t}).then(e,t).then(function(e){return n.updateProgress(1),e})})},l.prototype.thenCore=function(e,t,n){n=n||o.prototype.then;var r=this;e&&(e=e.bind(r)),t&&(t=t.bind(r));var a=-1!==o.toString().indexOf("[native code]")&&"Promise"===o.name?r:l.convert(Object.assign({},r),o.prototype),s=n.call(a,e,t);return l.convert(s,r.__proto__)},l.prototype.thenExternal=function(e,t){return o.prototype.then.call(this,e,t)},l.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},l.prototype.catch=function(e){e&&(e=e.bind(this));var t=o.prototype.catch.call(this,e);return l.convert(t,this)},l.prototype.catchExternal=function(e){return o.prototype.catch.call(this,e)},l.prototype.error=function(e){return this.then(function(){throw new Error(e)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,t.default=l},"./node_modules/core-js/internals/a-function.js":function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"./node_modules/core-js/internals/a-possible-prototype.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"./node_modules/core-js/internals/add-to-unscopables.js":function(e,t,n){var r=n("./node_modules/core-js/internals/well-known-symbol.js"),a=n("./node_modules/core-js/internals/object-create.js"),s=n("./node_modules/core-js/internals/object-define-property.js"),i=r("unscopables"),o=Array.prototype;void 0==o[i]&&s.f(o,i,{configurable:!0,value:a(null)}),e.exports=function(e){o[i][e]=!0}},"./node_modules/core-js/internals/an-object.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},"./node_modules/core-js/internals/array-for-each.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/array-iteration.js").forEach,a=n("./node_modules/core-js/internals/array-method-is-strict.js")("forEach");e.exports=a?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-indexed-object.js"),a=n("./node_modules/core-js/internals/to-length.js"),s=n("./node_modules/core-js/internals/to-absolute-index.js"),i=function(e){return function(t,n,i){var o,l=r(t),c=a(l.length),u=s(i,c);if(e&&n!=n){for(;c>u;)if((o=l[u++])!=o)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},"./node_modules/core-js/internals/array-iteration.js":function(e,t,n){var r=n("./node_modules/core-js/internals/function-bind-context.js"),a=n("./node_modules/core-js/internals/indexed-object.js"),s=n("./node_modules/core-js/internals/to-object.js"),i=n("./node_modules/core-js/internals/to-length.js"),o=n("./node_modules/core-js/internals/array-species-create.js"),l=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,u=4==e,d=6==e,A=7==e,h=5==e||d;return function(f,p,m,g){for(var x,v,y=s(f),b=a(y),w=r(p,m,3),N=i(b.length),j=0,C=g||o,B=t?C(f,N):n||A?C(f,0):void 0;N>j;j++)if((h||j in b)&&(v=w(x=b[j],j,y),e))if(t)B[j]=v;else if(v)switch(e){case 3:return!0;case 5:return x;case 6:return j;case 2:l.call(B,x)}else switch(e){case 4:return!1;case 7:l.call(B,x)}return d?-1:c||u?u:B}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js"),a=n("./node_modules/core-js/internals/well-known-symbol.js"),s=n("./node_modules/core-js/internals/engine-v8-version.js"),i=a("species");e.exports=function(e){return s>=51||!r(function(){var t=[];return(t.constructor={})[i]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},"./node_modules/core-js/internals/array-method-is-strict.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/fails.js");e.exports=function(e,t){var n=[][e];return!!n&&r(function(){n.call(null,t||function(){throw 1},1)})}},"./node_modules/core-js/internals/array-species-constructor.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js"),a=n("./node_modules/core-js/internals/is-array.js"),s=n("./node_modules/core-js/internals/well-known-symbol.js")("species");e.exports=function(e){var t;return a(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!a(t.prototype)?r(t)&&null===(t=t[s])&&(t=void 0):t=void 0),void 0===t?Array:t}},"./node_modules/core-js/internals/array-species-create.js":function(e,t,n){var r=n("./node_modules/core-js/internals/array-species-constructor.js");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},"./node_modules/core-js/internals/classof-raw.js":function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-string-tag-support.js"),a=n("./node_modules/core-js/internals/classof-raw.js"),s=n("./node_modules/core-js/internals/well-known-symbol.js")("toStringTag"),i="Arguments"==a(function(){return arguments}());e.exports=r?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),s))?n:i?a(t):"Object"==(r=a(t))&&"function"==typeof t.callee?"Arguments":r}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(e,t,n){var r=n("./node_modules/core-js/internals/has.js"),a=n("./node_modules/core-js/internals/own-keys.js"),s=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),i=n("./node_modules/core-js/internals/object-define-property.js");e.exports=function(e,t){for(var n=a(t),o=i.f,l=s.f,c=0;c<n.length;c++){var u=n[c];r(e,u)||o(e,u,l(t,u))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js");e.exports=!r(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},"./node_modules/core-js/internals/create-html.js":function(e,t,n){var r=n("./node_modules/core-js/internals/require-object-coercible.js"),a=n("./node_modules/core-js/internals/to-string.js"),s=/"/g;e.exports=function(e,t,n,i){var o=a(r(e)),l="<"+t;return""!==n&&(l+=" "+n+'="'+a(i).replace(s,"&quot;")+'"'),l+">"+o+"</"+t+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,a=n("./node_modules/core-js/internals/object-create.js"),s=n("./node_modules/core-js/internals/create-property-descriptor.js"),i=n("./node_modules/core-js/internals/set-to-string-tag.js"),o=n("./node_modules/core-js/internals/iterators.js"),l=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=a(r,{next:s(1,n)}),i(e,c,!1,!0),o[c]=l,e}},"./node_modules/core-js/internals/create-non-enumerable-property.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),a=n("./node_modules/core-js/internals/object-define-property.js"),s=n("./node_modules/core-js/internals/create-property-descriptor.js");e.exports=r?function(e,t,n){return a.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},"./node_modules/core-js/internals/create-property-descriptor.js":function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"./node_modules/core-js/internals/create-property.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/to-property-key.js"),a=n("./node_modules/core-js/internals/object-define-property.js"),s=n("./node_modules/core-js/internals/create-property-descriptor.js");e.exports=function(e,t,n){var i=r(t);i in e?a.f(e,i,s(0,n)):e[i]=n}},"./node_modules/core-js/internals/define-iterator.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),a=n("./node_modules/core-js/internals/create-iterator-constructor.js"),s=n("./node_modules/core-js/internals/object-get-prototype-of.js"),i=n("./node_modules/core-js/internals/object-set-prototype-of.js"),o=n("./node_modules/core-js/internals/set-to-string-tag.js"),l=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),c=n("./node_modules/core-js/internals/redefine.js"),u=n("./node_modules/core-js/internals/well-known-symbol.js"),d=n("./node_modules/core-js/internals/is-pure.js"),A=n("./node_modules/core-js/internals/iterators.js"),h=n("./node_modules/core-js/internals/iterators-core.js"),f=h.IteratorPrototype,p=h.BUGGY_SAFARI_ITERATORS,m=u("iterator"),g="keys",x="values",v="entries",y=function(){return this};e.exports=function(e,t,n,u,h,b,w){a(n,t,u);var N,j,C,B=function(e){if(e===h&&_)return _;if(!p&&e in E)return E[e];switch(e){case g:case x:case v:return function(){return new n(this,e)}}return function(){return new n(this)}},k=t+" Iterator",S=!1,E=e.prototype,F=E[m]||E["@@iterator"]||h&&E[h],_=!p&&F||B(h),I="Array"==t&&E.entries||F;if(I&&(N=s(I.call(new e)),f!==Object.prototype&&N.next&&(d||s(N)===f||(i?i(N,f):"function"!=typeof N[m]&&l(N,m,y)),o(N,k,!0,!0),d&&(A[k]=y))),h==x&&F&&F.name!==x&&(S=!0,_=function(){return F.call(this)}),d&&!w||E[m]===_||l(E,m,_),A[t]=_,h)if(j={values:B(x),keys:b?_:B(g),entries:B(v)},w)for(C in j)(p||S||!(C in E))&&c(E,C,j[C]);else r({target:t,proto:!0,forced:p||S},j);return j}},"./node_modules/core-js/internals/define-well-known-symbol.js":function(e,t,n){var r=n("./node_modules/core-js/internals/path.js"),a=n("./node_modules/core-js/internals/has.js"),s=n("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),i=n("./node_modules/core-js/internals/object-define-property.js").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});a(t,e)||i(t,e,{value:s.f(e)})}},"./node_modules/core-js/internals/descriptors.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js");e.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},"./node_modules/core-js/internals/document-create-element.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),a=n("./node_modules/core-js/internals/is-object.js"),s=r.document,i=a(s)&&a(s.createElement);e.exports=function(e){return i?s.createElement(e):{}}},"./node_modules/core-js/internals/dom-iterables.js":function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":function(e,t,n){var r=n("./node_modules/core-js/internals/get-built-in.js");e.exports=r("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":function(e,t,n){var r,a,s=n("./node_modules/core-js/internals/global.js"),i=n("./node_modules/core-js/internals/engine-user-agent.js"),o=s.process,l=s.Deno,c=o&&o.versions||l&&l.version,u=c&&c.v8;u?a=(r=u.split("."))[0]<4?1:r[0]+r[1]:i&&(!(r=i.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=i.match(/Chrome\/(\d+)/))&&(a=r[1]),e.exports=a&&+a},"./node_modules/core-js/internals/enum-bug-keys.js":function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),a=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,s=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),i=n("./node_modules/core-js/internals/redefine.js"),o=n("./node_modules/core-js/internals/set-global.js"),l=n("./node_modules/core-js/internals/copy-constructor-properties.js"),c=n("./node_modules/core-js/internals/is-forced.js");e.exports=function(e,t){var n,u,d,A,h,f=e.target,p=e.global,m=e.stat;if(n=p?r:m?r[f]||o(f,{}):(r[f]||{}).prototype)for(u in t){if(A=t[u],d=e.noTargetGet?(h=a(n,u))&&h.value:n[u],!c(p?u:f+(m?".":"#")+u,e.forced)&&void 0!==d){if(typeof A===typeof d)continue;l(A,d)}(e.sham||d&&d.sham)&&s(A,"sham",!0),i(n,u,A,e)}}},"./node_modules/core-js/internals/fails.js":function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"./node_modules/core-js/internals/function-bind-context.js":function(e,t,n){var r=n("./node_modules/core-js/internals/a-function.js");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js");e.exports=function(e,t){return arguments.length<2?"function"==typeof(n=r[e])?n:void 0:r[e]&&r[e][t];var n}},"./node_modules/core-js/internals/global.js":function(e){var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-object.js"),a={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return a.call(r(e),t)}},"./node_modules/core-js/internals/hidden-keys.js":function(e){e.exports={}},"./node_modules/core-js/internals/html.js":function(e,t,n){var r=n("./node_modules/core-js/internals/get-built-in.js");e.exports=r("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),a=n("./node_modules/core-js/internals/fails.js"),s=n("./node_modules/core-js/internals/document-create-element.js");e.exports=!r&&!a(function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},"./node_modules/core-js/internals/indexed-object.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js"),a=n("./node_modules/core-js/internals/classof-raw.js"),s="".split;e.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==a(e)?s.call(e,""):Object(e)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js"),a=n("./node_modules/core-js/internals/object-set-prototype-of.js");e.exports=function(e,t,n){var s,i;return a&&"function"==typeof(s=t.constructor)&&s!==n&&r(i=s.prototype)&&i!==n.prototype&&a(e,i),e}},"./node_modules/core-js/internals/inspect-source.js":function(e,t,n){var r=n("./node_modules/core-js/internals/shared-store.js"),a=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return a.call(e)}),e.exports=r.inspectSource},"./node_modules/core-js/internals/internal-state.js":function(e,t,n){var r,a,s,i=n("./node_modules/core-js/internals/native-weak-map.js"),o=n("./node_modules/core-js/internals/global.js"),l=n("./node_modules/core-js/internals/is-object.js"),c=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),u=n("./node_modules/core-js/internals/has.js"),d=n("./node_modules/core-js/internals/shared-store.js"),A=n("./node_modules/core-js/internals/shared-key.js"),h=n("./node_modules/core-js/internals/hidden-keys.js"),f="Object already initialized",p=o.WeakMap;if(i||d.state){var m=d.state||(d.state=new p),g=m.get,x=m.has,v=m.set;r=function(e,t){if(x.call(m,e))throw new TypeError(f);return t.facade=e,v.call(m,e,t),t},a=function(e){return g.call(m,e)||{}},s=function(e){return x.call(m,e)}}else{var y=A("state");h[y]=!0,r=function(e,t){if(u(e,y))throw new TypeError(f);return t.facade=e,c(e,y,t),t},a=function(e){return u(e,y)?e[y]:{}},s=function(e){return u(e,y)}}e.exports={set:r,get:a,has:s,enforce:function(e){return s(e)?a(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=a(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},"./node_modules/core-js/internals/is-array.js":function(e,t,n){var r=n("./node_modules/core-js/internals/classof-raw.js");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"./node_modules/core-js/internals/is-forced.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js"),a=/#|\.prototype\./,s=function(e,t){var n=o[i(e)];return n==c||n!=l&&("function"==typeof t?r(t):!!t)},i=s.normalize=function(e){return String(e).replace(a,".").toLowerCase()},o=s.data={},l=s.NATIVE="N",c=s.POLYFILL="P";e.exports=s},"./node_modules/core-js/internals/is-object.js":function(e){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},"./node_modules/core-js/internals/is-pure.js":function(e){e.exports=!1},"./node_modules/core-js/internals/is-symbol.js":function(e,t,n){var r=n("./node_modules/core-js/internals/get-built-in.js"),a=n("./node_modules/core-js/internals/use-symbol-as-uid.js");e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return"function"==typeof t&&Object(e)instanceof t}},"./node_modules/core-js/internals/iterators-core.js":function(e,t,n){"use strict";var r,a,s,i=n("./node_modules/core-js/internals/fails.js"),o=n("./node_modules/core-js/internals/object-get-prototype-of.js"),l=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),c=n("./node_modules/core-js/internals/has.js"),u=n("./node_modules/core-js/internals/well-known-symbol.js"),d=n("./node_modules/core-js/internals/is-pure.js"),A=u("iterator"),h=!1;[].keys&&("next"in(s=[].keys())?(a=o(o(s)))!==Object.prototype&&(r=a):h=!0);var f=void 0==r||i(function(){var e={};return r[A].call(e)!==e});f&&(r={}),d&&!f||c(r,A)||l(r,A,function(){return this}),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},"./node_modules/core-js/internals/iterators.js":function(e){e.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(e,t,n){var r=n("./node_modules/core-js/internals/engine-v8-version.js"),a=n("./node_modules/core-js/internals/fails.js");e.exports=!!Object.getOwnPropertySymbols&&!a(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41})},"./node_modules/core-js/internals/native-weak-map.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),a=n("./node_modules/core-js/internals/inspect-source.js"),s=r.WeakMap;e.exports="function"===typeof s&&/native code/.test(a(s))},"./node_modules/core-js/internals/object-assign.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/descriptors.js"),a=n("./node_modules/core-js/internals/fails.js"),s=n("./node_modules/core-js/internals/object-keys.js"),i=n("./node_modules/core-js/internals/object-get-own-property-symbols.js"),o=n("./node_modules/core-js/internals/object-property-is-enumerable.js"),l=n("./node_modules/core-js/internals/to-object.js"),c=n("./node_modules/core-js/internals/indexed-object.js"),u=Object.assign,d=Object.defineProperty;e.exports=!u||a(function(){if(r&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||s(u({},t)).join("")!=a})?function(e,t){for(var n=l(e),a=arguments.length,u=1,d=i.f,A=o.f;a>u;)for(var h,f=c(arguments[u++]),p=d?s(f).concat(d(f)):s(f),m=p.length,g=0;m>g;)h=p[g++],r&&!A.call(f,h)||(n[h]=f[h]);return n}:u},"./node_modules/core-js/internals/object-create.js":function(e,t,n){var r,a=n("./node_modules/core-js/internals/an-object.js"),s=n("./node_modules/core-js/internals/object-define-properties.js"),i=n("./node_modules/core-js/internals/enum-bug-keys.js"),o=n("./node_modules/core-js/internals/hidden-keys.js"),l=n("./node_modules/core-js/internals/html.js"),c=n("./node_modules/core-js/internals/document-create-element.js"),u=n("./node_modules/core-js/internals/shared-key.js"),d="prototype",A="script",h=u("IE_PROTO"),f=function(){},p=function(e){return"<"+A+">"+e+"</"+A+">"},m=function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}g=document.domain&&r?m(r):function(){var e,t=c("iframe"),n="java"+A+":";if(t.style)return t.style.display="none",l.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F}()||m(r);for(var e=i.length;e--;)delete g[d][i[e]];return g()};o[h]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f[d]=a(e),n=new f,f[d]=null,n[h]=e):n=g(),void 0===t?n:s(n,t)}},"./node_modules/core-js/internals/object-define-properties.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),a=n("./node_modules/core-js/internals/object-define-property.js"),s=n("./node_modules/core-js/internals/an-object.js"),i=n("./node_modules/core-js/internals/object-keys.js");e.exports=r?Object.defineProperties:function(e,t){s(e);for(var n,r=i(t),o=r.length,l=0;o>l;)a.f(e,n=r[l++],t[n]);return e}},"./node_modules/core-js/internals/object-define-property.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),a=n("./node_modules/core-js/internals/ie8-dom-define.js"),s=n("./node_modules/core-js/internals/an-object.js"),i=n("./node_modules/core-js/internals/to-property-key.js"),o=Object.defineProperty;t.f=r?o:function(e,t,n){if(s(e),t=i(t),s(n),a)try{return o(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),a=n("./node_modules/core-js/internals/object-property-is-enumerable.js"),s=n("./node_modules/core-js/internals/create-property-descriptor.js"),i=n("./node_modules/core-js/internals/to-indexed-object.js"),o=n("./node_modules/core-js/internals/to-property-key.js"),l=n("./node_modules/core-js/internals/has.js"),c=n("./node_modules/core-js/internals/ie8-dom-define.js"),u=Object.getOwnPropertyDescriptor;t.f=r?u:function(e,t){if(e=i(e),t=o(t),c)try{return u(e,t)}catch(n){}if(l(e,t))return s(!a.f.call(e,t),e[t])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-indexed-object.js"),a=n("./node_modules/core-js/internals/object-get-own-property-names.js").f,s={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return i&&"[object Window]"==s.call(e)?function(e){try{return a(e)}catch(t){return i.slice()}}(e):a(r(e))}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(e,t,n){var r=n("./node_modules/core-js/internals/object-keys-internal.js"),a=n("./node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(e,t){t.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(e,t,n){var r=n("./node_modules/core-js/internals/has.js"),a=n("./node_modules/core-js/internals/to-object.js"),s=n("./node_modules/core-js/internals/shared-key.js"),i=n("./node_modules/core-js/internals/correct-prototype-getter.js"),o=s("IE_PROTO"),l=Object.prototype;e.exports=i?Object.getPrototypeOf:function(e){return e=a(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(e,t,n){var r=n("./node_modules/core-js/internals/has.js"),a=n("./node_modules/core-js/internals/to-indexed-object.js"),s=n("./node_modules/core-js/internals/array-includes.js").indexOf,i=n("./node_modules/core-js/internals/hidden-keys.js");e.exports=function(e,t){var n,o=a(e),l=0,c=[];for(n in o)!r(i,n)&&r(o,n)&&c.push(n);for(;t.length>l;)r(o,n=t[l++])&&(~s(c,n)||c.push(n));return c}},"./node_modules/core-js/internals/object-keys.js":function(e,t,n){var r=n("./node_modules/core-js/internals/object-keys-internal.js"),a=n("./node_modules/core-js/internals/enum-bug-keys.js");e.exports=Object.keys||function(e){return r(e,a)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);t.f=a?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},"./node_modules/core-js/internals/object-set-prototype-of.js":function(e,t,n){var r=n("./node_modules/core-js/internals/an-object.js"),a=n("./node_modules/core-js/internals/a-possible-prototype.js");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(s){}return function(n,s){return r(n),a(s),t?e.call(n,s):n.__proto__=s,n}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/to-string-tag-support.js"),a=n("./node_modules/core-js/internals/classof.js");e.exports=r?{}.toString:function(){return"[object "+a(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js");e.exports=function(e,t){var n,a;if("string"===t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if("string"!==t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":function(e,t,n){var r=n("./node_modules/core-js/internals/get-built-in.js"),a=n("./node_modules/core-js/internals/object-get-own-property-names.js"),s=n("./node_modules/core-js/internals/object-get-own-property-symbols.js"),i=n("./node_modules/core-js/internals/an-object.js");e.exports=r("Reflect","ownKeys")||function(e){var t=a.f(i(e)),n=s.f;return n?t.concat(n(e)):t}},"./node_modules/core-js/internals/path.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js");e.exports=r},"./node_modules/core-js/internals/redefine.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),a=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),s=n("./node_modules/core-js/internals/has.js"),i=n("./node_modules/core-js/internals/set-global.js"),o=n("./node_modules/core-js/internals/inspect-source.js"),l=n("./node_modules/core-js/internals/internal-state.js"),c=l.get,u=l.enforce,d=String(String).split("String");(e.exports=function(e,t,n,o){var l,c=!!o&&!!o.unsafe,A=!!o&&!!o.enumerable,h=!!o&&!!o.noTargetGet;"function"==typeof n&&("string"!=typeof t||s(n,"name")||a(n,"name",t),(l=u(n)).source||(l.source=d.join("string"==typeof t?t:""))),e!==r?(c?!h&&e[t]&&(A=!0):delete e[t],A?e[t]=n:a(e,t,n)):A?e[t]=n:i(t,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&c(this).source||o(this)})},"./node_modules/core-js/internals/regexp-flags.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/an-object.js");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"./node_modules/core-js/internals/require-object-coercible.js":function(e){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"./node_modules/core-js/internals/set-global.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js");e.exports=function(e,t){try{Object.defineProperty(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},"./node_modules/core-js/internals/set-to-string-tag.js":function(e,t,n){var r=n("./node_modules/core-js/internals/object-define-property.js").f,a=n("./node_modules/core-js/internals/has.js"),s=n("./node_modules/core-js/internals/well-known-symbol.js")("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,s)&&r(e,s,{configurable:!0,value:t})}},"./node_modules/core-js/internals/shared-key.js":function(e,t,n){var r=n("./node_modules/core-js/internals/shared.js"),a=n("./node_modules/core-js/internals/uid.js"),s=r("keys");e.exports=function(e){return s[e]||(s[e]=a(e))}},"./node_modules/core-js/internals/shared-store.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),a=n("./node_modules/core-js/internals/set-global.js"),s="__core-js_shared__",i=r[s]||a(s,{});e.exports=i},"./node_modules/core-js/internals/shared.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-pure.js"),a=n("./node_modules/core-js/internals/shared-store.js");(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.16.0",mode:r?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js");e.exports=function(e){return r(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})}},"./node_modules/core-js/internals/string-multibyte.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-integer.js"),a=n("./node_modules/core-js/internals/to-string.js"),s=n("./node_modules/core-js/internals/require-object-coercible.js"),i=function(e){return function(t,n){var i,o,l=a(s(t)),c=r(n),u=l.length;return c<0||c>=u?e?"":void 0:(i=l.charCodeAt(c))<55296||i>56319||c+1===u||(o=l.charCodeAt(c+1))<56320||o>57343?e?l.charAt(c):i:e?l.slice(c,c+2):o-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},"./node_modules/core-js/internals/string-trim.js":function(e,t,n){var r=n("./node_modules/core-js/internals/require-object-coercible.js"),a=n("./node_modules/core-js/internals/to-string.js"),s="["+n("./node_modules/core-js/internals/whitespaces.js")+"]",i=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),l=function(e){return function(t){var n=a(r(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},"./node_modules/core-js/internals/to-absolute-index.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-integer.js"),a=Math.max,s=Math.min;e.exports=function(e,t){var n=r(e);return n<0?a(n+t,0):s(n,t)}},"./node_modules/core-js/internals/to-indexed-object.js":function(e,t,n){var r=n("./node_modules/core-js/internals/indexed-object.js"),a=n("./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return r(a(e))}},"./node_modules/core-js/internals/to-integer.js":function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},"./node_modules/core-js/internals/to-length.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-integer.js"),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(e,t,n){var r=n("./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return Object(r(e))}},"./node_modules/core-js/internals/to-primitive.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js"),a=n("./node_modules/core-js/internals/is-symbol.js"),s=n("./node_modules/core-js/internals/ordinary-to-primitive.js"),i=n("./node_modules/core-js/internals/well-known-symbol.js")("toPrimitive");e.exports=function(e,t){if(!r(e)||a(e))return e;var n,o=e[i];if(void 0!==o){if(void 0===t&&(t="default"),n=o.call(e,t),!r(n)||a(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},"./node_modules/core-js/internals/to-property-key.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-primitive.js"),a=n("./node_modules/core-js/internals/is-symbol.js");e.exports=function(e){var t=r(e,"string");return a(t)?t:String(t)}},"./node_modules/core-js/internals/to-string-tag-support.js":function(e,t,n){var r={};r[n("./node_modules/core-js/internals/well-known-symbol.js")("toStringTag")]="z",e.exports="[object z]"===String(r)},"./node_modules/core-js/internals/to-string.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-symbol.js");e.exports=function(e){if(r(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},"./node_modules/core-js/internals/uid.js":function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":function(e,t,n){var r=n("./node_modules/core-js/internals/native-symbol.js");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":function(e,t,n){var r=n("./node_modules/core-js/internals/well-known-symbol.js");t.f=r},"./node_modules/core-js/internals/well-known-symbol.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),a=n("./node_modules/core-js/internals/shared.js"),s=n("./node_modules/core-js/internals/has.js"),i=n("./node_modules/core-js/internals/uid.js"),o=n("./node_modules/core-js/internals/native-symbol.js"),l=n("./node_modules/core-js/internals/use-symbol-as-uid.js"),c=a("wks"),u=r.Symbol,d=l?u:u&&u.withoutSetter||i;e.exports=function(e){return s(c,e)&&(o||"string"==typeof c[e])||(o&&s(u,e)?c[e]=u[e]:c[e]=d("Symbol."+e)),c[e]}},"./node_modules/core-js/internals/whitespaces.js":function(e){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},"./node_modules/core-js/modules/es.array.concat.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),a=n("./node_modules/core-js/internals/fails.js"),s=n("./node_modules/core-js/internals/is-array.js"),i=n("./node_modules/core-js/internals/is-object.js"),o=n("./node_modules/core-js/internals/to-object.js"),l=n("./node_modules/core-js/internals/to-length.js"),c=n("./node_modules/core-js/internals/create-property.js"),u=n("./node_modules/core-js/internals/array-species-create.js"),d=n("./node_modules/core-js/internals/array-method-has-species-support.js"),A=n("./node_modules/core-js/internals/well-known-symbol.js"),h=n("./node_modules/core-js/internals/engine-v8-version.js"),f=A("isConcatSpreadable"),p=9007199254740991,m="Maximum allowed index exceeded",g=h>=51||!a(function(){var e=[];return e[f]=!1,e.concat()[0]!==e}),x=d("concat"),v=function(e){if(!i(e))return!1;var t=e[f];return void 0!==t?!!t:s(e)};r({target:"Array",proto:!0,forced:!g||!x},{concat:function(e){var t,n,r,a,s,i=o(this),d=u(i,0),A=0;for(t=-1,r=arguments.length;t<r;t++)if(v(s=-1===t?i:arguments[t])){if(A+(a=l(s.length))>p)throw TypeError(m);for(n=0;n<a;n++,A++)n in s&&c(d,A,s[n])}else{if(A>=p)throw TypeError(m);c(d,A++,s)}return d.length=A,d}})},"./node_modules/core-js/modules/es.array.iterator.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/to-indexed-object.js"),a=n("./node_modules/core-js/internals/add-to-unscopables.js"),s=n("./node_modules/core-js/internals/iterators.js"),i=n("./node_modules/core-js/internals/internal-state.js"),o=n("./node_modules/core-js/internals/define-iterator.js"),l="Array Iterator",c=i.set,u=i.getterFor(l);e.exports=o(Array,"Array",function(e,t){c(this,{type:l,target:r(e),index:0,kind:t})},function(){var e=u(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values"),s.Arguments=s.Array,a("keys"),a("values"),a("entries")},"./node_modules/core-js/modules/es.array.join.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),a=n("./node_modules/core-js/internals/indexed-object.js"),s=n("./node_modules/core-js/internals/to-indexed-object.js"),i=n("./node_modules/core-js/internals/array-method-is-strict.js"),o=[].join,l=a!=Object,c=i("join",",");r({target:"Array",proto:!0,forced:l||!c},{join:function(e){return o.call(s(this),void 0===e?",":e)}})},"./node_modules/core-js/modules/es.array.map.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),a=n("./node_modules/core-js/internals/array-iteration.js").map;r({target:"Array",proto:!0,forced:!n("./node_modules/core-js/internals/array-method-has-species-support.js")("map")},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),a=n("./node_modules/core-js/internals/is-object.js"),s=n("./node_modules/core-js/internals/is-array.js"),i=n("./node_modules/core-js/internals/to-absolute-index.js"),o=n("./node_modules/core-js/internals/to-length.js"),l=n("./node_modules/core-js/internals/to-indexed-object.js"),c=n("./node_modules/core-js/internals/create-property.js"),u=n("./node_modules/core-js/internals/well-known-symbol.js"),d=n("./node_modules/core-js/internals/array-method-has-species-support.js")("slice"),A=u("species"),h=[].slice,f=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var n,r,u,d=l(this),p=o(d.length),m=i(e,p),g=i(void 0===t?p:t,p);if(s(d)&&("function"!=typeof(n=d.constructor)||n!==Array&&!s(n.prototype)?a(n)&&null===(n=n[A])&&(n=void 0):n=void 0,n===Array||void 0===n))return h.call(d,m,g);for(r=new(void 0===n?Array:n)(f(g-m,0)),u=0;m<g;m++,u++)m in d&&c(r,u,d[m]);return r.length=u,r}})},"./node_modules/core-js/modules/es.function.name.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),a=n("./node_modules/core-js/internals/object-define-property.js").f,s=Function.prototype,i=s.toString,o=/^\s*function ([^ (]*)/,l="name";r&&!(l in s)&&a(s,l,{configurable:!0,get:function(){try{return i.call(this).match(o)[1]}catch(e){return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/descriptors.js"),a=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/is-forced.js"),i=n("./node_modules/core-js/internals/redefine.js"),o=n("./node_modules/core-js/internals/has.js"),l=n("./node_modules/core-js/internals/classof-raw.js"),c=n("./node_modules/core-js/internals/inherit-if-required.js"),u=n("./node_modules/core-js/internals/is-symbol.js"),d=n("./node_modules/core-js/internals/to-primitive.js"),A=n("./node_modules/core-js/internals/fails.js"),h=n("./node_modules/core-js/internals/object-create.js"),f=n("./node_modules/core-js/internals/object-get-own-property-names.js").f,p=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,m=n("./node_modules/core-js/internals/object-define-property.js").f,g=n("./node_modules/core-js/internals/string-trim.js").trim,x="Number",v=a[x],y=v.prototype,b=l(h(y))==x,w=function(e){if(u(e))throw TypeError("Cannot convert a Symbol value to a number");var t,n,r,a,s,i,o,l,c=d(e,"number");if("string"==typeof c&&c.length>2)if(43===(t=(c=g(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+c}for(i=(s=c.slice(2)).length,o=0;o<i;o++)if((l=s.charCodeAt(o))<48||l>a)return NaN;return parseInt(s,r)}return+c};if(s(x,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var N,j=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof j&&(b?A(function(){y.valueOf.call(n)}):l(n)!=x)?c(new v(w(t)),n,j):w(t)},C=r?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),B=0;C.length>B;B++)o(v,N=C[B])&&!o(j,N)&&m(j,N,p(v,N));j.prototype=y,y.constructor=j,i(a,x,j)}},"./node_modules/core-js/modules/es.object.assign.js":function(e,t,n){var r=n("./node_modules/core-js/internals/export.js"),a=n("./node_modules/core-js/internals/object-assign.js");r({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},"./node_modules/core-js/modules/es.object.keys.js":function(e,t,n){var r=n("./node_modules/core-js/internals/export.js"),a=n("./node_modules/core-js/internals/to-object.js"),s=n("./node_modules/core-js/internals/object-keys.js");r({target:"Object",stat:!0,forced:n("./node_modules/core-js/internals/fails.js")(function(){s(1)})},{keys:function(e){return s(a(e))}})},"./node_modules/core-js/modules/es.object.to-string.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-string-tag-support.js"),a=n("./node_modules/core-js/internals/redefine.js"),s=n("./node_modules/core-js/internals/object-to-string.js");r||a(Object.prototype,"toString",s,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/redefine.js"),a=n("./node_modules/core-js/internals/an-object.js"),s=n("./node_modules/core-js/internals/to-string.js"),i=n("./node_modules/core-js/internals/fails.js"),o=n("./node_modules/core-js/internals/regexp-flags.js"),l="toString",c=RegExp.prototype,u=c[l],d=i(function(){return"/a/b"!=u.call({source:"a",flags:"b"})}),A=u.name!=l;(d||A)&&r(RegExp.prototype,l,function(){var e=a(this),t=s(e.source),n=e.flags;return"/"+t+"/"+s(void 0===n&&e instanceof RegExp&&!("flags"in c)?o.call(e):n)},{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/string-multibyte.js").charAt,a=n("./node_modules/core-js/internals/to-string.js"),s=n("./node_modules/core-js/internals/internal-state.js"),i=n("./node_modules/core-js/internals/define-iterator.js"),o="String Iterator",l=s.set,c=s.getterFor(o);i(String,"String",function(e){l(this,{type:o,string:a(e),index:0})},function(){var e,t=c(this),n=t.string,a=t.index;return a>=n.length?{value:void 0,done:!0}:(e=r(n,a),t.index+=e.length,{value:e,done:!1})})},"./node_modules/core-js/modules/es.string.link.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),a=n("./node_modules/core-js/internals/create-html.js");r({target:"String",proto:!0,forced:n("./node_modules/core-js/internals/string-html-forced.js")("link")},{link:function(e){return a(this,"a","href",e)}})},"./node_modules/core-js/modules/es.symbol.description.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),a=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/global.js"),i=n("./node_modules/core-js/internals/has.js"),o=n("./node_modules/core-js/internals/is-object.js"),l=n("./node_modules/core-js/internals/object-define-property.js").f,c=n("./node_modules/core-js/internals/copy-constructor-properties.js"),u=s.Symbol;if(a&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},A=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof A?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};c(A,u);var h=A.prototype=u.prototype;h.constructor=A;var f=h.toString,p="Symbol(test)"==String(u("test")),m=/^Symbol\((.*)\)[^)]+$/;l(h,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=f.call(e);if(i(d,e))return"";var n=p?t.slice(7,-1):t.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:A})}},"./node_modules/core-js/modules/es.symbol.iterator.js":function(e,t,n){n("./node_modules/core-js/internals/define-well-known-symbol.js")("iterator")},"./node_modules/core-js/modules/es.symbol.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),a=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/get-built-in.js"),i=n("./node_modules/core-js/internals/is-pure.js"),o=n("./node_modules/core-js/internals/descriptors.js"),l=n("./node_modules/core-js/internals/native-symbol.js"),c=n("./node_modules/core-js/internals/fails.js"),u=n("./node_modules/core-js/internals/has.js"),d=n("./node_modules/core-js/internals/is-array.js"),A=n("./node_modules/core-js/internals/is-object.js"),h=n("./node_modules/core-js/internals/is-symbol.js"),f=n("./node_modules/core-js/internals/an-object.js"),p=n("./node_modules/core-js/internals/to-object.js"),m=n("./node_modules/core-js/internals/to-indexed-object.js"),g=n("./node_modules/core-js/internals/to-property-key.js"),x=n("./node_modules/core-js/internals/to-string.js"),v=n("./node_modules/core-js/internals/create-property-descriptor.js"),y=n("./node_modules/core-js/internals/object-create.js"),b=n("./node_modules/core-js/internals/object-keys.js"),w=n("./node_modules/core-js/internals/object-get-own-property-names.js"),N=n("./node_modules/core-js/internals/object-get-own-property-names-external.js"),j=n("./node_modules/core-js/internals/object-get-own-property-symbols.js"),C=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),B=n("./node_modules/core-js/internals/object-define-property.js"),k=n("./node_modules/core-js/internals/object-property-is-enumerable.js"),S=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),E=n("./node_modules/core-js/internals/redefine.js"),F=n("./node_modules/core-js/internals/shared.js"),_=n("./node_modules/core-js/internals/shared-key.js"),I=n("./node_modules/core-js/internals/hidden-keys.js"),T=n("./node_modules/core-js/internals/uid.js"),D=n("./node_modules/core-js/internals/well-known-symbol.js"),L=n("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),U=n("./node_modules/core-js/internals/define-well-known-symbol.js"),P=n("./node_modules/core-js/internals/set-to-string-tag.js"),R=n("./node_modules/core-js/internals/internal-state.js"),O=n("./node_modules/core-js/internals/array-iteration.js").forEach,M=_("hidden"),Q="Symbol",H="prototype",z=D("toPrimitive"),W=R.set,V=R.getterFor(Q),K=Object[H],G=a.Symbol,q=s("JSON","stringify"),X=C.f,Y=B.f,J=N.f,Z=k.f,$=F("symbols"),ee=F("op-symbols"),te=F("string-to-symbol-registry"),ne=F("symbol-to-string-registry"),re=F("wks"),ae=a.QObject,se=!ae||!ae[H]||!ae[H].findChild,ie=o&&c(function(){return 7!=y(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=X(K,t);r&&delete K[t],Y(e,t,n),r&&e!==K&&Y(K,t,r)}:Y,oe=function(e,t){var n=$[e]=y(G[H]);return W(n,{type:Q,tag:e,description:t}),o||(n.description=t),n},le=function(e,t,n){e===K&&le(ee,t,n),f(e);var r=g(t);return f(n),u($,r)?(n.enumerable?(u(e,M)&&e[M][r]&&(e[M][r]=!1),n=y(n,{enumerable:v(0,!1)})):(u(e,M)||Y(e,M,v(1,{})),e[M][r]=!0),ie(e,r,n)):Y(e,r,n)},ce=function(e,t){f(e);var n=m(t),r=b(n).concat(he(n));return O(r,function(t){o&&!ue.call(n,t)||le(e,t,n[t])}),e},ue=function(e){var t=g(e),n=Z.call(this,t);return!(this===K&&u($,t)&&!u(ee,t))&&(!(n||!u(this,t)||!u($,t)||u(this,M)&&this[M][t])||n)},de=function(e,t){var n=m(e),r=g(t);if(n!==K||!u($,r)||u(ee,r)){var a=X(n,r);return!a||!u($,r)||u(n,M)&&n[M][r]||(a.enumerable=!0),a}},Ae=function(e){var t=J(m(e)),n=[];return O(t,function(e){u($,e)||u(I,e)||n.push(e)}),n},he=function(e){var t=e===K,n=J(t?ee:m(e)),r=[];return O(n,function(e){!u($,e)||t&&!u(K,e)||r.push($[e])}),r};l||(G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?x(arguments[0]):void 0,t=T(e),n=function(e){this===K&&n.call(ee,e),u(this,M)&&u(this[M],t)&&(this[M][t]=!1),ie(this,t,v(1,e))};return o&&se&&ie(K,t,{configurable:!0,set:n}),oe(t,e)},E(G[H],"toString",function(){return V(this).tag}),E(G,"withoutSetter",function(e){return oe(T(e),e)}),k.f=ue,B.f=le,C.f=de,w.f=N.f=Ae,j.f=he,L.f=function(e){return oe(D(e),e)},o&&(Y(G[H],"description",{configurable:!0,get:function(){return V(this).description}}),i||E(K,"propertyIsEnumerable",ue,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:G}),O(b(re),function(e){U(e)}),r({target:Q,stat:!0,forced:!l},{for:function(e){var t=x(e);if(u(te,t))return te[t];var n=G(t);return te[t]=n,ne[n]=t,n},keyFor:function(e){if(!h(e))throw TypeError(e+" is not a symbol");if(u(ne,e))return ne[e]},useSetter:function(){se=!0},useSimple:function(){se=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!o},{create:function(e,t){return void 0===t?y(e):ce(y(e),t)},defineProperty:le,defineProperties:ce,getOwnPropertyDescriptor:de}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:Ae,getOwnPropertySymbols:he}),r({target:"Object",stat:!0,forced:c(function(){j.f(1)})},{getOwnPropertySymbols:function(e){return j.f(p(e))}}),q&&r({target:"JSON",stat:!0,forced:!l||c(function(){var e=G();return"[null]"!=q([e])||"{}"!=q({a:e})||"{}"!=q(Object(e))})},{stringify:function(e,t,n){for(var r,a=[e],s=1;arguments.length>s;)a.push(arguments[s++]);if(r=t,(A(t)||void 0!==e)&&!h(e))return d(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!h(t))return t}),a[1]=t,q.apply(null,a)}}),G[H][z]||S(G[H],z,G[H].valueOf),P(G,Q),I[M]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),a=n("./node_modules/core-js/internals/dom-iterables.js"),s=n("./node_modules/core-js/internals/array-for-each.js"),i=n("./node_modules/core-js/internals/create-non-enumerable-property.js");for(var o in a){var l=r[o],c=l&&l.prototype;if(c&&c.forEach!==s)try{i(c,"forEach",s)}catch(u){c.forEach=s}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),a=n("./node_modules/core-js/internals/dom-iterables.js"),s=n("./node_modules/core-js/modules/es.array.iterator.js"),i=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),o=n("./node_modules/core-js/internals/well-known-symbol.js"),l=o("iterator"),c=o("toStringTag"),u=s.values;for(var d in a){var A=r[d],h=A&&A.prototype;if(h){if(h[l]!==u)try{i(h,l,u)}catch(p){h[l]=u}if(h[c]||i(h,c,d),a[d])for(var f in s)if(h[f]!==s[f])try{i(h,f,s[f])}catch(p){h[f]=s[f]}}}},"./node_modules/es6-promise/dist/es6-promise.js":function(e){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"===typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=0,s=void 0,i=void 0,o=function(e,t){y[a]=e,y[a+1]=t,2===(a+=2)&&(i?i(b):N())};function l(e){i=e}function c(e){o=e}var u="undefined"!==typeof window?window:void 0,d=u||{},A=d.MutationObserver||d.WebKitMutationObserver,h="undefined"===typeof self&&"undefined"!==typeof process&&"[object process]"==={}.toString.call(process),f="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel;function p(){return function(){return process.nextTick(b)}}function m(){return"undefined"!==typeof s?function(){s(b)}:v()}function g(){var e=0,t=new A(b),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function x(){var e=new MessageChannel;return e.port1.onmessage=b,function(){return e.port2.postMessage(0)}}function v(){var e=setTimeout;return function(){return e(b,1)}}var y=new Array(1e3);function b(){for(var e=0;e<a;e+=2)(0,y[e])(y[e+1]),y[e]=void 0,y[e+1]=void 0;a=0}function w(){try{var e=Function("return this")().require("vertx");return s=e.runOnLoop||e.runOnContext,m()}catch(t){return v()}}var N=void 0;function j(e,t){var n=this,r=new this.constructor(k);void 0===r[B]&&G(r);var a=n._state;if(a){var s=arguments[a-1];o(function(){return z(a,r,s,n._result)})}else Q(n,r,e,t);return r}function C(e){var t=this;if(e&&"object"===typeof e&&e.constructor===t)return e;var n=new t(k);return P(n,e),n}N=h?p():A?g():f?x():void 0===u?w():v();var B=Math.random().toString(36).substring(2);function k(){}var S=void 0,E=1,F=2;function _(){return new TypeError("You cannot resolve a promise with itself")}function I(){return new TypeError("A promises callback cannot return that same promise.")}function T(e,t,n,r){try{e.call(t,n,r)}catch(a){return a}}function D(e,t,n){o(function(e){var r=!1,a=T(n,t,function(n){r||(r=!0,t!==n?P(e,n):O(e,n))},function(t){r||(r=!0,M(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&a&&(r=!0,M(e,a))},e)}function L(e,t){t._state===E?O(e,t._result):t._state===F?M(e,t._result):Q(t,void 0,function(t){return P(e,t)},function(t){return M(e,t)})}function U(e,n,r){n.constructor===e.constructor&&r===j&&n.constructor.resolve===C?L(e,n):void 0===r?O(e,n):t(r)?D(e,n,r):O(e,n)}function P(t,n){if(t===n)M(t,_());else if(e(n)){var r=void 0;try{r=n.then}catch(a){return void M(t,a)}U(t,n,r)}else O(t,n)}function R(e){e._onerror&&e._onerror(e._result),H(e)}function O(e,t){e._state===S&&(e._result=t,e._state=E,0!==e._subscribers.length&&o(H,e))}function M(e,t){e._state===S&&(e._state=F,e._result=t,o(R,e))}function Q(e,t,n,r){var a=e._subscribers,s=a.length;e._onerror=null,a[s]=t,a[s+E]=n,a[s+F]=r,0===s&&e._state&&o(H,e)}function H(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,a=void 0,s=e._result,i=0;i<t.length;i+=3)r=t[i],a=t[i+n],r?z(n,r,a,s):a(s);e._subscribers.length=0}}function z(e,n,r,a){var s=t(r),i=void 0,o=void 0,l=!0;if(s){try{i=r(a)}catch(c){l=!1,o=c}if(n===i)return void M(n,I())}else i=a;n._state!==S||(s&&l?P(n,i):!1===l?M(n,o):e===E?O(n,i):e===F&&M(n,i))}function W(e,t){try{t(function(t){P(e,t)},function(t){M(e,t)})}catch(n){M(e,n)}}var V=0;function K(){return V++}function G(e){e[B]=V++,e._state=void 0,e._result=void 0,e._subscribers=[]}function q(){return new Error("Array Methods must be provided an Array")}var X=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(k),this.promise[B]||G(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&O(this.promise,this._result))):M(this.promise,q())}return e.prototype._enumerate=function(e){for(var t=0;this._state===S&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===C){var a=void 0,s=void 0,i=!1;try{a=e.then}catch(l){i=!0,s=l}if(a===j&&e._state!==S)this._settledAt(e._state,t,e._result);else if("function"!==typeof a)this._remaining--,this._result[t]=e;else if(n===te){var o=new n(k);i?M(o,s):U(o,e,a),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===S&&(this._remaining--,e===F?M(r,n):this._result[t]=n),0===this._remaining&&O(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;Q(e,void 0,function(e){return n._settledAt(E,t,e)},function(e){return n._settledAt(F,t,e)})},e}();function Y(e){return new X(this,e).promise}function J(e){var t=this;return r(e)?new t(function(n,r){for(var a=e.length,s=0;s<a;s++)t.resolve(e[s]).then(n,r)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})}function Z(e){var t=new this(k);return M(t,e),t}function $(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function e(t){this[B]=K(),this._result=this._state=void 0,this._subscribers=[],k!==t&&("function"!==typeof t&&$(),this instanceof e?W(this,t):ee())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var n=this,r=n.constructor;return t(e)?n.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):n.then(e,e)},e}();function ne(){var e=void 0;if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof self)e=self;else try{e=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(a){}if("[object Promise]"===r&&!t.cast)return}e.Promise=te}return te.prototype.then=j,te.all=Y,te.race=J,te.resolve=C,te.reject=Z,te._setScheduler=l,te._setAsap=c,te._asap=o,te.polyfill=ne,te.Promise=te,te}()},html2canvas:function(e){"use strict";e.exports=t},jspdf:function(t){"use strict";t.exports=e}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return r[e].call(n.exports,n,n.exports,s),n.exports}s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return function(){"use strict";s.r(i);var e=s("./src/worker.js"),t=(s("./src/plugin/jspdf-plugin.js"),s("./src/plugin/pagebreaks.js"),s("./src/plugin/hyperlinks.js"),function e(t,n){var r=new e.Worker(n);return t?r.from(t).save():r});t.Worker=e.default,i.default=t}(),i=i.default}()},e.exports=r(n(5612),n(1052))},7318:()=>{},8082:()=>{},8345:(e,t,n)=>{"use strict";var r=n(9950),a=n(5340);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function p(e,t,n,r,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function v(e,t,n,r){var a=m.hasOwnProperty(t)?m[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(f,e)||!d.call(h,e)&&(A.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,x);m[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,x);m[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,x);m[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),k=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var T=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var U,P=Object.assign;function R(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var O=!1;function M(e,t){if(!e||O)return"";O=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=r.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{O=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?R(e):""}function Q(e){switch(e.tag){case 5:return R(e.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return e=M(e.type,!1);case 11:return e=M(e.type.render,!1);case 1:return e=M(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case C:return"Profiler";case j:return"StrictMode";case E:return"Suspense";case F:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case B:return(e._context.displayName||"Context")+".Provider";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return P({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return P({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function Ae(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=P({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,je=null;function Ce(e){if(e=va(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=ba(t),we(e.stateNode,e.type,t))}}function Be(e){Ne?je?je.push(e):je=[e]:Ne=e}function ke(){if(Ne){var e=Ne,t=je;if(je=Ne=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Se(e,t){return e(t)}function Ee(){}var Fe=!1;function _e(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return Se(e,t,n)}finally{Fe=!1,(null!==Ne||null!==je)&&(Ee(),ke())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var r=ba(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Te=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Te=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Te=!1}function Le(e,t,n,r,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ue=!1,Pe=null,Re=!1,Oe=null,Me={onError:function(e){Ue=!0,Pe=e}};function Qe(e,t,n,r,a,s,i,o,l){Ue=!1,Pe=null,Le.apply(Me,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(s(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return We(a),e;if(i===r)return We(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,qe=a.unstable_cancelCallback,Xe=a.unstable_shouldYield,Ye=a.unstable_requestPaint,Je=a.unstable_now,Ze=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function At(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~a;0!==o?r=dt(o):0!==(s&=i)&&(r=dt(s))}else 0!==(i=n&~a)?r=dt(i):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var vt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,Nt,jt,Ct,Bt=!1,kt=[],St=null,Et=null,Ft=null,_t=new Map,It=new Map,Tt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":_t.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Ut(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=va(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Pt(e){var t=xa(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Ct(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=va(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ye=r,n.target.dispatchEvent(r),ye=null,t.shift()}return!0}function Ot(e,t,n){Rt(e)&&n.delete(t)}function Mt(){Bt=!1,null!==St&&Rt(St)&&(St=null),null!==Et&&Rt(Et)&&(Et=null),null!==Ft&&Rt(Ft)&&(Ft=null),_t.forEach(Ot),It.forEach(Ot)}function Qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Bt||(Bt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Mt)))}function Ht(e){function t(t){return Qt(t,e)}if(0<kt.length){Qt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==St&&Qt(St,e),null!==Et&&Qt(Et,e),null!==Ft&&Qt(Ft,e),_t.forEach(t),It.forEach(t),n=0;n<Tt.length;n++)(r=Tt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Tt.length&&null===(n=Tt[0]).blockedOn;)Pt(n),null===n.blockedOn&&Tt.shift()}var zt=y.ReactCurrentBatchConfig,Wt=!0;function Vt(e,t,n,r){var a=vt,s=zt.transition;zt.transition=null;try{vt=1,Gt(e,t,n,r)}finally{vt=a,zt.transition=s}}function Kt(e,t,n,r){var a=vt,s=zt.transition;zt.transition=null;try{vt=4,Gt(e,t,n,r)}finally{vt=a,zt.transition=s}}function Gt(e,t,n,r){if(Wt){var a=Xt(e,t,n,r);if(null===a)Wr(e,t,r,qt,n),Lt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return St=Ut(St,e,t,n,r,a),!0;case"dragenter":return Et=Ut(Et,e,t,n,r,a),!0;case"mouseover":return Ft=Ut(Ft,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return _t.set(s,Ut(_t.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,It.set(s,Ut(It.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==a;){var s=va(a);if(null!==s&&bt(s),null===(s=Xt(e,t,n,r))&&Wr(e,t,r,qt,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var qt=null;function Xt(e,t,n,r){if(qt=null,null!==(e=xa(e=be(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,a="value"in Jt?Jt.value:Jt.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return P(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=P({},cn,{view:0,detail:0}),An=an(dn),hn=P({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=an(hn),pn=an(P({},hn,{dataTransfer:0})),mn=an(P({},dn,{relatedTarget:0})),gn=an(P({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=P({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=an(xn),yn=an(P({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Cn(){return jn}var Bn=P({},dn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=an(Bn),Sn=an(P({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=an(P({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Fn=an(P({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=P({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=an(_n),Tn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Un=u&&"TextEvent"in window&&!Ln,Pn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Rn=String.fromCharCode(32),On=!1;function Mn(e,t){switch(e){case"keyup":return-1!==Tn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Vn(e,t,n,r){Be(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function qn(e){Rr(e,0)}function Xn(e){if(G(ya(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Zn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Xn(Gn)){var t=[];Vn(t,Gn,e,be(e)),_e(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Gn)}function sr(e,t){if("click"===e)return Xn(t)}function ir(e,t){if("input"===e||"change"===e)return Xn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!or(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Ar(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=Ar(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=void 0===r.end?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=ur(n,s);var i=ur(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,xr=null,vr=!1;function yr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==mr||mr!==q(r)||("selectionStart"in(r=mr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&lr(xr,r)||(xr=r,0<(r=Kr(gr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Nr={},jr={};function Cr(e){if(Nr[e])return Nr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in jr)return Nr[e]=n[t];return e}u&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Br=Cr("animationend"),kr=Cr("animationiteration"),Sr=Cr("animationstart"),Er=Cr("transitionend"),Fr=new Map,_r="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){Fr.set(e,t),l(t,[e])}for(var Tr=0;Tr<_r.length;Tr++){var Dr=_r[Tr];Ir(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ir(Br,"onAnimationEnd"),Ir(kr,"onAnimationIteration"),Ir(Sr,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ur=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Pr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,o,l,c){if(Qe.apply(this,arguments),Ue){if(!Ue)throw Error(s(198));var u=Pe;Ue=!1,Pe=null,Re||(Re=!0,Oe=u)}}(r,t,void 0,e),e.currentTarget=null}function Rr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Pr(a,o,c),s=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Pr(a,o,c),s=l}}}if(Re)throw e=Oe,Re=!1,Oe=null,e}function Or(e,t){var n=t[pa];void 0===n&&(n=t[pa]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Mr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Qr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Qr]){e[Qr]=!0,i.forEach(function(t){"selectionchange"!==t&&(Ur.has(t)||Mr(t,!1,e),Mr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Qr]||(t[Qr]=!0,Mr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Yt(t)){case 1:var a=Vt;break;case 4:a=Kt;break;default:a=Gt}n=a.bind(null,t,n,e),a=void 0,!Te||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,a){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=xa(o)))return;if(5===(l=i.tag)||6===l){r=s=i;continue e}o=o.parentNode}}r=r.return}_e(function(){var r=s,a=be(n),i=[];e:{var o=Fr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Br:case kr:case Sr:l=gn;break;case Er:l=Fn;break;case"scroll":l=An;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Sn}var u=0!==(4&t),d=!u&&"scroll"===e,A=u?null!==o?o+"Capture":null:o;u=[];for(var h,f=r;null!==f;){var p=(h=f).stateNode;if(5===h.tag&&null!==p&&(h=p,null!==A&&(null!=(p=Ie(f,A))&&u.push(Vr(f,p,h)))),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,a),i.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ye||!(c=n.relatedTarget||n.fromElement)||!xa(c)&&!c[fa])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xa(c):null)&&(c!==(d=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,p="onMouseLeave",A="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Sn,p="onPointerLeave",A="onPointerEnter",f="pointer"),d=null==l?o:ya(l),h=null==c?o:ya(c),(o=new u(p,f+"leave",l,n,a)).target=d,o.relatedTarget=h,p=null,xa(a)===r&&((u=new u(A,f+"enter",c,n,a)).target=h,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(A=c,f=0,h=u=l;h;h=Gr(h))f++;for(h=0,p=A;p;p=Gr(p))h++;for(;0<f-h;)u=Gr(u),f--;for(;0<h-f;)A=Gr(A),h--;for(;f--;){if(u===A||null!==A&&u===A.alternate)break e;u=Gr(u),A=Gr(A)}u=null}else u=null;null!==l&&qr(i,o,l,u,!1),null!==c&&null!==d&&qr(i,d,c,u,!0)}if("select"===(l=(o=r?ya(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Yn;else if(Wn(o))if(Jn)m=ir;else{m=ar;var g=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=sr);switch(m&&(m=m(e,r))?Vn(i,m,n,a):(g&&g(e,o,r),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=r?ya(r):window,e){case"focusin":(Wn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,xr=null);break;case"focusout":xr=gr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,yr(i,n,a);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":yr(i,n,a)}var x;if(Dn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Hn?Mn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Pn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Hn&&(x=en()):(Zt="value"in(Jt=a)?Jt.value:Jt.textContent,Hn=!0)),0<(g=Kr(r,v)).length&&(v=new yn(v,e,null,n,a),i.push({event:v,listeners:g}),x?v.data=x:null!==(x=Qn(n))&&(v.data=x))),(x=Un?function(e,t){switch(e){case"compositionend":return Qn(t);case"keypress":return 32!==t.which?null:(On=!0,Rn);case"textInput":return(e=t.data)===Rn&&On?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Dn&&Mn(e,t)?(e=en(),$t=Zt=Jt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(a=new yn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=x))}Rr(i,t)})}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Ie(e,n))&&r.unshift(Vr(e,s,a)),null!=(s=Ie(e,t))&&r.push(Vr(e,s,a))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Ie(n,s))&&i.unshift(Vr(n,l,o)):a||null!=(l=Ie(n,s))&&i.push(Vr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function $r(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:ra;function oa(e){setTimeout(function(){throw e})}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Ht(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),Aa="__reactFiber$"+da,ha="__reactProps$"+da,fa="__reactContainer$"+da,pa="__reactEvents$"+da,ma="__reactListeners$"+da,ga="__reactHandles$"+da;function xa(e){var t=e[Aa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fa]||n[Aa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[Aa])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function va(e){return!(e=e[Aa]||e[fa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ya(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function ba(e){return e[ha]||null}var wa=[],Na=-1;function ja(e){return{current:e}}function Ca(e){0>Na||(e.current=wa[Na],wa[Na]=null,Na--)}function Ba(e,t){Na++,wa[Na]=e.current,e.current=t}var ka={},Sa=ja(ka),Ea=ja(!1),Fa=ka;function _a(e,t){var n=e.type.contextTypes;if(!n)return ka;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in n)s[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ia(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ta(){Ca(Ea),Ca(Sa)}function Da(e,t,n){if(Sa.current!==ka)throw Error(s(168));Ba(Sa,t),Ba(Ea,n)}function La(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(s(108,z(e)||"Unknown",a));return P({},n,r)}function Ua(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ka,Fa=Sa.current,Ba(Sa,e),Ba(Ea,Ea.current),!0}function Pa(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=La(e,t,Fa),r.__reactInternalMemoizedMergedChildContext=e,Ca(Ea),Ca(Sa),Ba(Sa,e)):Ca(Ea),Ba(Ea,n)}var Ra=null,Oa=!1,Ma=!1;function Qa(e){null===Ra?Ra=[e]:Ra.push(e)}function Ha(){if(!Ma&&null!==Ra){Ma=!0;var e=0,t=vt;try{var n=Ra;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ra=null,Oa=!1}catch(a){throw null!==Ra&&(Ra=Ra.slice(e+1)),Ge($e,Ha),a}finally{vt=t,Ma=!1}}return null}var za=[],Wa=0,Va=null,Ka=0,Ga=[],qa=0,Xa=null,Ya=1,Ja="";function Za(e,t){za[Wa++]=Ka,za[Wa++]=Va,Va=e,Ka=t}function $a(e,t,n){Ga[qa++]=Ya,Ga[qa++]=Ja,Ga[qa++]=Xa,Xa=e;var r=Ya;e=Ja;var a=32-it(r)-1;r&=~(1<<a),n+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Ya=1<<32-it(t)+a|n<<a|r,Ja=s+e}else Ya=1<<s|n<<a|r,Ja=e}function es(e){null!==e.return&&(Za(e,1),$a(e,1,0))}function ts(e){for(;e===Va;)Va=za[--Wa],za[Wa]=null,Ka=za[--Wa],za[Wa]=null;for(;e===Xa;)Xa=Ga[--qa],Ga[qa]=null,Ja=Ga[--qa],Ga[qa]=null,Ya=Ga[--qa],Ga[qa]=null}var ns=null,rs=null,as=!1,ss=null;function is(e,t){var n=_c(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xa?{id:Ya,overflow:Ja}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=_c(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ca(n.nextSibling);var r=ns;t&&os(e,t)?is(r,n):(e.flags=-4097&e.flags|2,as=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!as)return us(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw As(),Error(s(418));for(;t;)is(e,t),t=ca(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ca(e.stateNode.nextSibling):null;return!0}function As(){for(var e=rs;e;)e=ca(e.nextSibling)}function hs(){rs=ns=null,as=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ps=y.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xs(e){return(0,e._init)(e._payload)}function vs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Tc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Pc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===N?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===I&&xs(s)===t.type)?((r=a(t,n.props)).ref=ms(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=ms(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Rc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function A(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Pc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case w:return(t=Rc(t,e.mode,n)).return=e,t;case I:return A(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;gs(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===a?c(e,t,n,r):null;case w:return n.key===a?u(e,t,n,r):null;case I:return h(e,t,(a=n._init)(n._payload),r)}if(te(n)||L(n))return null!==a?null:d(e,t,n,r,null);gs(e,n)}return null}function f(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case I:return f(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,a,null);gs(t,r)}return null}function p(a,s,o,l){for(var c=null,u=null,d=s,p=s=0,m=null;null!==d&&p<o.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=h(a,d,o[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(a,d),s=i(g,s,p),null===u?c=g:u.sibling=g,u=g,d=m}if(p===o.length)return n(a,d),as&&Za(a,p),c;if(null===d){for(;p<o.length;p++)null!==(d=A(a,o[p],l))&&(s=i(d,s,p),null===u?c=d:u.sibling=d,u=d);return as&&Za(a,p),c}for(d=r(a,d);p<o.length;p++)null!==(m=f(d,a,p,o[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),s=i(m,s,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(a,e)}),as&&Za(a,p),c}function m(a,o,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,p=o,m=o=0,g=null,x=l.next();null!==p&&!x.done;m++,x=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=h(a,p,x.value,c);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(a,p),o=i(v,o,m),null===d?u=v:d.sibling=v,d=v,p=g}if(x.done)return n(a,p),as&&Za(a,m),u;if(null===p){for(;!x.done;m++,x=l.next())null!==(x=A(a,x.value,c))&&(o=i(x,o,m),null===d?u=x:d.sibling=x,d=x);return as&&Za(a,m),u}for(p=r(a,p);!x.done;m++,x=l.next())null!==(x=f(p,a,m,x.value,c))&&(e&&null!==x.alternate&&p.delete(null===x.key?m:x.key),o=i(x,o,m),null===d?u=x:d.sibling=x,d=x);return e&&p.forEach(function(e){return t(a,e)}),as&&Za(a,m),u}return function e(r,s,i,l){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case b:e:{for(var c=i.key,u=s;null!==u;){if(u.key===c){if((c=i.type)===N){if(7===u.tag){n(r,u.sibling),(s=a(u,i.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&xs(c)===u.type){n(r,u.sibling),(s=a(u,i.props)).ref=ms(r,u,i),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===N?((s=Lc(i.props.children,r.mode,l,i.key)).return=r,r=s):((l=Dc(i.type,i.key,i.props,null,r.mode,l)).ref=ms(r,s,i),l.return=r,r=l)}return o(r);case w:e:{for(u=i.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){n(r,s.sibling),(s=a(s,i.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Rc(i,r.mode,l)).return=r,r=s}return o(r);case I:return e(r,s,(u=i._init)(i._payload),l)}if(te(i))return p(r,s,i,l);if(L(i))return m(r,s,i,l);gs(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(n(r,s.sibling),(s=a(s,i)).return=r,r=s):(n(r,s),(s=Pc(i,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ys=vs(!0),bs=vs(!1),ws=ja(null),Ns=null,js=null,Cs=null;function Bs(){Cs=js=Ns=null}function ks(e){var t=ws.current;Ca(ws),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){Ns=e,Cs=js=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vo=!0),e.firstContext=null)}function Fs(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},null===js){if(null===Ns)throw Error(s(308));js=e,Ns.dependencies={lanes:0,firstContext:e}}else js=js.next=e;return t}var _s=null;function Is(e){null===_s?_s=[e]:_s.push(e)}function Ts(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Is(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Us(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Sl)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ds(e,n)}return null===(a=r.interleaved)?(t.next=t,Is(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ds(e,n)}function Ms(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}function Qs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hs(e,t,n,r){var a=e.updateQueue;Ls=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=a.baseState;for(i=0,u=c=l=null,o=s;;){var A=o.lane,h=o.eventTime;if((r&A)===A){null!==u&&(u=u.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,p=o;switch(A=t,h=n,p.tag){case 1:if("function"===typeof(f=p.payload)){d=f.call(h,d,A);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(A="function"===typeof(f=p.payload)?f.call(h,d,A):f)||void 0===A)break e;d=P({},d,A);break e;case 2:Ls=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(A=a.effects)?a.effects=[o]:A.push(o))}else h={eventTime:h,lane:A,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,i|=A;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(A=o).next,A.next=null,a.lastBaseUpdate=A,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Ul|=i,e.lanes=i,e.memoizedState=d}}function zs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var Ws={},Vs=ja(Ws),Ks=ja(Ws),Gs=ja(Ws);function qs(e){if(e===Ws)throw Error(s(174));return e}function Xs(e,t){switch(Ba(Gs,t),Ba(Ks,e),Ba(Vs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ca(Vs),Ba(Vs,t)}function Ys(){Ca(Vs),Ca(Ks),Ca(Gs)}function Js(e){qs(Gs.current);var t=qs(Vs.current),n=le(t,e.type);t!==n&&(Ba(Ks,e),Ba(Vs,n))}function Zs(e){Ks.current===e&&(Ca(Vs),Ca(Ks))}var $s=ja(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=y.ReactCurrentDispatcher,ai=y.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,ui=!1,di=0,Ai=0;function hi(){throw Error(s(321))}function fi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function pi(e,t,n,r,a,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Zi:$i,e=n(r,a),ui){i=0;do{if(ui=!1,di=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ri.current=eo,e=n(r,a)}while(ui)}if(ri.current=Ji,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function mi(){var e=0!==di;return di=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function xi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function vi(e,t){return"function"===typeof t?t(e):t}function yi(e){var t=xi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oi,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((si&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var A={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=A,o=r):c=c.next=A,ii.lanes|=d,Ul|=d}u=u.next}while(null!==u&&u!==i);null===c?o=r:c.next=l,or(r,t.memoizedState)||(vo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Ul|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function bi(e){var t=xi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);or(i,t.memoizedState)||(vo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function wi(){}function Ni(e,t){var n=ii,r=xi(),a=t(),i=!or(r.memoizedState,a);if(i&&(r.memoizedState=a,vo=!0),r=r.queue,Li(Bi.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Fi(9,Ci.bind(null,n,r,a,t),void 0,null),null===El)throw Error(s(349));0!==(30&si)||ji(n,t,a)}return a}function ji(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ci(e,t,n,r){t.value=n,t.getSnapshot=r,ki(t)&&Si(e)}function Bi(e,t,n){return n(function(){ki(t)&&Si(e)})}function ki(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Si(e){var t=Ds(e,1);null!==t&&nc(t,e,1,-1)}function Ei(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[t.memoizedState,e]}function Fi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function _i(){return xi().memoizedState}function Ii(e,t,n,r){var a=gi();ii.flags|=e,a.memoizedState=Fi(1|t,n,void 0,void 0===r?null:r)}function Ti(e,t,n,r){var a=xi();r=void 0===r?null:r;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==r&&fi(r,i.deps))return void(a.memoizedState=Fi(t,n,s,r))}ii.flags|=e,a.memoizedState=Fi(1|t,n,s,r)}function Di(e,t){return Ii(8390656,8,e,t)}function Li(e,t){return Ti(2048,8,e,t)}function Ui(e,t){return Ti(4,2,e,t)}function Pi(e,t){return Ti(4,4,e,t)}function Ri(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Oi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ti(4,4,Ri.bind(null,t,e),n)}function Mi(){}function Qi(e,t){var n=xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hi(e,t){var n=xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zi(e,t,n){return 0===(21&si)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=n):(or(n,t)||(n=pt(),ii.lanes|=n,Ul|=n,e.baseState=!0),t)}function Wi(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{vt=n,ai.transition=r}}function Vi(){return xi().memoizedState}function Ki(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qi(e))Xi(t,n);else if(null!==(n=Ts(e,t,n,r))){nc(n,e,r,ec()),Yi(n,t,r)}}function Gi(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qi(e))Xi(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(a.hasEagerState=!0,a.eagerState=o,or(o,i)){var l=t.interleaved;return null===l?(a.next=a,Is(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Ts(e,t,a,r))&&(nc(n,e,r,a=ec()),Yi(n,t,r))}}function qi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Xi(e,t){ui=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}var Ji={readContext:Fs,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},Zi={readContext:Fs,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:Fs,useEffect:Di,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ii(4194308,4,Ri.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ii(4,2,e,t)},useMemo:function(e,t){var n=gi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:Ei,useDebugValue:Mi,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=Ei(!1),t=e[0];return e=Wi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ii,a=gi();if(as){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===El)throw Error(s(349));0!==(30&si)||ji(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Di(Bi.bind(null,r,i,e),[e]),r.flags|=2048,Fi(9,Ci.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=gi(),t=El.identifierPrefix;if(as){var n=Ja;t=":"+t+"R"+(n=(Ya&~(1<<32-it(Ya)-1)).toString(32)+n),0<(n=di++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ai++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$i={readContext:Fs,useCallback:Qi,useContext:Fs,useEffect:Li,useImperativeHandle:Oi,useInsertionEffect:Ui,useLayoutEffect:Pi,useMemo:Hi,useReducer:yi,useRef:_i,useState:function(){return yi(vi)},useDebugValue:Mi,useDeferredValue:function(e){return zi(xi(),oi.memoizedState,e)},useTransition:function(){return[yi(vi)[0],xi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Vi,unstable_isNewReconciler:!1},eo={readContext:Fs,useCallback:Qi,useContext:Fs,useEffect:Li,useImperativeHandle:Oi,useInsertionEffect:Ui,useLayoutEffect:Pi,useMemo:Hi,useReducer:bi,useRef:_i,useState:function(){return bi(vi)},useDebugValue:Mi,useDeferredValue:function(e){var t=xi();return null===oi?t.memoizedState=e:zi(t,oi.memoizedState,e)},useTransition:function(){return[bi(vi)[0],xi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Vi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=P({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:P({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),s=Rs(r,a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,a))&&(nc(t,e,a,r),Ms(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),s=Rs(r,a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,a))&&(nc(t,e,a,r),Ms(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=Rs(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Os(e,a,r))&&(nc(t,e,r,n),Ms(t,e,r))}};function ao(e,t,n,r,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,s))}function so(e,t,n){var r=!1,a=ka,s=t.contextType;return"object"===typeof s&&null!==s?s=Fs(s):(a=Ia(t)?Fa:Sa.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?_a(e,a):ka),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Us(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Fs(s):(s=Ia(t)?Fa:Sa.current,a.context=_a(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ro.enqueueReplaceState(a,a.state,null),Hs(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=Q(r),r=r.return}while(r);var a=n}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ao="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,n){(n=Rs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Vl=r),uo(0,t)},n}function fo(e,t,n){(n=Rs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Ao;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Rs(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var xo=y.ReactCurrentOwner,vo=!1;function yo(e,t,n,r){t.child=null===e?bs(t,null,n,r):ys(t,e.child,n,r)}function bo(e,t,n,r,a){n=n.render;var s=t.ref;return Es(t,a),r=pi(e,t,n,r,s,a),n=mi(),null===e||vo?(as&&n&&es(t),t.flags|=1,yo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function wo(e,t,n,r,a){if(null===e){var s=n.type;return"function"!==typeof s||Ic(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,r,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Wo(e,t,a)}return t.flags|=1,(e=Tc(s,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(vo=!1,t.pendingProps=r=s,0===(e.lanes&a))return t.lanes=e.lanes,Wo(e,t,a);0!==(131072&e.flags)&&(vo=!0)}}return Bo(e,t,n,r,a)}function jo(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ba(Tl,Il),Il|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ba(Tl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ba(Tl,Il),Il|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ba(Tl,Il),Il|=r;return yo(e,t,a,n),t.child}function Co(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Bo(e,t,n,r,a){var s=Ia(n)?Fa:Sa.current;return s=_a(t,s),Es(t,a),n=pi(e,t,n,r,s,a),r=mi(),null===e||vo?(as&&r&&es(t),t.flags|=1,yo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function ko(e,t,n,r,a){if(Ia(n)){var s=!0;Ua(t)}else s=!1;if(Es(t,a),null===t.stateNode)zo(e,t),so(t,n,r),oo(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Fs(c):c=_a(t,c=Ia(n)?Fa:Sa.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&io(t,i,r,c),Ls=!1;var A=t.memoizedState;i.state=A,Hs(t,r,i,a),l=t.memoizedState,o!==r||A!==l||Ea.current||Ls?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Ls||ao(t,n,o,r,A,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ps(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,d=t.pendingProps,A=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Fs(l):l=_a(t,l=Ia(n)?Fa:Sa.current);var h=n.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||A!==l)&&io(t,i,r,l),Ls=!1,A=t.memoizedState,i.state=A,Hs(t,r,i,a);var f=t.memoizedState;o!==d||A!==f||Ea.current||Ls?("function"===typeof h&&(no(t,n,h,r),f=t.memoizedState),(c=Ls||ao(t,n,c,r,A,f,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),r=!1)}return So(e,t,n,r,s,a)}function So(e,t,n,r,a,s){Co(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Pa(t,n,!1),Wo(e,t,s);r=t.stateNode,xo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=ys(t,e.child,null,s),t.child=ys(t,null,o,s)):yo(e,t,o,s),t.memoizedState=r.state,a&&Pa(t,n,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Da(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Da(0,t.context,!1),Xs(e,t.containerInfo)}function Fo(e,t,n,r,a){return hs(),fs(a),t.flags|=256,yo(e,t,n,r),t.child}var _o,Io,To,Do,Lo={dehydrated:null,treeContext:null,retryLane:0};function Uo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Po(e,t,n){var r,a=t.pendingProps,i=$s.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ba($s,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Uc(l,a,0,null),e=Lc(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Uo(n),t.memoizedState=Lo,e):Ro(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,o){if(n)return 256&t.flags?(t.flags&=-257,Oo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Uc({mode:"visible",children:r.children},a,0,null),(i=Lc(i,a,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&ys(t,e.child,null,o),t.child.memoizedState=Uo(o),t.memoizedState=Lo,i);if(0===(1&t.mode))return Oo(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Oo(e,t,o,r=co(i=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),vo||l){if(null!==(r=El)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Ds(e,a),nc(r,e,a,-1))}return pc(),Oo(e,t,o,r=co(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=kc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,rs=ca(a.nextSibling),ns=t,as=!0,ss=null,null!==e&&(Ga[qa++]=Ya,Ga[qa++]=Ja,Ga[qa++]=Xa,Ya=e.id,Ja=e.overflow,Xa=t),t=Ro(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,i,n);if(o){o=a.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Tc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Tc(r,o):(o=Lc(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Uo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,a}return e=(o=e.child).sibling,a=Tc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Ro(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Oo(e,t,n,r){return null!==r&&fs(r),ys(t,e.child,null,n),(e=Ro(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ss(e.return,t,n)}function Qo(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function Ho(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(yo(e,t,r.children,n),0!==(2&(r=$s.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mo(e,n,t);else if(19===e.tag)Mo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ba($s,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Qo(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Qo(t,!0,n,null,s);break;case"together":Qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ul|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Tc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Tc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Ia(t.type)&&Ta(),Ko(t),null;case 3:return r=t.stateNode,Ys(),Ca(Ea),Ca(Sa),ni(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),Io(e,t),Ko(t),null;case 5:Zs(t);var a=qs(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)To(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ko(t),null}if(e=qs(Vs.current),ds(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Aa]=t,r[ha]=i,e=0!==(1&t.mode),n){case"dialog":Or("cancel",r),Or("close",r);break;case"iframe":case"object":case"embed":Or("load",r);break;case"video":case"audio":for(a=0;a<Lr.length;a++)Or(Lr[a],r);break;case"source":Or("error",r);break;case"img":case"image":case"link":Or("error",r),Or("load",r);break;case"details":Or("toggle",r);break;case"input":Y(r,i),Or("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Or("invalid",r);break;case"textarea":ae(r,i),Or("invalid",r)}for(var l in xe(n,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Or("scroll",r)}switch(n){case"input":K(r),$(r,i,!0);break;case"textarea":K(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=$r)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Aa]=t,e[ha]=r,_o(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Or("cancel",e),Or("close",e),a=r;break;case"iframe":case"object":case"embed":Or("load",e),a=r;break;case"video":case"audio":for(a=0;a<Lr.length;a++)Or(Lr[a],e);a=r;break;case"source":Or("error",e),a=r;break;case"img":case"image":case"link":Or("error",e),Or("load",e),a=r;break;case"details":Or("toggle",e),a=r;break;case"input":Y(e,r),a=X(e,r),Or("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=P({},r,{value:void 0}),Or("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Or("invalid",e)}for(i in xe(n,a),c=a)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?me(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&Ae(e,u):"number"===typeof u&&Ae(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=u&&"onScroll"===i&&Or("scroll",e):null!=u&&v(e,i,u,l))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=qs(Gs.current),qs(Vs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[Aa]=t,(i=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Aa]=t,t.stateNode=r}return Ko(t),null;case 13:if(Ca($s),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))As(),hs(),t.flags|=98560,i=!1;else if(i=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[Aa]=t}else hs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$s.current)?0===Dl&&(Dl=3):pc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Ys(),Io(e,t),null===e&&Hr(t.stateNode.containerInfo),Ko(t),null;case 10:return ks(t.type._context),Ko(t),null;case 19:if(Ca($s),null===(i=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Vo(i,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Vo(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ba($s,1&$s.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Hl&&(t.flags|=128,r=!0,Vo(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!as)return Ko(t),null}else 2*Je()-i.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Vo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=$s.current,Ba($s,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function qo(e,t){switch(ts(t),t.tag){case 1:return Ia(t.type)&&Ta(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),Ca(Ea),Ca(Sa),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Ca($s),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));hs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ca($s),null;case 4:return Ys(),null;case 10:return ks(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}_o=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Io=function(){},To=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,qs(Vs.current);var s,i=null;switch(n){case"input":a=X(e,a),r=X(e,r),i=[];break;case"select":a=P({},a,{value:void 0}),r=P({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in xe(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Or("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xo=!1,Yo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){jc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){jc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,n,s)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[Aa],delete t[ha],delete t[pa],delete t[ma],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function Al(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Yo||$o(n,t);case 6:var r=ul,a=dl;ul=null,Al(e,t,n),dl=a,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Ht(e)):la(ul,n.stateNode));break;case 4:r=ul,a=dl,ul=n.stateNode.containerInfo,dl=!0,Al(e,t,n),ul=r,dl=a;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(n,t,i),a=a.next}while(a!==r)}Al(e,t,n);break;case 1:if(!Yo&&($o(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){jc(n,t,o)}Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,Al(e,t,n),Yo=r):Al(e,t,n);break;default:Al(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var r=Sc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));hl(i,o,a),ul=null,dl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){jc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),gl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){jc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){jc(e,e.return,m)}}break;case 1:pl(t,e),gl(e),512&r&&null!==n&&$o(n,n.return);break;case 5:if(pl(t,e),gl(e),512&r&&null!==n&&$o(n,n.return),32&e.flags){var a=e.stateNode;try{Ae(a,"")}catch(m){jc(e,e.return,m)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&J(a,i),ve(l,o);var u=ve(l,i);for(o=0;o<c.length;o+=2){var d=c[o],A=c[o+1];"style"===d?me(a,A):"dangerouslySetInnerHTML"===d?de(a,A):"children"===d?Ae(a,A):v(a,d,A,u)}switch(l){case"input":Z(a,i);break;case"textarea":se(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?ne(a,!!i.multiple,f,!1):h!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[ha]=i}catch(m){jc(e,e.return,m)}}break;case 6:if(pl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(m){jc(e,e.return,m)}}break;case 3:if(pl(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(m){jc(e,e.return,m)}break;case 4:default:pl(t,e),gl(e);break;case 13:pl(t,e),gl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Ql=Je())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(u=Yo)||d,pl(t,e),Yo=u):pl(t,e),gl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zo=e,d=e.child;null!==d;){for(A=Zo=d;null!==Zo;){switch(f=(h=Zo).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:$o(h,h.return);var p=h.stateNode;if("function"===typeof p.componentWillUnmount){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){jc(r,n,m)}}break;case 5:$o(h,h.return);break;case 22:if(null!==h.memoizedState){bl(A);continue}}null!==f?(f.return=h,Zo=f):bl(A)}d=d.sibling}e:for(d=null,A=e;;){if(5===A.tag){if(null===d){d=A;try{a=A.stateNode,u?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=A.stateNode,o=void 0!==(c=A.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(m){jc(e,e.return,m)}}}else if(6===A.tag){if(null===d)try{A.stateNode.nodeValue=u?"":A.memoizedProps}catch(m){jc(e,e.return,m)}}else if((22!==A.tag&&23!==A.tag||null===A.memoizedState||A===e)&&null!==A.child){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;null===A.sibling;){if(null===A.return||A.return===e)break e;d===A&&(d=null),A=A.return}d===A&&(d=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:pl(t,e),gl(e),4&r&&fl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(Ae(a,""),r.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){jc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Zo=e,vl(e,t,n)}function vl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var a=Zo,s=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Xo;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Xo;var c=Yo;if(Xo=i,(Yo=l)&&!c)for(Zo=a;null!==Zo;)l=(i=Zo).child,22===i.tag&&null!==i.memoizedState?wl(a):null!==l?(l.return=i,Zo=l):wl(a);for(;null!==s;)Zo=s,vl(s,t,n),s=s.sibling;Zo=a,Xo=o,Yo=c}yl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Zo=s):yl(e)}}function yl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&zs(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var A=d.dehydrated;null!==A&&Ht(A)}}}break;default:throw Error(s(163))}Yo||512&t.flags&&al(t)}catch(h){jc(t,t.return,h)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function bl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function wl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){jc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){jc(t,a,l)}}var s=t.return;try{al(t)}catch(l){jc(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){jc(t,i,l)}}}catch(l){jc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Nl,jl=Math.ceil,Cl=y.ReactCurrentDispatcher,Bl=y.ReactCurrentOwner,kl=y.ReactCurrentBatchConfig,Sl=0,El=null,Fl=null,_l=0,Il=0,Tl=ja(0),Dl=0,Ll=null,Ul=0,Pl=0,Rl=0,Ol=null,Ml=null,Ql=0,Hl=1/0,zl=null,Wl=!1,Vl=null,Kl=null,Gl=!1,ql=null,Xl=0,Yl=0,Jl=null,Zl=-1,$l=0;function ec(){return 0!==(6&Sl)?Je():-1!==Zl?Zl:Zl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Sl)&&0!==_l?_l&-_l:null!==ps.transition?(0===$l&&($l=pt()),$l):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(s(185));gt(e,n,r),0!==(2&Sl)&&e===El||(e===El&&(0===(2&Sl)&&(Pl|=n),4===Dl&&oc(e,_l)),rc(e,r),1===n&&0===Sl&&0===(1&t.mode)&&(Hl=Je()+500,Oa&&Ha()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&r)||(a[i]=ht(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=At(e,e===El?_l:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Oa=!0,Qa(e)}(lc.bind(null,e)):Qa(lc.bind(null,e)),ia(function(){0===(6&Sl)&&Ha()}),n=null;else{switch(yt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ec(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zl=-1,$l=0,0!==(6&Sl))throw Error(s(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=At(e,e===El?_l:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var a=Sl;Sl|=2;var i=fc();for(El===e&&_l===t||(zl=null,Hl=Je()+500,Ac(e,t));;)try{xc();break}catch(l){hc(e,l)}Bs(),Cl.current=i,Sl=a,null!==Fl?t=0:(El=null,_l=0,t=Dl)}if(0!==t){if(2===t&&(0!==(a=ft(e))&&(r=a,t=sc(e,a))),1===t)throw n=Ll,Ac(e,0),oc(e,r),rc(e,Je()),n;if(6===t)oc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!or(s(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=mc(e,r))&&(0!==(i=ft(e))&&(r=i,t=sc(e,i))),1===t))throw n=Ll,Ac(e,0),oc(e,r),rc(e,Je()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:bc(e,Ml,zl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Ql+500-Je())){if(0!==At(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(bc.bind(null,e,Ml,zl),t);break}bc(e,Ml,zl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>a&&(a=o),r&=~i}if(r=a,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jl(r/1960))-r)){e.timeoutHandle=ra(bc.bind(null,e,Ml,zl),r);break}bc(e,Ml,zl);break;default:throw Error(s(329))}}}return rc(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function sc(e,t){var n=Ol;return e.current.memoizedState.isDehydrated&&(Ac(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Ml,Ml=n,null!==t&&ic(t)),e}function ic(e){null===Ml?Ml=e:Ml.push.apply(Ml,e)}function oc(e,t){for(t&=~Rl,t&=~Pl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Sl))throw Error(s(327));wc();var t=At(e,0);if(0===(1&t))return rc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,Ac(e,0),oc(e,t),rc(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Ml,zl),rc(e,Je()),null}function cc(e,t){var n=Sl;Sl|=1;try{return e(t)}finally{0===(Sl=n)&&(Hl=Je()+500,Oa&&Ha())}}function uc(e){null!==ql&&0===ql.tag&&0===(6&Sl)&&wc();var t=Sl;Sl|=1;var n=kl.transition,r=vt;try{if(kl.transition=null,vt=1,e)return e()}finally{vt=r,kl.transition=n,0===(6&(Sl=t))&&Ha()}}function dc(){Il=Tl.current,Ca(Tl)}function Ac(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Fl)for(n=Fl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ta();break;case 3:Ys(),Ca(Ea),Ca(Sa),ni();break;case 5:Zs(r);break;case 4:Ys();break;case 13:case 19:Ca($s);break;case 10:ks(r.type._context);break;case 22:case 23:dc()}n=n.return}if(El=e,Fl=e=Tc(e.current,null),_l=Il=t,Dl=0,Ll=null,Rl=Pl=Ul=0,Ml=Ol=null,null!==_s){for(t=0;t<_s.length;t++)if(null!==(r=(n=_s[t]).interleaved)){n.interleaved=null;var a=r.next,s=n.pending;if(null!==s){var i=s.next;s.next=a,r.next=i}n.pending=r}_s=null}return e}function hc(e,t){for(;;){var n=Fl;try{if(Bs(),ri.current=Ji,ci){for(var r=ii.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ci=!1}if(si=0,li=oi=ii=null,ui=!1,di=0,Bl.current=null,null===n||null===n.return){Dl=1,Ll=t,Fl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=_l,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,A=d.tag;if(0===(1&d.mode)&&(0===A||11===A||15===A)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=mo(o);if(null!==f){f.flags&=-257,go(f,o,l,0,t),1&f.mode&&po(i,u,t),c=u;var p=(t=f).updateQueue;if(null===p){var m=new Set;m.add(c),t.updateQueue=m}else p.add(c);break e}if(0===(1&t)){po(i,u,t),pc();break e}c=Error(s(426))}else if(as&&1&l.mode){var g=mo(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),go(g,o,l,0,t),fs(lo(c,l));break e}}i=c=lo(c,l),4!==Dl&&(Dl=2),null===Ol?Ol=[i]:Ol.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Qs(i,ho(0,c,t));break e;case 1:l=c;var x=i.type,v=i.stateNode;if(0===(128&i.flags)&&("function"===typeof x.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Kl||!Kl.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,Qs(i,fo(i,l,t));break e}}i=i.return}while(null!==i)}yc(n)}catch(y){t=y,Fl===n&&null!==n&&(Fl=n=n.return);continue}break}}function fc(){var e=Cl.current;return Cl.current=Ji,null===e?Ji:e}function pc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===El||0===(268435455&Ul)&&0===(268435455&Pl)||oc(El,_l)}function mc(e,t){var n=Sl;Sl|=2;var r=fc();for(El===e&&_l===t||(zl=null,Ac(e,t));;)try{gc();break}catch(a){hc(e,a)}if(Bs(),Sl=n,Cl.current=r,null!==Fl)throw Error(s(261));return El=null,_l=0,Dl}function gc(){for(;null!==Fl;)vc(Fl)}function xc(){for(;null!==Fl&&!Xe();)vc(Fl)}function vc(e){var t=Nl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?yc(e):Fl=t,Bl.current=null}function yc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Il)))return void(Fl=n)}else{if(null!==(n=qo(n,t)))return n.flags&=32767,void(Fl=n);if(null===e)return Dl=6,void(Fl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Fl=t);Fl=t=e}while(null!==t);0===Dl&&(Dl=5)}function bc(e,t,n){var r=vt,a=kl.transition;try{kl.transition=null,vt=1,function(e,t,n,r){do{wc()}while(null!==ql);if(0!==(6&Sl))throw Error(s(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}(e,i),e===El&&(Fl=El=null,_l=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ec(tt,function(){return wc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=kl.transition,kl.transition=null;var o=vt;vt=1;var l=Sl;Sl|=4,Bl.current=null,function(e,t){if(ea=Wt,hr(e=Ar())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(b){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,A=e,h=null;t:for(;;){for(var f;A!==n||0!==a&&3!==A.nodeType||(l=o+a),A!==i||0!==r&&3!==A.nodeType||(c=o+r),3===A.nodeType&&(o+=A.nodeValue.length),null!==(f=A.firstChild);)h=A,A=f;for(;;){if(A===e)break t;if(h===n&&++u===a&&(l=o),h===i&&++d===r&&(c=o),null!==(f=A.nextSibling))break;h=(A=h).parentNode}A=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Wt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,g=p.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),g);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(s(163))}}catch(b){jc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}p=tl,tl=!1}(e,n),ml(n,e),fr(ta),Wt=!!ea,ta=ea=null,e.current=n,xl(n,e,a),Ye(),Sl=l,vt=o,kl.transition=i}else e.current=n;if(Gl&&(Gl=!1,ql=e,Xl=a),i=e.pendingLanes,0===i&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Wl)throw Wl=!1,e=Vl,Vl=null,e;0!==(1&Xl)&&0!==e.tag&&wc(),i=e.pendingLanes,0!==(1&i)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,Ha()}(e,t,n,r)}finally{kl.transition=a,vt=r}return null}function wc(){if(null!==ql){var e=yt(Xl),t=kl.transition,n=vt;try{if(kl.transition=null,vt=16>e?16:e,null===ql)var r=!1;else{if(e=ql,ql=null,Xl=0,0!==(6&Sl))throw Error(s(331));var a=Sl;for(Sl|=4,Zo=e.current;null!==Zo;){var i=Zo,o=i.child;if(0!==(16&Zo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var A=d.child;if(null!==A)A.return=d,Zo=A;else for(;null!==Zo;){var h=(d=Zo).sibling,f=d.return;if(sl(d),d===u){Zo=null;break}if(null!==h){h.return=f,Zo=h;break}Zo=f}}}var p=i.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Zo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(i=Zo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var x=i.sibling;if(null!==x){x.return=i.return,Zo=x;break e}Zo=i.return}}var v=e.current;for(Zo=v;null!==Zo;){var y=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==y)y.return=o,Zo=y;else e:for(o=v;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){jc(l,l.return,w)}if(l===o){Zo=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Zo=b;break e}Zo=l.return}}if(Sl=a,Ha(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(w){}r=!0}return r}finally{vt=n,kl.transition=t}}return!1}function Nc(e,t,n){e=Os(e,t=ho(0,t=lo(n,t),1),1),t=ec(),null!==e&&(gt(e,1,t),rc(e,t))}function jc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Os(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(_l&n)===n&&(4===Dl||3===Dl&&(130023424&_l)===_l&&500>Je()-Ql?Ac(e,0):Rl|=n),rc(e,t)}function Bc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ds(e,t))&&(gt(e,t,n),rc(e,n))}function kc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Bc(e,n)}function Sc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Bc(e,n)}function Ec(e,t){return Ge(e,t)}function Fc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _c(e,t,n,r){return new Fc(e,t,n,r)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Tc(e,t){var n=e.alternate;return null===n?((n=_c(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,a,i){var o=2;if(r=e,"function"===typeof e)Ic(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Lc(n.children,a,i,t);case j:o=8,a|=8;break;case C:return(e=_c(12,n,t,2|a)).elementType=C,e.lanes=i,e;case E:return(e=_c(13,n,t,a)).elementType=E,e.lanes=i,e;case F:return(e=_c(19,n,t,a)).elementType=F,e.lanes=i,e;case T:return Uc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case B:o=10;break e;case k:o=9;break e;case S:o=11;break e;case _:o=14;break e;case I:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=_c(o,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Lc(e,t,n,r){return(e=_c(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=_c(22,e,r,t)).elementType=T,e.lanes=n,e.stateNode={isHidden:!1},e}function Pc(e,t,n){return(e=_c(6,e,null,t)).lanes=n,e}function Rc(e,t,n){return(t=_c(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Oc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Mc(e,t,n,r,a,s,i,o,l){return e=new Oc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=_c(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Us(s),e}function Qc(e){if(!e)return ka;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ia(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ia(n))return La(e,n,t)}return t}function Hc(e,t,n,r,a,s,i,o,l){return(e=Mc(n,r,!0,e,0,s,0,o,l)).context=Qc(null),n=e.current,(s=Rs(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,a),e.current.lanes=a,gt(e,a,r),rc(e,r),e}function zc(e,t,n,r){var a=t.current,s=ec(),i=tc(a);return n=Qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Rs(s,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(a,t,i))&&(nc(e,a,i,s),Ms(e,a,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ea.current)vo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vo=!1,function(e,t,n){switch(t.tag){case 3:Eo(t),hs();break;case 5:Js(t);break;case 1:Ia(t.type)&&Ua(t);break;case 4:Xs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ba(ws,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ba($s,1&$s.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Po(e,t,n):(Ba($s,1&$s.current),null!==(e=Wo(e,t,n))?e.sibling:null);Ba($s,1&$s.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ho(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ba($s,$s.current),r)break;return null;case 22:case 23:return t.lanes=0,jo(e,t,n)}return Wo(e,t,n)}(e,t,n);vo=0!==(131072&e.flags)}else vo=!1,as&&0!==(1048576&t.flags)&&$a(t,Ka,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zo(e,t),e=t.pendingProps;var a=_a(t,Sa.current);Es(t,n),a=pi(null,t,r,e,a,n);var i=mi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ia(r)?(i=!0,Ua(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Us(t),a.updater=ro,t.stateNode=a,a._reactInternals=t,oo(t,r,e,n),t=So(null,t,r,!0,i,n)):(t.tag=0,as&&i&&es(t),yo(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zo(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Ic(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===S)return 11;if(e===_)return 14}return 2}(r),e=to(r,e),a){case 0:t=Bo(null,t,r,e,n);break e;case 1:t=ko(null,t,r,e,n);break e;case 11:t=bo(null,t,r,e,n);break e;case 14:t=wo(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Bo(e,t,r,a=t.elementType===r?a:to(r,a),n);case 1:return r=t.type,a=t.pendingProps,ko(e,t,r,a=t.elementType===r?a:to(r,a),n);case 3:e:{if(Eo(t),null===e)throw Error(s(387));r=t.pendingProps,a=(i=t.memoizedState).element,Ps(e,t),Hs(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Fo(e,t,r,n,a=lo(Error(s(423)),t));break e}if(r!==a){t=Fo(e,t,r,n,a=lo(Error(s(424)),t));break e}for(rs=ca(t.stateNode.containerInfo.firstChild),ns=t,as=!0,ss=null,n=bs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hs(),r===a){t=Wo(e,t,n);break e}yo(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,na(r,a)?o=null:null!==i&&na(r,i)&&(t.flags|=32),Co(e,t),yo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Po(e,t,n);case 4:return Xs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ys(t,null,r,n):yo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,bo(e,t,r,a=t.elementType===r?a:to(r,a),n);case 7:return yo(e,t,t.pendingProps,n),t.child;case 8:case 12:return yo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ba(ws,r._currentValue),r._currentValue=o,null!==i)if(or(i.value,o)){if(i.children===a.children&&!Ea.current){t=Wo(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Rs(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ss(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ss(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}yo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Es(t,n),r=r(a=Fs(a)),t.flags|=1,yo(e,t,r,n),t.child;case 14:return a=to(r=t.type,t.pendingProps),wo(e,t,r,a=to(r.type,a),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:to(r,a),zo(e,t),t.tag=1,Ia(r)?(e=!0,Ua(t)):e=!1,Es(t,n),so(t,r,a),oo(t,r,a,n),So(null,t,r,!0,e,n);case 19:return Ho(e,t,n);case 22:return jo(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function qc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function $c(e,t,n,r,a){var s=n._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=Wc(i);o.call(e)}}zc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var s=r;r=function(){var e=Wc(i);s.call(e)}}var i=Hc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=i,e[fa]=i.current,Hr(8===e.nodeType?e.parentNode:e),uc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=Mc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fa]=l.current,Hr(8===e.nodeType?e.parentNode:e),uc(function(){zc(t,l,n,r)}),l}(n,t,e,a,r);return Wc(i)}Xc.prototype.render=qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));zc(e,t,null,null)},Xc.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){zc(null,e,null,null)}),t[fa]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=jt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Tt.length&&0!==t&&t<Tt[n].priority;n++);Tt.splice(n,0,e),0===n&&Pt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(xt(t,1|n),rc(t,Je()),0===(6&Sl)&&(Hl=Je()+500,Ha()))}break;case 13:uc(function(){var t=Ds(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},wt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),n=Ds(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},jt=function(){return vt},Ct=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},we=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ba(r);if(!a)throw Error(s(90));G(r),Z(r,a)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Se=cc,Ee=uc;var eu={usingClientEntryPoint:!1,Events:[va,ya,ba,Be,ke,cc]},tu={findFiberByHostInstance:xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",a=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Mc(e,1,!1,null,0,n,0,r,a),e[fa]=t.current,Hr(8===e.nodeType?e.parentNode:e),new qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,a,0,i,o),e[fa]=t.current,Hr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[fa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},9379:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(4980);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},9950:(e,t,n)=>{"use strict";e.exports=n(2049)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,n.d(s,i),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{82:"8aa65602",239:"6b7f098d"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";n.l=(r,a,s,i)=>{if(e[r])e[r].push(a);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[a];var A=(t,n)=>{o.onerror=o.onload=null,clearTimeout(h);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach(e=>e(n)),t)return t(n)},h=setTimeout(A.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=A.bind(null,o.onerror),o.onload=A.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var s=new Promise((n,r)=>a=e[t]=[n,r]);r.push(a[2]=s);var i=n.p+n.u(t),o=new Error;n.l(i,r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,a[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var a,s,i=r[0],o=r[1],l=r[2],c=0;if(i.some(t=>0!==e[t])){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)l(n)}for(t&&t(r);c<i.length;c++)s=i[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkfrontend=self.webpackChunkfrontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>lr,hasStandardBrowserEnv:()=>ur,hasStandardBrowserWebWorkerEnv:()=>dr,navigator:()=>cr,origin:()=>Ar});var t,r=n(9950),a=n.t(r,2),s=n(1352);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const o="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(ni){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),i({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function A(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function f(e,n,r,a){void 0===a&&(a={});let{window:s=document.defaultView,v5Compat:c=!1}=a,h=s.history,f=t.Pop,p=null,m=g();function g(){return(h.state||{idx:null}).idx}function x(){f=t.Pop;let e=g(),n=null==e?null:e-m;m=e,p&&p({action:f,location:y.location,delta:n})}function v(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:A(e);return n=n.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,h.replaceState(i({},h.state,{idx:m}),""));let y={get action(){return f},get location(){return e(s,h)},listen(e){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(o,x),p=e,()=>{s.removeEventListener(o,x),p=null}},createHref:e=>n(s,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;let a=d(y.location,e,n);r&&r(a,e),m=g()+1;let i=u(a,m),o=y.createHref(a);try{h.pushState(i,"",o)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;s.location.assign(o)}c&&p&&p({action:f,location:y.location,delta:1})},replace:function(e,n){f=t.Replace;let a=d(y.location,e,n);r&&r(a,e),m=g();let s=u(a,m),i=y.createHref(a);h.replaceState(s,"",i),c&&p&&p({action:f,location:y.location,delta:0})},go:e=>h.go(e)};return y}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){return void 0===n&&(n="/"),g(e,t,n,!1)}function g(e,t,n,r){let a=_(("string"===typeof t?h(t):t).pathname||"/",n);if(null==a)return null;let s=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=F(a);i=S(s[o],e,r)}return i}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let a=(e,a,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(l(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let o=U([r,i.relativePath]),c=n.concat(i);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),x(e.children,t,c,o)),(null!=e.path||e.index)&&t.push({path:o,score:k(o,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of v(e.path))a(e,t,r);else a(e,t)}),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return a?[s,""]:[s];let i=v(r.join("/")),o=[];return o.push(...i.map(e=>""===e?s:[s,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const y=/^:[\w-]+$/,b=3,w=2,N=1,j=10,C=-2,B=e=>"*"===e;function k(e,t){let n=e.split("/"),r=n.length;return n.some(B)&&(r+=C),t&&(r+=w),n.filter(e=>!B(e)).reduce((e,t)=>e+(y.test(t)?b:""===t?N:j),r)}function S(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,a={},s="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:U([s,u.pathname]),pathnameBase:P(U([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=U([s,u.pathnameBase]))}return i}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let s=new RegExp(a,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=o[n]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:i,pattern:e}}function F(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function _(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function I(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function T(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function D(e,t){let n=T(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let a;void 0===r&&(r=!1),"string"===typeof e?a=h(e):(a=i({},e),l(!a.pathname||!a.pathname.includes("?"),I("?","pathname","search",a)),l(!a.pathname||!a.pathname.includes("#"),I("#","pathname","hash",a)),l(!a.search||!a.search.includes("#"),I("#","search","hash",a)));let s,o=""===e||""===a.pathname,c=o?"/":a.pathname;if(null==c)s=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:a=""}="string"===typeof e?h(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:R(r),hash:O(a)}}(a,s),d=c&&"/"!==c&&c.endsWith("/"),A=(o||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!A||(u.pathname+="/"),u}const U=e=>e.join("/").replace(/\/\/+/g,"/"),P=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),R=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",O=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function M(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Q=["post","put","patch","delete"],H=(new Set(Q),["get",...Q]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z.apply(this,arguments)}const W=r.createContext(null);const V=r.createContext(null);const K=r.createContext(null);const G=r.createContext(null);const q=r.createContext({outlet:null,matches:[],isDataRoute:!1});const X=r.createContext(null);function Y(){return null!=r.useContext(G)}function J(){return Y()||l(!1),r.useContext(G).location}function Z(e){r.useContext(K).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(q);return e?function(){let{router:e}=ue(le.UseNavigateStable),t=Ae(ce.UseNavigateStable),n=r.useRef(!1);Z(()=>{n.current=!0});let a=r.useCallback(function(r,a){void 0===a&&(a={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,z({fromRouteId:t},a)))},[e,t]);return a}():function(){Y()||l(!1);let e=r.useContext(W),{basename:t,future:n,navigator:a}=r.useContext(K),{matches:s}=r.useContext(q),{pathname:i}=J(),o=JSON.stringify(D(s,n.v7_relativeSplatPath)),c=r.useRef(!1);Z(()=>{c.current=!0});let u=r.useCallback(function(n,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof n)return void a.go(n);let s=L(n,JSON.parse(o),i,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:U([t,s.pathname])),(r.replace?a.replace:a.push)(s,r.state,r)},[t,a,o,i,e]);return u}()}function te(e,t){let{relative:n}=void 0===t?{}:t,{future:a}=r.useContext(K),{matches:s}=r.useContext(q),{pathname:i}=J(),o=JSON.stringify(D(s,a.v7_relativeSplatPath));return r.useMemo(()=>L(e,JSON.parse(o),i,"path"===n),[e,o,i,n])}function ne(e,n,a,s){Y()||l(!1);let{navigator:i}=r.useContext(K),{matches:o}=r.useContext(q),c=o[o.length-1],u=c?c.params:{},d=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let A,f=J();if(n){var p;let e="string"===typeof n?h(n):n;"/"===d||(null==(p=e.pathname)?void 0:p.startsWith(d))||l(!1),A=e}else A=f;let g=A.pathname||"/",x=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=m(e,{pathname:x});let y=oe(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:U([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:U([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,a,s);return n&&y?r.createElement(G.Provider,{value:{location:z({pathname:"/",search:"",hash:"",state:null,key:"default"},A),navigationType:t.Pop}},y):y}function re(){let e=function(){var e;let t=r.useContext(X),n=de(ce.UseRouteError),a=Ae(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[a]}(),t=M(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const ae=r.createElement(re,null);class se extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(q.Provider,{value:this.props.routeContext},r.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:t,match:n,children:a}=e,s=r.useContext(W);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(q.Provider,{value:t},a)}function oe(e,t,n,a){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===a&&(a=null),null==e){var i;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(i=a)&&i.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,c=null==(s=n)?void 0:s.errors;if(null!=c){let e=o.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||l(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,d=-1;if(n&&a&&a.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){u=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,a,s)=>{let i,l=!1,A=null,h=null;var f;n&&(i=c&&a.route.id?c[a.route.id]:void 0,A=a.route.errorElement||ae,u&&(d<0&&0===s?(f="route-fallback",!1||he[f]||(he[f]=!0),l=!0,h=null):d===s&&(l=!0,h=a.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,s+1)),m=()=>{let t;return t=i?A:l?h:a.route.Component?r.createElement(a.route.Component,null):a.route.element?a.route.element:e,r.createElement(ie,{match:a,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(a.route.ErrorBoundary||a.route.errorElement||0===s)?r.createElement(se,{location:n.location,revalidation:n.revalidation,component:A,error:i,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function ue(e){let t=r.useContext(W);return t||l(!1),t}function de(e){let t=r.useContext(V);return t||l(!1),t}function Ae(e){let t=function(){let e=r.useContext(q);return e||l(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||l(!1),n.route.id}const he={};function fe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}a.startTransition;function pe(e){let{to:t,replace:n,state:a,relative:s}=e;Y()||l(!1);let{future:i,static:o}=r.useContext(K),{matches:c}=r.useContext(q),{pathname:u}=J(),d=ee(),A=L(t,D(c,i.v7_relativeSplatPath),u,"path"===s),h=JSON.stringify(A);return r.useEffect(()=>d(JSON.parse(h),{replace:n,state:a,relative:s}),[d,h,s,n,a]),null}function me(e){l(!1)}function ge(e){let{basename:n="/",children:a=null,location:s,navigationType:i=t.Pop,navigator:o,static:c=!1,future:u}=e;Y()&&l(!1);let d=n.replace(/^\/*/,"/"),A=r.useMemo(()=>({basename:d,navigator:o,static:c,future:z({v7_relativeSplatPath:!1},u)}),[d,u,o,c]);"string"===typeof s&&(s=h(s));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:x="default"}=s,v=r.useMemo(()=>{let e=_(f,d);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:x},navigationType:i}},[d,f,p,m,g,x,i]);return null==v?null:r.createElement(K.Provider,{value:A},r.createElement(G.Provider,{children:a,value:v}))}function xe(e){let{children:t,location:n}=e;return ne(ve(t),n)}new Promise(()=>{});r.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,a)=>{if(!r.isValidElement(e))return;let s=[...t,a];if(e.type===r.Fragment)return void n.push.apply(n,ve(e.props.children,s));e.type!==me&&l(!1),e.props.index&&e.props.children&&l(!1);let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ve(e.props.children,s)),n.push(i)}),n}var ye=n(9379);function be(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const we=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Ne=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var je={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ce=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Be=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:c}=e,u=be(e,Ce);return(0,r.createElement)("svg",(0,ye.A)((0,ye.A)((0,ye.A)({ref:t},je),{},{width:a,height:a,stroke:n,strokeWidth:i?24*Number(s)/Number(a):s,className:Ne("lucide",o)},!l&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"}),u),[...c.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),ke=["className"],Se=(e,t)=>{const n=(0,r.forwardRef)((n,a)=>{let{className:s}=n,i=be(n,ke);return(0,r.createElement)(Be,(0,ye.A)({ref:a,iconNode:t,className:Ne("lucide-".concat((o=we(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),s)},i));var o});return n.displayName=we(e),n},Ee=Se("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);var Fe=n(7119),_e=n.t(Fe,2);function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ie.apply(this,arguments)}function Te(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const De=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Le=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(ni){}const Ue=r.createContext({isTransitioning:!1});new Map;const Pe=a.startTransition;_e.flushSync,a.useId;function Re(e){let{basename:t,children:n,future:a,window:s}=e,i=r.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),f(function(e,t){let{pathname:n,search:r,hash:a}=e.location;return d("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:A(t)},null,o)));let l=i.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:h}=a||{},p=r.useCallback(e=>{h&&Pe?Pe(()=>u(e)):u(e)},[u,h]);return r.useLayoutEffect(()=>l.listen(p),[l,p]),r.useEffect(()=>fe(a),[a]),r.createElement(ge,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:a})}const Oe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Me=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qe=r.forwardRef(function(e,t){let n,{onClick:a,relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:f}=e,p=Te(e,De),{basename:m}=r.useContext(K),g=!1;if("string"===typeof d&&Me.test(d)&&(n=d,Oe))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=_(t.pathname,m);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:g=!0}catch(ni){}let x=function(e,t){let{relative:n}=void 0===t?{}:t;Y()||l(!1);let{basename:a,navigator:s}=r.useContext(K),{hash:i,pathname:o,search:c}=te(e,{relative:n}),u=o;return"/"!==a&&(u="/"===o?a:U([a,o])),s.createHref({pathname:u,search:c,hash:i})}(d,{relative:s}),v=function(e,t){let{target:n,replace:a,state:s,preventScrollReset:i,relative:o,viewTransition:l}=void 0===t?{}:t,c=ee(),u=J(),d=te(e,{relative:o});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==a?a:A(u)===A(d);c(e,{replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,a,s,n,e,i,o,l])}(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:s,viewTransition:f});return r.createElement("a",Ie({},p,{href:n||x,onClick:g||i?a:function(e){a&&a(e),e.defaultPrevented||v(e)},ref:t,target:u}))});const He=r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:a=!1,className:s="",end:i=!1,style:o,to:c,viewTransition:u,children:d}=e,A=Te(e,Le),h=te(c,{relative:A.relative}),f=J(),p=r.useContext(V),{navigator:m,basename:g}=r.useContext(K),x=null!=p&&function(e,t){void 0===t&&(t={});let n=r.useContext(Ue);null==n&&l(!1);let{basename:a}=Ve(ze.useViewTransitionState),s=te(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=_(n.currentLocation.pathname,a)||n.currentLocation.pathname,o=_(n.nextLocation.pathname,a)||n.nextLocation.pathname;return null!=E(s.pathname,o)||null!=E(s.pathname,i)}(h)&&!0===u,v=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,y=f.pathname,b=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;a||(y=y.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase()),b&&g&&(b=_(b,g)||b);const w="/"!==v&&v.endsWith("/")?v.length-1:v.length;let N,j=y===v||!i&&y.startsWith(v)&&"/"===y.charAt(w),C=null!=b&&(b===v||!i&&b.startsWith(v)&&"/"===b.charAt(v.length)),B={isActive:j,isPending:C,isTransitioning:x},k=j?n:void 0;N="function"===typeof s?s(B):[s,j?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let S="function"===typeof o?o(B):o;return r.createElement(Qe,Ie({},A,{"aria-current":k,className:N,ref:t,style:S,to:c,viewTransition:u}),"function"===typeof d?d(B):d)});var ze,We;function Ve(e){let t=r.useContext(W);return t||l(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ze||(ze={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(We||(We={}));var Ke={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ge=r.createContext&&r.createContext(Ke),qe=["attr","size","title"];function Xe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ye.apply(this,arguments)}function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach(function(t){$e(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function $e(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function et(e){return e&&e.map((e,t)=>r.createElement(e.tag,Ze({key:t},e.attr),et(e.child)))}function tt(e){return t=>r.createElement(nt,Ye({attr:Ze({},e.attr)},t),et(e.child))}function nt(e){var t=t=>{var n,{attr:a,size:s,title:i}=e,o=Xe(e,qe),l=s||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",Ye({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,o,{className:n,style:Ze(Ze({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&r.createElement("title",null,i),e.children)};return void 0!==Ge?r.createElement(Ge.Consumer,null,e=>t(e)):t(Ke)}function rt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"20",height:"5",x:"2",y:"3",rx:"1"},child:[]},{tag:"path",attr:{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"},child:[]},{tag:"path",attr:{d:"M10 12h4"},child:[]}]})(e)}function at(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 9h6V5l7 7-7 7v-4H6V9z"},child:[]}]})(e)}function st(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 19-7-7 7-7"},child:[]},{tag:"path",attr:{d:"M19 12H5"},child:[]}]})(e)}function it(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z"},child:[]},{tag:"path",attr:{d:"m7 16.5-4.74-2.85"},child:[]},{tag:"path",attr:{d:"m7 16.5 5-3"},child:[]},{tag:"path",attr:{d:"M7 16.5v5.17"},child:[]},{tag:"path",attr:{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z"},child:[]},{tag:"path",attr:{d:"m17 16.5-5-3"},child:[]},{tag:"path",attr:{d:"m17 16.5 4.74-2.85"},child:[]},{tag:"path",attr:{d:"M17 16.5v5.17"},child:[]},{tag:"path",attr:{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z"},child:[]},{tag:"path",attr:{d:"M12 8 7.26 5.15"},child:[]},{tag:"path",attr:{d:"m12 8 4.74-2.85"},child:[]},{tag:"path",attr:{d:"M12 13.5V8"},child:[]}]})(e)}function ot(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M9 22v-4h6v4"},child:[]},{tag:"path",attr:{d:"M8 6h.01"},child:[]},{tag:"path",attr:{d:"M16 6h.01"},child:[]},{tag:"path",attr:{d:"M12 6h.01"},child:[]},{tag:"path",attr:{d:"M12 10h.01"},child:[]},{tag:"path",attr:{d:"M12 14h.01"},child:[]},{tag:"path",attr:{d:"M16 10h.01"},child:[]},{tag:"path",attr:{d:"M16 14h.01"},child:[]},{tag:"path",attr:{d:"M8 10h.01"},child:[]},{tag:"path",attr:{d:"M8 14h.01"},child:[]}]})(e)}function lt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 2v4"},child:[]},{tag:"path",attr:{d:"M16 2v4"},child:[]},{tag:"rect",attr:{width:"18",height:"18",x:"3",y:"4",rx:"2"},child:[]},{tag:"path",attr:{d:"M3 10h18"},child:[]}]})(e)}function ct(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"3"},child:[]}]})(e)}function ut(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 3v16a2 2 0 0 0 2 2h16"},child:[]},{tag:"path",attr:{d:"M7 16h8"},child:[]},{tag:"path",attr:{d:"M7 11h12"},child:[]},{tag:"path",attr:{d:"M7 6h3"},child:[]}]})(e)}function dt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z"},child:[]},{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]}]})(e)}function At(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 6 9 17l-5-5"},child:[]}]})(e)}function ht(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m6 9 6 6 6-6"},child:[]}]})(e)}function ft(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m9 18 6-6-6-6"},child:[]}]})(e)}function pt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"8",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",x2:"12.01",y1:"16",y2:"16"},child:[]}]})(e)}function mt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"m9 12 2 2 4-4"},child:[]}]})(e)}function gt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"},child:[]},{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"path",attr:{d:"m9 14 2 2 4-4"},child:[]}]})(e)}function xt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function vt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",x2:"12",y1:"2",y2:"22"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function yt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"15",y2:"3"},child:[]}]})(e)}function bt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"},child:[]}]})(e)}function wt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function Nt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"},child:[]},{tag:"path",attr:{d:"M14 2v4a2 2 0 0 0 2 2h4"},child:[]},{tag:"path",attr:{d:"m9 15 2 2 4-4"},child:[]}]})(e)}function jt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3"},child:[]},{tag:"path",attr:{d:"M14 2v4a2 2 0 0 0 2 2h4"},child:[]},{tag:"circle",attr:{cx:"8",cy:"16",r:"6"},child:[]},{tag:"path",attr:{d:"M9.5 17.5 8 16.25V14"},child:[]}]})(e)}function Ct(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"},child:[]},{tag:"path",attr:{d:"M14 2v4a2 2 0 0 0 2 2h4"},child:[]},{tag:"path",attr:{d:"M10 9H8"},child:[]},{tag:"path",attr:{d:"M16 13H8"},child:[]},{tag:"path",attr:{d:"M16 17H8"},child:[]}]})(e)}function Bt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function kt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"},child:[]},{tag:"path",attr:{d:"M3 3v5h5"},child:[]},{tag:"path",attr:{d:"M12 7v5l4 2"},child:[]}]})(e)}function St(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 16 12 14 15 10 15 8 12 2 12"},child:[]},{tag:"path",attr:{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"},child:[]}]})(e)}function Et(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 3h12"},child:[]},{tag:"path",attr:{d:"M6 8h12"},child:[]},{tag:"path",attr:{d:"m6 13 8.5 8"},child:[]},{tag:"path",attr:{d:"M6 13h3"},child:[]},{tag:"path",attr:{d:"M9 13c6.667 0 6.667-10 0-10"},child:[]}]})(e)}function Ft(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M12 16v-4"},child:[]},{tag:"path",attr:{d:"M12 8h.01"},child:[]}]})(e)}function _t(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"7",height:"9",x:"3",y:"3",rx:"1"},child:[]},{tag:"rect",attr:{width:"7",height:"5",x:"14",y:"3",rx:"1"},child:[]},{tag:"rect",attr:{width:"7",height:"9",x:"14",y:"12",rx:"1"},child:[]},{tag:"rect",attr:{width:"7",height:"5",x:"3",y:"16",rx:"1"},child:[]}]})(e)}function It(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12a9 9 0 1 1-6.219-8.56"},child:[]}]})(e)}function Tt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",x2:"9",y1:"12",y2:"12"},child:[]}]})(e)}function Dt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"},child:[]},{tag:"path",attr:{d:"m7.5 4.27 9 5.15"},child:[]},{tag:"polyline",attr:{points:"3.29 7 12 12 20.71 7"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"m17 13 5 5m-5 0 5-5"},child:[]}]})(e)}function Lt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"},child:[]},{tag:"path",attr:{d:"M12 22V12"},child:[]},{tag:"path",attr:{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7"},child:[]},{tag:"path",attr:{d:"m7.5 4.27 9 5.15"},child:[]}]})(e)}function Ut(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"},child:[]},{tag:"path",attr:{d:"m15 5 4 4"},child:[]}]})(e)}function Pt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 12h14"},child:[]},{tag:"path",attr:{d:"M12 5v14"},child:[]}]})(e)}function Rt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"},child:[]},{tag:"path",attr:{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"},child:[]},{tag:"rect",attr:{x:"6",y:"14",width:"12",height:"8",rx:"1"},child:[]}]})(e)}function Ot(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"},child:[]},{tag:"path",attr:{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"},child:[]},{tag:"path",attr:{d:"M12 17.5v-11"},child:[]}]})(e)}function Mt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"},child:[]},{tag:"path",attr:{d:"M21 3v5h-5"},child:[]},{tag:"path",attr:{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"},child:[]},{tag:"path",attr:{d:"M8 16H3v5"},child:[]}]})(e)}function Qt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"path",attr:{d:"m21 21-4.3-4.3"},child:[]}]})(e)}function Ht(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"},child:[]},{tag:"path",attr:{d:"m21.854 2.147-10.94 10.939"},child:[]}]})(e)}function zt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function Wt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"8",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"},child:[]}]})(e)}function Vt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"},child:[]},{tag:"path",attr:{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"},child:[]},{tag:"path",attr:{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"},child:[]},{tag:"path",attr:{d:"M2 7h20"},child:[]},{tag:"path",attr:{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7"},child:[]}]})(e)}function Kt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 6h18"},child:[]},{tag:"path",attr:{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"},child:[]},{tag:"path",attr:{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",x2:"10",y1:"11",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",x2:"14",y1:"11",y2:"17"},child:[]}]})(e)}function Gt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 17 13.5 8.5 8.5 13.5 2 7"},child:[]},{tag:"polyline",attr:{points:"16 17 22 17 22 11"},child:[]}]})(e)}function qt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 7 13.5 15.5 8.5 10.5 2 17"},child:[]},{tag:"polyline",attr:{points:"16 7 22 7 22 13"},child:[]}]})(e)}function Xt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"},child:[]},{tag:"path",attr:{d:"M12 9v4"},child:[]},{tag:"path",attr:{d:"M12 17h.01"},child:[]}]})(e)}function Yt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"},child:[]},{tag:"path",attr:{d:"M15 18H9"},child:[]},{tag:"path",attr:{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"},child:[]},{tag:"circle",attr:{cx:"17",cy:"18",r:"2"},child:[]},{tag:"circle",attr:{cx:"7",cy:"18",r:"2"},child:[]}]})(e)}function Jt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"3",y2:"15"},child:[]}]})(e)}function Zt(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"16 11 18 13 22 9"},child:[]}]})(e)}function $t(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"19",x2:"19",y1:"8",y2:"14"},child:[]},{tag:"line",attr:{x1:"22",x2:"16",y1:"11",y2:"11"},child:[]}]})(e)}function en(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function tn(e){return tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 6 6 18"},child:[]},{tag:"path",attr:{d:"m6 6 12 12"},child:[]}]})(e)}function nn(e,t){return function(){return e.apply(t,arguments)}}const{toString:rn}=Object.prototype,{getPrototypeOf:an}=Object,{iterator:sn,toStringTag:on}=Symbol,ln=(cn=Object.create(null),e=>{const t=rn.call(e);return cn[t]||(cn[t]=t.slice(8,-1).toLowerCase())});var cn;const un=e=>(e=e.toLowerCase(),t=>ln(t)===e),dn=e=>t=>typeof t===e,{isArray:An}=Array,hn=dn("undefined");function fn(e){return null!==e&&!hn(e)&&null!==e.constructor&&!hn(e.constructor)&&gn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const pn=un("ArrayBuffer");const mn=dn("string"),gn=dn("function"),xn=dn("number"),vn=e=>null!==e&&"object"===typeof e,yn=e=>{if("object"!==ln(e))return!1;const t=an(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(on in e)&&!(sn in e)},bn=un("Date"),wn=un("File"),Nn=un("Blob"),jn=un("FileList"),Cn=un("URLSearchParams"),[Bn,kn,Sn,En]=["ReadableStream","Request","Response","Headers"].map(un);function Fn(e,t){let n,r,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),An(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(fn(e))return;const r=a?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let i;for(n=0;n<s;n++)i=r[n],t.call(null,e[i],i,e)}}function _n(e,t){if(fn(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,a=n.length;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const In="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Tn=e=>!hn(e)&&e!==In;const Dn=(Ln="undefined"!==typeof Uint8Array&&an(Uint8Array),e=>Ln&&e instanceof Ln);var Ln;const Un=un("HTMLFormElement"),Pn=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Rn=un("RegExp"),On=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Fn(n,(n,a)=>{let s;!1!==(s=t(n,a,e))&&(r[a]=s||n)}),Object.defineProperties(e,r)};const Mn=un("AsyncFunction"),Qn=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],In.addEventListener("message",e=>{let{source:t,data:a}=e;t===In&&a===n&&r.length&&r.shift()()},!1),e=>{r.push(e),In.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,gn(In.postMessage)),Hn="undefined"!==typeof queueMicrotask?queueMicrotask.bind(In):"undefined"!==typeof process&&process.nextTick||Qn,zn={isArray:An,isArrayBuffer:pn,isBuffer:fn,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||gn(e.append)&&("formdata"===(t=ln(e))||"object"===t&&gn(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&pn(e.buffer),t},isString:mn,isNumber:xn,isBoolean:e=>!0===e||!1===e,isObject:vn,isPlainObject:yn,isEmptyObject:e=>{if(!vn(e)||fn(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(ni){return!1}},isReadableStream:Bn,isRequest:kn,isResponse:Sn,isHeaders:En,isUndefined:hn,isDate:bn,isFile:wn,isBlob:Nn,isRegExp:Rn,isFunction:gn,isStream:e=>vn(e)&&gn(e.pipe),isURLSearchParams:Cn,isTypedArray:Dn,isFileList:jn,forEach:Fn,merge:function e(){const{caseless:t}=Tn(this)&&this||{},n={},r=(r,a)=>{const s=t&&_n(n,a)||a;yn(n[s])&&yn(r)?n[s]=e(n[s],r):yn(r)?n[s]=e({},r):An(r)?n[s]=r.slice():n[s]=r};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&Fn(arguments[a],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Fn(t,(t,r)=>{n&&gn(t)?e[r]=nn(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let a,s,i;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)i=a[s],r&&!r(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==n&&an(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:ln,kindOfTest:un,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(An(e))return e;let t=e.length;if(!xn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[sn]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Un,hasOwnProperty:Pn,hasOwnProp:Pn,reduceDescriptors:On,freezeMethods:e=>{On(e,(t,n)=>{if(gn(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];gn(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return An(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:_n,global:In,isContextDefined:Tn,isSpecCompliantForm:function(e){return!!(e&&gn(e.append)&&"FormData"===e[on]&&e[sn])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(vn(e)){if(t.indexOf(e)>=0)return;if(fn(e))return e;if(!("toJSON"in e)){t[r]=e;const a=An(e)?[]:{};return Fn(e,(e,t)=>{const s=n(e,r+1);!hn(s)&&(a[t]=s)}),t[r]=void 0,a}}return e};return n(e,0)},isAsyncFn:Mn,isThenable:e=>e&&(vn(e)||gn(e))&&gn(e.then)&&gn(e.catch),setImmediate:Qn,asap:Hn,isIterable:e=>null!=e&&gn(e[sn])};function Wn(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}zn.inherits(Wn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:zn.toJSONObject(this.config),code:this.code,status:this.status}}});const Vn=Wn.prototype,Kn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Kn[e]={value:e}}),Object.defineProperties(Wn,Kn),Object.defineProperty(Vn,"isAxiosError",{value:!0}),Wn.from=(e,t,n,r,a,s)=>{const i=Object.create(Vn);return zn.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),Wn.call(i,e.message,t,n,r,a),i.cause=e,i.name=e.name,s&&Object.assign(i,s),i};const Gn=Wn;function qn(e){return zn.isPlainObject(e)||zn.isArray(e)}function Xn(e){return zn.endsWith(e,"[]")?e.slice(0,-2):e}function Yn(e,t,n){return e?e.concat(t).map(function(e,t){return e=Xn(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const Jn=zn.toFlatObject(zn,{},null,function(e){return/^is[A-Z]/.test(e)});const Zn=function(e,t,n){if(!zn.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=zn.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!zn.isUndefined(t[e])})).metaTokens,a=n.visitor||c,s=n.dots,i=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&zn.isSpecCompliantForm(t);if(!zn.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(zn.isDate(e))return e.toISOString();if(zn.isBoolean(e))return e.toString();if(!o&&zn.isBlob(e))throw new Gn("Blob is not supported. Use a Buffer instead.");return zn.isArrayBuffer(e)||zn.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,a){let o=e;if(e&&!a&&"object"===typeof e)if(zn.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(zn.isArray(e)&&function(e){return zn.isArray(e)&&!e.some(qn)}(e)||(zn.isFileList(e)||zn.endsWith(n,"[]"))&&(o=zn.toArray(e)))return n=Xn(n),o.forEach(function(e,r){!zn.isUndefined(e)&&null!==e&&t.append(!0===i?Yn([n],r,s):null===i?n:n+"[]",l(e))}),!1;return!!qn(e)||(t.append(Yn(a,n,s),l(e)),!1)}const u=[],d=Object.assign(Jn,{defaultVisitor:c,convertValue:l,isVisitable:qn});if(!zn.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!zn.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),zn.forEach(n,function(n,s){!0===(!(zn.isUndefined(n)||null===n)&&a.call(t,n,zn.isString(s)?s.trim():s,r,d))&&e(n,r?r.concat(s):[s])}),u.pop()}}(e),t};function $n(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function er(e,t){this._pairs=[],e&&Zn(e,this,t)}const tr=er.prototype;tr.append=function(e,t){this._pairs.push([e,t])},tr.toString=function(e){const t=e?function(t){return e.call(this,t,$n)}:$n;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const nr=er;function rr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ar(e,t,n){if(!t)return e;const r=n&&n.encode||rr;zn.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let s;if(s=a?a(t,n):zn.isURLSearchParams(t)?t.toString():new nr(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const sr=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){zn.forEach(this.handlers,function(t){null!==t&&e(t)})}},ir={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},or={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:nr,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},lr="undefined"!==typeof window&&"undefined"!==typeof document,cr="object"===typeof navigator&&navigator||void 0,ur=lr&&(!cr||["ReactNative","NativeScript","NS"].indexOf(cr.product)<0),dr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Ar=lr&&window.location.href||"http://localhost",hr=(0,ye.A)((0,ye.A)({},e),or);const fr=function(e){function t(e,n,r,a){let s=e[a++];if("__proto__"===s)return!0;const i=Number.isFinite(+s),o=a>=e.length;if(s=!s&&zn.isArray(r)?r.length:s,o)return zn.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!i;r[s]&&zn.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],a)&&zn.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const a=n.length;let s;for(r=0;r<a;r++)s=n[r],t[s]=e[s];return t}(r[s])),!i}if(zn.isFormData(e)&&zn.isFunction(e.entries)){const n={};return zn.forEachEntry(e,(e,r)=>{t(function(e){return zn.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const pr={transitional:ir,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,a=zn.isObject(e);a&&zn.isHTMLForm(e)&&(e=new FormData(e));if(zn.isFormData(e))return r?JSON.stringify(fr(e)):e;if(zn.isArrayBuffer(e)||zn.isBuffer(e)||zn.isStream(e)||zn.isFile(e)||zn.isBlob(e)||zn.isReadableStream(e))return e;if(zn.isArrayBufferView(e))return e.buffer;if(zn.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Zn(e,new hr.classes.URLSearchParams,(0,ye.A)({visitor:function(e,t,n,r){return hr.isNode&&zn.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=zn.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Zn(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||r?(t.setContentType("application/json",!1),function(e,t,n){if(zn.isString(e))try{return(t||JSON.parse)(e),zn.trim(e)}catch(ni){if("SyntaxError"!==ni.name)throw ni}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||pr.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(zn.isResponse(e)||zn.isReadableStream(e))return e;if(e&&zn.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(ni){if(n){if("SyntaxError"===ni.name)throw Gn.from(ni,Gn.ERR_BAD_RESPONSE,this,null,this.response);throw ni}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hr.classes.FormData,Blob:hr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};zn.forEach(["delete","get","head","post","put","patch"],e=>{pr.headers[e]={}});const mr=pr,gr=zn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),xr=Symbol("internals");function vr(e){return e&&String(e).trim().toLowerCase()}function yr(e){return!1===e||null==e?e:zn.isArray(e)?e.map(yr):String(e)}function br(e,t,n,r,a){return zn.isFunction(r)?r.call(this,t,n):(a&&(t=n),zn.isString(t)?zn.isString(r)?-1!==t.indexOf(r):zn.isRegExp(r)?r.test(t):void 0:void 0)}class wr{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function a(e,t,n){const a=vr(t);if(!a)throw new Error("header name must be a non-empty string");const s=zn.findKey(r,a);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=yr(e))}const s=(e,t)=>zn.forEach(e,(e,n)=>a(e,n,t));if(zn.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(zn.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),r=e.substring(a+1).trim(),!n||t[n]&&gr[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(zn.isObject(e)&&zn.isIterable(e)){let n,r,a={};for(const t of e){if(!zn.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[r=t[0]]=(n=a[r])?zn.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=vr(e)){const n=zn.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(zn.isFunction(t))return t.call(this,e,n);if(zn.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=vr(e)){const n=zn.findKey(this,e);return!(!n||void 0===this[n]||t&&!br(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function a(e){if(e=vr(e)){const a=zn.findKey(n,e);!a||t&&!br(0,n[a],a,t)||(delete n[a],r=!0)}}return zn.isArray(e)?e.forEach(a):a(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const a=t[n];e&&!br(0,this[a],a,e,!0)||(delete this[a],r=!0)}return r}normalize(e){const t=this,n={};return zn.forEach(this,(r,a)=>{const s=zn.findKey(n,a);if(s)return t[s]=yr(r),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(a):String(a).trim();i!==a&&delete t[a],t[i]=yr(r),n[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return zn.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&zn.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[xr]=this[xr]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=vr(e);t[r]||(!function(e,t){const n=zn.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,a){return this[r].call(this,t,e,n,a)},configurable:!0})})}(n,e),t[r]=!0)}return zn.isArray(e)?e.forEach(r):r(e),this}}wr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),zn.reduceDescriptors(wr.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),zn.freezeMethods(wr);const Nr=wr;function jr(e,t){const n=this||mr,r=t||n,a=Nr.from(r.headers);let s=r.data;return zn.forEach(e,function(e){s=e.call(n,s,a.normalize(),t?t.status:void 0)}),a.normalize(),s}function Cr(e){return!(!e||!e.__CANCEL__)}function Br(e,t,n){Gn.call(this,null==e?"canceled":e,Gn.ERR_CANCELED,t,n),this.name="CanceledError"}zn.inherits(Br,Gn,{__CANCEL__:!0});const kr=Br;function Sr(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Gn("Request failed with status code "+n.status,[Gn.ERR_BAD_REQUEST,Gn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Er=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a,s=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[i];a||(a=l),n[s]=o,r[s]=l;let u=i,d=0;for(;u!==s;)d+=n[u++],u%=e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),l-a<t)return;const A=c&&l-c;return A?Math.round(1e3*d/A):void 0}};const Fr=function(e,t){let n,r,a=0,s=1e3/t;const i=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=s,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-a;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=s?i(l,e):(n=l,r||(r=setTimeout(()=>{r=null,i(n)},s-t)))},()=>n&&i(n)]},_r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const a=Er(50,250);return Fr(n=>{const s=n.loaded,i=n.lengthComputable?n.total:void 0,o=s-r,l=a(o);r=s;e({loaded:s,total:i,progress:i?s/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&s<=i?(i-s)/l:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})},n)},Ir=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Tr=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zn.asap(()=>e(...n))},Dr=hr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,hr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(hr.origin),hr.navigator&&/(msie|trident)/i.test(hr.navigator.userAgent)):()=>!0,Lr=hr.hasStandardBrowserEnv?{write(e,t,n,r,a,s){const i=[e+"="+encodeURIComponent(t)];zn.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),zn.isString(r)&&i.push("path="+r),zn.isString(a)&&i.push("domain="+a),!0===s&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ur(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Pr=e=>e instanceof Nr?(0,ye.A)({},e):e;function Rr(e,t){t=t||{};const n={};function r(e,t,n,r){return zn.isPlainObject(e)&&zn.isPlainObject(t)?zn.merge.call({caseless:r},e,t):zn.isPlainObject(t)?zn.merge({},t):zn.isArray(t)?t.slice():t}function a(e,t,n,a){return zn.isUndefined(t)?zn.isUndefined(e)?void 0:r(void 0,e,0,a):r(e,t,0,a)}function s(e,t){if(!zn.isUndefined(t))return r(void 0,t)}function i(e,t){return zn.isUndefined(t)?zn.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,a,s){return s in t?r(n,a):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,n)=>a(Pr(e),Pr(t),0,!0)};return zn.forEach(Object.keys((0,ye.A)((0,ye.A)({},e),t)),function(r){const s=l[r]||a,i=s(e[r],t[r],r);zn.isUndefined(i)&&s!==o||(n[r]=i)}),n}const Or=e=>{const t=Rr({},e);let n,{data:r,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=Nr.from(o),t.url=ar(Ur(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),zn.isFormData(r))if(hr.hasStandardBrowserEnv||hr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(hr.hasStandardBrowserEnv&&(a&&zn.isFunction(a)&&(a=a(t)),a||!1!==a&&Dr(t.url))){const e=s&&i&&Lr.read(i);e&&o.set(s,e)}return t},Mr="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=Or(e);let a=r.data;const s=Nr.from(r.headers).normalize();let i,o,l,c,u,{responseType:d,onUploadProgress:A,onDownloadProgress:h}=r;function f(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let p=new XMLHttpRequest;function m(){if(!p)return;const r=Nr.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());Sr(function(e){t(e),f()},function(e){n(e),f()},{data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p}),p=null}p.open(r.method.toUpperCase(),r.url,!0),p.timeout=r.timeout,"onloadend"in p?p.onloadend=m:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(m)},p.onabort=function(){p&&(n(new Gn("Request aborted",Gn.ECONNABORTED,e,p)),p=null)},p.onerror=function(){n(new Gn("Network Error",Gn.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const a=r.transitional||ir;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Gn(t,a.clarifyTimeoutError?Gn.ETIMEDOUT:Gn.ECONNABORTED,e,p)),p=null},void 0===a&&s.setContentType(null),"setRequestHeader"in p&&zn.forEach(s.toJSON(),function(e,t){p.setRequestHeader(t,e)}),zn.isUndefined(r.withCredentials)||(p.withCredentials=!!r.withCredentials),d&&"json"!==d&&(p.responseType=r.responseType),h&&([l,u]=_r(h,!0),p.addEventListener("progress",l)),A&&p.upload&&([o,c]=_r(A),p.upload.addEventListener("progress",o),p.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(i=t=>{p&&(n(!t||t.type?new kr(null,e,p):t),p.abort(),p=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);g&&-1===hr.protocols.indexOf(g)?n(new Gn("Unsupported protocol "+g+":",Gn.ERR_BAD_REQUEST,e)):p.send(a||null)})},Qr=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const a=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Gn?t:new kr(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,a(new Gn("timeout ".concat(t," of ms exceeded"),Gn.ETIMEDOUT))},t);const i=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:o}=r;return o.unsubscribe=()=>zn.asap(i),o}};function Hr(e,t){this.v=e,this.k=t}function zr(e){return function(){return new Wr(e.apply(this,arguments))}}function Wr(e){var t,n;function r(t,n){try{var s=e[t](n),i=s.value,o=i instanceof Hr;Promise.resolve(o?i.v:i).then(function(n){if(o){var l="return"===t?"return":"next";if(!i.k||n.done)return r(l,n);n=e[l](n).value}a(s.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,a){return new Promise(function(s,i){var o={key:e,arg:a,resolve:s,reject:i,next:null};n?n=n.next=o:(t=n=o,r(e,a))})},"function"!=typeof e.return&&(this.return=void 0)}function Vr(e){return new Hr(e,0)}function Kr(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise(function(n){n(e[t](r))}),{done:!1,value:new Hr(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function Gr(e){var t,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new qr(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function qr(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return qr=function(e){this.s=e,this.n=e.next},qr.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new qr(e)}Wr.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Wr.prototype.next=function(e){return this._invoke("next",e)},Wr.prototype.throw=function(e){return this._invoke("throw",e)},Wr.prototype.return=function(e){return this._invoke("return",e)};const Xr=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,a=0;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},Yr=function(){var e=zr(function*(e,t){var n,r=!1,a=!1;try{for(var s,i=Gr(Jr(e));r=!(s=yield Vr(i.next())).done;r=!1){const e=s.value;yield*Kr(Gr(Xr(e,t)))}}catch(o){a=!0,n=o}finally{try{r&&null!=i.return&&(yield Vr(i.return()))}finally{if(a)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),Jr=function(){var e=zr(function*(e){if(e[Symbol.asyncIterator])return void(yield*Kr(Gr(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Vr(t.read());if(e)break;yield n}}finally{yield Vr(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Zr=(e,t,n,r)=>{const a=Yr(e,t);let s,i=0,o=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await a.next();if(t)return o(),void e.close();let s=r.byteLength;if(n){let e=i+=s;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},$r="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,ea=$r&&"function"===typeof ReadableStream,ta=$r&&("function"===typeof TextEncoder?(na=new TextEncoder,e=>na.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var na;const ra=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(ni){return!1}},aa=ea&&ra(()=>{let e=!1;const t=new Request(hr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),sa=ea&&ra(()=>zn.isReadableStream(new Response("").body)),ia={stream:sa&&(e=>e.body)};var oa;$r&&(oa=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ia[e]&&(ia[e]=zn.isFunction(oa[e])?t=>t[e]():(t,n)=>{throw new Gn("Response type '".concat(e,"' is not supported"),Gn.ERR_NOT_SUPPORT,n)})}));const la=async(e,t)=>{const n=zn.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(zn.isBlob(e))return e.size;if(zn.isSpecCompliantForm(e)){const t=new Request(hr.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return zn.isArrayBufferView(e)||zn.isArrayBuffer(e)?e.byteLength:(zn.isURLSearchParams(e)&&(e+=""),zn.isString(e)?(await ta(e)).byteLength:void 0)})(t):n},ca=$r&&(async e=>{let{url:t,method:n,data:r,signal:a,cancelToken:s,timeout:i,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:A}=Or(e);c=c?(c+"").toLowerCase():"text";let h,f=Qr([a,s&&s.toAbortSignal()],i);const p=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let m;try{if(l&&aa&&"get"!==n&&"head"!==n&&0!==(m=await la(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(zn.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Ir(m,_r(Tr(l)));r=Zr(n.body,65536,e,t)}}zn.isString(d)||(d=d?"include":"omit");const a="credentials"in Request.prototype;h=new Request(t,(0,ye.A)((0,ye.A)({},A),{},{signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:a?d:void 0}));let s=await fetch(h,A);const i=sa&&("stream"===c||"response"===c);if(sa&&(o||i&&p)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=s[t]});const t=zn.toFiniteNumber(s.headers.get("content-length")),[n,r]=o&&Ir(t,_r(Tr(o),!0))||[];s=new Response(Zr(s.body,65536,n,()=>{r&&r(),p&&p()}),e)}c=c||"text";let g=await ia[zn.findKey(ia,c)||"text"](s,e);return!i&&p&&p(),await new Promise((t,n)=>{Sr(t,n,{data:g,headers:Nr.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:h})})}catch(g){if(p&&p(),g&&"TypeError"===g.name&&/Load failed|fetch/i.test(g.message))throw Object.assign(new Gn("Network Error",Gn.ERR_NETWORK,e,h),{cause:g.cause||g});throw Gn.from(g,g&&g.code,e,h)}}),ua={http:null,xhr:Mr,fetch:ca};zn.forEach(ua,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(ni){}Object.defineProperty(e,"adapterName",{value:t})}});const da=e=>"- ".concat(e),Aa=e=>zn.isFunction(e)||null===e||!1===e,ha=e=>{e=zn.isArray(e)?e:[e];const{length:t}=e;let n,r;const a={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!Aa(n)&&(r=ua[(t=String(n)).toLowerCase()],void 0===r))throw new Gn("Unknown adapter '".concat(t,"'"));if(r)break;a[t||"#"+s]=r}if(!r){const e=Object.entries(a).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let n=t?e.length>1?"since :\n"+e.map(da).join("\n"):" "+da(e[0]):"as no adapter specified";throw new Gn("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function fa(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new kr(null,e)}function pa(e){fa(e),e.headers=Nr.from(e.headers),e.data=jr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ha(e.adapter||mr.adapter)(e).then(function(t){return fa(e),t.data=jr.call(e,e.transformResponse,t),t.headers=Nr.from(t.headers),t},function(t){return Cr(t)||(fa(e),t&&t.response&&(t.response.data=jr.call(e,e.transformResponse,t.response),t.response.headers=Nr.from(t.response.headers))),Promise.reject(t)})}const ma="1.11.0",ga={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ga[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const xa={};ga.transitional=function(e,t,n){function r(e,t){return"[Axios v"+ma+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,a,s)=>{if(!1===e)throw new Gn(r(a," has been removed"+(t?" in "+t:"")),Gn.ERR_DEPRECATED);return t&&!xa[a]&&(xa[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,s)}},ga.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const va={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Gn("options must be an object",Gn.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const s=r[a],i=t[s];if(i){const t=e[s],n=void 0===t||i(t,s,e);if(!0!==n)throw new Gn("option "+s+" must be "+n,Gn.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new Gn("Unknown option "+s,Gn.ERR_BAD_OPTION)}},validators:ga},ya=va.validators;class ba{constructor(e){this.defaults=e||{},this.interceptors={request:new sr,response:new sr}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(ni){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Rr(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:a}=t;void 0!==n&&va.assertOptions(n,{silentJSONParsing:ya.transitional(ya.boolean),forcedJSONParsing:ya.transitional(ya.boolean),clarifyTimeoutError:ya.transitional(ya.boolean)},!1),null!=r&&(zn.isFunction(r)?t.paramsSerializer={serialize:r}:va.assertOptions(r,{encode:ya.function,serialize:ya.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),va.assertOptions(t,{baseUrl:ya.spelling("baseURL"),withXsrfToken:ya.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&zn.merge(a.common,a[t.method]);a&&zn.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=Nr.concat(s,a);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!o){const e=[pa.bind(this),void 0];for(e.unshift(...i),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=i.length;let A=t;for(d=0;d<u;){const e=i[d++],t=i[d++];try{A=e(A)}catch(h){t.call(this,h);break}}try{c=pa.call(this,A)}catch(h){return Promise.reject(h)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return ar(Ur((e=Rr(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}zn.forEach(["delete","get","head","options"],function(e){ba.prototype[e]=function(t,n){return this.request(Rr(n||{},{method:e,url:t,data:(n||{}).data}))}}),zn.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,a){return this.request(Rr(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}ba.prototype[e]=t(),ba.prototype[e+"Form"]=t(!0)});const wa=ba;class Na{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,a){n.reason||(n.reason=new kr(e,r,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Na(function(t){e=t});return{token:t,cancel:e}}}const ja=Na;const Ca={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ca).forEach(e=>{let[t,n]=e;Ca[n]=t});const Ba=Ca;const ka=function e(t){const n=new wa(t),r=nn(wa.prototype.request,n);return zn.extend(r,wa.prototype,n,{allOwnKeys:!0}),zn.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Rr(t,n))},r}(mr);ka.Axios=wa,ka.CanceledError=kr,ka.CancelToken=ja,ka.isCancel=Cr,ka.VERSION=ma,ka.toFormData=Zn,ka.AxiosError=Gn,ka.Cancel=ka.CanceledError,ka.all=function(e){return Promise.all(e)},ka.spread=function(e){return function(t){return e.apply(null,t)}},ka.isAxiosError=function(e){return zn.isObject(e)&&!0===e.isAxiosError},ka.mergeConfig=Rr,ka.AxiosHeaders=Nr,ka.formToJSON=e=>fr(zn.isHTMLForm(e)?new FormData(e):e),ka.getAdapter=ha,ka.HttpStatusCode=Ba,ka.default=ka;const Sa=ka.create({baseURL:"http://localhost:5001/api"});Sa.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),Sa.interceptors.response.use(e=>e,e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(console.log("401 Unauthorized - Removing token from localStorage"),localStorage.removeItem("token"),localStorage.removeItem("role")),Promise.reject(e)});const Ea=Sa;var Fa=n(4414);const _a=(0,r.createContext)(),Ia=e=>{let{children:t}=e;const[n,a]=(0,r.useState)({token:null,role:null}),s=ee();(0,r.useEffect)(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("role");e&&t&&a({token:e,role:t})},[]);return(0,Fa.jsx)(_a.Provider,{value:{authState:n,login:(e,t)=>{console.log("Logging in with token and role:",{token:e,role:t}),localStorage.setItem("token",e),localStorage.setItem("role",t),a({token:e,role:t})},logout:()=>{console.log("Logging out - clearing localStorage"),localStorage.removeItem("token"),localStorage.removeItem("role"),a({token:null,role:null}),s("/")}},children:t})},Ta=e=>{let{isOpen:t,onClose:n,onConfirm:r}=e;if(!t)return null;const a=(0,Fa.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Fa.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:n}),(0,Fa.jsx)("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 z-10",children:(0,Fa.jsxs)("div",{className:"p-6",children:[(0,Fa.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full",children:(0,Fa.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Fa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,Fa.jsxs)("div",{className:"mt-4 text-center",children:[(0,Fa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Confirm Logout"}),(0,Fa.jsx)("div",{className:"mt-2",children:(0,Fa.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to logout? You will need to sign in again to access the system."})})]}),(0,Fa.jsxs)("div",{className:"mt-6 flex justify-center space-x-4",children:[(0,Fa.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:n,children:"Cancel"}),(0,Fa.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",onClick:r,children:"Logout"})]})]})})]});return(0,Fe.createPortal)(a,document.body)},Da=e=>{let{size:t="w-8 h-8",color:n="pink"}=e;return(0,Fa.jsxs)("svg",{viewBox:"0 0 100 100",className:"".concat(t," opacity-20"),children:[(0,Fa.jsx)("rect",{x:"20",y:"60",width:"60",height:"30",rx:"5",fill:"pink"===n?"#ff85a2":"#ffd166"}),(0,Fa.jsx)("rect",{x:"25",y:"45",width:"50",height:"20",rx:"3",fill:"pink"===n?"#ff6b9c":"#ffc44d"}),(0,Fa.jsx)("rect",{x:"30",y:"35",width:"40",height:"15",rx:"2",fill:"pink"===n?"#ff5286":"#ffb734"}),(0,Fa.jsx)("rect",{x:"48",y:"25",width:"4",height:"15",fill:"#4ade80"}),(0,Fa.jsx)("path",{d:"M50 20 Q52 15 50 10 Q48 15 50 20",fill:"#fbbf24"})]})},La=e=>{let{size:t="w-6 h-6",color:n="yellow"}=e;return(0,Fa.jsxs)("svg",{viewBox:"0 0 100 100",className:"".concat(t," opacity-20"),children:[(0,Fa.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"yellow"===n?"#ffd166":"#c968ff"}),(0,Fa.jsx)("circle",{cx:"40",cy:"40",r:"4",fill:"#78350f"}),(0,Fa.jsx)("circle",{cx:"60",cy:"35",r:"3",fill:"#78350f"}),(0,Fa.jsx)("circle",{cx:"50",cy:"60",r:"3.5",fill:"#78350f"})]})},Ua=e=>{let{size:t="w-7 h-7",color:n="pink"}=e;return(0,Fa.jsxs)("svg",{viewBox:"0 0 100 100",className:"".concat(t," opacity-20"),children:[(0,Fa.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"pink"===n?"#ff85a2":"#6dcff6"}),(0,Fa.jsx)("circle",{cx:"50",cy:"50",r:"15",fill:"#f0f0f0"}),(0,Fa.jsx)("circle",{cx:"50",cy:"15",r:"3",fill:"#fbbf24"}),(0,Fa.jsx)("circle",{cx:"75",cy:"35",r:"2.5",fill:"#34d399"})]})},Pa=e=>{let{size:t="w-6 h-6",color:n="pink"}=e;return(0,Fa.jsxs)("svg",{viewBox:"0 0 100 100",className:"".concat(t," opacity-20"),children:[(0,Fa.jsx)("path",{d:"M50 70 L35 90 L65 90 Z",fill:"#f59e0b"}),(0,Fa.jsx)("circle",{cx:"50",cy:"50",r:"25",fill:"pink"===n?"#ff85a2":"#6dcff6"})]})},Ra=e=>{let{size:t="w-5 h-5",color:n="purple"}=e;return(0,Fa.jsxs)("svg",{viewBox:"0 0 100 100",className:"".concat(t," opacity-20"),children:[(0,Fa.jsx)("path",{d:"M20 30 Q50 10 80 30 L70 70 Q50 90 30 70 Z",fill:"purple"===n?"#c968ff":"#ff85a2"}),(0,Fa.jsx)("ellipse",{cx:"50",cy:"50",rx:"20",ry:"15",fill:"#f0f0f0"})]})},Oa=()=>{const[e,t]=(0,r.useState)(0),[n,a]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(0),[c,u]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=[],t=["cake","cookie","donut","icecream","candy"],n=["pink","yellow","purple","blue"];for(let r=0;r<10;r++)e.push({id:r+1,type:t[Math.floor(Math.random()*t.length)],x:"".concat(100*Math.random(),"%"),y:"".concat(100*Math.random(),"%"),color:n[Math.floor(Math.random()*n.length)],vx:.3*(Math.random()-.5),vy:.3*(Math.random()-.5),rotation:360*Math.random(),rotationSpeed:1*(Math.random()-.5)});u(e)},[]),(0,r.useEffect)(()=>{const e=setInterval(()=>{u(e=>e.map(e=>{let t=parseFloat(e.x)+e.vx,n=parseFloat(e.y)+e.vy,r=e.vx,a=e.vy;(t<=0||t>=100)&&(r=-r,t=t<=0?0:100),(n<=0||n>=100)&&(a=-a,n=n<=0?0:100);const s=e.rotation+e.rotationSpeed;return(0,ye.A)((0,ye.A)({},e),{},{x:"".concat(t,"%"),y:"".concat(n,"%"),vx:r,vy:a,rotation:s})}))},50);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/admin/products/stock-alerts/count");t(e.data.totalCount)}catch(e){console.error("Failed to fetch total stock alert count:",e)}})()},[]),(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/admin/warehouse/material-stock-alerts");l(e.data.length)}catch(e){console.error("Failed to fetch material stock alert count:",e)}})()},[]);const d="text-gray-700",A="text-gray-500",h="hover:bg-gray-50",f="bg-red-500 text-white shadow-sm",p="text-gray-400",m="text-white",g="bg-yellow-400 text-gray-800",{logout:x}=(0,r.useContext)(_a),[v,y]=(0,r.useState)(!1);return(0,Fa.jsxs)("div",{className:"h-screen w-64 ".concat("bg-white"," ").concat(d," flex flex-col border-r ").concat("border-gray-200"," overflow-hidden shadow-sm relative"),children:[(0,Fa.jsx)("div",{className:"absolute inset-0 z-0 pointer-events-none",children:c.map(e=>(0,Fa.jsxs)("div",{className:"absolute",style:{left:e.x,top:e.y,transform:"translate(-50%, -50%) rotate(".concat(e.rotation,"deg)"),transition:"transform 0.1s linear"},children:["cake"===e.type&&(0,Fa.jsx)(Da,{size:"w-8 h-8",color:e.color}),"cookie"===e.type&&(0,Fa.jsx)(La,{size:"w-6 h-6",color:e.color}),"donut"===e.type&&(0,Fa.jsx)(Ua,{size:"w-7 h-7",color:e.color}),"icecream"===e.type&&(0,Fa.jsx)(Pa,{size:"w-6 h-6",color:e.color}),"candy"===e.type&&(0,Fa.jsx)(Ra,{size:"w-5 h-5",color:e.color})]},e.id))}),(0,Fa.jsx)("div",{className:"p-6 border-b border-gray-100 relative z-10",children:(0,Fa.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3",children:[(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,Fa.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"h-16 w-auto animate-cottonCandy",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}),(0,Fa.jsxs)("div",{className:"absolute h-20 w-20 rounded-full animate-[orbit_4s_linear_infinite]",children:[(0,Fa.jsx)("span",{className:"absolute top-0 left-1/2 -ml-1 w-2 h-2 bg-primary rounded-full"}),(0,Fa.jsx)("span",{className:"absolute left-0 top-1/2 -mt-1 w-2 h-2 bg-accent-cyan rounded-full"}),(0,Fa.jsx)("span",{className:"absolute bottom-0 left-1/2 -ml-1 w-2 h-2 bg-accent-green rounded-full"}),(0,Fa.jsx)("span",{className:"absolute right-0 top-1/2 -mt-1 w-2 h-2 bg-accent-orange rounded-full"})]})]}),(0,Fa.jsx)("div",{className:"hidden bg-red-500 text-white px-4 py-2 rounded-lg transform rotate-12 shadow-lg",children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)("span",{className:"text-green-400 font-bold text-lg mr-1",children:"H"}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"text-sm font-bold leading-tight",children:"THE"}),(0,Fa.jsx)("div",{className:"text-lg font-bold leading-tight",children:"SWEET"}),(0,Fa.jsx)("div",{className:"text-lg font-bold leading-tight",children:"HUB"})]})]})})]}),(0,Fa.jsx)("div",{className:"flex items-center space-x-3",children:(0,Fa.jsxs)("div",{className:"text-left",children:[(0,Fa.jsx)("div",{className:"".concat("text-gray-800"," font-bold text-lg leading-tight"),children:"Sweet Hub"}),(0,Fa.jsx)("div",{className:"".concat(A," text-sm"),children:"Admin Panel"})]})})]})}),(0,Fa.jsxs)("nav",{className:"flex-1 px-4 py-6 space-y-2 relative z-10 overflow-y-auto",children:[(0,Fa.jsx)(He,{to:"/admin/dashboard",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg transition-all duration-200 ".concat(t?f:"".concat(d," ").concat(h))},children:e=>{let{isActive:t}=e;return(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(_t,{className:"mr-3 text-lg ".concat(t?m:p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Dashboard"})]})}}),(0,Fa.jsxs)("details",{className:"group",children:[(0,Fa.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-200 ".concat(h," ").concat(d," list-none"),children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(en,{className:"mr-3 text-lg ".concat(p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Workers"})]}),(0,Fa.jsx)(ft,{className:"w-4 h-4 transition-transform duration-200 group-open:rotate-90 text-gray-400"})]}),(0,Fa.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Fa.jsx)(He,{to:"/admin/workers/add",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Add Worker"})}),(0,Fa.jsx)(He,{to:"/admin/workers/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"View Workers"})}),(0,Fa.jsx)(He,{to:"/admin/workers/attendance",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Attendance"})}),(0,Fa.jsx)(He,{to:"/admin/workers/salary",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Salary Report"})}),(0,Fa.jsx)(He,{to:"/admin/workers/holidays",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Holidays"})})]})]}),(0,Fa.jsxs)("details",{className:"group",children:[(0,Fa.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-200 ".concat(h," ").concat(d," list-none"),children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(ot,{className:"mr-3 text-lg ".concat(p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Departments"})]}),(0,Fa.jsx)(ft,{className:"w-4 h-4 transition-transform duration-200 group-open:rotate-90 text-gray-400"})]}),(0,Fa.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Fa.jsx)(He,{to:"/admin/departments/create",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Create Department"})}),(0,Fa.jsx)(He,{to:"/admin/departments/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"View Departments"})})]})]}),(0,Fa.jsxs)("details",{className:"group",open:n,onToggle:()=>{a(!n)},children:[(0,Fa.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-200 ".concat(h," ").concat(d," list-none"),children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(it,{className:"mr-3 text-lg ".concat(p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Products"})]}),(0,Fa.jsxs)("div",{className:"flex items-center space-x-2",children:[!n&&e>0&&(0,Fa.jsx)("span",{className:"".concat(g," text-xs font-bold px-1.5 py-0.5 rounded-full"),children:e}),(0,Fa.jsx)(ft,{className:"w-4 h-4 transition-transform duration-200 group-open:rotate-90 text-gray-400"})]})]}),(0,Fa.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Fa.jsx)(He,{to:"/admin/products/add-category",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Add Category"})}),(0,Fa.jsx)(He,{to:"/admin/products/add",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Add Product"})}),(0,Fa.jsx)(He,{to:"/admin/products/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"View Products"})}),(0,Fa.jsx)(He,{to:"/admin/warehouse/track-stock",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Track Stock"})}),(0,Fa.jsxs)(He,{to:"/admin/warehouse/stock-alerts",className:e=>{let{isActive:t}=e;return"flex items-center justify-between px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Stock Alerts"}),n&&e>0&&(0,Fa.jsx)("span",{className:"".concat(g," text-xs font-bold px-1.5 py-0.5 rounded-full"),children:e})]})]})]}),(0,Fa.jsxs)("details",{className:"group",open:s,onToggle:()=>{i(!s)},children:[(0,Fa.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-200 ".concat(h," ").concat(d," list-none"),children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(rt,{className:"mr-3 text-lg ".concat(p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Warehouse"})]}),(0,Fa.jsxs)("div",{className:"flex items-center space-x-2",children:[!s&&o>0&&(0,Fa.jsx)("span",{className:"".concat(g," text-xs font-bold px-1.5 py-0.5 rounded-full"),children:o}),(0,Fa.jsx)(ft,{className:"w-4 h-4 transition-transform duration-200 group-open:rotate-90 text-gray-400"})]})]}),(0,Fa.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Fa.jsx)(He,{to:"/admin/warehouse/store-room",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Store Room"})}),(0,Fa.jsx)("div",{className:"px-3 py-2 text-xs text-gray-400 font-semibold uppercase tracking-wider",children:"Packing Materials"}),(0,Fa.jsx)(He,{to:"/admin/warehouse/packing-materials/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h)," ml-4")},children:(0,Fa.jsx)("span",{className:"font-medium",children:"- View Materials"})}),(0,Fa.jsx)(He,{to:"/admin/warehouse/packing-materials/outgoing",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h)," ml-4")},children:(0,Fa.jsx)("span",{className:"font-medium",children:"- Outgoing Materials"})}),(0,Fa.jsx)(He,{to:"/admin/warehouse/packing-materials/alerts",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h)," ml-4")},children:(0,Fa.jsx)("span",{className:"font-medium",children:"- Alert Materials"})}),(0,Fa.jsx)(He,{to:"/admin/warehouse/raw-materials",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Raw Materials"})}),(0,Fa.jsx)(He,{to:"/admin/warehouse/manufacturing",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Manufacturing"})}),(0,Fa.jsx)(He,{to:"/admin/warehouse/daily-schedule",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:e=>{let{isActive:t}=e;return(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(jt,{className:"mr-2 text-lg ".concat(t?m:p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Daily Schedule"})]})}}),(0,Fa.jsx)(He,{to:"/admin/warehouse/outgoing-materials",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Outgoing Materials"})}),(0,Fa.jsx)(He,{to:"/admin/warehouse/material-stock-alerts",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Material Stock Alerts"})})]})]}),(0,Fa.jsxs)("details",{className:"group",children:[(0,Fa.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-200 ".concat(h," ").concat(d," list-none"),children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(Vt,{className:"mr-3 text-lg ".concat(p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Shops"})]}),(0,Fa.jsx)(ft,{className:"w-4 h-4 transition-transform duration-200 group-open:rotate-90 text-gray-400"})]}),(0,Fa.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Fa.jsx)(He,{to:"/admin/shops/add",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Add Shop"})}),(0,Fa.jsx)(He,{to:"/admin/shops/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"View Shops"})})]})]}),(0,Fa.jsxs)("details",{className:"group",children:[(0,Fa.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-200 ".concat(h," ").concat(d," list-none"),children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(gt,{className:"mr-3 text-lg ".concat(p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Tasks"})]}),(0,Fa.jsx)(ft,{className:"w-4 h-4 transition-transform duration-200 group-open:rotate-90 text-gray-400"})]}),(0,Fa.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Fa.jsx)(He,{to:"/admin/tasks/daily",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Daily Tasks"})}),(0,Fa.jsx)(He,{to:"/admin/tasks/completed",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Completed Tasks"})})]})]}),(0,Fa.jsxs)("details",{className:"group",children:[(0,Fa.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-200 ".concat(h," ").concat(d," list-none"),children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(Ct,{className:"mr-3 text-lg ".concat(p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Billing"})]}),(0,Fa.jsx)(ft,{className:"w-4 h-4 transition-transform duration-200 group-open:rotate-90 text-gray-400"})]}),(0,Fa.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Fa.jsx)(He,{to:"/admin/billing/create",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Create Bill"})}),(0,Fa.jsx)(He,{to:"/admin/billing/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"View Bills"})})]})]}),(0,Fa.jsxs)("details",{className:"group",children:[(0,Fa.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-200 ".concat(h," ").concat(d," list-none"),children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(Yt,{className:"mr-3 text-lg ".concat(p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"E-Way Bills"})]}),(0,Fa.jsx)(ft,{className:"w-4 h-4 transition-transform duration-200 group-open:rotate-90 text-gray-400"})]}),(0,Fa.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Fa.jsx)(He,{to:"/admin/eway-bills/create",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Create E-Way Bill"})}),(0,Fa.jsx)(He,{to:"/admin/eway-bills/history",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?f:"".concat(A," ").concat(h))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"E-Way Bills History"})})]})]}),(0,Fa.jsx)(He,{to:"/admin/invoices/history",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg transition-all duration-200 ".concat(t?f:"".concat(d," ").concat(h))},children:e=>{let{isActive:t}=e;return(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(Ct,{className:"mr-3 text-lg ".concat(t?m:p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Invoice History"})]})}}),(0,Fa.jsx)(He,{to:"/admin/warehouse/return-products",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg transition-all duration-200 ".concat(t?f:"".concat(d," ").concat(h))},children:e=>{let{isActive:t}=e;return(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(Mt,{className:"mr-3 text-lg ".concat(t?m:p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Return Products"})]})}}),(0,Fa.jsx)(He,{to:"/admin/expenses",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg transition-all duration-200 ".concat(t?f:"".concat(d," ").concat(h))},children:e=>{let{isActive:t}=e;return(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(Ot,{className:"mr-3 text-lg ".concat(t?m:p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Expenses"})]})}}),(0,Fa.jsx)(He,{to:"/admin/profit-loss",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg transition-all duration-200 ".concat(t?f:"".concat(d," ").concat(h))},children:e=>{let{isActive:t}=e;return(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(ut,{className:"mr-3 text-lg ".concat(t?m:p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Profit & Loss"})]})}}),(0,Fa.jsx)(He,{to:"/admin/settings",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg transition-all duration-200 ".concat(t?f:"".concat(d," ").concat(h))},children:e=>{let{isActive:t}=e;return(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(zt,{className:"mr-3 text-lg ".concat(t?m:p)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Settings"})]})}})]}),(0,Fa.jsx)("div",{className:"px-4 py-6 border-t border-gray-200 relative z-10",children:(0,Fa.jsxs)("button",{onClick:()=>{y(!0)},className:"flex items-center w-full px-3 py-2.5 rounded-lg transition-all duration-200 ".concat(d," ").concat(h," font-medium"),children:[(0,Fa.jsx)(Tt,{className:"mr-3 text-lg ".concat(p)}),(0,Fa.jsx)("span",{children:"Logout"})]})}),(0,Fa.jsx)(Ta,{isOpen:v,onClose:()=>{y(!1)},onConfirm:()=>{y(!1),x()}})]})};var Ma=n(3826);const Qa={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Ha(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const za={date:Ha({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Ha({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Ha({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Wa={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Va(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function Ka(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const i=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(i)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}var Ga;const qa={code:"en-US",formatDistance:(e,t,n)=>{let r;const a=Qa[e];return r="string"===typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:za,formatRelative:(e,t,n,r)=>Wa[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Va({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Va({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Va({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Va({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Va({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Ga={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(Ga.matchPattern);if(!n)return null;const r=n[0],a=e.match(Ga.parsePattern);if(!a)return null;let s=Ga.valueCallback?Ga.valueCallback(a[0]):a[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(r.length)}}),era:Ka({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Ka({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ka({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Ka({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Ka({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let Xa={};function Ya(){return Xa}Math.pow(10,8);const Ja=6048e5,Za=Symbol.for("constructDateFrom");function $a(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&Za in e?e[Za](t):e instanceof Date?new e.constructor(t):new Date(t)}function es(e,t){return $a(t||e,e)}function ts(e){const t=es(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function ns(e,t){const n=es(e,null===t||void 0===t?void 0:t.in);return n.setHours(0,0,0,0),n}function rs(e,t,n){const[r,a]=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=$a.bind(null,e||n.find(e=>"object"===typeof e));return n.map(a)}(null===n||void 0===n?void 0:n.in,e,t),s=ns(r),i=ns(a),o=+s-ts(s),l=+i-ts(i);return Math.round((o-l)/864e5)}function as(e,t){const n=es(e,null===t||void 0===t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function ss(e,t){const n=es(e,null===t||void 0===t?void 0:t.in);return rs(n,as(n))+1}function is(e,t){var n,r,a,s,i,o;const l=Ya(),c=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==s?s:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==a?a:l.weekStartsOn)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==n?n:0,u=es(e,null===t||void 0===t?void 0:t.in),d=u.getDay(),A=(d<c?7:0)+d-c;return u.setDate(u.getDate()-A),u.setHours(0,0,0,0),u}function os(e,t){return is(e,(0,ye.A)((0,ye.A)({},t),{},{weekStartsOn:1}))}function ls(e,t){const n=es(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),a=$a(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const s=os(a),i=$a(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=os(i);return n.getTime()>=s.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function cs(e,t){const n=ls(e,t),r=$a((null===t||void 0===t?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),os(r)}function us(e,t){const n=es(e,null===t||void 0===t?void 0:t.in),r=+os(n)-+cs(n);return Math.round(r/Ja)+1}function ds(e,t){var n,r,a,s,i,o;const l=es(e,null===t||void 0===t?void 0:t.in),c=l.getFullYear(),u=Ya(),d=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==a?a:u.firstWeekContainsDate)&&void 0!==r?r:null===(o=u.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,A=$a((null===t||void 0===t?void 0:t.in)||e,0);A.setFullYear(c+1,0,d),A.setHours(0,0,0,0);const h=is(A,t),f=$a((null===t||void 0===t?void 0:t.in)||e,0);f.setFullYear(c,0,d),f.setHours(0,0,0,0);const p=is(f,t);return+l>=+h?c+1:+l>=+p?c:c-1}function As(e,t){var n,r,a,s,i,o;const l=Ya(),c=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==a?a:l.firstWeekContainsDate)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,u=ds(e,t),d=$a((null===t||void 0===t?void 0:t.in)||e,0);d.setFullYear(u,0,c),d.setHours(0,0,0,0);return is(d,t)}function hs(e,t){const n=es(e,null===t||void 0===t?void 0:t.in),r=+is(n,t)-+As(n,t);return Math.round(r/Ja)+1}function fs(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const ps={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return fs("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):fs(n+1,2)},d:(e,t)=>fs(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>fs(e.getHours()%12||12,t.length),H:(e,t)=>fs(e.getHours(),t.length),m:(e,t)=>fs(e.getMinutes(),t.length),s:(e,t)=>fs(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return fs(Math.trunc(r*Math.pow(10,n-3)),t.length)}},ms="midnight",gs="noon",xs="morning",vs="afternoon",ys="evening",bs="night",ws={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return ps.y(e,t)},Y:function(e,t,n,r){const a=ds(e,r),s=a>0?a:1-a;if("YY"===t){return fs(s%100,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):fs(s,t.length)},R:function(e,t){return fs(ls(e),t.length)},u:function(e,t){return fs(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return fs(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return fs(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return ps.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return fs(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=hs(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):fs(a,t.length)},I:function(e,t,n){const r=us(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):fs(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):ps.d(e,t)},D:function(e,t,n){const r=ss(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):fs(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return fs(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return fs(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return fs(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(a=12===r?gs:0===r?ms:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(a=r>=17?ys:r>=12?vs:r>=4?xs:bs,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return ps.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):ps.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):fs(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):fs(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ps.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ps.s(e,t)},S:function(e,t){return ps.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return js(r);case"XXXX":case"XX":return Cs(r);default:return Cs(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return js(r);case"xxxx":case"xx":return Cs(r);default:return Cs(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ns(r,":");default:return"GMT"+Cs(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ns(r,":");default:return"GMT"+Cs(r,":")}},t:function(e,t,n){return fs(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return fs(+e,t.length)}};function Ns(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),s=r%60;return 0===s?n+String(a):n+String(a)+t+fs(s,2)}function js(e,t){if(e%60===0){return(e>0?"-":"+")+fs(Math.abs(e)/60,2)}return Cs(e,t)}function Cs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+fs(Math.trunc(r/60),2)+t+fs(r%60,2)}const Bs=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},ks=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Ss={p:ks,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return Bs(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",Bs(r,t)).replace("{{time}}",ks(a,t))}},Es=/^D+$/,Fs=/^Y+$/,_s=["D","DD","YY","YYYY"];function Is(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Ts(e){return!(!Is(e)&&"number"!==typeof e||isNaN(+es(e)))}const Ds=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ls=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Us=/^'([^]*?)'?$/,Ps=/''/g,Rs=/[a-zA-Z]/;function Os(e,t,n){var r,a,s,i,o,l,c,u,d,A,h,f,p,m;const g=Ya(),x=null!==(r=null!==(a=null===n||void 0===n?void 0:n.locale)&&void 0!==a?a:g.locale)&&void 0!==r?r:qa,v=null!==(s=null!==(i=null!==(o=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==o?o:g.firstWeekContainsDate)&&void 0!==i?i:null===(u=g.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==s?s:1,y=null!==(d=null!==(A=null!==(h=null!==(f=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==f?f:null===n||void 0===n||null===(p=n.locale)||void 0===p||null===(p=p.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==h?h:g.weekStartsOn)&&void 0!==A?A:null===(m=g.locale)||void 0===m||null===(m=m.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==d?d:0,b=es(e,null===n||void 0===n?void 0:n.in);if(!Ts(b))throw new RangeError("Invalid time value");let w=t.match(Ls).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,Ss[t])(e,x.formatLong)}return e}).join("").match(Ds).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Ms(e)};if(ws[t])return{isToken:!0,value:e};if(t.match(Rs))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});x.localize.preprocessor&&(w=x.localize.preprocessor(b,w));const N={firstWeekContainsDate:v,weekStartsOn:y,locale:x};return w.map(r=>{if(!r.isToken)return r.value;const a=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!function(e){return Fs.test(e)}(a))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return Es.test(e)}(a))||function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),_s.includes(e))throw new RangeError(r)}(a,t,String(e));return(0,ws[a[0]])(b,a,x.localize,N)}).join("")}function Ms(e){const t=e.match(Us);return t?t[1].replace(Ps,"'"):e}function Qs(e,t){const n=es(e,null===t||void 0===t?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Hs(e,t){var n,r,a,s,i,o;const l=Ya(),c=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==s?s:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==a?a:l.weekStartsOn)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==n?n:0,u=es(e,null===t||void 0===t?void 0:t.in),d=u.getDay(),A=6+(d<c?-7:0)-(d-c);return u.setDate(u.getDate()+A),u.setHours(23,59,59,999),u}function zs(e,t){const n=es(e,null===t||void 0===t?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}const Ws=()=>{const e=ee(),[t,n]=(0,r.useState)({workers:{total:0,active:0,onLeave:0},departments:{total:0,activeProjects:0},products:{total:0,lowStock:0,outOfStock:0},storeRoom:{total:0,lowStock:0,totalValue:0},shops:{total:0,revenue:0},tasks:{total:0,pending:0,completed:0,overdue:0},returns:{total:0,pending:0,approved:0,thisMonth:0}}),[a,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(""),[A,h]=(0,r.useState)(Os(Qs(new Date),"yyyy-MM-dd")),[f,p]=(0,r.useState)(Os(new Date,"yyyy-MM-dd")),[m]=(0,Ma.d1)({words:["Welcome To SweetHub Admin Panel"],loop:1,typeSpeed:70,deleteSpeed:50,delaySpeed:1e3});(0,r.useEffect)(()=>{(async()=>{try{const[e,t,r,a,s,i]=await Promise.all([Ea.get("/admin/workers").catch(()=>({data:[]})),Ea.get("/admin/departments").catch(()=>({data:[]})),Ea.get("/admin/products",{params:{showAdmin:!0}}).catch(()=>({data:[]})),Ea.get("/admin/warehouse/store-room").catch(()=>({data:[]})),Ea.get("/admin/shops").catch(()=>({data:[]})),Ea.get("/admin/warehouse/returns").catch(()=>({data:[]}))]),o=a.data,l=o.filter(e=>e.quantity<=(e.stockAlertThreshold||5)),c=o.reduce((e,t)=>e+t.quantity*t.price,0),u=r.data,d=u.filter(e=>e.stockLevel<=10),A=u.filter(e=>0===e.stockLevel),h=i.data,f=h.filter(e=>!e.isApproved),p=h.filter(e=>e.isApproved),m=h.filter(e=>{const t=new Date(e.dateOfReturn),n=new Date;return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()});n({workers:{total:e.data.length,active:e.data.filter(e=>"active"===e.status).length||e.data.length,onLeave:e.data.filter(e=>"on-leave"===e.status).length||0},departments:{total:t.data.length,activeProjects:t.data.filter(e=>!1!==e.isActive).length||t.data.length},products:{total:u.length,lowStock:d.length,outOfStock:A.length},storeRoom:{total:o.length,lowStock:l.length,totalValue:c},shops:{total:s.data.length,revenue:0},tasks:{total:0,pending:0,completed:0,overdue:0},returns:{total:h.length,pending:f.length,approved:p.length,thisMonth:m.length}})}catch(e){console.error("Error fetching dashboard data:",e)}finally{s(!1)}})()},[]),(0,r.useEffect)(()=>{(async()=>{if(A&&f){c(!0),d("");try{const e=await Ea.get("/admin/revenue/summary",{params:{startDate:A,endDate:f},withCredentials:!0});o(e.data)}catch(e){d("Failed to fetch revenue data."),console.error(e)}finally{c(!1)}}})()},[A,f]);const g=t=>{let{title:n,mainCount:r,subtitle:a,subCount:s,icon:i,color:o,bgColor:l,route:c,alert:u=!1}=t;return(0,Fa.jsx)("div",{onClick:()=>e(c),className:"".concat(l," rounded-xl shadow-lg p-4 sm:p-6 cursor-pointer transform hover:scale-105 transition-all duration-300 hover:shadow-xl border-l-4 ").concat(o),children:(0,Fa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:n}),u&&(0,Fa.jsx)(Xt,{className:"w-5 h-5 text-red-500"})]}),(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:r}),a&&(0,Fa.jsxs)("p",{className:"text-sm text-gray-600",children:[a,": ",(0,Fa.jsx)("span",{className:"font-medium",children:s})]})]})]}),(0,Fa.jsx)("div",{className:"p-3 rounded-full ".concat(o.replace("border-","bg-")," bg-opacity-10"),children:(0,Fa.jsx)(i,{className:"w-8 h-8 ".concat(o.replace("border-","text-"))})})]})})};return a?(0,Fa.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:(0,Fa.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,Fa.jsx)("div",{className:"h-8 bg-gray-300 rounded w-1/3"}),(0,Fa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(7)].map((e,t)=>(0,Fa.jsx)("div",{className:"h-32 bg-gray-300 rounded-xl"},t))})]})}):(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:[(0,Fa.jsxs)("h3",{className:"text-lg sm:text-xl font-semibold mb-4 flex items-center",children:[(0,Fa.jsx)(qt,{className:"w-6 h-6 mr-2 text-green-500"}),"Quick Overview"]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Fa.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Store Value"}),(0,Fa.jsxs)("p",{className:"text-base sm:text-lg font-bold text-blue-600",children:["\u20b9",t.storeRoom.totalValue.toLocaleString()]})]}),(0,Fa.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Active Workers"}),(0,Fa.jsx)("p",{className:"text-base sm:text-lg font-bold text-green-600",children:t.workers.active})]}),(0,Fa.jsxs)("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Pending Returns"}),(0,Fa.jsx)("p",{className:"text-base sm:text-lg font-bold text-orange-600",children:t.returns.pending})]}),(0,Fa.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Total Shops"}),(0,Fa.jsx)("p",{className:"text-base sm:text-lg font-bold text-purple-600",children:t.shops.total})]})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[(0,Fa.jsx)(g,{title:"Workers",mainCount:t.workers.total,subtitle:"Active",subCount:t.workers.active,icon:en,color:"border-blue-500",bgColor:"bg-white",route:"/admin/workers/view"}),(0,Fa.jsx)(g,{title:"Departments",mainCount:t.departments.total,subtitle:"Active Projects",subCount:t.departments.activeProjects,icon:ot,color:"border-green-500",bgColor:"bg-white",route:"/admin/departments/view"}),(0,Fa.jsx)(g,{title:"Products",mainCount:t.products.total,subtitle:"Low Stock",subCount:t.products.lowStock,icon:it,color:"border-purple-500",bgColor:"bg-white",route:"/admin/products/view",alert:t.products.outOfStock>0}),(0,Fa.jsx)(g,{title:"Store Room",mainCount:t.storeRoom.total,subtitle:"Low Stock Items",subCount:t.storeRoom.lowStock,icon:rt,color:"border-orange-500",bgColor:"bg-white",route:"/admin/warehouse/store-room",alert:t.storeRoom.lowStock>0}),(0,Fa.jsx)(g,{title:"Shops",mainCount:t.shops.total,subtitle:"Total Revenue",subCount:"\u20b9".concat(t.shops.revenue.toLocaleString()),icon:Vt,color:"border-pink-500",bgColor:"bg-white",route:"/admin/shops/view"}),(0,Fa.jsx)(g,{title:"Daily Tasks",mainCount:t.tasks.total,subtitle:"Pending",subCount:t.tasks.pending,icon:gt,color:"border-yellow-500",bgColor:"bg-white",route:"/admin/tasks/daily"}),(0,Fa.jsx)(g,{title:"Returns",mainCount:t.returns.total,subtitle:"This Month",subCount:t.returns.thisMonth,icon:Lt,color:"border-red-500",bgColor:"bg-white",route:"/admin/warehouse/return-products/history",alert:t.returns.pending>0})]}),(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:[(0,Fa.jsxs)("h3",{className:"text-lg sm:text-xl font-semibold mb-4 flex items-center",children:[(0,Fa.jsx)(vt,{className:"w-6 h-6 mr-2 text-green-500"}),"Revenue & Profit Summary"]}),(0,Fa.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,Fa.jsx)("input",{type:"date",value:A,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,Fa.jsx)("input",{type:"date",value:f,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,Fa.jsxs)("div",{className:"flex items-end gap-2",children:[(0,Fa.jsx)("button",{onClick:()=>{h(Os(is(new Date),"yyyy-MM-dd")),p(Os(Hs(new Date),"yyyy-MM-dd"))},className:"px-3 py-2 bg-secondary text-white rounded-lg hover:bg-secondary-dark text-sm",children:"This Week"}),(0,Fa.jsx)("button",{onClick:()=>{h(Os(Qs(new Date),"yyyy-MM-dd")),p(Os(zs(new Date),"yyyy-MM-dd"))},className:"px-3 py-2 bg-secondary text-white rounded-lg hover:bg-secondary-dark text-sm",children:"This Month"})]})]}),l?(0,Fa.jsx)("p",{children:"Loading revenue data..."}):u?(0,Fa.jsx)("p",{className:"text-red-500",children:u}):i&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[(0,Fa.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Fa.jsx)("h4",{className:"text-sm font-semibold text-green-800",children:"Total Revenue"}),(0,Fa.jsxs)("p",{className:"text-2xl font-bold text-green-700",children:["\u20b9",i.overallTotalRevenue.toLocaleString()]})]}),(0,Fa.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Fa.jsx)("h4",{className:"text-sm font-semibold text-blue-800",children:"Total Profit"}),(0,Fa.jsxs)("p",{className:"text-2xl font-bold text-blue-700",children:["\u20b9",i.overallTotalProfit.toLocaleString()]})]})]}),(0,Fa.jsx)("h4",{className:"text-base font-semibold text-gray-700 mt-6 mb-2",children:"Breakdown by Shop"}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Shop"}),(0,Fa.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),(0,Fa.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Profit"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.revenueByShop.map(e=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:e.shopName}),(0,Fa.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-600 text-right",children:["\u20b9",e.totalRevenue.toLocaleString()]}),(0,Fa.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-600 text-right",children:["\u20b9",e.totalProfit.toLocaleString()]})]},e.shopId||"admin"))})]})})]})]})]})};var Vs=n(1766),Ks=n.n(Vs);const Gs=e=>{if(!e)return"";const[t,n]=e.split(":");let r=parseInt(t,10);const a=r>=12?"PM":"AM";return r=r%12||12,"".concat(r,":").concat(n," ").concat(a)},qs=e=>{if(!e)return"09:00";const[t,n]=e.split(" ");let[r,a]=t.split(":");return r=parseInt(r,10),"PM"===n&&12!==r&&(r+=12),"AM"===n&&12===r&&(r=0),"".concat(r.toString().padStart(2,"0"),":").concat(a)},Xs=()=>{const e=(0,r.useRef)(null),[t,n]=(0,r.useState)({name:"",username:"",email:"",department:"",salary:"",workingHoursFrom:"9:00 AM",workingHoursTo:"5:00 PM",lunchBreakFrom:"12:00 PM",lunchBreakTo:"1:00 PM",selectedBatch:""}),[a,s]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(!1),[A,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(!0),[x,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),[w,N]=(0,r.useState)([]),[j,C]=(0,r.useState)({type:"",text:""}),[B,k]=(0,r.useState)(!1),[S,E]=(0,r.useState)(null),[F,_]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(m){const e=(()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="0123456789";let n="",r="";for(let a=0;a<2;a++)n+=e.charAt(Math.floor(26*Math.random()));for(let a=0;a<4;a++)r+=t.charAt(Math.floor(10*Math.random()));return n+r})();v(e)}else v("")},[m]),(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/admin/departments",{withCredentials:!0});s(e.data);const t=await Ea.get("/admin/settings/batches");o(t.data),e.data.length>0&&n(t=>(0,ye.A)((0,ye.A)({},t),{},{department:e.data[0]._id}))}catch(e){console.error("Failed to fetch data:",e),d(!0),c("Failed to load data. Please try again later.")}})()},[]);const I=e=>{const{name:r,value:a}=e.target;if(n((0,ye.A)((0,ye.A)({},t),{},{[r]:a})),"selectedBatch"===r&&a){const e=i.find(e=>e.id===a);if(e){var s,o,l,c;const t=null!==(s=e.workingHours)&&void 0!==s&&s.from?Gs(e.workingHours.from):"9:00 AM",r=null!==(o=e.workingHours)&&void 0!==o&&o.to?Gs(e.workingHours.to):"5:00 PM",i=null!==(l=e.lunchBreak)&&void 0!==l&&l.from?Gs(e.lunchBreak.from):"12:00 PM",u=null!==(c=e.lunchBreak)&&void 0!==c&&c.to?Gs(e.lunchBreak.to):"1:00 PM";n(e=>(0,ye.A)((0,ye.A)({},e),{},{selectedBatch:a,workingHoursFrom:t,workingHoursTo:r,lunchBreakFrom:i,lunchBreakTo:u}))}}},T="w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow",D="block text-sm font-semibold text-gray-600 mb-1",L="w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow appearance-none",U=()=>{const e=[];for(let t=0;t<24;t++)for(let n=0;n<60;n+=30){const r=t>=12?"PM":"AM",a="".concat(t%12||12,":").concat(0===n?"00":n," ").concat(r),s="".concat(t.toString().padStart(2,"0"),":").concat(0===n?"00":n);e.push({value:a,value24:s})}return e};return(0,Fa.jsxs)("div",{className:"container mx-auto p-6 bg-white rounded-2xl shadow-xl h-full max-h-[calc(100vh-2rem)] overflow-y-auto",children:[(0,Fa.jsxs)("div",{className:"flex items-center mb-6 text-gray-800",children:[(0,Fa.jsx)($t,{className:"text-3xl text-blue-600"}),(0,Fa.jsx)("h1",{className:"text-3xl font-bold ml-3",children:"Add New Worker"})]}),l&&(0,Fa.jsxs)("div",{className:"flex items-center p-4 mb-4 rounded-lg ".concat(u?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),role:"alert",children:[(0,Fa.jsx)(pt,{className:"w-5 h-5 mr-3"}),(0,Fa.jsx)("span",{className:"font-medium",children:l}),!u&&A&&(0,Fa.jsxs)("span",{className:"ml-2",children:["Temporary Password: ",(0,Fa.jsx)("strong",{children:A})]}),!u&&f&&(0,Fa.jsxs)("span",{className:"ml-2",children:["RFID: ",(0,Fa.jsx)("strong",{children:f})]})]}),(0,Fa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c(""),d(!1),h(""),p(""),!t.department)return d(!0),void c("Please select a department.");const r=qs(t.workingHoursFrom),a=qs(t.workingHoursTo);let s;if(t.lunchBreakFrom&&t.lunchBreakTo){s={from:qs(t.lunchBreakFrom),to:qs(t.lunchBreakTo)}}const i=(0,ye.A)((0,ye.A)((0,ye.A)((0,ye.A)({},t),{},{workingHours:{from:r,to:a}},s&&{lunchBreak:s}),{},{createRFID:m},m&&{rfid:x}),{},{batchId:t.selectedBatch});try{const e=await Ea.post("/admin/workers",i);c(e.data.message||"Worker added successfully!"),d(!1),h(e.data.tempPassword||""),e.data.rfid&&p(e.data.rfid),e.data.workerId&&E(e.data.workerId),n({name:"",username:"",email:"",department:"",salary:"",workingHoursFrom:"9:00 AM",workingHoursTo:"5:00 PM",lunchBreakFrom:"12:00 PM",lunchBreakTo:"1:00 PM",selectedBatch:""}),g(!0),v("")}catch(u){var o,l;d(!0),c((null===(o=u.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.message)||"An error occurred while adding the worker."),console.error("Error adding worker:",u)}},className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"name",className:D,children:"Full Name"}),(0,Fa.jsx)("input",{type:"text",name:"name",id:"name",value:t.name,onChange:I,className:T,placeholder:"e.g., John Doe",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"username",className:D,children:"Username"}),(0,Fa.jsx)("input",{type:"text",name:"username",id:"username",value:t.username,onChange:I,className:T,placeholder:"Create a unique username",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"email",className:D,children:"Email"}),(0,Fa.jsx)("input",{type:"email",name:"email",id:"email",value:t.email,onChange:I,className:T,placeholder:"worker@example.com",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"department",className:D,children:"Department"}),(0,Fa.jsxs)("select",{name:"department",id:"department",value:t.department,onChange:I,className:L,required:!0,children:[(0,Fa.jsx)("option",{value:"",children:"Select Department"}),a.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"selectedBatch",className:D,children:"Batch (Optional)"}),(0,Fa.jsxs)("select",{name:"selectedBatch",id:"selectedBatch",value:t.selectedBatch,onChange:I,className:L,children:[(0,Fa.jsx)("option",{value:"",children:"Select Batch"}),i.map(e=>(0,Fa.jsx)("option",{value:e.id,children:e.name},e.id))]}),t.selectedBatch&&(0,Fa.jsxs)("div",{className:"mt-2 p-2 bg-gray-100 rounded text-sm",children:[(0,Fa.jsx)("p",{className:"font-medium",children:"Batch Details:"}),((e,n,r,a)=>{const s=i.find(e=>e.id===t.selectedBatch);return s?(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("p",{children:["Working Hours: ",null!==(e=s.workingHours)&&void 0!==e&&e.from?Gs(s.workingHours.from):"--:--"," - ",null!==(n=s.workingHours)&&void 0!==n&&n.to?Gs(s.workingHours.to):"--:--"]}),(0,Fa.jsxs)("p",{children:["Lunch Break: ",null!==(r=s.lunchBreak)&&void 0!==r&&r.from?Gs(s.lunchBreak.from):"--:--"," - ",null!==(a=s.lunchBreak)&&void 0!==a&&a.to?Gs(s.lunchBreak.to):"--:--"]})]}):null})()]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"salary",className:D,children:"Salary (per month)"}),(0,Fa.jsx)("input",{type:"text",name:"salary",id:"salary",value:t.salary,onChange:I,className:T,placeholder:"Enter monthly salary amount",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"workingHoursFrom",className:D,children:"Working Hours (From)"}),(0,Fa.jsx)("select",{name:"workingHoursFrom",id:"workingHoursFrom",value:t.workingHoursFrom,onChange:I,className:L,required:!0,children:U().map(e=>(0,Fa.jsx)("option",{value:e.value,children:e.value},e.value24))})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"workingHoursTo",className:D,children:"Working Hours (To)"}),(0,Fa.jsx)("select",{name:"workingHoursTo",id:"workingHoursTo",value:t.workingHoursTo,onChange:I,className:L,required:!0,children:U().map(e=>(0,Fa.jsx)("option",{value:e.value,children:e.value},e.value24))})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"lunchBreakFrom",className:D,children:"Lunch Break (From)"}),(0,Fa.jsx)("select",{name:"lunchBreakFrom",id:"lunchBreakFrom",value:t.lunchBreakFrom,onChange:I,className:L,required:!0,children:U().map(e=>(0,Fa.jsx)("option",{value:e.value,children:e.value},e.value24))})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"lunchBreakTo",className:D,children:"Lunch Break (To)"}),(0,Fa.jsx)("select",{name:"lunchBreakTo",id:"lunchBreakTo",value:t.lunchBreakTo,onChange:I,className:L,required:!0,children:U().map(e=>(0,Fa.jsx)("option",{value:e.value,children:e.value},e.value24))})]})]}),(0,Fa.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,Fa.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"RFID Card"}),(0,Fa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Fa.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Fa.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Create RFID for this worker"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>g(!m),className:"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(m?"bg-blue-600":"bg-gray-200"),children:(0,Fa.jsx)("span",{"aria-hidden":"true",className:"pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 ".concat(m?"translate-x-5":"translate-x-0")})})]}),m&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"RFID"}),(0,Fa.jsx)("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-100",value:x,readOnly:!0}),(0,Fa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This RFID will be automatically assigned to the worker"})]}),!m&&(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"RFID creation is disabled. You can enable it using the toggle above."})]})]}),(0,Fa.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,Fa.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Face Enrollment"}),j.text&&(0,Fa.jsx)("div",{className:"p-3 mb-4 rounded-lg ".concat("success"===j.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:j.text}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Fa.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[y?(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)(Ks(),{audio:!1,ref:e,screenshotFormat:"image/jpeg",className:"w-full rounded-md"}),(0,Fa.jsxs)("button",{type:"button",onClick:()=>{if(e.current&&w.length<5){const t=e.current.getScreenshot();if(t){const e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),a=new Uint8Array(r);for(let t=0;t<e.length;t++)a[t]=e.charCodeAt(t);const s=new Blob([r],{type:n}),i=new File([s],"capture-".concat(Date.now(),".jpeg"),{type:n});N(e=>[...e,{file:i,preview:t}])}}else C({type:"error",text:"You can only add up to 5 images."})},disabled:B||w.length>=5,className:"mt-4 w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[(0,Fa.jsx)(ct,{className:"mr-2"})," Capture Image"]})]}):(0,Fa.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,Fa.jsx)(Jt,{className:"text-4xl text-gray-400 mb-2"}),(0,Fa.jsx)("label",{htmlFor:"face-upload",className:"cursor-pointer text-sm font-medium text-blue-600 hover:text-blue-500",children:"Upload up to 5 images"}),(0,Fa.jsx)("input",{id:"face-upload",type:"file",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files){const t=Array.from(e.target.files).slice(0,5-w.length).map(e=>({file:e,preview:URL.createObjectURL(e)}));N(e=>[...e,...t])}},className:"sr-only",disabled:B||w.length>=5}),(0,Fa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"or"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>b(!0),className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-500",children:"Use Camera"})]}),y&&(0,Fa.jsx)("button",{type:"button",onClick:()=>b(!1),className:"mt-2 text-sm text-gray-600 hover:text-gray-800",children:"Close Camera"})]}),(0,Fa.jsxs)("div",{className:"space-y-2",children:[(0,Fa.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["Image Previews (",w.length,"/5)"]}),w.length>0?(0,Fa.jsx)("div",{className:"grid grid-cols-3 gap-2",children:w.map((e,t)=>(0,Fa.jsxs)("div",{className:"relative group",children:[(0,Fa.jsx)("img",{src:e.preview,alt:"preview ".concat(t),className:"w-full h-24 object-cover rounded-md"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>(e=>{N(w.filter((t,n)=>n!==e))})(t),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2715"})]},t))}):(0,Fa.jsx)("div",{className:"flex items-center justify-center h-24 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,Fa.jsx)("p",{className:"text-sm text-gray-500",children:"No images selected"})})]})]}),(0,Fa.jsx)("div",{className:"mt-4",children:(0,Fa.jsx)("button",{type:"button",onClick:async()=>{if(S&&0!==w.length){k(!0),C({type:"",text:""});try{const e=new FormData;e.append("workerId",S),w.forEach((t,n)=>{e.append("faces",t.file)});await Ea.post("/admin/attendance/enroll-face",e);C({type:"success",text:"Face enrolled successfully!"}),N([]),b(!1)}catch(n){var e,t;console.error("Error enrolling face:",n),console.error("Error response:",n.response);const r=(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||n.message||"An error occurred during enrollment.";C({type:"error",text:r})}finally{k(!1)}}else C({type:"error",text:"Please select a worker and provide at least one image."})},disabled:B||!S||0===w.length,className:"w-full flex justify-center items-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300",children:B?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(It,{className:"animate-spin mr-2"})," Enrolling..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(Zt,{className:"mr-2"})," Enroll Face"]})})})]}),(0,Fa.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-transform transform hover:scale-105 shadow-md",children:"Add Worker"})]})]})},Ys=e=>{let{isOpen:t,onClose:n,title:r,children:a}=e;return t?(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-2 sm:p-4 z-50 overflow-y-auto",children:(0,Fa.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-auto my-8 sm:my-16",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[(0,Fa.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:r}),(0,Fa.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200 transition-colors","aria-label":"Close",children:"\xd7"})]}),(0,Fa.jsx)("div",{className:"p-4 max-h-[70vh] overflow-y-auto",children:a})]})}):null},Js=e=>{if(!e)return"Not set";const[t,n]=e.split(":");let r=parseInt(t,10);const a=r>=12?"PM":"AM";return r=r%12||12,"".concat(r,":").concat(n," ").concat(a)},Zs="/admin/workers";const $s=function(){var e,t,n,a;const[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[d,A]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)({}),[g,x]=(0,r.useState)([]),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),[N,j]=(0,r.useState)([]),[C,B]=(0,r.useState)(!1),[k,S]=(0,r.useState)(!1),[E,F]=(0,r.useState)({type:"",text:""}),_=r.useRef(null);(0,r.useEffect)(()=>{(async()=>{try{const[e,t]=await Promise.all([Ea.get(Zs,{withCredentials:!0}),Ea.get("/admin/departments",{withCredentials:!0})]);i(e.data),x(t.data)}catch(e){u("Failed to fetch data."),console.error(e)}finally{l(!1)}})()},[]);const I=()=>{A(!1),f(null),m({})},T=(e,t)=>{m((0,ye.A)((0,ye.A)({},p),{},{[t]:e.target.value}))},D=()=>{y(!1),w(null),j([]),B(!1),F({type:"",text:""})};return o?(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading workers..."}):c?(0,Fa.jsx)("div",{className:"p-6 text-center text-red-500",children:c}):(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("h3",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Existing Workers"}),0===s.length?(0,Fa.jsx)("p",{children:"No workers found. Please add a worker."}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Username"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salary"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Working Hours"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lunch Break"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RFID"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Face Enrolled"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>{var t,n,r,a,o,l;return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.username}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:null===(t=e.user)||void 0===t?void 0:t.email}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:null===(n=e.department)||void 0===n?void 0:n.name}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.salary}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:null!==(r=e.workingHours)&&void 0!==r&&r.from&&null!==(a=e.workingHours)&&void 0!==a&&a.to?"".concat(Js(e.workingHours.from)," - ").concat(Js(e.workingHours.to)):"Not set"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:null!==(o=e.lunchBreak)&&void 0!==o&&o.from&&null!==(l=e.lunchBreak)&&void 0!==l&&l.to?"".concat(Js(e.lunchBreak.from)," - ").concat(Js(e.lunchBreak.to)):"Not set"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.rfid||"Not Assigned"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.faceImages&&e.faceImages.length>0?(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(At,{className:"text-green-500 mr-2",size:20}),(0,Fa.jsx)("span",{className:"text-green-600 font-medium",children:"Yes"})]}):(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(tn,{className:"text-red-500 mr-2",size:20}),(0,Fa.jsx)("span",{className:"text-red-600 font-medium",children:"No"})]})}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{var t;f(e),m((0,ye.A)((0,ye.A)({},e),{},{department:(null===(t=e.department)||void 0===t?void 0:t._id)||e.department||""})),A(!0)})(e),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),(0,Fa.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this worker?"))try{await Ea.delete("".concat(Zs,"/").concat(e),{withCredentials:!0}),i(s.filter(t=>t._id!==e))}catch(t){u("Failed to delete worker."),console.error(t)}})(e._id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e._id)})})]})}),(0,Fa.jsx)(Ys,{isOpen:d,onClose:I,title:"Edit Worker",children:h&&(0,Fa.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await Ea.put("".concat(Zs,"/").concat(h._id),p,{withCredentials:!0});i(s.map(t=>t._id===h._id?e.data:t)),I()}catch(t){u("Failed to update worker."),console.error(t)}},className:"space-y-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Fa.jsx)("input",{type:"text",value:p.name||"",onChange:e=>T(e,"name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Fa.jsx)("input",{type:"text",value:p.username||"",onChange:e=>T(e,"username"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Fa.jsx)("input",{type:"email",value:p.email||"",onChange:e=>T(e,"email"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,Fa.jsxs)("select",{value:p.department||"",onChange:e=>{m((0,ye.A)((0,ye.A)({},p),{},{department:e.target.value}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,Fa.jsx)("option",{value:"",children:"Select Department"}),g.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salary"}),(0,Fa.jsx)("input",{type:"number",value:p.salary||"",onChange:e=>T(e,"salary"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RFID"}),(0,Fa.jsx)("input",{type:"text",value:p.rfid||"",onChange:e=>T(e,"rfid"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Working Hours (From)"}),(0,Fa.jsx)("input",{type:"time",value:(null===(e=p.workingHours)||void 0===e?void 0:e.from)||"",onChange:e=>T(e,"workingHours.from"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Working Hours (To)"}),(0,Fa.jsx)("input",{type:"time",value:(null===(t=p.workingHours)||void 0===t?void 0:t.to)||"",onChange:e=>T(e,"workingHours.to"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lunch Break (From)"}),(0,Fa.jsx)("input",{type:"time",value:(null===(n=p.lunchBreak)||void 0===n?void 0:n.from)||"",onChange:e=>T(e,"lunchBreak.from"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lunch Break (To)"}),(0,Fa.jsx)("input",{type:"time",value:(null===(a=p.lunchBreak)||void 0===a?void 0:a.to)||"",onChange:e=>T(e,"lunchBreak.to"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Fa.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Fa.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Face Enrollment"}),h.faceImages&&h.faceImages.length>0?(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Enrolled"}):(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Not Enrolled"})]}),(0,Fa.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:h.faceImages&&h.faceImages.length>0?"Worker has ".concat(h.faceImages.length," face images enrolled."):"Worker has not been enrolled for face recognition."}),(0,Fa.jsx)("button",{type:"button",onClick:()=>(w(h),j([]),B(!0),F({type:"",text:""}),void y(!0)),className:"mt-2 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:h.faceImages&&h.faceImages.length>0?"Update Face Enrollment":"Enroll Face"})]}),(0,Fa.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Fa.jsx)("button",{type:"button",onClick:I,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,Fa.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 rounded-md shadow-sm text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Update Worker"})]})]})}),(0,Fa.jsx)(Ys,{isOpen:v,onClose:D,title:"Face Enrollment",children:b&&(0,Fa.jsxs)("div",{className:"space-y-4",children:[(0,Fa.jsxs)("p",{className:"text-sm text-gray-600",children:["Enrolling face for worker: ",(0,Fa.jsx)("span",{className:"font-medium",children:b.name})]}),(0,Fa.jsxs)("div",{className:"bg-blue-50 p-4 rounded-md",children:[(0,Fa.jsx)("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Instructions"}),(0,Fa.jsxs)("ul",{className:"text-xs text-blue-700 list-disc pl-5 space-y-1",children:[(0,Fa.jsx)("li",{children:"Position the worker's face clearly in the camera frame"}),(0,Fa.jsx)("li",{children:"Capture multiple images from different angles for better recognition"}),(0,Fa.jsx)("li",{children:"Ensure good lighting and avoid shadows on the face"}),(0,Fa.jsx)("li",{children:"Remove glasses or hats that might obstruct facial features"}),(0,Fa.jsx)("li",{children:'Click "Capture Image" to take a photo, or upload existing images'})]})]}),E.text&&(0,Fa.jsx)("div",{className:"p-3 rounded ".concat("error"===E.type?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),children:E.text}),(0,Fa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),b&&0!==N.length){S(!0),F({type:"",text:""});try{const e=new FormData;e.append("workerId",b._id),N.forEach(t=>{e.append("faces",t.file)}),await Ea.post("/admin/attendance/enroll-face",e),F({type:"success",text:"Face enrollment successful!"});(async()=>{try{const e=await Ea.get(Zs,{withCredentials:!0});i(e.data)}catch(e){u("Failed to refresh worker data."),console.error(e)}})(),setTimeout(()=>{D()},2e3)}catch(c){var t,n;console.error("Error enrolling face:",c);const r=(null===(t=c.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||c.message||"An error occurred during enrollment.";F({type:"error",text:r})}finally{S(!1)}}else F({type:"error",text:"Please select a worker and provide at least one image."})},className:"space-y-4",children:[(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Fa.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[C?(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)(Ks(),{audio:!1,ref:_,screenshotFormat:"image/jpeg",className:"w-full rounded-md"}),(0,Fa.jsxs)("button",{type:"button",onClick:()=>{if(_.current&&N.length<5){const e=_.current.getScreenshot();if(e){const t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),a=new Uint8Array(r);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);const s=new Blob([r],{type:n}),i=new File([s],"capture-".concat(Date.now(),".jpeg"),{type:n});j(t=>[...t,{file:i,preview:e}])}}else F({type:"error",text:"You can only add up to 5 images."})},disabled:k||N.length>=5,className:"mt-4 w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[(0,Fa.jsx)(ct,{className:"mr-2"})," Capture Image"]})]}):(0,Fa.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,Fa.jsx)(Jt,{className:"text-4xl text-gray-400 mb-2"}),(0,Fa.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer text-sm font-medium text-red-600 hover:text-red-500",children:"Upload up to 5 images"}),(0,Fa.jsx)("input",{id:"file-upload",type:"file",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files){const t=Array.from(e.target.files).slice(0,5-N.length).map(e=>({file:e,preview:URL.createObjectURL(e)}));j(e=>[...e,...t])}},className:"sr-only",disabled:k||N.length>=5}),(0,Fa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"or"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>B(!0),className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-500",children:"Use Camera"})]}),C&&(0,Fa.jsx)("button",{type:"button",onClick:()=>B(!1),className:"mt-2 text-sm text-gray-600 hover:text-gray-800",children:"Close Camera"})]}),(0,Fa.jsxs)("div",{className:"space-y-2",children:[(0,Fa.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["Image Previews (",N.length,"/5)"]}),N.length>0?(0,Fa.jsx)("div",{className:"grid grid-cols-3 gap-2",children:N.map((e,t)=>(0,Fa.jsxs)("div",{className:"relative group",children:[(0,Fa.jsx)("img",{src:e.preview,alt:"preview ".concat(t),className:"w-full h-24 object-cover rounded-md"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>(e=>{j(N.filter((t,n)=>n!==e))})(t),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2715"})]},t))}):(0,Fa.jsx)("div",{className:"flex items-center justify-center h-24 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,Fa.jsx)("p",{className:"text-sm text-gray-500",children:"No images selected"})})]})]}),(0,Fa.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Fa.jsx)("button",{type:"button",onClick:D,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:k,children:"Cancel"}),(0,Fa.jsx)("button",{type:"submit",disabled:k||0===N.length,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:k?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Fa.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fa.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enrolling..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)($t,{className:"mr-2"})," Enroll Face"]})})]})]})]})})]})};const ei=function(e){let{onAttendanceRecorded:t}=e;const[n,a]=(0,r.useState)(""),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(null),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)("");return(0,r.useEffect)(()=>()=>{h&&clearTimeout(h)},[h]),(0,Fa.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-md",children:[(0,Fa.jsx)("h3",{className:"text-xl font-semibold mb-4 text-text-primary",children:"RFID Attendance"}),(0,Fa.jsx)("form",{onSubmit:async e=>{e.preventDefault(),i(""),l(""),u(null),A("");const t=n.trim();t?(x(t),m(!0)):l("Please enter an RFID.")},className:"mb-6",children:(0,Fa.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Scan RFID"}),(0,Fa.jsx)("input",{type:"text",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:n,onChange:e=>a(e.target.value),placeholder:"Enter RFID (e.g., AB0000)",autoFocus:!0})]}),(0,Fa.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,Fa.jsx)("button",{type:"submit",className:"flex-1 bg-primary text-white font-semibold py-2 px-4 rounded-lg hover:bg-primary-dark transition-colors",children:"Submit"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>{a(""),i(""),l(""),u(null),A(""),m(!1),x(""),h&&(clearTimeout(h),f(null))},className:"flex-1 bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-gray-600 transition-colors",children:"Clear"})]})]})}),p&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2",children:(0,Fa.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-xl max-w-md w-full",children:[(0,Fa.jsx)("h3",{className:"text-lg sm:text-xl font-semibold mb-4",children:"Confirm RFID Submission"}),(0,Fa.jsx)("p",{className:"mb-4 text-sm sm:text-base",children:"Are you sure you want to submit this RFID for attendance?"}),(0,Fa.jsxs)("p",{className:"mb-6 font-semibold",children:["RFID: ",g]}),(0,Fa.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[(0,Fa.jsx)("button",{onClick:()=>{m(!1),x("")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 text-sm sm:text-base",children:"Cancel"}),(0,Fa.jsx)("button",{onClick:async()=>{m(!1);try{const e=await Ea.post("/admin/attendance/rfid-attendance",{rfid:g},{withCredentials:!0});i(e.data.message),u({name:e.data.worker}),A(e.data.type),h&&clearTimeout(h);const n=setTimeout(()=>{a("")},3e3);f(n),t&&e.data.attendance&&setTimeout(()=>{t({workerName:e.data.worker,rfid:e.data.rfid,checkIn:e.data.attendance.checkIn,checkOut:e.data.attendance.checkOut,type:e.data.type,attendance:e.data.attendance})},100)}catch(c){var e,n,r,s,o;if(429===(null===(e=c.response)||void 0===e?void 0:e.status)&&null!==(n=c.response)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.message)l(c.response.data.message);else l((null===(s=c.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message)||"Failed to process RFID attendance.");console.error(c)}},className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark text-sm sm:text-base",children:"Confirm"})]})]})}),s&&(0,Fa.jsx)("div",{className:"p-4 rounded-lg mb-4 ".concat("checkin"===d?"bg-green-500 text-white":"checkout"===d?"bg-red-500 text-white":"bg-green-100 text-green-800"),children:s}),o&&(0,Fa.jsx)("div",{className:"p-4 bg-red-100 text-red-800 rounded-lg mb-4",children:o}),c&&(0,Fa.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Fa.jsx)("h4",{className:"font-semibold text-lg mb-2",children:"Attendance Recorded"}),(0,Fa.jsxs)("p",{className:"text-gray-700",children:["Worker: ",(0,Fa.jsx)("span",{className:"font-semibold",children:c.name})]}),(0,Fa.jsxs)("p",{className:"text-gray-700",children:["Action: ",(0,Fa.jsx)("span",{className:"font-semibold capitalize ".concat("checkin"===d?"text-green-500":"checkout"===d?"text-red-500":""),children:d})]}),(0,Fa.jsx)("p",{className:"text-gray-700 text-sm mt-2",children:"RFID input will clear automatically in 3 seconds..."})]}),(0,Fa.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[(0,Fa.jsx)("h4",{className:"font-semibold text-lg mb-2",children:"How to Use"}),(0,Fa.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-gray-700 text-sm",children:[(0,Fa.jsx)("li",{children:"Scan or enter the worker's RFID card"}),(0,Fa.jsx)("li",{children:'Click "Submit" to record attendance'}),(0,Fa.jsx)("li",{children:"Confirm the RFID value in the popup"}),(0,Fa.jsx)("li",{children:"The system will automatically determine if it's a check-in or check-out"}),(0,Fa.jsx)("li",{children:"If a worker missed an out-punch from the previous day, the system will automatically correct it"}),(0,Fa.jsx)("li",{children:"View the confirmation message to verify the action"}),(0,Fa.jsx)("li",{children:"RFID input will automatically clear after 3 seconds for the next worker"})]})]})]})};var ti=function(e,t){return(ti=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ni(e,t){function n(){this.constructor=e}ti(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function ri(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,o)}l((r=r.apply(e,t||[])).next())})}function ai(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}var si=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(n,t[0],t[1]),t.join("=")}),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach(function(t){var n=t.split(":"),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,a)})}},e}();function ii(){return oi}var oi=null,li=new Map,ci=new Map;function ui(e,t){var n=fi(e,t);return li.get(n)}function di(e){for(var t=li.entries(),n=[];;){var r=t.next(),a=r.done,s=r.value;if(a)break;var i=s[0],o=s[1];i.split("_")[0]===e&&n.push(o)}return n}function Ai(e){var t=e.kernelName,n=e.backendName,r=fi(t,n);if(li.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");li.set(r,e)}function hi(e){var t=e.kernelName;ci.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),ci.set(t,e)}function fi(e,t){return t+"_"+e}function pi(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function mi(e,t,n){return Math.max(e,Math.min(t,n))}function gi(e){return e%2==0?e:e+1}function xi(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function vi(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function yi(e,t,n){void 0===n&&(n=""),vi(ji(e,t),function(){return n+" Shapes "+e+" and "+t+" must match"})}function bi(e){vi(null!=e,function(){return"The input to the tensor constructor must be a non-null value."})}function wi(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||Ri(e)&&!n)for(var r=0;r<e.length;++r)wi(e[r],t,n);else t.push(e);return t}function Ni(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function ji(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ci(e){return e%1==0}function Bi(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function ki(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Si(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Ei(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise(function(r,a){var s=0,i=function(){if(e())r();else{s++;var o=t(s);null!=n&&s>=n?a():setTimeout(i,o)}};i()})}function Fi(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found "+e[a]+" at dim "+a);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var s=e.slice();return s[r]=t/n,s}function _i(e,t){var n=t.length;return vi((e=null==e?t.map(function(e,t){return t}):[].concat(e)).every(function(e){return e>=-n&&e<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e}),vi(e.every(function(e){return Ci(e)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(e){return e<0?n+e:e})}function Ii(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,s=null==t||a?null:_i(t,e).sort(),i=0,o=0;o<e.length;++o){if(null!=s){if(s[i]===o&&1!==e[o])throw new Error("Can't squeeze axis "+o+" since its dim '"+e[o]+"' is not 1");(null==s[i]||s[i]>o)&&1===e[o]&&(n.push(e[o]),r.push(o)),s[i]<=o&&i++}1!==e[o]&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function Ti(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function Di(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function Li(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function Ui(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function Pi(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function Ri(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function Oi(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function Mi(e){if(null==e)return 0;var t=0;return e.forEach(function(e){return t+=e.length}),t}function Qi(e){return"string"==typeof e||e instanceof String}function Hi(e){return"boolean"==typeof e}function zi(e){return"number"==typeof e}function Wi(e){return Array.isArray(e)?Wi(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":zi(e)?"float32":Qi(e)?"string":Hi(e)?"bool":"float32"}function Vi(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Ki(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function Gi(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function qi(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=wi(e)),n&&Li(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),a=0;a<r.length;++a)0!==Math.round(e[a])&&(r[a]=1);return r}throw new Error("Unknown data type "+t)}function Xi(e,t){if(0===e.length)return t[0];var n=e.reduce(function(e,t){return e*t});if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var a=new Array;if(1===n.length)for(var s=n[0],i=0;i<s;i++)a[i]=r[t+i];else{s=n[0];var o=n.slice(1),l=o.reduce(function(e,t){return e*t});for(i=0;i<s;i++)a[i]=e(t+i*l,o,r)}return a}(0,e,t)}function Yi(e,t){for(var n=Ji(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Ji(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Zi(){return ii().platform.now()}function $i(e){e.forEach(function(t){vi(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function eo(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",ii().platform.encode(e,t)}function to(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",ii().platform.decode(e,t)}function no(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function ro(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}Object.freeze({shuffle:pi,clamp:mi,nearestLargerEven:gi,sum:xi,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n},assert:vi,assertShapesMatch:yi,assertNonNull:bi,flatten:wi,sizeFromShape:Ni,isScalarShape:function(e){return 0===e.length},arraysEqual:ji,isInt:Ci,tanh:Bi,sizeToSquarishShape:ki,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return pi(t),t},rightPad:Si,repeatedTry:Ei,inferFromImplicitShape:Fi,parseAxisParam:_i,squeezeShape:Ii,getTypedArrayFromDType:Ti,getArrayFromDType:Di,checkConversionForErrors:Li,isValidDtype:Ui,hasEncodingLoss:Pi,isTypedArray:Ri,bytesPerElement:Oi,bytesFromStringArray:Mi,isString:Qi,isBoolean:Hi,isNumber:zi,inferDtype:Wi,isFunction:Vi,nearestDivisor:Ki,computeStrides:Gi,toTypedArray:qi,toNestedArray:Xi,makeOnesTypedArray:Yi,makeZerosTypedArray:Ji,now:Zi,assertNonNegativeIntegerDimensions:$i,fetch:function(e,t){return ii().platform.fetch(e,t)},encodeString:eo,decodeString:to,locToIndex:no,indexToLoc:ro});var ao=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new so)}return e.prototype.profileKernel=function(e,t,n){var r,a=this,s=this.backendTimer.time(function(){r=n()});return r.forEach(function(n){n.data().then(function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found "+a+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),s.then(function(s){var i="";null!=s.getExtraProfileInfo&&(i=s.getExtraProfileInfo()),a.logger.logKernelProfile(e,n,r,s.kernelMs,t,i)})})}),r},e}(),so=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,a,s){var i="number"==typeof r?Si(r+"ms",9):r.error,o=Si(e,25),l=t.rank,c=t.size,u=Si(t.shape.toString(),14),d="";for(var A in a){var h=a[A].shape||t.shape,f=h.length;d+=A+": "+f+"D "+(f>0?h:"")+" "}console.log("%c"+o+"\t%c"+i+"\t%c"+l+"D "+u+"\t%c"+c+"\t%c"+d+"\t%c"+s,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();function io(e,t,n){return Si(Array.isArray(e)?parseFloat(e[0].toFixed(7))+" + "+parseFloat(e[1].toFixed(7))+"j":Qi(e)?"'"+e+"'":"bool"===n?oo(e):parseFloat(e.toFixed(7)).toString(),t)}function oo(e){return 0===e?"false":"true"}function lo(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var co=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=Ni(e),null!=n){var a=n.length;vi(a===this.size,function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+r.size+"'."})}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Di(t,this.size),this.strides=Gi(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),vi(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"});var a=this.locToIndex(n);this.values[a]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,a=e;r<a.length;r++){var s=a[r];if(s<0||s>=this.shape[n]){var i="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(i)}n++}for(var o=e[e.length-1],l=0;l<e.length-1;++l)o+=this.strides[l]*e[l];return this.values[o]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return uo().makeTensor(this.values,this.shape,this.dtype)},e}(),uo=null,Ao=null,ho=null,fo=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Ni(e),this.strides=Gi(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),vi(1===this.size,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),this.reshape([e,t,n,r,a])},e.prototype.asType=function(e){return this.throwIfDisposed(),Ao.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return ri(this,void 0,void 0,function(){var e;return ai(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Ao.buffer(this.shape,this.dtype,e)]}})})},e.prototype.bufferSync=function(){return Ao.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return ri(this,void 0,void 0,function(){var e;return ai(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Xi(this.shape,e)]}})})},e.prototype.arraySync=function(){return Xi(this.shape,this.dataSync())},e.prototype.data=function(){return ri(this,void 0,void 0,function(){var e,t;return ai(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=uo().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map(function(e){return to(e)})]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}case 2:return[2,e]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var e=uo().readSync(this.dataId);if("string"===this.dtype)try{return e.map(function(e){return to(e)})}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return ri(this,void 0,void 0,function(){var e;return ai(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,uo().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(uo().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),Ao.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),Ao.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),Ao.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),Ao.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),Ao.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),Ao.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),Ao.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var a=Gi(t),s=function(e,t,n,r){var a=Ni(t),s=r[r.length-1],i=new Array(s).fill(0),o=t.length,l="complex64"===n?lo(e):e;if(o>1)for(var c=0;c<a/s;c++)for(var u=c*s,d=0;d<s;d++)i[d]=Math.max(i[d],io(l[u+d],0,n).length);return i}(e,t,n,a),i=t.length,o=function e(t,n,r,a,s,i){void 0===i&&(i=!0);var o="complex64"===r?2:1,l=n[0],c=n.length;if(0===c)return"complex64"===r?[io(lo(t)[0],0,r)]:"bool"===r?[oo(t[0])]:[t[0].toString()];if(1===c){if(l>20){var u=3*o,d=Array.from(t.slice(0,u)),A=Array.from(t.slice((l-3)*o,l*o));return"complex64"===r&&(d=lo(d),A=lo(A)),["["+d.map(function(e,t){return io(e,s[t],r)}).join(", ")+", ..., "+A.map(function(e,t){return io(e,s[l-3+t],r)}).join(", ")+"]"]}return["["+("complex64"===r?lo(t):Array.from(t)).map(function(e,t){return io(e,s[t],r)}).join(", ")+"]"]}var h=n.slice(1),f=a.slice(1),p=a[0]*o,m=[];if(l>20){for(var g=0;g<3;g++){var x=(v=g*p)+p;m.push.apply(m,e(t.slice(v,x),h,r,f,s,!1))}for(m.push("..."),g=l-3;g<l;g++)x=(v=g*p)+p,m.push.apply(m,e(t.slice(v,x),h,r,f,s,g===l-1))}else for(g=0;g<l;g++){var v;x=(v=g*p)+p,m.push.apply(m,e(t.slice(v,x),h,r,f,s,g===l-1))}var y=2===c?",":"";for(m[0]="["+m[0]+y,g=1;g<m.length-1;g++)m[g]=" "+m[g]+y;var b=",\n";for(g=2;g<c;g++)b+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(i?"":b),m}(e,t,n,a,s),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+i),l.push("  shape: ["+t+"]"),l.push("  values:")),l.push(o.map(function(e){return"    "+e}).join("\n")),l.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),Ao.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Ao.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),Ao.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),Ao.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),Ao.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),Ao.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),Ao.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),Ao.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Ao.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),Ao.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),Ao.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),Ao.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,a){return void 0===n&&(n=.001),ho("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,a,r,n)},e.prototype.batchNorm=function(e,t,n,r,a){return void 0===a&&(a=.001),this.throwIfDisposed(),Ao.batchNorm(this,e,t,n,r,a)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ao.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ao.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ao.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ao.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ao.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ao.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ao.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ao.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Ao.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Ao.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),Ao.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),Ao.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),Ao.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),Ao.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),Ao.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),Ao.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),Ao.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),Ao.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),Ao.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),Ao.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),Ao.div(this,e)},e.prototype.divNoNan=function(e){return this.throwIfDisposed(),Ao.divNoNan(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),Ao.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),Ao.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),Ao.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),Ao.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),Ao.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),Ao.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),Ao.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),Ao.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),Ao.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),Ao.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),Ao.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),Ao.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),Ao.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),Ao.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),Ao.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),Ao.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),Ao.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),Ao.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),Ao.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),Ao.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),Ao.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),Ao.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),Ao.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),Ao.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),Ao.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),Ao.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),Ao.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),Ao.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),Ao.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),Ao.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),Ao.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),Ao.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),Ao.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),Ao.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),Ao.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),Ao.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),Ao.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),Ao.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),Ao.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),Ao.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),Ao.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),Ao.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),Ao.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Ao.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),Ao.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),Ao.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),Ao.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),Ao.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),Ao.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),Ao.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),Ao.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),Ao.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),Ao.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),Ao.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),Ao.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),Ao.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),Ao.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),Ao.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),Ao.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),Ao.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),Ao.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),Ao.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),Ao.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),Ao.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),Ao.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),Ao.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),Ao.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),Ao.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),Ao.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),Ao.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Ao.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Ao.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Ao.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Ao.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,a,s){return void 0===r&&(r="NWC"),void 0===a&&(a=1),this.throwIfDisposed(),Ao.conv1d(this,e,t,n,r,a,s)},e.prototype.conv2d=function(e,t,n,r,a,s){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),Ao.conv2d(this,e,t,n,r,a,s)},e.prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Ao.conv2dTranspose(this,e,t,n,r,a)},e.prototype.depthwiseConv2D=function(e,t,n,r,a,s){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),Ao.depthwiseConv2d(this,e,t,n,r,a,s)},e.prototype.separableConv2d=function(e,t,n,r,a,s){return void 0===a&&(a=[1,1]),void 0===s&&(s="NHWC"),this.throwIfDisposed(),Ao.separableConv2d(this,e,t,n,r,a,s)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Ao.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Ao.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),Ao.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,a){return this.throwIfDisposed(),Ao.pool(this,e,t,n,r,a)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),uo().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Ao.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Ao.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Ao.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),Ao.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,a,s,i,o){return void 0===r&&(r=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===i&&(i=0),void 0===o&&(o=0),this.throwIfDisposed(),Ao.stridedSlice(this,e,t,n,r,a,s,i,o)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Ao.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),Ao.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),Ao.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),Ao.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),Ao.spectral.irfft(this)},e}();Object.defineProperty(fo,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var po,mo,go,xo,vo,yo=function(e){function t(t,n,r,a){var s=e.call(this,t.shape,t.dtype,t.dataId,a)||this;return s.trainable=n,s.name=r,s}return ni(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!ji(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");uo().disposeTensor(this),this.dataId=e.dataId,uo().incRef(this,null)},t.prototype.dispose=function(){uo().disposeVariable(this),this.isDisposedInternal=!0},t}(fo);Object.defineProperty(yo,Symbol.hasInstance,{value:function(e){return e instanceof fo&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(po||(po={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(mo||(mo={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(go||(go={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(xo||(xo={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(vo||(vo={}));var bo={float32:xo,int32:mo,bool:go,complex64:vo};function wo(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return bo[e][t]}function No(e){return wo(e,"int32")}function jo(e,t){if(e.dtype===t.dtype)return[e,t];var n=wo(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Co(e,t){vi(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function Bo(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof fo)n.push(t);else if(a=t,Array.isArray(a)||"object"==typeof a){var a,s=t;for(var i in s){var o=s[i];r.has(o)||(r.add(o),e(o,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:jo,assertTypesMatch:Co,isTensorInList:function(e,t){return t.some(function(t){return t.id===e.id})},getTensorsInContainer:Bo});var ko,So=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),Eo=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new So}return e.prototype.ready=function(){return ri(this,void 0,void 0,function(){var e,t,n;return ai(this,function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then(function(){})];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return ri(this,void 0,void 0,function(){var t,n,r;return ai(this,function(a){switch(a.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=a.sent(),[3,3];case 2:r=n,a.label=3;case 3:if(!r)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new ao(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var e=this;di(this.backendName).forEach(function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)})},e.prototype.disposeRegisteredKernels=function(e){var t=this;di(e).forEach(function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])})},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var a=++this.pendingBackendInitId,s=r.then(function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)}).catch(function(n){return!(a<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)});return this.pendingBackendInit=s,{success:s,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,s=r.asyncInit;if(s||a)return{name:n,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,a,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun(function(){return r.startScope(a)},function(){return r.endScope(n)},function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n})},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],function(e){return{x:function(){return e.toFloat()}}},[]),t},e.prototype.runKernel=function(e,t,n,r,a){return this.runKernelFunc(null,t,null,e,n,r,a)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach(function(e){a+="complex64"===e.dtype?3:1});var s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-a-s;if(i>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+i+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,a,s,i){var o,l=this;void 0===s&&(s=[]),void 0===i&&(i=[]);var c=[],u=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var d,A=function(e){u&&(c=e.map(function(e){return l.keep(l.clone(e))}))},h=this.state.numBytes,f=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var p,m=ui(r,this.backendName);return d=null!=m?function(){var e=l.backend.numDataIds();p=m.kernelFunc({inputs:t,attrs:a,backend:l.backend});var n=Array.isArray(p)?p:[p];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(r,e,n);var o=n.map(function(e){var t=e.dataId,n=e.shape,r=e.dtype;return l.makeTensorFromDataId(t,n,r)}),c=o.filter(function(e,t){return i[t]});return A((s||[]).slice().concat(c)),o}:function(){var t=l.backend.numDataIds();p=l.tidy(function(){return e(l.backend,A)});var n=Array.isArray(p)?p:[p];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(r,t,n),n},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){o=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(r,t,function(){return d()}):d()}),u&&this.addTapeNode(r,t,o,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-h,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-f,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(e){return t[e].shape}),outputShapes:o.map(function(e){return e.shape})}),Array.isArray(p)?o:o[0]},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&Qi(e[0])&&(a=e.map(function(e){return eo(e)}));var s=r.write(a,t,n),i=new fo(t,n,s,this.nextTensorId());if(this.incRef(i,r),"string"===n){var o=this.state.tensorInfo.get(s),l=Mi(a);this.state.numBytes+=l-o.bytes,o.bytes=l}return i},e.prototype.makeTensorFromDataId=function(e,t,n,r){var a=new fo(t,n=n||"float32",e,this.nextTensorId());return this.incRef(a,r),a},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var a=new yo(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*Oi(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof yo||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return ri(this,void 0,void 0,function(){var t,n;return ai(this,function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(e){return e.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,a){var s=this,i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},o=function(e){return ci.get(e)}(e);null!=o&&(r=o.gradFunc),null!=r&&(i.gradient=function(e){return e=e.map(function(e,t){if(null==e){var r=n[t],a=Ji(r.size,r.dtype);return s.makeTensor(a,r.shape,r.dtype)}return e}),r(e.length>1?e:e[0],a)}),this.state.activeTape.push(i)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=Bo(e),r=new Set(n.map(function(e){return e.id})),a=0;a<this.state.activeScope.track.length;a++){var s=this.state.activeScope.track[a];s.kept||r.has(s.id)||s.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(e){e.kept||e.scopeId!==i.id||t.track(e)})},e.prototype.gradients=function(e,t,n,r){var a=this;if(void 0===r&&(r=!1),vi(t.length>0,function(){return"gradients() received an empty list of xs."}),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var s=this.scopedRun(function(){return a.startTape()},function(){return a.endTape()},function(){return a.tidy("forward",e)});vi(s instanceof fo,function(){return"The result y returned by f() must be a tensor."});var i=function(e,t,n){for(var r={},a={},s=0;s<t.length;s++)r[t[s].id]=!0;for(s=0;s<e.length;s++){var i=(f=e[s]).inputs;for(var o in i){for(var l=i[o],c=!1,u=0;u<t.length;u++)if(r[l.id]){f.outputs.forEach(function(e){return r[e.id]=!0}),c=!0,a[f.id]=!0;break}if(c)break}}var d={};d[n.id]=!0;var A={};for(s=e.length-1;s>=0;s--)for(i=(f=e[s]).inputs,u=0;u<f.outputs.length;u++)if(d[f.outputs[u].id]){for(var o in i)d[i[o].id]=!0,A[f.id]=!0;break}var h=[];for(s=0;s<e.length;s++){var f;if(a[(f=e[s]).id]&&A[f.id]){var p={};for(var o in f.inputs){var m=f.inputs[o];r[m.id]&&(p[o]=m)}var g=Object.assign({},f);g.inputs=p,g.outputs=f.outputs,h.push(g)}}return h}(this.state.activeTape,t,s);if(!r&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var e,r,o={};o[s.id]=null==n?(r=Yi(Ni(e=s.shape),"float32"),Fo.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var a=t[r],s=[];if(a.outputs.forEach(function(t){var n=e[t.id];null!=n?s.push(n):s.push(null)}),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+a.kernelName+".");var i=a.gradient(s),o=function(t){if(!(t in i))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(i)+".");var r=n(function(){return i[t]()});if("float32"!==r.dtype)throw new Error("Error in gradient for op "+a.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var s=a.inputs[t];if(!ji(r.shape,s.shape))throw new Error("Error in gradient for op "+a.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+s.shape+"'");if(null==e[s.id])e[s.id]=r;else{var o=e[s.id];e[s.id]=o.add(r),o.dispose()}};for(var l in a.inputs)o(l)},a=t.length-1;a>=0;a--)r(a)}(o,i,function(e){return a.tidy(e)});var l=t.map(function(e){return o[e.id]});return 0===a.state.gradientDepth&&(a.state.activeTape.forEach(function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()}),a.state.activeTape=null),{value:s,grads:l}})},e.prototype.customGrad=function(e){var t=this;return vi(Vi(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];vi(r.every(function(e){return e instanceof fo}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var s={};return r.forEach(function(e,t){s[t]=e}),t.runKernelFunc(function(t,a){return vi((n=e.apply(void 0,r.concat([a]))).value instanceof fo,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),vi(Vi(n.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),n.value},s,function(e,t){var a=n.gradFunc(e,t),s=Array.isArray(a)?a:[a];vi(s.length===r.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),vi(s.every(function(e){return e instanceof fo}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var i={};return s.forEach(function(e,t){i[t]=function(){return e}}),i})}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return ri(this,void 0,void 0,function(){var t,n;return ai(this,function(r){switch(r.label){case 0:return t=Zi(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=Zi()-t,[2,n]}})})},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new So,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),Fo=function(){var e=function(){if(null==ko){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}ko=e}return ko}();if(null==e._tfengine){var t=new si(e);e._tfengine=new Eo(t)}return function(e){oi=e}(e._tfengine.ENV),uo=function(){return e._tfengine},e._tfengine}();function _o(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var Io=ii();Io.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Io.registerFlag("IS_BROWSER",function(){return _o()}),Io.registerFlag("IS_NODE",function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}),Io.registerFlag("IS_CHROME",function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Io.registerFlag("PROD",function(){return!1}),Io.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Io.getBool("DEBUG")}),Io.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Io.registerFlag("IS_TEST",function(){return!1});var To,Do,Lo,Uo={},Po={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Ro(e,t){Uo[e]=t}function Oo(e){e in Uo||(Uo[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",function(t){t.preventDefault(),delete Uo[e]},!1),1===e?t.getContext("webgl",Po)||t.getContext("experimental-webgl",Po):t.getContext("webgl2",Po)}(e));var t=Uo[e];return t.isContextLost()?(delete Uo[e],Oo(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Uo[e])}function Mo(e,t){return[t,e]}function Qo(e){var t=Ni(e);return ki(Math.ceil(t/4))}function Ho(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function zo(e,t){var n,r,a,s,i,o,l,c,u,d=e;return 2===ii().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,s=d.RGBA32F,i=d.RED,o=4,l=1,c=d.HALF_FLOAT,u=d.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,s=d.RGBA,i=e.RGBA,o=4,l=4,c=null!=t?t.HALF_FLOAT_OES:null,u=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:s,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:o,defaultNumChannels:l,textureTypeHalfFloat:c,textureTypeFloat:u}}function Wo(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+Ko(e,t))}(e),r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(To||(To={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Do||(Do={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Lo||(Lo={}));function Vo(e){return!!(ii().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function Ko(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Go(e,t,n){return ml(e,t,function(){return e.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function qo(e,t,n){var r=ml(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Wo(e,t,function(){return e.shaderSource(r,n)}),Wo(e,t,function(){return e.compileShader(r)}),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Xo(e,t,n){var r=ml(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Wo(e,t,function(){return e.shaderSource(r,n)}),Wo(e,t,function(){return e.compileShader(r)}),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=Zo.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],a=e.split("\n"),s=a.length.toString().length+2,i=a.map(function(e,t){return Si((t+1).toString(),s)+e}),o=0,l=0;l<i.length;l++)o=Math.max(i[l].length,o);var c=i.slice(0,r-1),u=i.slice(r-1,r),d=i.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+Si(u[0],o),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Yo,Jo,Zo=/ERROR: [0-9]+:([0-9]+):/g;function $o(e,t){return ml(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function el(e,t,n){if(Wo(e,t,function(){return e.linkProgram(n)}),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function tl(e,t,n){if(Wo(e,t,function(){return e.validateProgram(n)}),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function nl(e,t,n){var r=ml(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Wo(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),Wo(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function rl(e,t,n){var r=ml(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Wo(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),Wo(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function al(e,t){return ml(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function sl(e,t){var n=ii().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function il(e,t){return ml(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function ol(e,t,n,r,a,s,i,o){var l=e.getAttribLocation(n,r);return-1!==l&&(Wo(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,a)}),Wo(e,t,function(){return e.vertexAttribPointer(l,s,e.FLOAT,!1,i,o)}),Wo(e,t,function(){return e.enableVertexAttribArray(l)}),!0)}function ll(e,t,n,r){gl(e,r),Wo(e,t,function(){return e.activeTexture(e.TEXTURE0+r)}),Wo(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)})}function cl(e,t,n,r){return ml(e,t,function(){return e.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function ul(e,t,n){return e.getUniformLocation(t,n)}function dl(e,t,n,r,a,s){Wo(e,t,function(){return ll(e,t,r,s)}),Wo(e,t,function(){return e.uniform1i(a,s)})}function Al(e,t,n,r){Wo(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),Wo(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)})}function hl(e,t,n){Wo(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),Wo(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function fl(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+pl(e,t))}function pl(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function ml(e,t,n,r){var a=Wo(e,t,function(){return n()});if(null==a)throw new Error(r);return a}function gl(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function xl(e,t){return void 0===t&&(t=2),Ni(e.slice(0,e.length-t))}function vl(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function yl(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[xl(e)].concat(vl(e))),t}function bl(e,t){var n;void 0===t&&(t=!1);var r=ii().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map(function(t,n){return n>=e.length-2?gi(e[n]):e[n]})).length&&(e=[2,e[0]])),2!==e.length){var a=Ii(e);e=a.newShape}var s=Ni(e);if(e.length<=1&&s<=r)return[1,s];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var i=xl(e),o=2,l=2;return e.length&&(o=(n=vl(e))[0],l=n[1]),ki(s=i*(o/2)*(l/2)).map(function(e){return 2*e})}return ki(s)}function wl(e){return e%2==0}function Nl(e,t){if(ji(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(wl(n)&&wl(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&wl(e[0])&&wl(t[0])}function jl(e){if(null==Yo){var t=Oo(e);Yo=t.getParameter(t.MAX_TEXTURE_SIZE)}return Yo}function Cl(e){if(null==Jo){var t=Oo(e);Jo=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Jo)}function Bl(e){if(0===e)return 0;var t=Oo(e);return kl(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:kl(t,"EXT_disjoint_timer_query")?1:0}function kl(e,t){return null!=e.getExtension(t)}function Sl(e){try{if(null!=Oo(e))return!0}catch(e){return!1}return!1}function El(e){if(0===e)return!1;var t=Oo(e);if(1===e){if(!kl(t,"OES_texture_float"))return!1}else if(!kl(t,"EXT_color_buffer_float"))return!1;return _l(t)}function Fl(e){if(0===e)return!1;var t=Oo(e);if(1!==e){if(kl(t,"EXT_color_buffer_float"))return _l(t);if(kl(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=zo(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),s}(t,n)}return!1}return!!kl(t,"OES_texture_float")&&!!kl(t,"WEBGL_color_buffer_float")&&_l(t)}function _l(e){var t=zo(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function Il(e){return 2===e&&null!=Oo(e).fenceSync}var Tl=Object.freeze({callAndCheck:Wo,canBeRepresented:Vo,getWebGLErrorMessage:Ko,getExtensionOrThrow:Go,createVertexShader:qo,createFragmentShader:Xo,createProgram:$o,linkProgram:el,validateProgram:tl,createStaticVertexBuffer:nl,createStaticIndexBuffer:rl,getNumChannels:function(){return 2===ii().getNumber("WEBGL_VERSION")?1:4},createTexture:al,validateTextureSize:sl,createFramebuffer:il,bindVertexBufferToProgramAttribute:ol,bindTextureUnit:ll,unbindTextureUnit:function(e,t,n){gl(e,n),Wo(e,t,function(){return e.activeTexture(e.TEXTURE0+n)}),Wo(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:cl,getProgramUniformLocation:ul,bindTextureToProgramUniformSampler:dl,bindCanvasToFramebuffer:function(e,t){Wo(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Wo(e,t,function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)}),Wo(e,t,function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)})},bindColorTextureToFramebuffer:Al,unbindColorTextureFromFramebuffer:hl,validateFramebuffer:fl,getFramebufferErrorMessage:pl,getBatchDim:xl,getRowsCols:vl,getShapeAs3D:yl,getTextureShapeFromLogicalShape:bl,isReshapeFree:Nl,getWebGLMaxTextureSize:jl,resetMaxTextureSize:function(){Yo=null},resetMaxTexturesInShader:function(){Jo=null},getMaxTexturesInShader:Cl,getWebGLDisjointQueryTimerVersion:Bl,hasExtension:kl,isWebGLVersionEnabled:Sl,isCapableOfRenderingToFloatTexture:El,isDownloadFloatTextureEnabled:Fl,isWebGLFenceEnabled:Il}),Dl=ii();function Ll(e){ii().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Ul(e,t){return Fo.tidy(e,t)}function Pl(e){Bo(e).forEach(function(e){return e.dispose()})}function Rl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ii().getBool("IS_TEST")||console.warn.apply(console,e)}function Ol(e,t){var n=e;if(Ri(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Ri(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&ii().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||Ri(t)){vi(n.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"}),vi(t.length===n[0],function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"});for(var a=n.slice(1),s=0;s<t.length;++s)e(t[s],a,r.concat(s))}else vi(0===n.length,function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"})}(e,r,[]),r}function Ml(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function Ql(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof fo)return Ml(r,e.dtype,t,n),e;var a=Wi(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Ml(r,a,t,n),null==e||!Ri(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var s=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+s+"'")}var i=Ol(e,a);Ri(e)||Array.isArray(e)||(e=[e]);var o="string"!==a?qi(e,a,ii().getBool("DEBUG")):wi(e,[],!0);return Fo.makeTensor(o,i,a)}function Hl(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(e,r){return Ql(e,t+"["+r+"]",n)},r)}function zl(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Wl(e,t,n){for(var r=e.length+t.length,a=[],s=0,i=0,o=0;o<r;o++)-1===n.indexOf(o)?a.push(e[s++]):a.push(t[i++]);return a}function Vl(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map(function(t){return e[t]})]}function Kl(e,t){return Wl(e,t.map(function(e){return 1}),t)}function Gl(e,t,n){vi(zl(t,n),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."})}function ql(e,t){if(zl(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(function(e){return n.push(e)}),n}function Xl(e){return e.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function Yl(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function Jl(e,t){var n=e[0].length;e.forEach(function(e,t){vi(e.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"})}),vi(t>=0&&t<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=e[0];e.forEach(function(e,a){for(var s=0;s<n;s++)vi(s===t||e[s]===r[s],function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."})})}function Zl(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function $l(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Fo.startScope(n);try{var a=r.apply(void 0,e);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Fo.endScope(a),a}catch(e){throw Fo.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}Dl.registerFlag("HAS_WEBGL",function(){return Dl.getNumber("WEBGL_VERSION")>0}),Dl.registerFlag("WEBGL_VERSION",function(){return Sl(2)?2:Sl(1)?1:0}),Dl.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return 2===Dl.get("WEBGL_VERSION")}),Dl.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Dl.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Dl.registerFlag("WEBGL_PACK",function(){return Dl.getBool("HAS_WEBGL")}),Dl.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Dl.getBool("WEBGL_PACK")}),Dl.registerFlag("WEBGL_PACK_CLIP",function(){return Dl.getBool("WEBGL_PACK")}),Dl.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Dl.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Dl.getBool("WEBGL_PACK")}),Dl.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Dl.getBool("WEBGL_PACK")}),Dl.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Dl.getBool("WEBGL_PACK")}),Dl.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Dl.getBool("WEBGL_PACK")}),Dl.registerFlag("WEBGL_PACK_REDUCE",function(){return Dl.getBool("WEBGL_PACK")}),Dl.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Dl.getBool("WEBGL_PACK")}),Dl.registerFlag("WEBGL_CONV_IM2COL",function(){return Dl.getBool("WEBGL_PACK")}),Dl.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return jl(Dl.getNumber("WEBGL_VERSION"))}),Dl.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return Cl(Dl.getNumber("WEBGL_VERSION"))}),Dl.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=Dl.getNumber("WEBGL_VERSION");return 0===e?0:Bl(e)}),Dl.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Dl.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),Dl.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return El(Dl.getNumber("WEBGL_VERSION"))}),Dl.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Dl.getBool("WEBGL_FORCE_F16_TEXTURES")&&Dl.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Dl.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return Fl(Dl.getNumber("WEBGL_VERSION"))}),Dl.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return Il(Dl.getNumber("WEBGL_VERSION"))}),Dl.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Dl.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),ho=Ll;var ec=$l({complex_:function(e,t){var n=Ql(e,"real","complex"),r=Ql(t,"imag","complex");return yi(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Fo.runKernelFunc(function(e){return e.complex(n,r)},{$real:n,$imag:r})}}),tc=$l({real_:function(e){var t=Ql(e,"input","real");return Fo.runKernelFunc(function(e){return e.real(t)},{$input:t})}}),nc=$l({imag_:function(e){var t=Ql(e,"input","imag");return Fo.runKernelFunc(function(e){return e.imag(t)},{$input:t})}});function rc(e,t,n){return ac(e,t,Ol(e,n),n)}function ac(e,t,n,r){if(null==r&&(r=Wi(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ri(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){$i(t);var a=Ni(t),s=Ni(n);vi(a===s,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+a+" values but has "+s});for(var i=0;i<n.length;++i){var o=n[i],l=i!==n.length-1||o!==Ni(t.slice(i));vi(n[i]===t[i]||!l,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "})}}return Ri(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?qi(e,r,ii().getBool("DEBUG")):wi(e,[],!0),Fo.makeTensor(e,t,r)}function sc(e,t){if((Ri(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Ri(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ac(e,[],[],t)}function ic(e,t){bi(e);var n=Ol(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ac(e,null,n,t)}function oc(e,t,n){if(bi(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Ol(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ac(e,t,r,n)}function lc(e,t,n){if(bi(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=Ol(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ac(e,t,r,n)}function cc(e,t,n){if(bi(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Ol(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ac(e,t,r,n)}function uc(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=uc(e,"float32"),r=dc(e,"float32");return ec(n,r)}var a=Yi(Ni(e),t);return Fo.makeTensor(a,e,t)}function dc(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=dc(e,"float32"),r=dc(e,"float32");return ec(n,r)}var a=Ji(Ni(e),t);return Fo.makeTensor(a,e,t)}function Ac(e,t,n){return Fo.runKernelFunc(function(r){return r.fill(e,t,n)},{})}function hc(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return dc([0],r);var a=Ji(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var s=1;s<a.length;s++)a[s]=a[s-1]+n;return ic(a,r)}var fc=$l({onesLike_:function(e){var t=Ql(e,"x","onesLike");if("complex64"===t.dtype){var n=fc(tc(t)),r=pc(nc(t));return ec(n,r)}return Fo.runKernelFunc(function(e){return e.onesLike(t)},{$x:t},function(e,t){return{$x:function(){return pc(e)}}})}}),pc=$l({zerosLike_:function(e){var t=Ql(e,"x","zerosLike");return Fo.runKernelFunc(function(e){return e.zerosLike(t)},{$x:t},function(e,t){return{$x:function(){return pc(e)}}})}}),mc=$l({concat_:function(e,t){void 0===t&&(t=0),vi(e.length>=1,function(){return"Pass at least one tensor to concat"});var n=Hl(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach(function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")}),t=_i(t,n[0].shape)[0];var r=Zl(n.map(function(e){return e.shape}),t);if(0===Ni(r))return rc([],r);if(1===(n=n.filter(function(e){return e.size>0})).length)return n[0];var a=n.map(function(e){return e.shape});Jl(a,t);var s=n,i={axis:t};return Fo.runKernelFunc(function(e){return e.concat(n,t)},s,function(e){var n=a.map(function(e){return e[t]});return bc(e,n,t).map(function(e){return function(){return e}})},"Concat",i)}}),gc=$l({concat1d_:function(e){return mc(e,0)}}),xc=$l({concat2d_:function(e,t){return mc(e,t)}}),vc=$l({concat3d_:function(e,t){return mc(e,t)}}),yc=$l({concat4d_:function(e,t){return mc(e,t)}}),bc=$l({split_:function(e,t,n){void 0===n&&(n=0);var r,a=Ql(e,"x","split");return n=_i(n,a.shape)[0],"number"==typeof t?(vi(a.shape[n]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(a.shape[n]/t)):(vi(a.shape[n]===t.reduce(function(e,t){return e+t}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),Fo.runKernelFunc(function(e){return e.split(a,r,n)},{$x:a},function(e){return{$x:function(){return mc(e,n)}}})}});function wc(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;var Nc=wc(function(e){!function(e,t){function n(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function r(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){var a=new n(e),s=t&&t.state,i=a.next;return i.int32=function(){return 4294967296*a.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,s&&("object"==typeof s&&r(s,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.alea=a}(0,e)}),jc=wc(function(e){!function(e,t){function n(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function a(e,t){var a=new n(e),s=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,s&&("object"==typeof s&&r(s,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.xor128=a}(0,e)}),Cc=wc(function(e){!function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function a(e,t){var a=new n(e),s=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,s&&("object"==typeof s&&r(s,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.xorwow=a}(0,e)}),Bc=wc(function(e){!function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function r(e,t){return t.x=e.x.slice(),t.i=e.i,t}function a(e,t){null==e&&(e=+new Date);var a=new n(e),s=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,s&&(s.x&&r(s,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.xorshift7=a}(0,e)}),kc=wc(function(e){!function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,s=t.i;return t.w=r=r+1640531527|0,n=a[s+34&127],e=a[s=s+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[s]=n^e,t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,a,s,i,o=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,s=-32;s<l;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(i=i+1640531527|0,a=0==(n=o[127&s]^=r+i)?a+1:0);for(a>=128&&(o[127&(t&&t.length||0)]=-1),a=127,s=512;s>0;--s)r=o[a+34&127],n=o[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,o[a]=r^n;e.w=i,e.X=o,e.i=a}(t,e)}function r(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function a(e,t){null==e&&(e=+new Date);var a=new n(e),s=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,s&&(s.X&&r(s,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.xor4096=a}(0,e)}),Sc=wc(function(e){!function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function a(e,t){var a=new n(e),s=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,s&&("object"==typeof s&&r(s,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.tychei=a}(0,e)}),Ec=wc(function(e){!function(t,r){var a,s=this,i=256,o="random",l=r.pow(i,6),c=r.pow(2,52),u=2*c,d=255;function A(e,n,d){var A=[],g=p(function e(t,n){var r,a=[],s=typeof t;if(n&&"object"==s)for(r in t)try{a.push(e(t[r],n-1))}catch(e){}return a.length?a:"string"==s?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,m(t)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(i):(e=new Uint8Array(i),(s.crypto||s.msCrypto).getRandomValues(e)),m(e)}catch(e){var n=s.navigator,r=n&&n.plugins;return[+new Date,s,r,s.screen,m(t)]}}():e,3),A),x=new h(A),v=function(){for(var e=x.g(6),t=l,n=0;e<c;)e=(e+n)*i,t*=i,n=x.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return v.int32=function(){return 0|x.g(4)},v.quick=function(){return x.g(4)/4294967296},v.double=v,p(m(x.S),t),(n.pass||d||function(e,t,n,a){return a&&(a.S&&f(a,x),e.state=function(){return f(x,{})}),n?(r[o]=e,t):e})(v,g,"global"in n?n.global:this==r,n.state)}function h(e){var t,n=e.length,r=this,a=0,s=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<i;)o[a]=a++;for(a=0;a<i;a++)o[a]=o[s=d&s+e[a%n]+(t=o[a])],o[s]=t;(r.g=function(e){for(var t,n=0,a=r.i,s=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*i+o[d&(o[a]=o[s=d&s+t])+(o[s]=t)];return r.i=a,r.j=s,n})(i)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(r["seed"+o]=A,p(r.random(),t),e.exports){e.exports=A;try{a=n(8082)}catch(e){}}}([],Math)});Ec.alea=Nc,Ec.xor128=jc,Ec.xorwow=Cc,Ec.xorshift7=Bc,Ec.xor4096=kc,Ec.tychei=Sc;var Fc=Ec.alea,_c=function(){function e(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var s=a||Math.random();this.random=Fc(s.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,s=void 0,i=void 0;do{i=(a=2*this.random()-1)*a+(s=2*this.random()-1)*s}while(i>=1||0===i);var o=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*a*o,n=this.mean+this.stdDev*s*o,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),Ic=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var a=r||Math.random();this.randu=Fc(a.toString()),this.randn=new _c(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,a,s;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(s*=s*s,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-s+Math.log(s)),(a=this.randu())<t||Math.log(a)<n)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),Tc=function(){function e(e,t,n,r){var a=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==a.dtype||"float32"===a.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=Fc(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function Dc(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",$i(e),new co(e,t,n)}var Lc=$l({batchToSpaceND_:function(e,t,n){var r=Ql(e,"x","batchToSpaceND"),a=t.reduce(function(e,t){return e*t});return vi(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),vi(n.length===t.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length}),vi(r.shape[0]%a==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+a}),Fo.runKernelFunc(function(e){return e.batchToSpaceND(r,t,n)},{$x:r},function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}})}}),Uc=$l({broadcastTo_:function(e,t){var n=Ql(e,"broadcastTo","x"),r=n.shape;if(t.some(function(e){return!(e>0)||e%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=n.reshape(a)}for(var s=Array.from(t),i=t.length-1;i>=0;i--)if(n.shape[i]===t[i])s[i]=1;else if(1!==n.shape[i])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var o=s.map(function(e,t){return e>1?t:-1}).filter(function(e){return e>=0});return 0===o.length?n.clone():Fo.runKernelFunc(function(e){return e.tile(n,s)},{input:n},function(e){return{input:function(){return e.sum(o,!0)}}})}}),Pc=$l({cast_:function(e,t){var n=Ql(e,"x","cast");if(!Ui(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return Fo.runKernelFunc(function(e){return e.cast(n,t)},{x:n},function(e){return{x:function(){return e.clone()}}},"Cast",r)}}),Rc=$l({clone_:function(e){var t=Ql(e,"x","clone",null);return Fo.runKernelFunc(function(){return Fo.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(e){return{$x:function(){return e.toFloat()}}})}}),Oc=$l({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var a=Ql(e,"x","cumsum"),s=ql([t|=0],a.rank),i=a;null!=s&&(i=a.transpose(s));var o=Yl(1,a.rank)[0],l=Fo.runKernelFunc(function(e){return e.cumsum(i,o,n,r)},{permutedX:i},function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}});return null!=s&&(l=l.transpose(s)),l}}),Mc=$l({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=Ql(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],s="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];return vi(a*t>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+"  for depthToSpace with input shape\n      "+r.shape}),vi(s*t>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+s+" and "+t+" for depthToSpace with input shape\n          "+r.shape}),vi(i%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+i+" for depthToSpace with input shape "+r.shape}),Fo.runKernelFunc(function(e){return e.depthToSpace(r,t,n)},{$x:r})}}),Qc=$l({expandDims_:function(e,t){void 0===t&&(t=0);var n=Ql(e,"x","expandDims",null);vi(t<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return t<0&&(vi(-(n.rank+1)<=t,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),t=n.rank+t+1),r.splice(t,0,1),eu(n,r)}}),Hc=$l({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var a=Dc([e,t],r),s=e<=t?e:t,i=0;i<s;++i)a.set(1,i,i);var o=a.toTensor().as2D(e,t);if(null==n)return o;if(1===n.length)return au(Qc(o,0),[n[0],1,1]);if(2===n.length)return au(Qc(Qc(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return au(Qc(Qc(Qc(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),zc=$l({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var a=Ql(e,"logits","multinomial"),s=a.size,i=a.rank;if(s<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+s+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var o=1===i?a.as2D(1,-1):a,l=Fo.runKernelFunc(function(e){return e.multinomial(o,r,t,n)},{logits2D:o});return 1===i?l.as1D():l}}),Wc=$l({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var a=Ql(e,"indices","oneHot","int32"),s=a.shape.concat([t]);return a=a.flatten(),Fo.runKernelFunc(function(e){return e.oneHot(a,t,n,r)},{$indices:a},function(e){return{$indices:function(){return dc(a.shape,"float32")}}}).reshape(s)}}),Vc=$l({pad_:function(e,t,n){void 0===n&&(n=0);var r=Ql(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n};return Fo.runKernelFunc(function(e){return e.pad(r,t,n)},{x:r},function(e){var n=t.map(function(e){return e[0]});return{x:function(){return e.slice(n,r.shape)}}},"PadV2",a)}}),Kc=$l({pad1d_:function(e,t,n){return void 0===n&&(n=0),vi(2===t.length,function(){return"Invalid number of paddings. Must be length of 2."}),Vc(e,[t],n)}}),Gc=$l({pad2d_:function(e,t,n){return void 0===n&&(n=0),vi(2===t.length&&2===t[0].length&&2===t[1].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),Vc(e,t,n)}}),qc=$l({pad3d_:function(e,t,n){return void 0===n&&(n=0),vi(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),Vc(e,t,n)}}),Xc=$l({pad4d_:function(e,t,n){return void 0===n&&(n=0),vi(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),Vc(e,t,n)}}),Yc=$l({rand_:function(e,t,n){var r=Ni(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(var s=0;s<r;s++)a[s]=t();return Fo.makeTensor(a,e,n)}}),Jc=$l({randomNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var s=new _c(t,n,r,!1,a),i=Dc(e,r),o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}}),Zc=$l({randomGamma_:function(e,t,n,r,a){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var s=new Ic(t,n,r,a),i=Dc(e,r),o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}}),$c=$l({randomUniform_:function(e,t,n,r,a){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var s=Dc(e,r),i=new Tc(t,n,null,a),o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}}),eu=$l({reshape_:function(e,t){var n=Ql(e,"x","reshape",null);t=Fi(t,n.size),vi(n.size===Ni(t),function(){return"new shape and old shape must have the same number of elements."});var r={shape:t};return Fo.runKernelFunc(function(e){return e.reshape(n,t)},{x:n},function(e){return{x:function(){return e.reshape(n.shape)}}},"Reshape",r)}}),tu=$l({spaceToBatchND_:function(e,t,n){var r=Ql(e,"x","spaceToBatchND");return vi(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),vi(n.length===t.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length}),vi(r.shape.reduce(function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()}),Fo.runKernelFunc(function(e){return e.spaceToBatchND(r,t,n)},{$x:r},function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}})}}),nu=$l({squeeze_:function(e,t){var n=Ql(e,"x","squeeze");return eu(n,Ii(n.shape,t).newShape)}}),ru=$l({stack_:function(e,t){void 0===t&&(t=0);var n=Hl(e,"tensors","stack");if(vi(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),1===n.length)return n[0].expandDims(t);var r=n[0].rank,a=n[0].shape,s=n[0].dtype;vi(t<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(e){yi(a,e.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(e){vi(s===e.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var i=n.map(function(e){return e.expandDims(t)});return mc(i,t)}}),au=$l({tile_:function(e,t){var n=Ql(e,"x","tile",null);vi(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."});var r=[n],a={reps:t};return Fo.runKernelFunc(function(e,r){var a=e.tile(n,t);return r([n]),a},{x:n},function(e,n){var r=n[0];return{x:function(){var n=pc(r);if(1===r.rank)for(var a=0;a<t[0];++a)n=n.add(e.slice([a*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(a=0;a<t[0];++a)for(var s=0;s<t[1];++s)n=n.add(e.slice([a*r.shape[0],s*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(a=0;a<t[0];++a)for(s=0;s<t[1];++s)for(var i=0;i<t[2];++i)n=n.add(e.slice([a*r.shape[0],s*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(a=0;a<t[0];++a)for(s=0;s<t[1];++s)for(i=0;i<t[2];++i)for(var o=0;o<t[3];++o)n=n.add(e.slice([a*r.shape[0],s*r.shape[1],i*r.shape[2],o*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}},"Tile",a,r)}}),su=$l({truncatedNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var s=new _c(t,n,r,!0,a),i=Dc(e,r),o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}}),iu=$l({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=Ql(e,"x","unstack");vi(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),t<0&&(t+=n.shape.length);var r={axis:t};return Fo.runKernelFunc(function(e){return e.unstack(n,t)},{x:n},function(e){return{x:function(){return ru(e,t)}}},"Unpack",r)}});function ou(e,t,n,r){void 0===r&&(r=!0);var a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var s=t.length,i=0;i<s;++i)a=a.concat([e[i+1]/t[i],t[i]]);a=a.concat(e.slice(s+1))}return a}function lu(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{var s=[],i=[];for(a=1;a<e;++a)a>=2*t+1||a%2==1?i.push(a):s.push(a);r.push.apply(r,s),r.push(0),r.push.apply(r,i)}return r}function cu(e,t,n,r){void 0===r&&(r=!0);var a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var s=1;s<e.length;++s)s<=t.length?r?a.push(t[s-1]*e[s]):a.push(e[s]/t[s-1]):a.push(e[s]);return a}function uu(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function du(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function Au(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],a=1,s=0;s<n.length-1;++s)a*=n[s];var i=e.shape,o=n.slice();o.pop();var l=1;for(s=r;s<e.rank;++s)l*=i[s],o.push(i[s]);var c=Gi(e.shape).map(function(e){return e/l}).concat([1]).slice(0,r);return[o,a,l,c]}Object.freeze({prepareAndValidate:Au});function hu(e){return e<=30?e:Ki(e,Math.floor(Math.sqrt(e)))}function fu(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,s="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+a+".";if(n.rank<a)throw new Error(s+" update.rank < "+a+". ");if(e.length<r+(n.rank-a))throw new Error(s+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(s+" update.rank != "+(a+e.length-r));for(var i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(s+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+t.shape[i]+").");for(i=0;i<n.rank-a;++i)if(n.shape[i+a]!==e[i+r])throw new Error(s+" updates.shape["+(i+a)+"] ("+n.shape[i+a]+") != shape["+(i+a)+"] ("+e[i+a]+")")}function pu(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}fu(n,t,e)}function mu(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,s=n.length,i=1,o=a;o<s;++o)i*=n[o];var l=a<1?1:a;return{sliceRank:a,numUpdates:Ni(t.shape)/l,sliceSize:i,strides:Gi(n.slice(0,a)).concat([1]),outputSize:Ni(n)}}Object.freeze({validateUpdateShape:fu,validateInput:pu,calculateShapes:mu});function gu(e,t,n){vi(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),vi(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."});for(var r=function(r){vi(t[r]+n[r]<=e.shape[r],function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"})},a=0;a<e.rank;++a)r(a)}function xu(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function vu(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function yu(e,t,n,r,a){var s=t[a],i=n[a]||1;(e&1<<a||null==s)&&(s=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var o=r[a];return s<0&&(s+=o),mi(0,s,o-1)}function bu(e,t,n,r,a){var s=t[a],i=n[a]||1;(e&1<<a||null==s)&&(s=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var o=r[a];return s<0&&(s+=o),i>0?mi(0,s,o):mi(-1,s,o-1)}function wu(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function Nu(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}Object.freeze({assertParamsValid:gu,maskToAxes:xu,computeOutShape:vu,startForAxis:yu,stopForAxis:bu,isSliceContinous:wu,computeFlatOffset:Nu});function ju(e){return Fo.customGrad(e)}var Cu=$l({softmax_:function(e,t){void 0===t&&(t=-1);var n=Ql(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return Fo.runKernelFunc(function(e,r){var a=e.softmax(n,t);return r([a]),a},{logits:n},function(e,n){var r=n[0],a=e.mul(r);return{logits:function(){return a.sub(a.sum([t],!0).mul(r))}}},"Softmax",{dim:t},[],[!0])}}),Bu=$l({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=Ql(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return ju(function(e,n){var r=e.max(t,!0),a=e.sub(r),s=a.toFloat().sub(a.exp().sum(t,!0).log());return n([s]),{value:s,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}})(n)}}),ku=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),Su=function(){function e(){}return e.prototype.time=function(e){return Eu("time")},e.prototype.read=function(e){return Eu("read")},e.prototype.readSync=function(e){return Eu("readSync")},e.prototype.numDataIds=function(){return Eu("numDataIds")},e.prototype.disposeData=function(e){return Eu("disposeData")},e.prototype.write=function(e,t,n){return Eu("write")},e.prototype.move=function(e,t,n,r){return Eu("move")},e.prototype.memory=function(){return Eu("memory")},e.prototype.floatPrecision=function(){return Eu("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return Eu("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,Eu("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return Eu("slice")},e.prototype.stridedSlice=function(e,t,n,r){return Eu("stridedSlice")},e.prototype.unstack=function(e,t){return Eu("unstack")},e.prototype.reverse=function(e,t){return Eu("reverse")},e.prototype.concat=function(e,t){return Eu("concat")},e.prototype.neg=function(e){return Eu("neg")},e.prototype.add=function(e,t){return Eu("add")},e.prototype.addN=function(e){return Eu("addN")},e.prototype.subtract=function(e,t){return Eu("subtract")},e.prototype.multiply=function(e,t){return Eu("multiply")},e.prototype.realDivide=function(e,t){return Eu("realDivide")},e.prototype.floorDiv=function(e,t){return Eu("floorDiv")},e.prototype.sum=function(e,t){return Eu("sum")},e.prototype.prod=function(e,t){return Eu("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return Eu("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return Eu("argMin")},e.prototype.argMax=function(e,t){return Eu("argMax")},e.prototype.equal=function(e,t){return Eu("equal")},e.prototype.notEqual=function(e,t){return Eu("notEqual")},e.prototype.less=function(e,t){return Eu("less")},e.prototype.lessEqual=function(e,t){return Eu("lessEqual")},e.prototype.greater=function(e,t){return Eu("greater")},e.prototype.greaterEqual=function(e,t){return Eu("greaterEqual")},e.prototype.logicalNot=function(e){return Eu("logicalNot")},e.prototype.logicalAnd=function(e,t){return Eu("logicalAnd")},e.prototype.logicalOr=function(e,t){return Eu("logicalOr")},e.prototype.where=function(e){return Eu("where")},e.prototype.select=function(e,t,n){return Eu("select")},e.prototype.topk=function(e,t,n){return Eu("topk")},e.prototype.min=function(e,t){return Eu("min")},e.prototype.minimum=function(e,t){return Eu("minimum")},e.prototype.mod=function(e,t){return Eu("mod")},e.prototype.max=function(e,t){return Eu("max")},e.prototype.maximum=function(e,t){return Eu("maximum")},e.prototype.all=function(e,t){return Eu("all")},e.prototype.any=function(e,t){return Eu("any")},e.prototype.squaredDifference=function(e,t){return Eu("squaredDifference")},e.prototype.ceil=function(e){return Eu("ceil")},e.prototype.floor=function(e){return Eu("floor")},e.prototype.round=function(e){return Eu("round")},e.prototype.sign=function(e){return Eu("sign")},e.prototype.isNaN=function(e){return Eu("isNaN")},e.prototype.isInf=function(e){return Eu("isInf")},e.prototype.isFinite=function(e){return Eu("isFinite")},e.prototype.pow=function(e,t){return Eu("pow")},e.prototype.exp=function(e){return Eu("exp")},e.prototype.expm1=function(e){return Eu("expm1")},e.prototype.softmax=function(e,t){return Eu("softmax")},e.prototype.log=function(e){return Eu("log")},e.prototype.log1p=function(e){return Eu("log1p")},e.prototype.sqrt=function(e){return Eu("sqrt")},e.prototype.rsqrt=function(e){return Eu("rsqrt")},e.prototype.square=function(e){return Eu("square")},e.prototype.reciprocal=function(e){return Eu("reciprocal")},e.prototype.relu=function(e){return Eu("relu")},e.prototype.relu6=function(e){return Eu("relu6")},e.prototype.prelu=function(e,t){return Eu("prelu")},e.prototype.elu=function(e){return Eu("elu")},e.prototype.eluDer=function(e,t){return Eu("eluDer")},e.prototype.selu=function(e){return Eu("selu")},e.prototype.int=function(e){return Eu("int")},e.prototype.clip=function(e,t,n){return Eu("clip")},e.prototype.abs=function(e){return Eu("abs")},e.prototype.complexAbs=function(e){return Eu("complexAbs")},e.prototype.sigmoid=function(e){return Eu("sigmoid")},e.prototype.softplus=function(e){return Eu("softplus")},e.prototype.sin=function(e){return Eu("sin")},e.prototype.cos=function(e){return Eu("cos")},e.prototype.tan=function(e){return Eu("tan")},e.prototype.asin=function(e){return Eu("asin")},e.prototype.acos=function(e){return Eu("acos")},e.prototype.atan=function(e){return Eu("atan")},e.prototype.atan2=function(e,t){return Eu("atan2")},e.prototype.sinh=function(e){return Eu("sinh")},e.prototype.cosh=function(e){return Eu("cosh")},e.prototype.tanh=function(e){return Eu("tanh")},e.prototype.asinh=function(e){return Eu("asinh")},e.prototype.acosh=function(e){return Eu("acosh")},e.prototype.atanh=function(e){return Eu("atanh")},e.prototype.erf=function(e){return Eu("erf")},e.prototype.step=function(e,t){return Eu("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,Eu("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return Eu("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return Eu("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return Eu("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,Eu("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return Eu("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return Eu("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return Eu("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return Eu("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return Eu("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return Eu("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return Eu("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return Eu("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return Eu("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return Eu("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return Eu("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return Eu("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return Eu("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return Eu("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return Eu("reshape")},e.prototype.cast=function(e,t){return Eu("cast")},e.prototype.tile=function(e,t){return Eu("tile")},e.prototype.pad=function(e,t,n){return Eu("pad")},e.prototype.transpose=function(e,t){return Eu("transpose")},e.prototype.gather=function(e,t,n){return Eu("gather")},e.prototype.gatherND=function(e,t){return Eu("gatherND")},e.prototype.scatterND=function(e,t,n){return Eu("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return Eu("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return Eu("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return Eu("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return Eu("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return Eu("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return Eu("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,a,s){return Eu("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,a){return Eu("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,a,s,i){return Eu("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return Eu("multinomial")},e.prototype.oneHot=function(e,t,n,r){return Eu("oneHot")},e.prototype.cumsum=function(e,t,n,r){return Eu("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,a){return Eu("nonMaxSuppression")},e.prototype.fft=function(e){return Eu("fft")},e.prototype.ifft=function(e){return Eu("ifft")},e.prototype.complex=function(e,t){return Eu("complex")},e.prototype.real=function(e){return Eu("real")},e.prototype.imag=function(e){return Eu("imag")},e.prototype.cropAndResize=function(e,t,n,r,a,s){return Eu("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return Eu("depthToSpace")},e.prototype.split=function(e,t,n){return Eu("split")},e.prototype.sparseToDense=function(e,t,n,r){return Eu("sparseToDense")},e.prototype.diag=function(e){return Eu("diag")},e.prototype.fill=function(e,t,n){return Eu("fill")},e.prototype.onesLike=function(e){return Eu("onesLike")},e.prototype.zerosLike=function(e){return Eu("zerosLike")},e.prototype.linspace=function(e,t,n){return Eu("linspace")},e.prototype.dispose=function(){return Eu("dispose")},e}();function Eu(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Fu(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var s=n-1-a,i=e[s]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(s)}return r}function _u(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],s=t.length-r-1,i=t[s];(null==a||1===a&&i>1)&&n.unshift(s)}return n}function Iu(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var s=e[e.length-a-1];null==s&&(s=1);var i=t[t.length-a-1];if(null==i&&(i=1),1===s)n.unshift(i);else if(1===i)n.unshift(s);else{if(s!==i)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(s)}}return n}function Tu(e,t,n,r,a,s,i){void 0===i&&(i="channelsLast");var o,l=Ru(t),c=l[0],u=l[1];if("channelsLast"===i)o=[c,u,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);o=[c,u,e[1],e[1]]}return Lu(e,o,n,r,a,s,!1,i)}function Du(e,t,n,r,a,s,i){void 0===i&&(i="NDHWC");var o,l,c=Ou(t),u=c[0],d=c[1],A=c[2];if("NDHWC"===i)l="channelsLast",o=[u,d,A,e[4],e[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat "+i);l="channelsFirst",o=[u,d,A,e[1],e[1]]}return Uu(e,o,n,r,a,!1,l,s)}function Lu(e,t,n,r,a,s,i,o){void 0===i&&(i=!1),void 0===o&&(o="channelsLast");var l=[-1,-1,-1,-1],c=l[0],u=l[1],d=l[2],A=l[3];if("channelsLast"===o)c=e[0],u=e[1],d=e[2],A=e[3];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);c=e[0],A=e[1],u=e[2],d=e[3]}var h,f=t[0],p=t[1],m=t[3],g=Ru(n),x=g[0],v=g[1],y=Ru(r),b=y[0],w=y[1],N=Mu(f,b),j=Mu(p,w),C=function(e,t,n,r,a,s,i,o){var l,c,u;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,a){null==r&&(r=Pu(e,t,n));var s=e[1],i=Qu((e[0]-t+2*r)/n+1,a);vi(Ci(i),function(){return"The output # of rows ("+i+") must be an integer. Change the stride and/or zero pad parameters"});var o=Qu((s-t+2*r)/n+1,a);return vi(Ci(o),function(){return"The output # of columns ("+o+") must be an integer. Change the stride and/or zero pad parameters"}),[i,o]}([t,n],s,r,e,o);c=d[0],u=d[1]}else if("same"===e){c=Math.ceil(t/r),u=Math.ceil(n/a);var A=Math.max(0,(c-1)*r+s-t),h=Math.max(0,(u-1)*a+i-n),f=Math.floor(A/2),p=A-f,m=Math.floor(h/2);l={top:f,bottom:p,left:m,right:h-m,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-s+1)/r),u=Math.ceil((n-i+1)/a)}return{padInfo:l,outHeight:c,outWidth:u}}(a,u,d,x,v,N,j,s),B=C.padInfo,k=C.outHeight,S=C.outWidth,E=i?m*A:m;return"channelsFirst"===o?h=[c,E,k,S]:"channelsLast"===o&&(h=[c,k,S,E]),{batchSize:c,dataFormat:o,inHeight:u,inWidth:d,inChannels:A,outHeight:k,outWidth:S,outChannels:E,padInfo:B,strideHeight:x,strideWidth:v,filterHeight:f,filterWidth:p,effectiveFilterHeight:N,effectiveFilterWidth:j,dilationHeight:b,dilationWidth:w,inShape:e,outShape:h,filterShape:t}}function Uu(e,t,n,r,a,s,i,o){void 0===s&&(s=!1),void 0===i&&(i="channelsLast");var l=[-1,-1,-1,-1,-1],c=l[0],u=l[1],d=l[2],A=l[3],h=l[4];if("channelsLast"===i)c=e[0],u=e[1],d=e[2],A=e[3],h=e[4];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);c=e[0],h=e[1],u=e[2],d=e[3],A=e[4]}var f,p=t[0],m=t[1],g=t[2],x=t[4],v=Ou(n),y=v[0],b=v[1],w=v[2],N=Ou(r),j=N[0],C=N[1],B=N[2],k=Mu(p,j),S=Mu(m,C),E=Mu(g,B),F=function(e,t,n,r,a,s,i,o,l,c,u){var d,A,h,f;if("number"==typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var p=function(e,t,n,r,a,s){null==a&&(a=Pu(e,t,r));var i=e[1],o=e[2],l=Qu((e[0]-t+2*a)/r+1,s);vi(Ci(l),function(){return"The output # of depths ("+l+") must be an integer. Change the stride and/or zero pad parameters"});var c=Qu((i-t+2*a)/r+1,s);vi(Ci(c),function(){return"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters"});var u=Qu((o-t+2*a)/r+1,s);return vi(Ci(u),function(){return"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"}),[l,c,u,1]}([t,n,r,1],o,0,a,e,u);A=p[0],h=p[1],f=p[2]}else if("same"===e){var m=((A=Math.ceil(t/a))-1)*a+o-t,g=((h=Math.ceil(n/s))-1)*s+l-n,x=((f=Math.ceil(r/i))-1)*i+c-r,v=Math.floor(m/2),y=m-v,b=Math.floor(g/2),w=g-b,N=Math.floor(x/2);d={top:b,bottom:w,left:N,right:x-N,front:v,back:y,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},A=Math.ceil((t-o+1)/a),h=Math.ceil((n-l+1)/s),f=Math.ceil((r-c+1)/i)}return{padInfo:d,outDepth:A,outHeight:h,outWidth:f}}(a,u,d,A,y,b,w,k,S,E,o),_=F.padInfo,I=F.outDepth,T=F.outHeight,D=F.outWidth,L=s?x*h:x;return"channelsFirst"===i?f=[c,L,I,T,D]:"channelsLast"===i&&(f=[c,I,T,D,L]),{batchSize:c,dataFormat:i,inDepth:u,inHeight:d,inWidth:A,inChannels:h,outDepth:I,outHeight:T,outWidth:D,outChannels:L,padInfo:_,strideDepth:y,strideHeight:b,strideWidth:w,filterDepth:p,filterHeight:m,filterWidth:g,effectiveFilterDepth:k,effectiveFilterHeight:S,effectiveFilterWidth:E,dilationDepth:j,dilationHeight:C,dilationWidth:B,inShape:e,outShape:f,filterShape:t}}function Pu(e,t,n,r){void 0===r&&(r=1);var a=Mu(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function Ru(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Ou(e){return"number"==typeof e?[e,e,e]:e}function Mu(e,t){return t<=1?e:e+(e-1)*(t-1)}function Qu(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function Hu(e){var t=Ru(e),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function zu(e,t){return Hu(e)||Hu(t)}function Wu(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function Vu(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=dc(e.shape),a=e.toFloat(),s=n.complex(a,r);return r.dispose(),a.dispose(),s}if(!Pi(e.dtype,t))return Fo.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var i=n.real(e);return s=i.cast(t),i.dispose(),s}if("int32"===t)return n.int(e);if("bool"===t){var o=sc(0,e.dtype);return s=n.notEqual(e,o),o.dispose(),s}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function Ku(e,t){return Fo.makeTensorFromDataId(e.dataId,t,e.dtype)}function Gu(e,t,n){var r=(t-e)/(n-1),a=Ji(n,"float32");a[0]=e;for(var s=1;s<a.length;s++)a[s]=a[s-1]+r;return ic(a,"float32")}Object.freeze({castTensor:Vu,reshapeTensor:Ku,linspaceImpl:Gu,upcastType:wo,axesAreInnerMostDims:zl,combineLocations:Wl,computeOutAndReduceShapes:Vl,expandShapeToKeepDim:Kl,assertAxesAreInnerMostDims:Gl,getAxesPermutation:ql,getUndoAxesPermutation:Xl,getInnerMostAxes:Yl,getBroadcastDims:Fu,getReductionAxes:_u,assertAndGetBroadcastShape:Iu,assertParamsConsistent:Jl,computeOutShape:Zl,computePool2DInfo:Tu,computePool3DInfo:Du,computeConv2DInfo:Lu,computeConv3DInfo:Uu,computeDefaultPad:Pu,tupleValuesAreOne:Hu,eitherStridesOrDilationsAreOne:zu,convertConv2DDataFormat:Wu,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:hu});function qu(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Xu(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Yu(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Ju(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Zu(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,a=e.length,s=0,i=!1;r<a;){var o=n(t,e[s=r+(a-r>>>1)]);o>0?r=s+1:(a=s,i=!o)}return i?r:-r-1}(e,t,n||$u)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function $u(e,t){return e>t?1:e<t?-1:0}function ed(e,t,n,r,a){return nd(e,t,n,r,a,0).selectedIndices}function td(e,t,n,r,a,s){var i=nd(e,t,n,r,a,s,!0);return i.numValidOutputs.dispose(),{selectedIndices:i.selectedIndices,selectedScores:i.selectedScores}}function nd(e,t,n,r,a,s,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);for(var l=Array.from(t).map(function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}}).filter(function(e){return e.score>a}).sort(sd),c=s>0?-.5/s:0,u=[],d=[];u.length<n&&l.length>0;){var A=l.pop(),h=A.score,f=A.boxIndex,p=A.suppressBeginIndex;if(h<a)break;for(var m=!1,g=u.length-1;g>=p;--g){var x=rd(e,f,u[g]);if(x>=r){m=!0;break}if(A.score=A.score*ad(r,c,x),A.score<=a)break}A.suppressBeginIndex=u.length,m||(A.score===h?(u.push(f),d.push(A.score)):A.score>a&&Zu(l,A,sd))}var v=u.length;return o&&(u.fill(0,v),d.fill(0,v)),{selectedIndices:ic(u,"int32"),selectedScores:ic(d,"float32"),numValidOutputs:sc(v,"int32")}}function rd(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),s=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),u=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),A=Math.max(a[1],a[3]),h=(o-s)*(l-i),f=(d-c)*(A-u);if(h<=0||f<=0)return 0;var p=Math.max(s,c),m=Math.max(i,u),g=Math.min(o,d),x=Math.min(l,A),v=Math.max(g-p,0)*Math.max(x-m,0);return v/(h+f-v)}function ad(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function sd(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function id(e,t,n){var r=new Array(e.rank).fill(0),a=e.shape.slice();return t.map(function(t){a[n]=t;var s=e.slice(r,a);return r[n]+=t,s})}function od(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var a=Dc(n,e.dtype);for(r=0;r<a.values.length;++r){for(var s=a.indexToLoc(r),i=new Array(e.rank),o=0;o<i.length;o++)i[o]=s[o]%e.shape[o];var l=e.locToIndex(i);a.values[r]=e.values[l]}return a.toTensor()}function ld(e,t,n,r,a){for(var s=t[t.length-1],i=[e.length/s,s],o=i[0],l=i[1],c=Ti(n,o*r),u=Ti("int32",o*r),d=0;d<o;d++){for(var A=d*l,h=e.subarray(A,A+l),f=[],p=0;p<h.length;p++)f.push({value:h[p],index:p});f.sort(function(e,t){return t.value-e.value});var m=d*r,g=c.subarray(m,m+r),x=u.subarray(m,m+r);for(p=0;p<r;p++)g[p]=f[p].value,x[p]=f[p].index}var v=t.slice();return v[v.length-1]=r,[rc(c,v,n),rc(u,v,"int32")]}function cd(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var a=Dc(e,"int32"),s=Dc([n.length,e.length],"int32");for(r=0;r<n.length;r++){var i=a.indexToLoc(n[r]),o=r*e.length;s.values.set(i,o)}return s.toTensor()}var ud=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(e,t){return"T"+t});var n=[];this.variableNames.forEach(function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")});var r=this.variableNames.map(function(e){return"v"+e}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},dd=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(e,t){return"T"+t});var n=[];this.variableNames.forEach(function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")});var r=this.variableNames.map(function(e){return"v"+e}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},Ad=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,a=e.batchSize,s=e.inSize,i=Math.ceil(s/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];var o="max"===t?">":"<",l=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+l+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+o+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function hd(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(t){return e+"."+t})}function fd(e,t){return 1===t?[e]:hd(e,t)}function pd(){var e,t,n,r,a,s,i,o,l,c;return 2===ii().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",s="outputColor",i="out vec4 outputColor;",o="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",s="gl_FragColor",i="",o="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:s,defineOutput:i,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}function md(e,t,n){void 0===n&&(n="index");var r=Gi(t);return r.map(function(t,a){return"int "+e[a]+" = "+n+" / "+t+"; "+(a===r.length-1?"int "+e[a+1]+" = "+n+" - "+e[a]+" * "+t:"index -= "+e[a]+" * "+t)+";"}).join("")}function gd(e){var t=Gi(e).map(function(e){return e.toString()});return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var xd="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function vd(e,t,n,r){var a=[];e.forEach(function(e){var t=Ni(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?a.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(a.push("uniform sampler2D "+e.name+";"),a.push("uniform int offset"+e.name+";"))});var s,i,o=a.join("\n"),l=e.map(function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?bd(e):yd(e);var a=e.shapeInfo.logicalShape,s=t.logicalShape;return a.length<=s.length&&(r+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),s="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,o=t.logicalShape.length,l=Fu(e.shapeInfo.logicalShape,t.logicalShape),c=Sd(o),u=o-i,d=["x","y","z","w","u","v"];n=0===i?"":o<2&&l.length>=1?"coords = 0;":l.map(function(e){return"coords."+d[e+u]+" = 0;"}).join("\n");var A;A=o<2&&i>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords."+d[t+u]}).join(", ");var h="return outputValue;",f=1===Ni(e.shapeInfo.logicalShape),p=1===Ni(t.logicalShape);if(1!==i||f||p){if(f&&!p)h=1===o?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){var m=i-2,g=i-1;l.indexOf(m)>-1&&l.indexOf(g)>-1?h="return vec4(outputValue.x);":l.indexOf(m)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(g)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+s+"() {\n      "+c+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+a+"("+A+");\n      "+h+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",s=t.texShape,i=e.shapeInfo.texShape,o=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===l&&null==e.shapeInfo.flatOffset&&ji(i,s))return"\n      float "+a+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var c,u=Sd(l),d=Fu(e.shapeInfo.logicalShape,t.logicalShape),A=l-o,h=["x","y","z","w","u","v"];c=0===o?"":l<2&&d.length>=1?"coords = 0;":d.map(function(e){return"coords."+h[e+A]+" = 0;"}).join("\n");var f;return f=l<2&&o>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords."+h[t+A]}).join(", "),"\n    float "+a+"() {\n      "+u+" coords = getOutputCoords();\n      "+c+"\n      return get"+r+"("+f+");\n    }\n  "}(e,t)),r}(e,t,r)}).join("\n"),c=t.texShape,u=pd(),d=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(u),A=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+wd+"\n    "+Nd+"\n    "+jd+"\n  "}(u);return t.isPacked?(s=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(ji(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=(s=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+a[0]+", "+a[1]+"));\n      int index = resTexRC.x * "+a[1]+" + resTexRC.y;\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+s+");\n      int c = imod(index, "+s+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2),s=a,i="",o="b, r, c",l=2;l<e.length-1;l++)i="\n      int b"+l+" = index / "+(s*=e[e.length-l-1])+";\n      index -= b"+l+" * "+s+";\n    "+i,o="b"+l+", "+o;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+i+"\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+o+");\n    }\n  "}(e,t)}var n,r,a,s,i}(t.logicalShape,c),i=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(u)):(s=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return ji(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=md(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=md(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=md(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=md(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,c),i=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(u)),r&&(A+=Cd),[A,d,i,o,s,l,n].join("\n")}function yd(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,a=r[0],s=r[1];if(1===a&&1===s)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var i=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+i[0]+", "+i[1]+", "+Bd(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+kd(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,a=r[0],s=r[1];if(1===s&&1===a)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var i=Bd(t);return 1===s?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+i+") + 0.5) / "+a+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+i+") + 0.5) / "+s+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+a+", "+s+", index + "+i+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&ji(t,a)){var s=a[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+a[1]+".0, "+s+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var i=Ii(t),o=i.newShape,l=i.keptDims,c=o;if(c.length<t.length)return"\n      "+yd(Ed(e,c))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+Fd(["row","col"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+kd(e)+"\n      }\n    ";var u=a[0],d=a[1],A=Bd(n);return 1===d?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+A+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+u+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===u?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+A+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+d+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+A+";\n    vec2 uv = uvFromFlat("+u+", "+d+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[1]*t[2],s=t[2],i=Ii(t),o=i.newShape,l=i.keptDims,c=o;if(c.length<t.length)return"\n        "+yd(Ed(e,c))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+Fd(["row","col","depth"],l)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+a+", "+s+", 1)));\n        "+kd(e)+"\n      }\n    ";var u=e.shapeInfo.texShape,d=u[0],A=u[1],h=e.shapeInfo.flatOffset;return A===a&&null==h?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+s+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+A+".0, "+d+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":A===s&&null==h?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+A+".0, "+d+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+a+" + col * "+s+" + depth + "+Bd(n)+";\n        vec2 uv = uvFromFlat("+d+", "+A+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[3],s=t[2]*a,i=t[1]*s,o=Ii(t),l=o.newShape,c=o.keptDims;if(l.length<t.length)return"\n      "+yd(Ed(e,l))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+Fd(["row","col","depth","depth2"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+i+", "+s+", "+a+", 1)));\n        "+kd(e)+"\n      }\n    ";var u=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,A=d[0],h=d[1];return h===i&&null==u?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+s+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+h+".0, "+A+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":h===a&&null==u?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+h+".0, "+A+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+i+" + col * "+s+" +\n          depth * "+a+" + depth2;\n      vec2 uv = uvFromFlat("+A+", "+h+", index + "+Bd(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],s=t[3]*a,i=t[2]*s,o=t[1]*i,l=Ii(t),c=l.newShape,u=l.keptDims;if(c.length<t.length)return"\n      "+yd(Ed(e,c))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+Fd(["row","col","depth","depth2","depth3"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+o+", "+i+", "+s+", "+a+")) +\n          depth3;\n        "+kd(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,A=e.shapeInfo.texShape,h=A[0],f=A[1];return f===o&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+i+", "+s+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+f+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":f===a&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+f+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+o+" + col * "+i+" + depth * "+s+" +\n          depth2 * "+a+" + depth3 + "+Bd(n)+";\n      vec2 uv = uvFromFlat("+h+", "+f+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Ii(t),s=a.newShape,i=a.keptDims;if(s.length<t.length)return"\n      "+yd(Ed(e,s))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+Fd(["row","col","depth","depth2","depth3","depth4"],i)+");\n      }\n    ";var o=t[5],l=t[4]*o,c=t[3]*l,u=t[2]*c,d=t[1]*u;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+d+", "+u+", "+c+", "+l+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+o+", 1)));\n        "+kd(e)+"\n      }\n    ";var A=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,f=h[0],p=h[1];return p===d&&null==A?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+u+", "+c+", "+l+", "+o+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===o&&null==A?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+d+" + col * "+u+" + depth * "+c+" +\n          depth2 * "+l+" + depth3 * "+o+" + depth4 + "+Bd(n)+";\n      vec2 uv = uvFromFlat("+f+", "+p+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function bd(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1))+"() {\n      return "+pd().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],s=pd();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+a[0]+", "+a[1]+", index);\n      return "+s.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,s=a[0],i=a[1],o=pd();if(null!=a&&ji(t,a))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+i+".0, "+s+".0);\n\n        return "+o.texture2D+"("+n+", uv);\n      }\n    ";var l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+l[0]+", "+l[1]+", row, col);\n      return "+o.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0])return"\n        "+bd(Ed(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+Fd(["b","row","col"],[1,2])+");\n        }\n      ";var i=s[0],o=s[1],l=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+i+", "+o+", "+l*Math.ceil(t[1]/2)+", "+l+", b, row, col);\n      return "+pd().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],o=i[0],l=i[1],c=Math.ceil(t[n-1]/2),u=c*Math.ceil(t[n-2]/2),d="int b, int row, int col",A="b * "+u+" + (row / 2) * "+c+" + (col / 2)",h=2;h<n-1;h++)d="int b"+h+", "+d,A="b"+h+" * "+(u*=t[n-h-1])+" + "+A;return"\n    vec4 "+a+"("+d+") {\n      int index = "+A+";\n      int texR = index / "+l+";\n      int texC = index - texR * "+l+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+l+", "+o+");\n      return "+pd().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var wd="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Nd="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",jd="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Cd="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Bd(e){return"offset"+e}function kd(e){var t=e.name,n=Ni(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function Sd(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function Ed(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Fd(e,t){return t.map(function(t){return e[t]}).join(", ")}var _d=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,vi(e.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var a=e[e.length-1],s=Math.ceil(a/t);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),r||this.variableNames.push("bestIndicesA");var i,o,l=this.outputShape,c=l.length,u=Sd(c),d=fd("coords",c);if(1===s){var A=Sd(o=c+1);i="\n        "+A+" sourceLocR = "+A+"("+d.join()+", 0);\n        ++"+d[c-1]+";\n        "+A+" sourceLocG = "+A+"("+d.join()+", 0);\n        ++"+d[c-2]+";\n        "+A+" sourceLocA = "+A+"("+d.join()+", 0);\n        --"+d[c-1]+";\n        "+A+" sourceLocB = "+A+"("+d.join()+", 0);\n        --"+d[c-2]+";"}else o=c,i="\n        "+u+" sourceLocR = coords;\n        ++"+d[c-1]+";\n        "+u+" sourceLocG = coords;\n        ++"+d[c-2]+";\n        "+u+" sourceLocA = coords;\n        --"+d[c-1]+";\n        "+u+" sourceLocB = coords;\n        --"+d[c-2]+";";var h=["x","y","z","w","u","v"].slice(0,o),f="."+h[o-1],p=h.map(function(e){return"int "+e}),m=fd("sourceLocR",o-1).concat("inIdx.r"),g=fd("sourceLocG",o-1).concat("inIdx.g"),x=fd("sourceLocB",o-1).concat("inIdx.b"),v=fd("sourceLocA",o-1).concat("inIdx.a"),y="max"===n?"greaterThan":"lessThan",b=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+m.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+x.join()+"),\n                             getBestIndicesAChannel("+v.join()+")));",w="vec4(\n            getAChannel("+m.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+x.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+v.join()+") : 0.)",N=r?"":"\n      float getBestIndicesAChannel("+p.join()+") {\n        return getChannel(getBestIndicesA("+h.join()+"),\n                                          vec2("+h.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+p.join()+") {\n        return getChannel(getA("+h.join()+"),\n                               vec2("+h.slice(-2).join()+"));\n      }\n      "+N+"\n      void main() {\n        "+u+" coords = getOutputCoords();\n        bool hasNextCol = "+d[c-1]+" < "+(l[c-1]-1)+";\n        bool hasNextRow = "+d[c-2]+" < "+(l[c-2]-1)+";\n        "+i+"\n        ivec4 srcIdx = ivec4(sourceLocR"+f+", sourceLocG"+f+",\n          sourceLocB"+f+", sourceLocA"+f+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+w+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+b+"\n          vec4 candidate = "+w+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+y+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},Id=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,s=e.dilationHeight,i=e.dilationWidth,o=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=o-1-e.padInfo.top,u=l-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+c+", "+u+");\n      const float avgMultiplier = float("+d+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+o+";\n            wR += "+s+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+l+";\n            wC+= "+i+") {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Td=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,d=e.effectiveFilterHeight,A=e.effectiveFilterWidth,h=u-1-e.padInfo.front,f=d-1-e.padInfo.top,p=A-1-e.padInfo.left,m=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+h+", "+f+", "+p+");\n      const float avgMultiplier = float("+m+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+u+";\n            wD += "+o+") {\n          float dyD = float(dyDCorner + wD) / "+a+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+d+";\n              wR += "+l+") {\n            float dyR = float(dyRCorner + wR) / "+s+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+A+";\n                wC += "+c+") {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Dd=function(e,t,n,r,a,s){this.outputShape=[],this.variableNames=["x","mean","variance"],Iu(e,t),Iu(e,n);var i="0.0";null!=r&&(Iu(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var o="1.0";null!=a&&(Iu(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+i+";\n        float scale = "+o+";\n        float inv = scale * inversesqrt(variance + float("+s+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},Ld=function(e,t,n,r,a,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Iu(e,t),Iu(e,n);var i="vec4(0.0)";null!=r&&(Iu(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var o="vec4(1.0)";null!=a&&(Iu(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+i+";\n        vec4 scale = "+o+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+s+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},Ud=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Iu(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},Pd="return a + b;",Rd="return a - b;",Od="return a * b;",Md="return (a < 0.) ? b * a : a;",Qd=function(e,t,n){this.variableNames=["A","B"],this.outputShape=Iu(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},Hd="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",zd=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Iu(t,n);var a=this.outputShape.length,s="";if(r)if(0===a||1===Ni(this.outputShape))s="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(s="\n          "+Sd(a)+" coords = getOutputCoords();\n        ",1===a)s+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var i=fd("coords",a);s+="\n            bool nextRowOutOfBounds =\n              ("+i[a-2]+" + 1) >= "+this.outputShape[a-2]+";\n            bool nextColOutOfBounds =\n              ("+i[a-1]+" + 1) >= "+this.outputShape[a-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+s+"\n\n        setOutput(result);\n      }\n    "},Wd=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),Vd=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),Kd=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},Gd=function(e){this.outputShape=[],this.outputShape=Zl(e,1),this.variableNames=e.map(function(e,t){return"T"+t});var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var a=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+a+"));")}var s=t.length,i=t[t.length-1];r.push("else setOutput(getT"+s+"(yR, yC-"+i+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},qd=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Zl(e,t);var n=this.outputShape,r=n.length,a=Sd(r),s=fd("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(function(e,t){return"T"+t});var o=new Array(e.length-1);o[0]=e[0][t];for(var l=1;l<o.length;l++)o[l]=o[l-1]+e[l][t];var c=i[t],u=i.slice(-2),d=i.join(),A="if ("+c+" < "+o[0]+") {\n        return getChannel(\n            getT0("+d+"), vec2("+u.join()+"));\n        }";for(l=1;l<o.length;l++){var h=o[l-1];A+="\n        if ("+c+" < "+o[l]+"  && "+c+" >= "+o[l-1]+") {\n          return getChannel(\n            getT"+l+"("+Xd(i,c,h)+"),\n            vec2("+Xd(u,c,h)+"));\n        }"}var f=o.length,p=o[o.length-1];A+="\n        return getChannel(\n          getT"+f+"("+Xd(i,c,p)+"),\n          vec2("+Xd(u,c,p)+"));",this.userCode="\n      float getValue("+i.map(function(e){return"int "+e})+") {\n        "+A+"\n      }\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+s+"), 0., 0., 0.);\n\n        "+s[r-1]+" = "+s[r-1]+" + 1;\n        if ("+s[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+s+");\n        }\n\n        "+s[r-2]+" = "+s[r-2]+" + 1;\n        if ("+s[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+s+");\n        }\n\n        "+s[r-1]+" = "+s[r-1]+" - 1;\n        if ("+s[r-2]+" < "+n[r-2]+" &&\n            "+s[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+s+");\n        }\n        setOutput(result);\n      }\n    "};function Xd(e,t,n){var r=e.indexOf(t);return e.map(function(e,t){return t===r?e+" - "+n:e}).join()}var Yd=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,s="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+s+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Jd=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,s="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,l=s?1:2,c=s?2:3,u=s?3:1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+u+"];\n\n        ivec2 dyCorner = ivec2(coords["+l+"], coords["+c+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+s+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Zd=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,s=e.padInfo.top,i=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+a+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+s+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+i+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},$d=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.front,l=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+o+", "+l+", "+c+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+a+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+s+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},eA=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+s+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},tA=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.top,i=n-1-e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+s+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+o+"; dm++) {\n              int d2 = d1 * "+o+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},nA=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.padInfo.top,s=e.padInfo.left,i=e.strideHeight,o=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,A=4*Math.floor(e.inChannels/4),h=e.inChannels%4,f="channelsLast"===e.dataFormat,p=f?1:2,m=f?2:3,g=f?3:1,x="",v="";n&&(x=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",v="result = activation(result);");var y=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+x+"\n\n      const ivec2 strides = ivec2("+i+", "+o+");\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+g+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+p+"], coords["+m+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+u+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+A+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+f+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===h)+") {\n\n              if ("+f+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+A+") *\n                    getW(wR, wC, "+A+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+A+", xR, xC) *\n                    getW(wR, wC, "+A+", d2);\n              }\n\n            } else if ("+(2===h)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+A+", d2),\n                getW(wR, wC, "+A+" + 1, d2)\n              );\n\n              if ("+f+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+A+"),\n                  getX(batch, xR, xC, "+A+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+A+", xR, xC),\n                  getX(batch, "+A+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===h)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+A+", d2),\n                getW(wR, wC, "+A+" + 1, d2),\n                getW(wR, wC, "+A+" + 2, d2)\n              );\n\n              if ("+f+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+A+"),\n                  getX(batch, xR, xC, "+A+" + 1),\n                  getX(batch, xR, xC, "+A+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+A+", xR, xC),\n                  getX(batch, "+A+" + 1, xR, xC),\n                  getX(batch, "+A+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+y+"\n        "+v+"\n        setOutput(result);\n      }\n    "},rA=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterDepth,d=e.filterHeight,A=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+a+", "+s+", "+i+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+u+"; wF++) {\n          int xF = xFCorner + wF * "+o+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+"; wR++) {\n            int xR = xRCorner + wR * "+l+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+A+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===f)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+h+") *\n                  getW(wF, wR, wC, "+h+", d2);\n              } else if ("+(2===f)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+h+"),\n                  getX(batch, xF, xR, xC, "+h+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+h+", d2),\n                  getW(wF, wR, wC, "+h+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===f)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+h+"),\n                  getX(batch, xF, xR, xC, "+h+" + 1),\n                  getX(batch, xF, xR, xC, "+h+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+h+", d2),\n                  getW(wF, wR, wC, "+h+" + 1, d2),\n                  getW(wF, wR, wC, "+h+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},aA=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.inHeight,s=e.inWidth,i=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,A=e.filterHeight,h=e.filterWidth,f=e.outChannels/e.inChannels,p="",m="";n&&(p=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",m="result = activation(result);");var g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+p+"\n\n      const ivec2 strides = ivec2("+l+", "+c+");\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+f+";\n        int q = d2 - d1 * "+f+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+A+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+a+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+h+"; wC++) {\n            int xC = xCCorner + wC * "+d+";\n\n            if (xC < 0 || xC >= "+s+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+g+"\n        "+m+"\n        setOutput(result);\n      }\n    "},sA=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var a=e.inHeight,s=e.inWidth,i=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,A=e.filterHeight,h=e.filterWidth,f=h,p="int xR; int xC; int xCOffset;",m=0;m<A;m++)for(var g=0;g<h;g++)p+="\n          vec4 xTexelR"+m+"C"+2*g+" = vec4(0.);\n          vec4 wR"+m+"C"+g+" = vec4(0.);\n          vec4 xR"+m+"C"+g+" = vec4(0.);";for(m=0;m<A;m++)for(var x=0;x<f;x++){if(p+="\n          xR = xRCorner + "+m*u+";\n          xC = xCCorner + "+(g=2*x)*d+";\n        ",1===c){if(g<h&&(p+=o%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+a+" && xCOffset >= 0 && xCOffset < "+s+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+s+") {\n                    xTexelR"+m+"C"+g+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+a+" && xCOffset >= 0 && xCOffset < "+s+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+s+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+m+"C"+g+" = vec4(previous.zw, xTexelR"+m+"C"+g+".xy);\n                } else {\n                  xR"+m+"C"+g+" = vec4(0, 0, xTexelR"+m+"C"+g+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+a+" && xC >= 0 && xC < "+s+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = xTexelR"+m+"C"+g+";\n              ",g+1<h)){var v=o%2==0?gi(d):d;d%2==0&&o%2==1||d%2!=0&&o%2!=1?(p+="\n                  xCOffset = xC + "+o%2+" + "+v+";\n\n                  if(xR >= 0 && xR < "+a+" &&\n                    xCOffset >= 0 && xCOffset < "+s+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",d>1&&(p+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+a+" &&\n                      xCOffset >= 0 && xCOffset < "+s+") {\n                      xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+m+"C"+g+" = vec4(0.);\n                    }\n                  "),p+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".xy);\n                "):p+="\n                  xCOffset = xC + "+v+";\n\n                  if(xR >= 0 && xR < "+a+" &&\n                    xCOffset >= 0 && xCOffset < "+s+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+m+"C"+(g+1)+" = xTexelR"+m+"C"+(g+2)+";\n                "}}else g<h&&(p+="\n              if(xR >= 0 && xR < "+a+") {\n            ",o%2==1?(p+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+s+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+s+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n              ",g+1<h&&(p+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+s+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+m+"C"+(g+1)+" = vec4(xTexelR"+m+"C"+(g+2)+".xy, final.xy);\n                ")):(p+="\n                if(xC >= 0 && xC < "+s+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+s+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".xy, xTexelR"+m+"C"+(g+2)+".xy);\n              ",g+1<h&&(p+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n                ")),p+="}");g<h&&(p+="\n            vec4 wTexelR"+m+"C"+g+" = getW("+m+", "+g+", d1, q);\n            wR"+m+"C"+g+" = vec4(wTexelR"+m+"C"+g+".xz, wTexelR"+m+"C"+g+".xz);\n          ",g+1<h&&(p+="\n              vec4 wTexelR"+m+"C"+(g+1)+" = getW("+m+", "+(g+1)+", d1, q);\n              wR"+m+"C"+(g+1)+" =\n                vec4(wTexelR"+m+"C"+(g+1)+".xz, wTexelR"+m+"C"+(g+1)+".xz);"))}for(m=0;m<A;m++)for(g=0;g<h;g++)p+="dotProd += xR"+m+"C"+g+" * wR"+m+"C"+g+";";var y="",b="";n&&(y=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",b="result = activation(result);");var w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+l+", "+c+");\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+p+"\n\n        vec4 result = dotProd;\n        "+w+"\n        "+b+"\n        setOutput(result);\n      }\n    "},iA=function(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3],c=t[0],u=n[0],d=n[1];this.outputShape=[c,u,d,l];var A="bilinear"===r?1:0,h=[i-1+".0",o-1+".0"],f=h[0],p=h[1],m=u>1?[""+(i-1)/(u-1),"(y2-y1) * height_ratio","y1*"+f+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+f],g=m[0],x=m[1],v=m[2],y=d>1?[""+(o-1)/(d-1),"(x2-x1) * width_ratio","x1*"+p+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+p],b=y[0],w=y[1],N=y[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+b+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+s+") {\n          return;\n        }\n\n        float height_scale = "+x+";\n        float width_scale = "+w+";\n\n        float in_y = "+v+";\n        if( in_y < 0.0 || in_y > "+f+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n        float in_x = "+N+";\n        if( in_x < 0.0 || in_x > "+p+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+A+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},oA=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=e[e.length-1],s=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+a+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+Sd(r)+" coords = getOutputCoords();\n        int end = "+lA(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+a+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+s+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+lA(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function lA(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var cA=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=To.DENSE;var t=Qo(e),n=pd();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+md(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},uA=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=To.DENSE;var t=Qo(e),n=pd();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+md(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},dA=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),AA=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},hA=function(e){this.variableNames=["A"],this.outTexUsage=Do.DOWNLOAD;var t=pd();this.outputShape=e,this.userCode="\n      "+xd+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},fA=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Do.DOWNLOAD;var t=pd();this.outputShape=e,this.userCode="\n      "+xd+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},pA=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=pd(),a=t[0],s=t[1];this.outputShape=e;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode="\n      "+gd(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+s+";\n        int c = imod(flatIndex, "+s+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+s+".0, "+a+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+i+", 0., 0., 0.);\n      }\n    "},mA=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=pd(),a=t[0],s=t[1];this.outputShape=e;var i="",o="result";n&&(o="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var c=0;c<=1;c++){var u=2*l+c;i+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+e[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+l+" < "+e[1]+") {\n              localCoords[1] += "+l+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+s+";\n              c = imod(flatIndex, "+s+");\n              uv = (vec2(c, r) + halfCR) / vec2("+s+".0, "+a+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+u+"] = values[0];\n              } else if(offset == 1) {\n                result["+u+"] = values[1];\n              } else if(offset == 2) {\n                result["+u+"] = values[2];\n              } else {\n                result["+u+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+gd(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+i+"\n\n        "+r.output+" = "+o+";\n      }\n    "},gA=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var a=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,s=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+a+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+s+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},xA=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),vA=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var a=Sd(this.rank),s=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=0;s<e.length;s++)s===t?a.push("int(getIndices("+r[s]+"))"):a.push(""+r[s]);return a.join()}(e,n);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+s+"));\n      }\n    "},yA=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=Sd(t.length),a=Sd(n.length),s=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+a+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+s+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function bA(e,t){var n=pd();return qo(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function wA(e,t){return nl(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function NA(e,t){return rl(e,t,new Uint16Array([0,1,2,2,1,3]))}function jA(e,t,n,r,a,s,i){sl(n,r);var o=al(e,t),l=e.TEXTURE_2D;return Wo(e,t,function(){return e.bindTexture(l,o)}),Wo(e,t,function(){return e.texParameteri(l,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),Wo(e,t,function(){return e.texParameteri(l,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),Wo(e,t,function(){return e.texParameteri(l,e.TEXTURE_MIN_FILTER,e.NEAREST)}),Wo(e,t,function(){return e.texParameteri(l,e.TEXTURE_MAG_FILTER,e.NEAREST)}),Wo(e,t,function(){return e.texImage2D(l,0,a,n,r,0,s,i,null)}),Wo(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),o}function CA(e,t,n,r,a){var s=Mo(n,r);return jA(e,t,s[0],s[1],a.internalFormatFloat,a.textureFormatFloat,e.FLOAT)}function BA(e,t,n,r,a){var s=Mo(n,r);return jA(e,t,s[0],s[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function kA(e,t,n,r,a){var s=Mo(n,r);return jA(e,t,s[0],s[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function SA(e,t,n,r,a){var s=Ho(n,r);return jA(e,t,s[0],s[1],a.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function EA(e,t,n,r,a){var s=Ho(n,r);return jA(e,t,s[0],s[1],a.internalFormatPackedHalfFloat,e.RGBA,a.textureTypeHalfFloat)}function FA(e,t,n,r){return Wo(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),ol(e,t,n,"clipSpacePos",r,3,20,0)&&ol(e,t,n,"uv",r,2,20,12)}function _A(e,t,n,r,a,s,i){var o,l,c;Wo(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),s instanceof Uint8Array?(o=new Uint8Array(r*a*4),l=e.UNSIGNED_BYTE,c=e.RGBA):(o=new Float32Array(r*a*4),l=e.FLOAT,c=i.internalFormatPackedFloat),o.set(s),Wo(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,c,r,a,0,e.RGBA,l,o)}),Wo(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function IA(e,t,n,r){Wo(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),r.data instanceof Uint8Array?Wo(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):Wo(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),Wo(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function TA(e,t,n,r,a){var s=e.createBuffer();Wo(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,s)});var i=16*n*r;return Wo(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)}),Wo(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),Wo(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),s}function DA(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function LA(e,t,n,r,a){var s=Mo(n,r),i=s[0],o=s[1],l=new Uint8Array(n*r*4);return Wo(e,t,function(){return e.readPixels(0,0,i,o,a.downloadTextureFormat,e.UNSIGNED_BYTE,l)}),new Float32Array(l.buffer)}function UA(e,t,n,r,a,s,i,o){var l=e,c=new Float32Array(function(e,t){var n=Ho(e,t);return n[0]*n[1]*4}(s,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function PA(e,t,n,r){var a=new Float32Array(n*r*4);return Wo(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,a)}),a}var RA=Object.freeze({createVertexShader:bA,createVertexBuffer:wA,createIndexBuffer:NA,createFloat32MatrixTexture:CA,createFloat16MatrixTexture:BA,createUnsignedBytesMatrixTexture:kA,createPackedMatrixTexture:SA,createFloat16PackedMatrixTexture:EA,bindVertexProgramAttributeStreams:FA,uploadDenseMatrixToTexture:_A,uploadPixelDataToTexture:IA,createBufferFromOutputTexture:TA,downloadFloat32MatrixFromBuffer:DA,downloadByteEncodedFloatMatrixFromOutputTexture:LA,downloadPackedMatrixFromBuffer:UA,downloadMatrixFromPackedOutputTexture:PA}),OA=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=ii().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,Ro(t,e)):this.gl=Oo(t);var n="WEBGL_color_buffer_float";if(1===ii().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=Go(this.gl,this.debug,"OES_texture_float"),kl(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Go(this.gl,this.debug,"OES_texture_half_float");else if(ii().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),kl(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Go(this.gl,this.debug,"EXT_color_buffer_half_float");else if(ii().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",kl(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!kl(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=wA(this.gl,this.debug),this.indexBuffer=NA(this.gl,this.debug),this.framebuffer=il(this.gl,this.debug),this.textureConfig=zo(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return ii().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Wo(t,this.debug,function(){return t.finish()}),Wo(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Wo(t,this.debug,function(){return t.deleteFramebuffer(e.framebuffer)}),Wo(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),Wo(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),Wo(t,this.debug,function(){return t.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),CA(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),BA(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),kA(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),IA(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),_A(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),EA(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),SA(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(hl(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Wo(this.gl,this.debug,function(){return t.gl.deleteTexture(e)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return LA(r.gl,r.debug,t,n,r.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,a,s){return UA(this.gl,e,0,0,0,a,s,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return DA(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=TA(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(ii().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,s=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(s,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=s}else ii().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,ii().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return PA(r.gl,r.debug,t,n)})},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=Xo(t,this.debug,e),r=bA(t,this.debug),a=$o(t,this.debug);return Wo(t,this.debug,function(){return t.attachShader(a,r)}),Wo(t,this.debug,function(){return t.attachShader(a,n)}),el(t,this.debug,a),this.debug&&tl(t,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=FA(t,this.debug,this.program,this.vertexBuffer)),a},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&Wo(this.gl,this.debug,function(){return t.gl.deleteProgram(e)})},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&tl(this.gl,this.debug,this.program),Wo(this.gl,this.debug,function(){return t.gl.useProgram(e)})},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?cl(this.gl,this.debug,e,t):ul(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),Wo(this.gl,this.debug,function(){return n.gl.getAttribLocation(e,t)})},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),dl(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=Ho(t,n),a=r[0],s=r[1];this.setOutputMatrixTextureDriver(e,a,s)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&tl(this.gl,this.debug,this.program),fl(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Wo(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Wo(this.gl,this.debug,function(){return e.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Go(this.gl,this.debug,2===ii().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===ii().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a},e.prototype.endQuery=function(){if(2!==ii().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return ri(this,void 0,void 0,function(){var t=this;return ai(this,function(n){switch(n.label){case 0:return[4,Ei(function(){return t.disposed||t.isQueryAvailable(e,ii().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(e,ii().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise(function(n){t.addItemToPoll(function(){return e.isFencePassed()},function(){return n()})})},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map(function(e){return e.isDoneFn})),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||Ei(function(){return n.pollItems(),0===n.itemsToPoll.length})},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Al(this.gl,this.debug,e,this.framebuffer),this.debug&&fl(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Al(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&fl(this.gl)):hl(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;Al(r,this.debug,e,this.framebuffer),this.debug&&fl(r),this.outputTexture=e,Wo(r,this.debug,function(){return r.viewport(0,0,t,n)}),Wo(r,this.debug,function(){return r.scissor(0,0,t,n)})},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var a=this;this.throwIfDisposed(),Wo(this.gl,this.debug,function(){return a.gl.scissor(e,t,n,r)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function MA(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(e,n){var r=e.logicalShape,a=t[n],s=a.shape;if(!ji(r,s))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+s+" must match");if(!e.isUniform||!a.isUniform){var i=e.texShape,o=a.isUniform?null:a.texData.texShape;if(!ji(i,o))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+i+" and "+o+" must match")}})}var QA=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,a=n.inChannels,s=n.strideWidth,i=n.strideHeight,o=n.padInfo,l=n.outWidth,c=n.dilationWidth,u=n.dilationHeight,d=n.dataFormat,A=o.left,h=o.top,f=a*r,p=pd(),m="channelsLast"===d,g=m?0:1,x=m?1:2,v="",y=0;y<=1;y++)for(var b=0;b<=1;b++)v+="\n          blockIndex = rc.y + "+b+";\n          pos = rc.x + "+y+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+l+")) * "+i+" - "+h+";\n            d0 = offsetY + "+u+" * (pos / "+f+");\n\n            if(d0 < "+t[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+l+".) * "+s+". - "+A+".);\n              d1 = offsetX + "+c+" * (int(mod(float(pos), "+f+".) / "+a+".));\n\n              if(d1 < "+t[x]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+a+".));\n\n                if ("+m+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*y+b)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*y+b)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+v+"\n\n        "+p.output+" = result;\n      }\n    "},HA=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];var s,i=t,o=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";s=.5===a?"inversesqrt("+l+")":1===a?"1.0/("+l+")":"exp(log("+l+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+i+"; j <= "+i+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+o+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+s+";\n        setOutput(val);\n      }\n    "},zA=function(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+a+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+a+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},WA=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var s,i=t,o=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";s=.5===a?"inversesqrt("+l+")":1===a?"1.0/("+l+")":"exp(log("+l+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+i+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+i+"; j <= "+i+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+o+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+s+";\n        setOutput(result);\n      }\n    "},VA=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,s=e.effectiveFilterWidth,i=a-1-e.padInfo.top,o=s-1-e.padInfo.left,l=a*s-1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+a+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+s+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+l+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+s+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},KA=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,s=e.dilationHeight,i=e.dilationWidth,o=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=o-1-e.padInfo.front,d=l-1-e.padInfo.top,A=c-1-e.padInfo.left,h=o*l*c-1;this.userCode="\n      const ivec3 pads = ivec3("+u+", "+d+", "+A+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+o+";\n           wD += "+a+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+l+";\n              wR += "+s+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+i+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+h+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+l+" * "+c+" +\n                  wR * "+c+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},GA=function(e,t,n,r,a,s,i){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===s&&(s=null),void 0===i&&(i=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var o=n?e[1]:e[2],l=Math.ceil(o/2),c=n?"i * 2, rc.y":"rc.y, i * 2",u=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],A=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",f="";s&&(h=i?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+s+"\n        }":"vec4 activation(vec4 x) {\n          "+s+"\n        }",f="result = activation(result);");var p=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+h+"\n\n      const float sharedDimension = "+l+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+l+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+c+");\n          vec4 b = getMatrixB(rc.x, "+u+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+d[0]+" * "+A[0]+");\n          result += ("+d[1]+" * "+A[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+p+"\n\n        "+f+"\n\n        setOutput(result);\n      }\n    "},qA=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),XA=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},YA=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=fd("rc",t),r=Sd(t),a=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",a=e-2;a<e;a++)r+=n[a]+" >= "+t[a],a<e-1&&(r+="||");return r}(t,e,n),s=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = "+a[0]+";\n    int c = "+a[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),i=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var s=(0===r?"r":"rp1")+", "+(0===a?"c":"cp1"),i=2;i<e;i++)s=t[t.length-1-i]+","+s;n.push(s)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+a+") {\n            setOutput(vec4(0));\n          } else {\n            "+s+"\n\n            setOutput(vec4("+i+"));\n          }\n        }\n      "}},JA=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]});var r=e.length,a=Sd(r),s=t.map(function(e){return e[0]}).join(","),i=t.map(function(t,n){return t[0]+e[n]}).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+a+" start = "+a+"("+s+");\n      "+a+" end = "+a+"("+i+");\n\n      void main() {\n        "+a+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+a+" coords = outC - start;\n          setOutput(getX("+o+"));\n        }\n      }\n    ":"\n        int start = "+s+";\n        int end = "+i+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},ZA=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]});for(var r=e.length,a=Sd(r),s=t.map(function(e){return e[0]}).join(","),i=t.map(function(t,n){return t[0]+e[n]}).join(","),o=fd("rc",r),l=fd("source",r),c=o[r-1]+" < "+this.outputShape[r-1],u=1===r?"source":"vec2("+l.slice(-2).join()+")",d=[a+" rc = outputLoc;",o[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+o[r-2]+" += 1;\n       if("+o[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+o[r-1]+" += 1;\n         if("+c+") {"],A=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",f=0,p=1===r?2:4;f<p;f++)h+="\n        "+d[f]+"\n        if ("+A+") {\n          result["+f+"] = float("+n+");\n        } else {\n          "+a+" source = rc - start;\n          result["+f+"] = getChannel(getX("+l.join()+"), "+u+");\n        }\n      ";h+=1===r?"} ":"}}",this.userCode="\n      const "+a+" start = "+a+"("+s+");\n      const "+a+" end = "+a+"("+i+");\n\n      void main() {\n        "+a+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+h+"\n        setOutput(result);\n      }\n    "},$A=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideHeight,s=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=e.padInfo.top,d=e.padInfo.left;this.outputShape=e.outShape;var A="avg"===t,h="0.0";if(A||(h="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+a+", "+s+");\n        const ivec2 pads = ivec2("+u+", "+d+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+l+";\n              wR += "+i+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+o+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var f=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(f="avgValue / count");var p=4*Math.floor(r/4),m=r%4,g="\n      if ("+A+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+a+", "+s+");\n      const ivec2 pads = ivec2("+u+", "+d+");\n      const float initializationValue = "+h+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+h+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+l+";\n            wR += "+i+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+p+"; wC += 4) {\n            int xC = xCCorner + wC * "+o+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+o+", d),\n              getValue(batch, xR, xC + 2 * "+o+", d),\n              getValue(batch, xR, xC + 3 * "+o+", d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+p+";\n          if ("+(1===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(2===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+o+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+o+", d),\n              getValue(batch, xR, xC + 2 * "+o+", d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+f+");\n      }\n    "}},eh=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,d=e.effectiveFilterHeight,A=e.effectiveFilterWidth,h=e.padInfo.front,f=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;var m="avg"===t,g="0.0";if(m||(g="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+a+", "+s+", "+i+");\n        const ivec3 pads = ivec3("+h+", "+f+", "+p+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+u+";\n              wD += "+o+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+d+";\n                wR += "+l+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+A+";\n                  wC += "+c+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+d+" * "+A+" +\n                      wR * "+A+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var x=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(x="avgValue / count");var v=4*Math.floor(r/4),y=r%4,b="\n      if ("+m+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+a+", "+s+", "+i+");\n      const ivec3 pads = ivec3("+h+", "+f+", "+p+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+u+";\n            wD += "+o+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+";\n            wR += "+l+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+v+"; wC += 4) {\n              int xC = xCCorner + wC * "+c+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+c+", ch)\n              );\n\n              "+b+"\n            }\n\n            int xC = xCCorner + "+v+";\n            if ("+(1===y)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+b+"\n            } else if ("+(2===y)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+b+"\n            } else if ("+(3===y)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                initializationValue\n              );\n\n              "+b+"\n            }\n          }\n          setOutput("+x+");\n        }\n      }\n    "}},th=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,a=e.inSize,s=Math.ceil(a/n);this.outputShape=[r,s];var i="0.0",o="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",o="min"):"max"===t&&(i="-1.0 / 1e-20",o="max");var l=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");var c=4*Math.floor(n/4),u=n%4,d="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+o+"(values, minMaxValue);\n      }\n    ",A="vec4";"all"===t?(i="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",A="bvec4"):"any"===t&&(i="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",A="bvec4");var h="";a%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+i+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+h+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+i+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+A+" values = "+A+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+d+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===u)+") {\n          "+A+" values = "+A+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(2===u)+") {\n          "+A+" values = "+A+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(3===u)+") {\n          "+A+" values = "+A+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+d+"\n        }\n        setOutput("+l+");\n      }\n    "},nh=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),n+="\n        "+a+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+md(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+gd(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},rh=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],s=r[2],i=e.shape,o=i[1],l=i[2],c=[n&&o>1?a-1:a,n&&l>1?s-1:s],u=[n&&o>1?o-1:o,n&&l>1?l-1:l],d=c[0]/u[0],A=c[1]/u[1],h=1/d,f=1/A,p=2*Math.ceil(h)+2,m=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+A+");\n\n        const float invHeightScale = float("+h+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+p+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+o+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+l+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(a-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(s-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},ah=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],s=e[1],i=e[2],o=e[3];this.outputShape=[a,t,n,o];var l=[r&&t>1?s-1:s,r&&n>1?i-1:i],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+l[0]/c[0]+",\n          "+l[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+s+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},sh=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=e[0],s=e[1],i=e[2],o=e[3];this.outputShape=[a,t,n,o];var l=[r&&t>1?s-1:s,r&&n>1?i-1:i],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+l[0]/c[0]+",\n          "+l[1]/c[1]+",\n          "+l[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+s+".0, "+i+".0,\n                                     "+i+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(o-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},ih=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],s=r[2],i=e.shape,o=i[1],l=i[2],c=[n&&o>1?a-1:a,n&&l>1?s-1:s],u=[n&&o>1?o-1:o,n&&l>1?l-1:l],d=c[0]/u[0],A=c[1]/u[1],h=1/d,f=1/A,p=2*Math.ceil(h)+2,m=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+A+");\n\n        const float invHeightScale = float("+h+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+p+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+o+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+l+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+u[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+u[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+s+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},oh=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],s=e[1],i=e[2],o=e[3];this.outputShape=[a,t,n,o];var l=[r&&t>1?s-1:s,r&&n>1?i-1:i],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],u=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+l[0]/c[0]+",\n          "+l[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+s+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+u+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},lh=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map(function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),a=Sd(n);this.userCode="\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},ch=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=fd("rc",n),a=r[n-1]+" + 1 < "+this.outputShape[n-1],s=r[n-2]+" + 1 < "+this.outputShape[n-2],i=Sd(n);function o(n){var r=e.map(function(r,a){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(a,n)});return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+a+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+i+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return o(e)}(r.slice())+";\n          if("+a+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",o(e)}(r.slice())+";\n          }\n          if("+s+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",o(e)}(r.slice())+";\n            if("+a+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",o(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},uh=function(e,t,n,r,a,s,i){void 0===i&&(i=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;var o=Sd(a.length),l=Sd(s.length),c="";1===n?c="i":2===n&&(c="i, j");var u="getIndices("+c+")",d="";1===r?d="i":2===r&&(d="i, coords[1]");var A="getUpdates("+d+")",h=t>1?"strides[j]":"strides";this.userCode="\n        "+o+" strides = "+o+"("+a+");\n\n        void main() {\n          "+l+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+u+");\n              flattenedIndex += index * "+h+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+A+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},dh=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,a=e.inSize,s=e.numSegments,i=s*Math.ceil(a/n);this.outputShape=[r,i];var o=4*Math.floor(n/4),l=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",u="";a%n>0&&(u="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      ");var d="";a%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+u+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+d+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+s+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+s+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+o+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+o+";\n        if ("+(1===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},Ah=function(e,t,n){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)a="resRC",r="resRC";else{for(var s=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],o=[],l=0;l<t.length;l++)o.push(""+s[l]),l<e&&i.push(""+s[l]);r=i.join(),a=o.join()}var c=Sd(n);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+a+"));\n        } else {\n          setOutput(getB("+a+"));\n        }\n      }\n    "},hh=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=Sd(this.rank),r="uniform int start["+this.rank+"];",a=function(e){if(1===e)return"sourceLoc";if(e<=6)return fh.slice(0,e).map(function(e){return"sourceLoc."+e}).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map(function(e,t){return"sourceLoc."+fh[t]+" = start["+t+"] + coords."+fh[t]+";"}).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+a+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),fh=["x","y","z","w","u","v"],ph=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=Sd(this.rank),n=fd("coords",this.rank),r=fd("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",s="getChannel(getSource("+r.join()+"), "+a+")",i="\n      result.x = "+s+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+s+";\n        --"+r[this.rank-1]+";\n      }\n    ",o=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+s+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+s+";\n        }\n      }\n    ",l=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map(function(e,t){return"start["+t+"]"}).join()+");":e.map(function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"}).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+l+"\n        vec4 result = vec4(0.);\n        "+i+"\n        "+o+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),mh=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=Sd(n.length),s=Sd(n.length),i="";if(1===r)i="coords * strides + begin";else{var o=0;i=n.map(function(e,t){return o++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(o-1)+"] * strides["+t+"] + begin["+t+"]"}).join(",")}this.userCode="\n      "+a+" begin = "+a+"("+e+");\n      "+a+" strides = "+a+"("+t+");\n\n      void main() {\n        "+s+" coords = getOutputCoords();\n        setOutput(getX("+i+"));\n      }\n    "},gh=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,a=xh(t,n),s=vh(e,a,n);if(s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]),this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var i=this.freeTextures[s].shift();return this.usedTextures[s].push(i),i}return this.numUsedTextures++,this.log(),a===Lo.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===Lo.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===Lo.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===Lo.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===Lo.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var a=vh(t,xh(n,r),r);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var s=this.usedTextures[a],i=s.indexOf(e);if(i<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s.splice(i,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function xh(e,t){if(e===Do.UPLOAD)return Lo.PACKED_2X2_FLOAT32;if(e===Do.RENDER||null==e)return function(e){return ii().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Lo.PACKED_2X2_FLOAT32:Lo.UNPACKED_FLOAT32:e?Lo.PACKED_2X2_FLOAT16:Lo.UNPACKED_FLOAT16}(t);if(e===Do.DOWNLOAD||e===Do.PIXELS)return Lo.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function vh(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var yh=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var a=Sd(this.rank),s=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod("+n[a]+", "+e[a]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+s+"));\n      }\n    "},bh=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var a=Sd(this.rank),s=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(t);this.userCode="\n    void main() {\n      "+a+" resRC = getOutputCoords();\n      setOutput(getA("+s+"));\n    }\n    "},wh=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=Sd(this.rank),s=hd("rc",this.rank),i=new Array(this.rank);for(r=0;r<t.length;r++)i[t[r]]=s[r];var o="vec2("+i.slice(-2).join()+")",l="++"+s[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+i.join()+"), "+o+")";this.userCode="\n    void main() {\n      "+a+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+l+") {\n        result[1] = "+c+";\n      }\n      --"+s[this.rank-1]+";\n      if(++"+s[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+l+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "},Nh=1.7580993408473768,jh=1.0507009873554805,Ch=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Bh="if (isnan(x)) return x;",kh="return abs(x);",Sh=Bh+"\n  return (x < 0.0) ? 0.0 : x;\n",Eh=Bh+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Fh="return (x >= 0.0) ? x : (exp(x) - 1.0);",_h="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+Nh+";\n  float scale = "+jh+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",Ih="return -x;",Th="return ceil(x);",Dh="return floor(x);",Lh="return exp(x);",Uh="return exp(x) - 1.0;",Ph=Bh+"\n  return sin(x);\n",Rh=Bh+"\n  return cos(x);\n",Oh=Bh+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",Mh=Bh+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",Qh=Bh+"\n  return atan(x);\n",Hh=Bh+"return log(x + sqrt(x * x + 1.0));",zh=Bh+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",Wh=Bh+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",Vh="return x;",Kh="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Gh="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",qh="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Xh=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Yh=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=fd("rc",t),r=Sd(t),a=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),s=n.slice(-2),i=t<=1?"rc":"vec2("+s.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+a+");\n\n        setOutput(getChannel(packedInput, "+i+"));\n      }\n    "},Jh={};function Zh(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?Kh:Sh;if("elu"===e)return t?qh:Fh;if("relu6"===e)return t?Gh:Eh;if("prelu"===e)return t?Hd:Md;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var $h=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!ii().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var a=Oo(ii().getNumber("WEBGL_VERSION"));r.binaryCache=((n=ii().getNumber("WEBGL_VERSION"))in Jh||(Jh[n]={}),Jh[n]),r.gpgpu=new OA(a),r.canvas=a.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new gh(r.gpgpu),r.numMBBeforeWarning=null==ii().global.screen?1024:ii().global.screen.height*ii().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new ku(r,Fo),r}return ni(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(ii().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:Do.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(ii().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:Do.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensors,s=t.slice,i=t.shape,o=t.isPacked;if(null!=s){var l;l=o?new Xh(i,Vh):new Ch(i,Vh);var c=this.runWebGLProgram(l,[{dataId:e,shape:i,dtype:r}],r),u=this.readSync(c.dataId);return this.disposeData(c.dataId),u}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,A,h=null!=this.activeTimers;return h&&(d=Zi()),A="complex64"===r?qu(a.real.dataSync(),a.imag.dataSync()):this.getValuesFromTexture(e),h&&(this.downloadWaitMs+=Zi()-d),this.convertAndCacheOnCPU(e,A)},t.prototype.read=function(e){return ri(this,void 0,void 0,function(){var t,n,r,a,s,i,o,l,c,u,d,A,h,f,p,m,g,x,v,y,b,w;return ai(this,function(N){switch(N.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise(function(e){return t.push(e)})];if(n=this.texData.get(e),r=n.values,a=n.shape,s=n.slice,i=n.dtype,o=n.complexTensors,l=n.isPacked,null!=s)return void 0,c=l?new Xh(a,Vh):new Ch(a,Vh),u=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:i}],i),d=this.read(u.dataId),this.disposeData(u.dataId),[2,d];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!ii().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===ii().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return A=null,"complex64"!==i&&ii().get("WEBGL_BUFFER_SUPPORTED")&&(h=this.decode(e),f=this.texData.get(h.dataId),A=(w=this.gpgpu).createBufferFromTexture.apply(w,[f.texture].concat(Qo(a)))),this.pendingRead.set(e,[]),"complex64"===i?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:N.sent(),N.label=2;case 2:return"complex64"!==i?[3,4]:[4,Promise.all([o.real.data(),o.imag.data()])];case 3:return m=N.sent(),g=m[0],x=m[1],p=qu(g,x),[3,5];case 4:null==A?p=this.getValuesFromTexture(e):(v=Ni(a),p=this.gpgpu.downloadFloat32MatrixFromBuffer(A,v)),N.label=5;case 5:return null!=h&&this.disposeData(h.dataId),y=this.convertAndCacheOnCPU(e,p),b=this.pendingRead.get(e),this.pendingRead.delete(e),b.forEach(function(e){return e(y)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,y]}})})},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!Vo(n)){if(ii().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,a=n.dtype,s=n.isPacked,i=Ni(r);if(ii().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o=this.decode(e),l=this.texData.get(o.dataId),c=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[l.texture].concat(Qo(r))).subarray(0,i);return this.disposeData(o.dataId),c}var u=ii().getBool("WEBGL_PACK")&&!0===s,d=u?yl(r):r,A=u?new fA(d):new hA(d),h=this.runWebGLProgram(A,[{shape:d,dtype:a,dataId:e}],"float32"),f=this.texData.get(h.dataId),p=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(f.texture,f.texShape[0],f.texShape[1]).subarray(0,i);return this.disposeData(h.dataId),p},t.prototype.time=function(e){return ri(this,void 0,void 0,function(){var t,n,r,a,s,i,o;return ai(this,function(l){switch(l.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),a=wi(this.activeTimers.map(function(e){return e.query})).filter(function(e){return null!=e}),s=wi(this.activeTimers.map(function(e){return e.name})).filter(function(e){return null!=e}),this.activeTimers=t,r&&(this.programTimersStack=null),i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},ii().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(a)]:[3,2];case 1:return o=l.sent(),i.kernelMs=xi(o),i.getExtraProfileInfo=function(){return o.map(function(e,t){return{name:s[t],ms:e}}).map(function(e){return e.name+": "+e.ms}).join(", ")},[3,3];case 2:i.kernelMs={error:"WebGL query timers are not supported in this environment."},l.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,i]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return ii().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Zi(),endMs:null}},t.prototype.endTimer=function(e){return ii().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Zi(),e)},t.prototype.getQueryTime=function(e){return ri(this,void 0,void 0,function(){var t;return ai(this,function(n){return ii().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]})})},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,s=t.usage,i=t.isPacked,o=t.slice,l=o&&o.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,s,i)));var u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return ii().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Fo.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every(function(e){return null==n.texData.get(e.dataId).texture&&e.size<t})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:Fo.keep(e.clone()),imag:Fo.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===Ni(n))return rc([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,a=wu(e.shape,t,n);if(r||!a){var s=ii().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ph(n):new hh(n),i=s.getCustomSetupFunc(t);return this.compileAndRun(s,[e],null,i)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),a=this.makeOutput(n,e.dtype),s=this.texData.get(a.dataId);Object.assign(s,r),s.shape=n,s.dtype=e.dtype;var i=Nu(t,e.strides);r.slice&&(i+=r.slice.flatOffset),s.slice={flatOffset:i,origDataId:r.slice&&r.slice.origDataId||e.dataId};var o=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,o+1),a},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var a=vu(t,n,r);if(a.some(function(e){return 0===e}))return rc([],a);var s=new mh(t,r,a);return this.compileAndRun(s,[e])},t.prototype.reverse=function(e,t){var n=ii().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ch(e.shape,t):new lh(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map(function(e){return tc(e)}),r=e.map(function(e){return nc(e)});return ec(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>ii().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(e.length/2),s=this.concat(e.slice(0,a),t),i=this.concat(e.slice(a),t);return this.concat([s,i],t)}if(ii().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var o=new qd(e.map(function(e){return e.shape}),t);return this.compileAndRun(o,e)}var l=Zl(e.map(function(e){return e.shape}),t),c=e.map(function(e){return e.as2D(-1,Ni(e.shape.slice(t)))}),u=new Gd(c.map(function(e){return e.shape}));return this.compileAndRun(u,c).reshape(l)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(ii().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Ih,e.dtype);var t=new Ch(e.shape,Ih);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var a=n?e.shape[2]:e.shape[1],s=r?t.shape[1]:t.shape[2],i=n?e.shape[1]:e.shape[2],o=e.shape[0];if((1===a||1===s)&&i>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var l=1===s?e:e.as3D(o,i,1),c=1===s?2:1,u=1===s?t.as3D(o,1,i):t;return this.multiply(l,u).sum(c,!0)}var d=wo(e.dtype,t.dtype),A=new GA(e.shape,[o,a,s],n,r);return this.compileAndRun(A,[e,t],d)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,s=e.bias,i=e.activation,o=e.preluActivationWeights,l=r?t.shape[2]:t.shape[1],c=a?n.shape[1]:n.shape[2],u=t.shape[0],d=wo(t.dtype,n.dtype),A=null!=s,h=null!=o,f=i?Zh(i,!0):null,p=new GA(t.shape,[u,l,c],r,a,A,f,h),m=[t,n];return s&&m.push(s),o&&m.push(o),this.compileAndRun(p,m,d)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),a=new Ud("return areal * breal - aimag * bimag;",e.shape,t.shape),s=new Ud("return areal * bimag + aimag * breal;",e.shape,t.shape),i=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],o=this.compileAndRun(a,i),l=this.compileAndRun(s,i),c=this.complex(o,l);return o.dispose(),l.dispose(),c}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(ii().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Od,e.dtype);var u=new Qd(Od,e.shape,t.shape);return this.compileAndRun(u,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,a,s){var i=[e,t,n],o=null;null!=s&&(o=s.shape,i.push(s));var l=null;if(null!=a&&(l=a.shape,i.push(a)),ii().getBool("WEBGL_PACK_NORMALIZATION")){var c=new Ld(e.shape,t.shape,n.shape,o,l,r);return this.compileAndRun(c,i)}var u=new Dd(e.shape,t.shape,n.shape,o,l,r);return this.compileAndRun(u,i)},t.prototype.localResponseNormalization4D=function(e,t,n,r,a){var s=ii().getBool("WEBGL_PACK_NORMALIZATION")?new WA(e.shape,t,n,r,a):new HA(e.shape,t,n,r,a);return this.compileAndRun(s,[e])},t.prototype.LRNGrad=function(e,t,n,r,a,s,i){var o=new zA(t.shape,r,a,s,i);return this.compileAndRun(o,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map(function(e){return to(e)});return od(Dc(e.shape,e.dtype,n),t)}var r=new yh(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=ii().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ZA(e.shape,t,n):new JA(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=ii().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wh(e.shape,t):new bh(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new vA(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){vi(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var r=t.reduce(function(e,t){return e*t}),a=ou(e.shape,t,r),s=lu(a.length,t.length),i=cu(e.shape,t,r),o=uu(n,t.length),l=du(i,n,t.length);return e.reshape(a).transpose(s).reshape(i).slice(o,l)},t.prototype.spaceToBatchND=function(e,t,n){vi(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var r=t.reduce(function(e,t){return e*t}),a=[[0,0]];a.push.apply(a,n);for(var s=1+t.length;s<e.shape.length;++s)a.push([0,0]);var i=e.pad(a),o=ou(i.shape,t,r,!1),l=lu(o.length,t.length,!1),c=cu(i.shape,t,r,!1);return i.reshape(o).transpose(l).reshape(c)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],a=e.shape[1],s=hu(a),i=new th({windowSize:s,inSize:a,batchSize:r},t),o=this.compileAndRun(i,[e],n);return 1===o.shape[1]?o:this.reduce(o,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],a=e.shape[1];null!=n&&(r=n.shape[0],a=n.shape[1]);var s=hu(a),i=new Ad({windowSize:s,inSize:a,batchSize:r},t,null==n),o=[e];null!=n&&o.push(n);var l=this.compileAndRun(i,o,"int32");return 1===l.shape[1]?l:this.argReduce(e,t,l)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,a=hu(r[r.length-1]),s=new _d(r,a,t,null==n),i=null==n?[e]:[e,n],o=this.compileAndRun(s,i,"int32");return o.rank===e.rank?this.argReducePacked(e,t,o):o},t.prototype.sum=function(e,t){Gl("sum",t,e.rank);var n=Vl(e.shape,t),r=n[0],a=Ni(n[1]),s=e.as2D(-1,a),i=No(e.dtype);return this.reduce(s,"sum",i).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=Vl(e.shape,t),r=n[0],a=Ni(n[1]),s=e.as2D(-1,a),i=No(e.dtype);return this.reduce(s,"prod",i).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,a=ql([r],e.rank),s=e;null!=a&&(s=e.transpose(a),r=Yl(1,e.rank)[0]);var i=function(e,t,n){for(var r=[],a=e.length,s=0;s<a;s++)s!==t?r.push(e[s]):r.push(n);return r}(s.shape,r,n),o=Ni([s.shape[r]]),l=s.as2D(-1,o),c=No(e.dtype),u=this.segOpCompute(l,"unsortedSegmentSum",t,c,n).reshape(i);return null!=a&&(u=u.transpose(Xl(a))),u},t.prototype.segOpCompute=function(e,t,n,r,a){var s=e.shape[0],i=e.shape[1],o=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=Ki(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Ki(e,n+1);return n}(i,a),l=new dh({windowSize:o,inSize:i,batchSize:s,numSegments:a},t),c=this.compileAndRun(l,[e,n],r);return c.shape[1]===a?c:(n=hc(0,a).tile([i/o]),this.segOpCompute(c,t,n,r,a))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(Gl("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!ii().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var a=Vl(e.shape,r),s=a[0],i=Ni(a[1]),o=e.as2D(-1,i);return this.argReduce(o,n).reshape(s)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var a=new oA(e.shape,n,r);return this.compileAndRun(a,[e])},t.prototype.equal=function(e,t){if(ii().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new Qd("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(ii().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new Qd("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(ii().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new Qd("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(ii().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new Qd("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(ii().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new Qd("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(ii().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new Qd("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new Ch(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(ii().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new Qd("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(ii().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new Qd("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new Ah(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],wo(t.dtype,n.dtype))},t.prototype.where=function(e){Rl("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return cd(e.shape,t)},t.prototype.topk=function(e,t,n){return ld(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){Gl("min",t,e.rank);var n=Vl(e.shape,t),r=n[0],a=Ni(n[1]),s=e.as2D(-1,a);return this.reduce(s,"min",s.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=ii().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zd("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Qd("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=ii().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zd("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Qd("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);Gl("max",t,e.rank);var n=Vl(e.shape,t),r=n[0],a=Ni(n[1]),s=e.as2D(-1,a);return this.reduce(s,"max",s.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=ii().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zd("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Qd("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){Gl("all",t,e.rank);var n=Vl(e.shape,t),r=n[0],a=Ni(n[1]),s=e.as2D(-1,a);return this.reduce(s,"all",s.dtype).reshape(r)},t.prototype.any=function(e,t){Gl("any",t,e.rank);var n=Vl(e.shape,t),r=n[0],a=Ni(n[1]),s=e.as2D(-1,a);return this.reduce(s,"any",s.dtype).reshape(r)},t.prototype.realDivide=function(e,t){if(ii().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new Qd("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return this.compileAndRun(n,[e,t],"float32")},t.prototype.floorDiv=function(e,t){if(ii().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new Qd("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,Pd);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=wo(e.dtype,t.dtype);if(ii().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Pd,n);var r=new Qd(Pd,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new Xh(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,a){void 0===a&&(a=!1);var s=new zd(n,e.shape,t.shape,a);return this.compileAndRun(s,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,a=this.texData.get(e.dataId),s=this.texData.get(t.dataId),i=[[a.complexTensors.real,s.complexTensors.real],[a.complexTensors.imag,s.complexTensors.imag]].map(function(a){var s=a[0],i=a[1],o=r.makeComplexComponentTensorInfo(e,s),l=r.makeComplexComponentTensorInfo(t,i),c=new Qd(n,e.shape,t.shape);return r.compileAndRun(c,[o,l],wo(s.dtype,i.dtype))}),o=i[0],l=i[1],c=this.complex(o,l);return o.dispose(),l.dispose(),c},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>ii().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var a=e.map(function(e){return e.dtype}).reduce(function(e,t){return wo(e,t)}),s=e.map(function(e){return e.shape}),i=ii().getBool("WEBGL_PACK")?new dd(e[0].shape,s):new ud(e[0].shape,s);return this.compileAndRun(i,e,a)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,Rd);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=wo(e.dtype,t.dtype);if(ii().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Rd,e.dtype);var r=new Qd(Rd,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=ii().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zd("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Qd("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=wo(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(ii().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Th,e.dtype);var t=new Ch(e.shape,Th);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(ii().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Dh,e.dtype);var t=new Ch(e.shape,Dh);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new Ch(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new Ch(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new Ch(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new Ch(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new Ch(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(ii().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Lh,e.dtype);var t=new Ch(e.shape,Lh);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(ii().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Uh,e.dtype);var t=new Ch(e.shape,Uh);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=_i([t],e.shape),r=this.max(e,n),a=Kl(r.shape,n),s=this.subtract(e,r.reshape(a)),i=this.exp(s),o=this.sum(i,n).reshape(a);return this.realDivide(i,o)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(ii().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new Ch(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new Ch(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new Ch(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new Ch(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new Ch(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=ii().getBool("WEBGL_PACK")?new Xh(e.shape,Kh):new Ch(e.shape,Sh),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=ii().getBool("WEBGL_PACK")?new Xh(e.shape,Gh):new Ch(e.shape,Eh),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=ii().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zd(Hd,e.shape,t.shape):new Qd(Md,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(ii().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,qh,e.dtype);var t=new Ch(e.shape,Fh);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=ii().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zd("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new Qd("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new Ch(e.shape,_h);return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new Ch(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,a=(r=ii().getBool("WEBGL_PACK_CLIP")?new Vd(e.shape):new Wd(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,a)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(ii().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,kh,e.dtype);var t=new Ch(e.shape,kh);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new Kd(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new Ch(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new Ch(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new Ch(e.shape,Ph);return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new Ch(e.shape,Rh);return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new Ch(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new Ch(e.shape,Oh);return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new Ch(e.shape,Mh);return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new Ch(e.shape,Qh);return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=ii().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zd("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Qd("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new Ch(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new Ch(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new Ch(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new Ch(e.shape,Hh);return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new Ch(e.shape,zh);return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new Ch(e.shape,Wh);return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new Ch(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new Ch(e.shape,function(e){return void 0===e&&(e=0),Bh+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,a,s){var i=e.shape,o=this.texData.get(e.dataId),l=n.inChannels,c=i[0]*i[1]*i[2],u=n.outChannels,d="channelsLast"===n.dataFormat,A=(1===c||1===u)&&l>1e3,h=i[2]%2!=0&&!!o.isPacked;if(A||!ii().getBool("WEBGL_LAZILY_UNPACK")||!ii().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!h){var f=d?i[0]*i[1]*i[2]:i[0]*i[2]*i[3],p=this.reshape(e,[1,f,n.inChannels]),m=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:p,b:m,transposeA:!1,transposeB:!1,bias:r,activation:a,preluActivationWeights:s}),n.outShape)}var g=d?i[0]*i[1]*(i[2]+1):i[0]*i[2]*(i[3]+1),x={dataId:e.dataId,shape:[1,g,n.inChannels],dtype:e.dtype},v=o.shape;o.shape=o.shape.slice(),o.shape[o.shape.length-2]++,vi(Nl(o.shape,x.shape),function(){return"packed reshape "+o.shape+" to "+x.shape+" isn't free"});var y=this.reshape(t,[1,n.inChannels,n.outChannels]),b=this.fusedBatchMatMul({a:x,b:y,transposeA:!1,transposeB:!1,bias:r,activation:a,preluActivationWeights:s}),w=this.texData.get(b.dataId);return vi(w.isPacked,function(){return"batchMatMul result is expected to be packed"}),o.shape=v,w.shape=n.outShape,Fo.makeTensorFromDataId(b.dataId,n.outShape,b.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,a,s){var i=n.filterWidth,o=n.filterHeight,l=n.inChannels,c=n.outWidth,u=n.outHeight,d="channelsLast"===n.dataFormat,A=i*o*l,h=u*c,f=[A,h],p=e.squeeze([0]),m=t.reshape([1,A,-1]),g=new QA(f,p.shape,n),x=this.compileAndRun(g,[p]).reshape([1,f[0],f[1]]),v=null!=r,y=null!=s,b=a?Zh(a,!0):null,w=new GA(x.shape,[1,h,n.outChannels],!0,!1,v,b,y),N=[x,m];r&&N.push(r),y&&N.push(s);var j=this.compileAndRun(w,N);return d?j.reshape([1,u,c,n.outChannels]):j.reshape([1,n.outChannels,u,c])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,s=e.activation,i=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,a,s,i);if(ii().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,a,s,i);var o=null!=a,l=null!=i,c=s?Zh(s,!1):null,u=new nA(r,o,c,l),d=[t,n];return a&&d.push(a),i&&d.push(i),this.compileAndRun(u,d)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(ii().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new nA(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new Jd(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new Yd(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,a=e.convInfo,s=e.bias,i=e.activation,o=e.preluActivationWeights,l=ii().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,c=i?Zh(i,l):null,u=[n,r],d=null!=s,A=null!=o;return d&&u.push(s),A&&u.push(o),l?(t=new sA(a,d,c,A),this.compileAndRun(t,u)):(t=new aA(a,d,c,A),this.compileAndRun(t,u))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return ii().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new sA(n),this.compileAndRun(r,[e,t])):(r=new aA(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new tA(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new eA(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new rA(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new $d(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new Zd(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new $A(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new $A(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var a=new $A(r,"max",!0),s=this.compileAndRun(a,[t]),i=new VA(r),o=this.compileAndRun(i,[e,s],t.dtype);return s.dispose(),o},t.prototype.avgPoolBackprop=function(e,t,n){var r=new Id(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return Vu(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),a=0,s=0;s<e.rank;s++)s!==t&&(r[a++]=e.shape[s]);var i=new Array(e.rank).fill(0),o=e.shape.slice();o[t]=1;var l=new Array(n);for(s=0;s<l.length;s++)i[t]=s,l[s]=this.slice(e,i,o).reshape(r);return l},t.prototype.avgPool3d=function(e,t){var n=new eh(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new Td(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new eh(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var a=new eh(r,"max",!0),s=this.compileAndRun(a,[t]),i=new KA(r),o=this.compileAndRun(i,[e,s],t.dtype);return s.dispose(),o},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!Nl(e.shape,t)&&(null===n.texture||!Nl(n.shape,t))){var r=this.packedReshape(e,t);return Fo.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return Ku(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var a=ii().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new sh(e.shape,t,n,r):new ah(e.shape,t,n,r);return this.compileAndRun(a,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new rh(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var a=new oh(e.shape,t,n,r);return this.compileAndRun(a,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new ih(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var a=t?e:Cu(e),s=a.shape[0],i=a.shape[1],o=new qA(s,i,n),l=o.getCustomSetupFunc(r);return this.compileAndRun(o,[a],"int32",l)},t.prototype.oneHot=function(e,t,n,r){var a=new XA(e.size,t,n,r);return this.compileAndRun(a,[e])},t.prototype.diag=function(e){var t=new AA(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,a){return Rl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),ed(e.dataSync(),t.dataSync(),n,r,a)},t.prototype.cropAndResize=function(e,t,n,r,a,s){var i=new iA(e.shape,t.shape,r,a,s);return this.compileAndRun(i,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){vi(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t});var r=e.shape[0],a="NHWC"===n?e.shape[1]:e.shape[2],s="NHWC"===n?e.shape[2]:e.shape[3],i="NHWC"===n?e.shape[3]:e.shape[1],o=a*t,l=s*t,c=i/(t*t),u=new dA("NHWC"===n?[r,o,l,c]:[r,c,o,l],t,n);return this.compileAndRun(u,[e])},t.prototype.split=function(e,t,n){return id(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=mu(0,e,n),a=r.sliceRank,s=r.numUpdates,i=r.sliceSize,o=r.strides,l=r.outputSize,c=[l/i,i],u=e.reshape([s,a]),d=t.reshape([s,i]);if(0===l)return Ku(rc([]),n);var A=sc(0),h=new uh(s,a,u.rank,d.rank,o,c);return this.compileAndRun(h,[d,u,A]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var a=mu(0,e,n),s=a.sliceRank,i=a.numUpdates,o=a.strides,l=a.outputSize,c=new uh(i,s,e.rank,t.rank,o,[l,1],!1);return this.compileAndRun(c,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new gA("return real * expR - imag * expI;",e.shape,t),a=new gA("return real * expI + imag * expR;",e.shape,t),s=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],i=this.compileAndRun(r,s),o=this.compileAndRun(a,s),l=this.complex(i,o).as2D(e.shape[0],e.shape[1]);return i.dispose(),o.dispose(),l},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],a=Au(e,t),s=a[0],i=a[1],o=a[2],l=a[3],c=t.reshape([i,r]),u=e.reshape([e.size/o,o]),d=new yA(r,l,[i,o]);return this.compileAndRun(d,[u,c]).reshape(s)},t.prototype.fill=function(e,t,n){if("string"===(n=n||Wi(t))){var r=Di(n,Ni(e));return r.fill(t),Fo.makeTensor(r,e,n,this)}var a=new xA(e,t),s=a.getCustomSetupFunc(t);return this.compileAndRun(a,[],n,s)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return Gu(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return Fo.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new Yh(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new YA(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[xl(e.shape)].concat(vl(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[xl(t)].concat(vl(t)),s=new nh(a,n),i=this.runWebGLProgram(s,[r],e.dtype,null,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,s=n.dtype,i=yl(a);return t=r?new uA(i):new cA(i),{dtype:s,shape:a,dataId:this.runWebGLProgram(t,[{shape:i,dtype:s,dataId:e}],s,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,a){var s=this;void 0===a&&(a=!1);var i=this.makeTensorInfo(e.outputShape,n),o=this.texData.get(i.dataId);if(e.packedOutput&&(o.isPacked=!0),e.outPackingScheme===To.DENSE){var l=Qo(e.outputShape);o.texShape=l.map(function(e){return 2*e})}if(null!=e.outTexUsage&&(o.usage=e.outTexUsage),0===Ni(i.shape))return o.values=Ti(i.dtype,0),i;var c=[],u=t.map(function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=s.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Ni(t.shape)<=ii().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?s.unpackTensor(t):s.packTensor(t),c.push(t),n=s.texData.get(t.dataId);else if(n.isPacked&&!Nl(n.shape,t.shape)){var r=t,a=t.shape;t.shape=n.shape,t=s.packedReshape(t,a),c.push(t),n=s.texData.get(t.dataId),r.shape=a}return s.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(i.dataId);var d,A={shape:i.shape,texData:o,isUniform:!1},h=function(e,t,n){var r="";t.concat(n).forEach(function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t});var a=e.userCode;return e.constructor.name+"_"+r+"_"+a}(e,u,A),f=this.getAndSaveBinary(h,function(){return function(e,t,n,r){var a=t.userCode,s=n.map(function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),i=s.map(function(e){return e.shapeInfo}),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},l=vd(s,o,a,t.packedInputs),c=e.createProgram(l),u=null,d=e.getUniformLocation(c,"NAN",!1);1===ii().getNumber("WEBGL_VERSION")&&(u=e.getUniformLocation(c,"INFINITY",!1));for(var A={},h=0;h<t.variableNames.length;h++){var f=t.variableNames[h];A[f]=e.getUniformLocation(c,f,!1),A["offset"+f]=e.getUniformLocation(c,"offset"+f,!1)}return{program:t,source:l,webGLProgram:c,uniformLocations:A,inShapeInfos:i,outShapeInfo:o,infLoc:u,nanLoc:d}}(s.gpgpu,e,u,A)}),p=null!=this.activeTimers;if(p&&(d=this.startTimer()),function(e,t,n,r,a){MA(t.inShapeInfos,n),MA([t.outShapeInfo],[r]);var s=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(s,i[0],i[1]):e.setOutputMatrixTexture(s,i[0],i[1]),e.setProgram(t.webGLProgram),1===ii().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach(function(n,r){var a=t.program.variableNames[r],s=t.uniformLocations[a],i=t.uniformLocations["offset"+a];if(null!=s)if(n.isUniform)if(Ni(n.shape)<2)e.gl.uniform1f(s,n.uniformValues[0]);else{var o=n.uniformValues;o instanceof Float32Array||(o=new Float32Array(o)),e.gl.uniform1fv(s,o)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,s,r)}),null!=a&&a(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,f,u,A,r),c.forEach(function(e){return s.disposeData(e.dataId)}),p&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)})),!ii().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&!1===a){var m=this.unpackTensor(i);return this.disposeData(i.dataId),m}return i},t.prototype.compileAndRun=function(e,t,n,r,a){void 0===a&&(a=!1),n=n||t[0].dtype;var s=this.runWebGLProgram(e,t,n,r,a);return Fo.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(ii().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Ul(function(){if(!ii().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=ii().getBool("DEBUG");ii().set("DEBUG",!1);var n=e.abs(sc(1e-8)).dataSync()[0];if(ii().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,a=n.dtype,s=n.values,i=n.texture,o=n.usage,l=n.isPacked;if(null==i){var c,u=null!=this.activeTimers;u&&(c=Zi());var d=n.texShape;if(null==d&&(d=bl(r,l),n.texShape=d),null!=s){var A=yl(r),h=void 0,f=d[1],p=d[0],m=s instanceof Uint8Array;l?(f=(t=Ho(d[0],d[1]))[0],p=t[1],h=new mA(A,[p,f],m)):h=new pA(A,[p,f],m);var g=this.makeTensorInfo([p,f],a);this.texData.get(g.dataId).usage=m?Do.PIXELS:Do.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),f,p,s);var x=this.runWebGLProgram(h,[g],a,null,!0),v=this.texData.get(x.dataId);n.texture=v.texture,n.texShape=v.texShape,n.isPacked=v.isPacked,n.usage=v.usage,this.disposeData(g.dataId),this.texData.delete(x.dataId),n.values=null,u&&(this.uploadWaitMs+=Zi()-c)}else{var y=this.acquireTexture(d,o,a,l);n.texture=y}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*Oi(t)},t}(Su);_o()&&Fo.registerBackend("webgl",function(){return new $h},2);var ef=$l({square_:function(e){var t=Ql(e,"x","square"),n=[t];return Fo.runKernelFunc(function(e,n){return n([t]),e.square(t)},{x:t},null,"Square",{},n,[])}}),tf="SquaredDifference",nf=$l({squaredDifference_:function(e,t){var n,r=Ql(e,"a","squaredDifference"),a=Ql(t,"b","squaredDifference");n=jo(r,a),r=n[0],a=n[1],Iu(r.shape,a.shape);var s={a:r,b:a},i=[r,a];return Fo.runKernelFunc(function(e,t){var n=e.squaredDifference(r,a);return t([r,a]),n},s,function(e,t){var n=t[0],r=t[1],a=sc(2);return{a:function(){return e.mul(n.sub(r).mul(a))},b:function(){return e.mul(r.sub(n).mul(a))}}},tf,{},i,[])}}),rf=$l({abs_:function(e){var t=Ql(e,"x","abs");return"complex64"===t.dtype?Fo.runKernelFunc(function(e){return e.complexAbs(t)},{$x:t}):Fo.runKernelFunc(function(e,n){var r=e.abs(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}},"Abs")}}),af=$l({acos_:function(e){var t=Ql(e,"x","acos");return Fo.runKernelFunc(function(e,n){var r=e.acos(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(sc(1).sub(n.toFloat().square()).sqrt()).neg()}}})}}),sf=$l({acosh_:function(e){var t=Ql(e,"x","acosh");return Fo.runKernelFunc(function(e,n){var r=e.acosh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}})}}),of=$l({asin_:function(e){var t=Ql(e,"x","asin");return Fo.runKernelFunc(function(e,n){var r=e.asin(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(sc(1).sub(n.toFloat().square()).sqrt())}}})}}),lf=$l({asinh_:function(e){var t=Ql(e,"x","asinh");return Fo.runKernelFunc(function(e,n){var r=e.asinh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(sc(1).add(n.toFloat().square()).sqrt())}}})}}),cf=$l({atan_:function(e){var t=Ql(e,"x","atan");return Fo.runKernelFunc(function(e,n){var r=e.atan(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}})}}),uf=$l({atanh_:function(e){var t=Ql(e,"x","atanh");return Fo.runKernelFunc(function(e,n){var r=e.atanh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(sc(1).sub(n.toFloat().square()))}}})}}),df=$l({ceil_:function(e){var t=Ql(e,"x","ceil");return Fo.runKernelFunc(function(e){return e.ceil(t)},{$x:t},function(e){return{$x:function(){return pc(e)}}})}}),Af=$l({clipByValue_:function(e,t,n){var r=Ql(e,"x","clipByValue");vi(t<=n,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."});var a=[r],s={min:t,max:n};return Fo.runKernelFunc(function(e,a){var s=e.clip(r,t,n);return a([r]),s},{x:r},function(e,r){var a=r[0];return{x:function(){return e.where(a.greaterEqual(t).logicalAnd(a.lessEqual(n)),pc(e))}}},"ClipByValue",s,a)}}),hf=$l({cos_:function(e){var t=Ql(e,"x","cos"),n=[t];return Fo.runKernelFunc(function(e,n){var r=e.cos(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}},"Cos",{},n)}}),ff=$l({cosh_:function(e){var t=Ql(e,"x","cosh");return Fo.runKernelFunc(function(e,n){var r=e.cosh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}})}}),pf=$l({erf_:function(e){var t=Ql(e,"x","erf");return vi("int32"===t.dtype||"float32"===t.dtype,function(){return"Input dtype must be `int32` or `float32`."}),"int32"===t.dtype&&(t=t.toFloat()),Fo.runKernelFunc(function(e,n){var r=e.erf(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),mf=$l({exp_:function(e){var t=Ql(e,"x","exp");return Fo.runKernelFunc(function(e,n){var r=e.exp(t);return n([r]),r},{x:t},function(e,t){return{x:function(){return e.mulStrict(t[0])}}},"Exp",{},[],[!0])}}),gf=$l({expm1_:function(e){var t=Ql(e,"x","expm1");return Fo.runKernelFunc(function(e,n){var r=e.expm1(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}})}}),xf=$l({floor_:function(e){var t=Ql(e,"x","floor");return Fo.runKernelFunc(function(e){return e.floor(t)},{$x:t},function(e){return{$x:function(){return pc(e)}}})}}),vf=$l({log_:function(e){var t=Ql(e,"x","log"),n=[t];return Fo.runKernelFunc(function(e,n){var r=e.log(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}},"Log",{},n)}}),yf=$l({log1p_:function(e){var t=Ql(e,"x","log1p");return Fo.runKernelFunc(function(e,n){var r=e.log1p(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}})}}),bf=$l({logSigmoid_:function(e){var t=Ql(e,"x","logSigmoid");return Fo.runKernelFunc(function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}})}}),wf=$l({neg_:function(e){var t=Ql(e,"x","neg"),n=[t];return Fo.runKernelFunc(function(e){return e.neg(t)},{x:t},function(e){return{x:function(){return e.neg()}}},"Neg",{},n)}}),Nf=$l({reciprocal_:function(e){var t=Ql(e,"x","reciprocal");return Fo.runKernelFunc(function(e,n){var r=e.reciprocal(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}})}}),jf=$l({round_:function(e){var t=Ql(e,"x","round");return Fo.runKernelFunc(function(e){return e.round(t)},{$x:t},function(e){return{$x:function(){return pc(e)}}})}}),Cf=$l({rsqrt_:function(e){var t=Ql(e,"x","rsqrt"),n=[t];return Fo.runKernelFunc(function(e,n){var r=e.rsqrt(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),Bf=$l({sigmoid_:function(e){var t=Ql(e,"x","sigmoid");return Fo.runKernelFunc(function(e,n){var r=e.sigmoid(t);return n([r]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(sc(1).sub(n)))}}},"Sigmoid")}}),kf=$l({sign_:function(e){var t=Ql(e,"x","sign");return Fo.runKernelFunc(function(e){return e.sign(t)},{$x:t},function(e){return{$x:function(){return pc(e)}}})}}),Sf=$l({isNaN_:function(e){var t=Ql(e,"x","isNaN");return Fo.runKernelFunc(function(e){return e.isNaN(t)},{$x:t},function(e){return{$x:function(){return pc(e)}}})}}),Ef=$l({isInf_:function(e){var t=Ql(e,"x","isInf");return Fo.runKernelFunc(function(e){return e.isInf(t)},{$x:t},function(e){return{$x:function(){return pc(e)}}})}}),Ff=$l({isFinite_:function(e){var t=Ql(e,"x","isFinite");return Fo.runKernelFunc(function(e){return e.isFinite(t)},{$x:t},function(e){return{$x:function(){return pc(e)}}})}}),_f=$l({sin_:function(e){var t=Ql(e,"x","sin"),n=[t];return Fo.runKernelFunc(function(e,n){var r=e.sin(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}},"Sin",{},n)}}),If=$l({sinh_:function(e){var t=Ql(e,"x","sinh");return Fo.runKernelFunc(function(e,n){var r=e.sinh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}})}}),Tf=$l({softplus_:function(e){var t=Ql(e,"x","softplus");return Fo.runKernelFunc(function(e,n){var r=e.softplus(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}})}}),Df=$l({sqrt_:function(e){var t=Ql(e,"x","sqrt");return Fo.runKernelFunc(function(e,n){var r=e.sqrt(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}})}}),Lf=$l({step_:function(e,t){void 0===t&&(t=0);var n=Ql(e,"x","step");return Fo.runKernelFunc(function(e){return e.step(n,t)},{$x:n},function(e){return{$x:function(){return pc(e)}}})}}),Uf=$l({tan_:function(e){var t=Ql(e,"x","tan");return Fo.runKernelFunc(function(e,n){var r=e.tan(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}})}}),Pf=$l({tanh_:function(e){var t=Ql(e,"x","tanh");return Fo.runKernelFunc(function(e,n){var r=e.tanh(t);return n([r]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return sc(1).sub(n.square()).mulStrict(e)}}},"Tanh",{},null,[!0])}});function Rf(e,t,n,r,a,s){var i,o,l=Ql(e,"x","batchNorm"),c=Ql(t,"mean","batchNorm"),u=Ql(n,"variance","batchNorm");return null!=a&&(i=Ql(a,"scale","batchNorm")),null!=r&&(o=Ql(r,"offset","batchNorm")),vi(2===l.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),vi(2===c.rank||1===c.rank,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),vi(2===u.rank||1===u.rank,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+u.rank+"."}),null!=i&&vi(2===i.rank||1===i.rank,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."}),null!=o&&vi(2===o.rank||1===o.rank,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+o.rank+"."}),Qf(l,c,u,o,i,s)}function Of(e,t,n,r,a,s){var i,o,l=Ql(e,"x","batchNorm"),c=Ql(t,"mean","batchNorm"),u=Ql(n,"variance","batchNorm");return null!=a&&(i=Ql(a,"scale","batchNorm")),null!=r&&(o=Ql(r,"offset","batchNorm")),vi(3===l.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."}),vi(3===c.rank||1===c.rank,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),vi(3===u.rank||1===u.rank,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+u.rank+"."}),null!=i&&vi(3===i.rank||1===i.rank,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."}),null!=o&&vi(3===o.rank||1===o.rank,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+o.rank+"."}),Qf(l,c,u,o,i,s)}function Mf(e,t,n,r,a,s){var i,o,l=Ql(e,"x","batchNorm"),c=Ql(t,"mean","batchNorm"),u=Ql(n,"variance","batchNorm");return null!=a&&(i=Ql(a,"scale","batchNorm")),null!=r&&(o=Ql(r,"offset","batchNorm")),vi(4===l.rank,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+l.rank+"."}),vi(4===c.rank||1===c.rank,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),vi(4===u.rank||1===u.rank,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+u.rank+"."}),null!=i&&vi(4===i.rank||1===i.rank,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."}),null!=o&&vi(4===o.rank||1===o.rank,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+o.rank+"."}),Qf(l,c,u,o,i,s)}function Qf(e,t,n,r,a,s){null==s&&(s=.001);var i,o,l,c=Ql(e,"x","batchNorm"),u=Ql(t,"mean","batchNorm"),d=Ql(n,"variance","batchNorm");null!=a&&(i=Ql(a,"scale","batchNorm")),null!=r&&(o=Ql(r,"offset","batchNorm")),vi(u.rank===d.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),vi(null==o||u.rank===o.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),vi(null==i||u.rank===i.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),l=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c;var A=[c,u,d,i];return Fo.runKernelFunc(function(e,t){var n=e.batchNormalization(l,Hf(u),Hf(d),s,Hf(i),Hf(o));return t([c,u,d,i]),n},{x:c,mean:u,variance:d,scale:i,offset:o},function(e,t){var n=t,r=n[0],a=n[1],i=n[2],o=n[3],c=null==o?sc(1):o,u=_u(a.shape,l.shape),d=[];if(1===a.rank){for(var A=0;A<l.shape.length-1;++A)d.push(l.shape[A]);d.push(1)}var h=r.sub(a),f=e.mul(c),p=Cf(i.add(sc(s))),m=p.mul(p).mul(p).mul(sc(-.5));return{x:function(){return 1===a.rank?e.mul(au(p.as4D(1,1,1,a.shape[0]),d)).mul(c).reshape(r.shape):e.mul(p).mul(c).reshape(r.shape)},mean:function(){var e=p.mul(sc(-1)).mul(f);return 1===a.rank&&(e=e.sum(u)),e.reshape(a.shape)},variance:function(){var e=m.mul(h).mul(f);return 1===a.rank&&(e=e.sum(u)),e.reshape(a.shape)},scale:function(){var t=h.mul(p),n=e.mul(t);return 1===a.rank&&(n=n.sum(u)),n.reshape(a.shape)},offset:function(){var t=e;return 1===a.rank&&(t=t.sum(u)),t.reshape(a.shape)}}},"BatchNormalization",{varianceEpsilon:s},A).reshape(c.shape)}function Hf(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function zf(){Ll("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Wf=$l({batchNormalization2d_:function(e,t,n,r,a,s){return void 0===r&&(r=.001),zf(),Rf(e,t,n,s,a,r)}}),Vf=$l({batchNormalization3d_:function(e,t,n,r,a,s){return void 0===r&&(r=.001),zf(),Of(e,t,n,s,a,r)}}),Kf=$l({batchNormalization4d_:function(e,t,n,r,a,s){return void 0===r&&(r=.001),zf(),Mf(e,t,n,s,a,r)}}),Gf=$l({batchNormalization_:function(e,t,n,r,a,s){return void 0===r&&(r=.001),zf(),Qf(e,t,n,s,a,r)}}),qf=$l({batchNorm_:Qf}),Xf=$l({batchNorm2d_:Rf}),Yf=$l({batchNorm3d_:Of}),Jf=$l({batchNorm4d_:Mf}),Zf=$l({logicalAnd_:function(e,t){var n=Ql(e,"a","logicalAnd","bool"),r=Ql(t,"b","logicalAnd","bool");return Iu(n.shape,r.shape),Fo.runKernelFunc(function(e){return e.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),$f=$l({logicalNot_:function(e){var t=Ql(e,"x","logicalNot","bool");return Fo.runKernelFunc(function(e){return e.logicalNot(t)},{$x:t})}}),ep=$l({logicalOr_:function(e,t){var n=Ql(e,"a","logicalOr","bool"),r=Ql(t,"b","logicalOr","bool");return Iu(n.shape,r.shape),Fo.runKernelFunc(function(e){return e.logicalOr(n,r)},{$a:n,$b:r})}}),tp=$l({logicalXor_:function(e,t){var n=Ql(e,"a","logicalXor","bool"),r=Ql(t,"b","logicalXor","bool");return Iu(n.shape,r.shape),ep(e,t).logicalAnd(Zf(e,t).logicalNot())}}),np=$l({where_:function(e,t,n){var r=Ql(t,"a","where"),a=Ql(n,"b","where"),s=Ql(e,"condition","where","bool");return yi(r.shape,a.shape,"Error in where: "),1===s.rank?vi(s.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):yi(s.shape,a.shape,"Error in where: "),Fo.runKernelFunc(function(e,t){var n=e.select(s,r,a);return t([s]),n},{$condition:s,$a:r,$b:a},function(e,t){var n=t[0];return{$condition:function(){return pc(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}})}}),rp=function(e){return ri(this,void 0,void 0,function(){var t,n,r;return ai(this,function(a){switch(a.label){case 0:return[4,(t=Ql(e,"condition","whereAsync","bool")).data()];case 1:return n=a.sent(),r=cd(t.shape,n),e!==t&&t.dispose(),[2,r]}})})},ap=$l({add_:function(e,t){var n,r=Ql(e,"a","add"),a=Ql(t,"b","add");n=jo(r,a),r=n[0],a=n[1];var s=Iu(r.shape,a.shape);return Fo.runKernelFunc(function(e){return e.add(r,a)},{a:r,b:a},function(e){return{a:function(){var t=e,n=_u(r.shape,s);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=_u(a.shape,s);return n.length>0&&(t=t.sum(n)),t.reshape(a.shape)}}},"Add")}}),sp=$l({addN_:function(e){vi(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),vi(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(e,t){return Ql(e,"tensors"+t,"addN")}),n=t[0];t.forEach(function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(e){if(!ji(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return Fo.runKernelFunc(function(e){return e.addN(t)},r,function(e){var n={};return t.forEach(function(t,r){n[r]=function(){return e.clone()}}),n},"AddN")}}),ip=$l({addStrict_:function(e,t){var n=Ql(e,"a","addStrict"),r=Ql(t,"b","addStrict");return yi(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),op=$l({atan2_:function(e,t){var n,r=Ql(e,"a","atan2"),a=Ql(t,"b","atan2");n=jo(r,a),r=n[0],a=n[1];var s=Iu(r.shape,a.shape);return Fo.runKernelFunc(function(e,t){var n=e.atan2(r,a);return t([r,a]),n},{$a:r,$b:a},function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=ap(n.square(),r.square()),a=e.mul(r.div(t)),i=_u(n.shape,s);return i.length>0&&(a=a.sum(i)),a.reshape(n.shape)},$b:function(){var t=ap(n.square(),r.square()),a=wf(e.mul(n.div(t))),i=_u(r.shape,s);return i.length>0&&(a=a.sum(i)),a.reshape(r.shape)}}})}}),lp=$l({div_:function(e,t){var n,r=Ql(e,"a","div"),a=Ql(t,"b","div");if(n=jo(r,a),r=n[0],a=n[1],"int32"===r.dtype&&"int32"===a.dtype)return dp(r,a);var s=Iu(r.shape,a.shape);return Fo.runKernelFunc(function(e,t){var n=e.realDivide(r,a);return t([r,a]),n},{a:r,b:a},function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),a=_u(n.shape,s);return a.length>0?t.sum(a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=_u(r.shape,s);a.length>0&&(t=t.sum(a).reshape(r.shape));var i=r.square();return t.div(i.toFloat()).neg()}}},"Div")}}),cp=$l({divNoNan_:function(e,t){var n,r=Ql(e,"a","div"),a=Ql(t,"b","div");r=(n=jo(r,a))[0],a=n[1];var s=lp(r,a),i=pc(s),o=a.equal(i);return np(o,i,s)}}),up=$l({divStrict_:function(e,t){var n=Ql(e,"a","div"),r=Ql(t,"b","div");return yi(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),dp=$l({floorDiv_:function(e,t){var n,r=Ql(e,"a","floorDiv"),a=Ql(t,"b","floorDiv");n=jo(r,a),r=n[0],a=n[1];var s=Iu(r.shape,a.shape);return Fo.runKernelFunc(function(e,t){var n=e.floorDiv(r,a);return t([r,a]),n},{a:r,b:a},function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),a=_u(n.shape,s);return a.length>0?t.sum(a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=_u(r.shape,s);a.length>0&&(t=t.sum(a).reshape(r.shape));var i=r.square();return t.div(i.toFloat()).neg()}}},"FloorDiv")}}),Ap=$l({maximum_:function(e,t){var n,r=Ql(e,"a","maximum"),a=Ql(t,"b","maximum");return n=jo(r,a),r=n[0],a=n[1],"bool"===r.dtype&&(r=r.toInt(),a=a.toInt()),Iu(r.shape,a.shape),Fo.runKernelFunc(function(e,t){var n=e.maximum(r,a);return t([r,a]),n},{a:r,b:a},function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}},"Maximum")}}),hp=$l({maximumStrict_:function(e,t){var n=Ql(e,"a","maximumStrict"),r=Ql(t,"b","maximumStrict");return yi(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),fp=$l({minimum_:function(e,t){var n,r=Ql(e,"a","minimum"),a=Ql(t,"b","minimum");return n=jo(r,a),r=n[0],a=n[1],"bool"===r.dtype&&(r=r.toInt(),a=a.toInt()),Iu(r.shape,a.shape),Fo.runKernelFunc(function(e,t){var n=e.minimum(r,a);return t([r,a]),n},{a:r,b:a},function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}},"Minimum")}}),pp=$l({minimumStrict_:function(e,t){var n=Ql(e,"a","minimumStrict"),r=Ql(t,"b","minimumStrict");return yi(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),mp=$l({mod_:function(e,t){var n,r=Ql(e,"a","mod"),a=Ql(t,"b","mod");n=jo(r,a),r=n[0],a=n[1];var s=Iu(r.shape,a.shape);return Fo.runKernelFunc(function(e,t){var n=e.mod(r,a);return t([r,a]),n},{$a:r,$b:a},function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=_u(n.shape,s);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),a=_u(r.shape,s);return a.length>0?t.sum(a).reshape(r.shape):t}}})}}),gp=$l({modStrict_:function(e,t){var n=Ql(e,"a","modStrict"),r=Ql(t,"b","modStrict");return yi(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),xp=$l({mul_:function(e,t){var n,r=Ql(e,"a","mul"),a=Ql(t,"b","mul");n=jo(r,a),r=n[0],a=n[1];var s=Iu(r.shape,a.shape);return Fo.runKernelFunc(function(e,t){var n=e.multiply(r,a);return t([r,a]),n},{a:r,b:a},function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),a=_u(n.shape,s);return a.length>0?t.sum(a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=_u(r.shape,s);return a.length>0?t.sum(a).reshape(r.shape):t}}},"Mul")}}),vp=$l({mulStrict_:function(e,t){var n=Ql(e,"a","mul"),r=Ql(t,"b","mul");return yi(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),yp=$l({pow_:function(e,t){var n,r=Ql(e,"base","pow"),a=Ql(t,"exp","pow");n=jo(r,a),r=n[0],a=n[1];var s=Iu(r.shape,a.shape),i=[r,a];return Fo.runKernelFunc(function(e,t){var n=e.pow(r,a);return t([r,a,n]),n},{a:r,b:a},function(e,t){var n=t[0],r=t[1],a=t[2];return{a:function(){var t=r.toFloat(),a=e.mul(t.mul(n.pow(t.sub(sc(1))))),i=_u(n.shape,s);return i.length>0&&(a=a.sum(i)),a.reshape(n.shape)},b:function(){var t=n.greater(0),i=n.log().where(t,pc(n)),o=e.mul(a.mul(i)),l=_u(r.shape,s);return l.length>0&&(o=o.sum(l)),o.reshape(r.shape)}}},"Pow",{},i,[!0])}}),bp=$l({powStrict_:function(e,t){return yi(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),wp=$l({squaredDifferenceStrict_:function(e,t){var n=Ql(e,"a","squaredDifferenceStrict"),r=Ql(t,"b","squaredDifferenceStrict");return yi(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Np=$l({sub_:function(e,t){var n,r=Ql(e,"a","sub"),a=Ql(t,"b","sub");n=jo(r,a),r=n[0],a=n[1];var s=Iu(r.shape,a.shape);return Fo.runKernelFunc(function(e){return e.subtract(r,a)},{a:r,b:a},function(e){return{a:function(){var t=e,n=_u(r.shape,s);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=_u(a.shape,s);return n.length>0&&(t=t.sum(n)),t.neg().reshape(a.shape)}}},"Sub")}}),jp=$l({subStrict_:function(e,t){var n=Ql(e,"a","subStrict"),r=Ql(t,"b","subStrict");return yi(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Cp=$l({equal_:function(e,t){var n,r=Ql(e,"a","equal"),a=Ql(t,"b","equal");return n=jo(r,a),r=n[0],a=n[1],Iu(r.shape,a.shape),Fo.runKernelFunc(function(e){return e.equal(r,a)},{$a:r,$b:a})}}),Bp=$l({equalStrict_:function(e,t){var n=Ql(e,"a","equalStrict"),r=Ql(t,"b","equalStrict");return yi(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),kp=$l({greater_:function(e,t){var n,r=Ql(e,"a","greater"),a=Ql(t,"b","greater");return n=jo(r,a),r=n[0],a=n[1],Iu(r.shape,a.shape),Fo.runKernelFunc(function(e){return e.greater(r,a)},{a:r,b:a},null,"Greater")}}),Sp=$l({greaterEqual_:function(e,t){var n,r=Ql(e,"a","greaterEqual"),a=Ql(t,"b","greaterEqual");return n=jo(r,a),r=n[0],a=n[1],Iu(r.shape,a.shape),Fo.runKernelFunc(function(e,t){var n=e.greaterEqual(r,a);return t([r,a]),n},{a:r,b:a},function(e,t){var n=t[0],r=t[1];return{a:function(){return pc(n)},b:function(){return pc(r)}}},"GreaterEqual")}}),Ep=$l({greaterEqualStrict_:function(e,t){var n=Ql(e,"a","greaterEqualStrict"),r=Ql(t,"b","greaterEqualStrict");return yi(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Fp=$l({greaterStrict_:function(e,t){var n=Ql(e,"a","greaterStrict"),r=Ql(t,"b","greaterStrict");return yi(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),_p=$l({less_:function(e,t){var n,r=Ql(e,"a","less"),a=Ql(t,"b","less");return n=jo(r,a),r=n[0],a=n[1],Iu(r.shape,a.shape),Fo.runKernelFunc(function(e){return e.less(r,a)},{a:r,b:a},null,"Less")}}),Ip=$l({lessEqual_:function(e,t){var n,r=Ql(e,"a","lessEqual"),a=Ql(t,"b","lessEqual");return n=jo(r,a),r=n[0],a=n[1],Iu(r.shape,a.shape),Fo.runKernelFunc(function(e,t){var n=e.lessEqual(r,a);return t([r,a]),n},{a:r,b:a},null,"LessEqual")}}),Tp=$l({lessEqualStrict_:function(e,t){var n=Ql(e,"a","lessEqualStrict"),r=Ql(t,"b","lessEqualStrict");return yi(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),Dp=$l({lessStrict_:function(e,t){var n=Ql(e,"a","lessStrict"),r=Ql(t,"b","lessStrict");return yi(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Lp=$l({notEqual_:function(e,t){var n,r=Ql(e,"a","notEqual"),a=Ql(t,"b","notEqual");return n=jo(r,a),r=n[0],a=n[1],Iu(r.shape,a.shape),Fo.runKernelFunc(function(e){return e.notEqual(r,a)},{a:r,b:a},null,"NotEqual")}}),Up=$l({notEqualStrict_:function(e,t){var n=Ql(e,"a","notEqualStrict"),r=Ql(t,"b","notEqualStrict");return yi(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function Pp(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Rp(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Op=$l({gather_:function(e,t,n){void 0===n&&(n=0);var r=Ql(e,"x","gather"),a=Ql(t,"indices","gather","int32");n=_i(n,r.shape)[0];var s=function(e,t,n){for(var r=e.shape[n],a=[],s=1,i=1,o=0;o<n;o++)a.push(e.shape[o]),s*=e.shape[o];for(o=0;o<t.rank;o++)a.push(t.shape[o]);for(o=n+1;o<e.rank;o++)a.push(e.shape[o]),i*=e.shape[o];return{batchSize:s,sliceSize:i,dimSize:r,outputShape:a}}(r,a,n);return Fo.runKernelFunc(function(e,t){var s=e.gather(r,a.flatten(),n);return t([a]),s},{x:r,indices:a},function(e,t){var a=t[0];return{x:function(){var t=r.shape,s=a.size,i=t.slice(0,n),o=i.length,l=t.slice(n,t.length).slice(1),c=l.length,u=Pp(0,o),d=Pp(o+1,o+1+c),A=Rp([i,[s],l]),h=e.reshape(A),f=a.reshape([s]),p=Rp([[o],u,d]),m=h.transpose(p),g=Mp(m,f,r.shape[n]),x=Xl(p);return g.transpose(x)},indices:function(){return a}}},"Gather",{axis:n}).reshape(s.outputShape)}}),Mp=$l({unsortedSegmentSum_:function(e,t,n){var r=Ql(e,"x","unsortedSegmentSum"),a=Ql(t,"segmentIds","unsortedSegmentSum","int32");return vi(Ci(n),function(){return"numSegments must be of dtype int"}),Fo.runKernelFunc(function(e,t){var s=e.unsortedSegmentSum(r,a,n);return t([a]),s},{$x:r},function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=Ap(t,pc(t)),r=Op(e,n),a=Sp(t,sc(0,"int32")),s=r.rank-a.rank,i=0;i<s;++i)a=Qc(a,i+1);a=Zf(a,uc(r.shape,"bool"));var o=pc(r);return np(a,r,o)}(e,n)}}})}});function Qp(e,t,n,r,a,s,i){void 0===s&&(s="NHWC"),vi(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var o=e,l=t,c=!1;3===t.rank&&(c=!0,l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),o=[1,e[0],e[1],e[2]]),vi(4===o.length,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+o.length+"."}),vi(4===l.rank,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank}),vi(4===n.rank,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var u="NHWC"===s?o[3]:o[1],d="NHWC"===s?l.shape[3]:l.shape[1];vi(u===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[2]+"."}),vi(d===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."}),null!=i&&vi(Ci(a),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var A=Wu(s),h=Lu(o,n.shape,r,1,a,i,!1,A),f=Fo.runKernelFunc(function(e,t){var r=e.conv2dDerInput(l,n,h);return t([n,l]),r},{dy4D:l,filter:n},function(e,t){var n=t[0],o=t[1];return{dy4D:function(){return Vp(e,n,r,a,s,1,i)},filter:function(){return Gp(e,o,n.shape,r,a,s,i)}}});return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function Hp(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function zp(e,t,n,r,a){vi(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var s=e,i=t,o=!1;4===t.rank&&(o=!0,i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),s=[1,e[0],e[1],e[2],e[3]]);var l=s[4],c=i.shape[4];vi(5===s.length,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+s.length+"."}),vi(5===i.rank,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank}),vi(5===n.rank,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),vi(l===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[3]+"."}),vi(c===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."});var u=Uu(s,n.shape,r,1,a),d=Fo.runKernelFunc(function(e){return e.conv3dDerInput(i,n,u)},{dy5D:i});return o?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var Wp=$l({conv1d_:function(e,t,n,r,a,s,i){void 0===a&&(a="NWC"),void 0===s&&(s=1);var o=Ql(e,"x","conv1d"),l=Ql(t,"filter","conv1d"),c=o,u=!1;2===o.rank&&(u=!0,c=o.as3D(1,o.shape[0],o.shape[1])),vi(3===c.rank,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),vi(3===l.rank,function(){return"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."}),null!=i&&vi(Ci(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}),vi(c.shape[2]===l.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+l.shape[1]+"."}),vi(zu(n,s),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+s+"'"}),vi("NWC"===a,function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."});var d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),A=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),h=Vp(A,d,[1,n],r,"NHWC",[1,s],i);return u?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),Vp=$l({conv2d_:function(e,t,n,r,a,s,i){void 0===a&&(a="NHWC"),void 0===s&&(s=[1,1]);var o=Ql(e,"x","conv2d"),l=Ql(t,"filter","conv2d"),c=o,u=!1;3===o.rank&&(u=!0,c=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),vi(4===c.rank,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),vi(4===l.rank,function(){return"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."}),null!=i&&vi(Ci(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var d="NHWC"===a?c.shape[3]:c.shape[1];vi(d===l.shape[2],function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+l.shape[2]+"."}),vi(zu(n,s),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+s+"'"});var A=Wu(a),h=Lu(c.shape,l.shape,n,s,r,i,!1,A),f=[l,c],p=Fo.runKernelFunc(function(e,t){var n=e.conv2d(c,l,h);return t([l,c]),n},{x:c,filter:l},function(e,t){var i=t,o=i[0],l=i[1];return vi(Hu(s),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+s+"'"}),{x:function(){return qp(l.shape,e,o,n,r,a)},filter:function(){return Gp(l,e,o.shape,n,r,a)}}},"Conv2D",h,f);return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),Kp=$l({conv3d_:function(e,t,n,r,a,s){void 0===a&&(a="NDHWC"),void 0===s&&(s=[1,1,1]);var i=Ql(e,"x","conv3d"),o=Ql(t,"filter","conv3d"),l=i,c=!1;4===i.rank&&(c=!0,l=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),vi(5===l.rank,function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."}),vi(5===o.rank,function(){return"Error in conv3d: filter must be rank 5, but got rank "+o.rank+"."}),vi(l.shape[4]===o.shape[3],function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match input depth for filter "+o.shape[3]+"."}),vi(function(e,t){return Hp(e)||Hp(t)}(n,s),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+s+"'"}),vi("NDHWC"===a,function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."});var u=Uu(l.shape,o.shape,n,s,r),d=Fo.runKernelFunc(function(e,t){var n=e.conv3d(l,o,u);return t([l,o]),n},{x:l,$filter:o},function(e,t){vi(Hp(s),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+s+"'"});var a=t[0],i=t[1];return{x:function(){return zp(a.shape,e,i,n,r)},$filter:function(){return function(e,t,n,r,a){var s=e;4===e.rank&&(s=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var i=t;4===i.rank&&(i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),vi(5===s.rank,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+s.shape+"."}),vi(5===i.rank,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+i.shape+"."}),vi(5===n.length,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."}),vi(s.shape[4]===n[3],function(){return"Error in conv3dDerFilter: depth of input "+s.shape[4]+") must match input depth in filter ("+n[3]+"."}),vi(i.shape[4]===n[4],function(){return"Error in conv3dDerFilter: depth of dy ("+i.shape[4]+") must match output depth for filter ("+n[4]+")."});var o=Uu(s.shape,n,r,1,a);return Fo.runKernelFunc(function(e){return e.conv3dDerFilter(s,i,o)},{x5D:s,dy5D:i})}(a,e,i.shape,n,r)}}});return c?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Gp=$l({conv2dDerFilter_:function(e,t,n,r,a,s,i){void 0===s&&(s="NHWC");var o=e;3===e.rank&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var l=t;3===l.rank&&(l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),vi(4===o.rank,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+o.shape+"."}),vi(4===l.rank,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."}),vi(4===n.length,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var c="NHWC"===s?o.shape[3]:o.shape[1],u="NHWC"===s?l.shape[3]:l.shape[1];vi(c===n[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."}),vi(u===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+u+") must match output depth for filter ("+n[3]+")."}),null!=i&&vi(Ci(a),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var d=Wu(s),A=Lu(o.shape,n,r,1,a,i,!1,d);return Fo.runKernelFunc(function(e){return e.conv2dDerFilter(o,l,A)},{x4D:o,dy4D:l})}}),qp=$l({conv2dDerInput_:Qp}),Xp=$l({depthwiseConv2d_:function(e,t,n,r,a,s,i){void 0===a&&(a="NHWC"),void 0===s&&(s=[1,1]);var o=Ql(e,"x","depthwiseConv2d"),l=Ql(t,"filter","depthwiseConv2d"),c=o,u=!1;3===o.rank&&(u=!0,c=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),vi(4===c.rank,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),vi(4===l.rank,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+l.rank+"."}),vi(c.shape[3]===l.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+l.shape[2]+"."}),null==s&&(s=[1,1]),vi(zu(n,s),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+s+"'"}),null!=i&&vi(Ci(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var d=Lu(c.shape,l.shape,n,s,r,i,!0),A=[c,l],h=Fo.runKernelFunc(function(e,t){var n=e.depthwiseConv2D(c,l,d);return t([c,l]),n},{x:c,filter:l},function(e,t){vi(Hu(s),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+s+"'"});var n=t[0],r=t[1];return{x:function(){return Yp(n.shape,e,r,d)},filter:function(){return Jp(n,e,r.shape,d)}}},"DepthwiseConv2dNative",d,A);return u?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),Yp=$l({depthwiseConv2dDerInput_:function(e,t,n,r){var a=t,s=!1;3===t.rank&&(s=!0,a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=Fo.runKernelFunc(function(e){return e.depthwiseConv2DDerInput(a,n,r)},{dy4D:a});return s?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}}),Jp=$l({depthwiseConv2dDerFilter_:function(e,t,n,r){var a=e;3===e.rank&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=t;return 3===s.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Fo.runKernelFunc(function(e){return e.depthwiseConv2DDerFilter(a,s,r)},{x4D:a,dy4D:s})}}),Zp=$l({separableConv2d_:function(e,t,n,r,a,s,i){void 0===s&&(s=[1,1]),void 0===i&&(i="NHWC");var o=Ql(e,"x","separableConv2d"),l=Ql(t,"depthwiseFilter","separableConv2d"),c=Ql(n,"pointwiseFilter","separableConv2d"),u=o,d=!1;if(3===o.rank&&(d=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");vi(4===u.rank,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+u.rank+"."}),vi(4===l.rank,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."}),vi(4===c.rank,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."}),vi(1===c.shape[0],function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),vi(1===c.shape[1],function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var A=l.shape[2],h=l.shape[3];vi(c.shape[2]===A*h,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+A*h+", but got "+c.shape[2]+"."});var f=Xp(u,l,r,a,i,s),p=Vp(f,c,1,"valid",i);return d?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),$p=$l({conv2dTranspose_:function(e,t,n,r,a,s){return Qp(n,Ql(e,"x","conv2dTranspose"),Ql(t,"filter","conv2dTranspose"),r,a,"NHWC",s)}}),em=$l({conv3dTranspose_:function(e,t,n,r,a){return zp(n,Ql(e,"x","conv3dTranspose"),Ql(t,"filter","conv3dTranspose"),r,a)}}),tm=$l({matMul_:function(e,t,n,r){var a;void 0===n&&(n=!1),void 0===r&&(r=!1);var s=Ql(e,"a","matMul"),i=Ql(t,"b","matMul");a=jo(s,i),s=a[0],i=a[1];var o=n?s.shape[s.rank-2]:s.shape[s.rank-1],l=r?i.shape[i.rank-1]:i.shape[i.rank-2],c=n?s.shape[s.rank-1]:s.shape[s.rank-2],u=r?i.shape[i.rank-2]:i.shape[i.rank-1],d=s.shape.slice(0,-2),A=i.shape.slice(0,-2),h=Ni(d),f=Ni(A);vi(s.rank>=2&&i.rank>=2&&s.rank===i.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+s.rank+" and "+i.rank+"."}),vi(ji(d,A),function(){return"Error in matMul: outer dimensions ("+d+") and ("+A+") of Tensors with shapes "+s.shape+" and "+i.shape+" must match."}),vi(o===l,function(){return"Error in matMul: inner shapes ("+o+") and ("+l+") of Tensors with shapes "+s.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var p=s.shape.slice(0,-2).concat([c,u]),m=n?s.as3D(h,o,c):s.as3D(h,c,o),g=r?i.as3D(f,u,l):i.as3D(f,l,u),x={transposeA:n,transposeB:r};return Fo.runKernelFunc(function(e,t){var a=e.batchMatMul(m,g,n,r);return t([m,g]),a},{a:m,b:g},function(e,t){var a=t,s=a[0],i=a[1];return n||r?!n&&r?{a:function(){return e.matMul(i,!1,!1)},b:function(){return e.matMul(s,!0,!1)}}:n&&!r?{a:function(){return i.matMul(e,!1,!0)},b:function(){return s.matMul(e,!1,!1)}}:{a:function(){return i.matMul(e,!0,!0)},b:function(){return e.matMul(s,!0,!0)}}:{a:function(){return e.matMul(i,!1,!0)},b:function(){return s.matMul(e,!0,!1)}}},"BatchMatMul",x).reshape(p)}}),nm=$l({dot_:function(e,t){var n=Ql(e,"t1","dot"),r=Ql(t,"t2","dot");vi(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var a=1===n.rank?n.size:n.shape[1],s=1===r.rank?r.size:r.shape[0];return vi(a===s,function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+s+"."}),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),rm=$l({outerProduct_:function(e,t){var n=Ql(e,"v1","outerProduct"),r=Ql(t,"v2","outerProduct");return vi(1===n.rank&&1===r.rank,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),am=$l({reverse_:function(e,t){var n=Ql(e,"x","reverse");if(0===n.rank)return n.clone();var r=_i(t,n.shape);return Fo.runKernelFunc(function(e){return e.reverse(n,r)},{$x:n},function(e){return{$x:function(){return e.reverse(r)}}}).reshapeAs(n)}}),sm=$l({reverse1d_:function(e){var t=Ql(e,"x","reverse");return vi(1===t.rank,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),am(t,0)}}),im=$l({reverse2d_:function(e,t){var n=Ql(e,"x","reverse");return vi(2===n.rank,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),am(n,t)}}),om=$l({reverse3d_:function(e,t){var n=Ql(e,"x","reverse");return vi(3===n.rank,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),am(n,t)}}),lm=$l({reverse4d_:function(e,t){var n=Ql(e,"x","reverse");return vi(4===n.rank,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),am(n,t)}});function cm(e,t,n,r,a,s){var i=Ql(e,"x","maxPool"),o=i,l=!1;3===i.rank&&(l=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),null==r&&(r=[1,1]),vi(4===o.rank,function(){return"Error in maxPool: input must be rank 4 but got rank "+o.rank+"."}),vi(zu(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),null!=s&&vi(Ci(a),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."});var c=Tu(o.shape,t,n,r,a,s);if(1===c.filterWidth&&1===c.filterHeight&&ji(c.inShape,c.outShape))return i.clone();var u=[o],d=Fo.runKernelFunc(function(e,t){var n=e.maxPool(o,c);return t([o,n]),n},{x:o},function(e,s){var i=s[0],o=s[1];return{x:function(){return function(e,t,n,r,a,s,i,o){var l=Ql(e,"dy","maxPoolBackprop"),c=Ql(t,"input","maxPoolBackprop"),u=Ql(n,"output","maxPoolBackprop");vi(c.rank===l.rank,function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+l.rank+")"}),null==s&&(s=[1,1]),vi(zu(a,s),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+s+"'"}),vi(4===l.rank,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."}),vi(4===c.rank,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."});var d=Tu(c.shape,r,a,s,i,o);return Fo.runKernelFunc(function(e){return e.maxPoolBackprop(l,c,u,d)},{$dy:l,$input:c})}(e,i,o,t,n,r,a)}}},"MaxPool",c,u);return l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function um(e,t,n,r,a,s){var i=Ql(e,"x","avgPool","float32");null==r&&(r=[1,1]),vi(zu(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var o=i,l=!1;3===i.rank&&(l=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),vi(4===o.rank,function(){return"Error in avgPool: x must be rank 4 but got rank "+o.rank+"."}),null!=s&&vi(Ci(a),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."});var c=Tu(o.shape,t,n,r,a,s);if(1===c.filterWidth&&1===c.filterHeight&&ji(c.inShape,c.outShape))return i.clone();var u=Fo.runKernelFunc(function(e){return e.avgPool(o,c)},{x:o},function(e){return{x:function(){return function(e,t,n,r,a,s){var i=Ql(e,"dy","avgPoolBackprop"),o=Ql(t,"input","avgPoolBackprop");vi(o.rank===i.rank,function(){return"Rank of input ("+o.rank+") does not match rank of dy ("+i.rank+")"}),null==a&&(a=[1,1]),vi(zu(r,a),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"});var l=o,c=i,u=!1;3===o.rank&&(u=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]),c=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),vi(4===c.rank,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."}),vi(4===l.rank,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+l.rank+"."});var d=Tu(l.shape,n,r,a,s),A=Fo.runKernelFunc(function(e){return e.avgPoolBackprop(c,l,d)},{dy4D:c,input4D:l});return u?A.as3D(A.shape[1],A.shape[2],A.shape[3]):A}(e,o,t,n,r,a)}}},"AvgPool",c);return u=u.cast(i.dtype),l?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}var dm=$l({maxPool_:function(e,t,n,r,a){return cm(e,t,n,1,r,a)}}),Am=$l({avgPool_:function(e,t,n,r,a){return um(e,t,n,1,r,a)}}),hm=$l({pool_:function(e,t,n,r,a,s){null==a&&(a=[1,1]),null==s&&(s=1),0===r&&(r="valid");var i=Ql(e,"x","maxPool"),o=i,l=!1;3===i.rank&&(l=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),vi(zu(s,a),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+s+" and dilations '"+a+"'"});var c,u=Tu(o.shape,t,s,a,r),d=[u.dilationHeight,u.dilationWidth];c="same"===r?function(e,t){var n=e.map(function(e,n){return e+(e-1)*(t[n]-1)}).map(function(e){return e-1}),r=n.map(function(e){return Math.floor(e/2)}),a=n.map(function(e,t){return e-r[t]});return n.map(function(e,t){return[r[t],a[t]]})}([u.filterHeight,u.filterWidth],d):[[0,0],[0,0]];var A=1===d[0]&&1===d[1],h=function(e,t,n){var r=n.map(function(e){return e[0]}),a=n.map(function(e){return e[1]}),s=e.concat(r,a),i=t.map(function(e,t){return(e-s[t]%e)%e}),o=a.map(function(e,t){return e+i[t]});return[t.map(function(e,t){return[r[t],o[t]]}),t.map(function(e,t){return[0,i[t]]})]}([u.inHeight,u.inWidth],d,c),f=h[0],p=h[1],m=A?r:"valid",g=A?o:tu(o,d,f),x=("avg"===n?function(){return um(g,t,s,1,m)}:function(){return cm(g,t,s,1,m)})(),v=A?x:Lc(x,d,p);return l?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),fm=$l({maxPool3d_:function(e,t,n,r,a,s,i){void 0===s&&(s="NDHWC");var o=Ql(e,"x","maxPool3d"),l=o,c=!1;4===o.rank&&(c=!0,l=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),null==i&&(i=[1,1,1]),vi(5===l.rank,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+l.rank+"."}),vi("NDHWC"===s,function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+s}),vi(zu(n,i),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),null!=a&&vi(Ci(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var u=Du(l.shape,t,n,i,r,a,s),d=Fo.runKernelFunc(function(e,t){var n=e.maxPool3d(l,u);return t([l,n]),n},{x:l},function(e,s){var o=s[0],l=s[1];return{x:function(){return function(e,t,n,r,a,s,i,o){var l=Ql(e,"dy","maxPool3dBackprop"),c=Ql(t,"input","maxPool3dBackprop"),u=Ql(n,"output","maxPool3dBackprop"),d=l,A=c,h=u,f=!1;4===c.rank&&(f=!0,d=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]),A=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]),h=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),vi(5===d.rank,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+d.rank+"."}),vi(5===A.rank,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+A.rank+"."}),vi(5===h.rank,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+h.rank+"."}),null==s&&(s=[1,1,1]),vi(zu(a,s),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+s+"'"}),null!=o&&vi(Ci(i),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var p=Du(A.shape,r,a,s,i,o),m=Fo.runKernelFunc(function(e){return e.maxPool3dBackprop(d,A,h,p)},{dy5D:d,input5D:A});return f?m.as4D(m.shape[1],m.shape[2],m.shape[3],m.shape[4]):m}(e,o,l,t,n,i,r,a)}}});return c?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),pm=$l({avgPool3d_:function(e,t,n,r,a,s,i){void 0===s&&(s="NDHWC");var o=Ql(e,"x","avgPool3d","float32"),l=o,c=!1;4===o.rank&&(c=!0,l=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),null==i&&(i=[1,1,1]),vi(5===l.rank,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+l.rank+"."}),vi("NDHWC"===s,function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+s}),vi(zu(n,i),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),null!=a&&vi(Ci(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var u=Du(l.shape,t,n,i,r,a,s),d=Fo.runKernelFunc(function(e){return e.avgPool3d(l,u)},{x:l},function(e){return{x:function(){return function(e,t,n,r,a,s,i){var o=Ql(e,"dy","avgPool3dBackprop"),l=Ql(t,"input","avgPool3dBackprop"),c=o,u=l,d=!1;4===l.rank&&(d=!0,c=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]),u=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),vi(5===c.rank,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."}),vi(5===u.rank,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+u.rank+"."}),null==a&&(a=[1,1,1]),vi(zu(r,a),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"}),null!=i&&vi(Ci(s),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+s+"."});var A=Du(u.shape,n,r,a,s,i),h=Fo.runKernelFunc(function(e){return e.avgPool3dBackprop(c,u,A)},{dy5D:c,input5D:u});return d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}(e,l,t,n,i,r,a)}}});return d=d.cast(l.dtype),c?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),mm=$l({slice_:function(e,t,n){var r,a,s=Ql(e,"x","slice");if(0===s.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(s.rank-1).fill(0)):t.length<s.rank?t.concat(new Array(s.rank-t.length).fill(0)):t.slice()).forEach(function(e){vi(-1!==e,function(){return"slice() does not support negative begin indexing."})}),a=(a=null==n?new Array(s.rank).fill(-1):"number"==typeof n?[n].concat(new Array(s.rank-1).fill(-1)):n.length<s.rank?n.concat(new Array(s.rank-n.length).fill(-1)):n).map(function(e,t){return e>=0?e:(vi(-1===e,function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."}),s.shape[t]-r[t])}),gu(s,r,a);var i=s.shape,o={begin:r,size:a};return Fo.runKernelFunc(function(e){return e.slice(s,r,a)},{x:s},function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],i[n]-r[n]-a[n]]);return{x:function(){return e.pad(t)}}},"Slice",o)}}),gm=$l({slice1d_:function(e,t,n){var r=Ql(e,"x","slice1d");return vi(1===r.rank,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),mm(r,[t],[n])}}),xm=$l({slice2d_:function(e,t,n){var r=Ql(e,"x","slice2d");return vi(2===r.rank,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),mm(r,t,n)}}),vm=$l({slice3d_:function(e,t,n){var r=Ql(e,"x","slice3d");return vi(3===r.rank,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),mm(r,t,n)}}),ym=$l({slice4d_:function(e,t,n){var r=Ql(e,"x","slice4d");return vi(4===r.rank,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),mm(r,t,n)}});function bm(e,t,n,r,a){return t.rank<n.rank&&(t=t.reshape(Kl(t.shape,r))),e.rank<n.rank&&(e=e.reshape(Kl(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==a?r:r.transpose(a)}}}var wm=$l({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ql(e,"x","all","bool"),a=_i(t,r.shape),s=a,i=ql(s,r.rank);null!=i&&(r=r.transpose(i),s=Yl(s.length,r.rank));var o=Fo.runKernelFunc(function(e){return e.all(r,s)},{$x:r});if(n){var l=Kl(o.shape,a);return o.reshape(l)}return o}}),Nm=$l({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ql(e,"x","any","bool"),a=_i(t,r.shape),s=a,i=ql(s,r.rank);null!=i&&(r=r.transpose(i),s=Yl(s.length,r.rank));var o=Fo.runKernelFunc(function(e){return e.any(r,s)},{$x:r});if(n){var l=Kl(o.shape,a);return o.reshape(l)}return o}}),jm=$l({argMax_:function(e,t){void 0===t&&(t=0);var n=Ql(e,"x","argMax");null==t&&(t=0);var r=_i(t,n.shape),a=ql(r,n.rank);null!=a&&(n=n.transpose(a),r=Yl(r.length,n.rank));var s={axis:r[0]},i=[n];return Fo.runKernelFunc(function(e,t){var a=e.argMax(n,r[0]);return t([n]),a},{x:n},function(e,t){var n=t[0];return{x:function(){return pc(n)}}},"ArgMax",s,i)}}),Cm=$l({argMin_:function(e,t){void 0===t&&(t=0);var n=Ql(e,"x","argMin");null==t&&(t=0);var r=_i(t,n.shape),a=ql(r,n.rank);return null!=a&&(n=n.transpose(a),r=Yl(r.length,n.rank)),Fo.runKernelFunc(function(e,t){var a=e.argMin(n,r[0]);return t([n]),a},{$x:n},function(e,t){var n=t[0];return{$x:function(){return pc(n)}}})}}),Bm=$l({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ql(e,"x","logSumExp"),a=_i(t,r.shape),s=r.max(a,!0),i=r.sub(s).exp().sum(a).log(),o=s.reshape(i.shape).add(i);if(n){var l=Kl(o.shape,a);return o.reshape(l)}return o}}),km=$l({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ql(e,"x","max"),a=r,s=_i(t,r.shape),i=s,o=ql(i,r.rank);null!=o&&(r=r.transpose(o),i=Yl(i.length,r.rank));var l=[r],c=Fo.runKernelFunc(function(e,t){var n=e.max(r,i);return t([a,n]),n},{x:r},function(e,t){return bm(e,t[1],t[0],s,o)},"Max",{axes:i},l,[!0]);if(n){var u=Kl(c.shape,s);c=c.reshape(u)}return c}}),Sm=$l({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ql(e,"x","mean"),a=_i(t,r.shape),s=Ni(Vl(r.shape,a)[1]);return ju(function(e){var r=sc(s);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return a.forEach(function(e){n[e]=1}),t.reshape(n).mul(uc(e.shape,"float32")).div(s)}}})(r)}}),Em=$l({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ql(e,"x","min"),a=r,s=_i(t,r.shape),i=s,o=ql(i,r.rank);null!=o&&(r=r.transpose(o),i=Yl(i.length,r.rank));var l=[r],c=Fo.runKernelFunc(function(e,t){var n=e.min(r,i);return t([a,n]),n},{x:r},function(e,t){return bm(e,t[1],t[0],s,o)},"Min",{axes:i},l,[!0]);if(n){var u=Kl(c.shape,s);c=c.reshape(u)}return c}}),Fm=$l({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=_i(t,(e=Ql(e,"x","moments")).shape),a=e.mean(r,n),s=a.shape;n||(s=Kl(a.shape,r));var i=e.toFloat().sub(a.reshape(s)).square();return{mean:a,variance:i.mean(r,n)}}}),_m=$l({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ql(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var a=_i(t,r.shape);return ju(function(e){var t=ql(a,e.rank),r=a,s=e;null!=t&&(s=e.transpose(t),r=Yl(r.length,e.rank));var i=function(t){var n=e.shape.slice();return a.forEach(function(e){n[e]=1}),t.reshape(n).mul(uc(e.shape,"float32"))},o={axes:r},l=Fo.runKernelFunc(function(e){return e.sum(s,r)},{x:s},function(e){return{x:function(){return i(e)}}},"Sum",o);if(n){var c=Kl(l.shape,a);l=l.reshape(c)}return{value:l,gradFunc:i}})(r)}}),Im=$l({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Ql(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var a=_i(t,r.shape),s=ql(a,r.rank),i=a,o=r;null!=s&&(o=r.transpose(s),i=Yl(i.length,r.rank));var l=Fo.runKernelFunc(function(e){return e.prod(o,i)},{permutedX:o});if(n){var c=Kl(l.shape,a);l=l.reshape(c)}return l}}),Tm=$l({elu_:function(e){var t=Ql(e,"x","elu");return Fo.runKernelFunc(function(e,n){var r=e.elu(t);return n([r]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return Fo.runKernelFunc(function(t){return t.eluDer(e,n)},{dy:e,y:n})}}})}}),Dm=$l({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=Ql(e,"x","leakyRelu");return Ap(sc(t).mul(n),n)}}),Lm=$l({prelu_:function(e,t){var n=Ql(e,"x","prelu"),r=Ql(t,"alpha","prelu");return Fo.runKernelFunc(function(e,t){var a=e.prelu(n,r);return t([n,r]),a},{x:n,alpha:r},function(e,t){var n=t[0],r=t[1],a=n.greater(0);return{x:function(){return np(a,e,e.mul(r))},alpha:function(){var t=np(a,pc(e),e.mul(n)),s=_u(r.shape,e.shape);return s.length>0&&(t=t.sum(s)),t.reshape(r.shape)}}},"Prelu")}}),Um=$l({relu_:function(e){var t=Ql(e,"x","relu");return"bool"===t.dtype?t.toInt():Fo.runKernelFunc(function(e,n){var r=e.relu(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}},"Relu")}}),Pm=$l({relu6_:function(e){var t=Ql(e,"x","relu6");return"bool"===t.dtype?t.toInt():Fo.runKernelFunc(function(e,n){var r=e.relu6(t);return n([t]),r},{x:t},function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}},"Relu6")}}),Rm=$l({selu_:function(e){var t=Ql(e,"x","selu");return Fo.runKernelFunc(function(e,n){var r=e.selu(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){var t=n.greater(sc(0)),r=sc(Nh),a=sc(jh),s=e.mul(a),i=e.mul(r).mul(n.toFloat().exp());return np(t,s,i)}}})}}),Om=$l({transpose_:function(e,t){var n=Ql(e,"x","transpose");if(null==t&&(t=n.shape.map(function(e,t){return t}).reverse()),vi(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."}),t.forEach(function(e){vi(e>=0&&e<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t})}),n.rank<=1)return n.clone();var r={perm:t};return Fo.runKernelFunc(function(e){return e.transpose(n,t)},{x:n},function(e){var n=Xl(t);return{x:function(){return e.transpose(n)}}},"Transpose",r)}}),Mm=$l({localResponseNormalization_:function(e,t,n,r,a){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=.5);var s=Ql(e,"x","localResponseNormalization");vi(4===s.rank||3===s.rank,function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+s.rank+"."}),vi(Ci(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var i=s,o=!1;3===s.rank&&(o=!0,i=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]));var l=Fo.runKernelFunc(function(e,s){var o=e.localResponseNormalization4D(i,t,n,r,a);return s([i,o]),o},{x4D:i},function(e,s){var i=s[0],o=s[1];return{x4D:function(){return Fo.runKernelFunc(function(s){return s.LRNGrad(e,i,o,t,n,r,a)},{})}}});return o?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),Qm=$l({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var a=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(sc(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=Ql(e,"x","norm"),t,n),s=a.shape;if(r){var i=_i(n,e.shape);s=Kl(a.shape,i)}return a.reshape(s)}}),Hm=$l({basicLSTMCell_:function(e,t,n,r,a,s){var i=Ql(e,"forgetBias","basicLSTMCell"),o=Ql(t,"lstmKernel","basicLSTMCell"),l=Ql(n,"lstmBias","basicLSTMCell"),c=Ql(r,"data","basicLSTMCell"),u=Ql(a,"c","basicLSTMCell"),d=Ql(s,"h","basicLSTMCell"),A=c.concat(d,1).matMul(o).add(l),h=A.shape[0],f=A.shape[1]/4,p=[h,f],m=A.slice([0,0],p),g=A.slice([0,f],p),x=A.slice([0,2*f],p),v=A.slice([0,3*f],p),y=m.sigmoid().mulStrict(g.tanh()).addStrict(u.mulStrict(i.add(x).sigmoid())),b=y.tanh().mulStrict(v.sigmoid());return[y,b]}}),zm=$l({multiRNNCell_:function(e,t,n,r){for(var a=Ql(t,"data","multiRNNCell"),s=Hl(n,"c","multiRNNCell"),i=Hl(r,"h","multiRNNCell"),o=a,l=[],c=0;c<e.length;c++){var u=e[c](o,s[c],i[c]);l.push(u[0]),l.push(u[1]),o=u[1]}var d=[],A=[];for(c=0;c<l.length;c+=2)d.push(l[c]),A.push(l[c+1]);return[d,A]}}),Wm=$l({movingAverage_:function(e,t,n,r,a){void 0===a&&(a=!0);var s=Ql(e,"v","movingAverage"),i=Ql(t,"x","movingAverage"),o=Ql(n,"decay","movingAverage");Co(s,i),vi(ji(s.shape,i.shape),function(){return"Shape mismatch in v and x"});var l=sc(1),c=l.sub(o),u=i.sub(s).mul(c);if(a){vi(null!=r,function(){return"When using zeroDebias: true, step is required."});var d=Ql(r,"step","movingAverage");u=u.div(l.sub(yp(o,d)))}return s.add(u)}}),Vm=$l({stridedSlice_:function(e,t,n,r,a,s,i,o,l){if(void 0===a&&(a=0),void 0===s&&(s=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===l&&(l=0),null==r&&(r=new Array(t.length)),0!==i)throw new Error("ellipsis mask is not yet supported");var c=Ql(e,"x","stridedSlice"),u=xu(o),d=c.shape.slice();u.forEach(function(e){t[e]=0,n[e]=1,d.splice(e,0,1)}),c=c.reshape(d);for(var A=0;A<c.rank;A++)t[A]=yu(a,t,r,c.shape,A),n[A]=bu(s,n,r,c.shape,A),r[A]=r[A]||1;var h=xu(l);h.forEach(function(e){n[e]=t[e]+1,r[e]=1});var f=vu(t,n,r),p=f.filter(function(e,t){return-1===h.indexOf(t)});return r.every(function(e){return 1===e})?mm(c,t,f).reshape(p):Fo.runKernelFunc(function(e){return e.stridedSlice(c,t,n,r)},{$x:c}).reshape(p)}}),Km=$l({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=Ql(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+t);var s=Fo.runKernelFunc(function(e){return e.topk(r,t,n)},{$x:r});return{values:s[0],indices:s[1]}}}),Gm=$l({scatterND_:function(e,t,n){var r=Ql(e,"indices","scatterND","int32"),a=Ql(t,"updates","scatterND");return pu(a,r,n),Fo.runKernelFunc(function(e){return e.scatterND(r,a,n)},{indices:r,updates:a},null,"ScatterNd",{shape:n})}}),qm=$l({fft_:function(e){vi("complex64"===e.dtype,function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Fo.runKernelFunc(function(e){return e.fft(r)},{input:e}).reshape(e.shape)}}),Xm=$l({ifft_:function(e){vi("complex64"===e.dtype,function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Fo.runKernelFunc(function(e){return e.ifft(r)},{input:e}).reshape(e.shape)}}),Ym=$l({rfft_:function(e,t){vi("float32"===e.dtype,function(){return"The dtype for rfft() must be real value but got "+e.dtype});var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var s=e.shape.map(function(e){return 0}),i=e.shape.map(function(e){return e});i[e.shape.length-1]=t,n=e.slice(s,i),r=t}else if(null!=t&&t>r){var o=e.shape.map(function(e){return e});o[e.shape.length-1]=t-r,n=e.concat(dc(o),e.shape.length-1),r=t}else n=e;var l=n.zerosLike(),c=ec(n,l).as2D(a,r),u=qm(c),d=Math.floor(r/2)+1,A=tc(u),h=nc(u),f=A.split([d,r-d],A.shape.length-1),p=h.split([d,r-d],h.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=d,ec(f[0],p[0]).reshape(m)}}),Jm=$l({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),a=Xm(r);return tc(a)}var s=[n,2*(t-1)],i=tc(e).as2D(n,t),o=nc(e).as2D(n,t),l=i.slice([0,1],[n,t-2]).reverse(1),c=o.slice([0,1],[n,t-2]).reverse(1).mul(sc(-1)),u=i.concat(l,1),d=o.concat(c,1);return r=ec(u,d).as2D(s[0],s[1]),a=Xm(r),tc(a)}}),Zm=Object.freeze({fft:qm,ifft:Xm,rfft:Ym,irfft:Jm}),$m=$l({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var a=Ql(e,"sparseIndices","sparseToDense","int32"),s=Ql(t,"sparseValues","sparseToDense"),i=Ql(r,"defaultValue","sparseToDense",s.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var a=e.rank>0?e.shape[0]:1,s=e.rank>1?e.shape[1]:1;if(n.length!==s)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+s+".");var i=t.size;if(0!==t.rank&&(1!==t.rank||i!==a))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+a+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,s,n,i),Fo.runKernelFunc(function(e){return e.sparseToDense(a,s,n,i)},{$sparseIndices:a,$sparseValues:s,$defaultValue:i})}}),eg=$l({gatherND_:function(e,t){var n=Ql(t,"indices","gatherND","int32"),r=Ql(e,"x","gatherND");return Fo.runKernelFunc(function(e){return e.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),tg=$l({diag_:function(e){var t=Ql(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return Fo.runKernelFunc(function(e){return e.diag(t)},{$x:t}).reshape(n)}}),ng=$l({dropout_:function(e,t,n,r){var a=Ql(e,"x","dropout");if(vi("float32"===a.dtype,function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."}),vi(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),0===t)return e instanceof fo?a.clone():a;var s=function(e,t){if(null==t)return e.shape.slice();if(ji(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),i=1-t,o=$c(s,0,1,"float32",r).add(i).floor().div(i);return a.mul(o)}});function rg(e,t,n){for(var r=1-e%2,a=new Float32Array(e),s=0;s<e;++s){var i=2*Math.PI*s/(e+r-1);a[s]=t-n*Math.cos(i)}return ic(a,"float32")}var ag,sg=$l({hannWindow_:function(e){return rg(e,.5,.5)}}),ig=$l({hammingWindow_:function(e){return rg(e,.54,.46)}}),og=$l({frame_:function(e,t,n,r,a){void 0===r&&(r=!1),void 0===a&&(a=0);for(var s=0,i=[];s+t<=e.size;)i.push(mm(e,s,t)),s+=n;if(r)for(;s<e.size;){var o=s+t-e.size,l=mc([mm(e,s,t-o),Ac([o],a)]);i.push(l),s+=n}return 0===i.length?oc([],[0,t]):mc(i).as2D(i.length,t)}}),lg=$l({stft_:function(e,t,n,r,a){var s;void 0===a&&(a=sg),null==r&&(s=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(s)/Math.log(2)))));for(var i=og(e,t,n),o=xp(i,a(t)),l=[],c=0;c<i.shape[0];c++)l.push(Ym(o.slice([c,0],[1,t]),r));return mc(l)}}),cg=Object.freeze({hannWindow:sg,hammingWindow:ig,frame:og,stft:lg});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(ag||(ag={}));var ug=$l({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=ag.SUM_BY_NONZERO_WEIGHTS);var a=Ql(e,"labels","absoluteDifference"),s=Ql(t,"predictions","absoluteDifference"),i=null;null!=n&&(i=Ql(n,"weights","absoluteDifference")),yi(a.shape,s.shape,"Error in absoluteDifference: ");var o=a.sub(s).abs();return dg(o,i,r)}}),dg=$l({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=ag.SUM_BY_NONZERO_WEIGHTS);var r=Ql(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Ql(t,"weights","computeWeightedLoss"));var s=null==a?r:r.mul(a);if(n===ag.NONE)return s;if(n===ag.SUM)return s.sum();if(n===ag.MEAN){if(null==a)return s.mean();var i=r.size/a.size,o=s.sum().div(a.sum());return i>1?o.div(sc(i)):o}if(n===ag.SUM_BY_NONZERO_WEIGHTS){if(null==a)return s.sum().div(sc(r.size));var l=a.mul(uc(r.shape)).notEqual(sc(0)).sum().toFloat();return s.sum().div(l)}throw Error("Unknown reduction: "+n)}}),Ag=$l({cosineDistance_:function(e,t,n,r,a){void 0===a&&(a=ag.SUM_BY_NONZERO_WEIGHTS);var s=Ql(e,"labels","cosineDistance"),i=Ql(t,"predictions","cosineDistance"),o=null;null!=r&&(o=Ql(r,"weights","cosineDistance")),yi(s.shape,i.shape,"Error in cosineDistance: ");var l=sc(1).sub(s.mul(i).sum(n,!0));return dg(l,o,a)}}),hg=$l({hingeLoss_:function(e,t,n,r){void 0===r&&(r=ag.SUM_BY_NONZERO_WEIGHTS);var a=Ql(e,"labels","hingeLoss"),s=Ql(t,"predictions","hingeLoss"),i=null;null!=n&&(i=Ql(n,"weights","hingeLoss")),yi(a.shape,s.shape,"Error in hingeLoss: ");var o=sc(1);a=sc(2).mul(a).sub(o);var l=o.sub(a.mul(s)).relu();return dg(l,i,r)}}),fg=$l({huberLoss_:function(e,t,n,r,a){void 0===r&&(r=1),void 0===a&&(a=ag.SUM_BY_NONZERO_WEIGHTS);var s=Ql(e,"labels","huberLoss"),i=Ql(t,"predictions","huberLoss"),o=null;null!=n&&(o=Ql(n,"weights","huberLoss")),yi(s.shape,i.shape,"Error in huberLoss: ");var l=sc(r),c=i.sub(s).abs(),u=fp(c,l),d=c.sub(u),A=sc(.5).mul(u.square()).add(l.mul(d));return dg(A,o,a)}}),pg=$l({logLoss_:function(e,t,n,r,a){void 0===r&&(r=1e-7),void 0===a&&(a=ag.SUM_BY_NONZERO_WEIGHTS);var s=Ql(e,"labels","logLoss"),i=Ql(t,"predictions","logLoss"),o=null;null!=n&&(o=Ql(n,"weights","logLoss")),yi(s.shape,i.shape,"Error in logLoss: ");var l=sc(1),c=sc(r),u=s.mul(i.add(c).log()).neg().sub(l.sub(s).mul(l.sub(i).add(c).log()));return dg(u,o,a)}}),mg=$l({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=ag.SUM_BY_NONZERO_WEIGHTS);var a=Ql(e,"labels","meanSquaredError"),s=Ql(t,"predictions","meanSquaredError"),i=null;null!=n&&(i=Ql(n,"weights","meanSquaredError")),yi(a.shape,s.shape,"Error in meanSquaredError: ");var o=a.squaredDifference(s);return dg(o,i,r)}}),gg=$l({sigmoidCrossEntropy_:function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=ag.SUM_BY_NONZERO_WEIGHTS);var s=Ql(e,"multiClassLabels","sigmoidCrossEntropy"),i=Ql(t,"logits","sigmoidCrossEntropy"),o=null;if(null!=n&&(o=Ql(n,"weights","sigmoidCrossEntropy")),yi(s.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var l=sc(r),c=sc(1),u=sc(.5);s=s.mul(c.sub(l)).add(u.mul(l))}var d=function(e,t){var n=Ql(e,"labels","sigmoidCrossEntropyWithLogits"),r=Ql(t,"logits","sigmoidCrossEntropyWithLogits");yi(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=r.relu(),s=r.mul(n),i=r.abs().neg().exp().log1p();return a.sub(s).add(i)}(s,i);return dg(d,o,a)}}),xg=$l({softmaxCrossEntropy_:function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=ag.SUM_BY_NONZERO_WEIGHTS);var s=Ql(e,"onehotLabels","softmaxCrossEntropy"),i=Ql(t,"logits","softmaxCrossEntropy"),o=null;if(null!=n&&(o=Ql(n,"weights","softmaxCrossEntropy")),yi(s.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var l=sc(r),c=sc(1),u=sc(s.shape[1]);s=s.mul(c.sub(l)).add(l.div(u))}var d=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return ju(function(e,t,r){var a=t.logSumExp([n],!0),s=t.toFloat().sub(a);return r([e,s]),{value:s.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],a=t[1],s=Kl(e.shape,[n]);return[e.reshape(s).mul(r.toFloat().sub(a.exp())),e.reshape(s).mul(a.exp().sub(r.toFloat()))]}}})(e,t)}(s,i);return dg(d,o,a)}}),vg=Object.freeze({get Reduction(){return ag},absoluteDifference:ug,computeWeightedLoss:dg,cosineDistance:Ag,hingeLoss:hg,huberLoss:fg,logLoss:pg,meanSquaredError:mg,sigmoidCrossEntropy:gg,softmaxCrossEntropy:xg});function yg(e,t){return void 0===t&&(t=!1),Fo.tidy(function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],a=Hc(n),s=e.clone(),i=oc([[1]],[1,1]),o=i.clone(),l=n>=r?r:n,c=function(e){var t,l=s,c=o,u=a;t=Fo.tidy(function(){var t=s.slice([e,e],[n-e,1]),l=t.norm(),c=s.slice([e,e],[1,1]),u=oc([[-1]]).where(c.greater(0),oc([[1]])),d=c.sub(u.mul(l)),A=t.div(d);o=1===A.shape[0]?i.clone():i.concat(A.slice([1,0],[A.shape[0]-1,A.shape[1]]),0);var h=u.matMul(d).div(l).neg(),f=s.slice([e,0],[n-e,r]),p=h.mul(o);if(0===e)s=f.sub(p.matMul(o.transpose().matMul(f)));else{var m=f.sub(p.matMul(o.transpose().matMul(f)));s=s.slice([0,0],[e,r]).concat(m,0)}var g=a.slice([0,e],[n,a.shape[1]-e]);if(0===e)a=g.sub(g.matMul(o).matMul(p.transpose()));else{var x=g.sub(g.matMul(o).matMul(p.transpose()));a=a.slice([0,0],[n,e]).concat(x,1)}return[o,s,a]}),o=t[0],s=t[1],a=t[2],Pl([l,c,u])},u=0;u<l;++u)c(u);return!t&&n>r&&(a=a.slice([0,0],[n,r]),s=s.slice([0,0],[r,r])),[a,s]})}var bg=$l({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=Ql(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,s=r.shape.slice(-2),i=s[0],o=s[1];if(!(t<=i))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+i+").");if(!(n<=o))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+o+").");t<0&&(t=i),n<0&&(n=o);var l=hc(0,i,1,"int32").reshape([-1,1]),c=hc(0,o,1,"int32"),u=Np(l,c),d=Zf(u.lessEqual(sc(+t,"int32")),u.greaterEqual(sc(-n,"int32"))),A=dc([i,o],r.dtype);return ru(iu(r.reshape([-1,i,o])).map(function(e){return np(d,e,A)})).reshape(a)}}),wg=$l({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,vi(null!=e&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=e[0].shape[0],r=function(t){vi(e[t].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"})},a=1;a<e.length;++a)r(a)}else t=!0,e=bc(e,e.shape[0],0).map(function(e){return nu(e,[0])});vi(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var s=[],i=e,o=function(e){s.push(Fo.tidy(function(){var t=i[e];if(e>0)for(var n=0;n<e;++n){var r=_m(s[n].mulStrict(t)).mul(s[n]);t=t.sub(r)}return t.div(Qm(t,"euclidean"))}))};for(a=0;a<e.length;++a)o(a);return t?ru(s,0):s}}),Ng=$l({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return yg(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(e,t){return e*t}),r=iu(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],s=[];return r.forEach(function(e){var n=yg(e,t),r=n[0],i=n[1];a.push(r),s.push(i)}),[ru(a,0).reshape(e.shape),ru(s,0).reshape(e.shape)]}}),jg=Object.freeze({bandPart:bg,gramSchmidt:wg,qr:Ng});function Cg(e,t,n,r,a,s){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==s&&(s=0);var i=e.shape[0];return n=Math.min(n,i),vi(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),vi(2===e.rank,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),vi(4===e.shape[1],function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),vi(1===t.rank,function(){return"scores must be a 1D tensor"}),vi(t.shape[0]===i,function(){return"scores has incompatible shape with boxes. Expected "+i+", but was "+t.shape[0]}),vi(0<=s&&s<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+s+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:s}}var Bg=$l({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=Ql(e,"images","resizeBilinear");vi(3===r.rank||4===r.rank,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),vi(2===t.length,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var a=r,s=!1;3===r.rank&&(s=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],o=t[1],l=Fo.runKernelFunc(function(e,t){return t([a]),e.resizeBilinear(a,i,o,n)},{x:a},function(e,t){return{x:function(){return Fo.runKernelFunc(function(r){return r.resizeBilinearBackprop(e,t[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:i,newWidth:o});return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),kg=$l({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=Ql(e,"images","resizeNearestNeighbor");vi(3===r.rank||4===r.rank,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),vi(2===t.length,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),vi("float32"===r.dtype||"int32"===r.dtype,function(){return"`images` must have `int32` or `float32` as dtype"});var a=r,s=!1;3===r.rank&&(s=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],o=t[1],l=Fo.runKernelFunc(function(e,t){return t([a]),e.resizeNearestNeighbor(a,i,o,n)},{batchImages:a},function(e,t){return{batchImages:function(){return Fo.runKernelFunc(function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)},{})}}});return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),Sg=$l({nonMaxSuppression_:function(e,t,n,r,a){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY);var s=Ql(e,"boxes","nonMaxSuppression"),i=Ql(t,"scores","nonMaxSuppression"),o=Cg(s,i,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;var l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return Fo.runKernelFunc(function(e){return e.nonMaxSuppression(s,i,n,r,a)},{boxes:s,scores:i},null,"NonMaxSuppressionV3",l)}}),Eg=$l({nonMaxSuppressionWithScore_:function(e,t,n,r,a,s){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===s&&(s=0);var i=Ql(e,"boxes","nonMaxSuppression"),o=Ql(t,"scores","nonMaxSuppression"),l=Cg(i,o,n,r,a,s),c={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:a=l.scoreThreshold,softNmsSigma:s=l.softNmsSigma},u=Fo.runKernel("NonMaxSuppressionV5",{boxes:i,scores:o},c);return{selectedIndices:u[0],selectedScores:u[1]}}}),Fg=$l({cropAndResize_:function(e,t,n,r,a,s){var i=Ql(e,"image","cropAndResize"),o=Ql(t,"boxes","cropAndResize","float32"),l=Ql(n,"boxInd","cropAndResize","int32");a=a||"bilinear",s=s||0;var c=o.shape[0];return vi(4===i.rank,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."}),vi(2===o.rank&&4===o.shape[1],function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+o.shape+"."}),vi(1===l.rank&&l.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+o.shape+"."}),vi(2===r.length,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),vi(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),vi("bilinear"===a||"nearest"===a,function(){return"method must be bilinear or nearest, but was "+a}),Fo.runKernelFunc(function(e,t){return e.cropAndResize(i,o,l,r,a,s)},{images:i,boxes:o,boxInd:l},null,"CropAndResize",{method:a,extrapolationValue:s,cropSize:r})}}),_g=Object.freeze({resizeBilinear:Bg,resizeNearestNeighbor:kg,nonMaxSuppression:Sg,nonMaxSuppressionAsync:function(e,t,n,r,a){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),ri(this,void 0,void 0,function(){var s,i,o,l,c,u,d;return ai(this,function(A){switch(A.label){case 0:return s=Ql(e,"boxes","nonMaxSuppressionAsync"),i=Ql(t,"scores","nonMaxSuppressionAsync"),o=Cg(s,i,n,r,a),n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold,[4,Promise.all([s.data(),i.data()])];case 1:return l=A.sent(),c=l[0],u=l[1],d=ed(c,u,n,r,a),s!==e&&s.dispose(),i!==t&&i.dispose(),[2,d]}})})},nonMaxSuppressionWithScore:Eg,nonMaxSuppressionWithScoreAsync:function(e,t,n,r,a,s){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===s&&(s=0),ri(this,void 0,void 0,function(){var i,o,l,c,u,d,A;return ai(this,function(h){switch(h.label){case 0:return i=Ql(e,"boxes","nonMaxSuppressionAsync"),o=Ql(t,"scores","nonMaxSuppressionAsync"),l=Cg(i,o,n,r,a,s),n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,s=l.softNmsSigma,[4,Promise.all([i.data(),o.data()])];case 1:return c=h.sent(),u=c[0],d=c[1],A=td(u,d,n,r,a,s),i!==e&&i.dispose(),o!==t&&o.dispose(),[2,A]}})})},cropAndResize:Fg}),Ig=function(e,t){return!(e>0)||"linear"===t},Tg=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},Dg=function(e,t){var n=t,r=_u(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},Lg=function(e,t,n){if("linear"===t)return e;if("relu"===t)return Um(e);if("elu"===t)return Tm(e);if("relu6"===t)return Pm(e);if("prelu"===t)return Lm(e,n);throw new Error("Unknown fused activation "+t+".")},Ug=$l({fusedMatMul_:function(e){var t,n=e.a,r=e.b,a=e.transposeA,s=void 0!==a&&a,i=e.transposeB,o=void 0!==i&&i,l=e.bias,c=e.activation,u=void 0===c?"linear":c,d=e.preluActivationWeights;if(!1===Ig(Fo.state.gradientDepth,u)){var A=tm(n,r,s,o);return null!=l&&(A=ap(A,l)),Lg(A,u,d)}var h=Ql(n,"a","fused matMul"),f=Ql(r,"b","fused matMul");t=jo(h,f),h=t[0],f=t[1];var p=s?h.shape[h.rank-2]:h.shape[h.rank-1],m=o?f.shape[f.rank-1]:f.shape[f.rank-2],g=s?h.shape[h.rank-1]:h.shape[h.rank-2],x=o?f.shape[f.rank-2]:f.shape[f.rank-1],v=h.shape.slice(0,-2),y=f.shape.slice(0,-2),b=Ni(v),w=Ni(y);vi(h.rank>=2&&f.rank>=2&&h.rank===f.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+f.rank+"."}),vi(ji(v,y),function(){return"Error in fused matMul: outer dimensions ("+v+") and ("+y+") of Tensors with shapes "+h.shape+" and "+f.shape+" must match."}),vi(p===m,function(){return"Error in fused matMul: inner shapes ("+p+") and ("+m+") of Tensors with shapes "+h.shape+" and "+f.shape+" and transposeA="+s+" and transposeB="+o+" must match."});var N,j,C=h.shape.slice(0,-2).concat([g,x]),B=s?h.as3D(b,p,g):h.as3D(b,g,p),k=o?f.as3D(w,x,m):f.as3D(w,m,x);null!=l&&Iu(C,(N=jo(N=Ql(l,"bias","fused matMul"),h)[0]).shape),null!=d&&(j=Ql(d,"prelu weights","fused matMul"));var S={a:B,b:k};null!=l&&(S.bias=N),null!=d&&(S.preluActivationWeights=j);var E=[B,k];return Fo.runKernelFunc(function(e,t){var n=e.fusedBatchMatMul({a:B,b:k,transposeA:s,transposeB:o,bias:N,activation:u,preluActivationWeights:j});return t([B,k,n]),n},S,function(e,t){var n=t[0],r=t[1],a=t[2],i=Tg(e,a,u),c={};return null!=l&&(c={bias:function(){return Dg(N,i)}}),s||o?!s&&o?Object.assign({a:function(){return i.matMul(r,!1,!1)},b:function(){return i.matMul(n,!0,!1)}},c):s&&!o?Object.assign({a:function(){return r.matMul(i,!1,!0)},b:function(){return n.matMul(i,!1,!1)}},c):Object.assign({a:function(){return r.matMul(i,!0,!0)},b:function(){return i.matMul(n,!0,!0)}},c):Object.assign({a:function(){return i.matMul(r,!1,!0)},b:function(){return n.matMul(i,!0,!1)}},c)},"_FusedMatMul",{transposeA:s,transposeB:o,activation:u},E,[!0]).reshape(C)}}),Pg=$l({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,s=e.dataFormat,i=void 0===s?"NHWC":s,o=e.dilations,l=void 0===o?[1,1]:o,c=e.dimRoundingMode,u=e.bias,d=e.activation,A=void 0===d?"linear":d,h=e.preluActivationWeights;if(A=A||"linear",!1===Ig(Fo.state.gradientDepth,A)){var f=Vp(t,n,r,a,i,l,c);return null!=u&&(f=ap(f,u)),Lg(f,A,h)}var p=Ql(t,"x","conv2d"),m=Ql(n,"filter","conv2d"),g=p,x=!1;3===p.rank&&(x=!0,g=p.as4D(1,p.shape[0],p.shape[1],p.shape[2])),vi(4===g.rank,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."}),vi(4===m.rank,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+m.rank+"."}),null!=c&&vi(Ci(a),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+a+"."}),vi(g.shape[3]===m.shape[2],function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+m.shape[2]+"."}),vi(zu(r,l),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),vi("NHWC"===i,function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."});var v,y,b=Lu(g.shape,m.shape,r,l,a,c);null!=u&&(v=jo(v=Ql(u,"bias","fused conv2d"),p)[0],Iu(b.outShape,v.shape)),null!=h&&(y=Ql(h,"prelu weights","fused conv2d"));var w={x:g,filter:m};null!=u&&(w.bias=v),null!=h&&(w.preluActivationWeights=y);var N=[m,g],j=Fo.runKernelFunc(function(e,t){var n=e.fusedConv2d({input:g,filter:m,convInfo:b,bias:v,activation:A,preluActivationWeights:y});return t([m,g,n]),n},w,function(e,t){var n=t,s=n[0],i=n[1],o=n[2],c=Tg(e,o,A);vi(Hu(l),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+l+"'"});var d={};return null!=u&&(d={bias:function(){return Dg(v,c)}}),Object.assign({x:function(){return qp(i.shape,c,s,r,a)},filter:function(){return Gp(i,c,s.shape,r,a)}},d)},"FusedConv2D",{convInfo:b,activation:A},N,[!0]);return x?j.as3D(j.shape[1],j.shape[2],j.shape[3]):j}}),Rg=$l({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,s=e.dataFormat,i=void 0===s?"NHWC":s,o=e.dilations,l=void 0===o?[1,1]:o,c=e.dimRoundingMode,u=e.bias,d=e.activation,A=void 0===d?"linear":d,h=e.preluActivationWeights;if(!1===Ig(Fo.state.gradientDepth,A)){var f=Xp(t,n,r,a,i,l,c);return null!=u&&(f=ap(f,u)),Lg(f,A,h)}var p=Ql(t,"x","depthwiseConv2d"),m=Ql(n,"filter","depthwiseConv2d"),g=p,x=!1;3===p.rank&&(x=!0,g=p.as4D(1,p.shape[0],p.shape[1],p.shape[2])),vi(4===g.rank,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."}),vi(4===m.rank,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+m.rank+"."}),vi(g.shape[3]===m.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+m.shape[2]+"."}),null==l&&(l=[1,1]),vi(zu(r,l),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"}),null!=c&&vi(Ci(a),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+a+"."});var v,y,b=Lu(g.shape,m.shape,r,l,a,c,!0);null!=u&&(v=jo(v=Ql(u,"bias","fused conv2d"),p)[0],Iu(b.outShape,v.shape)),null!=h&&(y=Ql(h,"prelu weights","fused depthwiseConv2d"));var w={x:g,filter:m};null!=u&&(w.bias=v),null!=h&&(w.preluActivationWeights=y);var N=[m,g],j=Fo.runKernelFunc(function(e,t){var n=e.fusedDepthwiseConv2D({input:g,filter:m,convInfo:b,bias:v,activation:A,preluActivationWeights:y});return t([m,g,n]),n},w,function(e,t){vi(Hu(l),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+l+"'"});var n=t[0],r=t[1],a=t[2],s=Tg(e,a,A),i={};return null!=u&&(i={bias:function(){return Dg(v,s)}}),Object.assign({x:function(){return Yp(r.shape,s,n,b)},filter:function(){return Jp(r,s,n.shape,b)}},i)},"FusedDepthwiseConv2D",{convInfo:b,activation:A},N,[!0]);return x?j.as3D(j.shape[1],j.shape[2],j.shape[3]):j}}),Og=Object.freeze({matMul:Ug,conv2d:Pg,depthwiseConv2d:Rg}),Mg=Object.freeze({image:_g,linalg:jg,losses:vg,spectral:Zm,fused:Og,signal:cg,square:ef,squaredDifference:nf,conv1d:Wp,conv2d:Vp,conv3d:Kp,depthwiseConv2d:Xp,separableConv2d:Zp,conv2dTranspose:$p,conv3dTranspose:em,op:$l,batchNormalization2d:Wf,batchNormalization3d:Vf,batchNormalization4d:Kf,batchNormalization:Gf,batchNorm:qf,batchNorm2d:Xf,batchNorm3d:Yf,batchNorm4d:Jf,booleanMaskAsync:function(e,t,n){return ri(this,void 0,void 0,function(){var r,a,s,i,o,l,c,u,d,A,h,f,p;return ai(this,function(m){switch(m.label){case 0:for(r=Ql(e,"tensor","boolMask"),a=Ql(t,"mask","boolMask","bool"),s=null==n?0:n,i=a.rank,o=r.shape,vi(i>0,function(){return"mask cannot be scalar"}),yi(o.slice(s,s+i),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,c=s;c<s+i;c++)l*=o[c];return u=o.slice(0,s).concat([l],o.slice(s+i)),d=r.reshape(u),A=a.reshape([-1]),[4,rp(A)];case 1:return h=m.sent(),f=h.squeeze([1]),p=Op(d,f,s),e!==r&&r.dispose(),t!==a&&a.dispose(),f.dispose(),d.dispose(),A.dispose(),h.dispose(),[2,p]}})})},complex:ec,real:tc,imag:nc,concat:mc,concat1d:gc,concat2d:xc,concat3d:vc,concat4d:yc,split:bc,matMul:tm,dot:nm,outerProduct:rm,reverse:am,reverse1d:sm,reverse2d:im,reverse3d:om,reverse4d:lm,maxPool:dm,avgPool:Am,pool:hm,maxPool3d:fm,avgPool3d:pm,slice:mm,slice1d:gm,slice2d:xm,slice3d:vm,slice4d:ym,abs:rf,acos:af,acosh:sf,asin:of,asinh:lf,atan:cf,atanh:uf,ceil:df,clipByValue:Af,cos:hf,cosh:ff,erf:pf,exp:mf,expm1:gf,floor:xf,log:vf,log1p:yf,logSigmoid:bf,neg:wf,reciprocal:Nf,round:jf,rsqrt:Cf,sigmoid:Bf,sign:kf,isNaN:Sf,isInf:Ef,isFinite:Ff,sin:_f,sinh:If,softplus:Tf,sqrt:Df,step:Lf,tan:Uf,tanh:Pf,all:wm,any:Nm,argMax:jm,argMin:Cm,logSumExp:Bm,max:km,mean:Sm,min:Em,moments:Fm,sum:_m,prod:Im,equal:Cp,equalStrict:Bp,greater:kp,greaterEqual:Sp,greaterEqualStrict:Ep,greaterStrict:Fp,less:_p,lessEqual:Ip,lessEqualStrict:Tp,lessStrict:Dp,notEqual:Lp,notEqualStrict:Up,add:ap,addN:sp,addStrict:ip,atan2:op,div:lp,divNoNan:cp,divStrict:up,floorDiv:dp,maximum:Ap,maximumStrict:hp,minimum:fp,minimumStrict:pp,mod:mp,modStrict:gp,mul:xp,mulStrict:vp,pow:yp,powStrict:bp,squaredDifferenceStrict:wp,sub:Np,subStrict:jp,elu:Tm,leakyRelu:Dm,prelu:Lm,relu:Um,relu6:Pm,selu:Rm,logicalAnd:Zf,logicalNot:$f,logicalOr:ep,logicalXor:tp,where:np,whereAsync:rp,buffer:Dc,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:Lc,broadcastTo:Uc,cast:Pc,clone:Rc,cumsum:Oc,depthToSpace:Mc,expandDims:Qc,eye:Hc,multinomial:zc,oneHot:Wc,pad:Vc,pad1d:Kc,pad2d:Gc,pad3d:qc,pad4d:Xc,rand:Yc,randomNormal:Jc,randomGamma:Zc,randomUniform:$c,reshape:eu,spaceToBatchND:tu,squeeze:nu,stack:ru,tile:au,truncatedNormal:su,unstack:iu,setdiff1dAsync:function(e,t){return ri(this,void 0,void 0,function(){var n,r,a,s,i,o,l,c,u,d;return ai(this,function(A){switch(A.label){case 0:return n=Ql(e,"x","setdiff1d"),r=Ql(t,"y","setdiff1d"),vi(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),vi(1===n.rank,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),vi(1===r.rank,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return a=A.sent(),[4,r.data()];case 2:for(s=A.sent(),i=new Set(s),o=0,u=0;u<a.length;u++)i.has(a[u])||o++;for(l=new co([o],n.dtype),c=new co([o],"int32"),u=0,d=0;u<a.length;u++)i.has(a[u])||(l.values[d]=a[u],c.values[d]=u,d++);return[2,[l.toTensor(),c.toTensor()]]}})})},fill:Ac,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return Fo.runKernelFunc(function(r){return r.linspace(e,t,n)},{})},ones:uc,range:hc,scalar:sc,tensor:rc,tensor1d:ic,tensor2d:oc,tensor3d:lc,tensor4d:cc,tensor5d:function(e,t,n){if(bi(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Ol(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ac(e,t,r,n)},tensor6d:function(e,t,n){if(bi(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Ol(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return ac(e,t=t||r,r,n)},variable:function(e,t,n,r){return void 0===t&&(t=!0),Fo.makeVariable(e,t,n,r)},zeros:dc,onesLike:fc,zerosLike:pc,transpose:Om,softmax:Cu,logSoftmax:Bu,localResponseNormalization:Mm,norm:Qm,gather:Op,unsortedSegmentSum:Mp,basicLSTMCell:Hm,multiRNNCell:zm,movingAverage:Wm,stridedSlice:Vm,topk:Km,scatterND:Gm,fft:qm,ifft:Xm,rfft:Ym,irfft:Jm,sparseToDense:$m,gatherND:eg,diag:tg,dropout:ng,hannWindow:sg,hammingWindow:ig,frame:og,stft:lg,inTopKAsync:function(e,t,n){return void 0===n&&(n=1),ri(this,void 0,void 0,function(){var r,a,s,i,o,l,c,u,d,A,h,f,p,m;return ai(this,function(g){switch(g.label){case 0:return r=Ql(e,"predictions","inTopK"),a=Ql(t,"targets","inTopK"),vi(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),vi(r.rank-1===a.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank}),yi(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),s=r.shape[r.shape.length-1],vi(n>0&&n<=s,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+s+"), but got "+n}),[4,r.data()];case 1:return i=g.sent(),[4,a.data()];case 2:for(o=g.sent(),l=[i.length/s,s],u=l[1],d=Ti("bool",c=l[0]),A=0;A<c;A++){for(h=A*u,f=i.subarray(h,h+u),p=[],m=0;m<f.length;m++)p.push({value:f[m],index:m});for(p.sort(function(e,t){return t.value-e.value}),d[A]=0,m=0;m<n;m++)if(p[m].index===o[A]){d[A]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),[2,rc(d,a.shape,"bool")]}})})}});function Qg(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(e){null!=e&&vi("complex64"!==e.dtype,function(){return t+" does not support complex64 tensors."})})}function Hg(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var zg=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new ku(t,Fo),t}return ni(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,ii().get("IS_NODE")&&Rl("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return ri(this,void 0,void 0,function(){return ai(this,function(t){return[2,this.readSync(e)]})})},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?qu(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map(function(e){return to(e)})}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return Dc(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return Fo.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return ri(this,void 0,void 0,function(){var t;return ai(this,function(n){return t=Zi(),e(),[2,{kernelMs:Zi()-t}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:Fo.keep(e.clone()),imag:Fo.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(Qg(e,"slice"),wu(e.shape,t,n)){var r=Nu(t,e.strides),a=Ni(n);return rc(this.readSync(e.dataId).subarray(r,r+a),n,e.dtype)}for(var s=Dc(n,e.dtype),i=this.bufferSync(e),o=0;o<s.size;++o){var l=s.indexToLoc(o).map(function(e,n){return e+t[n]});s.values[o]=i.get.apply(i,l)}return s.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){Qg(e,"stridedSlice");var a=vu(t,n,r);if(a.some(function(e){return 0===e}))return rc([],a);for(var s=Dc(a,e.dtype),i=this.bufferSync(e),o=0;o<s.size;o++){for(var l=s.indexToLoc(o),c=new Array(l.length),u=0;u<c.length;u++)c[u]=l[u]*r[u]+t[u];s.set.apply(s,[i.get.apply(i,c)].concat(l))}return s.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=Dc([e.size,e.size],e.dtype),r=n.values,a=0;a<t.length;a++)r[a*e.size+a]=t[a];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),a=0,s=0;s<e.rank;s++)s!==t&&(r[a++]=e.shape[s]);var i=new Array(e.rank).fill(0),o=e.shape.slice();o[t]=1;var l=new Array(n);for(s=0;s<l.length;s++)i[t]=s,l[s]=this.slice(e,i,o).reshape(r);return l},t.prototype.reverse=function(e,t){Qg(e,"reverse");for(var n=Dc(e.shape,e.dtype),r=this.bufferSync(e),a=function(a){var s=n.indexToLoc(a),i=s.slice();t.forEach(function(t){return i[t]=e.shape[t]-1-i[t]}),n.set.apply(n,[r.get.apply(r,i)].concat(s))},s=0;s<n.size;s++)a(s);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map(function(e){return tc(e)}),a=e.map(function(e){return nc(e)});return ec(this.concat(r,t),this.concat(a,t))}var s=e.map(function(e){var n=Ni(e.shape.slice(t));return e.as2D(-1,n)}),i=Zl(s.map(function(e){return e.shape}),1),o=Dc(i,e[0].dtype).values;if(1===s[0].shape[0]){var l=0;s.forEach(function(e){o.set(n.readSync(e.dataId),l),l+=e.size})}else{var c=0;s.forEach(function(e){for(var t=n.readSync(e.dataId),r=0,a=0;a<e.shape[0];++a)for(var s=a*i[1]+c,l=0;l<e.shape[1];++l)o[s+l]=t[r++];c+=e.shape[1]})}var u=Zl(e.map(function(e){return e.shape}),t);return rc(o,u,e[0].dtype)},t.prototype.neg=function(e){return Qg(e,"neg"),this.multiply(sc(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e+n,imag:t+r}}):this.broadcastedBinaryOp(e,t,wo(e.dtype,t.dtype),function(e,t){return e+t})},t.prototype.addN=function(e){var t=this;Qg(e,"addN");for(var n=e.map(function(e){return t.readSync(e.dataId)}),r=Dc(e[0].shape,e[0].dtype),a=r.values,s=0;s<e.length;s++)for(var i=n[s],o=0;o<a.length;o++)a[o]+=i[o];return r.toTensor()},t.prototype.softmax=function(e,t){var n=_i([t],e.shape),r=this.max(e,n),a=Kl(r.shape,n),s=this.subtract(e,r.reshape(a)),i=this.exp(s),o=this.sum(i,n).reshape(a);return this.realDivide(i,o)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e-n,imag:t-r}}):this.broadcastedBinaryOp(e,t,wo(e.dtype,t.dtype),function(e,t){return e-t})},t.prototype.pow=function(e,t){return Qg([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.pow(e,t)})},t.prototype.batchMatMul=function(e,t,n,r){Qg([e,t],"matMul");for(var a=n?e.shape[1]:e.shape[2],s=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],o=e.shape[0],l=this.readSync(e.dataId),c=this.readSync(t.dataId),u=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],d=u[0],A=u[1],h=u[2],f=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],p=f[0],m=f[1],g=f[2],x=s*i,v=Dc([o,s,i],e.dtype),y=v.values,b=this.blockSize,w=0;w<o;w++)for(var N=0;N<s;N+=b)for(var j=0;j<i;j+=b)for(var C=0;C<a;C+=b)for(var B=Math.min(N+b,s),k=Math.min(j+b,i),S=Math.min(C+b,a),E=N;E<B;E++)for(var F=j;F<k;F++){for(var _=0,I=C;I<S;I++)_+=l[w*d+E*A+I*h]*c[I*p+F*m+w*g];y[w*x+(E*i+F)]+=_}return v.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,s=e.bias,i=e.activation,o=e.preluActivationWeights,l=this.batchMatMul(t,n,r,a);return s&&(l=this.add(l,s)),i&&(l=Hg(this,l,i,o)),l},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}}):this.broadcastedBinaryOp(e,t,wo(e.dtype,t.dtype),function(e,t){return e*t})},t.prototype.realDivide=function(e,t){return Qg([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",function(e,t){return e/t})},t.prototype.floorDiv=function(e,t){return Qg([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",function(e,t){return Math.floor(e/t)})},t.prototype.sum=function(e,t){Qg(e,"sum"),Gl("sum",t,e.rank);for(var n=Vl(e.shape,t),r=n[0],a=n[1],s=dc(r,wo(e.dtype,"int32")),i=Ni(a),o=this.readSync(s.dataId),l=this.readSync(e.dataId),c=0;c<o.length;++c){for(var u=c*i,d=0,A=0;A<i;++A)d+=l[u+A];o[c]=d}return s},t.prototype.prod=function(e,t){Qg(e,"sum");for(var n=Vl(e.shape,t),r=n[0],a=n[1],s=dc(r,wo(e.dtype,"int32")),i=Ni(a),o=this.readSync(s.dataId),l=this.readSync(e.dataId),c=0;c<o.length;++c){for(var u=c*i,d=1,A=0;A<i;++A)d*=l[u+A];o[c]=d}return s},t.prototype.unsortedSegmentSum=function(e,t,n){Qg(e,"unsortedSegmentSum");for(var r=[],a=e.rank-t.rank,s=0;s<a;++s)t=t.expandDims(s+1);for(s=0;s<n;++s){var i=sc(s,"int32"),o=Cp(i,t).asType("float32").mul(e).sum(0);r.push(o)}return ru(r)},t.prototype.argMin=function(e,t){Qg(e,"argMin");var n=[t];Gl("argMin",n,e.rank);for(var r=Vl(e.shape,n),a=r[0],s=r[1],i=dc(a,"int32"),o=Ni(s),l=this.readSync(i.dataId),c=this.readSync(e.dataId),u=0;u<l.length;++u){for(var d=u*o,A=c[d],h=0,f=0;f<o;++f){var p=c[d+f];p<A&&(A=p,h=f)}l[u]=h}return i},t.prototype.argMax=function(e,t){Qg(e,"argMax");var n=[t];Gl("argMax",n,e.rank);for(var r=Vl(e.shape,n),a=r[0],s=r[1],i=dc(a,"int32"),o=Ni(s),l=this.readSync(i.dataId),c=this.readSync(e.dataId),u=0;u<l.length;++u){for(var d=u*o,A=c[d],h=0,f=0;f<o;++f){var p=c[d+f];p>A&&(A=p,h=f)}l[u]=h}return i},t.prototype.cumsum=function(e,t,n,r){if(Qg(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var a=wo(e.dtype,"int32"),s=dc(e.shape,a),i=this.readSync(s.dataId),o=this.readSync(e.dataId),l=e.shape[e.rank-1],c=r?function(e,t){return e+l-t-1}:function(e,t){return e+t},u=0;u<o.length;u+=l)for(var d=0;d<l;d++){var A=c(u,d);if(0===d)i[A]=n?0:o[A];else{var h=c(u,d-1);i[A]=n?o[h]+i[h]:o[A]+i[h]}}return s},t.prototype.equal=function(e,t){return Qg([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e===t?1:0})},t.prototype.notEqual=function(e,t){return Qg([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e!==t?1:0})},t.prototype.less=function(e,t){return Qg([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<t?1:0})},t.prototype.lessEqual=function(e,t){return Qg([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<=t?1:0})},t.prototype.greater=function(e,t){return Qg([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>t?1:0})},t.prototype.greaterEqual=function(e,t){return Qg([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>=t?1:0})},t.prototype.logicalNot=function(e){Qg(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return Qg([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e&&t})},t.prototype.logicalOr=function(e,t){return Qg([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e||t})},t.prototype.select=function(e,t,n){Qg([e,t,n],"select");for(var r=this.readSync(e.dataId),a=this.readSync(t.dataId),s=this.readSync(n.dataId),i=dc(t.shape,wo(t.dtype,n.dtype)),o=this.readSync(i.dataId),l=0,c=0===e.rank||e.rank>1||1===t.rank?1:Ni(t.shape.slice(1)),u=0;u<r.length;u++)for(var d=0;d<c;d++)1===r[u]?o[l++]=a[u]:o[l++]=s[u];return i},t.prototype.where=function(e){Qg([e],"where");var t=this.readSync(e.dataId);return cd(e.shape,t)},t.prototype.topk=function(e,t,n){return Qg(e,"topk"),ld(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){Qg(e,"min"),Gl("min",t,e.rank);for(var n=Vl(e.shape,t),r=n[0],a=n[1],s=dc(r,e.dtype),i=Ni(a),o=this.readSync(s.dataId),l=this.readSync(e.dataId),c=0;c<o.length;++c){for(var u=c*i,d=l[u],A=0;A<i;++A){var h=l[u+A];h<d&&(d=h)}o[c]=d}return s},t.prototype.minimum=function(e,t){return Qg([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.min(e,t)})},t.prototype.mod=function(e,t){return Qg([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})},t.prototype.max=function(e,t){Qg(e,"max"),Gl("max",t,e.rank);for(var n=Vl(e.shape,t),r=n[0],a=n[1],s=dc(r,e.dtype),i=Ni(a),o=this.readSync(s.dataId),l=this.readSync(e.dataId),c=0;c<o.length;++c){for(var u=c*i,d=l[u],A=0;A<i;++A){var h=l[u+A];h>d&&(d=h)}o[c]=d}return s},t.prototype.maximum=function(e,t){return Qg([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.max(e,t)})},t.prototype.all=function(e,t){Qg(e,"all"),Gl("all",t,e.rank);for(var n=Vl(e.shape,t),r=n[0],a=n[1],s=dc(r,e.dtype),i=Ni(a),o=this.readSync(s.dataId),l=this.readSync(e.dataId),c=0;c<o.length;++c){for(var u=c*i,d=l[u],A=0;A<i;++A){var h=l[u+A];d=d&&h}o[c]=d}return s},t.prototype.any=function(e,t){Qg(e,"any"),Gl("any",t,e.rank);for(var n=Vl(e.shape,t),r=n[0],a=n[1],s=dc(r,e.dtype),i=Ni(a),o=this.readSync(s.dataId),l=this.readSync(e.dataId),c=0;c<o.length;++c){for(var u=c*i,d=l[u],A=0;A<i;++A){var h=l[u+A];d=d||h}o[c]=d}return s},t.prototype.squaredDifference=function(e,t){return Qg([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e-t;return n*n})},t.prototype.ceil=function(e){Qg(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){Qg(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){Qg(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){Qg(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){Qg(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){Qg(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){Qg(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=Math.floor(t[r]);t[r]-a<.5?n[r]=Math.floor(t[r]):t[r]-a>.5?n[r]=Math.ceil(t[r]):n[r]=a%2==0?a:a+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){Qg(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){Qg(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){Qg(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){Qg(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log1p(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){Qg(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.sqrt(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){Qg(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=1/Math.sqrt(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){Qg(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){Qg(e,"relu");for(var t=dc(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),a=0;a<r.length;++a)n[a]=Math.max(0,r[a]);return t},t.prototype.relu6=function(e){Qg(e,"relu");for(var t=dc(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),a=0;a<r.length;++a)n[a]=Math.min(Math.max(0,r[a]),6);return t},t.prototype.prelu=function(e,t){return Qg([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return e<0?t*e:e})},t.prototype.elu=function(e){Qg(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=n[r];t[r]=a>=0?a:Math.exp(a)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){Qg([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),a=this.readSync(e.dataId),s=0;s<r.length;++s){var i=r[s];n[s]=i>=1?a[s]:a[s]*(i+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){Qg(e,"selu");for(var t=Nh,n=jh,r=new Float32Array(e.size),a=this.readSync(e.dataId),s=0;s<a.length;++s){var i=a[s];r[s]=i>=0?n*i:t*(Math.exp(i)-1)}return this.makeOutput(r,e.shape,"float32")},t.prototype.clip=function(e,t,n){Qg(e,"clip");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),s=0;s<a.length;++s){var i=a[s];r[s]=i>n?n:i<t?t:i}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var a=n[2*r],s=n[2*r+1];t[r]=Math.hypot(a,s)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){Qg(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){Qg(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){Qg(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),a=0;a<r.length;++a){var s,i=r[a]>-t,o=r[a]<t,l=Math.exp(r[a]);s=o?l:i?r[a]:Math.log(1+l),n[a]=s}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){Qg(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){Qg(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){Qg(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){Qg(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){Qg(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){Qg(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return Qg([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.atan2(e,t)})},t.prototype.sinh=function(e){Qg(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){Qg(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){Qg(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Bi(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){Qg(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){Qg(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){Qg(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){Qg(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=Math.sign(n[r]),s=Math.abs(n[r]),i=1/(1+.3275911*s);t[r]=a*(1-((((1.061405429*i-1.453152027)*i+1.421413741)*i-.284496736)*i+.254829592)*i*Math.exp(-s*s))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),Qg(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),a=0;a<r.length;++a){var s=r[a];isNaN(s)?n[a]=NaN:n[a]=s>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,s=e.activation,i=e.preluActivationWeights,o=this.conv2d(t,n,r);return a&&(o=this.add(o,a)),s&&(o=Hg(this,o,s,i)),o},t.prototype.conv2d=function(e,t,n){Qg([e,t],"conv2d");for(var r=n.filterHeight,a=n.filterWidth,s=n.dilationHeight,i=n.dilationWidth,o=n.padInfo.left,l=n.padInfo.top,c="channelsLast"===n.dataFormat,u=Dc(n.outShape,e.dtype),d=e.strides[0],A=c?e.strides[1]:e.strides[2],h=c?e.strides[2]:1,f=c?1:e.strides[1],p=u.strides[0],m=c?u.strides[1]:u.strides[2],g=c?u.strides[2]:1,x=c?1:u.strides[1],v=this.readSync(e.dataId),y=this.readSync(t.dataId),b=u.values,w=0;w<n.batchSize;++w)for(var N=w*d,j=w*p,C=0;C<n.outHeight;++C)for(var B=j+C*m,k=C*n.strideHeight-l,S=0;S<r;S++){var E=k+S*s;if(!(E<0||E>=n.inHeight))for(var F=S*t.strides[0],_=N+E*A,I=0;I<n.outWidth;++I)for(var T=B+I*g,D=I*n.strideWidth-o,L=0;L<a;L++){var U=D+L*i;if(!(U<0||U>=n.inWidth))for(var P=_+U*h,R=F+L*t.strides[1],O=0;O<n.inChannels;++O){for(var M=v[P+O*f],Q=0;Q<n.outChannels;++Q)b[T+Q*x]+=M*y[R+Q];R+=n.outChannels}}}return u.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,a=n.filterHeight,s=n.filterWidth,i=n.dilationDepth,o=n.dilationHeight,l=n.dilationWidth,c=n.padInfo.front,u=n.padInfo.left,d=n.padInfo.top,A=Dc(n.outShape,e.dtype),h=this.readSync(e.dataId),f=this.readSync(t.dataId),p=A.values,m=0;m<n.batchSize;++m)for(var g=m*e.strides[0],x=m*A.strides[0],v=0;v<n.outDepth;++v)for(var y=x+v*A.strides[1],b=v*n.strideDepth-c,w=0;w<r;w++){var N=b+w*i;if(!(N<0||N>=n.inDepth))for(var j=w*t.strides[0],C=g+N*e.strides[1],B=0;B<n.outHeight;++B)for(var k=y+B*A.strides[2],S=B*n.strideHeight-d,E=0;E<a;E++){var F=S+E*o;if(!(F<0||F>=n.inHeight))for(var _=j+E*t.strides[1],I=C+F*e.strides[2],T=0;T<n.outWidth;++T)for(var D=k+T*n.outChannels,L=T*n.strideWidth-u,U=0;U<s;U++){var P=L+U*l;if(!(P<0||P>=n.inWidth))for(var R=_+U*t.strides[2],O=I+P*n.inChannels,M=R,Q=0;Q<n.inChannels;++Q){for(var H=h[O+Q],z=0;z<n.outChannels;++z)p[D+z]+=H*f[M+z];M+=n.outChannels}}}}return A.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){Qg([e,t],"conv2dDerInput");for(var r=Dc(n.inShape,"float32"),a=r.values,s=this.readSync(e.dataId),i=this.readSync(t.dataId),o=t.strides,l=o[0],c=o[1],u=o[2],d=n.batchSize,A=n.filterHeight,h=n.filterWidth,f=n.inChannels,p=n.inHeight,m=n.inWidth,g=n.outChannels,x=n.outHeight,v=n.outWidth,y=n.strideHeight,b=n.strideWidth,w=n.dataFormat,N=A-1-n.padInfo.top,j=h-1-n.padInfo.left,C="channelsLast"===w,B=r.strides[0],k=C?r.strides[1]:r.strides[2],S=C?r.strides[2]:1,E=C?1:r.strides[1],F=e.strides[0],_=C?e.strides[1]:e.strides[2],I=C?e.strides[2]:1,T=C?1:e.strides[1],D=0;D<d;++D)for(var L=0;L<f;++L)for(var U=0;U<p;++U)for(var P=U-N,R=Math.max(0,Math.ceil(P/y)),O=Math.min(x,(A+P)/y),M=0;M<m;++M){for(var Q=M-j,H=Math.max(0,Math.ceil(Q/b)),z=Math.min(v,(h+Q)/b),W=0,V=R;V<O;++V)for(var K=V*y-P,G=H;G<z;++G)for(var q=F*D+_*V+I*G,X=l*(A-1-K)+c*(h-1-(G*b-Q))+u*L,Y=0;Y<g;++Y)W+=s[q+T*Y]*i[X+Y];a[B*D+k*U+S*M+E*L]=W}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=Dc(n.inShape,"float32"),a=r.values,s=r.strides,i=s[0],o=s[1],l=s[2],c=s[3],u=this.readSync(e.dataId),d=e.strides,A=d[0],h=d[1],f=d[2],p=d[3],m=this.readSync(t.dataId),g=t.strides,x=g[0],v=g[1],y=g[2],b=g[3],w=n.batchSize,N=n.filterDepth,j=n.filterHeight,C=n.filterWidth,B=n.inChannels,k=n.inDepth,S=n.inHeight,E=n.inWidth,F=n.outChannels,_=n.outDepth,I=n.outHeight,T=n.outWidth,D=n.strideDepth,L=n.strideHeight,U=n.strideWidth,P=N-1-n.padInfo.front,R=j-1-n.padInfo.top,O=C-1-n.padInfo.left,M=0;M<w;++M)for(var Q=0;Q<B;++Q)for(var H=0;H<k;++H)for(var z=H-P,W=Math.max(0,Math.ceil(z/D)),V=Math.min(_,(N+z)/D),K=0;K<S;++K)for(var G=K-R,q=Math.max(0,Math.ceil(G/L)),X=Math.min(I,(j+G)/L),Y=0;Y<E;++Y){for(var J=Y-O,Z=Math.max(0,Math.ceil(J/U)),$=Math.min(T,(C+J)/U),ee=0,te=W;te<V;++te)for(var ne=te*D-z,re=q;re<X;++re)for(var ae=re*L-G,se=Z;se<$;++se)for(var ie=A*M+h*te+f*re+p*se,oe=x*(N-1-ne)+v*(j-1-ae)+y*(C-1-(se*U-J))+b*Q,le=0;le<F;++le)ee+=u[ie+le]*m[oe+le];a[i*M+o*H+l*K+c*Y+Q]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){Qg([e,t],"conv2dDerFilter");for(var r=n.strideHeight,a=n.strideWidth,s=n.filterHeight,i=n.filterWidth,o="channelsLast"===n.dataFormat,l=Dc(n.filterShape,"float32"),c=n.padInfo.left,u=n.padInfo.top,d=this.bufferSync(e),A=this.bufferSync(t),h=0;h<s;++h)for(var f=Math.max(0,Math.ceil((u-h)/r)),p=Math.min(n.outHeight,(n.inHeight+u-h)/r),m=0;m<i;++m)for(var g=Math.max(0,Math.ceil((c-m)/a)),x=Math.min(n.outWidth,(n.inWidth+c-m)/a),v=0;v<n.inChannels;++v)for(var y=0;y<n.outChannels;++y){for(var b=0,w=0;w<n.batchSize;++w)for(var N=f;N<p;++N)for(var j=h+N*r-u,C=g;C<x;++C){var B=m+C*a-c;b+=o?d.get(w,j,B,v)*A.get(w,N,C,y):d.get(w,v,j,B)*A.get(w,y,N,C)}l.set(b,h,m,v,y)}return l.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,a=n.strideHeight,s=n.strideWidth,i=n.filterDepth,o=n.filterHeight,l=n.filterWidth,c=Dc(n.filterShape,"float32"),u=c.values,d=c.strides,A=d[0],h=d[1],f=d[2],p=d[3],m=this.readSync(t.dataId),g=t.strides,x=g[0],v=g[1],y=g[2],b=g[3],w=this.readSync(e.dataId),N=e.strides,j=N[0],C=N[1],B=N[2],k=N[3],S=n.padInfo.front,E=n.padInfo.left,F=n.padInfo.top,_=0;_<i;++_)for(var I=Math.max(0,Math.ceil((S-_)/r)),T=Math.min(n.outDepth,(n.inDepth+S-_)/r),D=_*A,L=0;L<o;++L)for(var U=Math.max(0,Math.ceil((F-L)/a)),P=Math.min(n.outHeight,(n.inHeight+F-L)/a),R=L*h+D,O=0;O<l;++O)for(var M=Math.max(0,Math.ceil((E-O)/s)),Q=Math.min(n.outWidth,(n.inWidth+E-O)/s),H=O*f+R,z=0;z<n.inChannels;++z)for(var W=z*p+H,V=0;V<n.outChannels;++V){for(var K=0,G=0;G<n.batchSize;++G)for(var q=G*j,X=G*x,Y=I;Y<T;++Y)for(var J=(_+Y*r-S)*C+q,Z=Y*v+X,$=U;$<P;++$)for(var ee=(L+$*a-F)*B+J,te=$*y+Z,ne=M;ne<Q;++ne){var re=ne*b+te;K+=w[(O+ne*s-E)*k+ee+z]*m[re+V]}u[W+V]=K}return c.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,s=e.activation,i=e.preluActivationWeights,o=this.depthwiseConv2D(t,n,r);return a&&(o=this.add(o,a)),s&&(o=Hg(this,o,s,i)),o},t.prototype.depthwiseConv2D=function(e,t,n){Qg([e,t],"depthwiseConv2D");for(var r=n.filterHeight,a=n.filterWidth,s=n.dilationHeight,i=n.dilationWidth,o=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,u=Dc(n.outShape,e.dtype),d=this.readSync(e.dataId),A=this.readSync(t.dataId),h=u.values,f=0;f<n.batchSize;++f)for(var p=f*e.strides[0],m=f*u.strides[0],g=0;g<n.outHeight;++g)for(var x=m+g*u.strides[1],v=g*n.strideHeight-o,y=0;y<r;++y){var b=v+y*s;if(!(b<0||b>=n.inHeight))for(var w=y*t.strides[0],N=p+b*e.strides[1],j=0;j<n.outWidth;++j)for(var C=x+j*u.strides[2],B=j*n.strideWidth-l,k=0;k<a;++k){var S=B+k*i;if(!(S<0||S>=n.inWidth))for(var E=w+k*t.strides[1],F=N+S*n.inChannels,_=C,I=E,T=0;T<n.inChannels;++T){for(var D=d[F+T],L=0;L<c;++L)h[_+L]+=D*A[I+L];_+=c,I+=c}}}return u.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){Qg([e,t],"depthwiseConv2DDerInput");for(var r=Dc(n.inShape,"float32"),a=r.values,s=r.strides,i=s[0],o=s[1],l=s[2],c=this.readSync(e.dataId),u=e.strides,d=u[0],A=u[1],h=u[2],f=this.readSync(t.dataId),p=t.strides,m=p[0],g=p[1],x=p[2],v=n.batchSize,y=n.filterHeight,b=n.filterWidth,w=n.inChannels,N=n.inHeight,j=n.inWidth,C=n.outChannels,B=n.outHeight,k=n.outWidth,S=n.strideHeight,E=n.strideWidth,F=y-1-n.padInfo.top,_=b-1-n.padInfo.left,I=C/w,T=0;T<v;++T)for(var D=0;D<w;++D)for(var L=0;L<N;++L)for(var U=L-F,P=Math.max(0,Math.ceil(U/S)),R=Math.min(B,(y+U)/S),O=0;O<j;++O){for(var M=O-_,Q=Math.max(0,Math.ceil(M/E)),H=Math.min(k,(b+M)/E),z=0,W=P;W<R;++W)for(var V=W*S-U,K=Q;K<H;++K)for(var G=d*T+A*W+h*K,q=m*(y-1-V)+g*(b-1-(K*E-M))+x*D,X=0;X<I;++X)z+=c[G+(D*I+X)]*f[q+X];a[i*T+o*L+l*O+D]=z}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){Qg([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,a=n.strideWidth,s=n.filterHeight,i=n.filterWidth,o=Dc(n.filterShape,"float32"),l=n.padInfo.left,c=n.padInfo.top,u=n.outChannels/n.inChannels,d=this.bufferSync(e),A=this.bufferSync(t),h=0;h<s;++h)for(var f=Math.max(0,Math.ceil((c-h)/r)),p=Math.min(n.outHeight,(n.inHeight+c-h)/r),m=0;m<i;++m)for(var g=Math.max(0,Math.ceil((l-m)/a)),x=Math.min(n.outWidth,(n.inWidth+l-m)/a),v=0;v<n.outChannels;++v){for(var y=Math.trunc(v/u),b=v%u,w=0,N=0;N<n.batchSize;++N)for(var j=f;j<p;++j)for(var C=h+j*r-c,B=g;B<x;++B){var k=m+B*a-l;w+=d.get(N,C,k,y)*A.get(N,j,B,v)}o.set(w,h,m,y,b)}return o.toTensor()},t.prototype.tile=function(e,t){return Qg(e,"tile"),od(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){Qg(e,"pad");var r=t.map(function(t,n){return t[0]+e.shape[n]+t[1]}),a=t.map(function(e){return e[0]}),s=this.bufferSync(e),i=Dc(r,e.dtype);0!==n&&i.values.fill(n);for(var o=0;o<e.size;o++){var l=s.indexToLoc(o),c=l.map(function(e,t){return e+a[t]});i.set.apply(i,[s.get.apply(s,l)].concat(c))}return i.toTensor()},t.prototype.transpose=function(e,t){Qg(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var a=this.readSync(e.dataId),s=Dc(n,e.dtype),i=this.bufferSync(e);for(r=0;r<e.size;++r){for(var o=i.indexToLoc(r),l=new Array(o.length),c=0;c<l.length;c++)l[c]=o[t[c]];var u=s.locToIndex(l);s.values[u]=a[r]}return s.toTensor()},t.prototype.gather=function(e,t,n){Qg([e,t],"gather");var r=e.shape.slice(),a=this.readSync(t.dataId);r[n]=a.length;for(var s=Dc(r,e.dtype),i=this.bufferSync(e),o=0;o<s.size;++o){var l=s.indexToLoc(o),c=l.slice();c[n]=a[l[n]];var u=i.locToIndex(c);s.values[o]=i.values[u]}return s.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){Qg([e],"batchToSpaceND");var r=t.reduce(function(e,t){return e*t}),a=ou(e.shape,t,r),s=lu(a.length,t.length),i=cu(e.shape,t,r),o=uu(n,t.length),l=du(i,n,t.length);return e.reshape(a).transpose(s).reshape(i).slice(o,l)},t.prototype.spaceToBatchND=function(e,t,n){Qg([e],"spaceToBatchND");var r=t.reduce(function(e,t){return e*t}),a=[[0,0]];a.push.apply(a,n);for(var s=1+t.length;s<e.shape.length;++s)a.push([0,0]);var i=e.pad(a),o=ou(i.shape,t,r,!1),l=lu(o.length,t.length,!1),c=cu(i.shape,t,r,!1);return i.reshape(o).transpose(l).reshape(c)},t.prototype.pool=function(e,t,n){Qg(e,"pool");for(var r=t.strideHeight,a=t.strideWidth,s=t.dilationHeight,i=t.dilationWidth,o=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,u=t.padInfo.left,d="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,A=this.readSync(e.dataId),h=Dc(t.outShape,e.dtype),f=h.values,p=t.outShape[1]*t.outShape[2]*t.outShape[3],m=t.outShape[2]*t.outShape[3],g=t.outShape[3],x=0;x<t.batchSize;++x)for(var v=x*p,y=x*e.strides[0],b=0;b<t.inChannels;++b)for(var w=0;w<t.outHeight;++w)for(var N=w*r-c,j=Math.max(0,N),C=Math.min(t.inHeight,o+N),B=v+w*m,k=0;k<t.outWidth;++k){for(var S=k*a-u,E=Math.max(0,S),F=Math.min(t.inWidth,l+S),_=d,I=0,T=0,D=j;D<C;D+=s){for(var L=y+D*e.strides[1],U=E;U<F;U+=i){var P=A[L+U*e.strides[2]+b];"max"===n&&P>_?_=P:"avg"===n&&(I+=P,T++)}if(isNaN(_))break}f[B+k*g+b]="avg"===n?I/T:_}return h.toTensor()},t.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},t.prototype.maxPoolPositions=function(e,t){for(var n=Dc(t.outShape,"int32"),r=t.strideHeight,a=t.strideWidth,s=t.dilationHeight,i=t.dilationWidth,o=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,u=t.padInfo.left,d=this.bufferSync(e),A=0;A<t.batchSize;++A)for(var h=0;h<t.inChannels;++h)for(var f=0;f<t.outHeight;++f){for(var p=f*r-c,m=p;m<0;)m+=s;for(var g=Math.min(t.inHeight,o+p),x=0;x<t.outWidth;++x){for(var v=x*a-u,y=v;y<0;)y+=i;for(var b=Math.min(t.inWidth,l+v),w=Number.NEGATIVE_INFINITY,N=-1,j=m;j<g;j+=s)for(var C=j-p,B=y;B<b;B+=i){var k=B-v,S=d.get(A,j,B,h);S>w&&(w=S,N=C*l+k)}n.set(N,A,f,x,h)}}return n.toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){Qg([t,n],"maxPoolBackprop");for(var a=this.maxPoolPositions(t,r),s=r.strideHeight,i=r.strideWidth,o=r.dilationHeight,l=r.dilationWidth,c=r.effectiveFilterHeight,u=r.effectiveFilterWidth,d=u-1-r.padInfo.left,A=c-1-r.padInfo.top,h=Dc(t.shape,"float32"),f=this.bufferSync(a),p=this.bufferSync(e),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var x=0;x<r.inHeight;++x)for(var v=0;v<r.inWidth;++v){for(var y=x-A,b=v-d,w=0,N=0;N<c;N+=o){var j=(y+N)/s;if(!(j<0||j>=r.outHeight||Math.floor(j)!==j))for(var C=0;C<u;C+=l){var B=(b+C)/i;if(!(B<0||B>=r.outWidth||Math.floor(B)!==B)){var k=c*u-1-f.get(m,j,B,g)===N*u+C?1:0;0!==k&&(w+=p.get(m,j,B,g)*k)}}}h.set(w,m,x,v,g)}return h.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){Qg([e,t],"avgPoolBackprop");for(var r=n.strideHeight,a=n.strideWidth,s=n.filterHeight,i=n.filterWidth,o=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterHeight,u=n.effectiveFilterWidth,d=u-1-n.padInfo.left,A=c-1-n.padInfo.top,h=Dc(t.shape,"float32"),f=1/(s*i),p=this.bufferSync(e),m=0;m<n.batchSize;++m)for(var g=0;g<n.inChannels;++g)for(var x=0;x<n.inHeight;++x)for(var v=0;v<n.inWidth;++v){for(var y=x-A,b=v-d,w=0,N=0;N<c;N+=o){var j=(y+N)/r;if(!(j<0||j>=n.outHeight||Math.floor(j)!==j))for(var C=0;C<u;C+=l){var B=(b+C)/a;B<0||B>=n.outWidth||Math.floor(B)!==B||(w+=p.get(m,j,B,g))}}h.set(w*f,m,x,v,g)}return h.toTensor()},t.prototype.pool3d=function(e,t,n){Qg(e,"pool3d");for(var r=t.strideDepth,a=t.strideHeight,s=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,d=t.effectiveFilterWidth,A=t.padInfo.front,h=t.padInfo.top,f=t.padInfo.left,p="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=this.readSync(e.dataId),g=Dc(t.outShape,e.dtype),x=g.values,v=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],y=t.outShape[2]*t.outShape[3]*t.outShape[4],b=t.outShape[3]*t.outShape[4],w=t.outShape[4],N=0;N<t.batchSize;++N)for(var j=N*v,C=N*e.strides[0],B=0;B<t.inChannels;++B)for(var k=0;k<t.outDepth;++k){for(var S=k*r-A,E=S;E<0;)E+=i;for(var F=Math.min(t.inDepth,c+S),_=j+k*y,I=0;I<t.outHeight;++I){for(var T=I*a-h,D=T;D<0;)D+=o;for(var L=Math.min(t.inHeight,u+T),U=_+I*b,P=0;P<t.outWidth;++P){for(var R=P*s-f,O=R;O<0;)O+=l;for(var M=Math.min(t.inWidth,d+R),Q=U+P*w,H=p,z=0,W=0,V=E;V<F;V+=i){for(var K=C+V*e.strides[1],G=D;G<L;G+=o){for(var q=K+G*e.strides[2],X=O;X<M;X+=l){var Y=m[q+X*e.strides[3]+B];if("max"===n&&Y>H?H=Y:"avg"===n&&(z+=Y,W++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}x[Q+B]="avg"===n?z/W:H}}}return g.toTensor()},t.prototype.avgPool3d=function(e,t){return Qg(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){Qg([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,a=n.strideHeight,s=n.strideWidth,i=n.filterDepth,o=n.filterHeight,l=n.filterWidth,c=n.dilationDepth,u=n.dilationHeight,d=n.dilationWidth,A=n.effectiveFilterDepth,h=n.effectiveFilterHeight,f=n.effectiveFilterWidth,p=A-1-n.padInfo.front,m=f-1-n.padInfo.left,g=h-1-n.padInfo.top,x=Dc(t.shape,"float32"),v=1/(i*o*l),y=this.bufferSync(e),b=0;b<n.batchSize;++b)for(var w=0;w<n.inChannels;++w)for(var N=0;N<n.inDepth;++N)for(var j=0;j<n.inHeight;++j)for(var C=0;C<n.inWidth;++C){for(var B=N-p,k=j-g,S=C-m,E=0,F=0;F<A;F+=c){var _=(B+F)/r;if(!(_<0||_>=n.outDepth||Math.floor(_)!==_))for(var I=0;I<h;I+=u){var T=(k+I)/a;if(!(T<0||T>=n.outHeight||Math.floor(T)!==T))for(var D=0;D<f;D+=d){var L=(S+D)/s;L<0||L>=n.outWidth||Math.floor(L)!==L||(E+=y.get(b,_,T,L,w))}}}x.set(E*v,b,N,j,C,w)}return x.toTensor()},t.prototype.maxPool3d=function(e,t){return Qg(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=Dc(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,s=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,d=t.effectiveFilterWidth,A=t.padInfo.front,h=t.padInfo.top,f=t.padInfo.left,p=this.bufferSync(e),m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var x=0;x<t.outDepth;++x){for(var v=x*r-A,y=v;y<0;)y+=i;for(var b=Math.min(t.inDepth,c+v),w=0;w<t.outHeight;++w){for(var N=w*a-h,j=N;j<0;)j+=o;for(var C=Math.min(t.inHeight,u+N),B=0;B<t.outWidth;++B){for(var k=B*s-f,S=k;S<0;)S+=l;for(var E=Math.min(t.inWidth,d+k),F=Number.NEGATIVE_INFINITY,_=-1,I=y;I<b;I+=i)for(var T=I-v,D=j;D<C;D+=o)for(var L=D-N,U=S;U<E;U+=l){var P=U-k,R=p.get(m,I,D,U,g);R>=F&&(F=R,_=T*u*d+L*u+P)}n.set(_,m,x,w,B,g)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){Qg([t,n],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(t,r),s=r.strideDepth,i=r.strideHeight,o=r.strideWidth,l=r.dilationDepth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterDepth,A=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=d-1-r.padInfo.front,p=h-1-r.padInfo.left,m=A-1-r.padInfo.top,g=Dc(t.shape,"float32"),x=this.bufferSync(a),v=this.bufferSync(e),y=0;y<r.batchSize;++y)for(var b=0;b<r.inChannels;++b)for(var w=0;w<r.inDepth;++w)for(var N=0;N<r.inHeight;++N)for(var j=0;j<r.inWidth;++j){for(var C=w-f,B=N-m,k=j-p,S=0,E=0;E<d;E+=l){var F=(C+E)/s;if(!(F<0||F>=r.outDepth||Math.floor(F)!==F))for(var _=0;_<A;_+=c){var I=(B+_)/i;if(!(I<0||I>=r.outHeight||Math.floor(I)!==I))for(var T=0;T<h;T+=u){var D=(k+T)/o;if(!(D<0||D>=r.outWidth||Math.floor(D)!==D)){var L=d*A*h-1-x.get(y,F,I,D,b)===E*A*h+_*h+T?1:0;0!==L&&(S+=v.get(y,F,I,D,b)*L)}}}}g.set(S,y,w,N,j,b)}return g.toTensor()},t.prototype.cast=function(e,t){return Vu(e,t,this)},t.prototype.reshape=function(e,t){return Ku(e,t)},t.prototype.avgPool=function(e,t){return Qg(e,"avgPool"),this.pool(e,t,"avg").toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){Qg(e,"resizeBilinear");for(var a=e.shape,s=a[0],i=a[1],o=a[2],l=a[3],c=this.readSync(e.dataId),u=new Float32Array(Ni([s,t,n,l])),d=[r&&t>1?i-1:i,r&&n>1?o-1:o],A=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=0,f=d[0]/A[0],p=d[1]/A[1],m=0;m<s;m++)for(var g=0;g<t;g++)for(var x=f*g,v=Math.floor(x),y=x-v,b=Math.min(i-1,Math.ceil(x)),w=m*e.strides[0]+v*e.strides[1],N=m*e.strides[0]+b*e.strides[1],j=0;j<n;j++)for(var C=p*j,B=Math.floor(C),k=C-B,S=Math.min(o-1,Math.ceil(C)),E=w+B*e.strides[2],F=N+B*e.strides[2],_=w+S*e.strides[2],I=N+S*e.strides[2],T=0;T<l;T++){var D=c[E+T],L=c[F+T],U=D+(c[_+T]-D)*k,P=U+(L+(c[I+T]-L)*k-U)*y;u[h++]=P}return rc(u,[s,t,n,l])},t.prototype.resizeBilinearBackprop=function(e,t,n){Qg([e,t],"resizeBilinearBackprop");for(var r=t.shape,a=r[0],s=r[1],i=r[2],o=r[3],l=e.shape,c=l[1],u=l[2],d=new Float32Array(a*s*i*o),A=[n&&c>1?s-1:s,n&&u>1?i-1:i],h=[n&&c>1?c-1:c,n&&u>1?u-1:u],f=A[0]/h[0],p=A[1]/h[1],m=this.readSync(e.dataId),g=0,x=0;x<a;x++)for(var v=x*t.strides[0],y=0;y<c;y++)for(var b=y*f,w=Math.floor(b),N=Math.min(Math.ceil(b),s-1),j=v+w*t.strides[1],C=v+N*t.strides[1],B=b-w,k=1-B,S=0;S<u;S++)for(var E=S*p,F=Math.floor(E),_=Math.min(Math.ceil(E),i-1),I=E-F,T=1-I,D=j+F*t.strides[2],L=j+_*t.strides[2],U=C+F*t.strides[2],P=C+_*t.strides[2],R=k*T,O=k*I,M=B*T,Q=B*I,H=0;H<o;H++){var z=m[g++];d[D+H]+=z*R,d[L+H]+=z*O,d[U+H]+=z*M,d[P+H]+=z*Q}return cc(d,[a,i,s,o],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){Qg(e,"resizeNearestNeighbor");for(var a=e.shape,s=a[0],i=a[1],o=a[2],l=a[3],c=this.readSync(e.dataId),u=new Float32Array(s*t*n*l),d=[r&&t>1?i-1:i,r&&n>1?o-1:o],A=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=d[0]/A[0],f=d[1]/A[1],p=0,m=0;m<s;m++)for(var g=m*e.strides[0],x=0;x<t;x++)for(var v=h*x,y=g+Math.min(i-1,r?Math.round(v):Math.floor(v))*e.strides[1],b=0;b<n;b++)for(var w=f*b,N=y+Math.min(o-1,r?Math.round(w):Math.floor(w))*e.strides[2],j=0;j<l;j++){var C=c[N+j];u[p++]=C}return rc(u,[s,t,n,l],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){Qg([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,a=r[0],s=r[1],i=r[2],o=r[3],l=e.shape,c=l[1],u=l[2],d=new Float32Array(a*s*i*o),A=this.readSync(e.dataId),h=[n&&c>1?s-1:s,n&&u>1?i-1:i],f=[n&&c>1?c-1:c,n&&u>1?u-1:u],p=h[0]/f[0],m=h[1]/f[1],g=1/p,x=1/m,v=2*Math.ceil(g)+2,y=2*Math.ceil(x)+2,b=0;b<a;b++)for(var w=b*t.strides[0],N=0;N<s;N++)for(var j=w+N*t.strides[1],C=Math.floor(N*g),B=Math.floor(C-v/2),k=0;k<i;k++)for(var S=j+k*t.strides[2],E=Math.floor(k*x),F=Math.floor(E-y/2),_=0;_<o;_++){for(var I=0,T=0;T<v;T++){var D=T+B;if(!(D<0||D>=c)){var L=w+D*e.strides[1],U=D*p;if(N===Math.min(s-1,n?Math.round(U):Math.floor(U)))for(var P=0;P<y;P++){var R=P+F;if(!(R<0||R>=u)){var O=L+R*e.strides[2],M=R*m;k===Math.min(i-1,n?Math.round(M):Math.floor(M))&&(I+=A[O+_])}}}}d[S+_]=I}return cc(d,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,a,s){Qg([e,t,n,a,s],"batchNorm");for(var i=this.readSync(e.dataId),o=this.readSync(t.dataId),l=this.readSync(n.dataId),c=a?this.readSync(a.dataId):new Float32Array([1]),u=s?this.readSync(s.dataId):new Float32Array([0]),d=new Float32Array(i.length),A=u.length,h=c.length,f=l.length,p=o.length,m=0,g=0,x=0,v=0,y=0;y<i.length;++y)d[y]=u[m++]+(i[y]-o[g++])*c[x++]/Math.sqrt(l[v++]+r),m>=A&&(m=0),g>=p&&(g=0),x>=h&&(x=0),v>=f&&(v=0);return cc(d,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,a){Qg(e,"localResponseNormalization4D");var s=e.shape[3],i=s-1,o=this.readSync(e.dataId),l=e.size,c=new Float32Array(l);function u(e){for(var n=e%s,r=e-n+Math.max(0,n-t),a=e-n+Math.min(n+t,i),l=0;r<=a;r++){var c=o[r];l+=c*c}return l}for(var d=0;d<l;d++){var A=u(d),h=o[d]*Math.pow(n+r*A,-a);c[d]=h}return cc(c,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,a,s,i){Qg(e,"LRNGrad");for(var o=e.shape[3],l=this.readSync(e.dataId),c=this.readSync(t.dataId),u=this.readSync(n.dataId),d=new Float32Array(e.size),A=e.size,h=0;h<A;h++){for(var f=h%o,p=h-f+Math.max(0,f-r),m=h-f+Math.min(o,f+r+1),g=0,x=p;x<m;x++)g+=Math.pow(c[x],2);for(g=s*g+a,x=p;x<m;x++){var v=-2*s*i*c[x]*u[h]/g;h===x&&(v+=Math.pow(g,-i)),v*=l[h],d[x]+=v}}return cc(d,e.shape)},t.prototype.multinomial=function(e,t,n,r){Qg(e,"multinomial");for(var a=t?e:Cu(e),s=a.shape[0],i=a.shape[1],o=dc([s,n],"int32"),l=this.readSync(o.dataId),c=this.readSync(a.dataId),u=0;u<s;++u){var d=u*i,A=new Float32Array(i-1);A[0]=c[d];for(var h=1;h<A.length;++h)A[h]=A[h-1]+c[d+h];for(var f=Fc(r.toString()),p=u*n,m=0;m<n;++m){var g=f();l[p+m]=A.length;for(var x=0;x<A.length;x++)if(g<A[x]){l[p+m]=x;break}}}return o},t.prototype.oneHot=function(e,t,n,r){Qg(e,"oneHot");var a=new Float32Array(e.size*t);a.fill(r);for(var s=this.readSync(e.dataId),i=0;i<e.size;++i)s[i]>=0&&s[i]<t&&(a[i*t+s[i]]=n);return oc(a,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,a){return Qg(e,"nonMaxSuppression"),ed(this.readSync(e.dataId),this.readSync(t.dataId),n,r,a)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],a=Dc(e.shape,"float32"),s=Dc(e.shape,"float32"),i=tc(e).as2D(n,r),o=nc(e).as2D(n,r),l=0;l<n;l++)for(var c=i.slice([l,0],[1,r]),u=o.slice([l,0],[1,r]),d=ec(c,u),A=this.readSync(this.fftImpl(d,t).dataId),h=0;h<r;h++){var f=Xu(A,h);a.values[l*r+h]=f.real,s.values[l*r+h]=f.imag}return ec(a.toTensor(),s.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var a=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(a=ec(tc(a).div(sc(r)),nc(a).div(sc(r)))),a}var s=this.readSync(e.dataId),i=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(s,r,t));return ec(i.real,i.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),a=t/2,s=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(r),i=ec(s.real,s.imag).as1D(),o=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(r),l=ec(o.real,o.imag).as1D();i=this.fftRadix2(i,a,n),l=this.fftRadix2(l,a,n);var c=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var s=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(s),r[a]=Math.sin(s)}return{real:n,imag:r}}(t,n),u=ec(c.real,c.imag).mul(l),d=i.add(u),A=i.sub(u),h=tc(d).concat(tc(A)),f=nc(d).concat(nc(A));return ec(h,f).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var s=0,i=0,o=0;o<t;o++){var l=Ju(a*o,t,n),c=Xu(e,o);s+=c.real*l.real-c.imag*l.imag,i+=c.real*l.imag+c.imag*l.real}n&&(s/=t,i/=t),Yu(r,s,i,a)}return r},t.prototype.depthToSpace=function(e,t,n){vi("NHWC"===n,function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n}),vi(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t});for(var r=e.shape[0],a=e.shape[1],s=e.shape[2],i=e.shape[3],o=a*t,l=s*t,c=i/(t*t),u=this.readSync(e.dataId),d=new Float32Array(r*o*l*c),A=0,h=0;h<r;++h)for(var f=0;f<o;++f)for(var p=Math.floor(f/t),m=f%t,g=0;g<l;++g)for(var x=Math.floor(g/t),v=(m*t+g%t)*c,y=0;y<c;++y){var b=y+v+i*(x+s*(p+a*h));d[A++]=u[b]}return cc(d,[r,o,l,c])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var a=Iu(e.shape,t.shape),s=Dc(a,n),i=this.readSync(e.dataId),o=this.readSync(t.dataId),l=Fu(e.shape,a),c=Fu(t.shape,a),u=s.values;if(l.length+c.length===0)for(var d=0;d<u.length;++d)u[d]=r(i[d%i.length],o[d%o.length]);else{var A=this.bufferSync(e),h=this.bufferSync(t),f=function(n){var a=s.indexToLoc(n),d=a.slice(-e.rank);l.forEach(function(e){return d[e]=0});var f=A.locToIndex(d),p=a.slice(-t.rank);c.forEach(function(e){return p[e]=0});var m=h.locToIndex(p);u[n]=r(i[f],o[m])};for(d=0;d<u.length;++d)f(d)}return s.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=Iu(e.shape,t.shape),a=Dc(r,"float32"),s=Dc(r,"float32"),i=this.readSync(e.dataId),o=this.readSync(t.dataId),l=Fu(e.shape,r),c=Fu(t.shape,r),u=a.values,d=s.values;if(l.length+c.length===0)for(var A=0;A<u.length;A++){var h=A%i.length,f=A%o.length,p=n(i[2*h],i[2*h+1],o[2*f],o[2*f+1]);u[A]=p.real,d[A]=p.imag}else{var m=this.bufferSync(this.data.get(e.dataId).complexTensors.real),g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),x=function(r){var s=a.indexToLoc(r),A=s.slice(-e.rank);l.forEach(function(e){return A[e]=0});var h=m.locToIndex(A),f=s.slice(-t.rank);c.forEach(function(e){return f[e]=0});var p=g.locToIndex(f),x=n(i[2*h],i[2*h+1],o[2*p],o[2*p+1]);u[r]=x.real,d[r]=x.imag};for(A=0;A<u.length;A++)x(A)}return this.complex(a.toTensor(),s.toTensor())},t.prototype.split=function(e,t,n){return id(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,a,s){for(var i=e.shape,o=i[0],l=i[1],c=i[2],u=i[3],d=t.shape[0],A=r[0],h=r[1],f=Dc([d,A,h,u],"float32"),p=this.readSync(t.dataId),m=this.readSync(n.dataId),g=this.readSync(e.dataId),x=e.strides,v=f.strides,y=0;y<d;y++){var b=4*y,w=p[b],N=p[b+1],j=p[b+2],C=p[b+3],B=m[y];if(!(B>=o))for(var k=A>1?(j-w)*(l-1)/(A-1):0,S=h>1?(C-N)*(c-1)/(h-1):0,E=0;E<A;E++){var F=A>1?w*(l-1)+E*k:.5*(w+j)*(l-1);if(F<0||F>l-1)for(var _=0;_<h;_++)for(var I=0;I<u;I++){var T=I+_*v[2]+E*v[1]+y*v[0];f.values[T]=s}else if("bilinear"===a){var D=Math.floor(F),L=Math.ceil(F),U=F-D;for(_=0;_<h;_++)if((V=h>1?N*(c-1)+_*S:.5*(N+C)*(c-1))<0||V>c-1)for(I=0;I<u;I++)T=I+_*v[2]+E*v[1]+y*v[0],f.values[T]=s;else{var P=Math.floor(V),R=Math.ceil(V),O=V-P;for(I=0;I<u;I++){var M=g[T=I+P*x[2]+D*x[1]+B*x[0]],Q=g[T=I+R*x[2]+D*x[1]+B*x[0]],H=g[T=I+P*x[2]+L*x[1]+B*x[0]],z=M+(Q-M)*O,W=H+(g[T=I+R*x[2]+L*x[1]+B*x[0]]-H)*O;T=I+_*v[2]+E*v[1]+y*v[0],f.values[T]=z+(W-z)*U}}}else for(_=0;_<h;++_){var V;if((V=h>1?N*(c-1)+_*S:.5*(N+C)*(c-1))<0||V>c-1)for(I=0;I<u;I++)T=I+_*v[2]+E*v[1]+y*v[0],f.values[T]=s;else{var K=Math.round(V),G=Math.round(F);for(I=0;I<u;I++){var q=I+K*x[2]+G*x[1]+B*x[0],X=I+_*v[2]+E*v[1]+y*v[0];f.values[X]=g[q]}}}}}return f.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var a=mu(0,e,n),s=a.sliceRank,i=a.numUpdates,o=a.sliceSize,l=a.strides,c=a.outputSize;return this.scatter(e,t,n,c,o,i,s,l,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],a=Au(e,t),s=a[0],i=a[1],o=a[2],l=a[3];if(0===i)return rc([],s,e.dtype);for(var c=new co([i,o],e.dtype),u=this.readSync(t.dataId),d=this.readSync(e.dataId),A=0;A<i;A++){for(var h=[],f=0,p=0;p<r;p++){var m=u[A*r+p];f+=m*l[p],h.push(m)}if(f<0||f>=e.size/o)throw new Error("Invalid indices: "+h+" does not index into "+e.shape);for(var g=0;g<o;g++)c.values[A*o+g]=d[f*o+g]}return c.toTensor().reshape(s)},t.prototype.scatterND=function(e,t,n){var r=mu(0,e,n),a=r.sliceRank,s=r.numUpdates,i=r.sliceSize,o=r.strides,l=r.outputSize,c=sc(0);return this.scatter(e,t,n,l,i,s,a,o,c,!0)},t.prototype.fill=function(e,t,n){var r=Di(n=n||Wi(t),Ni(e));return r.fill(t),Fo.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=Di(e.dtype,Ni(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return Gu(e,t,n)},t.prototype.scatter=function(e,t,n,r,a,s,i,o,l,c){var u=[r/a,a],d=this.readSync(e.dataId),A=this.readSync(t.dataId);if(0===r)return rc([],n,t.dtype);var h=new co(u,t.dtype);h.values.fill(this.readSync(l.dataId)[0]);for(var f=0;f<s;f++){for(var p=[],m=0,g=0;g<i;g++){var x=d[f*i+g];p.push(x),m+=x*o[g]}if(m<0||m>=r/a)throw new Error("Invalid indices: "+p+" does not index into "+n);for(var v=0;v<a;v++)c?h.values[m*a+v]+=A[f*a+v]:h.values[m*a+v]=0===t.rank?A[0]:A[f*a+v]}return h.toTensor().reshape(n)},t}(Su);Fo.registerBackend("cpu",function(){return new zg},1);for(var Wg=0,Vg=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t,s=a.boxes,i=a.scores,o=r,l=o.maxOutputSize,c=o.iouThreshold,u=o.scoreThreshold,d=o.softNmsSigma,A=n;Qg(s,"NonMaxSuppressionWithScore");var h=td(A.data.get(s.dataId).values,A.data.get(i.dataId).values,l,c,u,d);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;Qg(r,"square");for(var s=a.data.get(r.dataId).values,i=new Float32Array(s.length),o=0;o<s.length;++o){var l=s[o];i[o]=l*l}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:tf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,s=r.b,i=n;Qg([a,s],tf);var o=i.data.get(a.dataId).values,l=i.data.get(s.dataId).values,c=function(e,t,n,r,a,s){var i=Iu(e,t),o=i.length,l=Gi(i),c=Ti(a,Ni(i)),u=e.length,d=t.length,A=Gi(e),h=Gi(t),f=Fu(e,i),p=Fu(t,i);if(f.length+p.length===0)for(var m=0;m<c.length;++m)c[m]=s(n[m%n.length],r[m%r.length]);else{var g=function(e){var t=ro(e,o,l),a=t.slice(-u);f.forEach(function(e){return a[e]=0});var i=no(a,u,A),m=t.slice(-d);p.forEach(function(e){return m[e]=0});var g=no(m,d,h);c[e]=s(n[i],r[g])};for(m=0;m<c.length;++m)g(m)}return[c,i]}(a.shape,s.shape,o,l,a.dtype,function(e,t){var n=e-t;return n*n}),u=c[0],d=c[1];return{dataId:i.write(u,d,a.dtype),shape:d,dtype:a.dtype}}}];Wg<Vg.length;Wg++)Ai(Vg[Wg]);for(var Kg,Gg=function(e){this.variableNames=["A"];var t=pd(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},qg=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=pd(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},Xg=0,Yg=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,s=r.numChannels,i="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,o="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,l=i?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=l[0],u=l[1],d=[u,c],A=[u,c,s];(o||i)&&(null==Kg&&(Kg=document.createElement("canvas").getContext("2d")),Kg.canvas.width=c,Kg.canvas.height=u,Kg.drawImage(a,0,0,c,u),a=Kg.canvas);var h=n.makeTensorInfo(d,"int32");n.texData.get(h.dataId).usage=Do.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),a);var f=ii().getBool("WEBGL_PACK")?new qg(A):new Gg(A),p=n.runWebGLProgram(f,[h],"int32");return n.disposeData(h.dataId),p}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;Rl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=t,s=a.boxes,i=a.scores,o=r,l=o.maxOutputSize,c=o.iouThreshold,u=o.scoreThreshold,d=o.softNmsSigma,A=n,h=td(A.readSync(s.dataId),A.readSync(i.dataId),l,c,u,d);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n,s=new Ch(r.shape,"return x * x;");return a.runWebGLProgram(s,[r],r.dtype)}},{kernelName:tf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,s=r.b,i=n,o=ii().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zd("return (a - b) * (a - b);",a.shape,s.shape):new Qd("return (a - b) * (a - b);",a.shape,s.shape);return i.compileAndRun(o,[a,s])}}];Xg<Yg.length;Xg++)Ai(Yg[Xg]);for(var Jg=0,Zg=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:tf,gradFunc:function(e,t){var n=t[0],r=t[1],a=sc(2);return{a:function(){return xp(e,xp(a,Np(n,r)))},b:function(){return xp(e,xp(a,Np(r,n)))}}}}];Jg<Zg.length;Jg++)hi(Zg[Jg]);var $g=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();ii().get("IS_BROWSER")&&ii().setPlatform("browser",new $g);var ex,tx=function(){function e(){this.util=n(745),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=ii().global.fetch?ii().global.fetch(e,t):(null==ex&&(ex=n(7318)),ex(e,t))},e.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();ii().get("IS_NODE")&&ii().setPlatform("node",new tx);var nx={float32:4,int32:4,uint16:2,uint8:1,bool:1};function rx(e,t){for(var n={},r=0,a=function(t){var a=t.name,s=t.dtype,i=t.shape,o=Ni(i),l=void 0;if("quantization"in t){var c=t.quantization;if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var u=nx[c.dtype],d=e.slice(r,r+o*u),A="uint8"===c.dtype?new Uint8Array(d):new Uint16Array(d);if("float32"===s)l=Float32Array.from(A,function(e){return e*c.scale+c.min});else{if("int32"!==s)throw new Error("Unsupported dtype in weight '"+a+"': "+s);l=Int32Array.from(A,function(e){return Math.round(e*c.scale+c.min)})}r+=o*u}else if("string"===s){var h=Ni(t.shape);l=[];for(var f=0;f<h;f++){var p=new Uint32Array(e.slice(r,r+4))[0];r+=4;var m=new Uint8Array(e.slice(r,r+p));l.push(m),r+=p}}else{var g=nx[s];if(d=e.slice(r,r+o*g),"float32"===s)l=new Float32Array(d);else if("int32"===s)l=new Int32Array(d);else{if("bool"!==s)throw new Error("Unsupported dtype in weight '"+a+"': "+s);l=new Uint8Array(d)}r+=o*g}n[a]=rc(l,i,s)},s=0,i=t;s<i.length;s++)a(i[s]);return n}function ax(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach(function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)});var r=new Uint8Array(t),a=0;return n.forEach(function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength}),r.buffer}var sx="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function ix(e){return sx?Buffer.byteLength(e):new Blob([e]).size}function ox(e){var t=0;e.forEach(function(e){t+=e.byteLength});var n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function lx(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function cx(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:ix(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:ix(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var ux=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(e){var n=e(t,r);null!==n&&a.push(n)}),a},e}(),dx="://",Ax=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){vi(null!=t,function(){return"scheme must not be undefined or null."}),t.endsWith(dx)&&(t=t.slice(0,t.indexOf(dx))),vi(t.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();vi(null==r.managers[t],function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function hx(e){if(-1===e.indexOf(dx))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Ax.getSchemes().join(","));return{scheme:e.split(dx)[0],path:e.split(dx)[1]}}function fx(e,t,n){return void 0===n&&(n=!1),ri(this,void 0,void 0,function(){var r,a,s,i,o,l,c,u,d;return ai(this,function(A){switch(A.label){case 0:return vi(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),vi((r=ux.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),vi(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),a=r[0],vi((s=ux.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),vi(s.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),i=s[0],o=hx(e).scheme,l=hx(e).path,c=o===hx(e).scheme,[4,a.load()];case 1:return u=A.sent(),n&&c?[4,Ax.getManager(o).removeModel(l)]:[3,3];case 2:A.sent(),A.label=3;case 3:return[4,i.save(u)];case 4:return d=A.sent(),!n||c?[3,6]:[4,Ax.getManager(o).removeModel(l)];case 5:A.sent(),A.label=6;case 6:return[2,d.modelArtifactsInfo]}})})}var px="models_store",mx="model_info_store";function gx(){if(!ii().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function xx(e){var t=e.result;t.createObjectStore(px,{keyPath:"modelPath"}),t.createObjectStore(mx,{keyPath:"modelPath"})}var vx=function(){function e(e){if(this.indexedDB=gx(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return ri(this,void 0,void 0,function(){return ai(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},e.prototype.load=function(){return ri(this,void 0,void 0,function(){return ai(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(e,t){var n=this;return new Promise(function(e,r){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return xx(a)},a.onsuccess=function(){var s=a.result;if(null==t){var i=s.transaction(px,"readonly"),o=i.objectStore(px).get(n.modelPath);o.onsuccess=function(){if(null==o.result)return s.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(o.result.modelArtifacts)},o.onerror=function(e){return s.close(),r(o.error)},i.oncomplete=function(){return s.close()}}else{var l,c=cx(t),u=s.transaction(mx,"readwrite"),d=u.objectStore(mx),A=d.put({modelPath:n.modelPath,modelArtifactsInfo:c});A.onsuccess=function(){var a=(l=s.transaction(px,"readwrite")).objectStore(px).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(d=u.objectStore(mx)).delete(n.modelPath);t.onsuccess=function(){return s.close(),r(a.error)},t.onerror=function(e){return s.close(),r(a.error)}}},A.onerror=function(e){return s.close(),r(A.error)},u.oncomplete=function(){null==l?s.close():l.oncomplete=function(){return s.close()}}}},a.onerror=function(e){return r(a.error)}})},e.URL_SCHEME="indexeddb://",e}(),yx=function(e){return ii().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(vx.URL_SCHEME)?(t=e.slice(vx.URL_SCHEME.length),new vx(t)):null;var t};ux.registerSaveRouter(yx),ux.registerLoadRouter(yx);var bx=function(){function e(){this.indexedDB=gx()}return e.prototype.listModels=function(){return ri(this,void 0,void 0,function(){var e=this;return ai(this,function(t){return[2,new Promise(function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return xx(r)},r.onsuccess=function(){var e=r.result,a=e.transaction(mx,"readonly"),s=a.objectStore(mx).getAll();s.onsuccess=function(){for(var e={},n=0,r=s.result;n<r.length;n++){var a=r[n];e[a.modelPath]=a.modelArtifactsInfo}t(e)},s.onerror=function(t){return e.close(),n(s.error)},a.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}})]})})},e.prototype.removeModel=function(e){return ri(this,void 0,void 0,function(){var t=this;return ai(this,function(n){var r;return e=(r=e).startsWith(vx.URL_SCHEME)?r.slice(vx.URL_SCHEME.length):r,[2,new Promise(function(n,r){var a=t.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return xx(a)},a.onsuccess=function(){var t,s=a.result,i=s.transaction(mx,"readwrite"),o=i.objectStore(mx),l=o.get(e);l.onsuccess=function(){if(null==l.result)return s.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var a=o.delete(e),i=function(){var a=(t=s.transaction(px,"readwrite")).objectStore(px).delete(e);a.onsuccess=function(){return n(l.result.modelArtifactsInfo)},a.onerror=function(e){return r(l.error)}};a.onsuccess=i,a.onerror=function(e){return i(),s.close(),r(l.error)}},l.onerror=function(e){return s.close(),r(l.error)},i.oncomplete=function(){null==t?s.close():t.oncomplete=function(){return s.close()}}},a.onerror=function(e){return r(a.error)}})]})})},e}();if(ii().getBool("IS_BROWSER"))try{Ax.registerManager(vx.URL_SCHEME,new bx)}catch(ti){}var wx="/",Nx="tensorflowjs_models",jx="info",Cx="model_topology",Bx="weight_specs",kx="weight_data",Sx="model_metadata";function Ex(e){return{info:[Nx,e,jx].join(wx),topology:[Nx,e,Cx].join(wx),weightSpecs:[Nx,e,Bx].join(wx),weightData:[Nx,e,kx].join(wx),modelMetadata:[Nx,e,Sx].join(wx)}}function Fx(e){var t=e.split(wx);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(wx)}var _x=function(){function e(e){if(!ii().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Ex(this.modelPath)}return e.prototype.save=function(e){return ri(this,void 0,void 0,function(){var t,n,r;return ai(this,function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=cx(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(sx)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}})})},e.prototype.load=function(){return ri(this,void 0,void 0,function(){var e,t,n,r,a,s,i;return ai(this,function(o){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(a=this.LS.getItem(this.keys.modelMetadata))&&(s=JSON.parse(a),t.format=s.format,t.generatedBy=s.generatedBy,t.convertedBy=s.convertedBy,t.userDefinedMetadata=s.userDefinedMetadata),null==(i=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(sx){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}(i),[2,t]})})},e.URL_SCHEME="localstorage://",e}(),Ix=function(e){return ii().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(_x.URL_SCHEME)?(t=e.slice(_x.URL_SCHEME.length),new _x(t)):null;var t};ux.registerSaveRouter(Ix),ux.registerLoadRouter(Ix);var Tx=function(){function e(){vi(ii().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),vi("undefined"==typeof window||void 0!==window.localStorage,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return ri(this,void 0,void 0,function(){var e,t,n,r,a,s;return ai(this,function(i){for(e={},t=Nx+wx,n=wx+jx,r=0;r<this.LS.length;++r)(a=this.LS.key(r)).startsWith(t)&&a.endsWith(n)&&(s=Fx(a),e[s]=JSON.parse(this.LS.getItem(a)));return[2,e]})})},e.prototype.removeModel=function(e){return ri(this,void 0,void 0,function(){var t,n;return ai(this,function(r){var a;if(e=(a=e).startsWith(_x.URL_SCHEME)?a.slice(_x.URL_SCHEME.length):a,t=Ex(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]})})},e}();if(ii().getBool("IS_BROWSER"))try{Ax.registerManager(_x.URL_SCHEME,new Tx)}catch(ti){}function Dx(e){return new Promise(function(e){return setTimeout(e)}).then(e)}var Lx=function(){function e(t){if(!ii().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return ri(this,void 0,void 0,function(){var t,n,r,a,s,i;return ai(this,function(o){switch(o.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},a=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(s=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,s.href=a,[4,Dx(function(){return s.dispatchEvent(new MouseEvent("click"))})];case 2:return o.sent(),null==e.weightData?[3,4]:((i=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,i.href=t,[4,Dx(function(){return i.dispatchEvent(new MouseEvent("click"))})]);case 3:o.sent(),o.label=4;case 4:return[2,{modelArtifactsInfo:cx(e)}]}})})},e.URL_SCHEME="downloads://",e}(),Ux=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return ri(this,void 0,void 0,function(){var e,t,n=this;return ai(this,function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(r,a){var s=new FileReader;s.onload=function(s){var i=JSON.parse(s.target.result),o=i.modelTopology;if(null!=o){0===t.length&&r({modelTopology:o});var l=i.weightsManifest;if(null!=l){var c;try{c=n.checkManifestAndWeightFiles(l,t)}catch(e){return void a(e)}var u=[],d=[],A=[];l.forEach(function(e){e.paths.forEach(function(e){d.push(e),A.push(null)}),u.push.apply(u,e.weights)}),l.forEach(function(e){e.paths.forEach(function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,a=d.indexOf(e);A[a]=n,-1===A.indexOf(null)&&r({modelTopology:o,weightSpecs:u,weightData:ox(A),format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy,userDefinedMetadata:i.userDefinedMetadata})},t.onerror=function(t){return a("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(c[e])})})}else a(new Error("weightManifest field is missing from file "+e.name))}else a(new Error("modelTopology field is missing from file "+e.name))},s.onerror=function(t){return a("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(e)})]})})},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map(function(e){return lx(e.name)}),a={},s=0,i=e;s<i.length;s++)i[s].paths.forEach(function(e){var s=lx(e);if(-1!==n.indexOf(s))throw new Error("Duplicate file basename found in weights manifest: '"+s+"'");if(n.push(s),-1===r.indexOf(s))throw new Error("Weight file with basename '"+s+"' is not provided.");a[e]=t[r.indexOf(s)]});if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return a},e}();function Px(e,t,n,r){!function(e){vi(null!=e&&Array.isArray(e)&&e.length>0,function(){return"promises must be a none empty array"})}(e),function(e,t){vi(e>=0&&e<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e}),vi(t>=0&&t<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t}),vi(t>=e,function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t})}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map(function(s){return s.then(function(s){var i=n+ ++a/e.length*(r-n);return t(i),s}),s}))}function Rx(e,t){return ri(this,void 0,void 0,function(){var n,r,a,s,i,o,l,c,u;return ai(this,function(d){switch(d.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?ii().platform.fetch:t.fetchFunc,r=e.map(function(e){return n(e,t.requestInit,{isBinary:!0})}),a=0,s=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return i=d.sent(),[3,4];case 2:return[4,Px(r,t.onProgress,a,s)];case 3:i=d.sent(),d.label=4;case 4:return o=i.map(function(e){return e.arrayBuffer()}),l=.5,c=1,null!=t.onProgress?[3,6]:[4,Promise.all(o)];case 5:return u=d.sent(),[3,8];case 6:return[4,Px(o,t.onProgress,l,c)];case 7:u=d.sent(),d.label=8;case 8:return[2,u]}})})}function Ox(e){var t=this;return function(n,r,a){return void 0===r&&(r=""),ri(t,void 0,void 0,function(){var t,s,i,o,l,c,u,d,A,h;return ai(this,function(f){switch(f.label){case 0:if(t=n.map(function(){return!1}),s={},i=null!=a?a.map(function(){return!1}):[],o=[],n.forEach(function(e,n){var r=0;e.weights.forEach(function(e){var l="quantization"in e?e.quantization.dtype:e.dtype,c=nx[l]*Ni(e.shape),u=function(){t[n]=!0,null==s[n]&&(s[n]=[]),s[n].push({manifestEntry:e,groupOffset:r,sizeBytes:c})};null!=a?a.forEach(function(t,n){t===e.name&&(u(),i[n]=!0)}):u(),o.push(e.name),r+=c})}),!i.every(function(e){return e}))throw l=a.filter(function(e,t){return!i[t]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+". \nManifest JSON has weights with names: "+o.join(", ")+".");return c=t.reduce(function(e,t,n){return t&&e.push(n),e},[]),u=[],c.forEach(function(e){n[e].paths.forEach(function(e){var t=r+(r.endsWith("/")?"":"/")+e;u.push(t)})}),[4,e(u)];case 1:return d=f.sent(),A={},h=0,c.forEach(function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=d[h+a].byteLength;for(var i=new ArrayBuffer(r),o=new Uint8Array(i),l=0,c=0;c<t;c++){var u=new Uint8Array(d[h+c]);o.set(u,l),l+=u.byteLength}s[e].forEach(function(e){var t=rx(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)A[n]=t[n]}),h+=t}),[2,A]}})})}}ux.registerSaveRouter(function(e){return ii().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Lx.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new Lx(e)}(e.slice(Lx.URL_SCHEME.length)):null});var Mx=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(vi("function"==typeof t.fetchFunc,function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=ii().platform.fetch,vi(null!=e&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&vi(2===e.length,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return ri(this,void 0,void 0,function(){var t,n,r,a;return ai(this,function(s){switch(s.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((a=s.sent()).ok)return[2,{modelArtifactsInfo:cx(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}})})},e.prototype.load=function(){return ri(this,void 0,void 0,function(){var e,t,n,r,a,s,i,o,l,c,u,d;return ai(this,function(A){switch(A.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=A.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");A.label=2;case 2:return A.trys.push([2,4,,5]),[4,e.json()];case 3:return t=A.sent(),[3,5];case 4:throw A.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,a=t.weightsManifest,s=t.generatedBy,i=t.convertedBy,o=t.format,l=t.userDefinedMetadata,null==r&&null==a)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==a?[3,7]:[4,this.loadWeights(a)];case 6:d=A.sent(),c=d[0],u=d[1],A.label=7;case 7:return[2,{modelTopology:r,weightSpecs:c,weightData:u,userDefinedMetadata:l,generatedBy:s,convertedBy:i,format:o}]}})})},e.prototype.loadWeights=function(e){return ri(this,void 0,void 0,function(){var t,n,r,a,s,i,o,l,c,u,d;return ai(this,function(A){switch(A.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],a=n[1],s=this.weightPathPrefix||r,i=[],o=0,l=e;o<l.length;o++)c=l[o],i.push.apply(i,c.weights);return u=[],e.forEach(function(e){e.paths.forEach(function(e){u.push(s+e+a)})}),[4,Rx(u,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return d=A.sent(),[2,[i,ox(d)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function Qx(e){return null!=e.match(Mx.URL_SCHEME_REGEX)}var Hx=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every(function(e){return Qx(e)}):Qx(e))?zx(e,{onProgress:t}):null};function zx(e,t){return new Mx(e,t)}ux.registerSaveRouter(Hx),ux.registerLoadRouter(Hx);var Wx,Vx=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return ri(this,void 0,void 0,function(){return ai(this,function(e){return[2,this.modelArtifacts]})})},e}(),Kx=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return ri(this,void 0,void 0,function(){return ai(this,function(t){return[2,this.saveHandler(e)]})})},e}(),Gx=Object.freeze({browserFiles:function(e){return new Ux(e)},browserHTTPRequest:function(e,t){return zx(e,t)},concatenateArrayBuffers:ox,decodeWeights:rx,encodeWeights:function(e,t){return ri(this,void 0,void 0,function(){var n,r,a,s,i,o=this;return ai(this,function(l){switch(l.label){case 0:for(n=[],r=[],a=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e),s=function(s){var i=a[s],l=Array.isArray(e)?e[s].tensor:e[i];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype)throw new Error("Unsupported dtype in weight '"+i+"': "+l.dtype);var c={name:i,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){var u=new Promise(function(e){return ri(o,void 0,void 0,function(){var t,n,r,a,s,i,o;return ai(this,function(c){switch(c.label){case 0:return[4,l.bytes()];case 1:for(t=c.sent(),n=t.reduce(function(e,t){return e+t.length},0)+4*t.length,r=new Uint8Array(n),a=0,s=0;s<t.length;s++)i=t[s],o=new Uint8Array(new Uint32Array([i.length]).buffer),r.set(o,a),a+=4,r.set(i,a),a+=i.length;return e(r),[2]}})})});r.push(u)}else r.push(l.data());null!=t&&(c.group=t),n.push(c)},i=0;i<a.length;++i)s(i);return[4,Promise.all(r)];case 1:return[2,{data:ax(l.sent()),specs:n}]}})})},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new Vx(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Vx({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Vx({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return ux.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:cx,getSaveHandlers:function(e){return ux.getSaveHandlers(e)},http:zx,isHTTPScheme:Qx,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),ri(this,void 0,void 0,function(){return ai(this,function(a){return[2,Ox(function(e){return Rx(e,{requestInit:r})})(e,t,n)]})})},registerLoadRouter:function(e){return ux.registerLoadRouter(e)},registerSaveRouter:function(e){return ux.registerSaveRouter(e)},weightsLoaderFactory:Ox,withSaveHandler:function(e){return new Kx(e)},copyModel:function(e,t){return ri(this,void 0,void 0,function(){return ai(this,function(n){return[2,fx(e,t,!1)]})})},listModels:function(){return ri(this,void 0,void 0,function(){var e,t,n,r,a,s,i;return ai(this,function(o){switch(o.label){case 0:e=Ax.getSchemes(),t={},n=0,r=e,o.label=1;case 1:return n<r.length?(a=r[n],[4,Ax.getManager(a).listModels()]):[3,4];case 2:for(i in s=o.sent())t[a+dx+i]=s[i];o.label=3;case 3:return n++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return ri(this,void 0,void 0,function(){return ai(this,function(n){return[2,fx(e,t,!0)]})})},removeModel:function(e){return ri(this,void 0,void 0,function(){var t;return ai(this,function(n){return t=hx(e),[2,Ax.getManager(t.scheme).removeModel(t.path)]})})}}),qx=$l({confusionMatrix_:function(e,t,n){var r=Ql(e,"labels","confusionMatrix"),a=Ql(t,"predictions","confusionMatrix");vi(null==n||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),vi(1===r.rank,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),vi(1===a.rank,function(){return"Expected the rank of predictions to be 1, but got "+a.rank}),vi(r.shape[0]===a.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."}),vi(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var s=Wc(r.asType("int32"),n),i=Wc(a.asType("int32"),n);return s.transpose().matMul(i).asType("int32")}}),Xx=(Object.freeze({confusionMatrix:qx}),$l({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,s=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)s=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);i=!0}if(a&&a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=ui("FromPixels",Fo.backendName))return Fo.runKernel("FromPixels",{pixels:e},{numChannels:t});var o,l,c=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],u=c[0],d=c[1];if(i?o=e.getContext("2d").getImageData(0,0,u,d).data:r||n?o=e.data:(s||a)&&(null==Wx&&(Wx=document.createElement("canvas").getContext("2d")),Wx.canvas.width=u,Wx.canvas.height=d,Wx.drawImage(e,0,0,u,d),o=Wx.getImageData(0,0,u,d).data),4===t)l=new Int32Array(o);else{var A=u*d;l=new Int32Array(A*t);for(var h=0;h<A;h++)for(var f=0;f<t;++f)l[h*t+f]=o[4*h+f]}return lc(l,[d,u,t],"int32")}})),Yx=Object.freeze({toPixels:function(e,t){return ri(this,void 0,void 0,function(){var n,r,a,s,i,o,l,c,u,d,A,h,f,p,m,g,x,v,y,b,w,N,j;return ai(this,function(C){switch(C.label){case 0:if(n=Ql(e,"img","toPixels"),e instanceof fo||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),a=r[0],s=r[1],(i=2===n.rank?1:n.shape[2])>4||2===i)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return[4,n.data()];case 1:return o=C.sent(),l=n.min(),c=n.max(),[4,Promise.all([l.data(),c.data()])];case 2:if(u=C.sent(),d=u[0],A=u[1],h=d[0],f=A[0],l.dispose(),c.dispose(),"float32"===n.dtype){if(h<0||f>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+f+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||f>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+f+"].")}for(p="float32"===n.dtype?255:1,m=new Uint8ClampedArray(s*a*4),g=0;g<a*s;++g)x=void 0,v=void 0,y=void 0,b=void 0,1===i?(x=o[g]*p,v=o[g]*p,y=o[g]*p,b=255):3===i?(x=o[3*g]*p,v=o[3*g+1]*p,y=o[3*g+2]*p,b=255):4===i&&(x=o[4*g]*p,v=o[4*g+1]*p,y=o[4*g+2]*p,b=o[4*g+3]*p),m[0+(w=4*g)]=Math.round(x),m[w+1]=Math.round(v),m[w+2]=Math.round(y),m[w+3]=Math.round(b);return null!=t&&(t.width=s,t.height=a,N=t.getContext("2d"),j=new ImageData(m,s,a),N.putImageData(j,0,0)),n!==e&&n.dispose(),[2,m]}})})},fromPixels:Xx}),Jx=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),Zx=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function $x(e){vi(null!=e.className,function(){return"Class being registered does not have the static className property defined."}),vi("string"==typeof e.className,function(){return"className is required to be a string, but got type "+typeof e.className}),vi(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),Zx.register(e)}Object.freeze({Serializable:Jx,SerializationMap:Zx,registerClass:$x});function ev(){return 32===Fo.backend.floatPrecision()?.001:.1}function tv(e,t,n){var r=!0;if((Ri(e)||Ri(t))&&(r=!1),Ri(e)&&Ri(t)&&(r=!0),r){var a=e.constructor.name,s=t.constructor.name;if(a!==s)throw new Error("Arrays are of different type. Actual: "+a+". Expected: "+s)}if(Array.isArray(e)&&Array.isArray(t)){var i=Ol(e),o=Ol(t);if(!ji(i,o))throw new Error("Arrays have different shapes. Actual: ["+i+"]. Expected: ["+o+"]")}var l=Ri(e)?e:wi(e),c=Ri(t)?t:wi(t);if(l.length!==c.length)throw new Error("Arrays have different lengths actual: "+l.length+" vs expected: "+c.length+".\nActual:   "+l+".\nExpected: "+c+".");for(var u=0;u<c.length;++u){var d=l[u],A=c[u];if(!n(d,A))throw new Error("Arrays differ: actual["+u+"] = "+d+", expected["+u+"] = "+A+".\nActual:   "+l+".\nExpected: "+c+".")}}function nv(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=ev()),tv(e,t,function(e,t){return nv(e,t,n)})},testEpsilon:ev,expectPromiseToFail:function(e,t){e().then(function(){return t.fail()},function(){return t()})},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return Qi(e)||Qi(e[0])||Qi(t)||Qi(t[0])?tv(e,n,function(e,t){return e==t}):tv(e,t,function(e,t){return nv(e,t,0)})},expectNumbersClose:function(e,t,n){if(null==n&&(n=ev()),!nv(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:RA,webgl_util:Tl,forceHalfFloat:function(){ii().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:$h,setWebGLContext:Ro,GPGPUContext:OA});var rv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ni(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),a=r.value,s=r.grads;if(null!=n){var i=n.map(function(e){return{name:e.name,tensor:s[e.name]}});this.applyGradients(i)}else this.applyGradients(s);return Pl(s),t?a:(a.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){vi(Vi(e),function(){return"The f passed in variableGrads(f) must be a function"}),vi(null==t||Array.isArray(t)&&t.every(function(e){return e instanceof yo}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=null!=t;if(!n)for(var r in t=[],Fo.registeredVariables)t.push(Fo.registeredVariables[r]);var a=n?t.filter(function(e){return!e.trainable}):null,s=t.length;vi((t=t.filter(function(e){return e.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+s+" variables is trainable."});var i=Fo.gradients(e,t,null,!0),o=i.value,l=i.grads;vi(l.some(function(e){return null!=e}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),vi(0===o.rank,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+o.rank+" tensor"});var c={};return t.forEach(function(e,t){null!=l[t]&&(c[e.name]=l[t])}),null!=a&&a.forEach(function(e){return c[e.name]=null}),{value:o,grads:c}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&Pl(this.iterations_)},t.prototype.saveIterations=function(){return ri(this,void 0,void 0,function(){return ai(this,function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:sc(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return ri(this,void 0,void 0,function(){return ai(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(e){return ri(this,void 0,void 0,function(){return ai(this,function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(e){return ri(this,void 0,void 0,function(){var t;return ai(this,function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}})})},t}(Jx);Object.defineProperty(rv,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var av=function(e){function t(t,n,r){void 0===r&&(r=null);var a=e.call(this)||this;return a.learningRate=t,a.rho=n,a.epsilon=r,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==r&&(a.epsilon=Fo.backend.epsilon()),a}return ni(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var a=Fo.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:Ul(function(){return pc(a).variable(!1)})}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:Ul(function(){return pc(a).variable(!1)})});var s=Array.isArray(e)?e[r].tensor:e[n];if(null!=s){var i=t.accumulatedGrads[r].variable,o=t.accumulatedUpdates[r].variable;Ul(function(){var e=i.mul(t.rho).add(s.square().mul(1-t.rho)),n=o.add(t.epsilon).sqrt().div(i.add(t.epsilon).sqrt()).mul(s),r=o.mul(t.rho).add(n.square().mul(1-t.rho));i.assign(e),o.assign(r);var l=n.mul(-t.learningRate).add(a);a.assign(l)})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(Pl(this.accumulatedGrads.map(function(e){return e.variable})),Pl(this.accumulatedUpdates.map(function(e){return e.variable})))},t.prototype.getWeights=function(){return ri(this,void 0,void 0,function(){var e;return ai(this,function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return ri(this,void 0,void 0,function(){var t;return ai(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(rv);$x(av);var sv=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return ni(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var a=Fo.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:Ul(function(){return Ac(a.shape,t.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(e)?e[r].tensor:e[n];if(null!=s){var i=t.accumulatedGrads[r].variable;Ul(function(){var e=i.add(s.square());i.assign(e);var n=s.div(e.add(Fo.backend.epsilon()).sqrt()).mul(-t.learningRate).add(a);a.assign(n)})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&Pl(this.accumulatedGrads.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return ri(this,void 0,void 0,function(){return ai(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return ri(this,void 0,void 0,function(){return ai(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(rv);$x(sv);var iv=function(e){function t(t,n,r,a){void 0===a&&(a=null);var s=e.call(this)||this;return s.learningRate=t,s.beta1=n,s.beta2=r,s.epsilon=a,s.accumulatedFirstMoment=[],s.accumulatedSecondMoment=[],Ul(function(){s.accBeta1=sc(n).variable(),s.accBeta2=sc(r).variable()}),null==a&&(s.epsilon=Fo.backend.epsilon()),s}return ni(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e);Ul(function(){var r=Np(1,t.accBeta1),a=Np(1,t.accBeta2);n.forEach(function(n,s){var i=Fo.registeredVariables[n];null==t.accumulatedFirstMoment[s]&&(t.accumulatedFirstMoment[s]={originalName:n+"/m",variable:Ul(function(){return pc(i).variable(!1)})}),null==t.accumulatedSecondMoment[s]&&(t.accumulatedSecondMoment[s]={originalName:n+"/v",variable:Ul(function(){return pc(i).variable(!1)})});var o=Array.isArray(e)?e[s].tensor:e[n];if(null!=o){var l=t.accumulatedFirstMoment[s].variable,c=t.accumulatedSecondMoment[s].variable,u=l.mul(t.beta1).add(o.mul(1-t.beta1)),d=c.mul(t.beta2).add(o.square().mul(1-t.beta2)),A=u.div(r),h=d.div(a);l.assign(u),c.assign(d);var f=A.div(h.sqrt().add(t.epsilon)).mul(-t.learningRate).add(i);i.assign(f)}}),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Pl(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedSecondMoment&&Pl(this.accumulatedSecondMoment.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return ri(this,void 0,void 0,function(){var e;return ai(this,function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return ri(this,void 0,void 0,function(){var t,n=this;return ai(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),Ul(function(){n.accBeta1.assign(yp(n.beta1,n.iterations_+1)),n.accBeta2.assign(yp(n.beta2,n.iterations_+1))}),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(rv);$x(iv);var ov=function(e){function t(t,n,r,a,s){void 0===a&&(a=null),void 0===s&&(s=0);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=a,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],Ul(function(){i.iteration=sc(0).variable(),i.accBeta1=sc(n).variable()}),null==a&&(i.epsilon=Fo.backend.epsilon()),i}return ni(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e);Ul(function(){var r=Np(1,t.accBeta1),a=lp(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach(function(n,s){var i=Fo.registeredVariables[n];null==t.accumulatedFirstMoment[s]&&(t.accumulatedFirstMoment[s]={originalName:n+"/m",variable:pc(i).variable(!1)}),null==t.accumulatedWeightedInfNorm[s]&&(t.accumulatedWeightedInfNorm[s]={originalName:n+"/v",variable:pc(i).variable(!1)});var o=Array.isArray(e)?e[s].tensor:e[n];if(null!=o){var l=t.accumulatedFirstMoment[s].variable,c=t.accumulatedWeightedInfNorm[s].variable,u=l.mul(t.beta1).add(o.mul(1-t.beta1)),d=c.mul(t.beta2),A=o.abs(),h=d.maximum(A);l.assign(u),c.assign(h);var f=a.div(r).mul(u.div(h.add(t.epsilon))).add(i);i.assign(f)}}),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Pl(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedWeightedInfNorm&&Pl(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return ri(this,void 0,void 0,function(){return ai(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(e){return ri(this,void 0,void 0,function(){return ai(this,function(e){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(rv);$x(ov);var lv=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return ni(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var s=Fo.registeredVariables[n];Ul(function(){var e=t.c.mul(a).add(s);s.assign(e)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return Fo.keep(e)}(sc(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return ri(this,void 0,void 0,function(){return ai(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}})})},t.prototype.setWeights=function(e){return ri(this,void 0,void 0,function(){return ai(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(rv);$x(lv);var cv=function(e){function t(t,n,r){void 0===r&&(r=!1);var a=e.call(this,t)||this;return a.learningRate=t,a.momentum=n,a.useNesterov=r,a.accumulations=[],a.m=sc(a.momentum),a}return ni(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var a=Fo.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:Ul(function(){return pc(a).variable(!1)})});var s=t.accumulations[r].variable,i=Array.isArray(e)?e[r].tensor:e[n];null!=i&&Ul(function(){var e,n=t.m.mul(s).add(i);e=t.useNesterov?t.c.mul(i.add(n.mul(t.m))).add(a):t.c.mul(n).add(a),s.assign(n),a.assign(e)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&Pl(this.accumulations.map(function(e){return e.variable}))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return ri(this,void 0,void 0,function(){return ai(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return ri(this,void 0,void 0,function(){return ai(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(lv);$x(cv);var uv=function(e){function t(t,n,r,a,s){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===a&&(a=null),void 0===s&&(s=!1);var i=e.call(this)||this;if(i.learningRate=t,i.decay=n,i.momentum=r,i.epsilon=a,i.accumulatedMeanSquares=[],i.accumulatedMoments=[],i.accumulatedMeanGrads=[],i.centered=s,null==a&&(i.epsilon=Fo.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return i}return ni(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var a=Fo.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:Ul(function(){return pc(a).variable(!1)})}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:Ul(function(){return pc(a).variable(!1)})}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:Ul(function(){return pc(a).variable(!1)})});var s=Array.isArray(e)?e[r].tensor:e[n];if(null!=s){var i=t.accumulatedMeanSquares[r].variable,o=t.accumulatedMoments[r].variable;Ul(function(){var e=i.mul(t.decay).add(s.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,l=n.mul(t.decay).add(s.mul(1-t.decay)),c=o.mul(t.momentum).add(s.mul(t.learningRate).div(e.sub(l.square().add(t.epsilon)).sqrt()));i.assign(e),n.assign(l),o.assign(c);var u=a.sub(c);a.assign(u)}else{var d=i.mul(t.decay).add(s.square().mul(1-t.decay));c=o.mul(t.momentum).add(s.mul(t.learningRate).div(d.add(t.epsilon).sqrt())),i.assign(d),o.assign(c),u=a.sub(c),a.assign(u)}})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&Pl(this.accumulatedMeanSquares.map(function(e){return e.variable})),null!=this.accumulatedMeanGrads&&this.centered&&Pl(this.accumulatedMeanGrads.map(function(e){return e.variable})),null!=this.accumulatedMoments&&Pl(this.accumulatedMoments.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return ri(this,void 0,void 0,function(){var e;return ai(this,function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return ri(this,void 0,void 0,function(){var t;return ai(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(rv);$x(uv);var dv=function(){function e(){}return e.sgd=function(e){return new lv(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new cv(e,t,n)},e.rmsprop=function(e,t,n,r,a){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===a&&(a=!1),new uv(e,t,n,r,a)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new iv(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new av(e,t,n)},e.adamax=function(e,t,n,r,a){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===a&&(a=0),new ov(e,t,n,r,a)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new sv(e,t)},e}();dv.sgd,dv.momentum,dv.adadelta,dv.adagrad,dv.rmsprop,dv.adamax,dv.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;fo.prototype.squaredDifference=function(e){return nf(this,e)},Ao=Mg;var Av=function(e,t){return Av=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Av(e,t)};function hv(e,t){function n(){this.constructor=e}Av(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var fv=function(){return fv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},fv.apply(this,arguments)};function pv(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(ni){s(ni)}}function o(e){try{l(r.throw(e))}catch(ni){s(ni)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})}function mv(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(ni){s=[6,ni],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}function gv(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,a++)r[a]=s[i];return r}var xv=function(){function e(e,t){if(!Bv(e)||!Bv(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function vv(e,t){return e instanceof fo&&e.shape.length===t}function yv(e){return vv(e,3)}function bv(e){return vv(e,4)}function wv(e){return e%2===0}function Nv(e){return e&&e.width&&e.height}function jv(e){return e.reduce(function(e,t){return e.add(t)},new Sv(0,0)).div(new Sv(e.length,e.length))}function Cv(e,t,n){return Array(e).fill(0).map(function(e,r){return t+r*n})}function Bv(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function kv(e){return Bv(e)&&0<=e&&e<=1}var Sv=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),Ev=function(){function e(t,n){void 0===n&&(n=!0);var r=t||{},a=[r.left,r.top,r.right,r.bottom].every(Bv),s=[r.x,r.y,r.width,r.height].every(Bv);if(!s&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var i=s?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],o=i[0],l=i[1],c=i[2],u=i[3];e.assertIsValidBox({x:o,y:l,width:c,height:u},"Box.constructor",n),this._x=o,this._y=l,this._width=c,this._height=u}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Bv)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new Sv(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new Sv(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new Sv(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new Sv(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(e){return Math.round(e)});return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(e){return Math.floor(e)});return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,a=t.width,s=t.height,i=Math.abs(a-s);return a<s&&(n-=i/2,a+=i),s<a&&(r-=i/2,s+=i),new e({x:n,y:r,width:a,height:s})},e.prototype.rescale=function(t){var n=Nv(t)?t.width:t,r=Nv(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new e({x:r[0],y:r[1],width:r[2],height:r[3]})},e.prototype.clipAtImageBorders=function(t,n){var r=this,a=r.x,s=r.y,i=r.right,o=r.bottom,l=Math.max(a,0),c=Math.max(s,0),u=i-l,d=o-c;return new e({x:l,y:c,width:Math.min(u,t-l),height:Math.min(d,n-c)}).floor()},e.prototype.shift=function(t,n){var r=this.width,a=this.height;return new e({x:this.x+t,y:this.y+n,width:r,height:a})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,a=n,s=r,i=this.left,o=this.top,l=this.right,c=this.bottom;return l>t&&(a=-l+t+n,l=t),c>e&&(s=-c+e+r,c=e),i<1&&(s=2-i,i=1),o<1&&(s=2-o,o=1),{dy:1,edy:s,dx:1,edx:a,y:o,ey:c,x:i,ex:l,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),Fv=function(e){function t(t,n,r,a,s){return void 0===s&&(s=!1),e.call(this,{left:t,top:n,right:r,bottom:a},s)||this}return hv(t,e),t}(Ev),_v=function(){function e(e,t,n,r,a){this._imageDims=new xv(a.width,a.height),this._score=e,this._classScore=t,this._className=n,this._box=new Ev(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new Ev(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),Iv=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return hv(t,e),t.prototype.forSize=function(n,r){var a=e.prototype.forSize.call(this,n,r);return new t(a.score,a.relativeBox,a.imageDims)},t}(_v);function Tv(e,t,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function Dv(e,t,n,r){void 0===r&&(r=!0);for(var a=t.map(function(e,t){return{score:e,boxIndex:t}}).sort(function(e,t){return e.score-t.score}).map(function(e){return e.boxIndex}),s=[],i=function(){var t=a.pop();s.push(t);for(var i=a,o=[],l=0;l<i.length;l++){var c=i[l],u=e[t],d=e[c];o.push(Tv(u,d,r))}a=a.filter(function(e,t){return o[t]<=n})};a.length>0;)i();return s}function Lv(e,t){return Ul(function(){var n=t[0],r=t[1],a=t[2],s=Ac(gv(e.shape.slice(0,3),[1]),n),i=Ac(gv(e.shape.slice(0,3),[1]),r),o=Ac(gv(e.shape.slice(0,3),[1]),a),l=mc([s,i,o],3);return Np(e,l)})}function Uv(e){return 1/(1+Math.exp(-e))}var Pv,Rv=function(e){function t(t,n,r,a,s){return void 0===s&&(s=!1),e.call(this,{x:t,y:n,width:r,height:a},s)||this}return hv(t,e),t}(Ev),Ov=function(){function e(e,t,n){void 0===n&&(n=new Sv(0,0));var r=t.width,a=t.height;this._imgDims=new xv(r,a),this._shift=n,this._positions=e.map(function(e){return e.mul(new Sv(r,a)).add(n)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new Sv(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(t){return t.sub(e._shift).div(new Sv(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new Sv(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof Iv?e.box.floor():new Ev(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),a=r.useDlibAlignment,s=r.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(s)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],a=function(e){return r.sub(e).magnitude()},s=(a(t)+a(n))/2,i=Math.floor(s/.45),o=jv(e),l=Math.floor(Math.max(0,o.x-.5*i)),c=Math.floor(Math.max(0,o.y-.43*i));return new Rv(l,c,Math.min(i,this.imageWidth+l),Math.min(i,this.imageHeight+c))},e.prototype.alignMinBbox=function(e){var t=function(e){var t=e.map(function(e){return e.x}),n=e.map(function(e){return e.y}),r=t.reduce(function(e,t){return t<e?t:e},1/0),a=n.reduce(function(e,t){return t<e?t:e},1/0),s=t.reduce(function(e,t){return e<t?t:e},0),i=n.reduce(function(e,t){return e<t?t:e},0);return new Fv(r,a,s,i)}(this.positions);return t.pad(t.width*e,t.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),Mv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],jv([e[3],e[4]])]},t}(Ov),Qv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(jv)},t}(Ov),Hv=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+function(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}(this.distance)+")":"")},e}(),zv=function(e){function t(t,n){var r=e.call(this,t)||this;return r._label=n,r}return hv(t,e),t.assertIsValidLabeledBox=function(e,t){if(Ev.assertIsValidBox(e,t),!Bv(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(Ev),Wv=function(){function e(e,t){if("string"!==typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(e){return!(e instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},e.fromJSON=function(t){var n=t.descriptors.map(function(e){return new Float32Array(e)});return new e(t.label,n)},e}();!function(e){function t(t,n,r,a){var s=e.call(this,t,n)||this;return s._score=r,s._classScore=a,s}hv(t,e),t.assertIsValidPredictedBox=function(e,t){if(zv.assertIsValidLabeledBox(e,t),!kv(e.score)||!kv(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(zv);function Vv(e,t){var n={detection:t};return Object.assign({},e,n)}function Kv(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function Gv(e){var t="";if(!e)try{e=n(Object(function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(a){t=a.toString()}var r=e?function(t){return new Promise(function(n,r){e.readFile(t,function(e,t){return e?r(e):n(t)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:r}}function qv(){var e=n.g.Canvas||n.g.HTMLCanvasElement,t=n.g.Image||n.g.HTMLImageElement,r=n.g.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},a=Gv();return fv({Canvas:e||function(){},CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||function(){},Image:t||function(){},ImageData:n.g.ImageData||function(){},Video:n.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:r},a)}function Xv(){return"object"===typeof window&&"undefined"!==typeof document&&"undefined"!==typeof HTMLImageElement&&"undefined"!==typeof HTMLCanvasElement&&"undefined"!==typeof HTMLVideoElement&&"undefined"!==typeof ImageData&&"undefined"!==typeof CanvasRenderingContext2D}function Yv(){return"object"===typeof n.g&&"undefined"!==typeof process&&!!process.version}function Jv(e){Pv=e}function Zv(){Xv()&&Jv(Kv()),Yv()&&Jv(qv())}var $v,ey={getEnv:function(){if(!Pv)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Pv},setEnv:Jv,initialize:Zv,createBrowserEnv:Kv,createFileSystem:Gv,createNodejsEnv:qv,monkeyPatch:function(e){if(Pv||Zv(),!Pv)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?Pv.Canvas:t,r=e.Image,a=void 0===r?Pv.Image:r;Pv.Canvas=n,Pv.Image=a,Pv.createCanvasElement=e.createCanvasElement||function(){return new n},Pv.createImageElement=e.createImageElement||function(){return new a},Pv.ImageData=e.ImageData||Pv.ImageData,Pv.Video=e.Video||Pv.Video,Pv.fetch=e.fetch||Pv.fetch,Pv.readFile=e.readFile||Pv.readFile},isBrowser:Xv,isNodejs:Yv};function ty(e){return ey.isNodejs()||"string"!==typeof e?e:document.getElementById(e)}function ny(e){var t=ey.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var r=ty(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=r.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}Zv(),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"}($v||($v={}));var ry=function(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,a=e.fontSize,s=e.fontStyle,i=e.padding;this.anchorPosition=t||$v.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=a||14,this.fontStyle=s||"Georgia",this.padding=i||4},ay=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"===typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new ry(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map(function(t){return e.measureText(t).width}).reduce(function(e,t){return e<t?t:e},0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===$v.BOTTOM_RIGHT||n===$v.TOP_RIGHT,a=n===$v.BOTTOM_LEFT||n===$v.BOTTOM_RIGHT,s=this.measureWidth(e),i=this.measureHeight(),o=r?this.anchor.x-s:this.anchor.x,l=a?this.anchor.y-i:this.anchor.y;if(t){var c=t.width,u=t.height;return{x:Math.max(Math.min(o,c-s),0),y:Math.max(Math.min(l,u-i),0)}}return{x:o,y:l}},e.prototype.draw=function(e){var t=ty(e),n=ny(t),r=this.options,a=r.backgroundColor,s=r.fontColor,i=r.fontSize,o=r.fontStyle,l=r.padding;n.font=i+"px "+o;var c=this.measureWidth(n),u=this.measureHeight();n.fillStyle=a;var d=this.getUpperLeft(n,t);n.fillRect(d.x,d.y,c,u),n.fillStyle=s,this.text.forEach(function(e,t){var r=l+d.x,a=l+d.y+(t+1)*i;n.fillText(e,r,a)})},e}(),sy=function(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,a=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var s={anchorPosition:$v.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new ry(Object.assign({},s,a))};!function(){function e(e,t){void 0===t&&(t={}),this.box=new Ev(e),this.options=new sy(t)}e.prototype.draw=function(e){var t=ny(e),n=this.options,r=n.boxColor,a=n.lineWidth,s=this.box,i=s.x,o=s.y,l=s.width,c=s.height;t.strokeStyle=r,t.lineWidth=a,t.strokeRect(i,o,l,c);var u=this.options.label;u&&new ay([u],{x:i-a/2,y:o},this.options.drawLabelOptions).draw(e)}}();function iy(e){var t=ey.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function oy(e){var t=ey.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new xv(e.naturalWidth,e.naturalHeight):e instanceof r?new xv(e.videoWidth,e.videoHeight):new xv(e.width,e.height)}function ly(e){var t=e.width,n=e.height,r=(0,ey.getEnv().createCanvasElement)();return r.width=t,r.height=n,r}function cy(e,t){var n=ey.getEnv().ImageData;if(!(e instanceof n)&&!iy(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||oy(e),a=r.width,s=r.height,i=ly({width:a,height:s});return e instanceof n?ny(i).putImageData(e,0,0):ny(i).drawImage(e,0,0,a,s),i}function uy(e,t){return pv(this,void 0,void 0,function(){var n,r,a,s,i,o;return mv(this,function(l){switch(l.label){case 0:return n=t||ey.getEnv().createCanvasElement(),r=e.shape.slice(bv(e)?1:0),a=r[0],s=r[1],i=r[2],o=Ul(function(){return e.as3D(a,s,i).toInt()}),[4,Yx.toPixels(o,n)];case 1:return l.sent(),o.dispose(),[2,n]}})})}function dy(e){var t=ey.getEnv(),n=t.Image,r=t.Canvas,a=t.Video;return e instanceof n||e instanceof r||e instanceof a}var Ay=function(){function e(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach(function(e,t){if(yv(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if(bv(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var a=e instanceof ey.getEnv().Canvas?e:cy(e);n._canvases[t]=a,n._inputDimensions[t]=[a.height,a.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this;return Cv(this.batchSize,0,1).map(function(t,n){return e.getReshapedInputDimensions(n)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!==typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(e,t){var n=e.width,r=e.height,a=t/Math.max(r,n);return new xv(Math.round(n*a),Math.round(r*a))}({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,Ul(function(){var r=Cv(n.batchSize,0,1).map(function(r){var a=n.getInput(r);if(a instanceof fo){var s=bv(a)?a:a.expandDims();return s=function(e,t){return void 0===t&&(t=!1),Ul(function(){var n=e.shape.slice(1),r=n[0],a=n[1];if(r===a)return e;var s=Math.abs(r-a),i=Math.round(s*(t?.5:1)),o=r>a?2:1,l=function(t){var n=e.shape.slice();return n[o]=t,Ac(n,0)},c=l(i),u=s-c.shape[o],d=[t&&u?l(u):null,e,c].filter(function(e){return!!e}).map(function(e){return e.toFloat()});return mc(d,o)})}(s,t),s.shape[1]===e&&s.shape[2]===e||(s=_g.resizeBilinear(s,[e,e])),s.as3D(e,e,3)}if(a instanceof ey.getEnv().Canvas)return Yx.fromPixels(function(e,t,n){void 0===n&&(n=!1);var r=ey.getEnv(),a=r.Image,s=r.Canvas;if(!(e instanceof a||e instanceof s))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var i=oy(e),o=t/Math.max(i.height,i.width),l=o*i.width,c=o*i.height,u=ly({width:t,height:t}),d=e instanceof s?e:cy(e),A=Math.abs(l-c)/2,h=n&&l<c?A:0,f=n&&c<l?A:0;return ny(u).drawImage(d,h,f,l,c),u}(a,e,t));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+a)}),a=ru(r.map(function(e){return e.toFloat()})).as4D(n.batchSize,e,e,3);return a})},e}();function hy(e){return pv(this,void 0,void 0,function(){var t,n,r;return mv(this,function(a){switch(a.label){case 0:if(e instanceof Ay)return[2,e];if(!(t=Array.isArray(e)?e:[e]).length)throw new Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(r=t.map(ty)).forEach(function(e,r){if(!dy(e)&&!yv(e)&&!bv(e)){if("string"===typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(bv(e)){var a=e.shape[0];if(1!==a)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+a+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(e){return dy(e)&&(t=e,new Promise(function(e,n){if(t instanceof ey.getEnv().Canvas||iy(t))return e();function r(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",a),e(t))}function a(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",a),n(e))}t.addEventListener("load",r),t.addEventListener("error",a)}));var t}))];case 1:return a.sent(),[2,new Ay(r,Array.isArray(e))]}})})}function fy(e,t){return pv(this,void 0,void 0,function(){var n,r,a,s,i,o;return mv(this,function(l){switch(l.label){case 0:return n=ey.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,hy(e)];case 1:if((a=l.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(s=a.getInput(0))instanceof n?(i=s,[3,4]):[3,2];case 2:return[4,uy(s)];case 3:i=l.sent(),l.label=4;case 4:r=i,l.label=5;case 5:return o=ny(r),[2,t.map(function(e){return e instanceof Iv?e.forSize(r.width,r.height).box.floor():e}).map(function(e){return e.clipAtImageBorders(r.width,r.height)}).map(function(e){var t=e.x,n=e.y,r=e.width,a=e.height,s=ly({width:r,height:a});return ny(s).putImageData(o.getImageData(t,n,r,a),0,0),s})]}})})}function py(e,t){return pv(this,void 0,void 0,function(){return mv(this,function(n){if(!yv(e)&&!bv(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(bv(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Ul(function(){var n=e.shape.slice(bv(e)?1:0),r=n[0],a=n[1],s=n[2],i=t.map(function(e){return e instanceof Iv?e.forSize(a,r).box:e}).map(function(e){return e.clipAtImageBorders(a,r)}).map(function(t){var n=t.x,i=t.y,o=t.width,l=t.height;return vm(e.as3D(r,a,s),[i,n,0],[l,o,s])});return i})]})})}function my(e,t){return pv(this,void 0,void 0,function(){var n;return mv(this,function(r){switch(r.label){case 0:return[4,(0,ey.getEnv().fetch)(e,t)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}})})}function gy(e){return pv(this,void 0,void 0,function(){return mv(this,function(t){switch(t.label){case 0:return[4,my(e)];case 1:return[2,t.sent().json()]}})})}function xy(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",a=(e=e.replace(r,"")).split("/").filter(function(e){return e}),s=e.endsWith(".json")?a[a.length-1]:n,i=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return{modelBaseUri:i=e.startsWith("/")?"/"+i:i,manifestUri:"/"===i?"/"+s:i+"/"+s}}function vy(e,t){return pv(this,void 0,void 0,function(){var n,r,a,s;return mv(this,function(i){switch(i.label){case 0:return n=xy(e,t),r=n.manifestUri,a=n.modelBaseUri,[4,gy(r)];case 1:return s=i.sent(),[2,Gx.loadWeights(s,a)]}})})}var yy=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,a=n.objProp;r[a].dispose(),r[a]=t},e.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof yo})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof yo)})},e.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())})},e.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(t){var n=t.path,r=t.tensor,a=rc(r.dataSync());r.dispose(),e.reassignParamFromPath(n,a)})},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach(function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var t=e.tensor;return Array.from(t.dataSync())}).reduce(function(e,t){return e.concat(t)}))},e.prototype.load=function(e){return pv(this,void 0,void 0,function(){return mv(this,function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}})})},e.prototype.loadFromUri=function(e){return pv(this,void 0,void 0,function(){var t;return mv(this,function(n){switch(n.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromUri - expected model uri");return[4,vy(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}})})},e.prototype.loadFromDisk=function(e){return pv(this,void 0,void 0,function(){var t,n,r,a,s,i,o,l,c,u;return mv(this,function(d){switch(d.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");return t=ey.getEnv().readFile,n=xy(e,this.getDefaultModelName()),r=n.manifestUri,a=n.modelBaseUri,s=function(e){return Promise.all(e.map(function(e){return t(e).then(function(e){return e.buffer})}))},i=Gx.weightsLoaderFactory(s),c=(l=JSON).parse,[4,t(r)];case 1:return o=c.apply(l,[d.sent().toString()]),[4,i(o,a)];case 2:return u=d.sent(),this.loadFromWeightMap(u),[2]}})})},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce(function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}},{nextObj:this.params}),n=t.obj,r=t.objProp;if(!n||!r||!(n[r]instanceof fo))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}},e}();function by(e,t,n){return Ul(function(){var r=Zp(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=ap(r,t.bias)})}function wy(e,t,n){return void 0===n&&(n=!1),Ul(function(){var r=Um(n?ap(Vp(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):by(e,t.conv0,[2,2])),a=by(r,t.conv1,[1,1]),s=by(Um(ap(r,a)),t.conv2,[1,1]);return Um(ap(r,ap(a,s)))})}function Ny(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),Ul(function(){var a=Um(n?ap(Vp(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):by(e,t.conv0,r?[2,2]:[1,1])),s=by(a,t.conv1,[1,1]),i=by(Um(ap(a,s)),t.conv2,[1,1]),o=by(Um(ap(a,ap(s,i))),t.conv3,[1,1]);return Um(ap(a,ap(s,ap(i,o))))})}function jy(e,t,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),Ul(function(){var a=ap(Vp(e,t.filters,[1,1],n),t.bias);return r?Um(a):a})}function Cy(e,t){Object.keys(e).forEach(function(n){t.some(function(e){return e.originalPath===n})||e[n].dispose()})}function By(e,t){return function(n,r,a,s){var i=cc(e(n*r*a*a),[a,a,n,r]),o=ic(e(r));return t.push({paramPath:s+"/filters"},{paramPath:s+"/bias"}),{filters:i,bias:o}}}function ky(e,t){return function(n,r,a){var s=oc(e(n*r),[n,r]),i=ic(e(r));return t.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:s,bias:i}}}var Sy=function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n};function Ey(e,t){return function(n,r,a){var s=cc(e(9*n),[3,3,n,1]),i=cc(e(n*r),[1,1,n,r]),o=ic(e(r));return t.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new Sy(s,i,o)}}function Fy(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),a=e(t+"/bias",1);return new Sy(n,r,a)}}function _y(e,t){return function(n,r,a){var s=e[n];if(!vv(s,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+s);return t.push({originalPath:n,paramPath:a||n}),s}}function Iy(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function Ty(e,t){var n=By(e,t),r=Ey(e,t);function a(e,t,a,s){return void 0===s&&(s=!1),{conv0:s?n(e,t,3,a+"/conv0"):r(e,t,a+"/conv0"),conv1:r(t,t,a+"/conv1"),conv2:r(t,t,a+"/conv2")}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:function(e,t,n,s){void 0===s&&(s=!1);var i=a(e,t,n,s);return{conv0:i.conv0,conv1:i.conv1,conv2:i.conv2,conv3:r(t,t,n+"/conv3")}}}}function Dy(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function Ly(e,t){var n=_y(e,t),r=Dy(n),a=Fy(n);return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):a(e+"/conv0"),conv1:a(e+"/conv1"),conv2:a(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):a(e+"/conv0"),conv1:a(e+"/conv1"),conv2:a(e+"/conv2"),conv3:a(e+"/conv3")}}}}var Uy=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return hv(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return Ul(function(){var n=Ny(Lv(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(sc(255)),t.dense0,!0);return n=Ny(n,t.dense1),n=Ny(n,t.dense2),n=Ny(n,t.dense3),n=Am(n,[7,7],[2,2],"valid")})},t.prototype.forward=function(e){return pv(this,void 0,void 0,function(){var t;return mv(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hy(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=Ly(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return Cy(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=Iy(e),r=n.extractWeights,a=n.getRemainingWeights,s=Ty(r,t).extractDenseBlock4Params,i=s(3,32,"dense0",!0),o=s(32,64,"dense1"),l=s(64,128,"dense2"),c=s(128,256,"dense3");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:i,dense1:o,dense2:l,dense3:c}}}(e)},t}(yy);function Py(e,t){return Ul(function(){return ap(tm(e,t.weights),t.bias)})}function Ry(e){var t={},n={};return Object.keys(e).forEach(function(r){(r.startsWith("fc")?n:t)[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var Oy=function(e){function t(t,n){var r=e.call(this,t)||this;return r._faceFeatureExtractor=n,r}return hv(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return Ul(function(){var r=e instanceof Ay?t.faceFeatureExtractor.forwardInput(e):e;return Py(r.as2D(r.shape[0],-1),n.fc)})},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e,t,n){var r=[],a=Iy(e),s=a.extractWeights,i=a.getRemainingWeights,o=ky(s,r)(t,n,"fc");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{fc:o}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=Ry(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t,n=[],r=_y(e,n),a={fc:(t="fc",{weights:r(t+"/weights",2),bias:r(t+"/bias",1)})};return Cy(e,n),{params:a,paramMappings:n}}(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,a=e.slice(0,e.length-r),s=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(s)},t}(yy),My=["neutral","happy","sad","angry","fearful","disgusted","surprised"],Qy=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);My.forEach(function(n,r){t[n]=e[r]})}return e.prototype.asSortedArray=function(){var e=this;return My.map(function(t){return{expression:t,probability:e[t]}}).sort(function(e,t){return t.probability-e.probability})},e}(),Hy=function(e){function t(t){return void 0===t&&(t=new Uy),e.call(this,"FaceExpressionNet",t)||this}return hv(t,e),t.prototype.forwardInput=function(e){var t=this;return Ul(function(){return Cu(t.runNet(e))})},t.prototype.forward=function(e){return pv(this,void 0,void 0,function(){var t;return mv(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hy(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.predictExpressions=function(e){return pv(this,void 0,void 0,function(){var t,n,r,a,s=this;return mv(this,function(i){switch(i.label){case 0:return[4,hy(e)];case 1:return t=i.sent(),[4,this.forwardInput(t)];case 2:return n=i.sent(),[4,Promise.all(iu(n).map(function(e){return pv(s,void 0,void 0,function(){var t;return mv(this,function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}})})}))];case 3:return r=i.sent(),n.dispose(),a=r.map(function(e){return new Qy(e)}),[2,t.isBatchInput?a:a[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(Oy);function zy(e,t){var n={expressions:t};return Object.assign({},e,n)}function Wy(e){return function(e){return e.detection instanceof Iv}(e)&&e.landmarks instanceof Ov&&e.unshiftedLandmarks instanceof Ov&&e.alignedRect instanceof Iv}function Vy(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),a=r.align(),s=e.detection.imageDims,i={landmarks:r,unshiftedLandmarks:t,alignedRect:new Iv(e.detection.score,a.rescale(s.reverse()),s)};return Object.assign({},e,i)}function Ky(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach(function(n,r){var a=n.x,s=n.y,i=t[r];e.moveTo(i.x,i.y),e.lineTo(a,s)}),n){var r=t[t.length-1],a=t[0];if(!r||!a)return;e.moveTo(r.x,r.y),e.lineTo(a.x,a.y)}e.stroke()}var Gy=function(e){void 0===e&&(e={});var t=e.drawLines,n=void 0===t||t,r=e.drawPoints,a=void 0===r||r,s=e.lineWidth,i=e.lineColor,o=e.pointSize,l=e.pointColor;this.drawLines=n,this.drawPoints=a,this.lineWidth=s||1,this.pointSize=o||2,this.lineColor=i||"rgba(0, 255, 255, 1)",this.pointColor=l||"rgba(255, 0, 255, 1)"};!function(){function e(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new Gy(t)}e.prototype.draw=function(e){var t=ny(e),n=this.options,r=n.drawLines,a=n.drawPoints,s=n.lineWidth,i=n.lineColor,o=n.pointSize,l=n.pointColor;if(r&&this.faceLandmarks instanceof Qv&&(t.strokeStyle=i,t.lineWidth=s,Ky(t,this.faceLandmarks.getJawOutline()),Ky(t,this.faceLandmarks.getLeftEyeBrow()),Ky(t,this.faceLandmarks.getRightEyeBrow()),Ky(t,this.faceLandmarks.getNose()),Ky(t,this.faceLandmarks.getLeftEye(),!0),Ky(t,this.faceLandmarks.getRightEye(),!0),Ky(t,this.faceLandmarks.getMouth(),!0)),a){t.strokeStyle=l,t.fillStyle=l;this.faceLandmarks.positions.forEach(function(e){t.beginPath(),t.arc(e.x,e.y,o,0,2*Math.PI),t.fill()})}}}();function qy(e,t){var n=[],r=Iy(e),a=r.extractWeights,s=r.getRemainingWeights,i=function(e,t){var n=By(e,t),r=Ey(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,a){return{separable_conv0:r(e,t,a+"/separable_conv0"),separable_conv1:r(t,t,a+"/separable_conv1"),expansion_conv:n(e,t,1,a+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(a,n),o=i.extractConvParams,l=i.extractSeparableConvParams,c=i.extractReductionBlockParams,u=i.extractMainBlockParams,d={conv_in:o(3,32,3,"entry_flow/conv_in"),reduction_block_0:c(32,64,"entry_flow/reduction_block_0"),reduction_block_1:c(64,128,"entry_flow/reduction_block_1")},A={};Cv(t,0,1).forEach(function(e){A["main_block_"+e]=u(128,"middle_flow/main_block_"+e)});var h={reduction_block:c(128,256,"exit_flow/reduction_block"),separable_conv:l(256,512,"exit_flow/separable_conv")};if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:n,params:{entry_flow:d,middle_flow:A,exit_flow:h}}}function Xy(e,t){var n=[],r=function(e,t){var n=_y(e,t),r=Dy(n),a=Fy(n);return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:function(e){return{separable_conv0:a(e+"/separable_conv0"),separable_conv1:a(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:a(e+"/separable_conv0"),separable_conv1:a(e+"/separable_conv1"),separable_conv2:a(e+"/separable_conv2")}}}}(e,n),a=r.extractConvParams,s=r.extractSeparableConvParams,i=r.extractReductionBlockParams,o=r.extractMainBlockParams,l={conv_in:a("entry_flow/conv_in"),reduction_block_0:i("entry_flow/reduction_block_0"),reduction_block_1:i("entry_flow/reduction_block_1")},c={};Cv(t,0,1).forEach(function(e){c["main_block_"+e]=o("middle_flow/main_block_"+e)});var u={reduction_block:i("exit_flow/reduction_block"),separable_conv:s("exit_flow/separable_conv")};return Cy(e,n),{params:{entry_flow:l,middle_flow:c,exit_flow:u},paramMappings:n}}function Yy(e,t,n){return ap(Vp(e,t.filters,n,"same"),t.bias)}function Jy(e,t,n){void 0===n&&(n=!0);var r=n?Um(e):e;return r=by(r,t.separable_conv0,[1,1]),r=by(Um(r),t.separable_conv1,[1,1]),r=dm(r,[3,3],[2,2],"same"),r=ap(r,Yy(e,t.expansion_conv,[2,2]))}var Zy,$y=function(e){function t(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return hv(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return Ul(function(){var r=Lv(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(sc(256)),a=Um(Yy(r,n.entry_flow.conv_in,[2,2]));return a=Jy(a,n.entry_flow.reduction_block_0,!1),a=Jy(a,n.entry_flow.reduction_block_1),Cv(t._numMainBlocks,0,1).forEach(function(e){a=function(e,t){var n=by(Um(e),t.separable_conv0,[1,1]);return n=by(Um(n),t.separable_conv1,[1,1]),n=by(Um(n),t.separable_conv2,[1,1]),ap(n,e)}(a,n.middle_flow["main_block_"+e])}),a=Jy(a,n.exit_flow.reduction_block),a=Um(by(a,n.exit_flow.separable_conv,[1,1]))})},t.prototype.forward=function(e){return pv(this,void 0,void 0,function(){var t;return mv(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hy(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Xy(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return qy(e,this._numMainBlocks)},t}(yy);!function(e){e.FEMALE="female",e.MALE="male"}(Zy||(Zy={}));var eb=function(e){function t(t){void 0===t&&(t=new $y(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return hv(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return Ul(function(){var r=e instanceof Ay?t.faceFeatureExtractor.forwardInput(e):e,a=Am(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:Py(a,n.fc.age).as1D(),gender:Py(a,n.fc.gender)}})},t.prototype.forwardInput=function(e){var t=this;return Ul(function(){var n=t.runNet(e),r=n.age,a=n.gender;return{age:r,gender:Cu(a)}})},t.prototype.forward=function(e){return pv(this,void 0,void 0,function(){var t;return mv(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hy(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.predictAgeAndGender=function(e){return pv(this,void 0,void 0,function(){var t,n,r,a,s,i,o=this;return mv(this,function(l){switch(l.label){case 0:return[4,hy(e)];case 1:return t=l.sent(),[4,this.forwardInput(t)];case 2:return n=l.sent(),r=iu(n.age),a=iu(n.gender),s=r.map(function(e,t){return{ageTensor:e,genderTensor:a[t]}}),[4,Promise.all(s.map(function(e){var t=e.ageTensor,n=e.genderTensor;return pv(o,void 0,void 0,function(){var e,r,a,s,i;return mv(this,function(o){switch(o.label){case 0:return[4,t.data()];case 1:return e=o.sent()[0],[4,n.data()];case 2:return r=o.sent()[0],s=(a=r>.5)?Zy.MALE:Zy.FEMALE,i=a?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:s,genderProbability:i}]}})})}))];case 3:return i=l.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=Iy(e),r=n.extractWeights,a=n.getRemainingWeights,s=ky(r,t),i=s(512,1,"fc/age"),o=s(512,2,"fc/gender");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{fc:{age:i,gender:o}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=Ry(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=_y(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Cy(e,t),{params:a,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},t}(yy),tb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.postProcess=function(e,t,n){var r=n.map(function(e){var n=e.width,r=e.height,a=t/Math.max(r,n);return{width:n*a,height:r*a}}),a=r.length;return Ul(function(){var n=function(e,t){return ru([Ac([68],e),Ac([68],t)],1).as2D(1,136).as1D()},s=function(e,t){var n=r[e],a=n.width,s=n.height;return t(a,s)?Math.abs(a-s)/2:0},i=e.mul(Ac([a,136],t)).sub(ru(Array.from(Array(a),function(e,t){return n(function(e){return s(e,function(e,t){return e<t})}(t),function(e){return s(e,function(e,t){return t<e})}(t))}))).div(ru(Array.from(Array(a),function(e,t){return n(r[t].width,r[t].height)})));return i})},t.prototype.forwardInput=function(e){var t=this;return Ul(function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map(function(e){return{height:e[0],width:e[1]}}))})},t.prototype.forward=function(e){return pv(this,void 0,void 0,function(){var t;return mv(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hy(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.detectLandmarks=function(e){return pv(this,void 0,void 0,function(){var t,n,r,a=this;return mv(this,function(s){switch(s.label){case 0:return[4,hy(e)];case 1:return t=s.sent(),n=Ul(function(){return iu(a.forwardInput(t))}),[4,Promise.all(n.map(function(e,n){return pv(a,void 0,void 0,function(){var r,a,s,i,o;return mv(this,function(l){switch(l.label){case 0:return s=(a=Array).from,[4,e.data()];case 1:return r=s.apply(a,[l.sent()]),i=r.filter(function(e,t){return wv(t)}),o=r.filter(function(e,t){return!wv(t)}),[2,new Qv(Array(68).fill(0).map(function(e,t){return new Sv(i[t],o[t])}),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}})})}))];case 2:return r=s.sent(),n.forEach(function(e){return e.dispose()}),[2,t.isBatchInput?r:r[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(Oy),nb=function(e){function t(t){return void 0===t&&(t=new Uy),e.call(this,"FaceLandmark68Net",t)||this}return hv(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(tb);var rb=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return hv(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Ul(function(){var n=wy(Lv(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(sc(255)),t.dense0,!0);return n=wy(n,t.dense1),n=wy(n,t.dense2),n=Am(n,[14,14],[2,2],"valid")})},t.prototype.forward=function(e){return pv(this,void 0,void 0,function(){var t;return mv(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hy(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=Ly(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return Cy(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=Iy(e),r=n.extractWeights,a=n.getRemainingWeights,s=Ty(r,t).extractDenseBlock3Params,i=s(3,32,"dense0",!0),o=s(32,64,"dense1"),l=s(64,128,"dense2");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:i,dense1:o,dense2:l}}}(e)},t}(yy),ab=function(e){function t(t){return void 0===t&&(t=new rb),e.call(this,"FaceLandmark68TinyNet",t)||this}return hv(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(tb);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}hv(t,e)}(nb);function sb(e,t,n,r,a){void 0===a&&(a="same");var s=t.conv,i=s.filters,o=s.bias,l=Vp(e,i,n,a);return l=function(e,t){return ap(xp(e,t.weights),t.biases)}(l=ap(l,o),t.scale),r?Um(l):l}function ib(e,t){return sb(e,t,[1,1],!1)}function ob(e,t){return sb(e,t,[2,2],!0,"valid")}function lb(e,t){function n(n,r,a,s){var i=function(t,n,r){var a=e(t),s=a.length/(n*r*r);if(s%1!==0)throw new Error("depth has to be an integer: "+s+", weights.length: "+a.length+", numFilters: "+n+", filterSize: "+r);return Ul(function(){return Om(cc(a,[n,s,r,r]),[2,3,1,0])})}(n,r,a),o=ic(e(r));return t.push({paramPath:s+"/filters"},{paramPath:s+"/bias"}),{filters:i,bias:o}}function r(r,a,s,i){var o=n(r,a,s,i+"/conv"),l=function(n,r){var a=ic(e(n)),s=ic(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:a,biases:s}}(a,i+"/scale");return{conv:o,scale:l}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,a,s){return void 0===s&&(s=!1),{conv1:r((s?.5:1)*e,t,n,a+"/conv1"),conv2:r(e,t,n,a+"/conv2")}}}}function cb(e,t){var n=_y(e,t);function r(e){var t=n(e+"/conv/filters",4),r=n(e+"/conv/bias",1),a=function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e);return{conv:{filters:t,bias:r},scale:a}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}function ub(e){var t=[],n=cb(e,t),r=n.extractConvLayerParams,a=n.extractResidualLayerParams,s=r("conv32_down"),i=a("conv32_1"),o=a("conv32_2"),l=a("conv32_3"),c=a("conv64_down"),u=a("conv64_1"),d=a("conv64_2"),A=a("conv64_3"),h=a("conv128_down"),f=a("conv128_1"),p=a("conv128_2"),m=a("conv256_down"),g=a("conv256_1"),x=a("conv256_2"),v=a("conv256_down_out"),y=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!vv(y,2))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+y);var b={conv32_down:s,conv32_1:i,conv32_2:o,conv32_3:l,conv64_down:c,conv64_1:u,conv64_2:d,conv64_3:A,conv128_down:h,conv128_1:f,conv128_2:p,conv256_down:m,conv256_1:g,conv256_2:x,conv256_down_out:v,fc:y};return Cy(e,t),{params:b,paramMappings:t}}function db(e,t){var n=function(e,t){return sb(e,t,[1,1],!0)}(e,t.conv1);return n=ib(n,t.conv2),n=ap(n,e),n=Um(n)}function Ab(e,t){var n=ob(e,t.conv1);n=ib(n,t.conv2);var r=Am(e,2,2,"valid"),a=dc(r.shape),s=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var i=gv(n.shape);i[1]=1;var o=dc(i),l=gv((n=mc([n,o],1)).shape);l[2]=1;var c=dc(l);n=mc([n,c],2)}return r=s?mc([r,a],3):r,n=ap(r,n),n=Um(n)}var hb=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return hv(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return Ul(function(){var n=ob(Lv(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(sc(256)),t.conv32_down);n=db(n=dm(n,3,2,"valid"),t.conv32_1),n=db(n,t.conv32_2),n=db(n,t.conv32_3),n=db(n=Ab(n,t.conv64_down),t.conv64_1),n=db(n,t.conv64_2),n=db(n,t.conv64_3),n=db(n=Ab(n,t.conv128_down),t.conv128_1),n=db(n,t.conv128_2),n=db(n=Ab(n,t.conv256_down),t.conv256_1);var r=(n=Ab(n=db(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return tm(r,t.fc)})},t.prototype.forward=function(e){return pv(this,void 0,void 0,function(){var t;return mv(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hy(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.computeFaceDescriptor=function(e){return pv(this,void 0,void 0,function(){var t,n,r,a=this;return mv(this,function(s){switch(s.label){case 0:return[4,hy(e)];case 1:return t=s.sent(),n=Ul(function(){return iu(a.forwardInput(t))}),[4,Promise.all(n.map(function(e){return e.data()}))];case 2:return r=s.sent(),n.forEach(function(e){return e.dispose()}),[2,t.isBatchInput?r:r[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return ub(e)},t.prototype.extractParams=function(e){return function(e){var t=Iy(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],s=lb(n,a),i=s.extractConvLayerParams,o=s.extractResidualLayerParams,l=i(4704,32,7,"conv32_down"),c=o(9216,32,3,"conv32_1"),u=o(9216,32,3,"conv32_2"),d=o(9216,32,3,"conv32_3"),A=o(36864,64,3,"conv64_down",!0),h=o(36864,64,3,"conv64_1"),f=o(36864,64,3,"conv64_2"),p=o(36864,64,3,"conv64_3"),m=o(147456,128,3,"conv128_down",!0),g=o(147456,128,3,"conv128_1"),x=o(147456,128,3,"conv128_2"),v=o(589824,256,3,"conv256_down",!0),y=o(589824,256,3,"conv256_1"),b=o(589824,256,3,"conv256_2"),w=o(589824,256,3,"conv256_down_out"),N=Ul(function(){return Om(oc(n(32768),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:l,conv32_1:c,conv32_2:u,conv32_3:d,conv64_down:A,conv64_1:h,conv64_2:f,conv64_3:p,conv128_down:m,conv128_1:g,conv128_2:x,conv256_down:v,conv256_1:y,conv256_2:b,conv256_down_out:w,fc:N},paramMappings:a}}(e)},t}(yy);function fb(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var pb=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,a=t.maxNumScales,s=t.scoreThresholds,i=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=a||10,this._scoreThresholds=s||[.6,.7,.7],this._scaleSteps=i,"number"!==typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!==typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!==typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some(function(e){return"number"!==typeof e}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(e){return"number"!==typeof e})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function mb(e,t){function n(n,r,a,s,i){var o=cc(e(n*r*a*a),[a,a,n,r]),l=ic(e(r));return t.push({paramPath:s+"/filters"},{paramPath:s+"/"+(i?"batch_norm_offset":"bias")}),{filters:o,bias:l}}function r(e,t,r,a){var s=n(e,t,r,a,!0);return{filters:s.filters,batch_norm_offset:s.bias}}function a(n,a,s){var i=function(n,r){var a=cc(e(9*n),[3,3,n,1]),s=ic(e(n)),i=ic(e(n)),o=ic(e(n)),l=ic(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:a,batch_norm_scale:s,batch_norm_offset:i,batch_norm_mean:o,batch_norm_variance:l}}(n,s+"/depthwise_conv");return{depthwise_conv:i,pointwise_conv:r(n,a,1,s+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:a(32,64,"mobilenetv1/conv_1"),conv_2:a(64,128,"mobilenetv1/conv_2"),conv_3:a(128,128,"mobilenetv1/conv_3"),conv_4:a(128,256,"mobilenetv1/conv_4"),conv_5:a(256,256,"mobilenetv1/conv_5"),conv_6:a(256,512,"mobilenetv1/conv_6"),conv_7:a(512,512,"mobilenetv1/conv_7"),conv_8:a(512,512,"mobilenetv1/conv_8"),conv_9:a(512,512,"mobilenetv1/conv_9"),conv_10:a(512,512,"mobilenetv1/conv_10"),conv_11:a(512,512,"mobilenetv1/conv_11"),conv_12:a(512,1024,"mobilenetv1/conv_12"),conv_13:a(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function gb(e){var t=[],n=function(e,t){var n=_y(e,t);function r(e,t,r){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function a(e){var t="mobilenetv1/conv_"+e,a="MobilenetV1/Conv2d_"+e+"_depthwise",s=t+"/depthwise_conv",i=t+"/pointwise_conv";return{depthwise_conv:{filters:n(a+"/depthwise_weights",4,s+"/filters"),batch_norm_scale:n(a+"/BatchNorm/gamma",1,s+"/batch_norm_scale"),batch_norm_offset:n(a+"/BatchNorm/beta",1,s+"/batch_norm_offset"),batch_norm_mean:n(a+"/BatchNorm/moving_mean",1,s+"/batch_norm_mean"),batch_norm_variance:n(a+"/BatchNorm/moving_variance",1,s+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,i)}}function s(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function i(e){return{box_encoding_predictor:s("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:s("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:i(0),box_predictor_1:i(1),box_predictor_2:i(2),box_predictor_3:i(3),box_predictor_4:i(4),box_predictor_5:i(5)}}}}(e,t),r=n.extractMobilenetV1Params,a=n.extractPredictionLayerParams,s=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!yv(s))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+s);var i={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:s}};return Cy(e,t),{params:i,paramMappings:t}}function xb(e,t,n){return Ul(function(){var r=Vp(e,t.filters,n,"same");return r=ap(r,t.batch_norm_offset),Af(r,0,6)})}function vb(e,t){return Ul(function(){var n=null,r=xb(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach(function(e,t){var a=t+1,s=function(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}(a);r=function(e,t,n){return Ul(function(){var r=Xp(e,t.filters,n,"same");return r=qf(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),Af(r,0,6)})}(r,e.depthwise_conv,s),r=xb(r,e.pointwise_conv,[1,1]),11===a&&(n=r)}),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function yb(e,t,n){var r=e.arraySync(),a=Math.min(r[t][0],r[t][2]),s=Math.min(r[t][1],r[t][3]),i=Math.max(r[t][0],r[t][2]),o=Math.max(r[t][1],r[t][3]),l=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),u=Math.max(r[n][0],r[n][2]),d=Math.max(r[n][1],r[n][3]),A=(i-a)*(o-s),h=(u-l)*(d-c);if(A<=0||h<=0)return 0;var f=Math.max(a,l),p=Math.max(s,c),m=Math.min(i,u),g=Math.min(o,d),x=Math.max(m-f,0)*Math.max(g-p,0);return x/(A+h-x)}function bb(e,t){var n=function(e){var t=iu(Om(e,[1,0])),n=[Np(t[2],t[0]),Np(t[3],t[1])];return{sizes:n,centers:[ap(t[0],lp(n[0],sc(2))),ap(t[1],lp(n[1],sc(2)))]}}(e),r=n.sizes,a=n.centers,s=iu(Om(t,[1,0])),i=lp(xp(mf(lp(s[2],sc(5))),r[0]),sc(2)),o=ap(xp(lp(s[0],sc(10)),r[0]),a[0]),l=lp(xp(mf(lp(s[3],sc(5))),r[1]),sc(2)),c=ap(xp(lp(s[1],sc(10)),r[1]),a[1]);return Om(ru([Np(o,i),Np(c,l),ap(o,i),ap(c,l)]),[1,0])}function wb(e,t){return Ul(function(){var n=e.shape[0];return{boxPredictionEncoding:eu(jy(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:eu(jy(e,t.class_predictor),[n,-1,3])}})}var Nb=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!==typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!==typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),jb=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return hv(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return Ul(function(){var n=e.toBatchTensor(512,!1).toFloat(),r=vb(Np(xp(n,sc(.007843137718737125)),sc(1)),t.mobilenetv1),a=function(e,t,n){return Ul(function(){var r=xb(e,n.conv_0,[1,1]),a=xb(r,n.conv_1,[2,2]),s=xb(a,n.conv_2,[1,1]),i=xb(s,n.conv_3,[2,2]),o=xb(i,n.conv_4,[1,1]),l=xb(o,n.conv_5,[2,2]),c=xb(l,n.conv_6,[1,1]),u=xb(c,n.conv_7,[2,2]),d=wb(t,n.box_predictor_0),A=wb(e,n.box_predictor_1),h=wb(a,n.box_predictor_2),f=wb(i,n.box_predictor_3),p=wb(l,n.box_predictor_4),m=wb(u,n.box_predictor_5);return{boxPredictions:mc([d.boxPredictionEncoding,A.boxPredictionEncoding,h.boxPredictionEncoding,f.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding],1),classPredictions:mc([d.classPrediction,A.classPrediction,h.classPrediction,f.classPrediction,p.classPrediction,m.classPrediction],1)}})}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return Ul(function(){var r=e.shape[0],a=bb(eu(au(n.extra_dim,[r,1,1]),[-1,4]),eu(e,[-1,4]));a=eu(a,[r,a.shape[0]/r,4]);var s=Bf(mm(t,[0,0,1],[-1,-1,-1])),i=mm(s,[0,0,0],[-1,-1,1]);return i=eu(i,[r,i.shape[1]]),{boxes:iu(a),scores:iu(i)}})}(a.boxPredictions,a.classPredictions,t.output_layer)})},t.prototype.forward=function(e){return pv(this,void 0,void 0,function(){var t;return mv(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,hy(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),pv(this,void 0,void 0,function(){var n,r,a,s,i,o,l,c,u,d,A,h,f,p,m,g,x,v,y,b;return mv(this,function(w){switch(w.label){case 0:return n=new Nb(t),r=n.maxResults,a=n.minConfidence,[4,hy(e)];case 1:for(s=w.sent(),i=this.forwardInput(s),o=i.boxes,l=i.scores,c=o[0],u=l[0],d=1;d<o.length;d++)o[d].dispose(),l[d].dispose();return f=(h=Array).from,[4,u.data()];case 2:return A=f.apply(h,[w.sent()]),p=function(e,t,n,r,a){var s=e.shape[0],i=Math.min(n,s),o=t.map(function(e,t){return{score:e,boxIndex:t}}).filter(function(e){return e.score>a}).sort(function(e,t){return t.score-e.score}),l=function(e){return e<=r?1:0},c=[];return o.forEach(function(t){if(!(c.length>=i)){for(var n=t.score,r=c.length-1;r>=0;--r){var s=yb(e,t.boxIndex,c[r]);if(0!==s&&(t.score*=l(s),t.score<=a))break}n===t.score&&c.push(t.boxIndex)}}),c}(c,A,r,.5,a),m=s.getReshapedInputDimensions(0),g=s.inputSize,x=g/m.width,v=g/m.height,y=c.arraySync(),b=p.map(function(e){var t=[Math.max(0,y[e][0]),Math.min(1,y[e][2])].map(function(e){return e*v}),n=t[0],r=t[1],a=[Math.max(0,y[e][1]),Math.min(1,y[e][3])].map(function(e){return e*x}),i=a[0],o=a[1];return new Iv(A[e],new Rv(i,n,o-i,r-n),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),c.dispose(),u.dispose(),[2,b]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return gb(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=Iy(e),r=n.extractWeights,a=n.getRemainingWeights,s=mb(r,t),i=s.extractMobilenetV1Params,o=s.extractPredictionLayerParams,l=i(),c=o(),u={extra_dim:lc(r(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:l,prediction_layer:c,output_layer:u},paramMappings:t}}(e)},t}(yy);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}hv(t,e)}(jb);var Cb,Bb=[new Sv(.738768,.874946),new Sv(2.42204,2.65704),new Sv(4.30971,7.04493),new Sv(10.246,4.59428),new Sv(12.6868,11.8741)],kb=[new Sv(1.603231,2.094468),new Sv(6.041143,7.080126),new Sv(2.882459,3.518061),new Sv(4.266906,5.178857),new Sv(9.041765,10.66308)],Sb=[117.001,114.697,97.404],Eb=function(e){return"number"===typeof e};function Fb(e){return Ul(function(){var t=xp(e,sc(.10000000149011612));return ap(Um(Np(e,t)),t)})}function _b(e,t){return Ul(function(){var n=Vc(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Vp(n,t.conv.filters,[1,1],"valid"),n=Np(n,t.bn.sub),n=xp(n,t.bn.truediv),Fb(n=ap(n,t.conv.bias))})}function Ib(e,t){return Ul(function(){var n=Vc(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Zp(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),Fb(n=ap(n,t.bias))})}function Tb(e,t){var n=By(e,t);var r=Ey(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,a,s){var i=n(r,a,3,s+"/conv"),o=function(n,r){var a=ic(e(n)),s=ic(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:a,truediv:s}}(a,s+"/bn");return{conv:i,bn:o}},extractSeparableConvParams:r}}function Db(e,t){var n=_y(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){var t=r(e+"/conv"),a=function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn");return{conv:t,bn:a}},extractSeparableConvParams:Fy(n)}}!function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(Cb||(Cb={}));var Lb=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!==typeof this._inputSize||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!==typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),Ub=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this;return function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!==typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!Eb(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(e){return"string"===typeof e}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(e){return e||{}}).every(function(e){return Eb(e.x)&&Eb(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(Eb)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(t),n._config=t,n}return hv(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=_b(e,t.conv0);return n=_b(n=dm(n,[2,2],[2,2],"same"),t.conv1),n=_b(n=dm(n,[2,2],[2,2],"same"),t.conv2),n=_b(n=dm(n,[2,2],[2,2],"same"),t.conv3),n=_b(n=dm(n,[2,2],[2,2],"same"),t.conv4),n=_b(n=dm(n,[2,2],[2,2],"same"),t.conv5),n=_b(n=dm(n,[2,2],[1,1],"same"),t.conv6),jy(n=_b(n,t.conv7),t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?Fb(jy(e,t.conv0,"valid",!1)):Ib(e,t.conv0);return n=Ib(n=dm(n,[2,2],[2,2],"same"),t.conv1),n=Ib(n=dm(n,[2,2],[2,2],"same"),t.conv2),n=Ib(n=dm(n,[2,2],[2,2],"same"),t.conv3),n=Ib(n=dm(n,[2,2],[2,2],"same"),t.conv4),n=Ib(n=dm(n,[2,2],[2,2],"same"),t.conv5),n=dm(n,[2,2],[1,1],"same"),n=t.conv6?Ib(n,t.conv6):n,jy(n=t.conv7?Ib(n,t.conv7):n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return Ul(function(){var a=e.toBatchTensor(t,!1).toFloat();return a=(a=n.config.meanRgb?Lv(a,n.config.meanRgb):a).div(sc(256)),n.config.withSeparableConvs?n.runMobilenet(a,r):n.runTinyYolov2(a,r)})},t.prototype.forward=function(e,t){return pv(this,void 0,void 0,function(){var n;return mv(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,hy(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent()]}})})},t.prototype.detect=function(e,t){return void 0===t&&(t={}),pv(this,void 0,void 0,function(){var n,r,a,s,i,o,l,c,u,d,A,h,f,p=this;return mv(this,function(m){switch(m.label){case 0:return n=new Lb(t),r=n.inputSize,a=n.scoreThreshold,[4,hy(e)];case 1:return s=m.sent(),[4,this.forwardInput(s,r)];case 2:return i=m.sent(),o=Ul(function(){return iu(i)[0].expandDims()}),l={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(o,s.getReshapedInputDimensions(0),a)];case 3:return c=m.sent(),i.dispose(),o.dispose(),u=c.map(function(e){return e.box}),d=c.map(function(e){return e.score}),A=c.map(function(e){return e.classScore}),h=c.map(function(e){return p.config.classes[e.label]}),f=Dv(u.map(function(e){return e.rescale(r)}),d,this.config.iouThreshold,!0),[2,f.map(function(e){return new _v(d[e],A[e],h[e],u[e],l)})]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,r=[],a=Db(e,r),s=a.extractConvParams,i=a.extractConvWithBatchNormParams,o=a.extractSeparableConvParams;if(t.withSeparableConvs){var l=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?s("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:l>7?o("conv6"):void 0,conv7:l>8?o("conv7"):void 0,conv8:s("conv8")}}else n={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:s("conv8")};return Cy(e,r),{params:n,paramMappings:r}}(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(e,t,n,r){var a,s=Iy(e),i=s.extractWeights,o=s.getRemainingWeights,l=[],c=Tb(i,l),u=c.extractConvParams,d=c.extractConvWithBatchNormParams,A=c.extractSeparableConvParams;if(t.withSeparableConvs){var h=r[0],f=r[1],p=r[2],m=r[3],g=r[4],x=r[5],v=r[6],y=r[7],b=r[8];a={conv0:t.isFirstLayerConv2d?u(h,f,3,"conv0"):A(h,f,"conv0"),conv1:A(f,p,"conv1"),conv2:A(p,m,"conv2"),conv3:A(m,g,"conv3"),conv4:A(g,x,"conv4"),conv5:A(x,v,"conv5"),conv6:y?A(v,y,"conv6"):void 0,conv7:b?A(y,b,"conv7"):void 0,conv8:u(b||y||v,5*n,1,"conv8")}}else h=r[0],f=r[1],p=r[2],m=r[3],g=r[4],x=r[5],v=r[6],y=r[7],b=r[8],a={conv0:d(h,f,"conv0"),conv1:d(f,p,"conv1"),conv2:d(p,m,"conv2"),conv3:d(m,g,"conv3"),conv4:d(g,x,"conv4"),conv5:d(x,v,"conv5"),conv6:d(v,y,"conv6"),conv7:d(y,b,"conv7"),conv8:u(b,5*n,1,"conv8")};if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{params:a,paramMappings:l}}(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return pv(this,void 0,void 0,function(){var r,a,s,i,o,l,c,u,d,A,h,f,p,m,g,x,v,y,b,w,N,j,C,B,k,S,E,F,_,I=this;return mv(this,function(T){switch(T.label){case 0:return r=t.width,a=t.height,s=Math.max(r,a),i=s/r,o=s/a,l=e.shape[1],c=this.config.anchors.length,u=Ul(function(){var t=e.reshape([l,l,c,I.boxEncodingSize]);return[t.slice([0,0,0,0],[l,l,c,4]),t.slice([0,0,0,4],[l,l,c,1]),I.withClassScores?Cu(t.slice([0,0,0,5],[l,l,c,I.config.classes.length]),3):sc(0)]}),d=u[0],A=u[1],h=u[2],f=[],[4,A.array()];case 1:return p=T.sent(),[4,d.array()];case 2:m=T.sent(),g=0,T.label=3;case 3:if(!(g<l))return[3,12];x=0,T.label=4;case 4:if(!(x<l))return[3,11];v=0,T.label=5;case 5:return v<c?(y=Uv(p[g][x][v][0]),!n||y>n?(b=(x+Uv(m[g][x][v][0]))/l*i,w=(g+Uv(m[g][x][v][1]))/l*o,N=Math.exp(m[g][x][v][2])*this.config.anchors[v].x/l*i,j=Math.exp(m[g][x][v][3])*this.config.anchors[v].y/l*o,C=b-N/2,B=w-j/2,k={row:g,col:x,anchor:v},this.withClassScores?[4,this.extractPredictedClass(h,k)]:[3,7]):[3,9]):[3,10];case 6:return _=T.sent(),[3,8];case 7:_={classScore:1,label:0},T.label=8;case 8:E=(S=_).classScore,F=S.label,f.push(fv({box:new Fv(C,B,C+N,B+j),score:y,classScore:y*E,label:F},k)),T.label=9;case 9:return v++,[3,5];case 10:return x++,[3,4];case 11:return g++,[3,3];case 12:return d.dispose(),A.dispose(),h.dispose(),[2,f]}})})},t.prototype.extractPredictedClass=function(e,t){return pv(this,void 0,void 0,function(){var n,r,a,s;return mv(this,function(i){switch(i.label){case 0:return n=t.row,r=t.col,a=t.anchor,[4,e.array()];case 1:return s=i.sent(),[2,Array(this.config.classes.length).fill(0).map(function(e,t){return s[n][r][a][t]}).map(function(e,t){return{classScore:e,label:t}}).reduce(function(e,t){return e.classScore>t.classScore?e:t})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(yy),Pb=function(e){function t(t){void 0===t&&(t=!0);var n=Object.assign({},{withSeparableConvs:t,iouThreshold:.4,classes:["face"]},t?{anchors:kb,meanRgb:Sb}:{anchors:Bb,withClassScores:!0});return e.call(this,n)||this}return hv(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return pv(this,void 0,void 0,function(){return mv(this,function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map(function(e){return new Iv(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(Ub);var Rb=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return hv(t,e),t}(Lb),Ob=function(){function e(){}return e.prototype.then=function(e){return pv(this,void 0,void 0,function(){var t;return mv(this,function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}})})},e.prototype.run=function(){return pv(this,void 0,void 0,function(){return mv(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},e}();function Mb(e,t){var n={descriptor:t};return Object.assign({},e,n)}function Qb(e,t,n,r,a){return void 0===a&&(a=function(e){return e.alignedRect}),pv(this,void 0,void 0,function(){var s,i,o,l,c;return mv(this,function(u){switch(u.label){case 0:return s=e.map(function(e){return Wy(e)?a(e):e.detection}),(o=r)?[3,5]:t instanceof fo?[4,py(t,s)]:[3,2];case 1:return l=u.sent(),[3,4];case 2:return[4,fy(t,s)];case 3:l=u.sent(),u.label=4;case 4:o=l,u.label=5;case 5:return[4,n(i=o)];case 6:return c=u.sent(),i.forEach(function(e){return e instanceof fo&&e.dispose()}),[2,c]}})})}function Hb(e,t,n,r,a){return pv(this,void 0,void 0,function(){var s=this;return mv(this,function(i){return[2,Qb([e],t,function(e){return pv(s,void 0,void 0,function(){return mv(this,function(t){return[2,n(e[0])]})})},r,a)]})})}function zb(e){var t=Iy(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],s=function(e,t){var n=By(e,t),r=ky(e,t);function a(n,r){var a=ic(e(n));return t.push({paramPath:r}),a}function s(e,t,r){return void 0===r&&(r=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:a(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:a(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:a(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=s([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return fv(fv({},e),{conv4_1:t,conv4_2:r})},extractRNetParams:function(){var e=s([3,28,48,64],"rnet",!0),t=r(576,128,"rnet/fc1"),n=a(128,"rnet/prelu4_alpha"),i=r(128,2,"rnet/fc2_1"),o=r(128,4,"rnet/fc2_2");return fv(fv({},e),{fc1:t,prelu4_alpha:n,fc2_1:i,fc2_2:o})},extractONetParams:function(){var e=s([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),i=a(128,"onet/prelu4_alpha"),o=r(1152,256,"onet/fc1"),l=a(256,"onet/prelu5_alpha"),c=r(256,2,"onet/fc2_1"),u=r(256,4,"onet/fc2_2"),d=r(256,10,"onet/fc2_3");return fv(fv({},e),{conv4:t,prelu4_alpha:i,fc1:o,prelu5_alpha:l,fc2_1:c,fc2_2:u,fc2_3:d})}}}(n,a),i=s.extractPNetParams,o=s.extractRNetParams,l=s.extractONetParams,c=i(),u=o(),d=l();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:c,rnet:u,onet:d},paramMappings:a}}function Wb(e){var t=[],n=function(e,t){var n=_y(e,t);function r(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function a(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function s(e){return n(e,1)}function i(e){return{conv1:r(e+"/conv1"),prelu1_alpha:s(e+"/prelu1_alpha"),conv2:r(e+"/conv2"),prelu2_alpha:s(e+"/prelu2_alpha"),conv3:r(e+"/conv3"),prelu3_alpha:s(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=i("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2");return fv(fv({},e),{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=i("rnet"),t=a("rnet/fc1"),n=s("rnet/prelu4_alpha"),r=a("rnet/fc2_1"),o=a("rnet/fc2_2");return fv(fv({},e),{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:o})},extractONetParams:function(){var e=i("onet"),t=r("onet/conv4"),n=s("onet/prelu4_alpha"),o=a("onet/fc1"),l=s("onet/prelu5_alpha"),c=a("onet/fc2_1"),u=a("onet/fc2_2"),d=a("onet/fc2_3");return fv(fv({},e),{conv4:t,prelu4_alpha:n,fc1:o,prelu5_alpha:l,fc2_1:c,fc2_2:u,fc2_3:d})}}}(e,t),r=n.extractPNetParams,a=n.extractRNetParams,s=n.extractONetParams,i=r(),o=a(),l=s();return Cy(e,t),{params:{pnet:i,rnet:o,onet:l},paramMappings:t}}function Vb(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}var Kb=function(e){function t(t,n,r,a){return e.call(this,{left:t,top:n,right:r,bottom:a},!0)||this}return hv(t,e),t}(Ev);function Gb(e){return Ul(function(){return xp(Np(e,sc(127.5)),sc(.0078125))})}function qb(e,t){return Ul(function(){return ap(Um(e),xp(t,wf(Um(wf(e)))))})}function Xb(e,t,n){return void 0===n&&(n=!1),Ul(function(){var r=jy(e,t.conv1,"valid");return r=qb(r,t.prelu1_alpha),r=qb(r=jy(r=dm(r,n?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),r=qb(r=jy(r=n?r:dm(r,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)})}function Yb(e,t,n,r,a){a.stage1=[];var s=t.map(function(t){return Ul(function(){var n={scale:t},a=function(e,t){return Ul(function(){var n=Vb(t,e.shape.slice(1)),r=n.height,a=n.width,s=Gb(_g.resizeBilinear(e,[r,a]));return Om(s,[0,2,1,3])})}(e,t),s=Date.now(),i=function(e,t){return Ul(function(){var n=Xb(e,t,!0),r=jy(n,t.conv4_1,"valid"),a=Qc(km(r,3),3);return{prob:Cu(Np(r,a),3),regions:jy(n,t.conv4_2,"valid")}})}(a,r),o=i.prob,l=i.regions;return n.pnet=Date.now()-s,{scoresTensor:iu(iu(o,3)[1])[0],regionsTensor:iu(l)[0],scale:t,statsForScale:n}})}),i=s.map(function(e){var t=e.scoresTensor,r=e.regionsTensor,s=e.scale,i=e.statsForScale,o=function(e,t,n,r){for(var a=[],s=e.arraySync(),i=0;i<e.shape[0];i++)for(var o=0;o<e.shape[1];o++)s[i][o]>=r&&a.push(new Sv(o,i));return a.map(function(e){var r=new Fv(Math.round((2*e.y+1)/n),Math.round((2*e.x+1)/n),Math.round((2*e.y+12)/n),Math.round((2*e.x+12)/n)),a=s[e.y][e.x],i=t.arraySync();return{cell:r,score:a,region:new Kb(i[e.y][e.x][0],i[e.y][e.x][1],i[e.y][e.x][2],i[e.y][e.x][3])}})}(t,r,s,n);if(t.dispose(),r.dispose(),!o.length)return a.stage1.push(i),[];var l=Date.now(),c=Dv(o.map(function(e){return e.cell}),o.map(function(e){return e.score}),.5);return i.nms=Date.now()-l,i.numBoxes=c.length,a.stage1.push(i),c.map(function(e){return o[e]})}),o=i.reduce(function(e,t){return e.concat(t)},[]),l=[],c=[];if(o.length>0){var u=Date.now(),d=Dv(o.map(function(e){return e.cell}),o.map(function(e){return e.score}),.7);a.stage1_nms=Date.now()-u,c=d.map(function(e){return o[e].score}),l=d.map(function(e){return o[e]}).map(function(e){var t=e.cell,n=e.region;return new Fv(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()})}return{boxes:l,scores:c}}function Jb(e,t,n){var r=n.width,a=n.height;return pv(this,void 0,void 0,function(){var n,s,i,o=this;return mv(this,function(l){switch(l.label){case 0:return n=ny(e),[4,Promise.all(t.map(function(t){return pv(o,void 0,void 0,function(){var r,a,s,i,o,l,c,u;return mv(this,function(d){return r=t.padAtBorders(e.height,e.width),a=r.y,s=r.ey,i=r.x,o=r.ex,l=i-1,c=a-1,u=n.getImageData(l,c,o-l,s-c),[2,ey.isNodejs()?cy(u):createImageBitmap(u)]})})}))];case 1:return s=l.sent(),i=[],s.forEach(function(e){var t=ny(ly({width:r,height:a}));t.drawImage(e,0,0,r,a);for(var n=t.getImageData(0,0,r,a).data,s=[],o=0;o<n.length;o+=4)s.push(n[o+2]),s.push(n[o+1]),s.push(n[o]);i.push(s)}),[2,i.map(function(e){return Ul(function(){return Gb(Om(cc(e,[1,r,a,3]),[0,2,1,3]).toFloat())})})]}})})}function Zb(e,t,n,r,a){return pv(this,void 0,void 0,function(){var s,i,o,l,c,u,d,A,h,f,p,m,g,x;return mv(this,function(v){switch(v.label){case 0:return s=Date.now(),[4,Jb(e,t,{width:24,height:24})];case 1:return i=v.sent(),a.stage2_extractImagePatches=Date.now()-s,s=Date.now(),o=i.map(function(e){var t=function(e,t){return Ul(function(){var n=Xb(e,t),r=qb(Py(eu(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),a=Py(r,t.fc2_1),s=Qc(km(a,1),1),i=Cu(Np(a,s),1),o=Py(r,t.fc2_2);return{scores:iu(i,1)[1],regions:o}})}(e,r);return e.dispose(),t}),a.stage2_rnet=Date.now()-s,l=o.length>1?mc(o.map(function(e){return e.scores})):o[0].scores,d=(u=Array).from,[4,l.data()];case 2:return c=d.apply(u,[v.sent()]),l.dispose(),A=c.map(function(e,t){return{score:e,idx:t}}).filter(function(e){return e.score>n}).map(function(e){return e.idx}),h=A.map(function(e){return t[e]}),f=A.map(function(e){return c[e]}),p=[],m=[],h.length>0&&(s=Date.now(),g=Dv(h,f,.7),a.stage2_nms=Date.now()-s,x=g.map(function(e){var t=o[A[e]].regions.arraySync();return new Kb(t[0][0],t[0][1],t[0][2],t[0][3])}),m=g.map(function(e){return f[e]}),p=g.map(function(e,t){return h[e].calibrate(x[t])})),o.forEach(function(e){e.regions.dispose(),e.scores.dispose()}),[2,{boxes:p,scores:m}]}})})}function $b(e,t,n,r,a){return pv(this,void 0,void 0,function(){var s,i,o,l,c,u,d,A,h,f,p,m,g,x,v;return mv(this,function(y){switch(y.label){case 0:return s=Date.now(),[4,Jb(e,t,{width:48,height:48})];case 1:return i=y.sent(),a.stage3_extractImagePatches=Date.now()-s,s=Date.now(),o=i.map(function(e){var t=function(e,t){return Ul(function(){var n=Xb(e,t);n=qb(n=jy(n=dm(n,[2,2],[2,2],"same"),t.conv4,"valid"),t.prelu4_alpha);var r=qb(Py(eu(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),a=Py(r,t.fc2_1),s=Qc(km(a,1),1),i=Cu(Np(a,s),1),o=Py(r,t.fc2_2),l=Py(r,t.fc2_3);return{scores:iu(i,1)[1],regions:o,points:l}})}(e,r);return e.dispose(),t}),a.stage3_onet=Date.now()-s,l=o.length>1?mc(o.map(function(e){return e.scores})):o[0].scores,d=(u=Array).from,[4,l.data()];case 2:return c=d.apply(u,[y.sent()]),l.dispose(),A=c.map(function(e,t){return{score:e,idx:t}}).filter(function(e){return e.score>n}).map(function(e){return e.idx}),h=A.map(function(e){var t=o[e].regions.arraySync();return new Kb(t[0][0],t[0][1],t[0][2],t[0][3])}),f=A.map(function(e,n){return t[e].calibrate(h[n])}),p=A.map(function(e){return c[e]}),m=[],g=[],x=[],f.length>0&&(s=Date.now(),v=Dv(f,p,.7,!1),a.stage3_nms=Date.now()-s,m=v.map(function(e){return f[e]}),g=v.map(function(e){return p[e]}),x=v.map(function(e,t){return Array(5).fill(0).map(function(n,r){var a=o[e].points.arraySync();return new Sv(a[0][r]*(m[t].width+1)+m[t].left,a[0][r+5]*(m[t].height+1)+m[t].top)})})),o.forEach(function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()}),[2,{boxes:m,scores:g,points:x}]}})})}var ew=function(e){function t(){return e.call(this,"Mtcnn")||this}return hv(t,e),t.prototype.load=function(t){return pv(this,void 0,void 0,function(){return mv(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]})})},t.prototype.loadFromDisk=function(t){return pv(this,void 0,void 0,function(){return mv(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]})})},t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),pv(this,void 0,void 0,function(){var n,r,a,s,i,o,l,c,u,d,A,h,f,p,m,g,x,v,y,b,w;return mv(this,function(N){switch(N.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(r=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},s=Date.now(),i=Ul(function(){return e=Qc(Yx.fromPixels(r)).toFloat(),Ul(function(){return ru(iu(e,3).reverse(),3)});var e}),o=function(e){return i.dispose(),a.total=Date.now()-s,e},l=i.shape.slice(1),c=l[0],u=l[1],d=new pb(t),A=d.minFaceSize,h=d.scaleFactor,f=d.maxNumScales,p=d.scoreThresholds,m=d.scaleSteps,g=(m||function(e,t,n){for(var r=n[0],a=n[1],s=12/e,i=[],o=Math.min(r,a)*s,l=0;o>=12;)i.push(s*Math.pow(t,l)),o*=t,l+=1;return i}(A,h,[c,u])).filter(function(e){var t=Vb(e,[c,u]);return Math.min(t.width,t.height)>12}).slice(0,f),a.scales=g,a.pyramid=g.map(function(e){return Vb(e,[c,u])}),x=Date.now(),[4,Yb(i,g,p[0],n.pnet,a)];case 1:return v=N.sent(),a.total_stage1=Date.now()-x,v.boxes.length?(a.stage2_numInputBoxes=v.boxes.length,x=Date.now(),[4,Zb(r,v.boxes,p[1],n.rnet,a)]):[2,o({results:[],stats:a})];case 2:return y=N.sent(),a.total_stage2=Date.now()-x,y.boxes.length?(a.stage3_numInputBoxes=y.boxes.length,x=Date.now(),[4,$b(r,y.boxes,p[2],n.onet,a)]):[2,o({results:[],stats:a})];case 3:return b=N.sent(),a.total_stage3=Date.now()-x,w=b.boxes.map(function(e,t){return Vy(Vv({},new Iv(b.scores[t],new Rv(e.left/u,e.top/c,e.width/u,e.height/c),{height:c,width:u})),new Mv(b.points[t].map(function(t){return t.sub(new Sv(e.left,e.top)).div(new Sv(e.width,e.height))}),{width:e.width,height:e.height}))}),[2,o({results:w,stats:a})]}})})},t.prototype.forward=function(e,t){return void 0===t&&(t={}),pv(this,void 0,void 0,function(){var n;return mv(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,hy(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent().results]}})})},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),pv(this,void 0,void 0,function(){var n;return mv(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,hy(e)];case 1:return[2,n.apply(this,[r.sent(),t])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Wb(e)},t.prototype.extractParams=function(e){return zb(e)},t}(yy),tw=[new Sv(1.603231,2.094468),new Sv(6.041143,7.080126),new Sv(2.882459,3.518061),new Sv(4.266906,5.178857),new Sv(9.041765,10.66308)],nw=[117.001,114.697,97.404],rw=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:tw,meanRgb:nw,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e.call(this,t)||this}return hv(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return pv(this,void 0,void 0,function(){return mv(this,function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map(function(e){return new Iv(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(Ub),aw={ssdMobilenetv1:new jb,tinyFaceDetector:new rw,tinyYolov2:new Pb,mtcnn:new ew,faceLandmark68Net:new nb,faceLandmark68TinyNet:new ab,faceRecognitionNet:new hb,faceExpressionNet:new Hy,ageGenderNet:new eb};function sw(e,t){var n={age:t};return Object.assign({},e,n)}var iw=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.extractedFaces=r,a}return hv(t,e),t}(Ob),ow=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.run=function(){return pv(this,void 0,void 0,function(){var e,t,n=this;return mv(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,Qb(e=r.sent(),this.input,function(e){return pv(n,void 0,void 0,function(){return mv(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return aw.faceExpressionNet.predictExpressions(e)}))];case 1:return[2,t.sent()]}})})},this.extractedFaces)];case 2:return t=r.sent(),[2,e.map(function(e,n){return zy(e,t[n])})]}})})},t.prototype.withAgeAndGender=function(){return new Aw(this,this.input)},t}(iw),lw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.run=function(){return pv(this,void 0,void 0,function(){var e,t;return mv(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,Hb(e,this.input,function(e){return aw.faceExpressionNet.predictExpressions(e)},this.extractedFaces)]:[2];case 2:return t=n.sent(),[2,zy(e,t)]}})})},t.prototype.withAgeAndGender=function(){return new hw(this,this.input)},t}(iw),cw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.withAgeAndGender=function(){return new fw(this,this.input)},t.prototype.withFaceDescriptors=function(){return new gw(this,this.input)},t}(ow),uw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.withAgeAndGender=function(){return new pw(this,this.input)},t.prototype.withFaceDescriptor=function(){return new xw(this,this.input)},t}(lw),dw=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.extractedFaces=r,a}return hv(t,e),t}(Ob),Aw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.run=function(){return pv(this,void 0,void 0,function(){var e,t,n=this;return mv(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,Qb(e=r.sent(),this.input,function(e){return pv(n,void 0,void 0,function(){return mv(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return aw.ageGenderNet.predictAgeAndGender(e)}))];case 1:return[2,t.sent()]}})})},this.extractedFaces)];case 2:return t=r.sent(),[2,e.map(function(e,n){var r=t[n],a=r.age;return sw(fb(e,r.gender,r.genderProbability),a)})]}})})},t.prototype.withFaceExpressions=function(){return new ow(this,this.input)},t}(dw),hw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.run=function(){return pv(this,void 0,void 0,function(){var e,t,n,r,a;return mv(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return(e=s.sent())?[4,Hb(e,this.input,function(e){return aw.ageGenderNet.predictAgeAndGender(e)},this.extractedFaces)]:[2];case 2:return t=s.sent(),n=t.age,r=t.gender,a=t.genderProbability,[2,sw(fb(e,r,a),n)]}})})},t.prototype.withFaceExpressions=function(){return new lw(this,this.input)},t}(dw),fw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.withFaceExpressions=function(){return new cw(this,this.input)},t.prototype.withFaceDescriptors=function(){return new gw(this,this.input)},t}(Aw),pw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.withFaceExpressions=function(){return new uw(this,this.input)},t.prototype.withFaceDescriptor=function(){return new xw(this,this.input)},t}(hw),mw=function(e){function t(t,n){var r=e.call(this)||this;return r.parentTask=t,r.input=n,r}return hv(t,e),t}(Ob),gw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.run=function(){return pv(this,void 0,void 0,function(){var e;return mv(this,function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,Qb(e=t.sent(),this.input,function(e){return Promise.all(e.map(function(e){return aw.faceRecognitionNet.computeFaceDescriptor(e)}))},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return[2,t.sent().map(function(t,n){return Mb(e[n],t)})]}})})},t.prototype.withFaceExpressions=function(){return new cw(this,this.input)},t.prototype.withAgeAndGender=function(){return new fw(this,this.input)},t}(mw),xw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.run=function(){return pv(this,void 0,void 0,function(){var e,t;return mv(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,Hb(e,this.input,function(e){return aw.faceRecognitionNet.computeFaceDescriptor(e)},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return t=n.sent(),[2,Mb(e,t)]}})})},t.prototype.withFaceExpressions=function(){return new uw(this,this.input)},t.prototype.withAgeAndGender=function(){return new pw(this,this.input)},t}(mw),vw=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.useTinyLandmarkNet=r,a}return hv(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?aw.faceLandmark68TinyNet:aw.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(Ob),yw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.run=function(){return pv(this,void 0,void 0,function(){var e,t,n,r,a,s=this;return mv(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),t=e.map(function(e){return e.detection}),this.input instanceof fo?[4,py(this.input,t)]:[3,3];case 2:return r=i.sent(),[3,5];case 3:return[4,fy(this.input,t)];case 4:r=i.sent(),i.label=5;case 5:return n=r,[4,Promise.all(n.map(function(e){return s.landmarkNet.detectLandmarks(e)}))];case 6:return a=i.sent(),n.forEach(function(e){return e instanceof fo&&e.dispose()}),[2,e.map(function(e,t){return Vy(e,a[t])})]}})})},t.prototype.withFaceExpressions=function(){return new cw(this,this.input)},t.prototype.withAgeAndGender=function(){return new fw(this,this.input)},t.prototype.withFaceDescriptors=function(){return new gw(this,this.input)},t}(vw),bw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.run=function(){return pv(this,void 0,void 0,function(){var e,t,n,r,a;return mv(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return(e=s.sent())?(t=e.detection,this.input instanceof fo?[4,py(this.input,[t])]:[3,3]):[2];case 2:return r=s.sent(),[3,5];case 3:return[4,fy(this.input,[t])];case 4:r=s.sent(),s.label=5;case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return a=s.sent(),n.forEach(function(e){return e instanceof fo&&e.dispose()}),[2,Vy(e,a)]}})})},t.prototype.withFaceExpressions=function(){return new uw(this,this.input)},t.prototype.withAgeAndGender=function(){return new pw(this,this.input)},t.prototype.withFaceDescriptor=function(){return new xw(this,this.input)},t}(vw),ww=function(e){function t(t,n){void 0===n&&(n=new Nb);var r=e.call(this)||this;return r.input=t,r.options=n,r}return hv(t,e),t}(Ob),Nw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.run=function(){return pv(this,void 0,void 0,function(){var e,t,n,r;return mv(this,function(a){switch(a.label){case 0:return t=(e=this).input,(n=e.options)instanceof pb?[4,aw.mtcnn.forward(t,n)]:[3,2];case 1:return[2,a.sent().map(function(e){return e.detection})];case 2:if(r=n instanceof Rb?function(e){return aw.tinyFaceDetector.locateFaces(e,n)}:n instanceof Nb?function(e){return aw.ssdMobilenetv1.locateFaces(e,n)}:n instanceof Lb?function(e){return aw.tinyYolov2.locateFaces(e,n)}:null,!r)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(t)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(t){return pv(e,void 0,void 0,function(){var e;return mv(this,function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e.map(function(e){return Vv({},e)}))]}})})})},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new yw(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new ow(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new Aw(this.runAndExtendWithFaceDetections(),this.input)},t}(ww),jw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hv(t,e),t.prototype.run=function(){return pv(this,void 0,void 0,function(){var e,t;return mv(this,function(n){switch(n.label){case 0:return[4,new Nw(this.input,this.options)];case 1:return e=n.sent(),t=e[0],e.forEach(function(e){e.score>t.score&&(t=e)}),[2,t]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(t){return pv(e,void 0,void 0,function(){var e;return mv(this,function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e?Vv({},e):void 0)]}})})})},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new bw(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new lw(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new hw(this.runAndExtendWithFaceDetection(),this.input)},t}(ww);function Cw(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map(function(e,t){return e-r[t]}).reduce(function(e,t){return e+Math.pow(t,2)},0))}!function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,a=function(){return"person "+r++};this._labeledDescriptors=n.map(function(e){if(e instanceof Wv)return e;if(e instanceof Float32Array)return new Wv(a(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new Wv(a(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map(function(t){return Cw(t,e)}).reduce(function(e,t){return e+t},0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map(function(n){var r=n.descriptors,a=n.label;return new Hv(a,t.computeMeanDistance(e,r))}).reduce(function(e,t){return e.distance<t.distance?e:t})},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new Hv("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},e.fromJSON=function(t){var n=t.labeledDescriptors.map(function(e){return Wv.fromJSON(e)});return new e(n,t.distanceThreshold)}}();const Bw=new class{constructor(){this.isModelLoaded=!1,this.enrolledFaces=new Map,this.initPromise=null}async initialize(){return this.initPromise||(this.initPromise=this._initializeWithRetry()),this.initPromise}async _initializeWithRetry(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;for(let r=1;r<=e;r++)try{return console.log("Face recognition initialization attempt ".concat(r,"/").concat(e)),await this._loadModels(),void await this._loadEnrolledFaces()}catch(n){if(console.error("Initialization attempt ".concat(r," failed:"),n.message),r===e)throw n;const a=t*Math.pow(2,r-1);console.log("Retrying in ".concat(a,"ms...")),await new Promise(e=>setTimeout(e,a))}}async _loadModels(){if(this.isModelLoaded)console.log("Models already loaded, skipping...");else try{console.log("Loading face-api.js models..."),console.log("Loading models sequentially to avoid conflicts..."),await aw.tinyFaceDetector.loadFromUri("/models"),console.log("\u2713 TinyFaceDetector loaded"),await aw.faceLandmark68Net.loadFromUri("/models"),console.log("\u2713 FaceLandmark68Net loaded"),await aw.faceRecognitionNet.loadFromUri("/models"),console.log("\u2713 FaceRecognitionNet loaded"),this.isModelLoaded=!0,console.log("\u2705 All face-api.js models loaded successfully")}catch(e){console.error("\u274c Error loading face-api.js models:",e);try{console.log("Trying fallback: loading only essential models..."),await aw.tinyFaceDetector.loadFromUri("/models"),await aw.faceLandmark68Net.loadFromUri("/models"),await aw.faceRecognitionNet.loadFromUri("/models"),this.isModelLoaded=!0,console.log("\u2705 Face-api.js essential models loaded successfully (fallback)")}catch(t){throw console.error("\u274c Failed to load models even with fallback:",t),new Error("Failed to load face recognition models. Please check network connectivity and model files. Error: ".concat(e.message))}}}async _loadEnrolledFaces(){try{this._loadFromStorage(),console.log("Fetching enrolled faces from backend...");const e=(await Ea.get("/admin/workers")).data;for(const t of e)if(t.faceEncodings&&t.faceEncodings.length>0){const e=t.faceEncodings.map(e=>new Float32Array(e));this.enrolledFaces.has(t._id)||(this.enrolledFaces.set(t._id,e),console.log("Loaded face data for worker: ".concat(t.name)))}this._saveToStorage(),console.log("Successfully loaded enrolled faces. Total enrolled workers:",this.enrolledFaces.size)}catch(e){console.error("Error loading enrolled faces from backend:",e)}}async detectFaceFromImage(e){this.isModelLoaded||await this.initialize();try{await new Promise(e=>setTimeout(e,100));return await(t=e,n=new Rb,void 0===n&&(n=new Nb),new jw(t,n)).withFaceLandmarks().withFaceDescriptor()}catch(r){return console.error("Error detecting face:",r),null}var t,n}async enrollFaceFromImages(e,t){this.isModelLoaded||await this.initialize(),console.log("Enrolling face from images for worker:",e,"Images:",t.length);const n=[];for(const r of t){const e=await this.detectFaceFromImage(r);e&&e.descriptor&&n.push(e.descriptor)}if(0===n.length)throw new Error("No faces detected in the provided images");return this.enrolledFaces.set(e,n),this._saveToStorage(),console.log("Face enrolled successfully from images. Total enrolled workers:",this.enrolledFaces.size),{success:!0,descriptorsCount:n.length,message:"Successfully enrolled ".concat(n.length," face descriptor(s) for worker")}}async enrollFace(e,t){if(this.isModelLoaded||await this.initialize(),console.log("Enrolling face for worker:",e,"Descriptors:",t.length),!t||0===t.length)throw new Error("No face descriptors provided for enrollment");return this.enrolledFaces.set(e,t),this._saveToStorage(),console.log("Face enrolled successfully. Total enrolled workers:",this.enrolledFaces.size),{success:!0,descriptorsCount:t.length,message:"Successfully enrolled ".concat(t.length," face descriptor(s) for worker")}}async recognizeFace(e){this.isModelLoaded||await this.initialize();const t=await this.detectFaceFromImage(e);if(!t||!t.descriptor)throw new Error("No face detected in the image");let n=null,r=1/0;for(const[a,s]of this.enrolledFaces.entries())for(const e of s){const s=Cw(t.descriptor,e);s<.5&&s<r&&(r=s,n=a)}if(n)return{success:!0,workerId:n,descriptor:t.descriptor,confidence:1-r,message:"Face recognized with ".concat(Math.round(100*(1-r)),"% confidence")};throw new Error("Face not recognized. Please enroll first or try again.")}async loadImageFromFile(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>t(r),r.onerror=n,r.src=URL.createObjectURL(e)})}async loadImageFromDataURL(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>t(r),r.onerror=n,r.src=e})}_saveToStorage(){try{const e={};for(const[t,n]of this.enrolledFaces.entries())e[t]=n.map(e=>Array.from(e));localStorage.setItem("enrolledFaces",JSON.stringify(e))}catch(e){console.error("Error saving to localStorage:",e)}}_loadFromStorage(){try{const e=localStorage.getItem("enrolledFaces");if(e){const t=JSON.parse(e);this.enrolledFaces.clear();for(const[e,n]of Object.entries(t)){const t=n.map(e=>new Float32Array(e));this.enrolledFaces.set(e,t)}}}catch(e){console.error("Error loading from localStorage:",e)}}getEnrolledWorkers(){return Array.from(this.enrolledFaces.keys())}removeWorker(e){const t=this.enrolledFaces.delete(e);return t&&this._saveToStorage(),t}isReady(){return this.isModelLoaded}};Bw._loadFromStorage();const kw=Bw,Sw=e=>{var t;let{onAttendanceRecorded:n}=e;const a=(0,r.useRef)(null),[s,i]=(0,r.useState)({type:"info",text:"Initializing Camera..."}),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,A]=(0,r.useState)(!0),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(0),[g,x]=(0,r.useState)(!1),[v,y]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),[N,j]=(0,r.useState)({}),C=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{try{console.log("Initializing face recognition service..."),await kw.initialize(),console.log("Face recognition service initialized successfully");const e=await Ea.get("/admin/attendance/face-status");console.log("Service status response:",e.data),f(e.data),e.data.serviceReady?i({type:"success",text:"Face recognition service is ready!"}):i({type:"error",text:"Face recognition service unavailable. Use RFID attendance instead."})}catch(e){console.error("Failed to check service status:",e),f({serviceReady:!1}),i({type:"error",text:"Unable to initialize face recognition: ".concat(e.message)})}})()},[]),(0,r.useEffect)(()=>{const e=setInterval(()=>{const e=Date.now(),t={};Object.keys(N).forEach(n=>{N[n]>e&&(t[n]=N[n])}),j(t)},3e4);return()=>clearInterval(e)},[N]);const B=(0,r.useCallback)(async()=>{if(o||!a.current||!c)return;if(h&&!h.serviceReady)return void i({type:"error",text:"Face recognition service is not available. Please use RFID attendance."});const e=a.current.getScreenshot();if(!e)return i({type:"error",text:"Failed to capture image. Please try again."}),void setTimeout(()=>{l(!1),"success"!==s.type&&i({type:"info",text:"Scanning for face..."})},3e3);l(!0),i({type:"info",text:"Detecting face..."});try{await kw.initialize();const a=await kw.loadImageFromDataURL(e),o=await kw.recognizeFace(a);if(o.success){const e=Date.now();if(N[o.workerId]&&N[o.workerId]>e){const t=Math.ceil((N[o.workerId]-e)/1e3);return i({type:"error",text:"Please wait ".concat(t," seconds before marking attendance again.")}),void setTimeout(()=>{l(!1),i({type:"info",text:"Scanning for face..."})},3e3)}const a=await Ea.post("/admin/attendance/recognize-face",{faceDescriptor:Array.from(o.descriptor||[]),workerId:o.workerId,confidence:o.confidence});var t,r;if(i({type:"success",text:a.data.message}),m(0),j(t=>(0,ye.A)((0,ye.A)({},t),{},{[o.workerId]:e+12e4})),w(a.data.worker),y(a.data.message),x(!0),setTimeout(()=>{x(!1),l(!1),i({type:"info",text:"Scanning for next face..."})},2e3),n)n({workerName:a.data.worker,rfid:"FACE",checkIn:null===(t=a.data.attendance)||void 0===t?void 0:t.checkIn,checkOut:null===(r=a.data.attendance)||void 0===r?void 0:r.checkOut,type:a.data.type,attendance:a.data.attendance,isYesterdayPunchOut:a.data.message.includes("completed yesterday's session")})}else i({type:"error",text:"Face not recognized. Please enroll first or try again."}),setTimeout(()=>{l(!1),"success"!==s.type&&i({type:"info",text:"Scanning for face..."})},3e3)}catch(v){var u,d,A,f,g;console.error("Face recognition error:",v);let e="Face recognition failed.";v.message.includes("No face detected")?e="No face detected. Please position your face clearly in the camera.":v.message.includes("not recognized")?e="Face not recognized. Please enroll first or try again.":(429===(null===(u=v.response)||void 0===u?void 0:u.status)&&null!==(d=v.response)&&void 0!==d&&null!==(A=d.data)&&void 0!==A&&A.message||null!==(f=v.response)&&void 0!==f&&null!==(g=f.data)&&void 0!==g&&g.message)&&(e=v.response.data.message),i({type:"error",text:e});const t=p+1;m(t);const n=3e3,r=Math.min(n*Math.pow(2,Math.min(t-1,4)),3e4);setTimeout(()=>{l(!1),"success"!==s.type&&i({type:"info",text:"Scanning for face..."})},r)}},[o,c,s.type,h,p,n,N]);(0,r.useEffect)(()=>(C.current&&clearInterval(C.current),c&&d&&(B(),C.current=setInterval(()=>{B()},2e3)),()=>{C.current&&clearInterval(C.current)}),[c,B,d]);const k=(()=>{let e=(0,Fa.jsx)(It,{className:"animate-spin text-4xl text-gray-500"}),t="border-gray-400";return c&&(o?(e=(0,Fa.jsx)(It,{className:"animate-spin text-4xl text-blue-500"}),t="border-blue-500"):"success"===s.type?(e=(0,Fa.jsx)(mt,{className:"text-4xl text-green-500"}),t="border-green-500"):"error"===s.type?(e=(0,Fa.jsx)(Xt,{className:"text-4xl text-red-500"}),t="border-red-500"):(e=(0,Fa.jsx)(ct,{className:"text-4xl text-gray-500"}),t="border-gray-400")),{icon:e,color:t}})();return(0,Fa.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-lg max-w-2xl mx-auto",children:[g&&(0,Fa.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-2",children:[(0,Fa.jsx)("div",{className:"absolute inset-0 bg-black opacity-50"}),(0,Fa.jsx)("div",{className:"relative bg-white rounded-lg p-4 sm:p-6 max-w-md w-full mx-2 shadow-xl",children:(0,Fa.jsxs)("div",{className:"text-center",children:[(0,Fa.jsx)(mt,{className:"text-3xl sm:text-4xl text-green-500 mx-auto mb-3 sm:mb-4"}),(0,Fa.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2",children:"Attendance Recorded"}),(0,Fa.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mb-3 sm:mb-4",children:v}),(0,Fa.jsxs)("div",{className:"bg-gray-100 rounded-lg p-3 sm:p-4 mb-4",children:[(0,Fa.jsx)("p",{className:"font-medium text-gray-800 text-sm",children:"Worker:"}),(0,Fa.jsx)("p",{className:"text-base sm:text-lg font-bold text-blue-600",children:b})]})]})})]}),(0,Fa.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-3 sm:mb-4 text-center",children:"Automatic Face Attendance"}),(0,Fa.jsx)("p",{className:"text-center text-gray-600 mb-4 sm:mb-6 text-sm sm:text-base",children:"Position your face in the camera frame. The system will automatically mark your attendance."}),(0,Fa.jsxs)("div",{className:"relative w-full aspect-square bg-gray-900 rounded-lg overflow-hidden border-4 ".concat(k.color," transition-colors duration-500 mb-4 sm:mb-6"),children:[(0,Fa.jsx)(Ks(),{audio:!1,ref:a,screenshotFormat:"image/jpeg",videoConstraints:{facingMode:"user",width:720,height:720},onUserMedia:()=>{u(!0),i({type:"info",text:"Scanning for face..."}),d&&B()},className:"absolute top-0 left-0 w-full h-full object-cover"}),(0,Fa.jsx)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center pointer-events-none",children:(0,Fa.jsx)("div",{className:"w-3/4 h-3/4 border-4 border-dashed border-white rounded-full opacity-30"})})]}),(0,Fa.jsxs)("div",{className:"text-center p-3 sm:p-4 rounded-lg bg-gray-50",children:[h&&(0,Fa.jsxs)("div",{className:"mb-3 sm:mb-4 p-3 rounded-lg ".concat(h.serviceReady?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:[(0,Fa.jsx)("div",{className:"text-xs sm:text-sm font-medium",children:h.serviceReady?"\u2705 React Face Recognition: Ready (High Accuracy)":"\u26a0\ufe0f Face Recognition Service: Unavailable"}),h.currentMode&&(0,Fa.jsxs)("div",{className:"text-xs mt-1",children:[(0,Fa.jsx)("strong",{children:"Mode:"})," ",h.currentMode]}),h.features&&h.serviceReady&&(0,Fa.jsxs)("div",{className:"text-xs mt-1",children:[(0,Fa.jsx)("strong",{children:"Features:"})," Real-time detection, Neural networks, Browser-based"]}),!h.serviceReady&&h.alternatives&&(0,Fa.jsxs)("div",{className:"text-xs mt-1",children:["Available alternatives: ",h.alternatives.map(e=>e.name).join(", ")]})]}),(0,Fa.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[(0,Fa.jsx)("div",{className:"flex items-center justify-center",children:k.icon}),(0,Fa.jsx)("span",{className:"text-sm sm:text-base font-medium text-gray-700",children:s.text})]}),(0,Fa.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,Fa.jsxs)("label",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:[(0,Fa.jsx)("input",{type:"checkbox",checked:d,onChange:e=>A(e.target.checked),disabled:h&&!h.serviceReady,className:"w-4 h-4"}),"Enable auto-scan (every 2 seconds)"]}),h&&!h.serviceReady&&(0,Fa.jsxs)("div",{className:"mt-4 p-3 sm:p-4 bg-blue-50 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-xs sm:text-sm font-medium text-blue-800 mb-2 sm:mb-3",children:"Face Recognition Setup Required:"}),h.setupInstructions&&(0,Fa.jsxs)("div",{className:"text-xs text-blue-700 mb-2 sm:mb-3",children:[(0,Fa.jsxs)("div",{className:"mb-1 sm:mb-2",children:[(0,Fa.jsx)("strong",{children:"Missing:"})," ",null===(t=h.missingDependencies)||void 0===t?void 0:t.join(", ")]}),(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsxs)("div",{children:["1. ",h.setupInstructions.step1]}),(0,Fa.jsxs)("div",{children:["2. ",h.setupInstructions.step2]}),(0,Fa.jsxs)("div",{children:["3. ",h.setupInstructions.step3]}),h.setupInstructions.note&&(0,Fa.jsxs)("div",{className:"text-yellow-700 mt-1 sm:mt-2 text-xs",children:["\u26a0\ufe0f ",h.setupInstructions.note]})]})]}),(0,Fa.jsxs)("div",{className:"text-xs text-blue-600 border-t border-blue-200 pt-2",children:[(0,Fa.jsx)("strong",{children:"Alternative Methods (Available Now):"}),(0,Fa.jsx)("br",{}),"\u2022 Use RFID card scanner for quick check-in/out",(0,Fa.jsx)("br",{}),"\u2022 Manual attendance tracking is available",(0,Fa.jsx)("br",{}),"\u2022 Contact admin to configure face recognition"]})]})]})]})]})};var Ew={version:"0.18.5"},Fw=1200,_w=1252,Iw=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Tw={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Dw=function(e){-1!=Iw.indexOf(e)&&(_w=Tw[0]=e)};var Lw=function(e){Fw=e,Dw(e)};function Uw(){Lw(1200),Dw(1252)}function Pw(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var Rw,Ow=function(e){return String.fromCharCode(e)},Mw=function(e){return String.fromCharCode(e)};var Qw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Hw(e){for(var t="",n=0,r=0,a=0,s=0,i=0,o=0,l=0,c=0;c<e.length;)s=(n=e.charCodeAt(c++))>>2,i=(3&n)<<4|(r=e.charCodeAt(c++))>>4,o=(15&r)<<2|(a=e.charCodeAt(c++))>>6,l=63&a,isNaN(r)?o=l=64:isNaN(a)&&(l=64),t+=Qw.charAt(s)+Qw.charAt(i)+Qw.charAt(o)+Qw.charAt(l);return t}function zw(e){var t="",n=0,r=0,a=0,s=0,i=0,o=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)n=Qw.indexOf(e.charAt(l++))<<2|(s=Qw.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(n),r=(15&s)<<4|(i=Qw.indexOf(e.charAt(l++)))>>2,64!==i&&(t+=String.fromCharCode(r)),a=(3&i)<<6|(o=Qw.indexOf(e.charAt(l++))),64!==o&&(t+=String.fromCharCode(a));return t}var Ww=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),Vw=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(ni){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Kw(e){return Ww?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function Gw(e){return Ww?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var qw=function(e){return Ww?Vw(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function Xw(e){if("undefined"===typeof ArrayBuffer)return qw(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}function Yw(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}var Jw=Ww?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:Vw(e)}))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),a=0;for(t=0,n=0;t<e.length;n+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)r.set(e[t],n);else{if("string"==typeof e[t])throw"wtf";r.set(new Uint8Array(e[t]),n)}return r}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))};var Zw=/\u0000/g,$w=/[\u0001-\u0006]/g;function eN(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function tN(e,t){var n=""+e;return n.length>=t?n:hj("0",t-n.length)+n}function nN(e,t){var n=""+e;return n.length>=t?n:hj(" ",t-n.length)+n}function rN(e,t){var n=""+e;return n.length>=t?n:n+hj(" ",t-n.length)}var aN=Math.pow(2,32);function sN(e,t){return e>aN||e<-aN?function(e,t){var n=""+Math.round(e);return n.length>=t?n:hj("0",t-n.length)+n}(e,t):function(e,t){var n=""+e;return n.length>=t?n:hj("0",t-n.length)+n}(Math.round(e),t)}function iN(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var oN=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],lN=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var cN={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},uN={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},dN={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function AN(e,t,n){for(var r=e<0?-1:1,a=e*r,s=0,i=1,o=0,l=1,c=0,u=0,d=Math.floor(a);c<t&&(o=(d=Math.floor(a))*i+s,u=d*c+l,!(a-d<5e-8));)a=1/(a-d),s=i,i=o,l=c,c=u;if(u>t&&(c>t?(u=l,o=s):(u=c,o=i)),!n)return[0,r*o,u];var A=Math.floor(r*o/u);return[A,r*o-A*u,u]}function hN(e,t,n){if(e>2958465||e<0)return null;var r=0|e,a=Math.floor(86400*(e-r)),s=0,i=[],o={D:r,T:a,u:86400*(e-r)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(r+=1462),o.u>.9999&&(o.u=0,86400==++a&&(o.T=a=0,++r,++o.D)),60===r)i=n?[1317,10,29]:[1900,2,29],s=3;else if(0===r)i=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=function(e,t){t[0]-=581;var n=e.getDay();e<60&&(n=(n+6)%7);return n}(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var fN=new Date(1899,11,31,0,0,0),pN=fN.getTime(),mN=new Date(1900,2,1,0,0,0);function gN(e,t){var n=e.getTime();return t?n-=1262304e5:e>=mN&&(n+=864e5),(n-(pN+6e4*(e.getTimezoneOffset()-fN.getTimezoneOffset())))/864e5}function xN(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function vN(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,n=xN(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10)).length<=t?n:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function(e){var t=xN(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),xN(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function yN(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):vN(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return QN(14,gN(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function bN(e,t,n,r){var a,s="",i=0,o=0,l=n.y,c=0;switch(e){case 98:l=n.y+543;case 121:switch(t.length){case 1:case 2:a=l%100,c=2;break;default:a=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:a=n.m,c=t.length;break;case 3:return lN[n.m-1][1];case 5:return lN[n.m-1][0];default:return lN[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:a=n.d,c=t.length;break;case 3:return oN[n.q][0];default:return oN[n.q][1]}break;case 104:switch(t.length){case 1:case 2:a=1+(n.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:a=n.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:a=n.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==n.u||"s"!=t&&"ss"!=t?(o=r>=2?3===r?1e3:100:1===r?10:1,(i=Math.round(o*(n.S+n.u)))>=60*o&&(i=0),"s"===t?0===i?"0":""+i/o:(s=tN(i,2+r),"ss"===t?s.substr(0,2):"."+s.substr(2,t.length-1))):tN(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":a=24*n.D+n.H;break;case"[m]":case"[mm]":a=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":a=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:a=l,c=1}return c>0?tN(a,c):""}function wN(e){if(e.length<=3)return e;for(var t=e.length%3,n=e.substr(0,t);t!=e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}var NN=/%/g;function jN(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+jN(e,-t);var a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),-1===(n=(t/Math.pow(10,s)).toPrecision(r+1+(a+s)%a)).indexOf("e")){var i=Math.floor(Math.log(t)*Math.LOG10E);for(-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+s):n+="E+"+(i-s);"0."===n.substr(0,2);)n=(n=n.charAt(0)+n.substr(2,a)+"."+n.substr(2+a)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(a+s)%a)+"."+r.substr(s)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var CN=/# (\?+)( ?)\/( ?)(\d+)/;var BN=/^#*0*\.([0#]+)/,kN=/\).*[0#]/,SN=/\(###\) ###\\?-####/;function EN(e){for(var t,n="",r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function FN(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function _N(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function IN(e,t,n){if(40===e.charCodeAt(0)&&!t.match(kN)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?IN("n",r,n):"("+IN("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return LN(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(NN,""),a=t.length-r.length;return LN(e,r,n*Math.pow(10,2*a))+hj("%",a)}(e,t,n);if(-1!==t.indexOf("E"))return jN(t,n);if(36===t.charCodeAt(0))return"$"+IN(e,t.substr(" "==t.charAt(1)?2:1),n);var a,s,i,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+sN(l,t.length);if(t.match(/^[#?]+$/))return"0"===(a=sN(n,0))&&(a=""),a.length>t.length?a:EN(t.substr(0,t.length-a.length))+a;if(s=t.match(CN))return function(e,t,n){var r=parseInt(e[4],10),a=Math.round(t*r),s=Math.floor(a/r),i=a-s*r,o=r;return n+(0===s?"":""+s)+" "+(0===i?hj(" ",e[1].length+1+e[4].length):nN(i,e[1].length)+e[2]+"/"+e[3]+tN(o,e[4].length))}(s,l,c);if(t.match(/^#+0+$/))return c+sN(l,t.length-t.indexOf("0"));if(s=t.match(BN))return a=FN(n,s[1].length).replace(/^([^\.]+)$/,"$1."+EN(s[1])).replace(/\.$/,"."+EN(s[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+hj("0",EN(s[1]).length-t.length)}),-1!==t.indexOf("0.")?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+FN(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+wN(sN(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+IN(e,t,-n):wN(""+(Math.floor(n)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(n,s[1].length)))+"."+tN(_N(n,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return IN(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=eN(IN(e,t.replace(/[\\-]/g,""),n)),i=0,eN(eN(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return i<a.length?a.charAt(i++):"0"===e?"0":""}));if(t.match(SN))return"("+(a=IN(e,"##########",n)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=AN(l,Math.pow(10,i)-1,!1),a=""+c," "==(u=LN("n",s[1],o[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),a+=u+s[2]+"/"+s[3],(u=rN(o[2],i)).length<s[4].length&&(u=EN(s[4].substr(s[4].length-u.length))+u),a+=u;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),c+((o=AN(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?nN(o[1],i)+s[2]+"/"+s[3]+rN(o[2],i):hj(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=sN(n,0),t.length<=a.length?a:EN(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var d=t.indexOf(".")-i,A=t.length-a.length-d;return EN(t.substr(0,d)+a+t.substr(t.length-A))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=_N(n,s[1].length),n<0?"-"+IN(e,t,-n):wN(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?tN(0,3-e.length):"")+e})+"."+tN(i,s[1].length);switch(t){case"###,##0.00":return IN(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var h=wN(sN(l,0));return"0"!==h?c+h:"";case"###,###.00":return IN(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return IN(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function TN(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+TN(e,-t);var a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),!(n=(t/Math.pow(10,s)).toPrecision(r+1+(a+s)%a)).match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+s):n+="E+"+(i-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(a+s)%a)+"."+r.substr(s)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function DN(e,t,n){if(40===e.charCodeAt(0)&&!t.match(kN)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?DN("n",r,n):"("+DN("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return LN(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(NN,""),a=t.length-r.length;return LN(e,r,n*Math.pow(10,2*a))+hj("%",a)}(e,t,n);if(-1!==t.indexOf("E"))return TN(t,n);if(36===t.charCodeAt(0))return"$"+DN(e,t.substr(" "==t.charAt(1)?2:1),n);var a,s,i,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+tN(l,t.length);if(t.match(/^[#?]+$/))return a=""+n,0===n&&(a=""),a.length>t.length?a:EN(t.substr(0,t.length-a.length))+a;if(s=t.match(CN))return function(e,t,n){return n+(0===t?"":""+t)+hj(" ",e[1].length+2+e[4].length)}(s,l,c);if(t.match(/^#+0+$/))return c+tN(l,t.length-t.indexOf("0"));if(s=t.match(BN))return a=(a=(""+n).replace(/^([^\.]+)$/,"$1."+EN(s[1])).replace(/\.$/,"."+EN(s[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+hj("0",EN(s[1]).length-t.length)}),-1!==t.indexOf("0.")?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+wN(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+DN(e,t,-n):wN(""+n)+"."+hj("0",s[1].length);if(s=t.match(/^#,#*,#0/))return DN(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=eN(DN(e,t.replace(/[\\-]/g,""),n)),i=0,eN(eN(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return i<a.length?a.charAt(i++):"0"===e?"0":""}));if(t.match(SN))return"("+(a=DN(e,"##########",n)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=AN(l,Math.pow(10,i)-1,!1),a=""+c," "==(u=LN("n",s[1],o[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),a+=u+s[2]+"/"+s[3],(u=rN(o[2],i)).length<s[4].length&&(u=EN(s[4].substr(s[4].length-u.length))+u),a+=u;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),c+((o=AN(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?nN(o[1],i)+s[2]+"/"+s[3]+rN(o[2],i):hj(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+n,t.length<=a.length?a:EN(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var d=t.indexOf(".")-i,A=t.length-a.length-d;return EN(t.substr(0,d)+a+t.substr(t.length-A))}if(s=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+DN(e,t,-n):wN(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?tN(0,3-e.length):"")+e})+"."+tN(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var h=wN(""+l);return"0"!==h?c+h:"";default:if(t.match(/\.[0#?]*$/))return DN(e,t.slice(0,t.lastIndexOf(".")),n)+EN(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function LN(e,t,n){return(0|n)===n?DN(e,t,n):IN(e,t,n)}var UN=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function PN(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":iN(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=n;"]"!==e.charAt(t++)&&t<e.length;)r+=e.charAt(t);if(r.match(UN))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var RN=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function ON(e,t){if(null==t)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function MN(e,t){var n=function(e){for(var t=[],n=!1,r=0,a=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(a,r-a),a=r+1}if(t[t.length]=e.substr(a),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}(e),r=n.length,a=n[r-1].indexOf("@");if(r<4&&a>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!==typeof t)return[4,4===n.length||a>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=a>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=a>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=a>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}var s=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,s];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var i=n[0].match(RN),o=n[1].match(RN);return ON(t,i)?[r,n[0]]:ON(t,o)?[r,n[1]]:[r,n[null!=i&&null!=o?2:1]]}return[r,s]}function QN(e,t,n){null==n&&(n={});var r="";switch(typeof e){case"string":r="m/d/yy"==e&&n.dateNF?n.dateNF:e;break;case"number":null==(r=14==e&&n.dateNF?n.dateNF:(null!=n.table?n.table:cN)[e])&&(r=n.table&&n.table[uN[e]]||cN[uN[e]]),null==r&&(r=dN[e]||"General")}if(iN(r,0))return yN(t,n);t instanceof Date&&(t=gN(t,n.date1904));var a=MN(r,t);if(iN(a[1]))return yN(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,n,r){for(var a,s,i,o=[],l="",c=0,u="",d="t",A="H";c<e.length;)switch(u=e.charAt(c)){case"G":if(!iN(e,c))throw new Error("unrecognized character "+u+" in "+e);o[o.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(i=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(i);o[o.length]={t:"t",v:l},++c;break;case"\\":var h=e.charAt(++c),f="("===h||")"===h?h:"t";o[o.length]={t:f,v:h},++c;break;case"_":o[o.length]={t:"t",v:" "},c+=2;break;case"@":o[o.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==a&&null==(a=hN(t,n,"2"===e.charAt(c+1))))return"";o[o.length]={t:"X",v:e.substr(c,2)},d=u,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==a&&null==(a=hN(t,n)))return"";for(l=u;++c<e.length&&e.charAt(c).toLowerCase()===u;)l+=u;"m"===u&&"h"===d.toLowerCase()&&(u="M"),"h"===u&&(u=A),o[o.length]={t:u,v:l},d=u;break;case"A":case"a":case"\u4e0a":var p={t:u,v:u};if(null==a&&(a=hN(t,n)),"A/P"===e.substr(c,3).toUpperCase()?(null!=a&&(p.v=a.H>=12?"P":"A"),p.t="T",A="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=a&&(p.v=a.H>=12?"PM":"AM"),p.t="T",c+=5,A="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=a&&(p.v=a.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),p.t="T",c+=5,A="h"):(p.t="t",++c),null==a&&"T"===p.t)return"";o[o.length]=p,d=u;break;case"[":for(l=u;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(UN)){if(null==a&&null==(a=hN(t,n)))return"";o[o.length]={t:"Z",v:l.toLowerCase()},d=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",PN(e)||(o[o.length]={t:"t",v:l}));break;case".":if(null!=a){for(l=u;++c<e.length&&"0"===(u=e.charAt(c));)l+=u;o[o.length]={t:"s",v:l};break}case"0":case"#":for(l=u;++c<e.length&&"0#?.,E+-%".indexOf(u=e.charAt(c))>-1;)l+=u;o[o.length]={t:"n",v:l};break;case"?":for(l=u;e.charAt(++c)===u;)l+=u;o[o.length]={t:u,v:l},d=u;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":o[o.length]={t:1===r?"t":u,v:u},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=u;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);o[o.length]={t:"D",v:l};break;case" ":o[o.length]={t:u,v:u},++c;break;case"$":o[o.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(u))throw new Error("unrecognized character "+u+" in "+e);o[o.length]={t:"t",v:u},++c}var m,g=0,x=0;for(c=o.length-1,d="t";c>=0;--c)switch(o[c].t){case"h":case"H":o[c].t=A,d="h",g<1&&(g=1);break;case"s":(m=o[c].v.match(/\.0+$/))&&(x=Math.max(x,m[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":d=o[c].t;break;case"m":"s"===d&&(o[c].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&o[c].v.match(/[Hh]/)&&(g=1),g<2&&o[c].v.match(/[Mm]/)&&(g=2),g<3&&o[c].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:a.u>=.5&&(a.u=0,++a.S),a.S>=60&&(a.S=0,++a.M),a.M>=60&&(a.M=0,++a.H);break;case 2:a.u>=.5&&(a.u=0,++a.S),a.S>=60&&(a.S=0,++a.M)}var v,y="";for(c=0;c<o.length;++c)switch(o[c].t){case"t":case"T":case" ":case"D":break;case"X":o[c].v="",o[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[c].v=bN(o[c].t.charCodeAt(0),o[c].v,a,x),o[c].t="t";break;case"n":case"?":for(v=c+1;null!=o[v]&&("?"===(u=o[v].t)||"D"===u||(" "===u||"t"===u)&&null!=o[v+1]&&("?"===o[v+1].t||"t"===o[v+1].t&&"/"===o[v+1].v)||"("===o[c].t&&(" "===u||"n"===u||")"===u)||"t"===u&&("/"===o[v].v||" "===o[v].v&&null!=o[v+1]&&"?"==o[v+1].t));)o[c].v+=o[v].v,o[v]={v:"",t:";"},++v;y+=o[c].v,c=v-1;break;case"G":o[c].t="t",o[c].v=yN(t,n)}var b,w,N="";if(y.length>0){40==y.charCodeAt(0)?(b=t<0&&45===y.charCodeAt(0)?-t:t,w=LN("n",y,b)):(w=LN("n",y,b=t<0&&r>1?-t:t),b<0&&o[0]&&"t"==o[0].t&&(w=w.substr(1),o[0].v="-"+o[0].v)),v=w.length-1;var j=o.length;for(c=0;c<o.length;++c)if(null!=o[c]&&"t"!=o[c].t&&o[c].v.indexOf(".")>-1){j=c;break}var C=o.length;if(j===o.length&&-1===w.indexOf("E")){for(c=o.length-1;c>=0;--c)null!=o[c]&&-1!=="n?".indexOf(o[c].t)&&(v>=o[c].v.length-1?(v-=o[c].v.length,o[c].v=w.substr(v+1,o[c].v.length)):v<0?o[c].v="":(o[c].v=w.substr(0,v+1),v=-1),o[c].t="t",C=c);v>=0&&C<o.length&&(o[C].v=w.substr(0,v+1)+o[C].v)}else if(j!==o.length&&-1===w.indexOf("E")){for(v=w.indexOf(".")-1,c=j;c>=0;--c)if(null!=o[c]&&-1!=="n?".indexOf(o[c].t)){for(s=o[c].v.indexOf(".")>-1&&c===j?o[c].v.indexOf(".")-1:o[c].v.length-1,N=o[c].v.substr(s+1);s>=0;--s)v>=0&&("0"===o[c].v.charAt(s)||"#"===o[c].v.charAt(s))&&(N=w.charAt(v--)+N);o[c].v=N,o[c].t="t",C=c}for(v>=0&&C<o.length&&(o[C].v=w.substr(0,v+1)+o[C].v),v=w.indexOf(".")+1,c=j;c<o.length;++c)if(null!=o[c]&&(-1!=="n?(".indexOf(o[c].t)||c===j)){for(s=o[c].v.indexOf(".")>-1&&c===j?o[c].v.indexOf(".")+1:0,N=o[c].v.substr(0,s);s<o[c].v.length;++s)v<w.length&&(N+=w.charAt(v++));o[c].v=N,o[c].t="t",C=c}}}for(c=0;c<o.length;++c)null!=o[c]&&"n?".indexOf(o[c].t)>-1&&(b=r>1&&t<0&&c>0&&"-"===o[c-1].v?-t:t,o[c].v=LN(o[c].t,o[c].v,b),o[c].t="t");var B="";for(c=0;c!==o.length;++c)null!=o[c]&&(B+=o[c].v);return B}(a[1],t,n,a[0])}function HN(e,t){if("number"!=typeof t){t=+t||-1;for(var n=0;n<392;++n)if(void 0!=cN[n]){if(cN[n]==e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return cN[t]=e,t}function zN(e){for(var t=0;392!=t;++t)void 0!==e[t]&&HN(e[t],t)}function WN(){cN=function(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',e}()}var VN=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var KN=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var n=function(e){var t=0,n=0,r=0,a="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)a[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=a[t]=n>>>8^e[255&n];var s=[];for(r=1;16!=r;++r)s[r-1]="undefined"!==typeof Int32Array?a.subarray(256*r,256*r+256):a.slice(256*r,256*r+256);return s}(t),r=n[0],a=n[1],s=n[2],i=n[3],o=n[4],l=n[5],c=n[6],u=n[7],d=n[8],A=n[9],h=n[10],f=n[11],p=n[12],m=n[13],g=n[14];return e.table=t,e.bstr=function(e,n){for(var r=-1^n,a=0,s=e.length;a<s;)r=r>>>8^t[255&(r^e.charCodeAt(a++))];return~r},e.buf=function(e,n){for(var x=-1^n,v=e.length-15,y=0;y<v;)x=g[e[y++]^255&x]^m[e[y++]^x>>8&255]^p[e[y++]^x>>16&255]^f[e[y++]^x>>>24]^h[e[y++]]^A[e[y++]]^d[e[y++]]^u[e[y++]]^c[e[y++]]^l[e[y++]]^o[e[y++]]^i[e[y++]]^s[e[y++]]^a[e[y++]]^r[e[y++]]^t[e[y++]];for(v+=15;y<v;)x=x>>>8^t[255&(x^e[y++])];return~x},e.str=function(e,n){for(var r=-1^n,a=0,s=e.length,i=0,o=0;a<s;)(i=e.charCodeAt(a++))<128?r=r>>>8^t[255&(r^i)]:i<2048?r=(r=r>>>8^t[255&(r^(192|i>>6&31))])>>>8^t[255&(r^(128|63&i))]:i>=55296&&i<57344?(i=64+(1023&i),o=1023&e.charCodeAt(a++),r=(r=(r=(r=r>>>8^t[255&(r^(240|i>>8&7))])>>>8^t[255&(r^(128|i>>2&63))])>>>8^t[255&(r^(128|o>>6&15|(3&i)<<4))])>>>8^t[255&(r^(128|63&o))]):r=(r=(r=r>>>8^t[255&(r^(224|i>>12&15))])>>>8^t[255&(r^(128|i>>6&63))])>>>8^t[255&(r^(128|63&i))];return~r},e}(),GN=function(){var e,t={};function n(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function r(e){if("/"==e.charAt(e.length-1))return r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function a(e,t){"string"===typeof t&&(t=new Date(t));var n=t.getHours();n=(n=n<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,n);var r=t.getFullYear()-1980;r=(r=r<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,r)}function s(e){HC(e,0);for(var t={},n=0;e.l<=e.length-4;){var r=e.read_shift(2),a=e.read_shift(2),s=e.l+a,i={};if(21589===r)1&(n=e.read_shift(1))&&(i.mtime=e.read_shift(4)),a>5&&(2&n&&(i.atime=e.read_shift(4)),4&n&&(i.ctime=e.read_shift(4))),i.mtime&&(i.mt=new Date(1e3*i.mtime));e.l=s,t[r]=i}return t}function i(){return e||(e={})}function o(e,t){if(80==e[0]&&75==e[1])return re(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=w(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=t&&t.root||"",r=(Ww&&Buffer.isBuffer(e)?e.toString("binary"):w(e)).split("\r\n"),a=0,s="";for(a=0;a<r.length;++a)if(s=r[a],/^Content-Location:/i.test(s)&&(s=s.slice(s.indexOf("file")),n||(n=s.slice(0,s.lastIndexOf("/")+1)),s.slice(0,n.length)!=n))for(;n.length>0&&(n=(n=n.slice(0,n.length-1)).slice(0,n.lastIndexOf("/")+1),s.slice(0,n.length)!=n););var i=(r[1]||"").match(/boundary="(.*?)"/);if(!i)throw new Error("MAD cannot find boundary");var o="--"+(i[1]||""),l=[],c=[],u={FileIndex:l,FullPaths:c};A(u);var d,h=0;for(a=0;a<r.length;++a){var f=r[a];f!==o&&f!==o+"--"||(h++&&ce(u,r.slice(d,a),n),d=a)}return u}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var n,r,a,s,i,o,h=512,f=[],p=e.slice(0,512);HC(p,0);var m=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(x,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(p);switch(n=m[0]){case 3:h=512;break;case 4:h=4096;break;case 0:if(0==m[1])return re(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==h&&HC(p=e.slice(0,h),28);var v=e.slice(0,h);!function(e,t){var n=9;switch(e.l+=2,n=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(p,n);var y=p.read_shift(4,"i");if(3===n&&0!==y)throw new Error("# Directory Sectors: Expected 0 saw "+y);p.l+=4,s=p.read_shift(4,"i"),p.l+=4,p.chk("00100000","Mini Stream Cutoff Size: "),i=p.read_shift(4,"i"),r=p.read_shift(4,"i"),o=p.read_shift(4,"i"),a=p.read_shift(4,"i");for(var b=-1,N=0;N<109&&!((b=p.read_shift(4,"i"))<0);++N)f[N]=b;var j=function(e,t){for(var n=Math.ceil(e.length/t)-1,r=[],a=1;a<n;++a)r[a-1]=e.slice(a*t,(a+1)*t);return r[n-1]=e.slice(n*t),r}(e,h);c(o,a,j,h,f);var C=function(e,t,n,r){var a=e.length,s=[],i=[],o=[],l=[],c=r-1,u=0,d=0,A=0,h=0;for(u=0;u<a;++u)if(o=[],(A=u+t)>=a&&(A-=a),!i[A]){l=[];var f=[];for(d=A;d>=0;){f[d]=!0,i[d]=!0,o[o.length]=d,l.push(e[d]);var p=n[Math.floor(4*d/r)];if(r<4+(h=4*d&c))throw new Error("FAT boundary crossed: "+d+" 4 "+r);if(!e[p])break;if(f[d=DC(e[p],h)])break}s[A]={nodes:o,data:cC([l])}}return s}(j,s,f,h);C[s].name="!Directory",r>0&&i!==g&&(C[i].name="!MiniFAT"),C[f[0]].name="!FAT",C.fat_addrs=f,C.ssz=h;var B=[],k=[],S=[];!function(e,t,n,r,a,s,i,o){for(var c,A=0,h=r.length?2:0,f=t[e].data,p=0,m=0;p<f.length;p+=128){var x=f.slice(p,p+128);HC(x,64),m=x.read_shift(2),c=dC(x,0,m-h),r.push(c);var v={name:c,type:x.read_shift(1),color:x.read_shift(1),L:x.read_shift(4,"i"),R:x.read_shift(4,"i"),C:x.read_shift(4,"i"),clsid:x.read_shift(16),state:x.read_shift(4,"i"),start:0,size:0};0!==x.read_shift(2)+x.read_shift(2)+x.read_shift(2)+x.read_shift(2)&&(v.ct=d(x,x.l-8)),0!==x.read_shift(2)+x.read_shift(2)+x.read_shift(2)+x.read_shift(2)&&(v.mt=d(x,x.l-8)),v.start=x.read_shift(4,"i"),v.size=x.read_shift(4,"i"),v.size<0&&v.start<0&&(v.size=v.type=0,v.start=g,v.name=""),5===v.type?(A=v.start,a>0&&A!==g&&(t[A].name="!StreamData")):v.size>=4096?(v.storage="fat",void 0===t[v.start]&&(t[v.start]=u(n,v.start,t.fat_addrs,t.ssz)),t[v.start].name=v.name,v.content=t[v.start].data.slice(0,v.size)):(v.storage="minifat",v.size<0?v.size=0:A!==g&&v.start!==g&&t[A]&&(v.content=l(v,t[A].data,(t[o]||{}).data))),v.content&&HC(v.content,0),s[c]=v,i.push(v)}}(s,C,j,B,r,{},k,i),function(e,t,n){for(var r=0,a=0,s=0,i=0,o=0,l=n.length,c=[],u=[];r<l;++r)c[r]=u[r]=r,t[r]=n[r];for(;o<u.length;++o)a=e[r=u[o]].L,s=e[r].R,i=e[r].C,c[r]===r&&(-1!==a&&c[a]!==a&&(c[r]=c[a]),-1!==s&&c[s]!==s&&(c[r]=c[s])),-1!==i&&(c[i]=r),-1!==a&&r!=c[r]&&(c[a]=c[r],u.lastIndexOf(a)<o&&u.push(a)),-1!==s&&r!=c[r]&&(c[s]=c[r],u.lastIndexOf(s)<o&&u.push(s));for(r=1;r<l;++r)c[r]===r&&(-1!==s&&c[s]!==s?c[r]=c[s]:-1!==a&&c[a]!==a&&(c[r]=c[a]));for(r=1;r<l;++r)if(0!==e[r].type){if((o=r)!=c[o])do{o=c[o],t[r]=t[o]+"/"+t[r]}while(0!==o&&-1!==c[o]&&o!=c[o]);c[r]=-1}for(t[0]+="/",r=1;r<l;++r)2!==e[r].type&&(t[r]+="/")}(k,S,B),B.shift();var E={FileIndex:k,FullPaths:S};return t&&t.raw&&(E.raw={header:v,sectors:j}),E}function l(e,t,n){for(var r=e.start,a=e.size,s=[],i=r;n&&a>0&&i>=0;)s.push(t.slice(i*m,i*m+m)),a-=m,i=DC(n,4*i);return 0===s.length?WC(0):Jw(s).slice(0,e.size)}function c(e,t,n,r,a){var s=g;if(e===g){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var i=n[e],o=(r>>>2)-1;if(!i)return;for(var l=0;l<o&&(s=DC(i,4*l))!==g;++l)a.push(s);c(DC(i,r-4),t-1,n,r,a)}}function u(e,t,n,r,a){var s=[],i=[];a||(a=[]);var o=r-1,l=0,c=0;for(l=t;l>=0;){a[l]=!0,s[s.length]=l,i.push(e[l]);var u=n[Math.floor(4*l/r)];if(r<4+(c=4*l&o))throw new Error("FAT boundary crossed: "+l+" 4 "+r);if(!e[u])break;l=DC(e[u],c)}return{nodes:s,data:cC([i])}}function d(e,t){return new Date(1e3*(TC(e,t+4)/1e7*Math.pow(2,32)+TC(e,t)/1e7-11644473600))}function A(e,t){var n=t||{},r=n.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=r+"/",e.FileIndex[0]={name:r,type:5}),n.CLSID&&(e.FileIndex[0].clsid=n.CLSID),function(e){var t="\x01Sh33tJ5";if(GN.find(e,"/"+t))return;var n=WC(4);n[0]=55,n[1]=n[3]=50,n[2]=54,e.FileIndex.push({name:t,type:2,content:n,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),h(e)}(e)}function h(e,t){A(e);for(var a=!1,s=!1,i=e.FullPaths.length-1;i>=0;--i){var o=e.FileIndex[i];switch(o.type){case 0:s?a=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:s=!0,isNaN(o.R*o.L*o.C)&&(a=!0),o.R>-1&&o.L>-1&&o.R==o.L&&(a=!0);break;default:a=!0}}if(a||t){var l=new Date(1987,1,19),c=0,u=Object.create?Object.create(null):{},d=[];for(i=0;i<e.FullPaths.length;++i)u[e.FullPaths[i]]=!0,0!==e.FileIndex[i].type&&d.push([e.FullPaths[i],e.FileIndex[i]]);for(i=0;i<d.length;++i){var h=n(d[i][0]);(s=u[h])||(d.push([h,{name:r(h).replace("/",""),type:1,clsid:y,ct:l,mt:l,content:null}]),u[h]=!0)}for(d.sort(function(e,t){return function(e,t){for(var n=e.split("/"),r=t.split("/"),a=0,s=0,i=Math.min(n.length,r.length);a<i;++a){if(s=n[a].length-r[a].length)return s;if(n[a]!=r[a])return n[a]<r[a]?-1:1}return n.length-r.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],i=0;i<d.length;++i)e.FullPaths[i]=d[i][0],e.FileIndex[i]=d[i][1];for(i=0;i<d.length;++i){var f=e.FileIndex[i],p=e.FullPaths[i];if(f.name=r(p).replace("/",""),f.L=f.R=f.C=-(f.color=1),f.size=f.content?f.content.length:0,f.start=0,f.clsid=f.clsid||y,0===i)f.C=d.length>1?1:-1,f.size=0,f.type=5;else if("/"==p.slice(-1)){for(c=i+1;c<d.length&&n(e.FullPaths[c])!=p;++c);for(f.C=c>=d.length?-1:c,c=i+1;c<d.length&&n(e.FullPaths[c])!=n(p);++c);f.R=c>=d.length?-1:c,f.type=1}else n(e.FullPaths[i+1]||"")==n(p)&&(f.R=i+1),f.type=2}}}function f(e,t){var n=t||{};if("mad"==n.fileType)return function(e,t){for(var n=t||{},r=n.boundary||"SheetJS",a=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(r="------="+r).slice(2)+'"',"","",""],s=e.FullPaths[0],i=s,o=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(i=e.FullPaths[l].slice(s.length),(o=e.FileIndex[l]).size&&o.content&&"\x01Sh33tJ5"!=i){i=i.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var c=o.content,u=Ww&&Buffer.isBuffer(c)?c.toString("binary"):w(c),d=0,A=Math.min(1024,u.length),h=0,f=0;f<=A;++f)(h=u.charCodeAt(f))>=32&&h<128&&++d;var p=d>=4*A/5;a.push(r),a.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+i),a.push("Content-Transfer-Encoding: "+(p?"quoted-printable":"base64")),a.push("Content-Type: "+ie(o,i)),a.push(""),a.push(p?le(u):oe(u))}return a.push(r+"--\r\n"),a.join("\r\n")}(e,n);if(h(e),"zip"===n.fileType)return function(e,t){var n=t||{},r=[],s=[],i=WC(1),o=n.compression?8:0,l=0;0;var c=0,u=0,d=0,A=0,h=e.FullPaths[0],f=h,p=e.FileIndex[0],m=[],g=0;for(c=1;c<e.FullPaths.length;++c)if(f=e.FullPaths[c].slice(h.length),(p=e.FileIndex[c]).size&&p.content&&"\x01Sh33tJ5"!=f){var x=d,v=WC(f.length);for(u=0;u<f.length;++u)v.write_shift(1,127&f.charCodeAt(u));v=v.slice(0,v.l),m[A]=KN.buf(p.content,0);var y=p.content;8==o&&(y=N(y)),(i=WC(30)).write_shift(4,67324752),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),p.mt?a(i,p.mt):i.write_shift(4,0),i.write_shift(-4,8&l?0:m[A]),i.write_shift(4,8&l?0:y.length),i.write_shift(4,8&l?0:p.content.length),i.write_shift(2,v.length),i.write_shift(2,0),d+=i.length,r.push(i),d+=v.length,r.push(v),d+=y.length,r.push(y),8&l&&((i=WC(12)).write_shift(-4,m[A]),i.write_shift(4,y.length),i.write_shift(4,p.content.length),d+=i.l,r.push(i)),(i=WC(46)).write_shift(4,33639248),i.write_shift(2,0),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),i.write_shift(4,0),i.write_shift(-4,m[A]),i.write_shift(4,y.length),i.write_shift(4,p.content.length),i.write_shift(2,v.length),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(4,0),i.write_shift(4,x),g+=i.l,s.push(i),g+=v.length,s.push(v),++A}return i=WC(22),i.write_shift(4,101010256),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,A),i.write_shift(2,A),i.write_shift(4,g),i.write_shift(4,d),i.write_shift(2,0),Jw([Jw(r),Jw(s),i])}(e,n);var r=function(e){for(var t=0,n=0,r=0;r<e.FileIndex.length;++r){var a=e.FileIndex[r];if(a.content){var s=a.content.length;s>0&&(s<4096?t+=s+63>>6:n+=s+511>>9)}}for(var i=e.FullPaths.length+3>>2,o=t+127>>7,l=(t+7>>3)+n+i+o,c=l+127>>7,u=c<=109?0:Math.ceil((c-109)/127);l+c+u+127>>7>c;)u=++c<=109?0:Math.ceil((c-109)/127);var d=[1,u,c,o,i,n,t,0];return e.FileIndex[0].size=t<<6,d[7]=(e.FileIndex[0].start=d[0]+d[1]+d[2]+d[3]+d[4]+d[5])+(d[6]+7>>3),d}(e),s=WC(r[7]<<9),i=0,o=0;for(i=0;i<8;++i)s.write_shift(1,v[i]);for(i=0;i<8;++i)s.write_shift(2,0);for(s.write_shift(2,62),s.write_shift(2,3),s.write_shift(2,65534),s.write_shift(2,9),s.write_shift(2,6),i=0;i<3;++i)s.write_shift(2,0);for(s.write_shift(4,0),s.write_shift(4,r[2]),s.write_shift(4,r[0]+r[1]+r[2]+r[3]-1),s.write_shift(4,0),s.write_shift(4,4096),s.write_shift(4,r[3]?r[0]+r[1]+r[2]-1:g),s.write_shift(4,r[3]),s.write_shift(-4,r[1]?r[0]-1:g),s.write_shift(4,r[1]),i=0;i<109;++i)s.write_shift(-4,i<r[2]?r[1]+i:-1);if(r[1])for(o=0;o<r[1];++o){for(;i<236+127*o;++i)s.write_shift(-4,i<r[2]?r[1]+i:-1);s.write_shift(-4,o===r[1]-1?g:o+1)}var l=function(e){for(o+=e;i<o-1;++i)s.write_shift(-4,i+1);e&&(++i,s.write_shift(-4,g))};for(o=i=0,o+=r[1];i<o;++i)s.write_shift(-4,b.DIFSECT);for(o+=r[2];i<o;++i)s.write_shift(-4,b.FATSECT);l(r[3]),l(r[4]);for(var c=0,u=0,d=e.FileIndex[0];c<e.FileIndex.length;++c)(d=e.FileIndex[c]).content&&((u=d.content.length)<4096||(d.start=o,l(u+511>>9)));for(l(r[6]+7>>3);511&s.l;)s.write_shift(-4,b.ENDOFCHAIN);for(o=i=0,c=0;c<e.FileIndex.length;++c)(d=e.FileIndex[c]).content&&(!(u=d.content.length)||u>=4096||(d.start=o,l(u+63>>6)));for(;511&s.l;)s.write_shift(-4,b.ENDOFCHAIN);for(i=0;i<r[4]<<2;++i){var A=e.FullPaths[i];if(A&&0!==A.length){d=e.FileIndex[i],0===i&&(d.start=d.size?d.start-1:g);var f=0===i&&n.root||d.name;if(u=2*(f.length+1),s.write_shift(64,f,"utf16le"),s.write_shift(2,u),s.write_shift(1,d.type),s.write_shift(1,d.color),s.write_shift(-4,d.L),s.write_shift(-4,d.R),s.write_shift(-4,d.C),d.clsid)s.write_shift(16,d.clsid,"hex");else for(c=0;c<4;++c)s.write_shift(4,0);s.write_shift(4,d.state||0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,d.start),s.write_shift(4,d.size),s.write_shift(4,0)}else{for(c=0;c<17;++c)s.write_shift(4,0);for(c=0;c<3;++c)s.write_shift(4,-1);for(c=0;c<12;++c)s.write_shift(4,0)}}for(i=1;i<e.FileIndex.length;++i)if((d=e.FileIndex[i]).size>=4096)if(s.l=d.start+1<<9,Ww&&Buffer.isBuffer(d.content))d.content.copy(s,s.l,0,d.size),s.l+=d.size+511&-512;else{for(c=0;c<d.size;++c)s.write_shift(1,d.content[c]);for(;511&c;++c)s.write_shift(1,0)}for(i=1;i<e.FileIndex.length;++i)if((d=e.FileIndex[i]).size>0&&d.size<4096)if(Ww&&Buffer.isBuffer(d.content))d.content.copy(s,s.l,0,d.size),s.l+=d.size+63&-64;else{for(c=0;c<d.size;++c)s.write_shift(1,d.content[c]);for(;63&c;++c)s.write_shift(1,0)}if(Ww)s.l=s.length;else for(;s.l<s.length;)s.write_shift(1,0);return s}t.version="1.2.1";var p,m=64,g=-2,x="d0cf11e0a1b11ae1",v=[208,207,17,224,161,177,26,225],y="00000000000000000000000000000000",b={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:g,FREESECT:-1,HEADER_SIGNATURE:x,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:y,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function w(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function N(e){return p?p.deflateRawSync(e):q(e)}var j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],B=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function k(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var S="undefined"!==typeof Uint8Array,E=S?new Uint8Array(256):[],F=0;F<256;++F)E[F]=k(F);function _(e,t){var n=E[255&e];return t<=8?n>>>8-t:(n=n<<8|E[e>>8&255],t<=16?n>>>16-t:(n=n<<8|E[e>>16&255])>>>24-t)}function I(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=6?0:e[r+1]<<8))>>>n&3}function T(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=5?0:e[r+1]<<8))>>>n&7}function D(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=3?0:e[r+1]<<8))>>>n&31}function L(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=1?0:e[r+1]<<8))>>>n&127}function U(e,t,n){var r=7&t,a=t>>>3,s=(1<<n)-1,i=e[a]>>>r;return n<8-r?i&s:(i|=e[a+1]<<8-r,n<16-r?i&s:(i|=e[a+2]<<16-r,n<24-r?i&s:(i|=e[a+3]<<24-r)&s))}function P(e,t,n){var r=7&t,a=t>>>3;return r<=5?e[a]|=(7&n)<<r:(e[a]|=n<<r&255,e[a+1]=(7&n)>>8-r),t+3}function R(e,t,n){return n=(1&n)<<(7&t),e[t>>>3]|=n,t+1}function O(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=n,t+8}function M(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=255&n,e[r+2]=n>>>8,t+16}function Q(e,t){var n=e.length,r=2*n>t?2*n:t+5,a=0;if(n>=t)return e;if(Ww){var s=Gw(r);if(e.copy)e.copy(s);else for(;a<e.length;++a)s[a]=e[a];return s}if(S){var i=new Uint8Array(r);if(i.set)i.set(e);else for(;a<n;++a)i[a]=e[a];return i}return e.length=r,e}function H(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function z(e,t,n){var r=1,a=0,s=0,i=0,o=0,l=e.length,c=S?new Uint16Array(32):H(32);for(s=0;s<32;++s)c[s]=0;for(s=l;s<n;++s)e[s]=0;l=e.length;var u=S?new Uint16Array(l):H(l);for(s=0;s<l;++s)c[a=e[s]]++,r<a&&(r=a),u[s]=0;for(c[0]=0,s=1;s<=r;++s)c[s+16]=o=o+c[s-1]<<1;for(s=0;s<l;++s)0!=(o=e[s])&&(u[s]=c[o+16]++);var d=0;for(s=0;s<l;++s)if(0!=(d=e[s]))for(o=_(u[s],r)>>r-d,i=(1<<r+4-d)-1;i>=0;--i)t[o|i<<d]=15&d|s<<4;return r}var W=S?new Uint16Array(512):H(512),V=S?new Uint16Array(32):H(32);if(!S){for(var K=0;K<512;++K)W[K]=0;for(K=0;K<32;++K)V[K]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);z(e,V,32);var n=[];for(t=0;t<=143;t++)n.push(8);for(;t<=255;t++)n.push(9);for(;t<=279;t++)n.push(7);for(;t<=287;t++)n.push(8);z(n,W,288)}();var G=function(){for(var e=S?new Uint8Array(32768):[],t=0,n=0;t<B.length-1;++t)for(;n<B[t+1];++n)e[n]=t;for(;n<32768;++n)e[n]=29;var r=S?new Uint8Array(259):[];for(t=0,n=0;t<C.length-1;++t)for(;n<C[t+1];++n)r[n]=t;return function(t,n){return t.length<8?function(e,t){for(var n=0;n<e.length;){var r=Math.min(65535,e.length-n),a=n+r==e.length;for(t.write_shift(1,+a),t.write_shift(2,r),t.write_shift(2,65535&~r);r-- >0;)t[t.l++]=e[n++]}return t.l}(t,n):function(t,n){for(var a=0,s=0,i=S?new Uint16Array(32768):[];s<t.length;){var o=Math.min(65535,t.length-s);if(o<10){for(7&(a=P(n,a,+!(s+o!=t.length)))&&(a+=8-(7&a)),n.l=a/8|0,n.write_shift(2,o),n.write_shift(2,65535&~o);o-- >0;)n[n.l++]=t[s++];a=8*n.l}else{a=P(n,a,+!(s+o!=t.length)+2);for(var l=0;o-- >0;){var c=t[s],u=-1,d=0;if((u=i[l=32767&(l<<5^c)])&&((u|=-32768&s)>s&&(u-=32768),u<s))for(;t[u+d]==t[s+d]&&d<250;)++d;if(d>2){(c=r[d])<=22?a=O(n,a,E[c+1]>>1)-1:(O(n,a,3),O(n,a+=5,E[c-23]>>5),a+=3);var A=c<8?0:c-4>>2;A>0&&(M(n,a,d-C[c]),a+=A),c=e[s-u],a=O(n,a,E[c]>>3),a-=3;var h=c<4?0:c-2>>1;h>0&&(M(n,a,s-u-B[c]),a+=h);for(var f=0;f<d;++f)i[l]=32767&s,l=32767&(l<<5^t[s]),++s;o-=d-1}else c<=143?c+=48:a=R(n,a,1),a=O(n,a,E[c]),i[l]=32767&s,++s}a=O(n,a,0)-1}}return n.l=(a+7)/8|0,n.l}(t,n)}}();function q(e){var t=WC(50+Math.floor(1.1*e.length)),n=G(e,t);return t.slice(0,n)}var X=S?new Uint16Array(32768):H(32768),Y=S?new Uint16Array(32768):H(32768),J=S?new Uint16Array(128):H(128),Z=1,$=1;function ee(e,t){var n=D(e,t)+257,r=D(e,t+=5)+1,a=function(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=4?0:e[r+1]<<8))>>>n&15}(e,t+=5)+4;t+=4;for(var s=0,i=S?new Uint8Array(19):H(19),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=S?new Uint8Array(8):H(8),u=S?new Uint8Array(8):H(8),d=i.length,A=0;A<a;++A)i[j[A]]=s=T(e,t),l<s&&(l=s),c[s]++,t+=3;var h=0;for(c[0]=0,A=1;A<=l;++A)u[A]=h=h+c[A-1]<<1;for(A=0;A<d;++A)0!=(h=i[A])&&(o[A]=u[h]++);var f=0;for(A=0;A<d;++A)if(0!=(f=i[A])){h=E[o[A]]>>8-f;for(var p=(1<<7-f)-1;p>=0;--p)J[h|p<<f]=7&f|A<<3}var m=[];for(l=1;m.length<n+r;)switch(t+=7&(h=J[L(e,t)]),h>>>=3){case 16:for(s=3+I(e,t),t+=2,h=m[m.length-1];s-- >0;)m.push(h);break;case 17:for(s=3+T(e,t),t+=3;s-- >0;)m.push(0);break;case 18:for(s=11+L(e,t),t+=7;s-- >0;)m.push(0);break;default:m.push(h),l<h&&(l=h)}var g=m.slice(0,n),x=m.slice(n);for(A=n;A<286;++A)g[A]=0;for(A=r;A<30;++A)x[A]=0;return Z=z(g,X,286),$=z(x,Y,30),t}function te(e,t){var n=function(e,t){if(3==e[0]&&!(3&e[1]))return[Kw(t),2];for(var n=0,r=0,a=Gw(t||1<<18),s=0,i=a.length>>>0,o=0,l=0;0==(1&r);)if(r=T(e,n),n+=3,r>>>1!=0)for(r>>1==1?(o=9,l=5):(n=ee(e,n),o=Z,l=$);;){!t&&i<s+32767&&(i=(a=Q(a,s+32767)).length);var c=U(e,n,o),u=r>>>1==1?W[c]:X[c];if(n+=15&u,0===((u>>>=4)>>>8&255))a[s++]=u;else{if(256==u)break;var d=(u-=257)<8?0:u-4>>2;d>5&&(d=0);var A=s+C[u];d>0&&(A+=U(e,n,d),n+=d),c=U(e,n,l),n+=15&(u=r>>>1==1?V[c]:Y[c]);var h=(u>>>=4)<4?0:u-2>>1,f=B[u];for(h>0&&(f+=U(e,n,h),n+=h),!t&&i<A&&(i=(a=Q(a,A+100)).length);s<A;)a[s]=a[s-f],++s}}else{7&n&&(n+=8-(7&n));var p=e[n>>>3]|e[(n>>>3)+1]<<8;if(n+=32,p>0)for(!t&&i<s+p&&(i=(a=Q(a,s+p)).length);p-- >0;)a[s++]=e[n>>>3],n+=8}return t?[a,n+7>>>3]:[a.slice(0,s),n+7>>>3]}(e.slice(e.l||0),t);return e.l+=n[1],n[0]}function ne(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function re(e,t){var n=e;HC(n,0);var r={FileIndex:[],FullPaths:[]};A(r,{root:t.root});for(var a=n.length-4;(80!=n[a]||75!=n[a+1]||5!=n[a+2]||6!=n[a+3])&&a>=0;)--a;n.l=a+4,n.l+=4;var i=n.read_shift(2);n.l+=6;var o=n.read_shift(4);for(n.l=o,a=0;a<i;++a){n.l+=20;var l=n.read_shift(4),c=n.read_shift(4),u=n.read_shift(2),d=n.read_shift(2),h=n.read_shift(2);n.l+=8;var f=n.read_shift(4),p=s(n.slice(n.l+u,n.l+u+d));n.l+=u+d+h;var m=n.l;n.l=f+4,ae(n,l,c,r,p),n.l=m}return r}function ae(e,t,n,r,a){e.l+=2;var i=e.read_shift(2),o=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),n=65535&e.read_shift(2),r=new Date,a=31&n,s=15&(n>>>=5);n>>>=4,r.setMilliseconds(0),r.setFullYear(n+1980),r.setMonth(s-1),r.setDate(a);var i=31&t,o=63&(t>>>=5);return t>>>=6,r.setHours(t),r.setMinutes(o),r.setSeconds(i<<1),r}(e);if(8257&i)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),u=e.read_shift(4),d=e.read_shift(2),A=e.read_shift(2),h="",f=0;f<d;++f)h+=String.fromCharCode(e[e.l++]);if(A){var m=s(e.slice(e.l,e.l+A));(m[21589]||{}).mt&&(l=m[21589].mt),((a||{})[21589]||{}).mt&&(l=a[21589].mt)}e.l+=A;var g=e.slice(e.l,e.l+c);switch(o){case 8:g=function(e,t){if(!p)return te(e,t);var n=new(0,p.InflateRaw),r=n._processChunk(e.slice(e.l),n._finishFlushFlag);return e.l+=n.bytesRead,r}(e,u);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+o)}var x=!1;8&i&&(134695760==e.read_shift(4)&&(e.read_shift(4),x=!0),c=e.read_shift(4),u=e.read_shift(4)),c!=t&&ne(x,"Bad compressed size: "+t+" != "+c),u!=n&&ne(x,"Bad uncompressed size: "+n+" != "+u),ue(r,h,g,{unsafe:!0,mt:l})}var se={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ie(e,t){if(e.ctype)return e.ctype;var n=e.name||"",r=n.match(/\.([^\.]+)$/);return r&&se[r[1]]||t&&(r=(n=t).match(/[\.\\]([^\.\\])+$/))&&se[r[1]]?se[r[1]]:"application/octet-stream"}function oe(e){for(var t=Hw(e),n=[],r=0;r<t.length;r+=76)n.push(t.slice(r,r+76));return n.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var n=[],r=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),a=0;a<r.length;++a){var s=r[a];if(0!=s.length)for(var i=0;i<s.length;){var o=76,l=s.slice(i,i+o);"="==l.charAt(o-1)?o--:"="==l.charAt(o-2)?o-=2:"="==l.charAt(o-3)&&(o-=3),l=s.slice(i,i+o),(i+=o)<s.length&&(l+="="),n.push(l)}else n.push("")}return n.join("\r\n")}function ce(e,t,n){for(var r,a="",s="",i="",o=0;o<10;++o){var l=t[o];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":a=c[2].trim();break;case"content-type":i=c[2].trim();break;case"content-transfer-encoding":s=c[2].trim()}}switch(++o,s.toLowerCase()){case"base64":r=qw(zw(t.slice(o).join("")));break;case"quoted-printable":r=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n];n<=e.length&&"="==r.charAt(r.length-1);)r=r.slice(0,r.length-1)+e[++n];t.push(r)}for(var a=0;a<t.length;++a)t[a]=t[a].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return qw(t.join("\r\n"))}(t.slice(o));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+s)}var u=ue(e,a.slice(n.length),r,{unsafe:!0});i&&(u.ctype=i)}function ue(e,t,n,a){var s=a&&a.unsafe;s||A(e);var i=!s&&GN.find(e,t);if(!i){var o=e.FullPaths[0];t.slice(0,o.length)==o?o=t:("/"!=o.slice(-1)&&(o+="/"),o=(o+t).replace("//","/")),i={name:r(t),type:2},e.FileIndex.push(i),e.FullPaths.push(o),s||GN.utils.cfb_gc(e)}return i.content=n,i.size=n?n.length:0,a&&(a.CLSID&&(i.clsid=a.CLSID),a.mt&&(i.mt=a.mt),a.ct&&(i.ct=a.ct)),i}return t.find=function(e,t){var n=e.FullPaths.map(function(e){return e.toUpperCase()}),r=n.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),a=!1;47===t.charCodeAt(0)?(a=!0,t=n[0].slice(0,-1)+t):a=-1!==t.indexOf("/");var s=t.toUpperCase(),i=!0===a?n.indexOf(s):r.indexOf(s);if(-1!==i)return e.FileIndex[i];var o=!s.match($w);for(s=s.replace(Zw,""),o&&(s=s.replace($w,"!")),i=0;i<n.length;++i){if((o?n[i].replace($w,"!"):n[i]).replace(Zw,"")==s)return e.FileIndex[i];if((o?r[i].replace($w,"!"):r[i]).replace(Zw,"")==s)return e.FileIndex[i]}return null},t.read=function(t,n){var r=n&&n.type;switch(r||Ww&&Buffer.isBuffer(t)&&(r="buffer"),r||"base64"){case"file":return function(t,n){return i(),o(e.readFileSync(t),n)}(t,n);case"base64":return o(qw(zw(t)),n);case"binary":return o(qw(t),n)}return o(t,n)},t.parse=o,t.write=function(t,n){var r=f(t,n);switch(n&&n.type||"buffer"){case"file":return i(),e.writeFileSync(n.filename,r),r;case"binary":return"string"==typeof r?r:w(r);case"base64":return Hw("string"==typeof r?r:w(r));case"buffer":if(Ww)return Buffer.isBuffer(r)?r:Vw(r);case"array":return"string"==typeof r?qw(r):r}return r},t.writeFile=function(t,n,r){i();var a=f(t,r);e.writeFileSync(n,a)},t.utils={cfb_new:function(e){var t={};return A(t,e),t},cfb_add:ue,cfb_del:function(e,t){A(e);var n=GN.find(e,t);if(n)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==n)return e.FileIndex.splice(r,1),e.FullPaths.splice(r,1),!0;return!1},cfb_mov:function(e,t,n){A(e);var a=GN.find(e,t);if(a)for(var s=0;s<e.FileIndex.length;++s)if(e.FileIndex[s]==a)return e.FileIndex[s].name=r(n),e.FullPaths[s]=n,!0;return!1},cfb_gc:function(e){h(e,!0)},ReadShift:UC,CheckField:QC,prep_blob:HC,bconcat:Jw,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");p=e}catch(ni){console.error("cannot use native zlib: "+(ni.message||ni))}},_deflateRaw:q,_inflateRaw:te,consts:b},t}();let qN;function XN(e){return"string"===typeof e?Xw(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function YN(e,t,n){if("undefined"!==typeof qN&&qN.writeFileSync)return n?qN.writeFileSync(e,t,n):qN.writeFileSync(e,t);if("undefined"!==typeof Deno){if(n&&"string"==typeof t)switch(n){case"utf8":t=new TextEncoder(n).encode(t);break;case"binary":t=Xw(t);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(e,t)}var r="utf8"==n?Dj(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(r,e);if("undefined"!==typeof Blob){var a=new Blob([XN(r)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if("undefined"!==typeof saveAs)return saveAs(a,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(null!=i.download)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=Yw(t)),o.write(t),o.close(),t}catch(ni){if(!ni.message||!ni.message.match(/onstruct/))throw ni}throw new Error("cannot save file "+e)}function JN(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function ZN(e,t){for(var n=[],r=JN(e),a=0;a!==r.length;++a)null==n[e[r[a]][t]]&&(n[e[r[a]][t]]=r[a]);return n}function $N(e){for(var t=[],n=JN(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}function ej(e){for(var t=[],n=JN(e),r=0;r!==n.length;++r)t[e[n[r]]]=parseInt(n[r],10);return t}var tj=new Date(1899,11,30,0,0,0);function nj(e,t){var n=e.getTime();return t&&(n-=1263168e5),(n-(tj.getTime()+6e4*(e.getTimezoneOffset()-tj.getTimezoneOffset())))/864e5}var rj=new Date,aj=tj.getTime()+6e4*(rj.getTimezoneOffset()-tj.getTimezoneOffset()),sj=rj.getTimezoneOffset();function ij(e){var t=new Date;return t.setTime(24*e*60*60*1e3+aj),t.getTimezoneOffset()!==sj&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-sj)),t}var oj=new Date("2017-02-19T19:06:09.000Z"),lj=isNaN(oj.getFullYear())?new Date("2/19/17"):oj,cj=2017==lj.getFullYear();function uj(e,t){var n=new Date(e);if(cj)return t>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):t<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(e instanceof Date)return e;if(1917==lj.getFullYear()&&!isNaN(n.getFullYear())){var r=n.getFullYear();return e.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-60*s.getTimezoneOffset()*1e3)),s}function dj(e,t){if(Ww&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return Dj(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return Dj(Pw(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return Dj(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return Dj(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(e){return n[e]||e})}catch(ni){}for(var r=[],a=0;a!=e.length;++a)r.push(String.fromCharCode(e[a]));return r.join("")}function Aj(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=Aj(e[n]));return t}function hj(e,t){for(var n="";n.length<t;)n+=e;return n}function fj(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return isNaN(t=Number(r))?(r=r.replace(/[(](.*)[)]/,function(e,t){return n=-n,t}),isNaN(t=Number(r))?t:t/n):t/n}var pj=["january","february","march","april","may","june","july","august","september","october","november","december"];function mj(e){var t=new Date(e),n=new Date(NaN),r=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return n;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==pj.indexOf(i))return n}else if(i.match(/[a-z]/))return n;return r<0||r>8099?n:(a>0||s>1)&&101!=r?t:e.match(/[^-0-9:,\/\\]/)?n:t}function gj(e,t,n){if(e.FullPaths){var r;if("string"==typeof n)return r=Ww?Vw(n):function(e){for(var t=[],n=0,r=e.length+250,a=Kw(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[n++]=i;else if(i<2048)a[n++]=192|i>>6&31,a[n++]=128|63&i;else if(i>=55296&&i<57344){i=64+(1023&i);var o=1023&e.charCodeAt(++s);a[n++]=240|i>>8&7,a[n++]=128|i>>2&63,a[n++]=128|o>>6&15|(3&i)<<4,a[n++]=128|63&o}else a[n++]=224|i>>12&15,a[n++]=128|i>>6&63,a[n++]=128|63&i;n>r&&(t.push(a.slice(0,n)),n=0,a=Kw(65535),r=65530)}return t.push(a.slice(0,n)),Jw(t)}(n),GN.utils.cfb_add(e,t,r);GN.utils.cfb_add(e,t,n)}else e.file(t,n)}function xj(){return GN.utils.cfb_new()}var vj='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var yj={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},bj=$N(yj),wj=/[&<>'"]/g,Nj=/[\u0000-\u0008\u000b-\u001f]/g;function jj(e){return(e+"").replace(wj,function(e){return bj[e]}).replace(Nj,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Cj(e){return jj(e).replace(/ /g,"_x0020_")}var Bj=/[\u0000-\u001f]/g;function kj(e){return(e+"").replace(wj,function(e){return bj[e]}).replace(/\n/g,"<br/>").replace(Bj,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function Sj(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Ej(e){for(var t="",n=0,r=0,a=0,s=0,i=0,o=0;n<e.length;)(r=e.charCodeAt(n++))<128?t+=String.fromCharCode(r):(a=e.charCodeAt(n++),r>191&&r<224?(i=(31&r)<<6,i|=63&a,t+=String.fromCharCode(i)):(s=e.charCodeAt(n++),r<240?t+=String.fromCharCode((15&r)<<12|(63&a)<<6|63&s):(o=((7&r)<<18|(63&a)<<12|(63&s)<<6|63&(i=e.charCodeAt(n++)))-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(1023&o)))));return t}function Fj(e){var t,n,r,a=Kw(2*e.length),s=1,i=0,o=0;for(n=0;n<e.length;n+=s)s=1,(r=e.charCodeAt(n))<128?t=r:r<224?(t=64*(31&r)+(63&e.charCodeAt(n+1)),s=2):r<240?(t=4096*(15&r)+64*(63&e.charCodeAt(n+1))+(63&e.charCodeAt(n+2)),s=3):(s=4,t=262144*(7&r)+4096*(63&e.charCodeAt(n+1))+64*(63&e.charCodeAt(n+2))+(63&e.charCodeAt(n+3)),o=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==o&&(a[i++]=255&o,a[i++]=o>>>8,o=0),a[i++]=t%256,a[i++]=t>>>8;return a.slice(0,i).toString("ucs2")}function _j(e){return Vw(e,"binary").toString("utf8")}var Ij="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",Tj=Ww&&(_j(Ij)==Ej(Ij)&&_j||Fj(Ij)==Ej(Ij)&&Fj)||Ej,Dj=Ww?function(e){return Vw(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,a=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,a=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(63&a)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(63&r)))}return t.join("")},Lj=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),r=0;r<e.length;++r)n=n.replace(e[r][0],e[r][1]);return n}}();var Uj=/(^\s|\s$|\n)/;function Pj(e,t){return"<"+e+(t.match(Uj)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Rj(e){return JN(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Oj(e,t,n){return"<"+e+(null!=n?Rj(n):"")+(null!=t?(t.match(Uj)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Mj(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(ni){if(t)throw ni}return""}var Qj="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",Hj="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",zj="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",Wj="http://schemas.openxmlformats.org/package/2006/content-types",Vj="http://schemas.openxmlformats.org/package/2006/relationships",Kj="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",Gj="http://purl.org/dc/elements/1.1/",qj="http://purl.org/dc/terms/",Xj="http://purl.org/dc/dcmitype/",Yj="http://schemas.openxmlformats.org/officeDocument/2006/relationships",Jj="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",Zj="http://www.w3.org/2001/XMLSchema-instance",$j="http://www.w3.org/2001/XMLSchema",eC=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],tC="urn:schemas-microsoft-com:office:office",nC="urn:schemas-microsoft-com:office:excel",rC="urn:schemas-microsoft-com:office:spreadsheet",aC="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",sC="http://macVmlSchemaUri",iC="urn:schemas-microsoft-com:vml",oC="http://www.w3.org/TR/REC-html40";var lC=function(e){for(var t=[],n=0;n<e[0].length;++n)if(e[0][n])for(var r=0,a=e[0][n].length;r<a;r+=10240)t.push.apply(t,e[0][n].slice(r,r+10240));return t},cC=Ww?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:Vw(e)})):lC(e)}:lC,uC=function(e,t,n){for(var r=[],a=t;a<n;a+=2)r.push(String.fromCharCode(_C(e,a)));return r.join("").replace(Zw,"")},dC=Ww?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(Zw,""):uC(e,t,n)}:uC,AC=function(e,t,n){for(var r=[],a=t;a<t+n;++a)r.push(("0"+e[a].toString(16)).slice(-2));return r.join("")},hC=Ww?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):AC(e,t,n)}:AC,fC=function(e,t,n){for(var r=[],a=t;a<n;a++)r.push(String.fromCharCode(FC(e,a)));return r.join("")},pC=Ww?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):fC(e,t,n)}:fC,mC=function(e,t){var n=TC(e,t);return n>0?pC(e,t+4,t+4+n-1):""},gC=mC,xC=function(e,t){var n=TC(e,t);return n>0?pC(e,t+4,t+4+n-1):""},vC=xC,yC=function(e,t){var n=2*TC(e,t);return n>0?pC(e,t+4,t+4+n-1):""},bC=yC,wC=function(e,t){var n=TC(e,t);return n>0?dC(e,t+4,t+4+n):""},NC=wC,jC=function(e,t){var n=TC(e,t);return n>0?pC(e,t+4,t+4+n):""},CC=jC,BC=function(e,t){return function(e,t){for(var n=1-2*(e[t+7]>>>7),r=((127&e[t+7])<<4)+(e[t+6]>>>4&15),a=15&e[t+6],s=5;s>=0;--s)a=256*a+e[t+s];return 2047==r?0==a?n*(1/0):NaN:(0==r?r=-1022:(r-=1023,a+=Math.pow(2,52)),n*Math.pow(2,r-52)*a)}(e,t)},kC=BC,SC=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function EC(){dC=function(e,t,n){return Rw.utils.decode(1200,e.slice(t,n)).replace(Zw,"")},pC=function(e,t,n){return Rw.utils.decode(65001,e.slice(t,n))},gC=function(e,t){var n=TC(e,t);return n>0?Rw.utils.decode(_w,e.slice(t+4,t+4+n-1)):""},vC=function(e,t){var n=TC(e,t);return n>0?Rw.utils.decode(Fw,e.slice(t+4,t+4+n-1)):""},bC=function(e,t){var n=2*TC(e,t);return n>0?Rw.utils.decode(1200,e.slice(t+4,t+4+n-1)):""},NC=function(e,t){var n=TC(e,t);return n>0?Rw.utils.decode(1200,e.slice(t+4,t+4+n)):""},CC=function(e,t){var n=TC(e,t);return n>0?Rw.utils.decode(65001,e.slice(t+4,t+4+n)):""}}Ww&&(gC=function(e,t){if(!Buffer.isBuffer(e))return mC(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},vC=function(e,t){if(!Buffer.isBuffer(e))return xC(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},bC=function(e,t){if(!Buffer.isBuffer(e))return yC(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},NC=function(e,t){if(!Buffer.isBuffer(e))return wC(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},CC=function(e,t){if(!Buffer.isBuffer(e))return jC(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},kC=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):BC(e,t)},SC=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof Rw&&EC();var FC=function(e,t){return e[t]},_C=function(e,t){return 256*e[t+1]+e[t]},IC=function(e,t){var n=256*e[t+1]+e[t];return n<32768?n:-1*(65535-n+1)},TC=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},DC=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},LC=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function UC(e,t){var n,r,a,s,i,o,l="",c=[];switch(t){case"dbcs":if(o=this.l,Ww&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(i=0;i<e;++i)l+=String.fromCharCode(_C(this,o)),o+=2;e*=2;break;case"utf8":l=pC(this,this.l,this.l+e);break;case"utf16le":e*=2,l=dC(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof Rw)return UC.call(this,e,"dbcs");l=Rw.utils.decode(Fw,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=gC(this,this.l),e=4+TC(this,this.l);break;case"lpstr-cp":l=vC(this,this.l),e=4+TC(this,this.l);break;case"lpwstr":l=bC(this,this.l),e=4+2*TC(this,this.l);break;case"lpp4":e=4+TC(this,this.l),l=NC(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+TC(this,this.l),l=CC(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(a=FC(this,this.l+e++));)c.push(Ow(a));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(a=_C(this,this.l+e));)c.push(Ow(a)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",o=this.l,i=0;i<e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return a=FC(this,o),this.l=o+1,s=UC.call(this,e-i,a?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(Ow(_C(this,o))),o+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof Rw){l=Rw.utils.decode(Fw,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",o=this.l,i=0;i!=e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return a=FC(this,o),this.l=o+1,s=UC.call(this,e-i,a?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(Ow(FC(this,o))),o+=1}l=c.join("");break;default:switch(e){case 1:return n=FC(this,this.l),this.l++,n;case 2:return n=("i"===t?IC:_C)(this,this.l),this.l+=2,n;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(n=(e>0?DC:LC)(this,this.l),this.l+=4,n):(r=TC(this,this.l),this.l+=4,r);case 8:case-8:if("f"===t)return r=8==e?kC(this,this.l):kC([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:l=hC(this,this.l,e)}}return this.l+=e,l}var PC=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},RC=function(e,t,n){e[n]=255&t,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},OC=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255};function MC(e,t,n){var r=0,a=0;if("dbcs"===n){for(a=0;a!=t.length;++a)OC(this,t.charCodeAt(a),this.l+2*a);r=2*t.length}else if("sbcs"===n){if("undefined"!==typeof Rw&&874==_w)for(a=0;a!=t.length;++a){var s=Rw.utils.encode(_w,t.charAt(a));this[this.l+a]=s[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=255&t.charCodeAt(a);r=t.length}else{if("hex"===n){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}if("utf16le"===n){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}switch(e){case 1:r=1,this[this.l]=255&t;break;case 2:r=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:r=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:r=4,PC(this,t,this.l);break;case 8:if(r=8,"f"===n){!function(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=r?-t:t;isFinite(i)?0==i?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[n+o]=255&s;e[n+6]=(15&a)<<4|15&s,e[n+7]=a>>4|r}(this,t,this.l);break}case 16:break;case-4:r=4,RC(this,t,this.l)}}return this.l+=r,this}function QC(e,t){var n=hC(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function HC(e,t){e.l=t,e.read_shift=UC,e.chk=QC,e.write_shift=MC}function zC(e,t){e.l+=t}function WC(e){var t=Kw(e);return HC(t,0),t}function VC(){var e=[],t=Ww?256:2048,n=function(e){var t=WC(e);return HC(t,0),t},r=n(t),a=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&e.push(r),r=null)},s=function(e){return r&&e<r.length-r.l?r:(a(),r=n(Math.max(e+1,t)))};return{next:s,push:function(e){a(),null==(r=e).l&&(r.l=r.length),s(t)},end:function(){return a(),Jw(e)},_bufs:e}}function KC(e,t,n,r){var a,s=+t;if(!isNaN(s)){r||(r=oF[s].p||(n||[]).length||0),a=1+(s>=128?1:0)+1,r>=128&&++a,r>=16384&&++a,r>=2097152&&++a;var i=e.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,128+(127&s)),i.write_shift(1,s>>7));for(var o=0;4!=o;++o){if(!(r>=128)){i.write_shift(1,r);break}i.write_shift(1,128+(127&r)),r>>=7}r>0&&SC(n)&&e.push(n)}}function GC(e,t,n){var r=Aj(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function qC(e,t,n){var r=Aj(e);return r.s=GC(r.s,t.s,n),r.e=GC(r.e,t.s,n),r}function XC(e,t){if(e.cRel&&e.c<0)for(e=Aj(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Aj(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=nB(e);return e.cRel||null==e.cRel||(n=n.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(n=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(n)),n}function YC(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?XC(e.s,t.biff)+":"+XC(e.e,t.biff):(e.s.rRel?"":"$")+ZC(e.s.r)+":"+(e.e.rRel?"":"$")+ZC(e.e.r):(e.s.cRel?"":"$")+eB(e.s.c)+":"+(e.e.cRel?"":"$")+eB(e.e.c)}function JC(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function ZC(e){return""+(e+1)}function $C(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function eB(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function tB(e){for(var t=0,n=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(n=26*n+(a-64))}return{c:n-1,r:t-1}}function nB(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function rB(e){var t=e.indexOf(":");return-1==t?{s:tB(e),e:tB(e)}:{s:tB(e.slice(0,t)),e:tB(e.slice(t+1))}}function aB(e,t){return"undefined"===typeof t||"number"===typeof t?aB(e.s,e.e):("string"!==typeof e&&(e=nB(e)),"string"!==typeof t&&(t=nB(t)),e==t?e:e+":"+t)}function sB(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,a=0,s=e.length;for(n=0;r<s&&!((a=e.charCodeAt(r)-64)<1||a>26);++r)n=26*n+a;for(t.s.c=--n,n=0;r<s&&!((a=e.charCodeAt(r)-48)<0||a>9);++r)n=10*n+a;if(t.s.r=--n,r===s||10!=a)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=s&&!((a=e.charCodeAt(r)-64)<1||a>26);++r)n=26*n+a;for(t.e.c=--n,n=0;r!=s&&!((a=e.charCodeAt(r)-48)<0||a>9);++r)n=10*n+a;return t.e.r=--n,t}function iB(e,t){var n="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=QN(e.z,n?nj(t):t)}catch(ni){}try{return e.w=QN((e.XF||{}).numFmtId||(n?14:0),n?nj(t):t)}catch(ni){return""+t}}function oB(e,t,n){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),"e"==e.t?HB[e.v]||e.v:iB(e,void 0==t?e.v:t))}function lB(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function cB(e,t,n){var r=n||{},a=e?Array.isArray(e):r.dense;var s=e||(a?[]:{}),i=0,o=0;if(s&&null!=r.origin){if("number"==typeof r.origin)i=r.origin;else{var l="string"==typeof r.origin?tB(r.origin):r.origin;i=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=sB(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),-1==i&&(c.e.r=i=u.e.r+1)}for(var d=0;d!=t.length;++d)if(t[d]){if(!Array.isArray(t[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var A=0;A!=t[d].length;++A)if("undefined"!==typeof t[d][A]){var h={v:t[d][A]},f=i+d,p=o+A;if(c.s.r>f&&(c.s.r=f),c.s.c>p&&(c.s.c=p),c.e.r<f&&(c.e.r=f),c.e.c<p&&(c.e.c=p),!t[d][A]||"object"!==typeof t[d][A]||Array.isArray(t[d][A])||t[d][A]instanceof Date)if(Array.isArray(h.v)&&(h.f=t[d][A][1],h.v=h.v[0]),null===h.v)if(h.f)h.t="n";else if(r.nullError)h.t="e",h.v=0;else{if(!r.sheetStubs)continue;h.t="z"}else"number"===typeof h.v?h.t="n":"boolean"===typeof h.v?h.t="b":h.v instanceof Date?(h.z=r.dateNF||cN[14],r.cellDates?(h.t="d",h.w=QN(h.z,nj(h.v))):(h.t="n",h.v=nj(h.v),h.w=QN(h.z,h.v))):h.t="s";else h=t[d][A];if(a)s[f]||(s[f]=[]),s[f][p]&&s[f][p].z&&(h.z=s[f][p].z),s[f][p]=h;else{var m=nB({c:p,r:f});s[m]&&s[m].z&&(h.z=s[m].z),s[m]=h}}}return c.s.c<1e7&&(s["!ref"]=aB(c)),s}function uB(e,t){return cB(null,e,t)}function dB(e,t){return t||(t=WC(4)),t.write_shift(4,e),t}function AB(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function hB(e,t){var n=!1;return null==t&&(n=!0,t=WC(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}function fB(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function pB(e,t){var n=e.l,r=e.read_shift(1),a=AB(e),s=[],i={t:a,h:a};if(0!==(1&r)){for(var o=e.read_shift(4),l=0;l!=o;++l)s.push(fB(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=n+t,i}var mB=pB;function gB(e,t){var n=!1;return null==t&&(n=!0,t=WC(23+4*e.t.length)),t.write_shift(1,1),hB(e.t,t),t.write_shift(4,1),function(e,t){t||(t=WC(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),n?t.slice(0,t.l):t}function xB(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function vB(e,t){return null==t&&(t=WC(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function yB(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function bB(e,t){return null==t&&(t=WC(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var wB=AB,NB=hB;function jB(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function CB(e,t){var n=!1;return null==t&&(n=!0,t=WC(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}var BB=AB,kB=jB,SB=CB;function EB(e){var t=e.slice(e.l,e.l+4),n=1&t[0],r=2&t[0];e.l+=4;var a=0===r?kC([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):DC(t,0)>>2;return n?a/100:a}function FB(e,t){null==t&&(t=WC(4));var n=0,r=0,a=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?r=1:a==(0|a)&&a>=-(1<<29)&&a<1<<29&&(r=1,n=1),!r)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((n?a:e)<<2)+(n+2))}function _B(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var IB=_B,TB=function(e,t){return t||(t=WC(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function DB(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function LB(e,t){return(t||WC(8)).write_shift(8,e,"f")}function UB(e,t){if(t||(t=WC(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var n=e.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),t.write_shift(2,n),e.rgb&&null==e.theme){var r=e.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var PB=80,RB={1:{n:"CodePage",t:2},2:{n:"Category",t:PB},3:{n:"PresentationFormat",t:PB},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:PB},15:{n:"Company",t:PB},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:PB},27:{n:"ContentStatus",t:PB},28:{n:"Language",t:PB},29:{n:"Version",t:PB},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},OB={1:{n:"CodePage",t:2},2:{n:"Title",t:PB},3:{n:"Subject",t:PB},4:{n:"Author",t:PB},5:{n:"Keywords",t:PB},6:{n:"Comments",t:PB},7:{n:"Template",t:PB},8:{n:"LastAuthor",t:PB},9:{n:"RevNumber",t:PB},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:PB},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function MB(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var QB=Aj(MB([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),HB={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},zB={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},WB={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function VB(e,t){var n,r=function(e){for(var t=[],n=JN(e),r=0;r!==n.length;++r)null==t[e[n[r]]]&&(t[e[n[r]]]=[]),t[e[n[r]]].push(n[r]);return t}(zB),a=[];a[a.length]=vj,a[a.length]=Oj("Types",null,{xmlns:Wj,"xmlns:xsd":$j,"xmlns:xsi":Zj}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(e){return Oj("Default",null,{Extension:e[0],ContentType:e[1]})}));var s=function(r){e[r]&&e[r].length>0&&(n=e[r][0],a[a.length]=Oj("Override",null,{PartName:("/"==n[0]?"":"/")+n,ContentType:WB[r][t.bookType]||WB[r].xlsx}))},i=function(n){(e[n]||[]).forEach(function(e){a[a.length]=Oj("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:WB[n][t.bookType]||WB[n].xlsx})})},o=function(t){(e[t]||[]).forEach(function(e){a[a.length]=Oj("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:r[t][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var KB={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function GB(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function qB(e){var t=[vj,Oj("Relationships",null,{xmlns:Vj})];return JN(e["!id"]).forEach(function(n){t[t.length]=Oj("Relationship",null,e["!id"][n])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function XB(e,t,n,r,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=r,a.Target=n,s?a.TargetMode=s:[KB.HLINK,KB.XPATH,KB.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function YB(e,t,n){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function JB(e,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function ZB(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Ew.version+"</meta:generator></office:meta></office:document-meta>"}var $B=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function ek(e,t,n,r,a){null==a[e]&&null!=t&&""!==t&&(a[e]=t,t=jj(t),r[r.length]=n?Oj(e,t,n):Pj(e,t))}function tk(e,t){var n=t||{},r=[vj,Oj("cp:coreProperties",null,{"xmlns:cp":Qj,"xmlns:dc":Gj,"xmlns:dcterms":qj,"xmlns:dcmitype":Xj,"xmlns:xsi":Zj})],a={};if(!e&&!n.Props)return r.join("");e&&(null!=e.CreatedDate&&ek("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:Mj(e.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,a),null!=e.ModifiedDate&&ek("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:Mj(e.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,a));for(var s=0;s!=$B.length;++s){var i=$B[s],o=n.Props&&null!=n.Props[i[1]]?n.Props[i[1]]:e?e[i[1]]:null;!0===o?o="1":!1===o?o="0":"number"==typeof o&&(o=String(o)),null!=o&&ek(i[0],o,null,r,a)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var nk=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],rk=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function ak(e){var t=[],n=Oj;return e||(e={}),e.Application="SheetJS",t[t.length]=vj,t[t.length]=Oj("Properties",null,{xmlns:zj,"xmlns:vt":Jj}),nk.forEach(function(r){if(void 0!==e[r[1]]){var a;switch(r[2]){case"string":a=jj(String(e[r[1]]));break;case"bool":a=e[r[1]]?"true":"false"}void 0!==a&&(t[t.length]=n(r[0],a))}}),t[t.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=n("TitlesOfParts",n("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+jj(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function sk(e){var t=[vj,Oj("Properties",null,{xmlns:Hj,"xmlns:vt":Jj})];if(!e)return t.join("");var n=1;return JN(e).forEach(function(r){++n,t[t.length]=Oj("property",function(e,t){switch(typeof e){case"string":var n=Oj("vt:lpwstr",jj(e));return t&&(n=n.replace(/&quot;/g,"_x0022_")),n;case"number":return Oj((0|e)==e?"vt:i4":"vt:r8",jj(String(e)));case"boolean":return Oj("vt:bool",e?"true":"false")}if(e instanceof Date)return Oj("vt:filetime",Mj(e));throw new Error("Unable to serialize "+e)}(e[r],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:jj(r)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var ik={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function ok(e,t){var n=WC(4),r=WC(4);switch(n.write_shift(4,80==e?31:e),e){case 3:r.write_shift(-4,t);break;case 5:(r=WC(8)).write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,n=t%Math.pow(2,32),r=(t-n)/Math.pow(2,32);r*=1e7;var a=(n*=1e7)/Math.pow(2,32)|0;a>0&&(n%=Math.pow(2,32),r+=a);var s=WC(8);return s.write_shift(4,n),s.write_shift(4,r),s}(t);break;case 31:case 80:for((r=WC(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Jw([n,r])}var lk=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function ck(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function uk(e,t,n){var r=WC(8),a=[],s=[],i=8,o=0,l=WC(8),c=WC(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),a.push(c),i+=8+l.length,!t){(c=WC(8)).write_shift(4,0),a.unshift(c);var u=[WC(4)];for(u[0].write_shift(4,e.length),o=0;o<e.length;++o){var d=e[o][0];for((l=WC(8+2*(d.length+1)+(d.length%2?0:2))).write_shift(4,o+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=Jw(u),s.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if((!t||t[e[o][0]])&&!(lk.indexOf(e[o][0])>-1||rk.indexOf(e[o][0])>-1)&&null!=e[o][1]){var A=e[o][1],h=0;if(t){var f=n[h=+t[e[o][0]]];if("version"==f.p&&"string"==typeof A){var p=A.split(".");A=(+p[0]<<16)+(+p[1]||0)}l=ok(f.t,A)}else{var m=ck(A);-1==m&&(m=31,A=String(A)),l=ok(m,A)}s.push(l),(c=WC(8)).write_shift(4,t?h:2+o),a.push(c),i+=8+l.length}var g=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,g),g+=s[o].length;return r.write_shift(4,i),r.write_shift(4,s.length),Jw([r].concat(a).concat(s))}function dk(e,t,n,r,a,s){var i=WC(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,GN.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var l=uk(e,n,r);if(o.push(l),a){var c=uk(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+l.length),o.push(c)}return Jw(o)}function Ak(e,t){return 1===e.read_shift(t)}function hk(e,t){return t||(t=WC(2)),t.write_shift(2,+!!e),t}function fk(e){return e.read_shift(2,"u")}function pk(e,t){return t||(t=WC(2)),t.write_shift(2,e),t}function mk(e,t,n){return n||(n=WC(2)),n.write_shift(1,"e"==t?+e:+!!e),n.write_shift(1,"e"==t?1:0),n}function gk(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),a="sbcs-cont",s=Fw;(n&&n.biff>=8&&(Fw=1200),n&&8!=n.biff)?12==n.biff&&(a="wstr"):e.read_shift(1)&&(a="dbcs-cont");n.biff>=2&&n.biff<=5&&(a="cpstr");var i=r?e.read_shift(r,a):"";return Fw=s,i}function xk(e){var t=e.t||"",n=WC(3);n.write_shift(2,t.length),n.write_shift(1,1);var r=WC(2*t.length);return r.write_shift(2*t.length,t,"utf16le"),Jw([n,r])}function vk(e,t,n){if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function yk(e,t,n){var r=e.read_shift(n&&2==n.biff?1:2);return 0===r?(e.l++,""):vk(e,r,n)}function bk(e,t,n){if(n.biff>5)return yk(e,0,n);var r=e.read_shift(1);return 0===r?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function wk(e,t,n){return n||(n=WC(3+2*e.length)),n.write_shift(2,e.length),n.write_shift(1,1),n.write_shift(31,e,"utf16le"),n}function Nk(e,t){t||(t=WC(6+2*e.length)),t.write_shift(4,1+e.length);for(var n=0;n<e.length;++n)t.write_shift(2,e.charCodeAt(n));return t.write_shift(2,0),t}function jk(e){var t=WC(512),n=0,r=e.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var a=r.indexOf("#"),s=a>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(n=0;n<i.length;++n)t.write_shift(4,i[n]);if(28==s)Nk(r=r.slice(1),t);else if(2&s){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<i.length;++n)t.write_shift(1,parseInt(i[n],16));var o=a>-1?r.slice(0,a):r;for(t.write_shift(4,2*(o.length+1)),n=0;n<o.length;++n)t.write_shift(2,o.charCodeAt(n));t.write_shift(2,0),8&s&&Nk(a>-1?r.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<i.length;++n)t.write_shift(1,parseInt(i[n],16));for(var l=0;"../"==r.slice(3*l,3*l+3)||"..\\"==r.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)t.write_shift(1,255&r.charCodeAt(n+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),n=0;n<6;++n)t.write_shift(4,0)}return t.slice(0,t.l)}function Ck(e,t,n,r){return r||(r=WC(6)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,n||0),r}function Bk(e,t,n){var r=n.biff>8?4:2;return[e.read_shift(r),e.read_shift(r,"i"),e.read_shift(r,"i")]}function kk(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:n}}}function Sk(e,t){return t||(t=WC(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Ek(e,t,n){var r=1536,a=16;switch(n.bookType){case"biff8":case"xla":break;case"biff5":r=1280,a=8;break;case"biff4":r=4,a=6;break;case"biff3":r=3,a=6;break;case"biff2":r=2,a=4;break;default:throw new Error("unsupported BIFF version")}var s=WC(a);return s.write_shift(2,r),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Fk(e,t){var n=!t||t.biff>=8?2:1,r=WC(8+n*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(n*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=r.slice(0,r.l);return a.l=r.l,a}function _k(e,t,n,r){var a=n&&5==n.biff;r||(r=WC(a?3+t.length:5+2*t.length)),r.write_shift(2,e),r.write_shift(a?1:2,t.length),a||r.write_shift(1,1),r.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return null==s.l&&(s.l=s.length),s}function Ik(e,t,n,r){var a=n&&5==n.biff;r||(r=WC(a?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),a||r.write_shift(4,0),r.write_shift(2,0),r}function Tk(e,t,n){if(n.biff<8)return function(e,t,n){3==e[e.l+1]&&e[e.l]++;var r=gk(e,0,n);return 3==r.charCodeAt(0)?r.slice(1):r}(e,0,n);for(var r=[],a=e.l+t,s=e.read_shift(n.biff>8?4:2);0!==s--;)r.push(Bk(e,n.biff,n));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return r}function Dk(e){var t=WC(24),n=tB(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(r[a],16));return Jw([t,jk(e[1])])}function Lk(e){var t=e[1].Tooltip,n=WC(10+2*(t.length+1));n.write_shift(2,2048);var r=tB(e[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var a=0;a<t.length;++a)n.write_shift(2,t.charCodeAt(a));return n.write_shift(2,0),n}function Uk(e,t,n){if(!n.cellStyles)return zC(e,t);var r=n&&n.biff>=12?4:2,a=e.read_shift(r),s=e.read_shift(r),i=e.read_shift(r),o=e.read_shift(r),l=e.read_shift(2);2==r&&(e.l+=2);var c={s:a,e:s,w:i,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}var Pk=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=$N({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(t,n){var r=n||{};r.dateNF||(r.dateNF="yyyymmdd");var a=uB(function(t,n){var r=[],a=Kw(1);switch(n.type){case"base64":a=qw(zw(t));break;case"binary":a=qw(t);break;case"buffer":case"array":a=t}HC(a,0);var s=a.read_shift(1),i=!!(136&s),o=!1,l=!1;switch(s){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:o=!0,i=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+s.toString(16))}var c=0,u=521;2==s&&(c=a.read_shift(2)),a.l+=3,2!=s&&(c=a.read_shift(4)),c>1048576&&(c=1e6),2!=s&&(u=a.read_shift(2));var d=a.read_shift(2),A=n.codepage||1252;2!=s&&(a.l+=16,a.read_shift(1),0!==a[a.l]&&(A=e[a[a.l]]),a.l+=1,a.l+=2),l&&(a.l+=36);for(var h=[],f={},p=Math.min(a.length,2==s?521:u-10-(o?264:0)),m=l?32:11;a.l<p&&13!=a[a.l];)switch((f={}).name=Rw.utils.decode(A,a.slice(a.l,a.l+m)).replace(/[\u0000\r\n].*$/g,""),a.l+=m,f.type=String.fromCharCode(a.read_shift(1)),2==s||l||(f.offset=a.read_shift(4)),f.len=a.read_shift(1),2==s&&(f.offset=a.read_shift(2)),f.dec=a.read_shift(1),f.name.length&&h.push(f),2!=s&&(a.l+=l?13:14),f.type){case"B":o&&8==f.len||!n.WTF||console.log("Skipping "+f.name+":"+f.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+f.name+":"+f.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+f.type)}if(13!==a[a.l]&&(a.l=u-1),13!==a.read_shift(1))throw new Error("DBF Terminator not found "+a.l+" "+a[a.l]);a.l=u;var g=0,x=0;for(r[0]=[],x=0;x!=h.length;++x)r[0][x]=h[x].name;for(;c-- >0;)if(42!==a[a.l])for(++a.l,r[++g]=[],x=0,x=0;x!=h.length;++x){var v=a.slice(a.l,a.l+h[x].len);a.l+=h[x].len,HC(v,0);var y=Rw.utils.decode(A,v);switch(h[x].type){case"C":y.trim().length&&(r[g][x]=y.replace(/\s+$/,""));break;case"D":8===y.length?r[g][x]=new Date(+y.slice(0,4),+y.slice(4,6)-1,+y.slice(6,8)):r[g][x]=y;break;case"F":r[g][x]=parseFloat(y.trim());break;case"+":case"I":r[g][x]=l?2147483648^v.read_shift(-4,"i"):v.read_shift(4,"i");break;case"L":switch(y.trim().toUpperCase()){case"Y":case"T":r[g][x]=!0;break;case"N":case"F":r[g][x]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+y+"|")}break;case"M":if(!i)throw new Error("DBF Unexpected MEMO for type "+s.toString(16));r[g][x]="##MEMO##"+(l?parseInt(y.trim(),10):v.read_shift(4));break;case"N":(y=y.replace(/\u0000/g,"").trim())&&"."!=y&&(r[g][x]=+y||0);break;case"@":r[g][x]=new Date(v.read_shift(-8,"f")-621356832e5);break;case"T":r[g][x]=new Date(864e5*(v.read_shift(4)-2440588)+v.read_shift(4));break;case"Y":r[g][x]=v.read_shift(4,"i")/1e4+v.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":r[g][x]=-v.read_shift(-8,"f");break;case"B":if(o&&8==h[x].len){r[g][x]=v.read_shift(8,"f");break}case"G":case"P":v.l+=h[x].len;break;case"0":if("_NullFlags"===h[x].name)break;default:throw new Error("DBF Unsupported data type "+h[x].type)}}else a.l+=d;if(2!=s&&a.l<a.length&&26!=a[a.l++])throw new Error("DBF EOF Marker missing "+(a.l-1)+" of "+a.length+" "+a[a.l-1].toString(16));return n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),n.DBF=h,r}(t,r),r);return a["!cols"]=r.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete r.DBF,a}var r={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return lB(n(e,t),t)}catch(ni){if(t&&t.WTF)throw ni}return{SheetNames:[],Sheets:{}}},to_sheet:n,from_sheet:function(e,n){var a=n||{};if(+a.codepage>=0&&Lw(+a.codepage),"string"==a.type)throw new Error("Cannot write DBF to JS string");var s=VC(),i=s_(e,{header:1,raw:!0,cellDates:!0}),o=i[0],l=i.slice(1),c=e["!cols"]||[],u=0,d=0,A=0,h=1;for(u=0;u<o.length;++u)if(((c[u]||{}).DBF||{}).name)o[u]=c[u].DBF.name,++A;else if(null!=o[u]){if(++A,"number"===typeof o[u]&&(o[u]=o[u].toString(10)),"string"!==typeof o[u])throw new Error("DBF Invalid column name "+o[u]+" |"+typeof o[u]+"|");if(o.indexOf(o[u])!==u)for(d=0;d<1024;++d)if(-1==o.indexOf(o[u]+"_"+d)){o[u]+="_"+d;break}}var f=sB(e["!ref"]),p=[],m=[],g=[];for(u=0;u<=f.e.c-f.s.c;++u){var x="",v="",y=0,b=[];for(d=0;d<l.length;++d)null!=l[d][u]&&b.push(l[d][u]);if(0!=b.length&&null!=o[u]){for(d=0;d<b.length;++d){switch(typeof b[d]){case"number":v="B";break;case"string":default:v="C";break;case"boolean":v="L";break;case"object":v=b[d]instanceof Date?"D":"C"}y=Math.max(y,String(b[d]).length),x=x&&x!=v?"C":v}y>250&&(y=250),"C"==(v=((c[u]||{}).DBF||{}).type)&&c[u].DBF.len>y&&(y=c[u].DBF.len),"B"==x&&"N"==v&&(x="N",g[u]=c[u].DBF.dec,y=c[u].DBF.len),m[u]="C"==x||"N"==v?y:r[x]||0,h+=m[u],p[u]=x}else p[u]="?"}var w=s.next(32);for(w.write_shift(4,318902576),w.write_shift(4,l.length),w.write_shift(2,296+32*A),w.write_shift(2,h),u=0;u<4;++u)w.write_shift(4,0);for(w.write_shift(4,(+t[_w]||3)<<8),u=0,d=0;u<o.length;++u)if(null!=o[u]){var N=s.next(32),j=(o[u].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);N.write_shift(1,j,"sbcs"),N.write_shift(1,"?"==p[u]?"C":p[u],"sbcs"),N.write_shift(4,d),N.write_shift(1,m[u]||r[p[u]]||0),N.write_shift(1,g[u]||0),N.write_shift(1,2),N.write_shift(4,0),N.write_shift(1,0),N.write_shift(4,0),N.write_shift(4,0),d+=m[u]||r[p[u]]||0}var C=s.next(264);for(C.write_shift(4,13),u=0;u<65;++u)C.write_shift(4,0);for(u=0;u<l.length;++u){var B=s.next(h);for(B.write_shift(1,0),d=0;d<o.length;++d)if(null!=o[d])switch(p[d]){case"L":B.write_shift(1,null==l[u][d]?63:l[u][d]?84:70);break;case"B":B.write_shift(8,l[u][d]||0,"f");break;case"N":var k="0";for("number"==typeof l[u][d]&&(k=l[u][d].toFixed(g[d]||0)),A=0;A<m[d]-k.length;++A)B.write_shift(1,32);B.write_shift(1,k,"sbcs");break;case"D":l[u][d]?(B.write_shift(4,("0000"+l[u][d].getFullYear()).slice(-4),"sbcs"),B.write_shift(2,("00"+(l[u][d].getMonth()+1)).slice(-2),"sbcs"),B.write_shift(2,("00"+l[u][d].getDate()).slice(-2),"sbcs")):B.write_shift(8,"00000000","sbcs");break;case"C":var S=String(null!=l[u][d]?l[u][d]:"").slice(0,m[d]);for(B.write_shift(1,S,"sbcs"),A=0;A<m[d]-S.length;++A)B.write_shift(1,32)}}return s.next(1).write_shift(1,26),s.end()}}}(),Rk=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+JN(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(t,n){var r=e[n];return"number"==typeof r?Mw(r):r},r=function(e,t,n){var r=t.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==r?e:Mw(r)};function a(e,a){var s,i=e.split(/[\n\r]+/),o=-1,l=-1,c=0,u=0,d=[],A=[],h=null,f={},p=[],m=[],g=[],x=0;for(+a.codepage>=0&&Lw(+a.codepage);c!==i.length;++c){x=0;var v,y=i[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),b=y.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),w=b[0];if(y.length>0)switch(w){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==b[1].charAt(0)&&A.push(y.slice(3).replace(/;;/g,";"));break;case"C":var N=!1,j=!1,C=!1,B=!1,k=-1,S=-1;for(u=1;u<b.length;++u)switch(b[u].charAt(0)){case"A":case"G":break;case"X":l=parseInt(b[u].slice(1))-1,j=!0;break;case"Y":for(o=parseInt(b[u].slice(1))-1,j||(l=0),s=d.length;s<=o;++s)d[s]=[];break;case"K":'"'===(v=b[u].slice(1)).charAt(0)?v=v.slice(1,v.length-1):"TRUE"===v?v=!0:"FALSE"===v?v=!1:isNaN(fj(v))?isNaN(mj(v).getDate())||(v=uj(v)):(v=fj(v),null!==h&&PN(h)&&(v=ij(v))),"undefined"!==typeof Rw&&"string"==typeof v&&"string"!=(a||{}).type&&(a||{}).codepage&&(v=Rw.utils.decode(a.codepage,v)),N=!0;break;case"E":B=!0;var E=ES(b[u].slice(1),{r:o,c:l});d[o][l]=[d[o][l],E];break;case"S":C=!0,d[o][l]=[d[o][l],"S5S"];break;case"R":k=parseInt(b[u].slice(1))-1;break;case"C":S=parseInt(b[u].slice(1))-1;break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+y)}if(N&&(d[o][l]&&2==d[o][l].length?d[o][l][0]=v:d[o][l]=v,h=null),C){if(B)throw new Error("SYLK shared formula cannot have own formula");var F=k>-1&&d[k][S];if(!F||!F[1])throw new Error("SYLK shared formula cannot find base");d[o][l][1]=IS(F[1],{r:o-k,c:l-S})}break;case"F":var _=0;for(u=1;u<b.length;++u)switch(b[u].charAt(0)){case"X":l=parseInt(b[u].slice(1))-1,++_;break;case"Y":for(o=parseInt(b[u].slice(1))-1,s=d.length;s<=o;++s)d[s]=[];break;case"M":x=parseInt(b[u].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":h=A[parseInt(b[u].slice(1))];break;case"W":for(g=b[u].slice(1).split(" "),s=parseInt(g[0],10);s<=parseInt(g[1],10);++s)x=parseInt(g[2],10),m[s-1]=0===x?{hidden:!0}:{wch:x},tS(m[s-1]);break;case"C":m[l=parseInt(b[u].slice(1))-1]||(m[l]={});break;case"R":p[o=parseInt(b[u].slice(1))-1]||(p[o]={}),x>0?(p[o].hpt=x,p[o].hpx=aS(x)):0===x&&(p[o].hidden=!0);break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+y)}_<1&&(h=null);break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+y)}}return p.length>0&&(f["!rows"]=p),m.length>0&&(f["!cols"]=m),a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),[d,f]}function s(e,t){var n=function(e,t){switch(t.type){case"base64":return a(zw(e),t);case"binary":return a(e,t);case"buffer":return a(Ww&&Buffer.isBuffer(e)?e.toString("binary"):Yw(e),t);case"array":return a(dj(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),r=n[0],s=n[1],i=uB(r,t);return JN(s).forEach(function(e){i[e]=s[e]}),i}function i(e,t,n,r){var a="C;Y"+(n+1)+";X"+(r+1)+";K";switch(e.t){case"n":a+=e.v||0,e.f&&!e.F&&(a+=";E"+_S(e.f,{r:n,c:r}));break;case"b":a+=e.v?"TRUE":"FALSE";break;case"e":a+=e.w||e.v;break;case"d":a+='"'+(e.w||e.v)+'"';break;case"s":a+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return a}return e["|"]=254,{to_workbook:function(e,t){return lB(s(e,t),t)},to_sheet:s,from_sheet:function(e,t){var n,r,a=["ID;PWXL;N;E"],s=[],o=sB(e["!ref"]),l=Array.isArray(e),c="\r\n";a.push("P;PGeneral"),a.push("F;P0;DG0G8;M255"),e["!cols"]&&(r=a,e["!cols"].forEach(function(e,t){var n="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?n+="0":("number"!=typeof e.width||e.wpx||(e.wpx=Zk(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=$k(e.wpx)),"number"==typeof e.wch&&(n+=Math.round(e.wch)))," "!=n.charAt(n.length-1)&&r.push(n)})),e["!rows"]&&function(e,t){t.forEach(function(t,n){var r="F;";t.hidden?r+="M0;":t.hpt?r+="M"+20*t.hpt+";":t.hpx&&(r+="M"+20*rS(t.hpx)+";"),r.length>2&&e.push(r+"R"+(n+1))})}(a,e["!rows"]),a.push("B;Y"+(o.e.r-o.s.r+1)+";X"+(o.e.c-o.s.c+1)+";D"+[o.s.c,o.s.r,o.e.c,o.e.r].join(" "));for(var u=o.s.r;u<=o.e.r;++u)for(var d=o.s.c;d<=o.e.c;++d){var A=nB({r:u,c:d});(n=l?(e[u]||[])[d]:e[A])&&(null!=n.v||n.f&&!n.F)&&s.push(i(n,0,u,d))}return a.join(c)+c+s.join(c)+c+"E"+c}}}(),Ok=function(){function e(e,t){for(var n=e.split("\n"),r=-1,a=-1,s=0,i=[];s!==n.length;++s)if("BOT"!==n[s].trim()){if(!(r<0)){for(var o=n[s].trim().split(","),l=o[0],c=o[1],u=n[++s]||"";1&(u.match(/["]/g)||[]).length&&s<n.length-1;)u+="\n"+n[++s];switch(u=u.trim(),+l){case-1:if("BOT"===u){i[++r]=[],a=0;continue}if("EOD"!==u)throw new Error("Unrecognized DIF special command "+u);break;case 0:"TRUE"===u?i[r][a]=!0:"FALSE"===u?i[r][a]=!1:isNaN(fj(c))?isNaN(mj(c).getDate())?i[r][a]=c:i[r][a]=uj(c):i[r][a]=fj(c),++a;break;case 1:(u=(u=u.slice(1,u.length-1)).replace(/""/g,'"'))&&u.match(/^=".*"$/)&&(u=u.slice(2,-1)),i[r][a++]=""!==u?u:null}if("EOD"===u)break}}else i[++r]=[],a=0;return t&&t.sheetRows&&(i=i.slice(0,t.sheetRows)),i}function t(t,n){return uB(function(t,n){switch(n.type){case"base64":return e(zw(t),n);case"binary":return e(t,n);case"buffer":return e(Ww&&Buffer.isBuffer(t)?t.toString("binary"):Yw(t),n);case"array":return e(dj(t),n)}throw new Error("Unrecognized type "+n.type)}(t,n),n)}var n=function(){var e=function(e,t,n,r,a){e.push(t),e.push(n+","+r),e.push('"'+a.replace(/"/g,'""')+'"')},t=function(e,t,n,r){e.push(t+","+n),e.push(1==t?'"'+r.replace(/"/g,'""')+'"':r)};return function(n){var r,a=[],s=sB(n["!ref"]),i=Array.isArray(n);e(a,"TABLE",0,1,"sheetjs"),e(a,"VECTORS",0,s.e.r-s.s.r+1,""),e(a,"TUPLES",0,s.e.c-s.s.c+1,""),e(a,"DATA",0,0,"");for(var o=s.s.r;o<=s.e.r;++o){t(a,-1,0,"BOT");for(var l=s.s.c;l<=s.e.c;++l){var c=nB({r:o,c:l});if(r=i?(n[o]||[])[l]:n[c])switch(r.t){case"n":var u=r.w;u||null==r.v||(u=r.v),null==u?r.f&&!r.F?t(a,1,0,"="+r.f):t(a,1,0,""):t(a,0,u,"V");break;case"b":t(a,0,r.v?1:0,r.v?"TRUE":"FALSE");break;case"s":t(a,1,0,isNaN(r.v)?r.v:'="'+r.v+'"');break;case"d":r.w||(r.w=QN(r.z||cN[14],nj(uj(r.v)))),t(a,0,r.w,"V");break;default:t(a,1,0,"")}else t(a,1,0,"")}}t(a,-1,0,"EOD");return a.join("\r\n")}}();return{to_workbook:function(e,n){return lB(t(e,n),n)},to_sheet:t,from_sheet:n}}(),Mk=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(t,n){return uB(function(t,n){for(var r=t.split("\n"),a=-1,s=-1,i=0,o=[];i!==r.length;++i){var l=r[i].trim().split(":");if("cell"===l[0]){var c=tB(l[1]);if(o.length<=c.r)for(a=o.length;a<=c.r;++a)o[a]||(o[a]=[]);switch(a=c.r,s=c.c,l[2]){case"t":o[a][s]=e(l[3]);break;case"v":o[a][s]=+l[3];break;case"vtf":var u=l[l.length-1];case"vtc":"nl"===l[3]?o[a][s]=!!+l[4]:o[a][s]=+l[4],"vtf"==l[2]&&(o[a][s]=[o[a][s],u])}}}return n&&n.sheetRows&&(o=o.slice(0,n.sheetRows)),o}(t,n),n)}var r=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),i="--SocialCalcSpreadsheetControlSave--";function o(e){if(!e||!e["!ref"])return"";for(var n,r=[],a=[],s="",i=rB(e["!ref"]),o=Array.isArray(e),l=i.s.r;l<=i.e.r;++l)for(var c=i.s.c;c<=i.e.c;++c)if(s=nB({r:l,c:c}),(n=o?(e[l]||[])[c]:e[s])&&null!=n.v&&"z"!==n.t){switch(a=["cell",s,"t"],n.t){case"s":case"str":a.push(t(n.v));break;case"n":n.f?(a[2]="vtf",a[3]="n",a[4]=n.v,a[5]=t(n.f)):(a[2]="v",a[3]=n.v);break;case"b":a[2]="vt"+(n.f?"f":"c"),a[3]="nl",a[4]=n.v?"1":"0",a[5]=t(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var u=nj(uj(n.v));a[2]="vtc",a[3]="nd",a[4]=""+u,a[5]=n.w||QN(n.z||cN[14],u);break;case"e":continue}r.push(a.join(":"))}return r.push("sheet:c:"+(i.e.c-i.s.c+1)+":r:"+(i.e.r-i.s.r+1)+":tvf:1"),r.push("valueformat:1:text-wiki"),r.join("\n")}return{to_workbook:function(e,t){return lB(n(e,t),t)},to_sheet:n,from_sheet:function(e){return[r,a,s,a,o(e),i].join("\n")}}}(),Qk=function(){function e(e,t,n,r,a){a.raw?t[n][r]=e:""===e||("TRUE"===e?t[n][r]=!0:"FALSE"===e?t[n][r]=!1:isNaN(fj(e))?isNaN(mj(e).getDate())?t[n][r]=e:t[n][r]=uj(e):t[n][r]=fj(e))}var t={44:",",9:"\t",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function r(e){for(var r={},a=!1,s=0,i=0;s<e.length;++s)34==(i=e.charCodeAt(s))?a=!a:!a&&i in t&&(r[i]=(r[i]||0)+1);for(s in i=[],r)Object.prototype.hasOwnProperty.call(r,s)&&i.push([r[s],s]);if(!i.length)for(s in r=n)Object.prototype.hasOwnProperty.call(r,s)&&i.push([r[s],s]);return i.sort(function(e,t){return e[0]-t[0]||n[e[1]]-n[t[1]]}),t[i.pop()[1]]||44}function a(e,t){var n=t||{},a="";var s=n.dense?[]:{},i={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(a=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(a=e.charAt(4),e=e.slice(6)):a=r(e.slice(0,1024)):a=n&&n.FS?n.FS:r(e.slice(0,1024));var o=0,l=0,c=0,u=0,d=0,A=a.charCodeAt(0),h=!1,f=0,p=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var m=null!=n.dateNF?function(e){var t="number"==typeof e?cN[e]:e;return t=t.replace(VN,"(\\d+)"),new RegExp("^"+t+"$")}(n.dateNF):null;function g(){var t=e.slice(u,d),r={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)r.t="z";else if(n.raw)r.t="s",r.v=t;else if(0===t.trim().length)r.t="s",r.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(r.t="s",r.v=t.slice(2,-1).replace(/""/g,'"')):!function(e){return 1!=e.length}(t)?(r.t="s",r.v=t):(r.t="n",r.f=t.slice(1));else if("TRUE"==t)r.t="b",r.v=!0;else if("FALSE"==t)r.t="b",r.v=!1;else if(isNaN(c=fj(t)))if(!isNaN(mj(t).getDate())||m&&t.match(m)){r.z=n.dateNF||cN[14];var a=0;m&&t.match(m)&&(t=function(e,t,n){var r=-1,a=-1,s=-1,i=-1,o=-1,l=-1;(t.match(VN)||[]).forEach(function(e,t){var c=parseInt(n[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":r=c;break;case"d":s=c;break;case"h":i=c;break;case"s":l=c;break;case"m":i>=0?o=c:a=c}}),l>=0&&-1==o&&a>=0&&(o=a,a=-1);var c=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var u=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==i&&-1==o&&-1==l?c:-1==r&&-1==a&&-1==s?u:c+"T"+u}(0,n.dateNF,t.match(m)||[]),a=1),n.cellDates?(r.t="d",r.v=uj(t,a)):(r.t="n",r.v=nj(uj(t,a))),!1!==n.cellText&&(r.w=QN(r.z,r.v instanceof Date?nj(r.v):r.v)),n.cellNF||delete r.z}else r.t="s",r.v=t;else r.t="n",!1!==n.cellText&&(r.w=t),r.v=c;if("z"==r.t||(n.dense?(s[o]||(s[o]=[]),s[o][l]=r):s[nB({c:l,r:o})]=r),u=d+1,p=e.charCodeAt(u),i.e.c<l&&(i.e.c=l),i.e.r<o&&(i.e.r=o),f==A)++l;else if(l=0,++o,n.sheetRows&&n.sheetRows<=o)return!0}e:for(;d<e.length;++d)switch(f=e.charCodeAt(d)){case 34:34===p&&(h=!h);break;case A:case 10:case 13:if(!h&&g())break e}return d-u>0&&g(),s["!ref"]=aB(i),s}function s(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?a(t,n):uB(function(t,n){var r=n||{},a=[];if(!t||0===t.length)return a;for(var s=t.split(/[\r\n]/),i=s.length-1;i>=0&&0===s[i].length;)--i;for(var o=10,l=0,c=0;c<=i;++c)-1==(l=s[c].indexOf(" "))?l=s[c].length:l++,o=Math.max(o,l);for(c=0;c<=i;++c){a[c]=[];var u=0;for(e(s[c].slice(0,o).trim(),a,c,u,r),u=1;u<=(s[c].length-o)/10+1;++u)e(s[c].slice(o+10*(u-1),o+10*u).trim(),a,c,u,r)}return r.sheetRows&&(a=a.slice(0,r.sheetRows)),a}(t,n),n):a(t,n)}function i(e,t){var n="",r="string"==t.type?[0,0,0,0]:YF(e,t);switch(t.type){case"base64":n=zw(e);break;case"binary":case"string":n=e;break;case"buffer":n=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof Rw?Rw.utils.decode(t.codepage,e):Ww&&Buffer.isBuffer(e)?e.toString("binary"):Yw(e);break;case"array":n=dj(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]?n=Tj(n.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?n=Tj(n):"binary"==t.type&&"undefined"!==typeof Rw&&t.codepage&&(n=Rw.utils.decode(t.codepage,Rw.utils.encode(28591,n))),"socialcalc:version:"==n.slice(0,19)?Mk.to_sheet("string"==t.type?n:Tj(n),t):s(n,t)}return{to_workbook:function(e,t){return lB(i(e,t),t)},to_sheet:i,from_sheet:function(e){for(var t,n=[],r=sB(e["!ref"]),a=Array.isArray(e),s=r.s.r;s<=r.e.r;++s){for(var i=[],o=r.s.c;o<=r.e.c;++o){var l=nB({r:s,c:o});if((t=a?(e[s]||[])[o]:e[l])&&null!=t.v){for(var c=(t.w||(oB(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";i.push(c+(0===o?" ":""))}else i.push("          ")}n.push(i.join(""))}return n.join("\n")}}}();var Hk=function(){function e(e,t,n){if(e){HC(e,e.l||0);for(var r=n.Enum||g;e.l<e.length;){var a=e.read_shift(2),s=r[a]||r[65535],i=e.read_shift(2),o=e.l+i,l=s.f&&s.f(e,i,n);if(e.l=o,t(l,s,a))return}}}function t(t,n){if(!t)return t;var r=n||{};var a=r.dense?[]:{},s="Sheet1",i="",o=0,l={},c=[],u=[],d={s:{r:0,c:0},e:{r:0,c:0}},A=r.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])r.Enum=g,e(t,function(e,t,n){switch(n){case 0:r.vers=e,e>=4096&&(r.qpro=!0);break;case 6:d=e;break;case 204:e&&(i=e);break;case 222:i=e;break;case 15:case 51:r.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==n&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=r.dateNF||cN[14],r.cellDates&&(e[1].t="d",e[1].v=ij(e[1].v))),r.qpro&&e[3]>o&&(a["!ref"]=aB(d),l[s]=a,c.push(s),a=r.dense?[]:{},d={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s=i||"Sheet"+(o+1),i="");var u=r.dense?(a[e[0].r]||[])[e[0].c]:a[nB(e[0])];if(u){u.t=e[1].t,u.v=e[1].v,null!=e[1].z&&(u.z=e[1].z),null!=e[1].f&&(u.f=e[1].f);break}r.dense?(a[e[0].r]||(a[e[0].r]=[]),a[e[0].r][e[0].c]=e[1]):a[nB(e[0])]=e[1]}},r);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);r.Enum=x,14==t[2]&&(r.qpro=!0,t.l=0),e(t,function(e,t,n){switch(n){case 204:s=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>o&&(a["!ref"]=aB(d),l[s]=a,c.push(s),a=r.dense?[]:{},d={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s="Sheet"+(o+1)),A>0&&e[0].r>=A)break;r.dense?(a[e[0].r]||(a[e[0].r]=[]),a[e[0].r][e[0].c]=e[1]):a[nB(e[0])]=e[1],d.e.c<e[0].c&&(d.e.c=e[0].c),d.e.r<e[0].r&&(d.e.r=e[0].r);break;case 27:e[14e3]&&(u[e[14e3][0]]=e[14e3][1]);break;case 1537:u[e[0]]=e[1],e[0]==o&&(s=e[1])}},r)}if(a["!ref"]=aB(d),l[i||s]=a,c.push(i||s),!u.length)return{SheetNames:c,Sheets:l};for(var h={},f=[],p=0;p<u.length;++p)l[c[p]]?(f.push(u[p]||c[p]),h[u[p]]=l[u[p]]||l[c[p]]):(f.push(u[p]),h[u[p]]={"!ref":"A1"});return{SheetNames:f,Sheets:h}}function n(e,t,n){var r=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(r[0].c=e.read_shift(1),r[3]=e.read_shift(1),r[0].r=e.read_shift(2),e.l+=2):(r[2]=e.read_shift(1),r[0].c=e.read_shift(2),r[0].r=e.read_shift(2)),r}function r(e,t,r){var a=e.l+t,s=n(e,0,r);if(s[1].t="s",20768==r.vers){e.l++;var i=e.read_shift(1);return s[1].v=e.read_shift(i,"utf8"),s}return r.qpro&&e.l++,s[1].v=e.read_shift(a-e.l,"cstr"),s}function a(e,t,n){var r=WC(7+n.length);r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(1,39);for(var a=0;a<r.length;++a){var s=n.charCodeAt(a);r.write_shift(1,s>=128?95:s)}return r.write_shift(1,0),r}function s(e,t,n){var r=WC(7);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n,"i"),r}function i(e,t,n){var r=WC(13);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(8,n,"f"),r}function o(e,t,n){var r=32768&t;return t=(r?e:0)+((t&=-32769)>=8192?t-16384:t),(r?"":"$")+(n?eB(t):ZC(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function u(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function d(e,t,n,r){var a=WC(6+r.length);a.write_shift(2,e),a.write_shift(1,n),a.write_shift(1,t),a.write_shift(1,39);for(var s=0;s<r.length;++s){var i=r.charCodeAt(s);a.write_shift(1,i>=128?95:i)}return a.write_shift(1,0),a}function A(e,t){var n=u(e),r=e.read_shift(4),a=e.read_shift(4),s=e.read_shift(2);if(65535==s)return 0===r&&3221225472===a?(n[1].t="e",n[1].v=15):0===r&&3489660928===a?(n[1].t="e",n[1].v=42):n[1].v=0,n;var i=32768&s;return s=(32767&s)-16446,n[1].v=(1-2*i)*(a*Math.pow(2,s+32)+r*Math.pow(2,s)),n}function h(e,t,n,r){var a=WC(14);if(a.write_shift(2,e),a.write_shift(1,n),a.write_shift(1,t),0==r)return a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,65535),a;var s,i=0,o=0,l=0;return r<0&&(i=1,r=-r),o=0|Math.log2(r),0==(2147483648&(l=(r/=Math.pow(2,o-31))>>>0))&&(++o,l=(r/=2)>>>0),r-=l,l|=2147483648,l>>>=0,s=(r*=Math.pow(2,32))>>>0,a.write_shift(4,s),a.write_shift(4,l),o+=16383+(i?32768:0),a.write_shift(2,o),a}function f(e,t){var n=u(e),r=e.read_shift(8,"f");return n[1].v=r,n}function p(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function m(e,t){var n=WC(5+e.length);n.write_shift(2,14e3),n.write_shift(2,t);for(var r=0;r<e.length;++r){var a=e.charCodeAt(r);n[n.l++]=a>127?95:a}return n[n.l++]=0,n}var g={0:{n:"BOF",f:fk},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,n){var r={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&n.qpro?(r.s.c=e.read_shift(1),e.l++,r.s.r=e.read_shift(2),r.e.c=e.read_shift(1),e.l++,r.e.r=e.read_shift(2),r):(r.s.c=e.read_shift(2),r.s.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),r.e.c=e.read_shift(2),r.e.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),65535==r.s.c&&(r.s.c=r.e.c=r.s.r=r.e.r=0),r)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,r){var a=n(e,0,r);return a[1].v=e.read_shift(2,"i"),a}},14:{n:"NUMBER",f:function(e,t,r){var a=n(e,0,r);return a[1].v=e.read_shift(8,"f"),a}},15:{n:"LABEL",f:r},16:{n:"FORMULA",f:function(e,t,r){var a=e.l+t,s=n(e,0,r);if(s[1].v=e.read_shift(8,"f"),r.qpro)e.l=a;else{var i=e.read_shift(2);!function(e,t){HC(e,0);var n=[],r=0,a="",s="",i="",u="";for(;e.l<e.length;){var d=e[e.l++];switch(d){case 0:n.push(e.read_shift(8,"f"));break;case 1:s=o(t[0].c,e.read_shift(2),!0),a=o(t[0].r,e.read_shift(2),!1),n.push(s+a);break;case 2:var A=o(t[0].c,e.read_shift(2),!0),h=o(t[0].r,e.read_shift(2),!1);s=o(t[0].c,e.read_shift(2),!0),a=o(t[0].r,e.read_shift(2),!1),n.push(A+h+":"+s+a);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(e.read_shift(2));break;case 6:for(var f="";d=e[e.l++];)f+=String.fromCharCode(d);n.push('"'+f.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:u=n.pop(),i=n.pop(),n.push(["AND","OR"][d-20]+"("+i+","+u+")");break;default:if(d<32&&c[d])u=n.pop(),i=n.pop(),n.push(i+c[d]+u);else{if(!l[d])return d<=7?console.error("WK1 invalid opcode "+d.toString(16)):d<=24?console.error("WK1 unsupported op "+d.toString(16)):d<=30?console.error("WK1 invalid opcode "+d.toString(16)):d<=115?console.error("WK1 unsupported function opcode "+d.toString(16)):console.error("WK1 unrecognized opcode "+d.toString(16));if(69==(r=l[d][1])&&(r=e[e.l++]),r>n.length)return void console.error("WK1 bad formula parse 0x"+d.toString(16)+":|"+n.join("|")+"|");var p=n.slice(-r);n.length-=r,n.push(l[d][0]+"("+p.join(",")+")")}}}1==n.length?t[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}(e.slice(e.l,e.l+i),s),e.l+=i}return s}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:r},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:p},222:{n:"SHEETNAMELP",f:function(e,t){var n=e[e.l++];n>t-1&&(n=t-1);for(var r="";r.length<n;)r+=String.fromCharCode(e[e.l++]);return r}},65535:{n:""}},x={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var n=u(e);return n[1].t="s",n[1].v=e.read_shift(t-4,"cstr"),n}},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:function(e,t){var n=u(e);n[1].v=e.read_shift(2);var r=n[1].v>>1;if(1&n[1].v)switch(7&r){case 0:r=5e3*(r>>3);break;case 1:r=500*(r>>3);break;case 2:r=(r>>3)/20;break;case 3:r=(r>>3)/200;break;case 4:r=(r>>3)/2e3;break;case 5:r=(r>>3)/2e4;break;case 6:r=(r>>3)/16;break;case 7:r=(r>>3)/64}return n[1].v=r,n}},25:{n:"FORMULA19",f:function(e,t){var n=A(e);return e.l+=t-14,n}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var n={},r=e.l+t;e.l<r;){var a=e.read_shift(2);if(14e3==a){for(n[a]=[0,""],n[a][0]=e.read_shift(2);e[e.l];)n[a][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return n}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var n=u(e),r=e.read_shift(4);return n[1].v=r>>6,n}},38:{n:"??"},39:{n:"NUMBER27",f:f},40:{n:"FORMULA28",f:function(e,t){var n=f(e);return e.l+=t-10,n}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:p},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,n){if(n.qpro&&!(t<21)){var r=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[r,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var n=t||{};if(+n.codepage>=0&&Lw(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var r=VC(),o=sB(e["!ref"]),l=Array.isArray(e),c=[];lF(r,0,function(e){var t=WC(2);return t.write_shift(2,e),t}(1030)),lF(r,6,function(e){var t=WC(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(o));for(var u=Math.min(o.e.r,8191),d=o.s.r;d<=u;++d)for(var A=ZC(d),h=o.s.c;h<=o.e.c;++h){d===o.s.r&&(c[h]=eB(h));var f=c[h]+A,p=l?(e[d]||[])[h]:e[f];if(p&&"z"!=p.t)if("n"==p.t)(0|p.v)==p.v&&p.v>=-32768&&p.v<=32767?lF(r,13,s(d,h,p.v)):lF(r,14,i(d,h,p.v));else lF(r,15,a(d,h,oB(p).slice(0,239)))}return lF(r,1),r.end()},book_to_wk3:function(e,t){var n=t||{};if(+n.codepage>=0&&Lw(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var r=VC();lF(r,0,function(e){var t=WC(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var n=0,r=0,a=0,s=0;s<e.SheetNames.length;++s){var i=e.SheetNames[s],o=e.Sheets[i];if(o&&o["!ref"]){++a;var l=rB(o["!ref"]);n<l.e.r&&(n=l.e.r),r<l.e.c&&(r=l.e.c)}}n>8191&&(n=8191);return t.write_shift(2,n),t.write_shift(1,a),t.write_shift(1,r),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var a=0,s=0;a<e.SheetNames.length;++a)(e.Sheets[e.SheetNames[a]]||{})["!ref"]&&lF(r,27,m(e.SheetNames[a],s++));var i=0;for(a=0;a<e.SheetNames.length;++a){var o=e.Sheets[e.SheetNames[a]];if(o&&o["!ref"]){for(var l=sB(o["!ref"]),c=Array.isArray(o),u=[],A=Math.min(l.e.r,8191),f=l.s.r;f<=A;++f)for(var p=ZC(f),g=l.s.c;g<=l.e.c;++g){f===l.s.r&&(u[g]=eB(g));var x=u[g]+p,v=c?(o[f]||[])[g]:o[x];if(v&&"z"!=v.t)if("n"==v.t)lF(r,23,h(f,g,i,v.v));else lF(r,22,d(f,g,i,oB(v).slice(0,239)))}++i}}return lF(r,1),r.end()},to_workbook:function(e,n){switch(n.type){case"base64":return t(qw(zw(e)),n);case"binary":return t(qw(e),n);case"buffer":case"array":return t(e,n)}throw"Unsupported type "+n.type}}}();var zk=/^\s|\s$|[\t\n\r]/;function Wk(e,t){if(!t.bookSST)return"";var n=[vj];n[n.length]=Oj("sst",null,{xmlns:eC[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(null!=e[r]){var a=e[r],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(zk)&&(s+=' xml:space="preserve"'),s+=">"+jj(a.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}var Vk=function(e,t){var n=!1;return null==t&&(n=!0,t=WC(15+4*e.t.length)),t.write_shift(1,0),hB(e.t,t),n?t.slice(0,t.l):t};function Kk(e){var t=VC();KC(t,159,function(e,t){return t||(t=WC(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var n=0;n<e.length;++n)KC(t,19,Vk(e[n]));return KC(t,160),t.end()}function Gk(e){if("undefined"!==typeof Rw)return Rw.utils.encode(_w,e);for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}function qk(e){var t,n,r=0,a=Gk(e),s=a.length+1;for((t=Kw(s))[0]=a.length,n=1;n!=s;++n)t[n]=a[n-1];for(n=s-1;n>=0;--n)r=((0===(16384&r)?0:1)|r<<1&32767)^t[n];return 52811^r}var Xk=function(){function e(e,n){switch(n.type){case"base64":return t(zw(e),n);case"binary":return t(e,n);case"buffer":return t(Ww&&Buffer.isBuffer(e)?e.toString("binary"):Yw(e),n);case"array":return t(dj(e),n)}throw new Error("Unrecognized type "+n.type)}function t(e,t){var n=(t||{}).dense?[]:{},r=e.match(/\\trowd.*?\\row\b/g);if(!r.length)throw new Error("RTF missing table");var a={s:{c:0,r:0},e:{c:0,r:r.length-1}};return r.forEach(function(e,t){Array.isArray(n)&&(n[t]=[]);for(var r,s=/\\\w+\b/g,i=0,o=-1;r=s.exec(e);){if("\\cell"===r[0]){var l=e.slice(i,s.lastIndex-r[0].length);if(" "==l[0]&&(l=l.slice(1)),++o,l.length){var c={v:l,t:"s"};Array.isArray(n)?n[t][o]=c:n[nB({r:t,c:o})]=c}}i=s.lastIndex}o>a.e.c&&(a.e.c=o)}),n["!ref"]=aB(a),n}return{to_workbook:function(t,n){return lB(e(t,n),n)},to_sheet:e,from_sheet:function(e){for(var t,n=["{\\rtf1\\ansi"],r=sB(e["!ref"]),a=Array.isArray(e),s=r.s.r;s<=r.e.r;++s){n.push("\\trowd\\trautofit1");for(var i=r.s.c;i<=r.e.c;++i)n.push("\\cellx"+(i+1));for(n.push("\\pard\\intbl"),i=r.s.c;i<=r.e.c;++i){var o=nB({r:s,c:i});(t=a?(e[s]||[])[i]:e[o])&&(null!=t.v||t.f&&!t.F)&&(n.push(" "+(t.w||(oB(t),t.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}}}();function Yk(e){for(var t=0,n=1;3!=t;++t)n=256*n+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}var Jk=6;function Zk(e){return Math.floor((e+Math.round(128/Jk)/256)*Jk)}function $k(e){return Math.floor((e-5)/Jk*100+.5)/100}function eS(e){return Math.round((e*Jk+5)/Jk*256)/256}function tS(e){e.width?(e.wpx=Zk(e.width),e.wch=$k(e.wpx),e.MDW=Jk):e.wpx?(e.wch=$k(e.wpx),e.width=eS(e.wch),e.MDW=Jk):"number"==typeof e.wch&&(e.width=eS(e.wch),e.wpx=Zk(e.width),e.MDW=Jk),e.customWidth&&delete e.customWidth}var nS=96;function rS(e){return 96*e/nS}function aS(e){return e*nS/96}function sS(e,t){var n,r=[vj,Oj("styleSheet",null,{xmlns:eC[0],"xmlns:vt":Jj})];return e.SSF&&null!=(n=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=e[r]&&(t[t.length]=Oj("numFmt",null,{numFmtId:r,formatCode:jj(e[r])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=Oj("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=function(e){var t=[];return t[t.length]=Oj("cellXfs",null),e.forEach(function(e){t[t.length]=Oj("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=Oj("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function iS(e,t,n){n||(n=WC(6+4*t.length)),n.write_shift(2,e),hB(t,n);var r=n.length>n.l?n.slice(0,n.l):n;return null==n.l&&(n.l=n.length),r}function oS(e,t){t||(t=WC(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=WC(2));var n=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,n),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var n=0;"superscript"==e.vertAlign?n=1:"subscript"==e.vertAlign&&(n=2),t.write_shift(2,n),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),UB(e.color,t);var r=0;return"major"==e.scheme&&(r=1),"minor"==e.scheme&&(r=2),t.write_shift(1,r),hB(e.name,t),t.length>t.l?t.slice(0,t.l):t}var lS,cS=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],uS=zC;function dS(e,t){t||(t=WC(84)),lS||(lS=$N(cS));var n=lS[e.patternType];null==n&&(n=40),t.write_shift(4,n);var r=0;if(40!=n)for(UB({auto:1},t),UB({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function AS(e,t,n){n||(n=WC(16)),n.write_shift(2,t||0),n.write_shift(2,e.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);return n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function hS(e,t){return t||(t=WC(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var fS=zC;function pS(e){KC(e,613,dB(1)),KC(e,46,function(e,t){return t||(t=WC(51)),t.write_shift(1,0),hS(0,t),hS(0,t),hS(0,t),hS(0,t),hS(0,t),t.length>t.l?t.slice(0,t.l):t}()),KC(e,614)}function mS(e){KC(e,619,dB(1)),KC(e,48,function(e,t){return t||(t=WC(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),CB(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}({xfId:0,builtinId:0,name:"Normal"})),KC(e,620)}function gS(e){KC(e,508,function(e,t,n){var r=WC(2052);return r.write_shift(4,e),CB(t,r),CB(n,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),KC(e,509)}function xS(e,t){var n=VC();return KC(n,278),function(e,t){if(t){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var r=e[0];r<=e[1];++r)null!=t[r]&&++n}),0!=n&&(KC(e,615,dB(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=t[r]&&KC(e,44,iS(r,t[r]))}),KC(e,616))}}(n,e.SSF),function(e){KC(e,611,dB(1)),KC(e,43,oS({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),KC(e,612)}(n),function(e){KC(e,603,dB(2)),KC(e,45,dS({patternType:"none"})),KC(e,45,dS({patternType:"gray125"})),KC(e,604)}(n),pS(n),function(e){KC(e,626,dB(1)),KC(e,47,AS({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),KC(e,627)}(n),function(e,t){KC(e,617,dB(t.length)),t.forEach(function(t){KC(e,47,AS(t,0))}),KC(e,618)}(n,t.cellXfs),mS(n),function(e){KC(e,505,dB(0)),KC(e,506)}(n),gS(n),KC(n,279),n.end()}function vS(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var n=[vj];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function yS(){var e=VC();return KC(e,332),KC(e,334,dB(1)),KC(e,335,function(e){var t=WC(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),hB(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),KC(e,336),KC(e,339,function(e,t){var n=WC(8+2*t.length);return n.write_shift(4,e),hB(t,n),n.slice(0,n.l)}(1,"XLDAPR")),KC(e,52),KC(e,35,dB(514)),KC(e,4096,dB(0)),KC(e,4097,pk(1)),KC(e,36),KC(e,53),KC(e,340),KC(e,337,function(e,t){var n=WC(8);return n.write_shift(4,e),n.write_shift(4,t?1:0),n}(1,!0)),KC(e,51,function(e){var t=WC(4+8*e.length);t.write_shift(4,e.length);for(var n=0;n<e.length;++n)t.write_shift(4,e[n][0]),t.write_shift(4,e[n][1]);return t}([[1,0]])),KC(e,338),KC(e,333),e.end()}function bS(){var e=[vj];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var wS=1024;function NS(e,t){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),a=[Oj("xml",null,{"xmlns:v":iC,"xmlns:o":tC,"xmlns:x":nC,"xmlns:mv":sC}).replace(/\/>/,">"),Oj("o:shapelayout",Oj("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Oj("v:shapetype",[Oj("v:stroke",null,{joinstyle:"miter"}),Oj("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];wS<1e3*e;)wS+=1e3;return t.forEach(function(e){var t=tB(e[0]),n={color2:"#BEFF82",type:"gradient"};"gradient"==n.type&&(n.angle="-180");var r="gradient"==n.type?Oj("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=Oj("v:fill",r,n);++wS,a=a.concat(["<v:shape"+Rj({id:"_x0000_s"+wS,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,Oj("v:shadow",null,{on:"t",obscured:"t"}),Oj("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Pj("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),Pj("x:AutoFill","False"),Pj("x:Row",String(t.r)),Pj("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function jS(e){var t=[vj,Oj("comments",null,{xmlns:eC[0]})],n=[];return t.push("<authors>"),e.forEach(function(e){e[1].forEach(function(e){var r=jj(e.a);-1==n.indexOf(r)&&(n.push(r),t.push("<author>"+r+"</author>")),e.T&&e.ID&&-1==n.indexOf("tc="+e.ID)&&(n.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))})}),0==n.length&&(n.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(e){var r=0,a=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?r=n.indexOf("tc="+e[1][0].ID):e[1].forEach(function(e){e.a&&(r=n.indexOf(jj(e.a))),a.push(e.t||"")}),t.push('<comment ref="'+e[0]+'" authorId="'+r+'"><text>'),a.length<=1)t.push(Pj("t",jj(a[0]||"")));else{for(var s="Comment:\n    "+a[0]+"\n",i=1;i<a.length;++i)s+="Reply:\n    "+a[i]+"\n";t.push(Pj("t",jj(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function CS(e,t,n){var r=[vj,Oj("ThreadedComments",null,{xmlns:Kj}).replace(/[\/]>/,">")];return e.forEach(function(e){var a="";(e[1]||[]).forEach(function(s,i){if(s.T){s.a&&-1==t.indexOf(s.a)&&t.push(s.a);var o={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};0==i?a=o.id:o.parentId=a,s.ID=o.id,s.a&&(o.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),r.push(Oj("threadedComment",Pj("text",s.t||""),o))}else delete s.ID})}),r.push("</ThreadedComments>"),r.join("")}var BS=AB;function kS(e){var t=VC(),n=[];return KC(t,628),KC(t,630),e.forEach(function(e){e[1].forEach(function(e){n.indexOf(e.a)>-1||(n.push(e.a.slice(0,54)),KC(t,632,function(e){return hB(e.slice(0,54))}(e.a)))})}),KC(t,631),KC(t,633),e.forEach(function(e){e[1].forEach(function(r){r.iauthor=n.indexOf(r.a);var a={s:tB(e[0]),e:tB(e[0])};KC(t,635,function(e,t){return null==t&&(t=WC(36)),t.write_shift(4,e[1].iauthor),TB(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([a,r])),r.t&&r.t.length>0&&KC(t,637,gB(r)),KC(t,636),delete r.iauthor})}),KC(t,634),KC(t,629),t.end()}var SS=["xlsb","xlsm","xlam","biff8","xla"];var ES=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(e,n,r,a){var s=!1,i=!1;0==r.length?i=!0:"["==r.charAt(0)&&(i=!0,r=r.slice(1,-1)),0==a.length?s=!0:"["==a.charAt(0)&&(s=!0,a=a.slice(1,-1));var o=r.length>0?0|parseInt(r,10):0,l=a.length>0?0|parseInt(a,10):0;return s?l+=t.c:--l,i?o+=t.r:--o,n+(s?"":"$")+eB(l)+(i?"":"$")+ZC(o)}return function(r,a){return t=a,r.replace(e,n)}}(),FS=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,_S=function(){return function(e,t){return e.replace(FS,function(e,n,r,a,s,i){var o=$C(a)-(r?0:t.c),l=JC(i)-(s?0:t.r);return n+"R"+(0==l?"":s?l+1:"["+l+"]")+"C"+(0==o?"":r?o+1:"["+o+"]")})}}();function IS(e,t){return e.replace(FS,function(e,n,r,a,s,i){return n+("$"==r?r+a:eB($C(a)+t.c))+("$"==s?s+i:ZC(JC(i)+t.r))})}function TS(e){e.l+=1}function DS(e,t){var n=e.read_shift(1==t?1:2);return[16383&n,n>>14&1,n>>15&1]}function LS(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return US(e);12==n.biff&&(r=4)}var a=e.read_shift(r),s=e.read_shift(r),i=DS(e,2),o=DS(e,2);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function US(e){var t=DS(e,2),n=DS(e,2),r=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:a,cRel:n[1],rRel:n[2]}}}function PS(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return function(e){var t=DS(e,2),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}(e);var r=e.read_shift(n&&12==n.biff?4:2),a=DS(e,2);return{r:r,c:a[0],cRel:a[1],rRel:a[2]}}function RS(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function OS(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function MS(e){return[e.read_shift(1),e.read_shift(1)]}function QS(e,t){var n=[e.read_shift(1)];if(12==t)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2}switch(n[0]){case 4:n[1]=Ak(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:n[1]=HB[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:n[1]=DB(e);break;case 2:n[1]=bk(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function HS(e,t,n){for(var r=e.read_shift(12==n.biff?4:2),a=[],s=0;s!=r;++s)a.push((12==n.biff?IB:kk)(e,8));return a}function zS(e,t,n){var r=0,a=0;12==n.biff?(r=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,0==--a&&(a=256));for(var s=0,i=[];s!=r&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=QS(e,n.biff);return i}function WS(e,t,n){return e.l+=2,[RS(e)]}function VS(e){return e.l+=6,[]}function KS(e){return e.l+=2,[fk(e),1&e.read_shift(2)]}var GS=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var qS={1:{n:"PtgExp",f:function(e,t,n){return e.l++,n&&12==n.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(n&&2==n.biff?1:2)]}},2:{n:"PtgTbl",f:zC},3:{n:"PtgAdd",f:TS},4:{n:"PtgSub",f:TS},5:{n:"PtgMul",f:TS},6:{n:"PtgDiv",f:TS},7:{n:"PtgPower",f:TS},8:{n:"PtgConcat",f:TS},9:{n:"PtgLt",f:TS},10:{n:"PtgLe",f:TS},11:{n:"PtgEq",f:TS},12:{n:"PtgGe",f:TS},13:{n:"PtgGt",f:TS},14:{n:"PtgNe",f:TS},15:{n:"PtgIsect",f:TS},16:{n:"PtgUnion",f:TS},17:{n:"PtgRange",f:TS},18:{n:"PtgUplus",f:TS},19:{n:"PtgUminus",f:TS},20:{n:"PtgPercent",f:TS},21:{n:"PtgParen",f:TS},22:{n:"PtgMissArg",f:TS},23:{n:"PtgStr",f:function(e,t,n){return e.l++,gk(e,0,n)}},26:{n:"PtgSheet",f:function(e,t,n){return e.l+=5,e.l+=2,e.l+=2==n.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,n){return e.l+=2==n.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,HB[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,DB(e)}},32:{n:"PtgArray",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=2==n.biff?6:12==n.biff?14:7,[r]}},33:{n:"PtgFunc",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var a=e.read_shift(n&&n.biff<=3?1:2);return[hE[a],AE[a],r]}},34:{n:"PtgFuncVar",f:function(e,t,n){var r=e[e.l++],a=e.read_shift(1),s=n&&n.biff<=3?[88==r?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[a,(0===s[0]?AE:dE)[s[1]]]}},35:{n:"PtgName",f:function(e,t,n){var r=e.read_shift(1)>>>5&3,a=!n||n.biff>=8?4:2,s=e.read_shift(a);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[r,0,s]}},36:{n:"PtgRef",f:function(e,t,n){var r=(96&e[e.l])>>5;return e.l+=1,[r,PS(e,0,n)]}},37:{n:"PtgArea",f:function(e,t,n){return[(96&e[e.l++])>>5,LS(e,n.biff>=2&&n.biff,n)]}},38:{n:"PtgMemArea",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=n&&2==n.biff?3:4,[r,e.read_shift(n&&2==n.biff?1:2)]}},39:{n:"PtgMemErr",f:zC},40:{n:"PtgMemNoMem",f:zC},41:{n:"PtgMemFunc",f:function(e,t,n){return[e.read_shift(1)>>>5&3,e.read_shift(n&&2==n.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,12==n.biff&&(e.l+=2),[r]}},43:{n:"PtgAreaErr",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var a=function(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return function(e){var t=e.read_shift(2),n=e.read_shift(1),r=(32768&t)>>15,a=(16384&t)>>14;return t&=16383,1==r&&t>=8192&&(t-=16384),1==a&&n>=128&&(n-=256),{r:t,c:n,cRel:a,rRel:r}}(e);var a=e.read_shift(r>=12?4:2),s=e.read_shift(2),i=(16384&s)>>14,o=(32768&s)>>15;if(s&=16383,1==o)for(;a>524287;)a-=1048576;if(1==i)for(;s>8191;)s-=16384;return{r:a,c:s,cRel:i,rRel:o}}(e,0,n);return[r,a]}},45:{n:"PtgAreaN",f:function(e,t,n){var r=(96&e[e.l++])>>5,a=function(e,t,n){if(n.biff<8)return US(e);var r=e.read_shift(12==n.biff?4:2),a=e.read_shift(12==n.biff?4:2),s=DS(e,2),i=DS(e,2);return{s:{r:r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}(e,0,n);return[r,a]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,n){return 5==n.biff?function(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var a=e.read_shift(2);return n&&5==n.biff&&(e.l+=12),[r,a,PS(e,0,n)]}},59:{n:"PtgArea3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,a=e.read_shift(2,"i");if(n)switch(n.biff){case 5:e.l+=12;break;case 12:0}return[r,a,LS(e,0,n)]}},60:{n:"PtgRefErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,a=e.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6}return e.l+=s,[r,a]}},61:{n:"PtgAreaErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,a=e.read_shift(2),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12}return e.l+=s,[r,a]}},255:{}},XS={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},YS={1:{n:"PtgElfLel",f:KS},2:{n:"PtgElfRw",f:WS},3:{n:"PtgElfCol",f:WS},6:{n:"PtgElfRwV",f:WS},7:{n:"PtgElfColV",f:WS},10:{n:"PtgElfRadical",f:WS},11:{n:"PtgElfRadicalS",f:VS},13:{n:"PtgElfColS",f:VS},15:{n:"PtgElfColSV",f:VS},16:{n:"PtgElfRadicalLel",f:KS},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2);return{ixti:t,coltype:3&n,rt:GS[n>>2&31],idx:r,c:a,C:s}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},JS={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=n&&2==n.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,n){e.l+=2;for(var r=e.read_shift(n&&2==n.biff?1:2),a=[],s=0;s<=r;++s)a.push(e.read_shift(n&&2==n.biff?1:2));return a}},8:{n:"PtgAttrGoto",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,n){e.l+=n&&2==n.biff?3:4}},32:{n:"PtgAttrBaxcel",f:OS},33:{n:"PtgAttrBaxcel",f:OS},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),MS(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),MS(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function ZS(e,t,n,r){if(r.biff<8)return zC(e,t);for(var a=e.l+t,s=[],i=0;i!==n.length;++i)switch(n[i][0]){case"PtgArray":n[i][1]=zS(e,0,r),s.push(n[i][1]);break;case"PtgMemArea":n[i][2]=HS(e,n[i][1],r),s.push(n[i][2]);break;case"PtgExp":r&&12==r.biff&&(n[i][1][1]=e.read_shift(4),s.push(n[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[i][0]}return 0!==(t=a-e.l)&&s.push(zC(e,t)),s}function $S(e,t,n){for(var r,a,s=e.l+t,i=[];s!=e.l;)t=s-e.l,a=e[e.l],r=qS[a]||qS[XS[a]],24!==a&&25!==a||(r=(24===a?YS:JS)[e[e.l+1]]),r&&r.f?i.push([r.n,r.f(e,t,n)]):zC(e,t);return i}function eE(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],a=[],s=0;s<r.length;++s){var i=r[s];if(i)if(2===i[0])a.push('"'+i[1].replace(/"/g,'""')+'"');else a.push(i[1]);else a.push("")}t.push(a.join(","))}return t.join(";")}var tE={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function nE(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var a="";if(n.biff>8)switch(e[r[0]][0]){case 357:return a=-1==r[1]?"#REF":e.SheetNames[r[1]],r[1]==r[2]?a:a+":"+e.SheetNames[r[2]];case 358:return null!=n.SID?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return a=-1==r[1]?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?a:a+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[r[0]][0][3]?(a=-1==r[1]?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?a:a+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function rE(e,t,n){var r=nE(e,t,n);return"#REF"==r?r:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(r,n)}function aE(e,t,n,r,a){var s,i,o,l,c=a&&a.biff||8,u={s:{c:0,r:0},e:{c:0,r:0}},d=[],A=0,h=0,f="";if(!e[0]||!e[0][0])return"";for(var p=-1,m="",g=0,x=e[0].length;g<x;++g){var v=e[0][g];switch(v[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(s=d.pop(),i=d.pop(),p>=0){switch(e[0][p][1][0]){case 0:m=hj(" ",e[0][p][1][1]);break;case 1:m=hj("\r",e[0][p][1][1]);break;default:if(m="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}i+=m,p=-1}d.push(i+tE[v[0]]+s);break;case"PtgIsect":s=d.pop(),i=d.pop(),d.push(i+" "+s);break;case"PtgUnion":s=d.pop(),i=d.pop(),d.push(i+","+s);break;case"PtgRange":s=d.pop(),i=d.pop(),d.push(i+":"+s);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":o=GC(v[1][1],u,a),d.push(XC(o,c));break;case"PtgRefN":o=n?GC(v[1][1],n,a):v[1][1],d.push(XC(o,c));break;case"PtgRef3d":A=v[1][1],o=GC(v[1][2],u,a);f=rE(r,A,a);d.push(f+"!"+XC(o,c));break;case"PtgFunc":case"PtgFuncVar":var y=v[1][0],b=v[1][1];y||(y=0);var w=0==(y&=127)?[]:d.slice(-y);d.length-=y,"User"===b&&(b=w.shift()),d.push(b+"("+w.join(",")+")");break;case"PtgBool":d.push(v[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":d.push(v[1]);break;case"PtgNum":d.push(String(v[1]));break;case"PtgStr":d.push('"'+v[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=qC(v[1][1],n?{s:n}:u,a),d.push(YC(l,a));break;case"PtgArea":l=qC(v[1][1],u,a),d.push(YC(l,a));break;case"PtgArea3d":A=v[1][1],l=v[1][2],f=rE(r,A,a),d.push(f+"!"+YC(l,a));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgName":h=v[1][2];var N=(r.names||[])[h-1]||(r[0]||[])[h],j=N?N.Name:"SH33TJSNAME"+String(h);j&&"_xlfn."==j.slice(0,6)&&!a.xlfn&&(j=j.slice(6)),d.push(j);break;case"PtgNameX":var C,B=v[1][1];if(h=v[1][2],!(a.biff<=5)){var k="";if(14849==((r[B]||[])[0]||[])[0]||(1025==((r[B]||[])[0]||[])[0]?r[B][h]&&r[B][h].itab>0&&(k=r.SheetNames[r[B][h].itab-1]+"!"):k=r.SheetNames[h-1]+"!"),r[B]&&r[B][h])k+=r[B][h].Name;else if(r[0]&&r[0][h])k+=r[0][h].Name;else{var S=(nE(r,B,a)||"").split(";;");S[h-1]?k=S[h-1]:k+="SH33TJSERRX"}d.push(k);break}B<0&&(B=-B),r[B]&&(C=r[B][h]),C||(C={Name:"SH33TJSERRY"}),d.push(C.Name);break;case"PtgParen":var E="(",F=")";if(p>=0){switch(m="",e[0][p][1][0]){case 2:E=hj(" ",e[0][p][1][1])+E;break;case 3:E=hj("\r",e[0][p][1][1])+E;break;case 4:F=hj(" ",e[0][p][1][1])+F;break;case 5:F=hj("\r",e[0][p][1][1])+F;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}p=-1}d.push(E+d.pop()+F);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":d.push("#REF!");break;case"PtgExp":o={c:v[1][1],r:v[1][0]};var _={c:n.c,r:n.r};if(r.sharedf[nB(o)]){var I=r.sharedf[nB(o)];d.push(aE(I,u,_,r,a))}else{var T=!1;for(s=0;s!=r.arrayf.length;++s)if(i=r.arrayf[s],!(o.c<i[0].s.c||o.c>i[0].e.c)&&!(o.r<i[0].s.r||o.r>i[0].e.r)){d.push(aE(i[1],u,_,r,a)),T=!0;break}T||d.push(v[1])}break;case"PtgArray":d.push("{"+eE(v[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=g;break;case"PtgMissArg":d.push("");break;case"PtgList":d.push("Table"+v[1].idx+"[#"+v[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(v))}if(3!=a.biff&&p>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][g][0])){var D=!0;switch((v=e[0][p])[1][0]){case 4:D=!1;case 0:m=hj(" ",v[1][1]);break;case 5:D=!1;case 1:m=hj("\r",v[1][1]);break;default:if(m="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+v[1][0])}d.push((D?m:"")+d.pop()+(D?"":m)),p=-1}}if(d.length>1&&a.WTF)throw new Error("bad formula stack");return d[0]}function sE(e,t,n,r,a){var s=Ck(t,n,a),i=function(e){if(null==e){var t=WC(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return LB("number"==typeof e?e:0)}(e.v),o=WC(6);o.write_shift(2,33),o.write_shift(4,0);for(var l=WC(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return Jw([s,i,o,l])}function iE(e,t,n){var r=e.read_shift(4),a=$S(e,r,n),s=e.read_shift(4);return[a,s>0?ZS(e,s,a,n):null]}var oE=iE,lE=iE,cE=iE,uE=iE,dE={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},AE={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},hE={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function fE(e){return("of:="+e.replace(FS,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function pE(e){return e.replace(/\./,"!")}var mE="undefined"!==typeof Map;function gE(e,t,n){var r=0,a=e.length;if(n){if(mE?n.has(t):Object.prototype.hasOwnProperty.call(n,t))for(var s=mE?n.get(t):n[t];r<s.length;++r)if(e[s[r]].t===t)return e.Count++,s[r]}else for(;r<a;++r)if(e[r].t===t)return e.Count++,r;return e[a]={t:t},e.Count++,e.Unique++,n&&(mE?(n.has(t)||n.set(t,[]),n.get(t).push(a)):(Object.prototype.hasOwnProperty.call(n,t)||(n[t]=[]),n[t].push(a))),a}function xE(e,t){var n={min:e+1,max:e+1},r=-1;return t.MDW&&(Jk=t.MDW),null!=t.width?n.customWidth=1:null!=t.wpx?r=$k(t.wpx):null!=t.wch&&(r=t.wch),r>-1?(n.width=eS(r),n.customWidth=1):null!=t.width&&(n.width=t.width),t.hidden&&(n.hidden=!0),null!=t.level&&(n.outlineLevel=n.level=t.level),n}function vE(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(n=[1,1,1,1,.5,.5]),null==e.left&&(e.left=n[0]),null==e.right&&(e.right=n[1]),null==e.top&&(e.top=n[2]),null==e.bottom&&(e.bottom=n[3]),null==e.header&&(e.header=n[4]),null==e.footer&&(e.footer=n[5])}}function yE(e,t,n){var r=n.revssf[null!=t.z?t.z:"General"],a=60,s=e.length;if(null==r&&n.ssf)for(;a<392;++a)if(null==n.ssf[a]){HN(t.z,a),n.ssf[a]=t.z,n.revssf[t.z]=r=a;break}for(a=0;a!=s;++a)if(e[a].numFmtId===r)return a;return e[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function bE(e,t,n){if(e&&e["!ref"]){var r=sB(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+e["!ref"])}}var wE=["objects","scenarios","selectLockedCells","selectUnlockedCells"],NE=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function jE(e,t,n,r){if(e.c&&n["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var a="",s=e.t,i=e.v;if("z"!==e.t)switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=HB[e.v];break;case"d":r&&r.cellDates?a=uj(e.v,-1).toISOString():((e=Aj(e)).t="n",a=""+(e.v=nj(uj(e.v)))),"undefined"===typeof e.z&&(e.z=cN[14]);break;default:a=e.v}var o=Pj("v",jj(a)),l={r:t},c=yE(r.cellXfs,e,r);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=Pj("v",""+gE(r.Strings,e.v,r.revStrings)),l.t="s";break}l.t="str"}if(e.t!=s&&(e.t=s,e.v=i),"string"==typeof e.f&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Oj("f",jj(e.f),u)+(null!=e.v?o:"")}return e.l&&n["!links"].push([t,e.l]),e.D&&(l.cm=1),Oj("c",o,l)}function CE(e,t,n,r){var a,s=[vj,Oj("worksheet",null,{xmlns:eC[0],"xmlns:r":Yj})],i=n.SheetNames[e],o="",l=n.Sheets[i];null==l&&(l={});var c=l["!ref"]||"A1",u=sB(c);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=aB(u)}r||(r={}),l["!comments"]=[];var d=[];!function(e,t,n,r,a){var s=!1,i={},o=null;if("xlsx"!==r.bookType&&t.vbaraw){var l=t.SheetNames[n];try{t.Workbook&&(l=t.Workbook.Sheets[n].CodeName||l)}catch(ni){}s=!0,i.codeName=Dj(jj(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),o=(o||"")+Oj("outlinePr",null,c)}(s||o)&&(a[a.length]=Oj("sheetPr",o,i))}(l,n,e,t,s),s[s.length]=Oj("dimension",null,{ref:c}),s[s.length]=function(e,t,n,r){var a={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Oj("sheetViews",Oj("sheetView",null,a),{})}(0,0,0,n),t.sheetFormat&&(s[s.length]=Oj("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(s[s.length]=function(e,t){for(var n,r=["<cols>"],a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Oj("col",null,xE(a,n)));return r[r.length]="</cols>",r.join("")}(0,l["!cols"])),s[a=s.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(o=function(e,t){var n,r,a=[],s=[],i=sB(e["!ref"]),o="",l="",c=[],u=0,d=0,A=e["!rows"],h=Array.isArray(e),f={r:l},p=-1;for(d=i.s.c;d<=i.e.c;++d)c[d]=eB(d);for(u=i.s.r;u<=i.e.r;++u){for(s=[],l=ZC(u),d=i.s.c;d<=i.e.c;++d){n=c[d]+l;var m=h?(e[u]||[])[d]:e[n];void 0!==m&&null!=(o=jE(m,n,e,t))&&s.push(o)}(s.length>0||A&&A[u])&&(f={r:l},A&&A[u]&&((r=A[u]).hidden&&(f.hidden=1),p=-1,r.hpx?p=rS(r.hpx):r.hpt&&(p=r.hpt),p>-1&&(f.ht=p,f.customHeight=1),r.level&&(f.outlineLevel=r.level)),a[a.length]=Oj("row",s.join(""),f))}if(A)for(;u<A.length;++u)A&&A[u]&&(f={r:u+1},(r=A[u]).hidden&&(f.hidden=1),p=-1,r.hpx?p=rS(r.hpx):r.hpt&&(p=r.hpt),p>-1&&(f.ht=p,f.customHeight=1),r.level&&(f.outlineLevel=r.level),a[a.length]=Oj("row","",f));return a.join("")}(l,t,0,0),o.length>0&&(s[s.length]=o)),s.length>a+1&&(s[s.length]="</sheetData>",s[a]=s[a].replace("/>",">")),l["!protect"]&&(s[s.length]=function(e){var t={sheet:1};return wE.forEach(function(n){null!=e[n]&&e[n]&&(t[n]="1")}),NE.forEach(function(n){null==e[n]||e[n]||(t[n]="0")}),e.password&&(t.password=qk(e.password).toString(16).toUpperCase()),Oj("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(s[s.length]=function(e,t,n,r){var a="string"==typeof e.ref?e.ref:aB(e.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,i=rB(a);i.s.r==i.e.r&&(i.e.r=rB(t["!ref"]).e.r,a=aB(i));for(var o=0;o<s.length;++o){var l=s[o];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+a}),Oj("autoFilter",null,{ref:a})}(l["!autofilter"],l,n,e)),null!=l["!merges"]&&l["!merges"].length>0&&(s[s.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',n=0;n!=e.length;++n)t+='<mergeCell ref="'+aB(e[n])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var A,h,f=-1,p=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(e){e[1].Target&&(A={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(p=XB(r,-1,jj(e[1].Target).replace(/#.*$/,""),KB.HLINK),A["r:id"]="rId"+p),(f=e[1].Target.indexOf("#"))>-1&&(A.location=jj(e[1].Target.slice(f+1))),e[1].Tooltip&&(A.tooltip=jj(e[1].Tooltip)),s[s.length]=Oj("hyperlink",null,A))}),s[s.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(s[s.length]=(vE(h=l["!margins"]),Oj("pageMargins",null,h))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(s[s.length]=Pj("ignoredErrors",Oj("ignoredError",null,{numberStoredAsText:1,sqref:c}))),d.length>0&&(p=XB(r,-1,"../drawings/drawing"+(e+1)+".xml",KB.DRAW),s[s.length]=Oj("drawing",null,{"r:id":"rId"+p}),l["!drawing"]=d),l["!comments"].length>0&&(p=XB(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",KB.VML),s[s.length]=Oj("legacyDrawing",null,{"r:id":"rId"+p}),l["!legacy"]=p),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function BE(e,t,n,r){var a=function(e,t,n){var r=WC(145),a=(n["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var s=320;a.hpx?s=20*rS(a.hpx):a.hpt&&(s=20*a.hpt),r.write_shift(2,s),r.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),r.write_shift(1,i),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var c={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var d=-1,A=-1,h=u<<10;h<u+1<<10;++h)c.c=h,(Array.isArray(n)?(n[c.r]||[])[c.c]:n[nB(c)])&&(d<0&&(d=h),A=h);d<0||(++o,r.write_shift(4,d),r.write_shift(4,A))}var f=r.l;return r.l=l,r.write_shift(4,o),r.l=f,r.length>r.l?r.slice(0,r.l):r}(r,n,t);(a.length>17||(t["!rows"]||[])[r])&&KC(e,0,a)}var kE=IB,SE=TB;function EE(e){return[yB(e),DB(e),"n"]}var FE=IB,_E=TB;var IE=["left","right","top","bottom","header","footer"];function TE(e,t,n,r,a,s,i){if(void 0===t.v)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":(t=Aj(t)).z=t.z||cN[14],t.v=nj(uj(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v}var l={r:n,c:r};switch(l.s=yE(a.cellXfs,t,a),t.l&&s["!links"].push([nB(l),t.l]),t.c&&s["!comments"].push([nB(l),t.c]),t.t){case"s":case"str":return a.bookSST?(o=gE(a.Strings,t.v,a.revStrings),l.t="s",l.v=o,i?KC(e,18,function(e,t,n){return null==n&&(n=WC(8)),bB(t,n),n.write_shift(4,t.v),n}(0,l)):KC(e,7,function(e,t,n){return null==n&&(n=WC(12)),vB(t,n),n.write_shift(4,t.v),n}(0,l))):(l.t="str",i?KC(e,17,function(e,t,n){return null==n&&(n=WC(8+4*e.v.length)),bB(t,n),hB(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l)):KC(e,6,function(e,t,n){return null==n&&(n=WC(12+4*e.v.length)),vB(t,n),hB(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?i?KC(e,13,function(e,t,n){return null==n&&(n=WC(8)),bB(t,n),FB(e.v,n),n}(t,l)):KC(e,2,function(e,t,n){return null==n&&(n=WC(12)),vB(t,n),FB(e.v,n),n}(t,l)):i?KC(e,16,function(e,t,n){return null==n&&(n=WC(12)),bB(t,n),LB(e.v,n),n}(t,l)):KC(e,5,function(e,t,n){return null==n&&(n=WC(16)),vB(t,n),LB(e.v,n),n}(t,l)),!0;case"b":return l.t="b",i?KC(e,15,function(e,t,n){return null==n&&(n=WC(5)),bB(t,n),n.write_shift(1,e.v?1:0),n}(t,l)):KC(e,4,function(e,t,n){return null==n&&(n=WC(9)),vB(t,n),n.write_shift(1,e.v?1:0),n}(t,l)),!0;case"e":return l.t="e",i?KC(e,14,function(e,t,n){return null==n&&(n=WC(8)),bB(t,n),n.write_shift(1,e.v),n.write_shift(2,0),n.write_shift(1,0),n}(t,l)):KC(e,3,function(e,t,n){return null==n&&(n=WC(9)),vB(t,n),n.write_shift(1,e.v),n}(t,l)),!0}return i?KC(e,12,function(e,t,n){return null==n&&(n=WC(4)),bB(t,n)}(0,l)):KC(e,1,function(e,t,n){return null==n&&(n=WC(8)),vB(t,n)}(0,l)),!0}function DE(e,t){t&&t["!merges"]&&(KC(e,177,function(e,t){return null==t&&(t=WC(4)),t.write_shift(4,e),t}(t["!merges"].length)),t["!merges"].forEach(function(t){KC(e,176,_E(t))}),KC(e,178))}function LE(e,t){t&&t["!cols"]&&(KC(e,390),t["!cols"].forEach(function(t,n){t&&KC(e,60,function(e,t,n){null==n&&(n=WC(18));var r=xE(e,t);n.write_shift(-4,e),n.write_shift(-4,e),n.write_shift(4,256*(r.width||10)),n.write_shift(4,0);var a=0;return t.hidden&&(a|=1),"number"==typeof r.width&&(a|=2),t.level&&(a|=t.level<<8),n.write_shift(2,a),n}(n,t))}),KC(e,391))}function UE(e,t){t&&t["!ref"]&&(KC(e,648),KC(e,649,function(e){var t=WC(24);return t.write_shift(4,4),t.write_shift(4,1),TB(e,t),t}(sB(t["!ref"]))),KC(e,650))}function PE(e,t,n){t["!links"].forEach(function(t){if(t[1].Target){var r=XB(n,-1,t[1].Target.replace(/#.*$/,""),KB.HLINK);KC(e,494,function(e,t){var n=WC(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));TB({s:tB(e[0]),e:tB(e[0])},n),SB("rId"+t,n);var r=e[1].Target.indexOf("#");return hB((-1==r?"":e[1].Target.slice(r+1))||"",n),hB(e[1].Tooltip||"",n),hB("",n),n.slice(0,n.l)}(t,r))}}),delete t["!links"]}function RE(e,t,n){KC(e,133),KC(e,137,function(e,t,n){null==n&&(n=WC(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}(0,n)),KC(e,138),KC(e,134)}function OE(e,t){t["!protect"]&&KC(e,535,function(e,t){return null==t&&(t=WC(66)),t.write_shift(2,e.password?qk(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?t.write_shift(4,null==e[n[0]]||e[n[0]]?0:1):t.write_shift(4,null!=e[n[0]]&&e[n[0]]?0:1)}),t}(t["!protect"]))}function ME(e,t,n,r){var a=VC(),s=n.SheetNames[e],i=n.Sheets[s]||{},o=s;try{n&&n.Workbook&&(o=n.Workbook.Sheets[e].CodeName||o)}catch(ni){}var l=sB(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],KC(a,129),(n.vbaraw||i["!outline"])&&KC(a,147,function(e,t,n){null==n&&(n=WC(84+4*e.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),n.write_shift(1,r);for(var a=1;a<3;++a)n.write_shift(1,0);return UB({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),NB(e,n),n.slice(0,n.l)}(o,i["!outline"])),KC(a,148,SE(l)),RE(a,0,n.Workbook),LE(a,i),function(e,t,n,r){var a,s=sB(t["!ref"]||"A1"),i="",o=[];KC(e,145);var l=Array.isArray(t),c=s.e.r;t["!rows"]&&(c=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=c;++u){i=ZC(u),BE(e,t,s,u);var d=!1;if(u<=s.e.r)for(var A=s.s.c;A<=s.e.c;++A){u===s.s.r&&(o[A]=eB(A)),a=o[A]+i;var h=l?(t[u]||[])[A]:t[a];d=!!h&&TE(e,h,u,A,r,t,d)}}KC(e,146)}(a,i,0,t),OE(a,i),function(e,t,n,r){if(t["!autofilter"]){var a=t["!autofilter"],s="string"===typeof a.ref?a.ref:aB(a.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var i=n.Workbook.Names,o=rB(s);o.s.r==o.e.r&&(o.e.r=rB(t["!ref"]).e.r,s=aB(o));for(var l=0;l<i.length;++l){var c=i[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+s;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),KC(e,161,TB(sB(s))),KC(e,162)}}(a,i,n,e),DE(a,i),PE(a,i,r),i["!margins"]&&KC(a,476,function(e,t){return null==t&&(t=WC(48)),vE(e),IE.forEach(function(n){LB(e[n],t)}),t}(i["!margins"])),t&&!t.ignoreEC&&void 0!=t.ignoreEC||UE(a,i),function(e,t,n,r){if(t["!comments"].length>0){var a=XB(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",KB.VML);KC(e,551,SB("rId"+a)),t["!legacy"]=a}}(a,i,e,r),KC(a,130),a.end()}var QE=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var HE="][*?/\\".split("");function zE(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;return HE.forEach(function(r){if(-1!=e.indexOf(r)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}}),n}function WE(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];!function(e,t,n){e.forEach(function(r,a){zE(r);for(var s=0;s<a;++s)if(r==e[s])throw new Error("Duplicate Sheet Name: "+r);if(n){var i=t&&t[a]&&t[a].CodeName||r;if(95==i.charCodeAt(0)&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}(e.SheetNames,t,!!e.vbaraw);for(var n=0;n<e.SheetNames.length;++n)bE(e.Sheets[e.SheetNames[n]],e.SheetNames[n],n)}function VE(e){var t=[vj];t[t.length]=Oj("workbook",null,{xmlns:eC[0],"xmlns:r":Yj});var n=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(QE.forEach(function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(r[t[0]]=e.Workbook.WBProps[t[0]])}),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=Oj("workbookPr",null,r);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&a[s]&&a[s].Hidden;++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:jj(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden"}t[t.length]=Oj("sheet",null,i)}return t[t.length]="</sheets>",n&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(e){var n={name:e.Name};e.Comment&&(n.comment=e.Comment),null!=e.Sheet&&(n.localSheetId=""+e.Sheet),e.Hidden&&(n.hidden="1"),e.Ref&&(t[t.length]=Oj("definedName",jj(e.Ref),n))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function KE(e,t){return t||(t=WC(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),SB(e.strRelID,t),hB(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function GE(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var n=t.Workbook.Sheets,r=0,a=-1,s=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&-1==a?a=r:1==n[r].Hidden&&-1==s&&(s=r);s>a||(KC(e,135),KC(e,158,function(e,t){return t||(t=WC(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e),t.write_shift(1,120),t.length>t.l?t.slice(0,t.l):t}(a)),KC(e,136))}}function qE(e,t){var n=VC();return KC(n,131),KC(n,128,function(e,t){t||(t=WC(127));for(var n=0;4!=n;++n)t.write_shift(4,0);return hB("SheetJS",t),hB(Ew.version,t),hB(Ew.version,t),hB("7262",t),t.length>t.l?t.slice(0,t.l):t}()),KC(n,153,function(e,t){t||(t=WC(72));var n=0;return e&&e.filterPrivacy&&(n|=8),t.write_shift(4,n),t.write_shift(4,0),NB(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),GE(n,e),function(e,t){KC(e,143);for(var n=0;n!=t.SheetNames.length;++n)KC(e,156,KE({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[n]&&t.Workbook.Sheets[n].Hidden||0,iTabID:n+1,strRelID:"rId"+(n+1),name:t.SheetNames[n]}));KC(e,144)}(n,e),KC(n,132),n.end()}function XE(e,t,n,r,a){return(".bin"===t.slice(-4)?ME:CE)(e,n,r,a)}function YE(e,t,n){return(".bin"===t.slice(-4)?kS:jS)(e,n)}function JE(e,t){var n=[];return e.Props&&n.push(function(e,t){var n=[];return JN(ik).map(function(e){for(var t=0;t<$B.length;++t)if($B[t][1]==e)return $B[t];for(t=0;t<nk.length;++t)if(nk[t][1]==e)return nk[t];throw e}).forEach(function(r){if(null!=e[r[1]]){var a=t&&t.Props&&null!=t.Props[r[1]]?t.Props[r[1]]:e[r[1]];"date"===r[2]&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof a?a=String(a):!0===a||!1===a?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),n.push(Pj(ik[r[1]]||r[1],a))}}),Oj("DocumentProperties",n.join(""),{xmlns:tC})}(e.Props,t)),e.Custprops&&n.push(function(e,t){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",a=[];return e&&JN(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var r=0;r<$B.length;++r)if(t==$B[r][1])return;for(r=0;r<nk.length;++r)if(t==nk[r][1])return;for(r=0;r<n.length;++r)if(t==n[r])return;var s=e[t],i="string";"number"==typeof s?(i="float",s=String(s)):!0===s||!1===s?(i="boolean",s=s?"1":"0"):s=String(s),a.push(Oj(Cj(t),s,{"dt:dt":i}))}}),t&&JN(t).forEach(function(n){if(Object.prototype.hasOwnProperty.call(t,n)&&(!e||!Object.prototype.hasOwnProperty.call(e,n))){var r=t[n],s="string";"number"==typeof r?(s="float",r=String(r)):!0===r||!1===r?(s="boolean",r=r?"1":"0"):r instanceof Date?(s="dateTime.tz",r=r.toISOString()):r=String(r),a.push(Oj(Cj(n),r,{"dt:dt":s}))}}),"<"+r+' xmlns="'+tC+'">'+a.join("")+"</"+r+">"}(e.Props,e.Custprops)),n.join("")}function ZE(e){return Oj("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+_S(e.Ref,{r:0,c:0})})}function $E(e,t,n,r,a,s,i){if(!e||void 0==e.v&&void 0==e.f)return"";var o={};if(e.f&&(o["ss:Formula"]="="+jj(_S(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=tB(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=jj(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=jj(e.l.Tooltip))),n["!merges"])for(var c=n["!merges"],u=0;u!=c.length;++u)c[u].s.c==i.c&&c[u].s.r==i.r&&(c[u].e.c>c[u].s.c&&(o["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(o["ss:MergeDown"]=c[u].e.r-c[u].s.r));var d="",A="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":d="Number",A=String(e.v);break;case"b":d="Boolean",A=e.v?"1":"0";break;case"e":d="Error",A=HB[e.v];break;case"d":d="DateTime",A=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||cN[14]);break;case"s":d="String",A=((e.v||"")+"").replace(wj,function(e){return bj[e]}).replace(Bj,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var h=yE(r.cellXfs,e,r);o["ss:StyleID"]="s"+(21+h),o["ss:Index"]=i.c+1;var f=null!=e.v?A:"",p="z"==e.t?"":'<Data ss:Type="'+d+'">'+f+"</Data>";return(e.c||[]).length>0&&(p+=e.c.map(function(e){var t=Oj("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return Oj("Comment",t,{"ss:Author":e.a})}).join("")),Oj("Cell",p,o)}function eF(e,t){var n='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=aS(t.hpt)),t.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(n+=' ss:Hidden="1"')),n+">"}function tF(e,t,n){var r=[],a=n.SheetNames[e],s=n.Sheets[a],i=s?function(e,t,n,r){if(!e)return"";if(!((r||{}).Workbook||{}).Names)return"";for(var a=r.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==n&&(o.Name.match(/^_xlfn\./)||s.push(ZE(o)))}return s.join("")}(s,0,e,n):"";return i.length>0&&r.push("<Names>"+i+"</Names>"),i=s?function(e,t){if(!e["!ref"])return"";var n=sB(e["!ref"]),r=e["!merges"]||[],a=0,s=[];e["!cols"]&&e["!cols"].forEach(function(e,t){tS(e);var n=!!e.width,r=xE(t,e),a={"ss:Index":t+1};n&&(a["ss:Width"]=Zk(r.width)),e.hidden&&(a["ss:Hidden"]="1"),s.push(Oj("Column",null,a))});for(var i=Array.isArray(e),o=n.s.r;o<=n.e.r;++o){for(var l=[eF(o,(e["!rows"]||[])[o])],c=n.s.c;c<=n.e.c;++c){var u=!1;for(a=0;a!=r.length;++a)if(!(r[a].s.c>c)&&!(r[a].s.r>o)&&!(r[a].e.c<c)&&!(r[a].e.r<o)){r[a].s.c==c&&r[a].s.r==o||(u=!0);break}if(!u){var d={r:o,c:c},A=nB(d),h=i?(e[o]||[])[c]:e[A];l.push($E(h,A,e,t,0,0,d))}}l.push("</Row>"),l.length>2&&s.push(l.join(""))}return s.join("")}(s,t):"",i.length>0&&r.push("<Table>"+i+"</Table>"),r.push(function(e,t,n,r){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Oj("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Oj("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Oj("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)a.push(Oj("Visible",1==r.Workbook.Sheets[n].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&(!r.Workbook.Sheets[s]||r.Workbook.Sheets[s].Hidden);++s);s==n&&a.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Pj("ProtectContents","True")),e["!protect"].objects&&a.push(Pj("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Pj("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||a.push(Pj("EnableSelection","UnlockedCells")):a.push(Pj("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(t){e["!protect"][t[0]]&&a.push("<"+t[1]+"/>")})),0==a.length?"":Oj("WorksheetOptions",a.join(""),{xmlns:nC})}(s,0,e,n)),r.join("")}function nF(e,t){t||(t={}),e.SSF||(e.SSF=Aj(cN)),e.SSF&&(WN(),zN(e.SSF),t.revssf=ej(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],yE(t.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(JE(e,t)),n.push(""),n.push(""),n.push("");for(var r=0;r<e.SheetNames.length;++r)n.push(Oj("Worksheet",tF(r,t,e),{"ss:Name":jj(e.SheetNames[r])}));return n[2]=function(e,t){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(e,t){var r=[];r.push(Oj("NumberFormat",null,{"ss:Format":jj(cN[e.numFmtId])}));var a={"ss:ID":"s"+(21+t)};n.push(Oj("Style",r.join(""),a))}),Oj("Styles",n.join(""))}(0,t),n[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,n=[],r=0;r<t.length;++r){var a=t[r];null==a.Sheet&&(a.Name.match(/^_xlfn\./)||n.push(ZE(a)))}return Oj("Names",n.join(""))}(e),vj+Oj("Workbook",n.join(""),{xmlns:rC,"xmlns:o":tC,"xmlns:x":nC,"xmlns:ss":rC,"xmlns:dt":aC,"xmlns:html":oC})}var rF="e0859ff2f94f6810ab9108002b27b3d9",aF="02d5cdd59c2e1b10939708002b2cf9ae",sF="05d5cdd59c2e1b10939708002b2cf9ae";function iF(e,t){var n=t||{},r=GN.utils.cfb_new({root:"R"}),a="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":a="/Workbook",n.biff=8;break;case"biff5":a="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return GN.utils.cfb_add(r,a,gF(e,n)),8==n.biff&&(e.Props||e.Custprops)&&function(e,t){var n,r=[],a=[],s=[],i=0,o=ZN(RB,"n"),l=ZN(OB,"n");if(e.Props)for(n=JN(e.Props),i=0;i<n.length;++i)(Object.prototype.hasOwnProperty.call(o,n[i])?r:Object.prototype.hasOwnProperty.call(l,n[i])?a:s).push([n[i],e.Props[n[i]]]);if(e.Custprops)for(n=JN(e.Custprops),i=0;i<n.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},n[i])||(Object.prototype.hasOwnProperty.call(o,n[i])?r:Object.prototype.hasOwnProperty.call(l,n[i])?a:s).push([n[i],e.Custprops[n[i]]]);var c=[];for(i=0;i<s.length;++i)lk.indexOf(s[i][0])>-1||rk.indexOf(s[i][0])>-1||null!=s[i][1]&&c.push(s[i]);a.length&&GN.utils.cfb_add(t,"/\x05SummaryInformation",dk(a,rF,l,OB)),(r.length||c.length)&&GN.utils.cfb_add(t,"/\x05DocumentSummaryInformation",dk(r,aF,o,RB,c.length?c:null,sF))}(e,r),8==n.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach(function(n,r){if(0!=r){var a=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==a.slice(-1)&&GN.utils.cfb_add(e,a,t.FileIndex[r].content)}})}(r,GN.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),r}var oF={0:{f:function(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=r,7&s&&(n.level=7&s),16&s&&(n.hidden=!0),32&s&&(n.hpt=a/20),n}},1:{f:function(e){return[xB(e)]}},2:{f:function(e){return[xB(e),EB(e),"n"]}},3:{f:function(e){return[xB(e),e.read_shift(1),"e"]}},4:{f:function(e){return[xB(e),e.read_shift(1),"b"]}},5:{f:function(e){return[xB(e),DB(e),"n"]}},6:{f:function(e){return[xB(e),AB(e),"str"]}},7:{f:function(e){return[xB(e),e.read_shift(4),"s"]}},8:{f:function(e,t,n){var r=e.l+t,a=xB(e);a.r=n["!row"];var s=[a,AB(e),"str"];if(n.cellFormula){e.l+=2;var i=lE(e,r-e.l,n);s[3]=aE(i,0,a,n.supbooks,n)}else e.l=r;return s}},9:{f:function(e,t,n){var r=e.l+t,a=xB(e);a.r=n["!row"];var s=[a,DB(e),"n"];if(n.cellFormula){e.l+=2;var i=lE(e,r-e.l,n);s[3]=aE(i,0,a,n.supbooks,n)}else e.l=r;return s}},10:{f:function(e,t,n){var r=e.l+t,a=xB(e);a.r=n["!row"];var s=[a,e.read_shift(1),"b"];if(n.cellFormula){e.l+=2;var i=lE(e,r-e.l,n);s[3]=aE(i,0,a,n.supbooks,n)}else e.l=r;return s}},11:{f:function(e,t,n){var r=e.l+t,a=xB(e);a.r=n["!row"];var s=[a,e.read_shift(1),"e"];if(n.cellFormula){e.l+=2;var i=lE(e,r-e.l,n);s[3]=aE(i,0,a,n.supbooks,n)}else e.l=r;return s}},12:{f:function(e){return[yB(e)]}},13:{f:function(e){return[yB(e),EB(e),"n"]}},14:{f:function(e){return[yB(e),e.read_shift(1),"e"]}},15:{f:function(e){return[yB(e),e.read_shift(1),"b"]}},16:{f:EE},17:{f:function(e){return[yB(e),AB(e),"str"]}},18:{f:function(e){return[yB(e),e.read_shift(4),"s"]}},19:{f:pB},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,n){var r=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=BB(e),i=cE(e,0,n),o=jB(e);e.l=r;var l={Name:s,Ptg:i};return a<268435455&&(l.Sheet=a),o&&(l.Comment=o),l}},40:{},42:{},43:{f:function(e,t,n){var r={};r.sz=e.read_shift(2)/20;var a=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(a.fItalic&&(r.italic=1),a.fCondense&&(r.condense=1),a.fExtend&&(r.extend=1),a.fShadow&&(r.shadow=1),a.fOutline&&(r.outline=1),a.fStrikeout&&(r.strike=1),700===e.read_shift(2)&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var s=e.read_shift(1);0!=s&&(r.underline=s);var i=e.read_shift(1);i>0&&(r.family=i);var o=e.read_shift(1);switch(o>0&&(r.charset=o),e.l++,r.color=function(e){var t={},n=e.read_shift(1)>>>1,r=e.read_shift(1),a=e.read_shift(2,"i"),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=r;var l=QB[r];l&&(t.rgb=Yk(l));break;case 2:t.rgb=Yk([s,i,o]);break;case 3:t.theme=r}return 0!=a&&(t.tint=a>0?a/32767:a/32768),t}(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=AB(e),r}},44:{f:function(e,t){return[e.read_shift(2),AB(e)]}},45:{f:uS},46:{f:fS},47:{f:function(e,t){var n=e.l+t,r=e.read_shift(2),a=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:a}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Uk},62:{f:function(e){return[xB(e),pB(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=nB(n);var r=e.read_shift(1);return 2&r&&(t.l="1"),8&r&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:zC,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var n={},r=e[e.l];return++e.l,n.above=!(64&r),n.left=!(128&r),e.l+=18,n.name=wB(e,t-19),n}},148:{f:kE,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var a=t>8?AB(e):"";return a.length>0&&(n.CodeName=a),n.autoCompressPictures=!!(65536&r),n.backupFile=!!(64&r),n.checkCompatibility=!!(4096&r),n.date1904=!!(1&r),n.filterPrivacy=!!(8&r),n.hidePivotFieldList=!!(1024&r),n.promptedSolutions=!!(16&r),n.publishItems=!!(2048&r),n.refreshAllConnections=!!(262144&r),n.saveExternalLinkValues=!!(128&r),n.showBorderUnselectedTables=!!(4&r),n.showInkAnnotation=!!(32&r),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(32768&r),n.updateLinks=["userSet","never","always"][r>>8&3],n}},154:{},155:{},156:{f:function(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=kB(e,t-8),n.name=AB(e),n}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:IB},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:FE},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:AB(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:kB},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Tk},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,n){var r=e.l+t,a=_B(e),s=e.read_shift(1),i=[a];if(i[2]=s,n.cellFormula){var o=oE(e,r-e.l,n);i[1]=o}else e.l=r;return i}},427:{f:function(e,t,n){var r=e.l+t,a=[IB(e,16)];if(n.cellFormula){var s=uE(e,r-e.l,n);a[1]=s,e.l=r}else e.l=r;return a}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return IE.forEach(function(n){t[n]=DB(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var n=e.l+t,r=IB(e,16),a=jB(e),s=AB(e),i=AB(e),o=AB(e);e.l=n;var l={rfx:r,relId:a,loc:s,display:o};return i&&(l.Tooltip=i),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:kB},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:BS},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var n=IB(e,16);return t.rfx=n.s,t.ref=nB(n.s),e.l+=16,t}},636:{T:-1},637:{f:mB},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:AB(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function lF(e,t,n,r){var a=t;if(!isNaN(a)){var s=r||(n||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&SC(n)&&e.push(n)}}function cF(e,t,n){return e||(e=WC(7)),e.write_shift(2,t),e.write_shift(2,n),e.write_shift(2,0),e.write_shift(1,0),e}function uF(e,t,n,r){if(null!=t.v)switch(t.t){case"d":case"n":var a="d"==t.t?nj(uj(t.v)):t.v;return void(a==(0|a)&&a>=0&&a<65536?lF(e,2,function(e,t,n){var r=WC(9);return cF(r,e,t),r.write_shift(2,n),r}(n,r,a)):lF(e,3,function(e,t,n){var r=WC(15);return cF(r,e,t),r.write_shift(8,n,"f"),r}(n,r,a)));case"b":case"e":return void lF(e,5,function(e,t,n,r){var a=WC(9);return cF(a,e,t),mk(n,r||"b",a),a}(n,r,t.v,t.t));case"s":case"str":return void lF(e,4,function(e,t,n){var r=WC(8+2*n.length);return cF(r,e,t),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(n,r,(t.v||"").slice(0,255)))}lF(e,1,cF(null,n,r))}function dF(e,t){var n=t||{};for(var r=VC(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==n.sheet&&(a=s);if(0==a&&n.sheet&&e.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return lF(r,4==n.biff?1033:3==n.biff?521:9,Ek(0,16,n)),function(e,t,n,r){var a,s=Array.isArray(t),i=sB(t["!ref"]||"A1"),o="",l=[];if(i.e.c>255||i.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),a=aB(i)}for(var c=i.s.r;c<=i.e.r;++c){o=ZC(c);for(var u=i.s.c;u<=i.e.c;++u){c===i.s.r&&(l[u]=eB(u)),a=l[u]+o;var d=s?(t[c]||[])[u]:t[a];d&&uF(e,d,c,u)}}}(r,e.Sheets[e.SheetNames[a]],0,n),lF(r,10),r.end()}function AF(e,t,n){lF(e,49,function(e,t){var n=e.name||"Arial",r=t&&5==t.biff,a=WC(r?15+n.length:16+2*n.length);return a.write_shift(2,20*(e.sz||12)),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,n.length),r||a.write_shift(1,1),a.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),a}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},n))}function hF(e,t){if(t){var n=0;t.forEach(function(t,r){++n<=256&&t&&lF(e,125,function(e,t){var n=WC(12);n.write_shift(2,t),n.write_shift(2,t),n.write_shift(2,256*e.width),n.write_shift(2,0);var r=0;return e.hidden&&(r|=1),n.write_shift(1,r),r=e.level||0,n.write_shift(1,r),n.write_shift(2,0),n}(xE(r,t),r))})}}function fF(e,t,n,r,a){var s=16+yE(a.cellXfs,t,a);if(null!=t.v||t.bf)if(t.bf)lF(e,6,sE(t,n,r,0,s));else switch(t.t){case"d":case"n":lF(e,515,function(e,t,n,r){var a=WC(14);return Ck(e,t,r,a),LB(n,a),a}(n,r,"d"==t.t?nj(uj(t.v)):t.v,s));break;case"b":case"e":lF(e,517,function(e,t,n,r,a,s){var i=WC(8);return Ck(e,t,r,i),mk(n,s,i),i}(n,r,t.v,s,0,t.t));break;case"s":case"str":if(a.bookSST)lF(e,253,function(e,t,n,r){var a=WC(10);return Ck(e,t,r,a),a.write_shift(4,n),a}(n,r,gE(a.Strings,t.v,a.revStrings),s));else lF(e,516,function(e,t,n,r,a){var s=!a||8==a.biff,i=WC(+s+8+(1+s)*n.length);return Ck(e,t,r,i),i.write_shift(2,n.length),s&&i.write_shift(1,1),i.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),i}(n,r,(t.v||"").slice(0,255),s,a));break;default:lF(e,513,Ck(n,r,s))}else lF(e,513,Ck(n,r,s))}function pF(e,t,n){var r,a=VC(),s=n.SheetNames[e],i=n.Sheets[s]||{},o=(n||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),u=8==t.biff,d="",A=[],h=sB(i["!ref"]||"A1"),f=u?65536:16384;if(h.e.c>255||h.e.r>=f){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,f-1)}lF(a,2057,Ek(0,16,t)),lF(a,13,pk(1)),lF(a,12,pk(100)),lF(a,15,hk(!0)),lF(a,17,hk(!1)),lF(a,16,LB(.001)),lF(a,95,hk(!0)),lF(a,42,hk(!1)),lF(a,43,hk(!1)),lF(a,130,pk(1)),lF(a,128,function(e){var t=WC(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),lF(a,131,hk(!1)),lF(a,132,hk(!1)),u&&hF(a,i["!cols"]),lF(a,512,function(e,t){var n=8!=t.biff&&t.biff?2:4,r=WC(2*n+6);return r.write_shift(n,e.s.r),r.write_shift(n,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}(h,t)),u&&(i["!links"]=[]);for(var p=h.s.r;p<=h.e.r;++p){d=ZC(p);for(var m=h.s.c;m<=h.e.c;++m){p===h.s.r&&(A[m]=eB(m)),r=A[m]+d;var g=c?(i[p]||[])[m]:i[r];g&&(fF(a,g,p,m,t),u&&g.l&&i["!links"].push([r,g.l]))}}var x=l.CodeName||l.name||s;return u&&lF(a,574,function(e){var t=WC(18),n=1718;return e&&e.RTL&&(n|=64),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((o.Views||[])[0])),u&&(i["!merges"]||[]).length&&lF(a,229,function(e){var t=WC(2+8*e.length);t.write_shift(2,e.length);for(var n=0;n<e.length;++n)Sk(e[n],t);return t}(i["!merges"])),u&&function(e,t){for(var n=0;n<t["!links"].length;++n){var r=t["!links"][n];lF(e,440,Dk(r)),r[1].Tooltip&&lF(e,2048,Lk(r))}delete t["!links"]}(a,i),lF(a,442,wk(x)),u&&function(e,t){var n=WC(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),lF(e,2151,n),(n=WC(39)).write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),Sk(sB(t["!ref"]||"A1"),n),n.write_shift(4,4),lF(e,2152,n)}(a,i),lF(a,10),a.end()}function mF(e,t,n){var r=VC(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=8==n.biff,l=5==n.biff;(lF(r,2057,Ek(0,5,n)),"xla"==n.bookType&&lF(r,135),lF(r,225,o?pk(1200):null),lF(r,193,function(e,t){t||(t=WC(e));for(var n=0;n<e;++n)t.write_shift(1,0);return t}(2)),l&&lF(r,191),l&&lF(r,192),lF(r,226),lF(r,92,function(e,t){var n=!t||8==t.biff,r=WC(n?112:54);for(r.write_shift(8==t.biff?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}(0,n)),lF(r,66,pk(o?1200:1252)),o&&lF(r,353,pk(0)),o&&lF(r,448),lF(r,317,function(e){for(var t=WC(2*e),n=0;n<e;++n)t.write_shift(2,n+1);return t}(e.SheetNames.length)),o&&e.vbaraw&&lF(r,211),o&&e.vbaraw)&&lF(r,442,wk(i.CodeName||"ThisWorkbook"));lF(r,156,pk(17)),lF(r,25,hk(!1)),lF(r,18,hk(!1)),lF(r,19,pk(0)),o&&lF(r,431,hk(!1)),o&&lF(r,444,pk(0)),lF(r,61,function(){var e=WC(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),lF(r,64,hk(!1)),lF(r,141,pk(0)),lF(r,34,hk("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&Sj(e.Workbook.WBProps.date1904)?"true":"false"}(e))),lF(r,14,hk(!0)),o&&lF(r,439,hk(!1)),lF(r,218,pk(0)),AF(r,0,n),function(e,t,n){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)null!=t[a]&&lF(e,1054,_k(a,t[a],n))})}(r,e.SSF,n),function(e,t){for(var n=0;n<16;++n)lF(e,224,Ik({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){lF(e,224,Ik(n,0,t))})}(r,n),o&&lF(r,352,hk(!1));var c=r.end(),u=VC();o&&lF(u,140,function(e){return e||(e=WC(4)),e.write_shift(2,1),e.write_shift(2,1),e}()),o&&n.Strings&&function(e,t,n,r){var a=r||(n||[]).length||0;if(a<=8224)return lF(e,t,n,a);var s=t;if(!isNaN(s)){for(var i=n.parts||[],o=0,l=0,c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;var u=e.next(4);for(u.write_shift(2,s),u.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c;l<a;){for((u=e.next(4)).write_shift(2,60),c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;u.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c}}}(u,252,function(e){var t=WC(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var n=[],r=0;r<e.length;++r)n[r]=xk(e[r]);var a=Jw([t].concat(n));return a.parts=[t.length].concat(n.map(function(e){return e.length})),a}(n.Strings)),lF(u,10);var d=u.end(),A=VC(),h=0,f=0;for(f=0;f<e.SheetNames.length;++f)h+=(o?12:11)+(o?2:1)*e.SheetNames[f].length;var p=c.length+h+d.length;for(f=0;f<e.SheetNames.length;++f){lF(A,133,Fk({pos:p,hs:(s[f]||{}).Hidden||0,dt:0,name:e.SheetNames[f]},n)),p+=t[f].length}var m=A.end();if(h!=m.length)throw new Error("BS8 "+h+" != "+m.length);var g=[];return c.length&&g.push(c),m.length&&g.push(m),d.length&&g.push(d),Jw(g)}function gF(e,t){for(var n=0;n<=e.SheetNames.length;++n){var r=e.Sheets[e.SheetNames[n]];if(r&&r["!ref"])rB(r["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}var a=t||{};switch(a.biff||2){case 8:case 5:return function(e,t){var n=t||{},r=[];e&&!e.SSF&&(e.SSF=Aj(cN)),e&&e.SSF&&(WN(),zN(e.SSF),n.revssf=ej(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,GF(n),n.cellXfs=[],yE(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)r[r.length]=pF(a,n,e);return r.unshift(mF(e,r,n)),Jw(r)}(e,t);case 4:case 3:case 2:return dF(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function xF(e,t,n,r){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,c=0;c<a.length;++c)if(!(a[c].s.r>n||a[c].s.c>i)&&!(a[c].e.r<n||a[c].e.c<i)){if(a[c].s.r<n||a[c].s.c<i){o=-1;break}o=a[c].e.r-a[c].s.r+1,l=a[c].e.c-a[c].s.c+1;break}if(!(o<0)){var u=nB({r:n,c:i}),d=r.dense?(e[n]||[])[i]:e[u],A=d&&null!=d.v&&(d.h||kj(d.w||(oB(d),d.w)||""))||"",h={};o>1&&(h.rowspan=o),l>1&&(h.colspan=l),r.editable?A='<span contenteditable="true">'+A+"</span>":d&&(h["data-t"]=d&&d.t||"z",null!=d.v&&(h["data-v"]=d.v),null!=d.z&&(h["data-z"]=d.z),d.l&&"#"!=(d.l.Target||"#").charAt(0)&&(A='<a href="'+d.l.Target+'">'+A+"</a>")),h.id=(r.id||"sjs")+"-"+u,s.push(Oj("td",A,h))}}return"<tr>"+s.join("")+"</tr>"}var vF='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',yF="</body></html>";function bF(e,t,n){return[].join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function wF(e,t){var n=t||{},r=null!=n.header?n.header:vF,a=null!=n.footer?n.footer:yF,s=[r],i=rB(e["!ref"]);n.dense=Array.isArray(e),s.push(bF(0,0,n));for(var o=i.s.r;o<=i.e.r;++o)s.push(xF(e,i,o,n));return s.push("</table>"+a),s.join("")}function NF(e,t,n){var r=n||{};var a=0,s=0;if(null!=r.origin)if("number"==typeof r.origin)a=r.origin;else{var i="string"==typeof r.origin?tB(r.origin):r.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var u=rB(e["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),-1==a&&(c.e.r=a=u.e.r+1)}var d=[],A=0,h=e["!rows"]||(e["!rows"]=[]),f=0,p=0,m=0,g=0,x=0,v=0;for(e["!cols"]||(e["!cols"]=[]);f<o.length&&p<l;++f){var y=o[f];if(CF(y)){if(r.display)continue;h[p]={hidden:!0}}var b=y.children;for(m=g=0;m<b.length;++m){var w=b[m];if(!r.display||!CF(w)){var N=w.hasAttribute("data-v")?w.getAttribute("data-v"):w.hasAttribute("v")?w.getAttribute("v"):Lj(w.innerHTML),j=w.getAttribute("data-z")||w.getAttribute("z");for(A=0;A<d.length;++A){var C=d[A];C.s.c==g+s&&C.s.r<p+a&&p+a<=C.e.r&&(g=C.e.c+1-s,A=-1)}v=+w.getAttribute("colspan")||1,((x=+w.getAttribute("rowspan")||1)>1||v>1)&&d.push({s:{r:p+a,c:g+s},e:{r:p+a+(x||1)-1,c:g+s+(v||1)-1}});var B={t:"s",v:N},k=w.getAttribute("data-t")||w.getAttribute("t")||"";null!=N&&(0==N.length?B.t=k||"z":r.raw||0==N.trim().length||"s"==k||("TRUE"===N?B={t:"b",v:!0}:"FALSE"===N?B={t:"b",v:!1}:isNaN(fj(N))?isNaN(mj(N).getDate())||(B={t:"d",v:uj(N)},r.cellDates||(B={t:"n",v:nj(B.v)}),B.z=r.dateNF||cN[14]):B={t:"n",v:fj(N)})),void 0===B.z&&null!=j&&(B.z=j);var S="",E=w.getElementsByTagName("A");if(E&&E.length)for(var F=0;F<E.length&&(!E[F].hasAttribute("href")||"#"==(S=E[F].getAttribute("href")).charAt(0));++F);S&&"#"!=S.charAt(0)&&(B.l={Target:S}),r.dense?(e[p+a]||(e[p+a]=[]),e[p+a][g+s]=B):e[nB({c:g+s,r:p+a})]=B,c.e.c<g+s&&(c.e.c=g+s),g+=v}}++p}return d.length&&(e["!merges"]=(e["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,p-1+a),e["!ref"]=aB(c),p>=l&&(e["!fullref"]=aB((c.e.r=o.length-f+p-1+a,c))),e}function jF(e,t){return NF((t||{}).dense?[]:{},e,t)}function CF(e){var t="",n=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var BF=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Rj({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return vj+t}}(),kF=function(){var e=function(e){return jj(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",n=function(n,r,a){var s=[];s.push('      <table:table table:name="'+jj(r.SheetNames[a])+'" table:style-name="ta1">\n');var i=0,o=0,l=rB(n["!ref"]||"A1"),c=n["!merges"]||[],u=0,d=Array.isArray(n);if(n["!cols"])for(o=0;o<=l.e.c;++o)s.push("        <table:table-column"+(n["!cols"][o]?' table:style-name="co'+n["!cols"][o].ods+'"':"")+"></table:table-column>\n");var A="",h=n["!rows"]||[];for(i=0;i<l.s.r;++i)A=h[i]?' table:style-name="ro'+h[i].ods+'"':"",s.push("        <table:table-row"+A+"></table:table-row>\n");for(;i<=l.e.r;++i){for(A=h[i]?' table:style-name="ro'+h[i].ods+'"':"",s.push("        <table:table-row"+A+">\n"),o=0;o<l.s.c;++o)s.push(t);for(;o<=l.e.c;++o){var f=!1,p={},m="";for(u=0;u!=c.length;++u)if(!(c[u].s.c>o)&&!(c[u].s.r>i)&&!(c[u].e.c<o)&&!(c[u].e.r<i)){c[u].s.c==o&&c[u].s.r==i||(f=!0),p["table:number-columns-spanned"]=c[u].e.c-c[u].s.c+1,p["table:number-rows-spanned"]=c[u].e.r-c[u].s.r+1;break}if(f)s.push("          <table:covered-table-cell/>\n");else{var g=nB({r:i,c:o}),x=d?(n[i]||[])[o]:n[g];if(x&&x.f&&(p["table:formula"]=jj(fE(x.f)),x.F&&x.F.slice(0,g.length)==g)){var v=rB(x.F);p["table:number-matrix-columns-spanned"]=v.e.c-v.s.c+1,p["table:number-matrix-rows-spanned"]=v.e.r-v.s.r+1}if(x){switch(x.t){case"b":m=x.v?"TRUE":"FALSE",p["office:value-type"]="boolean",p["office:boolean-value"]=x.v?"true":"false";break;case"n":m=x.w||String(x.v||0),p["office:value-type"]="float",p["office:value"]=x.v||0;break;case"s":case"str":m=null==x.v?"":x.v,p["office:value-type"]="string";break;case"d":m=x.w||uj(x.v).toISOString(),p["office:value-type"]="date",p["office:date-value"]=uj(x.v).toISOString(),p["table:style-name"]="ce1";break;default:s.push(t);continue}var y=e(m);if(x.l&&x.l.Target){var b=x.l.Target;"#"==(b="#"==b.charAt(0)?"#"+pE(b.slice(1)):b).charAt(0)||b.match(/^\w+:/)||(b="../"+b),y=Oj("text:a",y,{"xlink:href":b.replace(/&/g,"&amp;")})}s.push("          "+Oj("table:table-cell",Oj("text:p",y,{}),p)+"\n")}else s.push(t)}}s.push("        </table:table-row>\n")}return s.push("      </table:table>\n"),s.join("")};return function(e,t){var r=[vj],a=Rj({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),s=Rj({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==t.bookType?(r.push("<office:document"+a+s+">\n"),r.push(ZB().replace(/office:document-meta/g,"office:meta"))):r.push("<office:document-content"+a+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var n=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!cols"])for(var r=0;r<t["!cols"].length;++r)if(t["!cols"][r]){var a=t["!cols"][r];if(null==a.width&&null==a.wpx&&null==a.wch)continue;tS(a),a.ods=n;var s=t["!cols"][r].wpx+"px";e.push('  <style:style style:name="co'+n+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+s+'"/>\n'),e.push("  </style:style>\n"),++n}});var r=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!rows"])for(var n=0;n<t["!rows"].length;++n)if(t["!rows"][n]){t["!rows"][n].ods=r;var a=t["!rows"][n].hpx+"px";e.push('  <style:style style:name="ro'+r+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+a+'"/>\n'),e.push("  </style:style>\n"),++r}}),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(r,e),r.push("  <office:body>\n"),r.push("    <office:spreadsheet>\n");for(var i=0;i!=e.SheetNames.length;++i)r.push(n(e.Sheets[e.SheetNames[i]],e,i));return r.push("    </office:spreadsheet>\n"),r.push("  </office:body>\n"),"fods"==t.bookType?r.push("</office:document>"):r.push("</office:document-content>"),r.join("")}}();function SF(e,t){if("fods"==t.bookType)return kF(e,t);var n=xj(),r="",a=[],s=[];return gj(n,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),gj(n,r="content.xml",kF(e,t)),a.push([r,"text/xml"]),s.push([r,"ContentFile"]),gj(n,r="styles.xml",BF(e,t)),a.push([r,"text/xml"]),s.push([r,"StylesFile"]),gj(n,r="meta.xml",vj+ZB()),a.push([r,"text/xml"]),s.push([r,"MetadataFile"]),gj(n,r="manifest.rdf",function(e){var t=[vj];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var n=0;n!=e.length;++n)t.push(YB(e[n][0],e[n][1])),t.push(JB("",e[n][0]));return t.push(YB("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(s)),a.push([r,"application/rdf+xml"]),gj(n,r="META-INF/manifest.xml",function(e){var t=[vj];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var n=0;n<e.length;++n)t.push('  <manifest:file-entry manifest:full-path="'+e[n][0]+'" manifest:media-type="'+e[n][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(a)),n}function EF(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function FF(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):qw(Dj(e))}function _F(e){var t=e.reduce(function(e,t){return e+t.length},0),n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(e,r),r+=e.length}),n}function IF(e,t){var n=t?t[0]:0,r=127&e[n];e:if(e[n++]>=128){if(r|=(127&e[n])<<7,e[n++]<128)break e;if(r|=(127&e[n])<<14,e[n++]<128)break e;if(r|=(127&e[n])<<21,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,28),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,35),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,42),++n,e[n++]<128)break e}return t&&(t[0]=n),r}function TF(e){var t=new Uint8Array(7);t[0]=127&e;var n=1;e:if(e>127){if(t[n-1]|=128,t[n]=e>>7&127,++n,e<=16383)break e;if(t[n-1]|=128,t[n]=e>>14&127,++n,e<=2097151)break e;if(t[n-1]|=128,t[n]=e>>21&127,++n,e<=268435455)break e;if(t[n-1]|=128,t[n]=e/256>>>21&127,++n,e<=34359738367)break e;if(t[n-1]|=128,t[n]=e/65536>>>21&127,++n,e<=4398046511103)break e;t[n-1]|=128,t[n]=e/16777216>>>21&127,++n}return t.slice(0,n)}function DF(e){var t=0,n=127&e[t];e:if(e[t++]>=128){if(n|=(127&e[t])<<7,e[t++]<128)break e;if(n|=(127&e[t])<<14,e[t++]<128)break e;if(n|=(127&e[t])<<21,e[t++]<128)break e;n|=(127&e[t])<<28}return n}function LF(e){for(var t=[],n=[0];n[0]<e.length;){var r,a=n[0],s=IF(e,n),i=7&s,o=0;if(0==(s=Math.floor(s/8)))break;switch(i){case 0:for(var l=n[0];e[n[0]++]>=128;);r=e.slice(l,n[0]);break;case 5:o=4,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=IF(e,n),r=e.slice(n[0],n[0]+o),n[0]+=o;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var c={data:r,type:i};null==t[s]?t[s]=[c]:t[s].push(c)}return t}function UF(e){var t=[];return e.forEach(function(e,n){e.forEach(function(e){e.data&&(t.push(TF(8*n+e.type)),2==e.type&&t.push(TF(e.data.length)),t.push(e.data))})}),_F(t)}function PF(e){for(var t,n=[],r=[0];r[0]<e.length;){var a=IF(e,r),s=LF(e.slice(r[0],r[0]+a));r[0]+=a;var i={id:DF(s[1][0].data),messages:[]};s[2].forEach(function(t){var n=LF(t.data),a=DF(n[3][0].data);i.messages.push({meta:n,data:e.slice(r[0],r[0]+a)}),r[0]+=a}),(null==(t=s[3])?void 0:t[0])&&(i.merge=DF(s[3][0].data)>>>0>0),n.push(i)}return n}function RF(e){var t=[];return e.forEach(function(e){var n=[];n[1]=[{data:TF(e.id),type:0}],n[2]=[],null!=e.merge&&(n[3]=[{data:TF(+!!e.merge),type:0}]);var r=[];e.messages.forEach(function(e){r.push(e.data),e.meta[3]=[{type:0,data:TF(e.data.length)}],n[2].push({data:UF(e.meta),type:2})});var a=UF(n);t.push(TF(a.length)),t.push(a),r.forEach(function(e){return t.push(e)})}),_F(t)}function OF(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],r=IF(t,n),a=[];n[0]<t.length;){var s=3&t[n[0]];if(0!=s){var i=0,o=0;if(1==s?(o=4+(t[n[0]]>>2&7),i=(224&t[n[0]++])<<3,i|=t[n[0]++]):(o=1+(t[n[0]++]>>2),2==s?(i=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(i=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),a=[_F(a)],0==i)throw new Error("Invalid offset 0");if(i>a[0].length)throw new Error("Invalid offset beyond length");if(o>=i)for(a.push(a[0].slice(-i)),o-=i;o>=a[a.length-1].length;)a.push(a[a.length-1]),o-=a[a.length-1].length;a.push(a[0].slice(-i,-i+o))}else{var l=t[n[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[n[0]],c>1&&(l|=t[n[0]+1]<<8),c>2&&(l|=t[n[0]+2]<<16),c>3&&(l|=t[n[0]+3]<<24),l>>>=0,l++,n[0]+=c}a.push(t.slice(n[0],n[0]+l)),n[0]+=l}}var u=_F(a);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function MF(e){for(var t=[],n=0;n<e.length;){var r=e[n++],a=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(OF(r,e.slice(n,n+a))),n+=a}if(n!==e.length)throw new Error("data is not a valid framed stream!");return _F(t)}function QF(e){for(var t=[],n=0;n<e.length;){var r=Math.min(e.length-n,268435455),a=new Uint8Array(4);t.push(a);var s=TF(r),i=s.length;t.push(s),r<=60?(i++,t.push(new Uint8Array([r-1<<2]))):r<=256?(i+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(i+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(i+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(i+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(e.slice(n,n+r)),i+=r,a[0]=0,a[1]=255&i,a[2]=i>>8&255,a[3]=i>>16&255,n+=r}return _F(t)}function HF(e,t){var n=new Uint8Array(32),r=EF(n),a=12,s=0;switch(n[0]=5,e.t){case"n":n[1]=2,function(e,t,n){var r=Math.floor(0==n?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,a=n/Math.pow(10,r-6176);e[t+15]|=r>>7,e[t+14]|=(127&r)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=255&a;e[t+15]|=n>=0?0:128}(n,a,e.v),s|=1,a+=16;break;case"b":n[1]=6,r.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[1]=3,r.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,s,!0),n.slice(0,a)}function zF(e,t){var n=new Uint8Array(32),r=EF(n),a=12,s=0;switch(n[0]=3,e.t){case"n":n[2]=2,r.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":n[2]=6,r.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[2]=3,r.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,s,!0),n.slice(0,a)}function WF(e){return IF(LF(e)[1][0].data)}function VF(e,t,n){var r,a,s,i;if(!(null==(r=e[6])?void 0:r[0])||!(null==(a=e[7])?void 0:a[0]))throw"Mutation only works on post-BNC storages!";if((null==(i=null==(s=e[8])?void 0:s[0])?void 0:i.data)&&DF(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var o=0,l=EF(e[7][0].data),c=0,u=[],d=EF(e[4][0].data),A=0,h=[],f=0;f<t.length;++f)if(null!=t[f]){var p,m;switch(l.setUint16(2*f,c,!0),d.setUint16(2*f,A,!0),typeof t[f]){case"string":p=HF({t:"s",v:t[f]},n),m=zF({t:"s",v:t[f]},n);break;case"number":p=HF({t:"n",v:t[f]},n),m=zF({t:"n",v:t[f]},n);break;case"boolean":p=HF({t:"b",v:t[f]},n),m=zF({t:"b",v:t[f]},n);break;default:throw new Error("Unsupported value "+t[f])}u.push(p),c+=p.length,h.push(m),A+=m.length,++o}else l.setUint16(2*f,65535,!0),d.setUint16(2*f,65535);for(e[2][0].data=TF(o);f<e[7][0].data.length/2;++f)l.setUint16(2*f,65535,!0),d.setUint16(2*f,65535,!0);return e[6][0].data=_F(u),e[3][0].data=_F(h),o}function KF(e){return function(t){for(var n=0;n!=e.length;++n){var r=e[n];void 0===t[r[0]]&&(t[r[0]]=r[1]),"n"===r[2]&&(t[r[0]]=Number(t[r[0]]))}}}function GF(e){KF([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function qF(e,t){return"ods"==t.bookType?SF(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=rB(n["!ref"]);r.s.r=r.s.c=0;var a=!1;r.e.c>9&&(a=!0,r.e.c=9),r.e.r>49&&(a=!0,r.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(aB(r)));var s=s_(n,{range:r,header:1}),i=["~Sh33tJ5~"];s.forEach(function(e){return e.forEach(function(e){"string"==typeof e&&i.push(e)})});var o={},l=[],c=GN.read(t.numbers,{type:"base64"});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0],n=e[1];2==t.type&&t.name.match(/\.iwa/)&&PF(MF(t.content)).forEach(function(e){l.push(e.id),o[e.id]={deps:[],location:n,type:DF(e.messages[0].meta[1][0].data)}})}),l.sort(function(e,t){return e-t});var u=l.filter(function(e){return e>1}).map(function(e){return[e,TF(e)]});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&PF(MF(t.content)).forEach(function(e){e.messages.forEach(function(t){u.forEach(function(t){e.messages.some(function(e){return 11006!=DF(e.meta[1][0].data)&&function(e,t){e:for(var n=0;n<=e.length-t.length;++n){for(var r=0;r<t.length;++r)if(e[n+r]!=t[r])continue e;return!0}return!1}(e.data,t[1])})&&o[t[0]].deps.push(e.id)})})})});for(var d,A=GN.find(c,o[1].location),h=PF(MF(A.content)),f=0;f<h.length;++f){var p=h[f];1==p.id&&(d=p)}var m=WF(LF(d.messages[0].data)[1][0].data);for(h=PF(MF((A=GN.find(c,o[m].location)).content)),f=0;f<h.length;++f)(p=h[f]).id==m&&(d=p);for(m=WF(LF(d.messages[0].data)[2][0].data),h=PF(MF((A=GN.find(c,o[m].location)).content)),f=0;f<h.length;++f)(p=h[f]).id==m&&(d=p);for(m=WF(LF(d.messages[0].data)[2][0].data),h=PF(MF((A=GN.find(c,o[m].location)).content)),f=0;f<h.length;++f)(p=h[f]).id==m&&(d=p);var g=LF(d.messages[0].data);g[6][0].data=TF(r.e.r+1),g[7][0].data=TF(r.e.c+1);for(var x=WF(g[46][0].data),v=GN.find(c,o[x].location),y=PF(MF(v.content)),b=0;b<y.length&&y[b].id!=x;++b);if(y[b].id!=x)throw"Bad ColumnRowUIDMapArchive";var w=LF(y[b].messages[0].data);w[1]=[],w[2]=[],w[3]=[];for(var N=0;N<=r.e.c;++N){var j=[];j[1]=j[2]=[{type:0,data:TF(N+420690)}],w[1].push({type:2,data:UF(j)}),w[2].push({type:0,data:TF(N)}),w[3].push({type:0,data:TF(N)})}w[4]=[],w[5]=[],w[6]=[];for(var C=0;C<=r.e.r;++C)(j=[])[1]=j[2]=[{type:0,data:TF(C+726270)}],w[4].push({type:2,data:UF(j)}),w[5].push({type:0,data:TF(C)}),w[6].push({type:0,data:TF(C)});y[b].messages[0].data=UF(w),v.content=QF(RF(y)),v.size=v.content.length,delete g[46];var B=LF(g[4][0].data);B[7][0].data=TF(r.e.r+1);var k=WF(LF(B[1][0].data)[2][0].data);if((y=PF(MF((v=GN.find(c,o[k].location)).content)))[0].id!=k)throw"Bad HeaderStorageBucket";var S=LF(y[0].messages[0].data);for(C=0;C<s.length;++C){var E=LF(S[2][0].data);E[1][0].data=TF(C),E[4][0].data=TF(s[C].length),S[2][C]={type:S[2][0].type,data:UF(E)}}y[0].messages[0].data=UF(S),v.content=QF(RF(y)),v.size=v.content.length;var F=WF(B[2][0].data);if((y=PF(MF((v=GN.find(c,o[F].location)).content)))[0].id!=F)throw"Bad HeaderStorageBucket";for(S=LF(y[0].messages[0].data),N=0;N<=r.e.c;++N)(E=LF(S[2][0].data))[1][0].data=TF(N),E[4][0].data=TF(r.e.r+1),S[2][N]={type:S[2][0].type,data:UF(E)};y[0].messages[0].data=UF(S),v.content=QF(RF(y)),v.size=v.content.length;var _=WF(B[4][0].data);!function(){for(var e,t=GN.find(c,o[_].location),n=PF(MF(t.content)),r=0;r<n.length;++r){var a=n[r];a.id==_&&(e=a)}var s=LF(e.messages[0].data);s[3]=[];var l=[];i.forEach(function(e,t){l[1]=[{type:0,data:TF(t)}],l[2]=[{type:0,data:TF(1)}],l[3]=[{type:2,data:FF(e)}],s[3].push({type:2,data:UF(l)})}),e.messages[0].data=UF(s);var u=QF(RF(n));t.content=u,t.size=t.content.length}();var I=LF(B[3][0].data),T=I[1][0];delete I[2];var D=LF(T.data),L=WF(D[2][0].data);!function(){for(var e,t=GN.find(c,o[L].location),n=PF(MF(t.content)),a=0;a<n.length;++a){var l=n[a];l.id==L&&(e=l)}var u=LF(e.messages[0].data);delete u[6],delete I[7];var d=new Uint8Array(u[5][0].data);u[5]=[];for(var A=0,h=0;h<=r.e.r;++h){var f=LF(d);A+=VF(f,s[h],i),f[1][0].data=TF(h),u[5].push({data:UF(f),type:2})}u[1]=[{type:0,data:TF(r.e.c+1)}],u[2]=[{type:0,data:TF(r.e.r+1)}],u[3]=[{type:0,data:TF(A)}],u[4]=[{type:0,data:TF(r.e.r+1)}],e.messages[0].data=UF(u);var p=QF(RF(n));t.content=p,t.size=t.content.length}(),T.data=UF(D),B[3][0].data=UF(I),g[4][0].data=UF(B),d.messages[0].data=UF(g);var U=QF(RF(h));return A.content=U,A.size=A.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){wS=1024,e&&!e.SSF&&(e.SSF=Aj(cN));e&&e.SSF&&(WN(),zN(e.SSF),t.revssf=ej(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,mE?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xlsb"==t.bookType?"bin":"xml",r=SS.indexOf(t.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};GF(t=t||{});var s=xj(),i="",o=0;t.cellXfs=[],yE(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(i="docProps/core.xml",gj(s,i,tk(e.Props,t)),a.coreprops.push(i),XB(t.rels,2,i,KB.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,gj(s,i,ak(e.Props)),a.extprops.push(i),XB(t.rels,3,i,KB.EXT_PROPS),e.Custprops!==e.Props&&JN(e.Custprops||{}).length>0&&(gj(s,i="docProps/custom.xml",sk(e.Custprops)),a.custprops.push(i),XB(t.rels,4,i,KB.CUST_PROPS));for(o=1;o<=e.SheetNames.length;++o){var u={"!id":{}},d=e.Sheets[e.SheetNames[o-1]];(d||{})["!type"];if(gj(s,i="xl/worksheets/sheet"+o+"."+n,XE(o-1,i,t,e,u)),a.sheets.push(i),XB(t.wbrels,-1,"worksheets/sheet"+o+"."+n,KB.WS[0]),d){var A=d["!comments"],h=!1,f="";A&&A.length>0&&(gj(s,f="xl/comments"+o+"."+n,YE(A,f,t)),a.comments.push(f),XB(u,-1,"../comments"+o+"."+n,KB.CMNT),h=!0),d["!legacy"]&&h&&gj(s,"xl/drawings/vmlDrawing"+o+".vml",NS(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}u["!id"].rId1&&gj(s,GB(i),qB(u))}null!=t.Strings&&t.Strings.length>0&&(gj(s,i="xl/sharedStrings."+n,function(e,t,n){return(".bin"===t.slice(-4)?Kk:Wk)(e,n)}(t.Strings,i,t)),a.strs.push(i),XB(t.wbrels,-1,"sharedStrings."+n,KB.SST));i="xl/workbook."+n,gj(s,i,function(e,t,n){return(".bin"===t.slice(-4)?qE:VE)(e,n)}(e,i,t)),a.workbooks.push(i),XB(t.rels,1,i,KB.WB),i="xl/theme/theme1.xml",gj(s,i,vS(e.Themes,t)),a.themes.push(i),XB(t.wbrels,-1,"theme/theme1.xml",KB.THEME),i="xl/styles."+n,gj(s,i,function(e,t,n){return(".bin"===t.slice(-4)?xS:sS)(e,n)}(e,i,t)),a.styles.push(i),XB(t.wbrels,-1,"styles."+n,KB.STY),e.vbaraw&&r&&(gj(s,i="xl/vbaProject.bin",e.vbaraw),a.vba.push(i),XB(t.wbrels,-1,"vbaProject.bin",KB.VBA));return i="xl/metadata."+n,gj(s,i,function(e){return(".bin"===e.slice(-4)?yS:bS)()}(i)),a.metadata.push(i),XB(t.wbrels,-1,"metadata."+n,KB.XLMETA),gj(s,"[Content_Types].xml",VB(a,t)),gj(s,"_rels/.rels",qB(t.rels)),gj(s,"xl/_rels/workbook."+n+".rels",qB(t.wbrels)),delete t.revssf,delete t.ssf,s}(e,t):XF(e,t)}function XF(e,t){wS=1024,e&&!e.SSF&&(e.SSF=Aj(cN)),e&&e.SSF&&(WN(),zN(e.SSF),t.revssf=ej(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,mE?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xml",r=SS.indexOf(t.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};GF(t=t||{});var s=xj(),i="",o=0;if(t.cellXfs=[],yE(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),gj(s,i="docProps/core.xml",tk(e.Props,t)),a.coreprops.push(i),XB(t.rels,2,i,KB.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,gj(s,i,ak(e.Props)),a.extprops.push(i),XB(t.rels,3,i,KB.EXT_PROPS),e.Custprops!==e.Props&&JN(e.Custprops||{}).length>0&&(gj(s,i="docProps/custom.xml",sk(e.Custprops)),a.custprops.push(i),XB(t.rels,4,i,KB.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},A=e.Sheets[e.SheetNames[o-1]];(A||{})["!type"];if(gj(s,i="xl/worksheets/sheet"+o+"."+n,CE(o-1,t,e,d)),a.sheets.push(i),XB(t.wbrels,-1,"worksheets/sheet"+o+"."+n,KB.WS[0]),A){var h=A["!comments"],f=!1,p="";if(h&&h.length>0){var m=!1;h.forEach(function(e){e[1].forEach(function(e){1==e.T&&(m=!0)})}),m&&(gj(s,p="xl/threadedComments/threadedComment"+o+"."+n,CS(h,u,t)),a.threadedcomments.push(p),XB(d,-1,"../threadedComments/threadedComment"+o+"."+n,KB.TCMNT)),gj(s,p="xl/comments"+o+"."+n,jS(h)),a.comments.push(p),XB(d,-1,"../comments"+o+"."+n,KB.CMNT),f=!0}A["!legacy"]&&f&&gj(s,"xl/drawings/vmlDrawing"+o+".vml",NS(o,A["!comments"])),delete A["!comments"],delete A["!legacy"]}d["!id"].rId1&&gj(s,GB(i),qB(d))}return null!=t.Strings&&t.Strings.length>0&&(gj(s,i="xl/sharedStrings."+n,Wk(t.Strings,t)),a.strs.push(i),XB(t.wbrels,-1,"sharedStrings."+n,KB.SST)),gj(s,i="xl/workbook."+n,VE(e)),a.workbooks.push(i),XB(t.rels,1,i,KB.WB),gj(s,i="xl/theme/theme1.xml",vS(e.Themes,t)),a.themes.push(i),XB(t.wbrels,-1,"theme/theme1.xml",KB.THEME),gj(s,i="xl/styles."+n,sS(e,t)),a.styles.push(i),XB(t.wbrels,-1,"styles."+n,KB.STY),e.vbaraw&&r&&(gj(s,i="xl/vbaProject.bin",e.vbaraw),a.vba.push(i),XB(t.wbrels,-1,"vbaProject.bin",KB.VBA)),gj(s,i="xl/metadata."+n,bS()),a.metadata.push(i),XB(t.wbrels,-1,"metadata."+n,KB.XLMETA),u.length>1&&(gj(s,i="xl/persons/person.xml",function(e){var t=[vj,Oj("personList",null,{xmlns:Kj,"xmlns:x":eC[0]}).replace(/[\/]>/,">")];return e.forEach(function(e,n){t.push(Oj("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(u)),a.people.push(i),XB(t.wbrels,-1,"persons/person.xml",KB.PEOPLE)),gj(s,"[Content_Types].xml",VB(a,t)),gj(s,"_rels/.rels",qB(t.rels)),gj(s,"xl/_rels/workbook.xml.rels",qB(t.wbrels)),delete t.revssf,delete t.ssf,s}function YF(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=zw(e.slice(0,12));break;case"binary":n=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function JF(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return YN(t.file,GN.write(e,{type:Ww?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return GN.write(e,t)}function ZF(e,t){var n={},r=Ww?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(n.compression="DEFLATE"),t.password)n.type=r;else switch(t.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?GN.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!t.compression}):e.generate(n);if("undefined"!==typeof Deno&&"string"==typeof a){if("binary"==t.type||"base64"==t.type)return a;a=new Uint8Array(Xw(a))}return t.password&&"undefined"!==typeof encrypt_agile?JF(encrypt_agile(a,t.password),t):"file"===t.type?YN(t.file,a):"string"==t.type?Tj(a):a}function $F(e,t,n){n||(n="");var r=n+e;switch(t.type){case"base64":return Hw(Dj(r));case"binary":return Dj(r);case"string":return e;case"file":return YN(t.file,r,"utf8");case"buffer":return Ww?Vw(r,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(r):$F(r,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function e_(e,t){switch(t.type){case"string":case"base64":case"binary":for(var n="",r=0;r<e.length;++r)n+=String.fromCharCode(e[r]);return"base64"==t.type?Hw(n):"string"==t.type?Tj(n):n;case"file":return YN(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function t_(e,t){Uw(),WE(e);var n=Aj(t||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),"array"==n.type){n.type="binary";var r=t_(e,n);return n.type="array",Xw(r)}var a=0;if(n.sheet&&(a="number"==typeof n.sheet?n.sheet:e.SheetNames.indexOf(n.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return $F(nF(e,n),n);case"slk":case"sylk":return $F(Rk.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"htm":case"html":return $F(wF(e.Sheets[e.SheetNames[a]],n),n);case"txt":return function(e,t){switch(t.type){case"base64":return Hw(e);case"binary":case"string":return e;case"file":return YN(t.file,e,"binary");case"buffer":return Ww?Vw(e,"binary"):e.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(c_(e.Sheets[e.SheetNames[a]],n),n);case"csv":return $F(l_(e.Sheets[e.SheetNames[a]],n),n,"\ufeff");case"dif":return $F(Ok.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"dbf":return e_(Pk.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"prn":return $F(Qk.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"rtf":return $F(Xk.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"eth":return $F(Mk.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"fods":return $F(SF(e,n),n);case"wk1":return e_(Hk.sheet_to_wk1(e.Sheets[e.SheetNames[a]],n),n);case"wk3":return e_(Hk.book_to_wk3(e,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),e_(gF(e,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),function(e,t){var n=t||{};return JF(iF(e,n),n)}(e,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var n=Aj(t||{});return ZF(qF(e,n),n)}(e,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function n_(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function r_(e,t,n){var r=n||{};return r.type="file",r.file=t,n_(r),t_(e,r)}function a_(e,t,n,r,a,s,i,o){var l=ZC(n),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,A=1===a?[]:{};if(1!==a)if(Object.defineProperty)try{Object.defineProperty(A,"__rowNum__",{value:n,enumerable:!1})}catch(ni){A.__rowNum__=n}else A.__rowNum__=n;if(!i||e[n])for(var h=t.s.c;h<=t.e.c;++h){var f=i?e[n][h]:e[r[h]+l];if(void 0!==f&&void 0!==f.t){var p=f.v;switch(f.t){case"z":if(null==p)break;continue;case"e":p=0==p?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+f.t)}if(null!=s[h]){if(null==p)if("e"==f.t&&null===p)A[s[h]]=null;else if(void 0!==c)A[s[h]]=c;else{if(!u||null!==p)continue;A[s[h]]=null}else A[s[h]]=u&&("n"!==f.t||"n"===f.t&&!1!==o.rawNumbers)?p:oB(f,p,o);null!=p&&(d=!1)}}else{if(void 0===c)continue;null!=s[h]&&(A[s[h]]=c)}}return{row:A,isempty:d}}function s_(e,t){if(null==e||null==e["!ref"])return[];var n={t:"n",v:0},r=0,a=1,s=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=null!=c.range?c.range:e["!ref"];switch(1===c.header?r=1:"A"===c.header?r=2:Array.isArray(c.header)?r=3:null==c.header&&(r=0),typeof u){case"string":l=sB(u);break;case"number":(l=sB(e["!ref"])).s.r=u;break;default:l=u}r>0&&(a=0);var d=ZC(l.s.r),A=[],h=[],f=0,p=0,m=Array.isArray(e),g=l.s.r,x=0,v={};m&&!e[g]&&(e[g]=[]);var y=c.skipHidden&&e["!cols"]||[],b=c.skipHidden&&e["!rows"]||[];for(x=l.s.c;x<=l.e.c;++x)if(!(y[x]||{}).hidden)switch(A[x]=eB(x),n=m?e[g][x]:e[A[x]+d],r){case 1:s[x]=x-l.s.c;break;case 2:s[x]=A[x];break;case 3:s[x]=c.header[x-l.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),o=i=oB(n,null,c),p=v[i]||0){do{o=i+"_"+p++}while(v[o]);v[i]=p,v[o]=1}else v[i]=1;s[x]=o}for(g=l.s.r+a;g<=l.e.r;++g)if(!(b[g]||{}).hidden){var w=a_(e,l,g,A,r,s,m,c);(!1===w.isempty||(1===r?!1!==c.blankrows:c.blankrows))&&(h[f++]=w.row)}return h.length=f,h}var i_=/"/g;function o_(e,t,n,r,a,s,i,o){for(var l=!0,c=[],u="",d=ZC(n),A=t.s.c;A<=t.e.c;++A)if(r[A]){var h=o.dense?(e[n]||[])[A]:e[r[A]+d];if(null==h)u="";else if(null!=h.v){l=!1,u=""+(o.rawNumbers&&"n"==h.t?h.v:oB(h,null,o));for(var f=0,p=0;f!==u.length;++f)if((p=u.charCodeAt(f))===a||p===s||34===p||o.forceQuotes){u='"'+u.replace(i_,'""')+'"';break}"ID"==u&&(u='"ID"')}else null==h.f||h.F?u="":(l=!1,(u="="+h.f).indexOf(",")>=0&&(u='"'+u.replace(i_,'""')+'"'));c.push(u)}return!1===o.blankrows&&l?null:c.join(i)}function l_(e,t){var n=[],r=null==t?{}:t;if(null==e||null==e["!ref"])return"";var a=sB(e["!ref"]),s=void 0!==r.FS?r.FS:",",i=s.charCodeAt(0),o=void 0!==r.RS?r.RS:"\n",l=o.charCodeAt(0),c=new RegExp(("|"==s?"\\|":s)+"+$"),u="",d=[];r.dense=Array.isArray(e);for(var A=r.skipHidden&&e["!cols"]||[],h=r.skipHidden&&e["!rows"]||[],f=a.s.c;f<=a.e.c;++f)(A[f]||{}).hidden||(d[f]=eB(f));for(var p=0,m=a.s.r;m<=a.e.r;++m)(h[m]||{}).hidden||null!=(u=o_(e,a,m,d,i,l,s,r))&&(r.strip&&(u=u.replace(c,"")),(u||!1!==r.blankrows)&&n.push((p++?o:"")+u));return delete r.dense,n.join("")}function c_(e,t){t||(t={}),t.FS="\t",t.RS="\n";var n=l_(e,t);if("undefined"==typeof Rw||"string"==t.type)return n;var r=Rw.utils.encode(1200,n,"str");return String.fromCharCode(255)+String.fromCharCode(254)+r}function u_(e,t,n){var r,a=n||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&null!=a.origin)if("number"==typeof a.origin)o=a.origin;else{var c="string"==typeof a.origin?tB(a.origin):a.origin;o=c.r,l=c.c}var u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var d=sB(i["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),-1==o&&(o=d.e.r+1,u.e.r=o+t.length-1+s)}else-1==o&&(o=0,u.e.r=t.length-1+s);var A=a.header||[],h=0;t.forEach(function(e,t){JN(e).forEach(function(n){-1==(h=A.indexOf(n))&&(A[h=A.length]=n);var c=e[n],u="z",d="",f=nB({c:l+h,r:o+t+s});r=d_(i,f),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?u="n":"boolean"==typeof c?u="b":"string"==typeof c?u="s":c instanceof Date?(u="d",a.cellDates||(u="n",c=nj(c)),d=a.dateNF||cN[14]):null===c&&a.nullError&&(u="e",c=0),r?(r.t=u,r.v=c,delete r.w,delete r.R,d&&(r.z=d)):i[f]=r={t:u,v:c},d&&(r.z=d)):i[f]=c})}),u.e.c=Math.max(u.e.c,l+A.length-1);var f=ZC(o);if(s)for(h=0;h<A.length;++h)i[eB(h+l)+f]={t:"s",v:A[h]};return i["!ref"]=aB(u),i}function d_(e,t,n){if("string"==typeof t){if(Array.isArray(e)){var r=tB(t);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return d_(e,nB("number"!=typeof t?t:{r:t,c:n||0}))}function A_(){return{SheetNames:[],Sheets:{}}}function h_(e,t,n,r){var a=1;if(!n)for(;a<=65535&&-1!=e.SheetNames.indexOf(n="Sheet"+a);++a,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||n;for(++a;a<=65535&&-1!=e.SheetNames.indexOf(n=i+a);++a);}if(zE(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function f_(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}var p_={encode_col:eB,encode_row:ZC,encode_cell:nB,encode_range:aB,decode_col:$C,decode_row:JC,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:tB,decode_range:rB,format_cell:oB,sheet_add_aoa:cB,sheet_add_json:u_,sheet_add_dom:NF,aoa_to_sheet:uB,json_to_sheet:function(e,t){return u_(null,e,t)},table_to_sheet:jF,table_to_book:function(e,t){return lB(jF(e,t),t)},sheet_to_csv:l_,sheet_to_txt:c_,sheet_to_json:s_,sheet_to_html:wF,sheet_to_formulae:function(e){var t,n="",r="";if(null==e||null==e["!ref"])return[];var a,s=sB(e["!ref"]),i="",o=[],l=[],c=Array.isArray(e);for(a=s.s.c;a<=s.e.c;++a)o[a]=eB(a);for(var u=s.s.r;u<=s.e.r;++u)for(i=ZC(u),a=s.s.c;a<=s.e.c;++a)if(n=o[a]+i,r="",void 0!==(t=c?(e[u]||[])[a]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;r=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=n+"="+r}return l},sheet_to_row_object_array:s_,sheet_get_cell:d_,book_new:A_,book_append_sheet:h_,book_set_sheet_visibility:function(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:f_,cell_set_internal_link:function(e,t,n){return f_(e,"#"+t,n)},cell_add_comment:function(e,t,n){e.c||(e.c=[]),e.c.push({t:t,a:n||"SheetJS"})},sheet_set_array_formula:function(e,t,n,r){for(var a="string"!=typeof t?t:sB(t),s="string"==typeof t?t:aB(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var l=d_(e,i,o);l.t="n",l.F=s,delete l.v,i==a.s.r&&o==a.s.c&&(l.f=n,r&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};Ew.version;const m_=e=>{if(!e)return"--:--";const t=new Date(e);let n=t.getHours();const r=t.getMinutes().toString().padStart(2,"0"),a=t.getSeconds().toString().padStart(2,"0"),s=n>=12?"PM":"AM";return n=n%12||12,"".concat(n,":").concat(r,":").concat(a," ").concat(s)},g_=e=>{if(!e)return"--/--/----";let t;return t="string"===typeof e?(e.includes("-"),new Date(e)):e,isNaN(t.getTime())?"--/--/----":t.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})},x_=e=>{const t=new Map;e.forEach(e=>{e._id&&t.set(e._id.toString(),e)});const n=new Map;t.forEach(e=>{if(e.attendanceRecordsGroupedByDate&&e.attendanceRecordsGroupedByDate.length>0)e.attendanceRecordsGroupedByDate.forEach(t=>{const r=t.date,a=t.records,s=e._id.toString(),i="".concat(s,"-").concat(r);n.has(i)||n.set(i,{worker:e,date:r,records:[]}),n.get(i).records.push(...a)});else if(e.attendanceRecords&&e.attendanceRecords.length>0){const t=new Map;e.attendanceRecords.forEach(r=>{if(r._id&&t.has(r._id))return;let a;r._id&&t.set(r._id,!0);try{if(!e._id)return void console.warn("Worker missing _id:",e);a=e._id.toString()}catch(o){return void console.error("Error processing worker ID:",e,o)}const s=new Date(r.checkIn).toISOString().split("T")[0],i="".concat(a,"-").concat(s);n.has(i)||n.set(i,{worker:e,date:s,records:[]}),n.get(i).records.push(r)})}});const r=[];return n.forEach(e=>{e.records.sort((e,t)=>new Date(e.checkIn)-new Date(t.checkIn)),r.push(e)}),r},v_=(e,t)=>{const n=new Date(t);n.setDate(n.getDate()-1);const r=n.toISOString().split("T")[0];return new Date(e.checkIn).toISOString().split("T")[0]===r&&e.checkOut&&e.isManualCorrection};const y_=function(){const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(2),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(""),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[v,y]=(0,r.useState)(null),[b,w]=(0,r.useState)(""),N=(0,r.useCallback)(async()=>{try{const e=await Ea.get("/admin/attendance",{withCredentials:!0});console.log("Attendance data received:",e.data),t(e.data),l(!1)}catch(e){u("Failed to fetch today's attendance data."),console.error(e),l(!1)}},[]);if((0,r.useEffect)(()=>{N();const e=setInterval(()=>{N()},2e3);return()=>{clearInterval(e)}},[N]),(0,r.useEffect)(()=>{const t=e.filter(e=>!!(e.attendanceRecordsGroupedByDate&&e.attendanceRecordsGroupedByDate.length>0)||!!(e.attendanceRecords&&e.attendanceRecords.length>0)).filter((e,t,n)=>t===n.findIndex(t=>t._id===e._id)),n=[...x_(t)].sort((e,t)=>{const n=e=>{let t=new Date(0);return e.records.forEach(e=>{e.checkIn&&new Date(e.checkIn)>t&&(t=new Date(e.checkIn)),e.checkOut&&new Date(e.checkOut)>t&&(t=new Date(e.checkOut))}),t},r=n(e);return n(t)-r}),r=(new Date).toISOString().split("T")[0],i=n.filter(e=>e.date===r),o=n.filter(e=>e.date!==r),l=[...new Set(o.map(e=>e.date))].sort((e,t)=>new Date(t)-new Date(e)),c=l.slice(0,s),u=[...i,...o.filter(e=>c.includes(e.date))];a(u)},[e,s]),o)return(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading attendance data..."});if(c)return(0,Fa.jsx)("div",{className:"p-6 text-center text-red-500",children:c});const j=e.filter(e=>!!(e.attendanceRecordsGroupedByDate&&e.attendanceRecordsGroupedByDate.length>0)||!!(e.attendanceRecords&&e.attendanceRecords.length>0)).filter((e,t,n)=>t===n.findIndex(t=>t._id===e._id)),C=[...x_(j)].sort((e,t)=>{const n=e=>{let t=new Date(0);return e.records.forEach(e=>{e.checkIn&&new Date(e.checkIn)>t&&(t=new Date(e.checkIn)),e.checkOut&&new Date(e.checkOut)>t&&(t=new Date(e.checkOut))}),t},r=n(e);return n(t)-r}),B=(new Date).toISOString().split("T")[0],k=(C.filter(e=>e.date===B),C.filter(e=>e.date!==B)),S=[...new Set(k.map(e=>e.date))].sort((e,t)=>new Date(t)-new Date(e)),E=S.length>s;return(0,Fa.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-lg space-y-6",children:[(0,Fa.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[(0,Fa.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Attendance Tracker"}),(0,Fa.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 w-full sm:w-auto",children:[(0,Fa.jsx)("button",{onClick:()=>f(!0),className:"bg-primary text-white font-semibold py-2 px-4 rounded-lg hover:bg-primary-dark transition-colors text-sm sm:text-base",children:"RFID"}),(0,Fa.jsx)("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base",children:"Face Attendance"}),(0,Fa.jsx)("button",{onClick:()=>{const e=[];n.forEach(t=>{const n=[...t.records].sort((e,t)=>new Date(e.checkIn)-new Date(t.checkIn)),r=n.filter(e=>e.checkIn).map(e=>m_(e.checkIn)),a=n.filter(e=>e.checkOut).map(e=>m_(e.checkOut));let s=0;n.forEach(e=>{if(e.checkIn&&e.checkOut){const t=new Date(e.checkIn),n=new Date(e.checkOut);s+=n-t}});const i=Math.floor(s/1e3),o=Math.floor(i/3600).toString().padStart(2,"0"),l=Math.floor(i%3600/60).toString().padStart(2,"0"),c=(i%60).toString().padStart(2,"0"),u="".concat(o,".").concat(l,".").concat(c),d=Math.max(r.length,a.length);for(let A=0;A<d;A++)e.push({"Employee Name":t.worker.name,"RF ID":t.worker.rfid||"N/A",Date:g_(t.date),"Punch In":r[A]||"","Punch Out":a[A]||"","Total Duration":0===A?u:""});0===d&&e.push({"Employee Name":t.worker.name,"RF ID":t.worker.rfid||"N/A",Date:g_(t.date),"Punch In":"","Punch Out":"","Total Duration":u})});const t=p_.json_to_sheet(e),r=p_.book_new();p_.book_append_sheet(r,t,"Attendance Report"),r_(r,"attendance_report.xlsx")},className:"bg-green-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-700 transition-colors text-sm sm:text-base",children:"Download"})]})]}),(0,Fa.jsx)(Ys,{isOpen:h,onClose:()=>f(!1),title:"RFID Attendance",children:(0,Fa.jsx)(ei,{onAttendanceRecorded:e=>{N()}})}),(0,Fa.jsx)(Ys,{isOpen:p,onClose:()=>m(!1),title:"Face Attendance",children:(0,Fa.jsx)(Sw,{onAttendanceRecorded:e=>{N()}})}),(0,Fa.jsx)(Ys,{isOpen:g,onClose:()=>{x(!1),y(null),w("")},title:"Correct Missing Punch Out",children:(0,Fa.jsxs)("div",{className:"p-4",children:[v&&(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsxs)("p",{className:"font-semibold text-sm sm:text-base",children:["Worker: ",v.worker.name]}),(0,Fa.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Missing Punch In: ",m_(v.incompleteRecord.checkIn)]})]}),(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Punch Out Time"}),(0,Fa.jsx)("input",{type:"datetime-local",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",value:b,onChange:e=>w(e.target.value)})]}),(0,Fa.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2",children:[(0,Fa.jsx)("button",{onClick:()=>{x(!1),y(null),w("")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 text-sm",children:"Cancel"}),(0,Fa.jsx)("button",{onClick:async()=>{if(v&&b)try{await Ea.post("/admin/attendance/correct-missing-punch",{workerId:v.worker._id,checkOutTime:b},{withCredentials:!0});alert("Missing punch corrected successfully"),x(!1),w(""),y(null),N()}catch(n){var e,t;console.error("Error correcting missing punch:",n),alert("Failed to correct missing punch: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Server error"))}else alert("Please select a worker and enter a punch out time")},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm",children:"Correct Punch"})]})]})}),(0,Fa.jsx)("div",{className:"relative w-full sm:w-1/3 mb-6",children:(0,Fa.jsx)("input",{type:"text",placeholder:"Search by staff name or ID...",className:"w-full pl-10 pr-4 py-2 border border-medium-gray rounded-lg text-sm",value:d,onChange:e=>A(e.target.value)})}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full bg-white rounded-lg shadow-md",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee Name"}),(0,Fa.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RF ID"}),(0,Fa.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Fa.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Punch In"}),(0,Fa.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Punch Out"}),(0,Fa.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Duration"}),(0,Fa.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((e,t)=>{const n=[...e.records].sort((e,t)=>new Date(e.checkIn)-new Date(t.checkIn)),r=n.filter(e=>e.checkIn).map(t=>{const n=new Date(e.date);return v_(t,n)?{time:m_(t.checkIn),isMissedPunchOut:!0,checkOutTime:m_(t.checkOut)}:{time:m_(t.checkIn),isMissedPunchOut:!1}}),a=n.filter(e=>e.checkOut).map(t=>{const n=new Date(e.date);return v_(t,n)?{time:m_(t.checkOut),isMissedPunchOut:!0}:{time:m_(t.checkOut),isMissedPunchOut:!1}});let s=0;n.forEach(e=>{if(e.checkIn&&e.checkOut){const t=new Date(e.checkIn),n=new Date(e.checkOut);s+=n-t}});const i=Math.floor(s/1e3),o=Math.floor(i/3600).toString().padStart(2,"0"),l=Math.floor(i%3600/60).toString().padStart(2,"0"),c=(i%60).toString().padStart(2,"0"),u="".concat(o,".").concat(l,".").concat(c),d=new Date(e.date),A=((e,t)=>{const n=new Date(t);n.setDate(n.getDate()-1);const r=n.toISOString().split("T")[0];return e.filter(e=>new Date(e.checkIn).toISOString().split("T")[0]===r).find(e=>!e.checkOut)})(e.records,d),h="".concat(e.worker._id,"-").concat(e.date,"-").concat(Math.random().toString(36).substr(2,9));return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm font-medium text-gray-900",children:e.worker.name}),(0,Fa.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:e.worker.rfid||"N/A"}),(0,Fa.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:g_(e.date)}),(0,Fa.jsx)("td",{className:"px-4 sm:px-6 py-4 text-xs sm:text-sm",children:(0,Fa.jsx)("div",{className:"space-y-1",children:r.length>0?r.map((e,t)=>(0,Fa.jsx)("div",{className:"flex items-center",children:e.isMissedPunchOut?(0,Fa.jsxs)("span",{className:"text-xs sm:text-sm text-gray-400 flex items-center",children:[(0,Fa.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Fa.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.time]}):(0,Fa.jsx)("span",{className:"text-xs sm:text-sm text-green-500",children:e.time})},"in-".concat(t))):(0,Fa.jsx)("span",{className:"text-xs sm:text-sm text-green-500",children:"--:--"})})}),(0,Fa.jsx)("td",{className:"px-4 sm:px-6 py-4 text-xs sm:text-sm",children:(0,Fa.jsx)("div",{className:"space-y-1",children:a.length>0?a.map((e,t)=>(0,Fa.jsx)("div",{className:"flex items-center",children:e.isMissedPunchOut?(0,Fa.jsxs)("span",{className:"text-xs sm:text-sm text-gray-400 flex items-center",children:[(0,Fa.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Fa.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.time]}):(0,Fa.jsx)("span",{className:"text-xs sm:text-sm text-red-500",children:e.time})},"out-".concat(t))):(0,Fa.jsx)("span",{className:"text-xs sm:text-sm text-red-500",children:"--:--"})})}),(0,Fa.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:u}),(0,Fa.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:A&&(0,Fa.jsx)("button",{onClick:()=>{y({worker:e.worker,incompleteRecord:A}),x(!0)},className:"px-2 sm:px-3 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600 text-xs",children:"Correct Missing Punch"})})]},h)})})]})}),E&&(0,Fa.jsx)("div",{className:"flex justify-center mt-4",children:(0,Fa.jsx)("button",{onClick:()=>{i(e=>e+2)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Load More"})})]})},b_=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)({}),[p,m]=(0,r.useState)([]),[g,x]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),[N,j]=(0,r.useState)(""),[C,B]=(0,r.useState)((new Date).getMonth()+1),[k,S]=(0,r.useState)((new Date).getFullYear()),[E,F]=(0,r.useState)(!1),[_,I]=(0,r.useState)(null),[T,D]=(0,r.useState)((new Date).getMonth()+1),[L,U]=(0,r.useState)((new Date).getFullYear()),[P,R]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{i(!0),l("");try{const e=await Ea.get("/admin/workers");console.log("Workers data:",e.data);const n=await Ea.get("/admin/settings/batches");console.log("Batches data:",n.data);const r=await Ea.get("/admin/holidays");console.log("Holidays data:",r.data);const s={};n.data.forEach(e=>{s[e.id]=e.name||"Batch ".concat(e.id)}),f(s),m(r.data),t(e.data),a(e.data)}catch(e){l("Failed to fetch data"),console.error(e)}finally{i(!1)}})()},[]),(0,r.useEffect)(()=>{if(!d)return void a(e);const t=e.filter(e=>{var t,n,r,a,s;const i=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())||"",o=(null===(n=e.rfid)||void 0===n?void 0:n.toLowerCase())||"",l=(null===(r=e.department)||void 0===r||null===(a=r.name)||void 0===a?void 0:a.toLowerCase())||"",c=(null===(s=O(e))||void 0===s?void 0:s.toLowerCase())||"";return i.includes(d.toLowerCase())||o.includes(d.toLowerCase())||l.includes(d.toLowerCase())||c.includes(d.toLowerCase())});a(t)},[d,e,h]);const O=e=>e.workingHours&&e.workingHours.from&&e.workingHours.to?"".concat(e.workingHours.from," - ").concat(e.workingHours.to):"N/A",M=async()=>{if(!N||isNaN(N)||parseFloat(N)<=0)l("Please enter a valid incentive amount");else try{await Ea.post("/admin/incentives",{workerId:b._id,amount:parseFloat(N),month:C,year:k});u("Incentive of \u20b9".concat(N," added for ").concat(b.name)),y(!1);const e=await Ea.get("/admin/workers");t(e.data),a(e.data),setTimeout(()=>u(""),3e3)}catch(r){var e,n;l("Failed to add incentive: "+((null===(e=r.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||r.message)),console.error("Incentive error:",r)}},Q=async()=>{if(_){R(!0),l("");try{var e;new Date(L,T-1,1);const t=new Date(L,T,0).getDate(),n=[];let r=0,a=0,s=0,i=0,o=0,l=0,c=0;for(let e=1;e<=t;e++){const t=new Date(L,T-1,e),u=0===t.getDay(),d=Math.random()>.95;let A="Present";if(u?A="Sunday":d?A="Holiday":Math.random()>.8&&(A="Absent"),"Present"===A){r++;const e=new Date(t);e.setHours(9,30,0,0);const a=new Date(t);a.setHours(18,30,0,0),e.setMinutes(e.getMinutes()+Math.floor(20*Math.random())),a.setMinutes(a.getMinutes()-Math.floor(20*Math.random()));const s=new Date(t);s.setHours(9,0,0,0);const i=Math.max(0,(e-s)/6e4),u=.6173*i,d=(a-e)/36e5;n.push({date:t.getDate(),status:A,inTime:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),outTime:a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),delayTime:i>0?"".concat(Math.round(i)," mins"):"-",delayDeduction:u>0?"\u20b9".concat(u.toFixed(2)):"\u20b90.00"}),o+=d,l+=0,c+=u}else"Absent"===A?(a++,n.push({date:t.getDate(),status:A,inTime:"Absent",outTime:"Absent",delayTime:"-",delayDeduction:"\u20b9333.33"}),c+=333.33):"Holiday"===A?(s++,n.push({date:t.getDate(),status:A,inTime:"-",outTime:"-",delayTime:"-",delayDeduction:"\u20b90.00"})):"Sunday"===A&&(i++,n.push({date:t.getDate(),status:A,inTime:"-",outTime:"-",delayTime:"-",delayDeduction:"\u20b90.00"}))}const u=parseFloat(_.salary)||0,d=t,A=r,h=25,f=u/h,p=f/480,m=a*(u/h),g=l*p,v=c+m+g,y=u-v,b=n.map(e=>{let t=0;if("Present"===e.status){const n=parseFloat(e.delayDeduction.replace("\u20b9",""))||0;t=f-n}else"Absent"===e.status?t=0:"Holiday"!==e.status&&"Sunday"!==e.status||(t=f);return(0,ye.A)((0,ye.A)({},e),{},{totalSalaryForDay:"\u20b9".concat(t.toFixed(2))})});x({worker:_,month:T,year:L,summary:{employeeId:(null===(e=_.user)||void 0===e?void 0:e.username)||"N/A",originalSalary:"\u20b9".concat(u.toFixed(2)),actualEarnedSalary:"\u20b9".concat(y.toFixed(2)),totalFinalSalary:"\u20b9".concat(y.toFixed(2)),totalDaysInPeriod:d,totalWorkingDays:r,totalAbsentDays:a,totalHolidays:s,totalSundays:i,actualWorkingDays:A,totalWorkingHours:o.toFixed(2),totalPermissionTime:l.toFixed(2),absentDeduction:"\u20b9".concat(m.toFixed(2)),permissionDeduction:"\u20b9".concat(g.toFixed(2)),totalDeductions:"\u20b9".concat(v.toFixed(2)),attendanceRate:"".concat((r/d*100).toFixed(2),"%"),perMinuteSalary:"\u20b9".concat(p.toFixed(4))},dailyData:b})}catch(t){l("Failed to generate salary report"),console.error("Salary report error:",t)}finally{R(!1)}}},H=e=>(parseFloat(e.salary)||0)+(e.currentMonthIncentives||0),z=()=>v?(0,Fe.createPortal)((0,Fa.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Fa.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:(0,Fa.jsxs)("div",{className:"p-6",children:[(0,Fa.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Incentive"}),b&&(0,Fa.jsx)("div",{className:"mb-4",children:(0,Fa.jsxs)("p",{className:"text-gray-700",children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Worker:"})," ",b.name]})}),(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Month"}),(0,Fa.jsx)("select",{value:C,onChange:e=>B(parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(e=>{return(0,Fa.jsx)("option",{value:e,children:(t=e,["January","February","March","April","May","June","July","August","September","October","November","December"][t-1]||"")},e);var t})})]}),(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Year"}),(0,Fa.jsx)("input",{type:"number",value:k,onChange:e=>S(parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"2020",max:"2030"})]}),(0,Fa.jsxs)("div",{className:"mb-6",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Incentive Amount (\u20b9)"}),(0,Fa.jsx)("input",{type:"number",value:N,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter incentive amount",min:"0",step:"0.01",autoFocus:!0})]}),(0,Fa.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Fa.jsx)("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none",children:"Cancel"}),(0,Fa.jsx)("button",{type:"button",onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none",children:"Add Incentive"})]})]})})}),document.body):null,W=()=>E?(0,Fe.createPortal)((0,Fa.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Fa.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-screen overflow-y-auto",children:(0,Fa.jsxs)("div",{className:"p-6",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Salary Report"}),(0,Fa.jsx)("button",{onClick:()=>F(!1),className:"text-gray-500 hover:text-gray-700",children:(0,Fa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),P&&(0,Fa.jsxs)("div",{className:"text-center py-4",children:[(0,Fa.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,Fa.jsx)("p",{className:"mt-2 text-gray-600",children:"Generating report..."})]}),g&&(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,Fa.jsx)("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Summary"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Employee ID"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.employeeId})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Original Salary"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.originalSalary})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Actual Earned Salary"}),(0,Fa.jsx)("p",{className:"font-medium text-green-600",children:g.summary.actualEarnedSalary})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Total Final Salary"}),(0,Fa.jsx)("p",{className:"font-medium text-blue-600",children:g.summary.totalFinalSalary})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mt-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Total Days"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.totalDaysInPeriod})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Working Days"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.totalWorkingDays})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Absent Days"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.totalAbsentDays})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Holidays"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.totalHolidays})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Sundays"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.totalSundays})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Actual Working Days"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.actualWorkingDays})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Working Hours"}),(0,Fa.jsxs)("p",{className:"font-medium",children:[g.summary.totalWorkingHours," hrs"]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Permission Time"}),(0,Fa.jsxs)("p",{className:"font-medium",children:[g.summary.totalPermissionTime," mins"]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Attendance Rate"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.attendanceRate})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Absent Deduction"}),(0,Fa.jsx)("p",{className:"font-medium text-red-600",children:g.summary.absentDeduction})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Permission Deduction"}),(0,Fa.jsx)("p",{className:"font-medium text-red-600",children:g.summary.permissionDeduction})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Total Deductions"}),(0,Fa.jsx)("p",{className:"font-medium text-red-600",children:g.summary.totalDeductions})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Per Minute Salary"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.perMinuteSalary})]})]})]}),(0,Fa.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,Fa.jsx)("h4",{className:"text-md font-semibold text-gray-800 p-4 bg-gray-50",children:"Daily Breakdown"}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"In Time"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Out Time"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Delay Time"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Delay Deduction"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Salary for Day"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.dailyData.map((e,t)=>(0,Fa.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,Fa.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-900",children:[e.date," ",new Date(g.year,g.month-1,e.date).toLocaleDateString("en-US",{month:"long"})]}),(0,Fa.jsx)("td",{className:"px-4 py-3 text-sm ".concat("Present"===e.status?"text-green-600":"Absent"===e.status?"text-red-600":"text-blue-600"),children:e.status}),(0,Fa.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.inTime}),(0,Fa.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.outTime}),(0,Fa.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.delayTime}),(0,Fa.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.delayDeduction}),(0,Fa.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.totalSalaryForDay})]},t))})]})})]})]}),!P&&!g&&(0,Fa.jsx)("div",{className:"text-center py-4 text-gray-500",children:(0,Fa.jsx)("p",{children:"Select a worker and generate a report to view details."})})]})})}),document.body):null;return(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Fa.jsx)("h3",{className:"text-2xl font-semibold text-gray-800",children:"Salary Report"})}),c&&(0,Fa.jsx)("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg",children:c}),o&&(0,Fa.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:o}),(0,Fa.jsx)("div",{className:"mb-6",children:(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsx)("input",{type:"text",placeholder:"Search workers by name, employee ID, department, or batch...",value:d,onChange:e=>A(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,Fa.jsx)("svg",{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Fa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),s&&(0,Fa.jsxs)("div",{className:"text-center py-4",children:[(0,Fa.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,Fa.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading workers..."})]}),!s&&n.length>0&&(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{className:"bg-gray-100",children:[(0,Fa.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Name"}),(0,Fa.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Salary"}),(0,Fa.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Salary (This Month)"}),(0,Fa.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Batch Name"}),(0,Fa.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Employee ID"}),(0,Fa.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Department"}),(0,Fa.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:n.map((e,t)=>{var n;return(0,Fa.jsxs)("tr",{className:t%2===0?"bg-gray-50":"",children:[(0,Fa.jsx)("td",{className:"py-3 px-4 border-b",children:e.name}),(0,Fa.jsxs)("td",{className:"py-3 px-4 border-b",children:["\u20b9",e.salary||0]}),(0,Fa.jsxs)("td",{className:"py-3 px-4 border-b",children:["\u20b9",H(e)]}),(0,Fa.jsx)("td",{className:"py-3 px-4 border-b",children:O(e)}),(0,Fa.jsx)("td",{className:"py-3 px-4 border-b",children:e.rfid||"N/A"}),(0,Fa.jsx)("td",{className:"py-3 px-4 border-b",children:(null===(n=e.department)||void 0===n?void 0:n.name)||"N/A"}),(0,Fa.jsx)("td",{className:"py-3 px-4 border-b",children:(0,Fa.jsxs)("div",{className:"flex space-x-2",children:[(0,Fa.jsxs)("button",{onClick:()=>(e=>{w(e),j(""),B((new Date).getMonth()+1),S((new Date).getFullYear()),y(!0)})(e),className:"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none text-sm flex items-center",title:"Add Incentive",children:[(0,Fa.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Fa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Incentive"]}),(0,Fa.jsxs)("button",{onClick:()=>(e=>{I(e),D((new Date).getMonth()+1),U((new Date).getFullYear()),x(null),F(!0),Promise.resolve().then(()=>{Q()})})(e),className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none text-sm flex items-center",title:"Generate Report",children:[(0,Fa.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Fa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Report"]})]})})]},e._id)})})]})}),!s&&0===n.length&&!o&&(0,Fa.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,Fa.jsx)("p",{children:"No workers found."})}),!s&&e.length>0&&0===n.length&&d&&(0,Fa.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,Fa.jsx)("p",{children:"No workers match your search criteria."})}),(0,Fa.jsx)(z,{}),(0,Fa.jsx)(W,{})]})},w_=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!1),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(!0),[g,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{v()},[]);const v=async()=>{a(!0),i("");try{const e=await Ea.get("/admin/holidays");t(e.data)}catch(e){i("Failed to fetch holidays"),console.error(e)}finally{a(!1)}};return(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Fa.jsx)("h3",{className:"text-2xl font-semibold text-gray-800",children:"Holiday Management"})}),o&&(0,Fa.jsx)("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg",children:o}),s&&(0,Fa.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:s}),(0,Fa.jsxs)("div",{className:"mb-8 p-4 border rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h4",{className:"text-lg font-medium text-gray-800 mb-4",children:g?"Edit Holiday":"Add New Holiday"}),(0,Fa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i(""),l(""),c&&d)try{const e={name:c,date:d,description:h,isPaid:p};g?(await Ea.put("/admin/holidays/".concat(g),e),l("Holiday updated successfully")):(await Ea.post("/admin/holidays",e),l("Holiday created successfully")),u(""),A(""),f(""),m(!0),x(null),v()}catch(r){var t,n;i((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to save holiday"),console.error(r)}else i("Name and date are required")},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Holiday Name *"}),(0,Fa.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter holiday name",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Date *"}),(0,Fa.jsx)("input",{type:"date",value:d,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Fa.jsxs)("div",{className:"md:col-span-2",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),(0,Fa.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter holiday description (optional)",rows:"3"})]}),(0,Fa.jsx)("div",{children:(0,Fa.jsxs)("label",{className:"flex items-center",children:[(0,Fa.jsx)("input",{type:"checkbox",checked:p,onChange:e=>m(e.target.checked),className:"rounded text-blue-600 focus:ring-blue-500"}),(0,Fa.jsx)("span",{className:"ml-2 text-gray-700",children:"Paid Holiday"})]})}),(0,Fa.jsxs)("div",{className:"flex space-x-3 md:col-span-2",children:[(0,Fa.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none",children:g?"Update Holiday":"Add Holiday"}),g&&(0,Fa.jsx)("button",{type:"button",onClick:()=>{u(""),A(""),f(""),m(!0),x(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none",children:"Cancel"})]})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h4",{className:"text-lg font-medium text-gray-800 mb-4",children:"Existing Holidays"}),n&&(0,Fa.jsxs)("div",{className:"text-center py-4",children:[(0,Fa.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,Fa.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading holidays..."})]}),!n&&e.length>0&&(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{className:"bg-gray-100",children:[(0,Fa.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Name"}),(0,Fa.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Date"}),(0,Fa.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Description"}),(0,Fa.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Paid"}),(0,Fa.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:e.map((e,t)=>{return(0,Fa.jsxs)("tr",{className:t%2===0?"bg-gray-50":"",children:[(0,Fa.jsx)("td",{className:"py-2 px-4 border-b",children:e.name}),(0,Fa.jsx)("td",{className:"py-2 px-4 border-b",children:(n=e.date,new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}))}),(0,Fa.jsx)("td",{className:"py-2 px-4 border-b",children:e.description||"-"}),(0,Fa.jsx)("td",{className:"py-2 px-4 border-b",children:(0,Fa.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(e.isPaid?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isPaid?"Yes":"No"})}),(0,Fa.jsx)("td",{className:"py-2 px-4 border-b",children:(0,Fa.jsxs)("div",{className:"flex space-x-2",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{u(e.name),A(new Date(e.date).toISOString().split("T")[0]),f(e.description||""),m(e.isPaid),x(e._id)})(e),className:"px-3 py-1 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 focus:outline-none text-sm",children:"Edit"}),(0,Fa.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this holiday?"))try{await Ea.delete("/admin/holidays/".concat(e)),l("Holiday deleted successfully"),v()}catch(t){i("Failed to delete holiday"),console.error(t)}})(e._id),className:"px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none text-sm",children:"Delete"})]})})]},e._id);var n})})]})}),!n&&0===e.length&&(0,Fa.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,Fa.jsx)("p",{children:"No holidays found. Add a new holiday to get started."})})]})]})},N_=()=>{const e=J(),[t,n]=(0,r.useState)([]),[a,s]=(0,r.useState)(""),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[A,h]=(0,r.useState)({type:"",text:""}),[f,p]=(0,r.useState)(null),[m,g]=(0,r.useState)(!1),[x,v]=(0,r.useState)(""),[y,b]=(0,r.useState)({type:"info",text:"Ready to mark attendance..."}),[w,N]=(0,r.useState)(!1),[j,C]=(0,r.useState)(!1),[B,k]=(0,r.useState)(!0),S=(0,r.useRef)(null),E=new URLSearchParams(e.search),F=!!E.get("workerId")&&"true"===E.get("update"),_=E.get("workerId");(0,r.useEffect)(()=>{(async()=>{try{console.log("Initializing face recognition service..."),await kw.initialize(),console.log("Face recognition service initialized successfully");const e=await Ea.get("/admin/attendance/face-status");console.log("Service status response:",e.data),console.log("Service ready status:",e.data.serviceReady),p(e.data),e.data.serviceReady?(console.log("Service IS ready - showing success message"),h({type:"success",text:"Face recognition service is ready!"})):(console.log("Service is NOT ready - showing error message"),h({type:"error",text:"Face recognition service is not available. Please use RFID attendance instead."}));const t=await Ea.get("/admin/workers");if(F&&_){n(t.data);const e=t.data.find(e=>e._id===_);e&&(s(_),h({type:"info",text:"Updating face enrollment for ".concat(e.name,". Please upload or capture new images.")}))}else{const e=t.data.filter(e=>!e.faceImages||0===e.faceImages.length);n(e)}}catch(e){console.error("Error fetching data:",e),h({type:"error",text:"Failed to initialize: ".concat(e.message)})}})()},[e.search,F,_]);const I=(0,r.useCallback)(async()=>{if(w||!S.current||!j||"success"===y.type)return;if(f&&!f.serviceReady)return void b({type:"error",text:"Face recognition service is not available."});const e=S.current.getScreenshot();if(e){N(!0),b({type:"info",text:"Recognizing face..."});try{await kw.initialize();const t=await kw.loadImageFromDataURL(e),n=await kw.recognizeFace(t);if(n.success){const e=await Ea.post("/admin/attendance/recognize-face",{faceDescriptor:Array.from(n.descriptor||[]),workerId:n.workerId,confidence:n.confidence});b({type:"success",text:e.data.message}),k(!1)}else b({type:"error",text:"Face not recognized. Please enroll first or try again."})}catch(r){var t,n;console.error("Face recognition error:",r);let e="Face recognition failed.";r.message.includes("No face detected")?e="No face detected. Please position your face clearly in the camera.":r.message.includes("not recognized")?e="Face not recognized. Please enroll first or try again.":null!==(t=r.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.message&&(e=r.response.data.message),b({type:"error",text:e}),setTimeout(()=>{N(!1),"success"!==y.type&&b({type:"info",text:"Ready to scan again..."})},3e3)}}},[w,j,y.type,f]);(0,r.useEffect)(()=>{if(m&&j&&"success"!==y.type&&B){const e=setInterval(()=>{I()},3e3);return()=>clearInterval(e)}},[m,j,y.type,I,B]);const T=()=>{let e=(0,Fa.jsx)(It,{className:"animate-spin text-4xl text-gray-500"}),t="border-gray-400";return j&&(w?(e=(0,Fa.jsx)(It,{className:"animate-spin text-4xl text-blue-500"}),t="border-blue-500"):"success"===y.type?(e=(0,Fa.jsx)(mt,{className:"text-4xl text-green-500"}),t="border-green-500"):"error"===y.type?(e=(0,Fa.jsx)(Xt,{className:"text-4xl text-red-500"}),t="border-red-500"):(e=(0,Fa.jsx)(ct,{className:"text-4xl text-gray-500"}),t="border-gray-400")),{icon:e,color:t}};return(0,Fa.jsx)("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-lg",children:m?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Fa.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:["Mark Attendance - ",x]}),(0,Fa.jsxs)("button",{onClick:()=>{F?window.close():(g(!1),v(""),c(!1),C(!1),b({type:"info",text:"Ready to mark attendance..."}),N(!1),k(!0),h({type:"",text:""}))},className:"flex items-center px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:[(0,Fa.jsx)(st,{className:"mr-2"})," ",F?"Back to Workers":"Back to Enrollment"]})]}),(0,Fa.jsx)("p",{className:"text-center text-gray-600 mb-6",children:F?"Face enrollment updated successfully! Now position your face in the camera frame to mark your attendance.":"Enrollment successful! Now position your face in the camera frame to mark your attendance."}),(0,Fa.jsxs)("div",{className:"relative w-full aspect-square bg-gray-900 rounded-lg overflow-hidden border-4 ".concat(T().color," transition-colors duration-500 mb-6"),children:[(0,Fa.jsx)(Ks(),{audio:!1,ref:S,screenshotFormat:"image/jpeg",videoConstraints:{facingMode:"user",width:720,height:720},onUserMedia:()=>{C(!0),b({type:"info",text:"Ready to scan for attendance"})},className:"absolute top-0 left-0 w-full h-full object-cover"}),(0,Fa.jsx)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center pointer-events-none",children:(0,Fa.jsx)("div",{className:"w-3/4 h-3/4 border-4 border-dashed border-white rounded-full opacity-30"})})]}),(0,Fa.jsxs)("div",{className:"text-center p-4 rounded-lg bg-gray-50",children:[(0,Fa.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[T().icon,(0,Fa.jsx)("span",{className:"text-lg font-medium text-gray-700",children:y.text})]}),(0,Fa.jsx)("button",{onClick:I,disabled:w||!j||"success"===y.type,className:"w-full py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300",children:w?"Processing...":"Mark Attendance Now"}),(0,Fa.jsx)("div",{className:"mt-4 flex items-center justify-center space-x-4",children:(0,Fa.jsxs)("label",{className:"flex items-center",children:[(0,Fa.jsx)("input",{type:"checkbox",checked:B,onChange:e=>k(e.target.checked),className:"mr-2",disabled:"success"===y.type}),(0,Fa.jsx)("span",{className:"text-sm text-gray-600",children:"Auto-scan enabled"})]})})]})]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Face Enrollment"}),f&&(0,Fa.jsxs)("div",{className:"mb-4 p-3 rounded-lg ".concat(f.serviceReady?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:[(0,Fa.jsx)("div",{className:"text-sm font-medium",children:f.serviceReady?"\u2705 React Face Recognition: Ready (High Accuracy)":"\u26a0\ufe0f Face Recognition Service: Unavailable"}),f.currentMode&&(0,Fa.jsxs)("div",{className:"text-xs mt-1",children:[(0,Fa.jsx)("strong",{children:"Current Mode:"})," ",f.currentMode]}),f.features&&f.serviceReady&&(0,Fa.jsxs)("div",{className:"text-xs mt-1 space-y-1",children:[(0,Fa.jsx)("div",{children:(0,Fa.jsx)("strong",{children:"Features:"})}),(0,Fa.jsxs)("ul",{className:"text-xs text-green-700 ml-4 space-y-1",children:[(0,Fa.jsx)("li",{children:"\u2022 Real-time face detection and recognition"}),(0,Fa.jsx)("li",{children:"\u2022 High accuracy with neural networks"}),(0,Fa.jsx)("li",{children:"\u2022 Works entirely in the browser"}),(0,Fa.jsx)("li",{children:"\u2022 No server dependencies required"})]})]})]}),A.text&&(0,Fa.jsx)("div",{className:"p-4 mb-4 rounded-lg ".concat("success"===A.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:A.text}),(0,Fa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==f&&void 0!==f&&f.serviceReady)if(a&&0!==i.length){d(!0),h({type:"",text:""});try{await kw.initialize();const e=[];for(const t of i)try{const n=await kw.loadImageFromDataURL(t.preview),r=await kw.detectFaceFromImage(n);r&&r.descriptor&&e.push(Array.from(r.descriptor))}catch(u){console.warn("Failed to detect face in one image:",u)}if(0===e.length)return h({type:"error",text:"No faces detected in the uploaded images. Please ensure faces are clearly visible."}),void d(!1);await kw.enrollFace(a,e.map(e=>new Float32Array(e)));const r=new FormData;r.append("workerId",a),r.append("faceDescriptors",JSON.stringify(e)),console.log("Sending enrollment data:",{workerId:a,faceDescriptorsCount:e.length,faceDescriptorsStringified:JSON.stringify(e),imageFilesCount:i.length}),i.forEach(e=>{r.append("faces",e.file)}),await Ea.post("/admin/attendance/enroll-face",r);const l=t.find(e=>e._id===a);v((null===l||void 0===l?void 0:l.name)||"Worker");const A="".concat(null===l||void 0===l?void 0:l.name,F?" face enrollment updated successfully! Now mark attendance by looking at the camera.":" enrolled successfully! Now mark attendance by looking at the camera.");if(h({type:"success",text:A}),g(!0),c(!0),b({type:"info",text:"Position your face in the camera to mark attendance..."}),s(""),o([]),!F){const e=(await Ea.get("/admin/workers")).data.filter(e=>!e.faceImages||0===e.faceImages.length);n(e)}}catch(A){var r,l;console.error("Error enrolling face:",A);const e=(null===(r=A.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.message)||A.message||"An error occurred during enrollment.";h({type:"error",text:e})}finally{d(!1)}}else h({type:"error",text:"Please select a worker and provide at least one image."});else h({type:"error",text:"Face recognition service is not available."})},className:"space-y-6",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"worker",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Worker"}),(0,Fa.jsxs)("select",{id:"worker",value:a,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",disabled:u||F&&_,children:[(0,Fa.jsx)("option",{value:"",children:"-- Select a Worker --"}),t.map(e=>(0,Fa.jsxs)("option",{value:e._id,children:[e.name," (",e.username,")"]},e._id))]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Fa.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[l?(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)(Ks(),{audio:!1,ref:S,screenshotFormat:"image/jpeg",className:"w-full rounded-md"}),(0,Fa.jsxs)("button",{type:"button",onClick:()=>{if(S.current&&i.length<5){const e=S.current.getScreenshot();if(e){const t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),a=new Uint8Array(r);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);const s=new Blob([r],{type:n}),i=new File([s],"capture-".concat(Date.now(),".jpeg"),{type:n});o(t=>[...t,{file:i,preview:e}])}}else h({type:"error",text:"You can only add up to 5 images."})},disabled:u||i.length>=5,className:"mt-4 w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[(0,Fa.jsx)(ct,{className:"mr-2"})," Capture Image"]})]}):(0,Fa.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,Fa.jsx)(Jt,{className:"text-4xl text-gray-400 mb-2"}),(0,Fa.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer text-sm font-medium text-red-600 hover:text-red-500",children:"Upload up to 5 images"}),(0,Fa.jsx)("input",{id:"file-upload",type:"file",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files){const t=Array.from(e.target.files).slice(0,5-i.length).map(e=>({file:e,preview:URL.createObjectURL(e)}));o(e=>[...e,...t])}},className:"sr-only",disabled:u||i.length>=5}),(0,Fa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"or"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>c(!0),className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-500",children:"Use Camera"})]}),l&&(0,Fa.jsx)("button",{type:"button",onClick:()=>c(!1),className:"mt-2 text-sm text-gray-600 hover:text-gray-800",children:"Close Camera"})]}),(0,Fa.jsxs)("div",{className:"space-y-2",children:[(0,Fa.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["Image Previews (",i.length,"/5)"]}),i.length>0?(0,Fa.jsx)("div",{className:"grid grid-cols-3 gap-2",children:i.map((e,t)=>(0,Fa.jsxs)("div",{className:"relative group",children:[(0,Fa.jsx)("img",{src:e.preview,alt:"preview ".concat(t),className:"w-full h-24 object-cover rounded-md"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>(e=>{o(i.filter((t,n)=>n!==e))})(t),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2715"})]},t))}):(0,Fa.jsx)("div",{className:"flex items-center justify-center h-full bg-gray-50 rounded-lg",children:(0,Fa.jsx)("p",{className:"text-sm text-gray-500",children:"No images selected"})})]})]}),(0,Fa.jsx)("div",{children:(0,Fa.jsx)("button",{type:"submit",disabled:u||!a||0===i.length||!(null!==f&&void 0!==f&&f.serviceReady),className:"w-full flex justify-center items-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-300",children:u?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Fa.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fa.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enrolling..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)($t,{className:"mr-2"})," Enroll Worker"]})})})]})]})})};const j_=function(e){let{baseUrl:t="/admin"}=e;const n="".concat(t,"/departments"),[a,s]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)("");return(0,Fa.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800",children:"Create New Department"}),(0,Fa.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(""),c("");try{await Ea.post(n,JSON.stringify({name:a}),{headers:{"Content-Type":"application/json"},withCredentials:!0}),o('Department "'.concat(a,'" created successfully!')),s("")}catch(t){null!==t&&void 0!==t&&t.response?c("Failed to create department. Please check the form data."):c("No Server Response"),console.error(t)}},className:"space-y-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"departmentName",children:"Department Name"}),(0,Fa.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"departmentName",value:a,onChange:e=>s(e.target.value),required:!0})]}),(0,Fa.jsx)("button",{type:"submit",className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Add Department"})]}),i&&(0,Fa.jsx)("p",{className:"mt-4 text-green-500",children:i}),l&&(0,Fa.jsx)("p",{className:"mt-4 text-red-500",children:l})]})};const C_=function(e){let{baseUrl:t="/admin"}=e;const n="".concat(t,"/departments"),a="".concat(t,"/shops"),[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)("admin"),[d,A]=(0,r.useState)(!0),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(null),[g,x]=(0,r.useState)(""),[v,y]=(0,r.useState)(null),[b,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{"/admin"===t&&(async()=>{try{const e=await Ea.get(a,{headers:{"Content-Type":"application/json"},withCredentials:!0});l(e.data)}catch(e){console.error("Failed to fetch shops:",e)}})(),(async()=>{try{let e={};"admin"===c?e={showAdmin:!0}:c&&(e={shopId:c});const t=await Ea.get(n,{params:e,headers:{"Content-Type":"application/json"},withCredentials:!0});i(t.data)}catch(e){f("Failed to fetch departments."),console.error(e)}finally{A(!1)}})()},[t,c]);const N=async e=>{try{const t=await Ea.put("".concat(n,"/").concat(e),{name:g},{headers:{"Content-Type":"application/json"},withCredentials:!0});i(s.map(n=>n._id===e?t.data:n)),j()}catch(t){f("Failed to update department."),console.error(t)}},j=()=>{m(null),x(""),w(!1)};return d?(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading departments..."}):h?(0,Fa.jsx)("div",{className:"p-6 text-center text-red-500",children:h}):(0,Fa.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800",children:"Existing Departments"}),"/admin"===t&&(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Filter by Shop"}),(0,Fa.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Fa.jsx)("option",{value:"admin",children:"Admin Departments Only"}),o.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),0===s.length?(0,Fa.jsx)("p",{children:"No departments found. Please create one."}):(0,Fa.jsx)("ul",{className:"divide-y divide-gray-200",children:s.map(e=>(0,Fa.jsxs)("li",{className:"py-4 flex justify-between items-center",children:[p===e._id?(0,Fa.jsx)("input",{type:"text",value:g,onChange:e=>x(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}):(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{onClick:()=>y(v===e._id?null:e._id),className:"cursor-pointer",children:[(0,Fa.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,Fa.jsxs)("p",{className:"text-sm text-gray-500",children:["Workers: ",e.workers.length]})]}),v===e._id&&(0,Fa.jsx)("div",{className:"mt-2 pl-4",children:e.workers.length>0?(0,Fa.jsx)("ul",{className:"list-disc list-inside",children:e.workers.map(e=>(0,Fa.jsx)("li",{className:"text-sm text-gray-600",children:e.name},e._id))}):(0,Fa.jsx)("p",{className:"text-sm text-gray-500",children:"No workers in this department."})})]}),(0,Fa.jsxs)("div",{className:"w-full flex justify-end items-center space-x-4 sm:w-auto sm:space-x-2",children:[p===e._id?(0,Fa.jsx)("button",{onClick:()=>N(e._id),className:"text-green-600 hover:text-green-900",children:"Save"}):(0,Fa.jsx)("button",{onClick:()=>{return m((t=e)._id),x(t.name),void w(!0);var t},className:"text-blue-600 hover:text-blue-900",children:"Edit"}),(0,Fa.jsx)("button",{onClick:()=>(async e=>{try{await Ea.delete("".concat(n,"/").concat(e),{withCredentials:!0}),i(s.filter(t=>t._id!==e))}catch(t){f("Failed to delete department."),console.error(t)}})(e._id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e._id))}),b&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",children:(0,Fa.jsxs)("div",{className:"relative m-4 p-4 sm:p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:[(0,Fa.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:"Edit Department Name"}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,Fa.jsx)("input",{type:"text",value:g,onChange:e=>x(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,Fa.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Fa.jsx)("button",{onClick:j,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Fa.jsx)("button",{onClick:()=>N(p),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update"})]})]})})]})};const B_=function(e){let{baseUrl:t="/admin"}=e;const n="".concat(t,"/categories"),[a,s]=("".concat(t,"/shops"),(0,r.useState)("")),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[A,h]=(0,r.useState)(!0),f=async()=>{try{const e={showAdmin:!0},t=await Ea.get(n,{params:e,withCredentials:!0});o(t.data)}catch(e){d("Failed to fetch categories."),console.error(e)}finally{h(!1)}};return(0,r.useEffect)(()=>{f()},[n]),A?(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading categories..."}):(0,Fa.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800"}),(0,Fa.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(""),d("");try{const e={name:a,shop:null};await Ea.post(n,JSON.stringify(e),{headers:{"Content-Type":"application/json"},withCredentials:!0}),c('Category "'.concat(a,'" created successfully!')),s(""),f()}catch(t){d("Failed to create category. Please check the form data."),console.error(t)}},className:"space-y-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"categoryName",children:"Category Name"}),(0,Fa.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"categoryName",value:a,onChange:e=>s(e.target.value),required:!0})]}),(0,Fa.jsx)("button",{type:"submit",className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Create Category"})]}),l&&(0,Fa.jsx)("p",{className:"mt-4 text-green-500",children:l}),u&&(0,Fa.jsx)("p",{className:"mt-4 text-red-500",children:u}),(0,Fa.jsxs)("div",{className:"mt-8",children:[(0,Fa.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800"}),0===i.length?(0,Fa.jsx)("p",{children:"No categories found."}):(0,Fa.jsx)("ul",{className:"divide-y divide-gray-200",children:i.map(e=>(0,Fa.jsxs)("li",{className:"flex flex-col items-start gap-3 py-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,Fa.jsxs)("p",{className:"font-medium text-gray-900",children:[e.name," ",(0,Fa.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.products.length," products)"]})]}),(0,Fa.jsx)("div",{className:"w-full flex justify-end sm:w-auto",children:(0,Fa.jsx)("button",{onClick:()=>(async e=>{try{await Ea.delete("".concat(n,"/").concat(e),{withCredentials:!0}),c("Category deleted successfully!"),f()}catch(t){d("Failed to delete category."),console.error(t)}})(e._id),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-3 rounded text-sm",children:"Delete"})})]},e._id))})]})]})},k_=(0,r.createContext)(),S_=()=>{const e=(0,r.useContext)(k_);if(!e)throw new Error("useUnits must be used within a UnitProvider");return e},E_=e=>{let{children:t}=e;const[n,a]=(0,r.useState)([]),[s]=(0,r.useState)(["piece","kg","gram","box"]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(""),{authState:u}=(0,r.useContext)(_a),d=()=>"shop"===u.role?"/shop":"/admin",A=(0,r.useCallback)(async()=>{if(!u.token||!u.role)return console.log("No authenticated user, using default units"),a(s),void o(!1);try{o(!0);const e=d(),t=await Ea.get("".concat(e,"/products/units"),{withCredentials:!0}),n=[...new Set([...s,...t.data])];a(n)}catch(n){var e,t;401===(null===(e=n.response)||void 0===e?void 0:e.status)?(console.log("401 error fetching units - using default units"),a(s)):403===(null===(t=n.response)||void 0===t?void 0:t.status)?(console.log("403 error fetching units - using default units"),a(s)):(c("Failed to fetch units"),console.error("Error fetching units:",n),a(s))}finally{o(!1)}},[s,u.token,u.role]);return(0,r.useEffect)(()=>{A()},[A]),(0,Fa.jsx)(k_.Provider,{value:{units:n,defaultUnits:s,loading:i,error:l,addUnit:async e=>{if(!e.trim())throw new Error("Unit name cannot be empty");if(n.includes(e.trim()))throw new Error("Unit already exists");try{const t=[...n,e.trim()];return a(t),e.trim()}catch(t){throw new Error("Failed to add unit")}},deleteUnit:async e=>{if(s.includes(e))throw new Error("Cannot remove default units");try{const t=n.filter(t=>t!==e);return a(t),!0}catch(t){throw new Error("Failed to delete unit")}},isUnitInUse:async e=>{if(!u.token||!u.role)return!1;try{const t=d();return(await Ea.get("".concat(t,"/products/units/in-use/").concat(e),{withCredentials:!0})).data.inUse}catch(r){var t,n;return 401===(null===(t=r.response)||void 0===t?void 0:t.status)||(403===(null===(n=r.response)||void 0===n?void 0:n.status)||console.error("Error checking if unit is in use:",r)),!1}},fetchUnits:A},children:t})},F_=["value","onChange","className","showAddUnitOption"],__=e=>{let{value:t,onChange:n,className:a="",showAddUnitOption:s=!0}=e,i=be(e,F_);const{units:o,defaultUnits:l,deleteUnit:c,isUnitInUse:u,addUnit:d}=S_(),[A,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),[x,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(""),[w,N]=(0,r.useState)(!1),[j,C]=(0,r.useState)(""),B=(0,r.useRef)(null),k=(0,r.useRef)(null),S=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=e=>{B.current&&!B.current.contains(e.target)&&(h(!1),v(!1),b(""),C("")),f&&k.current&&!k.current.contains(e.target)&&(p(!1),g(null))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[f]);const E=async e=>{if(e.stopPropagation(),y.trim()){N(!0),C("");try{const e=await d(y);b(""),v(!1),n(e),h(!1)}catch(t){C(t.message||"Failed to add unit")}finally{N(!1)}}else C("Unit name cannot be empty")};return(0,Fa.jsxs)("div",{className:"relative",ref:B,children:[f&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Fa.jsxs)("div",{ref:k,className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,Fa.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Confirm Delete"}),(0,Fa.jsxs)("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to delete the unit "',(0,Fa.jsx)("strong",{children:m}),'"? This action cannot be undone.']}),(0,Fa.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Fa.jsx)("button",{type:"button",onClick:()=>{p(!1),g(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none",children:"Cancel"}),(0,Fa.jsx)("button",{type:"button",onClick:async()=>{if(m)try{if(await u(m))return alert("Cannot remove unit that is currently in use"),p(!1),void g(null);await c(m)}catch(j){alert(j.message||"Failed to delete unit")}finally{p(!1),g(null)}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none",children:"Delete"})]})]})}),(0,Fa.jsxs)("div",(0,ye.A)((0,ye.A)({className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm flex justify-between items-center cursor-pointer bg-white ".concat(a),onClick:()=>h(!A)},i),{},{children:[(0,Fa.jsx)("span",{children:t||"Select unit"}),(0,Fa.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,Fa.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})]})),A&&(0,Fa.jsxs)("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border border-gray-200 max-h-60 overflow-auto",children:[o.map(e=>{const t=!l.includes(e);return(0,Fa.jsxs)("div",{className:"flex justify-between items-center px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{n(e),h(!1)},children:[(0,Fa.jsx)("span",{children:e}),t&&(0,Fa.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),g(e),p(!0)},className:"text-red-500 hover:text-red-700 font-bold ml-2",title:"Delete this unit",children:"\xd7"})]},e)}),s&&(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("div",{className:"border-t border-gray-200 my-1"}),x?(0,Fa.jsx)("div",{ref:S,className:"px-4 py-2",onClick:e=>e.stopPropagation(),children:(0,Fa.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsx)("input",{type:"text",value:y,onChange:e=>b(e.target.value),className:"shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm",placeholder:"Enter unit name",onKeyDown:e=>{"Enter"===e.key&&E(e)}}),j&&(0,Fa.jsx)("p",{className:"text-red-500 text-xs mt-1",children:j})]}),(0,Fa.jsx)("button",{type:"button",onClick:E,disabled:w,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded text-xs disabled:opacity-50",children:w?"Adding...":"Add"}),(0,Fa.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),v(!1),b(""),C("")},className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-2 rounded text-xs",children:"Cancel"})]})}):(0,Fa.jsx)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-blue-600 flex items-center",onClick:e=>{e.stopPropagation(),v(!0)},children:(0,Fa.jsx)("span",{children:"+ Add New Unit"})})]})]})]})};const I_=function(e){let{baseUrl:t="/admin"}=e;const n="".concat(t,"/products"),a="".concat(t,"/categories"),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)([]),[g,x]=(0,r.useState)(""),[v,y]=(0,r.useState)(""),[b,w]=(0,r.useState)(!0),[N,j]=(0,r.useState)([{unit:"piece",netPrice:"",sellingPrice:""}]);(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get(a,{withCredentials:!0});m(e.data),e.data.length>0&&l(e.data[0]._id)}catch(e){y("Failed to load data."),console.error(e)}finally{w(!1)}})()},[a]);const C=(e,t,n)=>{const r=[...N];r[e][t]=n,j(r)};return b?(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading categories..."}):(0,Fa.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800",children:"Add New Product"}),(0,Fa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),x(""),y(""),s&&o&&c){for(let e=0;e<N.length;e++){const t=N[e];if(!t.unit||!t.netPrice||!t.sellingPrice)return void y("Please fill in all fields for unit ".concat(e+1,"."));if(isNaN(t.netPrice)||isNaN(t.sellingPrice))return void y("Net Price and Selling Price must be valid numbers for unit ".concat(e+1,"."))}try{const e={name:s,category:o,sku:c,stockLevel:parseInt(d)||0,stockAlertThreshold:parseInt(h)||0,prices:N.map(e=>({unit:e.unit,netPrice:parseFloat(e.netPrice),sellingPrice:parseFloat(e.sellingPrice)}))};await Ea.post(n,JSON.stringify(e),{headers:{"Content-Type":"application/json"},withCredentials:!0}),x('Product "'.concat(s,'" created successfully!')),i(""),u(""),A(""),f(""),j([{unit:"piece",netPrice:"",sellingPrice:""}])}catch(a){var t,r;y((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to add product."),console.error(a)}}else y("Please fill in all required fields.")},className:"space-y-4",children:[(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"productName",children:"Product Name"}),(0,Fa.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"productName",value:s,onChange:e=>i(e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"category",children:"Category"}),(0,Fa.jsx)("select",{id:"category",className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:o,onChange:e=>l(e.target.value),required:!0,children:p.length>0?p.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id)):(0,Fa.jsx)("option",{value:"",disabled:!0,children:"No categories found. Please add a category first."})})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"sku",children:"SKU"}),(0,Fa.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"sku",value:c,onChange:e=>u(e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"stockLevel",children:"Stock Level"}),(0,Fa.jsx)("input",{type:"number",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"stockLevel",value:d,onChange:e=>A(e.target.value)})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"stockAlertThreshold",children:"Stock Alert Threshold"}),(0,Fa.jsx)("input",{type:"number",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"stockAlertThreshold",value:h,onChange:e=>f(e.target.value)})]}),(0,Fa.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,Fa.jsx)("div",{className:"flex justify-between items-center mb-3",children:(0,Fa.jsx)("h4",{className:"text-lg font-medium text-gray-800",children:"Unit Configuration"})}),N.map((e,t)=>(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3 p-3 border rounded",children:[(0,Fa.jsxs)("div",{className:"md:col-span-1",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-xs font-bold mb-1",children:"Unit"}),(0,Fa.jsx)(__,{value:e.unit,onChange:e=>C(t,"unit",e)})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-xs font-bold mb-1",children:"Net Price"}),(0,Fa.jsx)("input",{type:"number",step:"0.01",value:e.netPrice,onChange:e=>C(t,"netPrice",e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-xs font-bold mb-1",children:"Selling Price"}),(0,Fa.jsx)("input",{type:"number",step:"0.01",value:e.sellingPrice,onChange:e=>C(t,"sellingPrice",e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm",required:!0})]}),(0,Fa.jsx)("div",{className:"flex items-end"})]},t))]}),(0,Fa.jsx)("button",{type:"submit",className:"w-full sm:w-auto bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Add Product"})]}),g&&(0,Fa.jsx)("p",{className:"mt-4 text-green-500",children:g}),v&&(0,Fa.jsx)("p",{className:"mt-4 text-red-500",children:v})]})};const T_=document.createElement("style");T_.innerHTML="\n  .input-style { display: block; width: 100%; padding: 0.5rem 0.75rem; font-size: 0.875rem; color: #1f2937; background-color: #fff; border: 1px solid #d1d5db; border-radius: 0.375rem; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }\n  .label-style { font-size: 0.875rem; font-weight: 500; color: #374151; }\n  .th-style { padding: 0.75rem 1rem; text-align: left; font-size: 0.75rem; font-weight: 600; color: #4b5563; text-transform: uppercase; }\n  .td-style { padding: 0.75rem 1rem; font-size: 0.875rem; color: #111827; vertical-align: middle; }\n  .btn-primary { padding: 0.6rem 1.2rem; background-color: #4f46e5; color: white; border-radius: 0.375rem; font-weight: 600; border: none; cursor: pointer; }\n  .btn-secondary { padding: 0.6rem 1.2rem; background-color: #e5e7eb; color: #1f2937; border-radius: 0.375rem; font-weight: 600; border: none; cursor: pointer; }\n  /* CSS to hide number input spinners */\n  .no-spinner::-webkit-outer-spin-button,\n  .no-spinner::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  .no-spinner {\n    -moz-appearance: textfield;\n  }\n",document.head.appendChild(T_);const D_=function(e){let{closeModal:t,adminProducts:n,refreshProducts:a}=e;const s="/admin/shops",[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)([]),[A,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[x,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(!0),[w,N]=(0,r.useState)(!1),{subtotal:j,taxAmount:C,grandTotal:B}=(0,r.useMemo)(()=>{const e=u.reduce((e,t)=>{const n=parseInt(t.quantity,10)||0;return e+t.unitPrice*n},0),t=e*((parseFloat(A)||0)/100);return{subtotal:e,taxAmount:t,grandTotal:e+t}},[u,A]);(0,r.useEffect)(()=>{(async()=>{try{console.log("Fetching shops from:",s);const e=await Ea.get(s,{withCredentials:!0});console.log("Shops response:",e.data);const t=e.data;o(t),t.length>0?c(t[0]._id):(console.log("No shops found!"),v("No shops available. Please create a shop first."))}catch(e){console.log("Error fetching shops:",e),v("Failed to fetch shops.")}finally{b(!1)}})()},[]);const k=(0,r.useMemo)(()=>f?n.filter(e=>e.stockLevel>0&&(e.name.toLowerCase().includes(f.toLowerCase())||e.sku.toLowerCase().includes(f.toLowerCase()))):n.filter(e=>e.stockLevel>0),[f,n]);return y?(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading..."}):(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-60 z-50 flex items-center justify-center p-4",children:(0,Fa.jsxs)("div",{className:"relative w-full max-w-6xl bg-white rounded-lg shadow-xl flex flex-col max-h-[90vh]",children:[(0,Fa.jsxs)("header",{className:"flex justify-between items-center p-4 border-b",children:[(0,Fa.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Create New Invoice"}),(0,Fa.jsx)("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-200",children:(0,Fa.jsx)(tn,{size:20})})]}),(0,Fa.jsxs)("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[(0,Fa.jsxs)("div",{className:"w-full md:w-1/2 p-4 border-r overflow-y-auto",children:[(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsx)("label",{className:"label-style",children:"Search Products"}),(0,Fa.jsx)("input",{type:"text",placeholder:"Search by name or SKU...",value:f,onChange:e=>p(e.target.value),className:"input-style mt-1"})]}),(0,Fa.jsx)("div",{className:"space-y-3",children:k.map(e=>(0,Fa.jsxs)("div",{className:"p-3 border rounded-lg bg-gray-50",children:[(0,Fa.jsxs)("p",{className:"font-semibold",children:[e.name," ",(0,Fa.jsxs)("span",{className:"text-gray-500 font-normal",children:[" (Stock: ",e.stockLevel,")"]})]}),(0,Fa.jsx)("div",{className:"flex flex-wrap gap-x-4 gap-y-2 mt-2",children:e.prices.map(t=>(0,Fa.jsxs)("label",{className:"flex items-center space-x-2 text-sm cursor-pointer",children:[(0,Fa.jsx)("input",{type:"checkbox",checked:u.some(n=>n.product._id===e._id&&n.unitPrice===t.sellingPrice),onChange:()=>((e,t)=>{const n=u.find(n=>n.product._id===e._id&&n.unitPrice===t.sellingPrice);d(n?u.filter(e=>e!==n):[...u,{product:e,quantity:"",unitPrice:t.sellingPrice,maxQuantity:e.stockLevel,unit:t.unit}])})(e,t),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,Fa.jsxs)("span",{children:[t.unit," - \u20b9",t.sellingPrice]})]},t._id))})]},e._id))})]}),(0,Fa.jsxs)("main",{className:"w-full md:w-1/2 p-4 sm:p-6 flex flex-col overflow-y-auto",children:[(0,Fa.jsxs)("div",{className:"mb-6",children:[(0,Fa.jsx)("label",{className:"label-style",children:"Deliver To Shop"}),(0,Fa.jsx)("select",{value:l,onChange:e=>c(e.target.value),className:"input-style mt-1",children:i.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))})]}),(0,Fa.jsx)("h4",{className:"font-semibold mb-2",children:"Products Added to Invoice"}),(0,Fa.jsx)("div",{className:"flex-1 overflow-x-auto rounded-lg border",children:(0,Fa.jsxs)("table",{className:"min-w-full",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"th-style",children:"Product"}),(0,Fa.jsx)("th",{className:"th-style",children:"Unit"}),(0,Fa.jsx)("th",{className:"th-style",children:"Qty"}),(0,Fa.jsx)("th",{className:"th-style",children:"Total"})]})}),(0,Fa.jsx)("tbody",{children:0===u.length?(0,Fa.jsx)("tr",{children:(0,Fa.jsx)("td",{colSpan:"4",className:"text-center py-10 text-gray-500",children:"Select products from the list."})}):u.map(e=>(0,Fa.jsxs)("tr",{className:"border-b",children:[(0,Fa.jsxs)("td",{className:"td-style",children:[(0,Fa.jsx)("p",{className:"font-medium",children:e.product.name}),(0,Fa.jsxs)("p",{className:"text-xs text-gray-500",children:["SKU: ",e.product.sku]})]}),(0,Fa.jsxs)("td",{className:"td-style",children:[(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit}),(0,Fa.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["@ \u20b9",e.unitPrice.toFixed(2)]})]}),(0,Fa.jsx)("td",{className:"td-style",children:(0,Fa.jsx)("input",{type:"text",value:e.quantity,placeholder:"0",onChange:t=>{return n=e.product._id,r=e.unit,a="quantity",s=t.target.value,void d(e=>e.map(e=>{if(e.product._id===n&&e.unit===r){const t=parseInt(s,10);return(0,ye.A)((0,ye.A)({},e),{},{[a]:isNaN(t)?"":t})}return e}));var n,r,a,s},className:"w-20 sm:w-24 input-style no-spinner"})}),(0,Fa.jsxs)("td",{className:"td-style font-semibold",children:["\u20b9",(e.unitPrice*(parseInt(e.quantity,10)||0)).toFixed(2)]})]},"".concat(e.product._id,"-").concat(e.unit)))})]})}),(0,Fa.jsx)("div",{className:"mt-auto pt-6",children:(0,Fa.jsxs)("div",{className:"space-y-2",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,Fa.jsxs)("span",{className:"font-semibold text-gray-800",children:["\u20b9",j.toFixed(2)]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,Fa.jsx)("label",{className:"text-gray-600",children:"Tax (%):"}),(0,Fa.jsx)("input",{type:"text",value:A,placeholder:"0",onChange:e=>h(e.target.value),className:"w-24 input-style text-right no-spinner"})]}),(0,Fa.jsxs)("div",{className:"flex justify-between",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Tax Amount:"}),(0,Fa.jsxs)("span",{className:"font-semibold text-gray-800",children:["\u20b9",C.toFixed(2)]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between font-bold text-lg border-t pt-2 mt-2",children:[(0,Fa.jsx)("span",{children:"Grand Total:"}),(0,Fa.jsxs)("span",{children:["\u20b9",B.toFixed(2)]})]})]})})]})]}),(0,Fa.jsxs)("footer",{className:"p-4 bg-gray-50 border-t flex justify-end items-center gap-3",children:[m&&(0,Fa.jsx)("div",{className:"fixed top-4 right-4 z-[9999] bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg",children:(0,Fa.jsx)("p",{className:"font-semibold",children:m})}),x&&(0,Fa.jsx)("p",{className:"text-red-600 font-semibold",children:x}),(0,Fa.jsx)("button",{onClick:t,className:"btn-secondary",children:"Cancel"}),(0,Fa.jsx)("button",{onClick:async()=>{if(!l)return void v("Please select a shop.");if(0===u.length)return void v("Please add at least one product to the invoice.");N(!0);if(u.some(e=>!e.quantity||parseInt(e.quantity,10)<=0))return v("All products in the invoice must have a quantity greater than 0."),void N(!1);v(""),g("");const e={shopId:l,items:u.map(e=>({productId:e.product._id,quantity:e.quantity,unitPrice:e.unitPrice,unit:e.unit})),tax:parseFloat(A)||0};try{await Ea.post("/admin/invoices",e,{withCredentials:!0});const n=i.find(e=>e._id===l),r=n?n.name:"the selected shop";g("Invoice created and sent successfully to ".concat(r,"!")),a&&a(),setTimeout(()=>{c(i.length>0?i[0]._id:""),d([]),h(""),p(""),v("")},500),setTimeout(()=>{t()},3e3)}catch(s){var n,r;v((null===(n=s.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"An error occurred. Please try again.")}finally{N(!1)}},className:"btn-primary",disabled:w,children:w?"Sending...":"Create & Send Invoice"})]})]})})};var L_=n(7307),U_=n.n(L_);const P_=e=>{var t,n,r,a,s;const i=(null===e||void 0===e||null===(t=e.shop)||void 0===t?void 0:t.name)||(null===e||void 0===e?void 0:e.shopName)||"The Sweet Hub",o=(null===e||void 0===e||null===(n=e.shop)||void 0===n?void 0:n.address)||(null===e||void 0===e?void 0:e.shopAddress)||"156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006",l=(null===e||void 0===e||null===(r=e.shop)||void 0===r?void 0:r.phone)||"7339200636",c=(null===e||void 0===e||null===(a=e.admin)||void 0===a?void 0:a.name)||"Admin",u=(null===e||void 0===e?void 0:e.invoiceNumber)||(null===e||void 0===e||null===(s=e._id)||void 0===s?void 0:s.slice(-8))||"N/A",d=null!==e&&void 0!==e&&e.issueDate?new Date(e.issueDate).toLocaleDateString():null!==e&&void 0!==e&&e.billDate?new Date(e.billDate).toLocaleDateString():"N/A",A=(null===e||void 0===e?void 0:e.status)||"N/A",h=(null===e||void 0===e?void 0:e.gstPercentage)||0,f=(null===e||void 0===e?void 0:e.gstAmount)||0,p=(null===e||void 0===e?void 0:e.baseAmount)||0,m=(null===e||void 0===e||e.tax,(null===e||void 0===e?void 0:e.grandTotal)||(null===e||void 0===e?void 0:e.totalAmount)||0),g=(null===e||void 0===e?void 0:e.subtotal)||p||0,x=(null===e||void 0===e?void 0:e.discountType)||"none",v=(null===e||void 0===e?void 0:e.discountValue)||0,y=(null===e||void 0===e?void 0:e.discountAmount)||0;if(!e||!e.items)return console.error("Invalid invoice data:",e),void alert("Unable to generate PDF: Invalid invoice data");const b=e.items.map(e=>{var t;return'\n    <tr>\n      <td style="padding: 8px; border: 1px solid #ddd;">'.concat(e.productName||(null===(t=e.product)||void 0===t?void 0:t.name)||e.name||"N/A",'</td>\n      <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">').concat(e.quantity||0,'</td>\n      <td style="padding: 8px; border: 1px solid #ddd; text-align: right;">\u20b9').concat((e.unitPrice||e.price||0).toFixed(2),'</td>\n      <td style="padding: 8px; border: 1px solid #ddd; text-align: right;">\u20b9').concat((e.totalPrice||(e.unitPrice||e.price||0)*(e.quantity||0)).toFixed(2),"</td>\n    </tr>\n  ")}).join(""),w='\n    <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: auto; border: 1px solid #eee; box-shadow: 0 0 10px rgba(0,0,0,0.1);">\n      \x3c!-- FROM Information --\x3e\n      '.concat(e.fromInfo?'\n      <div style="margin-bottom: 20px;">\n        <h3 style="color: #333; margin-bottom: 10px;">FROM (Sweet Production Factory)</h3>\n        <div style="border: 1px solid #ddd; padding: 10px; border-radius: 5px;">\n          <p style="font-weight: bold; margin: 0;">'.concat(e.fromInfo.name||"",'</p>\n          <p style="margin: 5px 0;">').concat(e.fromInfo.address||"","</p>\n          ").concat(e.fromInfo.gstin?'<p style="margin: 5px 0;">GSTIN: '.concat(e.fromInfo.gstin,"</p>"):"","\n          ").concat(e.fromInfo.state?'<p style="margin: 5px 0;">State: '.concat(e.fromInfo.state,"</p>"):"","\n          ").concat(e.fromInfo.stateCode?'<p style="margin: 5px 0;">State Code: '.concat(e.fromInfo.stateCode,"</p>"):"","\n          ").concat(e.fromInfo.phone?'<p style="margin: 5px 0;">Phone: '.concat(e.fromInfo.phone,"</p>"):"","\n          ").concat(e.fromInfo.email?'<p style="margin: 5px 0;">Email: '.concat(e.fromInfo.email,"</p>"):"","\n        </div>\n      </div>\n      "):"","\n      \n      \x3c!-- TO Information --\x3e\n      ").concat(e.toInfo?'\n      <div style="margin-bottom: 20px;">\n        <h3 style="color: #333; margin-bottom: 10px;">TO (Receiving Branch / Shop)</h3>\n        <div style="border: 1px solid #ddd; padding: 10px; border-radius: 5px;">\n          <p style="font-weight: bold; margin: 0;">'.concat(e.toInfo.name||"",'</p>\n          <p style="margin: 5px 0;">').concat(e.toInfo.address||"","</p>\n          ").concat(e.toInfo.gstin?'<p style="margin: 5px 0;">GSTIN: '.concat(e.toInfo.gstin,"</p>"):"","\n          ").concat(e.toInfo.state?'<p style="margin: 5px 0;">State: '.concat(e.toInfo.state,"</p>"):"","\n          ").concat(e.toInfo.stateCode?'<p style="margin: 5px 0;">State Code: '.concat(e.toInfo.stateCode,"</p>"):"","\n          ").concat(e.toInfo.phone?'<p style="margin: 5px 0;">Phone: '.concat(e.toInfo.phone,"</p>"):"","\n        </div>\n      </div>\n      "):"",'\n      \n      <div style="text-align: center; margin-bottom: 20px;">\n        <h2 style="color: #333;">').concat(i,'</h2>\n        <p style="color: #666; font-size: 14px;">').concat(o,"</p>\n        ").concat(l?'<p style="color: #666; font-size: 14px;">Phone: '.concat(l,"</p>"):"",'\n      </div>\n      <div style="display: flex; justify-content: space-between; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 10px;">\n        <div>\n          <p><strong>Invoice #:</strong> ').concat(u,"</p>\n          <p><strong>Date:</strong> ").concat(d,"</p>\n          ").concat(c&&"Admin"!==c?"<p><strong>From:</strong> ".concat(c,"</p>"):"",'\n        </div>\n        <div style="text-align: right;">\n          <p><strong>Status:</strong> ').concat(A,'</p>\n        </div>\n      </div>\n      <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n        <thead>\n          <tr style="background-color: #f2f2f2;">\n            <th style="padding: 8px; border: 1px solid #ddd; text-align: left;">Item</th>\n            <th style="padding: 8px; border: 1px solid #ddd; text-align: center;">Qty</th>\n            <th style="padding: 8px; border: 1px solid #ddd; text-align: right;">Price</th>\n            <th style="padding: 8px; border: 1px solid #ddd; text-align: right;">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          ').concat(b,'\n          <tr>\n            <td colspan="3" style="padding: 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">Subtotal</td>\n            <td style="padding: 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">\u20b9').concat(g.toFixed(2),"</td>\n          </tr>\n          ").concat(y>0?'\n          <tr>\n            <td colspan="3" style="padding: 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">\n              Discount '.concat("percentage"===x?"(".concat(v,"%)"):"",':\n            </td>\n            <td style="padding: 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">-\u20b9').concat(y.toFixed(2),"</td>\n          </tr>\n          "):"",'\n          <tr>\n            <td colspan="3" style="padding: 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">Net Amount</td>\n            <td style="padding: 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">\u20b9').concat((g-y).toFixed(2),"</td>\n          </tr>\n          ").concat(h>0?'\n          <tr>\n            <td colspan="3" style="padding: 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">GST ('.concat(h,'%)</td>\n            <td style="padding: 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">\u20b9').concat(f.toFixed(2),"</td>\n          </tr>\n          "):"",'\n          <tr>\n            <td colspan="3" style="padding: 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">Grand Total</td>\n            <td style="padding: 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">\u20b9').concat(m.toFixed(2),'</td>\n          </tr>\n        </tbody>\n      </table>\n      <div style="display: flex; justify-content: space-between; margin-top: 20px;">\n        <div>\n          <p><strong>Total Items:</strong> ').concat(e.items.length||0,'</p>\n        </div>\n      </div>\n      <p style="text-align: center; margin-top: 30px; font-style: italic; color: #777;">Thank you for your business!</p>\n    </div>\n  '),N={margin:10,filename:"invoice_".concat(u,"_").concat(d.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};U_()().from(w).set(N).save()};const R_=function(e){let{closeModal:t}=e;const[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!0),[d,A]=(0,r.useState)(!1),h=(0,r.useCallback)(async()=>{u(!0),l("");try{const e=await Ea.get("/admin/invoices");a(e.data||[])}catch(e){l("Failed to fetch invoices. Please try again later."),console.error(e)}finally{u(!1)}},[]);(0,r.useEffect)(()=>{h()},[h]);const f=()=>{A(!1),i(null),l("")},p=e=>{const t=new Date(e);return{date:t.toLocaleDateString(),time:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}},m=e=>"Pending"===e?(0,Fa.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,Fa.jsx)(xt,{className:"mr-1 h-3 w-3"}),"Pending"]}):"Confirmed"===e?(0,Fa.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,Fa.jsx)(At,{className:"mr-1 h-3 w-3"}),"Confirmed"]}):"Partial"===e?(0,Fa.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[(0,Fa.jsx)(Nt,{className:"mr-1 h-3 w-3"}),"Partial"]}):(0,Fa.jsx)("span",{className:"text-gray-500",children:e});return d&&s?(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-60 z-50 flex items-center justify-center p-4",children:(0,Fa.jsxs)("div",{className:"relative w-full max-w-6xl bg-white rounded-lg shadow-xl flex flex-col max-h-[90vh]",children:[(0,Fa.jsxs)("header",{className:"flex justify-between items-center p-4 border-b",children:[(0,Fa.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Invoice Details"}),(0,Fa.jsx)("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-200",children:(0,Fa.jsx)(tn,{size:20})})]}),(0,Fa.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,Fa.jsx)("button",{onClick:f,className:"mb-4 text-blue-600 hover:text-blue-800 flex items-center",children:"\u2190 Back to Invoice List"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Invoice Number"}),(0,Fa.jsx)("p",{className:"font-semibold text-gray-800",children:s.invoiceNumber})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Issue Date"}),(0,Fa.jsx)("p",{className:"font-semibold text-gray-800",children:p(s.issueDate).date})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Sent To Shop"}),(0,Fa.jsx)("p",{className:"font-semibold text-gray-800",children:s.shop.name})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Status"}),m(s.status)]})]}),(0,Fa.jsxs)("div",{className:"mt-6",children:[(0,Fa.jsx)("h4",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Invoice Items"}),(0,Fa.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.items.map((e,t)=>(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},t))})]})})]}),(0,Fa.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,Fa.jsxs)("span",{className:"font-semibold text-gray-800",children:["\u20b9",s.subtotal.toFixed(2)]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Tax:"}),(0,Fa.jsxs)("span",{className:"font-semibold text-gray-800",children:["\u20b9",s.tax.toFixed(2)]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between items-center border-t pt-2",children:[(0,Fa.jsx)("span",{className:"text-lg font-bold text-gray-800",children:"Grand Total:"}),(0,Fa.jsxs)("span",{className:"text-lg font-bold text-gray-800",children:["\u20b9",s.grandTotal.toFixed(2)]})]})]})]})]})}):(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-60 z-50 flex items-center justify-center p-4",children:(0,Fa.jsxs)("div",{className:"relative w-full max-w-7xl bg-white rounded-lg shadow-xl flex flex-col max-h-[90vh]",children:[(0,Fa.jsxs)("header",{className:"flex justify-between items-center p-4 border-b",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Invoice History"}),(0,Fa.jsx)("p",{className:"text-sm text-gray-500",children:"View all invoices sent to shops with date and time."})]}),(0,Fa.jsx)("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-200",children:(0,Fa.jsx)(tn,{size:20})})]}),(0,Fa.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[o&&(0,Fa.jsx)("div",{className:"mb-4 p-4 bg-red-100 text-red-800 rounded-lg",children:(0,Fa.jsx)("p",{children:o})}),c?(0,Fa.jsx)("div",{className:"text-center py-12",children:(0,Fa.jsx)("div",{className:"text-gray-500",children:"Loading invoices..."})}):0===n.length?(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)(St,{className:"mx-auto text-5xl text-gray-400 mb-4"}),(0,Fa.jsx)("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Invoices Found"}),(0,Fa.jsx)("p",{className:"text-gray-500",children:"You haven't created any invoices yet. Create your first invoice to see it here."})]}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice #"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sent To Shop"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>{const{date:t,time:n}=p(e.issueDate);return(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.invoiceNumber}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"font-medium",children:t}),(0,Fa.jsx)("div",{className:"text-xs text-gray-500",children:n})]})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.shop.name}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:m(e.status)}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:["\u20b9",e.grandTotal.toFixed(2)]}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium space-x-2",children:[(0,Fa.jsxs)("button",{onClick:()=>(e=>{i(e),A(!0)})(e),className:"inline-flex items-center px-3 py-1.5 bg-blue-100 text-blue-700 text-sm font-medium rounded-md hover:bg-blue-200 transition-colors",children:[(0,Fa.jsx)(wt,{className:"mr-1 h-4 w-4"}),"View"]}),(0,Fa.jsxs)("button",{onClick:()=>{e?P_(e):console.error("No invoice data provided")},className:"inline-flex items-center px-3 py-1.5 bg-green-100 text-green-700 text-sm font-medium rounded-md hover:bg-green-200 transition-colors",children:[(0,Fa.jsx)(yt,{className:"mr-1 h-4 w-4"}),"PDF"]})]})]},e._id)})})]})})]})]})})};const O_=function(e){let{baseUrl:t="/admin"}=e;const n="".concat(t,"/products"),a="".concat(t,"/categories"),[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[d,A]=(0,r.useState)("All"),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(!0),[g,x]=(0,r.useState)(null),[v,y]=(0,r.useState)({}),[b,w]=(0,r.useState)(!1),[N,j]=(0,r.useState)(!1),[C,B]=(0,r.useState)(!1),k=async()=>{try{m(!0);const e=await Ea.get(n,{withCredentials:!0});i(e.data),l(e.data)}catch(e){x("Failed to fetch products."),console.error(e)}finally{m(!1)}};(0,r.useEffect)(()=>{k(),(async()=>{try{const e=await Ea.get(a,{withCredentials:!0});u(e.data)}catch(e){console.error("Failed to fetch categories:",e)}})()},[t]),(0,r.useEffect)(()=>{let e=s;"All"!==d&&(e=e.filter(e=>{var t;return(null===(t=e.category)||void 0===t?void 0:t._id)===d})),h&&(e=e.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())||e.sku.toLowerCase().includes(h.toLowerCase()))),l(e)},[s,d,h]);const S=()=>{y({}),w(!1)},E=(e,t)=>{y((0,ye.A)((0,ye.A)({},v),{},{[t]:e.target.value}))};if(p)return(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading products..."});if(g)return(0,Fa.jsx)("div",{className:"p-6 text-center text-red-500",children:g});const F=[];return o.forEach(e=>{e.prices&&e.prices.length>0?e.prices.forEach(t=>{F.push((0,ye.A)((0,ye.A)({},e),{},{unit:t.unit,netPrice:t.netPrice,sellingPrice:t.sellingPrice,stockLevel:e.stockLevel}))}):F.push((0,ye.A)((0,ye.A)({},e),{},{unit:"N/A",netPrice:"N/A",sellingPrice:"N/A",stockLevel:e.stockLevel}))}),(0,Fa.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-lg",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:"View Products"}),"/admin"===t&&(0,Fa.jsxs)("div",{className:"flex gap-3",children:[(0,Fa.jsx)("button",{onClick:()=>B(!0),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"View History"}),(0,Fa.jsx)("button",{onClick:()=>j(!0),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Create Invoice"})]})]}),(0,Fa.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[(0,Fa.jsx)("input",{type:"text",placeholder:"Search by name or SKU...",value:h,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,Fa.jsxs)("select",{value:d,onChange:e=>A(e.target.value),className:"w-full md:w-auto px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Fa.jsx)("option",{value:"All",children:"All Categories"}),c.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),0===F.length?(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)("div",{className:"text-gray-400 text-lg mb-2",children:"\ud83d\udce6"}),(0,Fa.jsx)("p",{className:"text-gray-600 font-medium",children:"No products found in your inventory."}),(0,Fa.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"/shop"===t?"Products will appear here when admin sends invoices and you confirm them.":"Start by adding your first product to get started."})]}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Price"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sell Price"}),(0,Fa.jsx)("th",{className:"hidden lg:table-cell px-2 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map((e,t)=>(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors even:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 text-sm font-semibold text-gray-900",children:e.name}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.sku}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 uppercase",children:e.unit})}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.stockLevel<=(e.stockAlertThreshold||0)?"bg-red-100 text-red-800":e.stockLevel<=2*(e.stockAlertThreshold||0)?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.stockLevel})}),(0,Fa.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["\u20b9",e.netPrice]}),(0,Fa.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-green-600 font-semibold",children:["\u20b9",e.sellingPrice]}),(0,Fa.jsx)("td",{className:"hidden lg:table-cell px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.category?e.category.name:"N/A"}),(0,Fa.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{var t;y((0,ye.A)((0,ye.A)({},e),{},{category:(null===(t=e.category)||void 0===t?void 0:t._id)||""})),w(!0)})(e),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),(0,Fa.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this product?"))try{await Ea.delete("".concat(n,"/").concat(e),{withCredentials:!0}),k()}catch(t){x("Failed to delete product."),console.error(t)}})(e._id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},"".concat(e._id,"-").concat(e.unit,"-").concat(t)))})]})}),b&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",children:(0,Fa.jsxs)("div",{className:"relative m-4 p-4 sm:p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:[(0,Fa.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:"Edit Product"}),(0,Fa.jsxs)("div",{className:"space-y-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,Fa.jsx)("input",{type:"text",value:v.name,onChange:e=>E(e,"name"),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"SKU"}),(0,Fa.jsx)("input",{type:"text",value:v.sku,onChange:e=>E(e,"sku"),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Stock"}),(0,Fa.jsx)("input",{type:"number",value:v.stockLevel,onChange:e=>E(e,"stockLevel"),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Stock Alert Threshold"}),(0,Fa.jsx)("input",{type:"number",value:v.stockAlertThreshold||"",onChange:e=>E(e,"stockAlertThreshold"),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,Fa.jsx)("select",{value:v.category,onChange:e=>y((0,ye.A)((0,ye.A)({},v),{},{category:e.target.value})),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:c.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))})]})]}),(0,Fa.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Fa.jsx)("button",{onClick:S,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Fa.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to update this product?"))try{const e=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(v),v));await Ea.put("".concat(n,"/").concat(v._id),e,{withCredentials:!0}),k(),S()}catch(e){x("Failed to update product."),console.error(e)}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update"})]})]})}),N&&"/admin"===t&&(0,Fa.jsx)(D_,{closeModal:()=>j(!1),adminProducts:s,refreshProducts:k}),C&&"/admin"===t&&(0,Fa.jsx)(R_,{closeModal:()=>B(!1)})]})};const M_=function(e){let{baseUrl:t="/admin"}=e;const n="".concat(t,"/products"),[a,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),[A,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(""),[x,v]=(0,r.useState)([]),[y,b]=(0,r.useState)("admin");(0,r.useEffect)(()=>{"/admin"===t&&(async()=>{try{const e=await Ea.get("/admin/shops",{withCredentials:!0});v(e.data)}catch(e){console.error("Failed to fetch shops:",e)}})(),(async()=>{try{let e={};"admin"===y?e={showAdmin:!0}:y&&(e={shopId:y});const t=await Ea.get(n,{params:e,headers:{"Content-Type":"application/json"},withCredentials:!0});s(t.data)}catch(e){c("Failed to fetch product data."),console.error(e)}finally{o(!1)}})()},[t,y]);const w=()=>{d(null),h(""),g(""),p(!1)};return i?(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading stock data..."}):l?(0,Fa.jsx)("div",{className:"p-6 text-center text-red-500",children:l}):(0,Fa.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800",children:"Track Stock"}),"/admin"===t&&(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Filter by Shop"}),(0,Fa.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Fa.jsx)("option",{value:"admin",children:"Admin Products Only"}),x.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Price"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Level"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Total Stock Value"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Alert Threshold"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.prices&&e.prices.length>0?"\u20b9".concat((e.prices[0].netPrice||0).toFixed(2)," (").concat(e.prices[0].unit,")"):"\u20b90.00"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.stockLevel}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 hidden md:table-cell",children:e.prices&&e.prices.length>0?"\u20b9".concat(((e.stockLevel||0)*(e.prices[0].netPrice||0)).toFixed(2)):"\u20b90.00"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Fa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fa.jsxs)("span",{children:[e.stockAlertThreshold," ",e.unit]}),(0,Fa.jsx)("button",{onClick:()=>(e=>{d(e._id),h(e.stockAlertThreshold||""),g(e.prices&&e.prices.length>0?e.prices[0].unit:e.unit||""),p(!0)})(e),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"})]})})]},e._id))})]})}),f&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",children:(0,Fa.jsxs)("div",{className:"relative m-4 p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:[(0,Fa.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:"Edit Stock Alert Threshold"}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Threshold"}),(0,Fa.jsx)("input",{type:"text",value:A,onChange:e=>h(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),(0,Fa.jsx)("span",{className:"ml-2 text-gray-500",children:m})]}),(0,Fa.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Fa.jsx)("button",{onClick:w,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Fa.jsx)("button",{onClick:()=>(async e=>{try{await Ea.put("".concat(n,"/").concat(e),{stockAlertThreshold:A}),s(a.map(t=>t._id===e?(0,ye.A)((0,ye.A)({},t),{},{stockAlertThreshold:A}):t)),w()}catch(t){c("Failed to update threshold."),console.error(t)}})(u),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update"})]})]})})]})};const Q_=function(e){var t;let{baseUrl:n="/admin"}=e;const a="".concat(n,"/products"),[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[d,A]=(0,r.useState)([]),[h,f]=(0,r.useState)("admin"),[p,m]=(0,r.useState)({}),[g,x]=(0,r.useState)(!1),[v,y]=(0,r.useState)([]),[b,w]=(0,r.useState)("All"),[N,j]=(0,r.useState)(""),[C,B]=(0,r.useState)([]);(0,r.useEffect)(()=>{"/admin"===n&&(async()=>{try{const e=await Ea.get("/admin/shops",{withCredentials:!0});A(e.data)}catch(e){u("Failed to fetch shops.")}})()},[n]),(0,r.useEffect)(()=>{(async()=>{l(!0);try{let e={};"/admin"===n&&("admin"===h?e={showAdmin:!0}:h&&(e={shopId:h}));const t="".concat(n,"/categories"),[r,s]=await Promise.all([Ea.get(a,{params:e,withCredentials:!0}),Ea.get(t,{withCredentials:!0})]),o=r.data.filter(e=>e.stockLevel<=(e.stockAlertThreshold||0));i(o),y(s.data)}catch(e){u("Failed to fetch data.")}finally{l(!1)}})()},[h,n,a]),(0,r.useEffect)(()=>{"/admin"===n&&d.length>0&&(async()=>{try{const e=(await Ea.get(a,{withCredentials:!0})).data,t={};t.admin=e.filter(e=>!e.shop&&e.stockLevel<=(e.stockAlertThreshold||0)).length,d.forEach(n=>{t[n._id]=e.filter(e=>e.shop===n._id&&e.stockLevel<=(e.stockAlertThreshold||0)).length}),m(t)}catch(e){console.error("Failed to calculate all alert counts:",e)}})()},[n,d,a]),(0,r.useEffect)(()=>{let e=[...s];"All"!==b&&(e=e.filter(e=>{var t;return(null===(t=e.category)||void 0===t?void 0:t._id)===b})),N&&(e=e.filter(e=>e.name.toLowerCase().includes(N.toLowerCase())||e.sku&&e.sku.toLowerCase().includes(N.toLowerCase()))),B(e)},[s,b,N]);const k=e=>{f(e),x(!1)};return o?(0,Fa.jsx)("div",{className:"p-4",children:"Loading..."}):c?(0,Fa.jsx)("div",{className:"p-4 text-red-500",children:c}):(0,Fa.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-xl shadow-md",children:[(0,Fa.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-text-primary",children:"Stock Alerts"}),"/admin"===n&&(0,Fa.jsxs)("div",{className:"mb-6 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,Fa.jsxs)("div",{className:"p-4 rounded-lg shadow-sm flex flex-col items-center justify-center cursor-pointer transition-all duration-200 ".concat("admin"===h?"bg-blue-100 border-2 border-blue-500":"bg-gray-50 hover:bg-gray-100"),onClick:()=>k("admin"),children:[(0,Fa.jsx)("span",{className:"text-text-primary font-medium",children:"Admin"}),(0,Fa.jsx)("span",{className:"text-3xl font-bold mt-1 ".concat(p.admin>0?"text-primary":"text-text-secondary"),children:p.admin||0}),(0,Fa.jsx)("span",{className:"text-text-secondary",children:"Products"})]}),d.map(e=>(0,Fa.jsxs)("div",{className:"p-4 rounded-lg shadow-sm flex flex-col items-center justify-center cursor-pointer transition-all duration-200 ".concat(h===e._id?"bg-blue-100 border-2 border-blue-500":"bg-gray-50 hover:bg-gray-100"),onClick:()=>k(e._id),children:[(0,Fa.jsx)("span",{className:"text-text-primary font-medium",children:e.name}),(0,Fa.jsx)("span",{className:"text-3xl font-bold mt-1 ".concat(p[e._id]>0?"text-primary":"text-text-secondary"),children:p[e._id]||0}),(0,Fa.jsx)("span",{className:"text-text-secondary",children:"Products"})]},e._id))]}),(0,Fa.jsx)("hr",{className:"my-6 border-gray-300"}),(0,Fa.jsxs)("div",{className:"flex flex-wrap items-end gap-4 mb-4",children:["/admin"===n&&(0,Fa.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,Fa.jsx)("label",{className:"block text-text-secondary text-sm font-medium mb-1",children:"Filter by Shop"}),(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsxs)("button",{type:"button",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-left flex justify-between items-center",onClick:()=>x(!g),children:[(0,Fa.jsx)("span",{children:"admin"===h?"Admin Products":(null===(t=d.find(e=>e._id===h))||void 0===t?void 0:t.name)||"Select Shop"}),(0,Fa.jsx)("span",{className:"text-xs",children:"\u25bc"})]}),g&&(0,Fa.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:(0,Fa.jsxs)("ul",{children:[(0,Fa.jsxs)("li",{className:"px-4 py-2 hover:bg-light-gray cursor-pointer flex justify-between items-center",onClick:()=>k("admin"),children:[(0,Fa.jsx)("span",{children:"Admin Products"}),p.admin>0&&(0,Fa.jsx)("span",{className:"bg-red-500 text-white text-xs font-semibold w-5 h-5 flex items-center justify-center rounded-full",children:p.admin})]}),d.map(e=>(0,Fa.jsxs)("li",{className:"px-4 py-2 hover:bg-light-gray cursor-pointer flex justify-between items-center",onClick:()=>k(e._id),children:[(0,Fa.jsx)("span",{children:e.name}),p[e._id]>0&&(0,Fa.jsx)("span",{className:"bg-red-500 text-white text-xs font-semibold w-5 h-5 flex items-center justify-center rounded-full",children:p[e._id]})]},e._id))]})})]})]}),(0,Fa.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,Fa.jsx)("label",{className:"block text-text-secondary text-sm font-medium mb-1",children:"Search by Name or SKU"}),(0,Fa.jsx)("input",{type:"text",placeholder:"Search...",value:N,onChange:e=>j(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,Fa.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,Fa.jsx)("label",{className:"block text-text-secondary text-sm font-medium mb-1",children:"Filter by Category"}),(0,Fa.jsxs)("select",{value:b,onChange:e=>w(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,Fa.jsx)("option",{value:"All",children:"All Categories"}),v.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]})]}),0===C.length?(0,Fa.jsx)("p",{className:"text-gray-500",children:"No stock alerts match your filters."}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Fa.jsx)("thead",{className:"bg-light-gray",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Product Name"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Category"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Stock Level"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Alert Threshold"})]})}),(0,Fa.jsx)("tbody",{className:"divide-y divide-gray-200",children:C.map(e=>{var t;return(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap",children:e.name}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap",children:(null===(t=e.category)||void 0===t?void 0:t.name)||"N/A"}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-red-600 font-bold",children:e.stockLevel}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap",children:e.stockAlertThreshold})]},e._id)})})]})})]})},H_=Se("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),z_=Se("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const W_=function(){const[e,t]=(0,r.useState)(""),[n,a]=(0,r.useState)(""),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(!1);return(0,Fa.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800",children:"Add New Shop"}),(0,Fa.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),A(""),f("");try{await Ea.post("/admin/shops",JSON.stringify({name:e,location:n,shopPhoneNumber:s,username:o,password:c}),{headers:{"Content-Type":"application/json"},withCredentials:!0}),A('Shop "'.concat(e,'" created successfully! The shop worker can log in with username: ').concat(o,".")),t(""),a(""),i(""),l(""),u("")}catch(p){var d,h;f((null===(d=p.response)||void 0===d||null===(h=d.data)||void 0===h?void 0:h.message)||"Failed to add shop. Please check the form data."),console.error(p)}},className:"space-y-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"shopName",children:"Shop Name"}),(0,Fa.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"shopName",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"shopPhoneNumber",children:"Shop Phone Number"}),(0,Fa.jsx)("input",{type:"tel",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"shopPhoneNumber",value:s,onChange:e=>i(e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"shopLocation",children:"Shop Location"}),(0,Fa.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"shopLocation",value:n,onChange:e=>a(e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username",children:"Shop Worker Username"}),(0,Fa.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"username",value:o,onChange:e=>l(e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Shop Worker Password"}),(0,Fa.jsx)("input",{type:p?"text":"password",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline pr-10",id:"password",value:c,onChange:e=>u(e.target.value),required:!0}),(0,Fa.jsx)("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/1 text-gray-500",onClick:()=>m(!p),children:p?(0,Fa.jsx)(H_,{size:20}):(0,Fa.jsx)(z_,{size:20})})]}),(0,Fa.jsx)("button",{type:"submit",className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Add Shop"})]}),d&&(0,Fa.jsx)("p",{className:"mt-4 text-green-500",children:d}),h&&(0,Fa.jsx)("p",{className:"mt-4 text-red-500",children:h})]})},V_="/admin/shops";const K_=function(){const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),[s,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)({}),[d,A]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get(V_,{headers:{"Content-Type":"application/json"},withCredentials:!0});t(e.data)}catch(e){i("Failed to fetch shops."),console.error(e)}finally{a(!1)}})()},[]);const p=()=>{l(null),u({}),A(!1),f(!1)},m=(e,t)=>{u((0,ye.A)((0,ye.A)({},c),{},{[t]:e.target.value}))};return n?(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading shops..."}):s?(0,Fa.jsx)("div",{className:"p-6 text-center text-red-500",children:s}):(0,Fa.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-gray-800",children:"Existing Shops"}),0===e.length?(0,Fa.jsx)("p",{children:"No shops found. Please add one."}):(0,Fa.jsx)("ul",{className:"divide-y divide-gray-200",children:e.map(n=>(0,Fa.jsxs)("li",{className:"py-4 flex flex-col items-start gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"font-medium text-gray-900",children:n.name}),n.user&&(0,Fa.jsxs)("p",{className:"text-sm text-gray-500",children:["Username: ",n.user.username]}),(0,Fa.jsxs)("p",{className:"text-sm text-gray-500",children:["Location: ",n.location]}),(0,Fa.jsxs)("p",{className:"text-sm text-gray-500",children:["Phone Number: ",n.shopPhoneNumber]})]}),(0,Fa.jsxs)("div",{className:"w-full flex justify-end items-center space-x-4 sm:w-auto sm:space-x-2",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{l(e._id),u((0,ye.A)((0,ye.A)({},e),{},{name:e.name||"",location:e.location||"",shopPhoneNumber:e.shopPhoneNumber||"",newPassword:"",confirmNewPassword:""})),A(!0),f(!1)})(n),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),(0,Fa.jsx)("button",{onClick:()=>(async n=>{if(window.confirm("Are you sure you want to delete this shop?"))try{await Ea.delete("".concat(V_,"/").concat(n),{withCredentials:!0}),t(e.filter(e=>e._id!==n))}catch(r){i("Failed to delete shop."),console.error(r)}})(n._id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},n._id))}),d&&(0,Fa.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Fa.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:p}),(0,Fa.jsxs)("div",{className:"relative m-4 bg-white rounded-lg shadow-lg w-full max-w-md p-4 sm:p-6",children:[(0,Fa.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Edit Shop"}),(0,Fa.jsxs)("div",{className:"space-y-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Shop Name"}),(0,Fa.jsx)("input",{type:"text",value:c.name||"",onChange:e=>m(e,"name"),className:"w-full border-gray-300 rounded-md shadow-sm"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Shop Phone Number"}),(0,Fa.jsx)("input",{type:"tel",value:c.shopPhoneNumber||"",onChange:e=>m(e,"shopPhoneNumber"),className:"w-full border-gray-300 rounded-md shadow-sm"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Shop Location"}),(0,Fa.jsx)("input",{type:"text",value:c.location||"",onChange:e=>m(e,"location"),className:"w-full border-gray-300 rounded-md shadow-sm"})]}),(0,Fa.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,Fa.jsx)("h4",{className:"text-md font-medium text-gray-800 mb-2",children:"Password Management"}),(0,Fa.jsx)("div",{className:"bg-blue-50 p-3 rounded-md mb-3",children:(0,Fa.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,Fa.jsx)("strong",{children:"Security Note:"})," Existing passwords are securely hashed and cannot be retrieved. Use the fields below to set a new password if needed."]})}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsx)("input",{type:h?"text":"password",value:c.newPassword||"",onChange:e=>m(e,"newPassword"),className:"w-full border-gray-300 rounded-md shadow-sm",placeholder:"Enter new password"}),c.newPassword&&(0,Fa.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 px-3 text-gray-500",onClick:()=>f(!h),children:h?"Hide":"Show"})]})]}),c.newPassword&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,Fa.jsx)("input",{type:"password",value:c.confirmNewPassword||"",onChange:e=>m(e,"confirmNewPassword"),className:"w-full border-gray-300 rounded-md shadow-sm",placeholder:"Confirm new password"})]})]})]}),(0,Fa.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,Fa.jsx)("button",{onClick:p,className:"px-4 py-2 rounded-md border border-gray-300 text-gray-700",children:"Cancel"}),(0,Fa.jsx)("button",{onClick:async()=>{if(c.newPassword&&c.newPassword!==c.confirmNewPassword)i("New passwords do not match.");else if(window.confirm("Are you sure you want to update this shop?"))try{const n={name:c.name,location:c.location,shopPhoneNumber:c.shopPhoneNumber};c.newPassword&&(n.password=c.newPassword);const r=await Ea.put("".concat(V_,"/").concat(o),n,{withCredentials:!0});t(e.map(e=>e._id===o?r.data:e)),p()}catch(n){i("Failed to update shop."),console.error(n)}},className:"px-4 py-2 rounded-md bg-indigo-600 text-white",children:"Update"})]})]})]})]})},G_=(e,t)=>{var n,r,a;(null===t||void 0===t?void 0:t.name)||null===e||void 0===e||null===(n=e.shop)||void 0===n||n.name,(null===t||void 0===t?void 0:t.address)||null===e||void 0===e||null===(r=e.shop)||void 0===r||r.address,(null===t||void 0===t?void 0:t.phone)||null===e||void 0===e||null===(a=e.shop)||void 0===a||a.phone;const s=null!==e&&void 0!==e&&e._id?e._id.slice(-8):"N/A",i=null!==e&&void 0!==e&&e.billDate?new Date(e.billDate).toLocaleDateString():"N/A",o=(null===e||void 0===e?void 0:e.paymentMethod)||"N/A",l=(null===e||void 0===e?void 0:e.customerName)||"N/A",c=(null===e||void 0===e?void 0:e.customerMobileNumber)||"N/A",u=(null===e||void 0===e?void 0:e.subtotal)||(null!==e&&void 0!==e&&e.items?e.items.reduce((e,t)=>e+(t.totalPrice||(t.unitPrice||t.price||0)*(t.quantity||0)),0):0),d=(null===e||void 0===e?void 0:e.tax)||0,A=(null===e||void 0===e?void 0:e.totalAmount)||u+d,h=(null===e||void 0===e?void 0:e.amountPaid)||0,f=(null===e||void 0===e?void 0:e.balance)||A-h,p=(null===e||void 0===e?void 0:e.gstPercentage)||0,m=(null===e||void 0===e?void 0:e.gstAmount)||0,g=(null===e||void 0===e||e.baseAmount,(null===e||void 0===e?void 0:e.discountType)||"none"),x=(null===e||void 0===e?void 0:e.discountValue)||0,v=(null===e||void 0===e?void 0:e.discountAmount)||0;if(!e||!e.items)return console.error("Invalid bill data:",e),void alert("Unable to generate PDF: Invalid bill data");const y=e.items.map(e=>{var t;return'\n    <tr>\n      <td style="padding: 6px 8px; border: 1px solid #ddd;">'.concat(e.productName||(null===(t=e.product)||void 0===t?void 0:t.name)||e.name||"N/A",'</td>\n      <td style="padding: 6px 8px; border: 1px solid #ddd; text-align: center;">').concat(e.quantity||0,'</td>\n      <td style="padding: 6px 8px; border: 1px solid #ddd; text-align: right;">\u20b9').concat((e.unitPrice||e.price||0).toFixed(2),'</td>\n      <td style="padding: 6px 8px; border: 1px solid #ddd; text-align: right;">\u20b9').concat((e.totalPrice||(e.unitPrice||e.price||0)*(e.quantity||0)).toFixed(2),"</td>\n    </tr>\n  ")}).join(""),b='\n    <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: auto; border: 1px solid #eee; box-shadow: 0 0 10px rgba(0,0,0,0.1);">\n      \x3c!-- Header with Logo and Company Info --\x3e\n      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #333; padding-bottom: 15px;">\n        <div>\n          <img src="'.concat(window.location.origin,'/sweethub-logo.png" alt="The Sweet Hub Logo" style="max-height: 60px; width: auto;">\n        </div>\n        <div style="text-align: right;">\n          <h1 style="color: #333; margin: 0; font-size: 24px;">The Sweet Hub</h1>\n          <p style="color: #666; font-size: 12px; margin: 5px 0;">156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006</p>\n          <p style="color: #666; font-size: 12px; margin: 5px 0;">Phone: 7339200636</p>\n        </div>\n      </div>\n      \n      <div style="text-align: center; margin-bottom: 20px;">\n        <h2 style="color: #333; margin: 0; font-size: 20px;">BILL</h2>\n      </div>\n      \n      \x3c!-- Compressed FROM and TO Information --\x3e\n      ').concat(e.fromInfo&&Object.values(e.fromInfo).some(e=>e)||e.toInfo&&Object.values(e.toInfo).some(e=>e)?'\n      <div style="display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 12px;">\n        \x3c!-- FROM Information --\x3e\n        '.concat(e.fromInfo?'\n        <div style="width: 48%;">\n          <h4 style="color: #333; margin: 0 0 8px 0; font-size: 13px; border-bottom: 1px solid #ddd; padding-bottom: 3px;">FROM:</h4>\n          <p style="font-weight: bold; margin: 3px 0;">'.concat(e.fromInfo.name||"",'</p>\n          <p style="margin: 3px 0;">').concat(e.fromInfo.address||"","</p>\n          ").concat(e.fromInfo.gstin?'<p style="margin: 3px 0;">GSTIN: '.concat(e.fromInfo.gstin,"</p>"):"","\n          ").concat(e.fromInfo.phone?'<p style="margin: 3px 0;">Phone: '.concat(e.fromInfo.phone,"</p>"):"","\n        </div>\n        "):"","\n        \n        \x3c!-- TO Information --\x3e\n        ").concat(e.toInfo?'\n        <div style="width: 48%;">\n          <h4 style="color: #333; margin: 0 0 8px 0; font-size: 13px; border-bottom: 1px solid #ddd; padding-bottom: 3px;">TO:</h4>\n          <p style="font-weight: bold; margin: 3px 0;">'.concat(e.toInfo.name||"",'</p>\n          <p style="margin: 3px 0;">').concat(e.toInfo.address||"","</p>\n          ").concat(e.toInfo.gstin?'<p style="margin: 3px 0;">GSTIN: '.concat(e.toInfo.gstin,"</p>"):"","\n          ").concat(e.toInfo.phone?'<p style="margin: 3px 0;">Phone: '.concat(e.toInfo.phone,"</p>"):"","\n        </div>\n        "):"","\n      </div>\n      "):"",'\n      \n      \x3c!-- Bill Details --\x3e\n      <div style="display: flex; justify-content: space-between; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 10px; font-size: 12px;">\n        <div>\n          <p><strong>Bill ID:</strong> ').concat(s,"</p>\n          <p><strong>Date:</strong> ").concat(i,"</p>\n          <p><strong>Customer:</strong> ").concat(l,'</p>\n        </div>\n        <div style="text-align: right;">\n          <p><strong>Mobile:</strong> ').concat(c,"</p>\n          <p><strong>Payment Method:</strong> ").concat(o,'</p>\n        </div>\n      </div>\n      \n      <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 12px;">\n        <thead>\n          <tr style="background-color: #f2f2f2;">\n            <th style="padding: 8px; border: 1px solid #ddd; text-align: left; font-size: 13px;">Item</th>\n            <th style="padding: 8px; border: 1px solid #ddd; text-align: center; font-size: 13px;">Qty</th>\n            <th style="padding: 8px; border: 1px solid #ddd; text-align: right; font-size: 13px;">Price</th>\n            <th style="padding: 8px; border: 1px solid #ddd; text-align: right; font-size: 13px;">Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          ').concat(y,'\n          <tr>\n            <td colspan="3" style="padding: 6px 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">Subtotal</td>\n            <td style="padding: 6px 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">\u20b9').concat(u.toFixed(2),"</td>\n          </tr>\n          ").concat(v>0?'\n          <tr>\n            <td colspan="3" style="padding: 6px 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">\n              Discount '.concat("percentage"===g?"(".concat(x,"%)"):"",':\n            </td>\n            <td style="padding: 6px 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">-\u20b9').concat(v.toFixed(2),"</td>\n          </tr>\n          "):"",'\n          <tr>\n            <td colspan="3" style="padding: 6px 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">Net Amount</td>\n            <td style="padding: 6px 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">\u20b9').concat((u-v).toFixed(2),"</td>\n          </tr>\n          ").concat(p>0?'\n          <tr>\n            <td colspan="3" style="padding: 6px 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">GST ('.concat(p,'%)</td>\n            <td style="padding: 6px 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">\u20b9').concat(m.toFixed(2),"</td>\n          </tr>\n          "):"",'\n          <tr>\n            <td colspan="3" style="padding: 6px 8px; border: 1px solid #ddd; text-align: right; font-weight: bold; font-size: 13px;">Total Amount</td>\n            <td style="padding: 6px 8px; border: 1px solid #ddd; text-align: right; font-weight: bold; font-size: 13px;">\u20b9').concat(A.toFixed(2),"</td>\n          </tr>\n          ").concat(h>0?'\n          <tr>\n            <td colspan="3" style="padding: 6px 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">Amount Paid</td>\n            <td style="padding: 6px 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">\u20b9'.concat(h.toFixed(2),"</td>\n          </tr>\n          "):"","\n          ").concat(f>0?'\n          <tr>\n            <td colspan="3" style="padding: 6px 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">Balance</td>\n            <td style="padding: 6px 8px; border: 1px solid #ddd; text-align: right; font-weight: bold;">\u20b9'.concat(f.toFixed(2),"</td>\n          </tr>\n          "):"",'\n        </tbody>\n      </table>\n      \n      <div style="display: flex; justify-content: space-between; margin-top: 20px; font-size: 12px;">\n        <div>\n          <p><strong>Total Items:</strong> ').concat(e.items.length||0,'</p>\n        </div>\n      </div>\n      \n      <p style="text-align: center; margin-top: 30px; font-style: italic; color: #777; font-size: 12px;">Thank you for your business!</p>\n    </div>\n  '),w={margin:10,filename:"bill_".concat(s,"_").concat(i.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};U_()().from(b).set(w).save()};const q_=function(e){var t,n;let{baseUrl:a="/admin"}=e;const[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[d,A]=(0,r.useState)("admin"),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,x]=(0,r.useState)(""),[v,y]=(0,r.useState)({name:"Sri Sakthi Sweets Production Factory",address:"14/22 Anna Nagar, Salem, Tamil Nadu \u2013 636001",gstin:"33ABICS9876K1Z1",state:"Tamil Nadu",stateCode:"33",phone:"98765 43210",email:"sweetsfactory@gmail.com"}),[b,w]=(0,r.useState)({name:"",address:"",gstin:"",state:"",stateCode:"",phone:""}),[N,j]=(0,r.useState)({product:null,unit:"",quantity:"",price:0,productName:"",sku:""}),[C,B]=(0,r.useState)([]),[k,S]=(0,r.useState)(0),[E,F]=(0,r.useState)("none"),[_,I]=(0,r.useState)(""),[T,D]=(0,r.useState)(0),[L,U]=(0,r.useState)(0),[P,R]=(0,r.useState)(0),[O,M]=(0,r.useState)(0),[Q,H]=(0,r.useState)(0),[z,W]=(0,r.useState)("Cash"),[V,K]=(0,r.useState)(""),[G,q]=(0,r.useState)(""),[X,Y]=(0,r.useState)(""),[J,Z]=(0,r.useState)(!0),[$,ee]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/admin/settings/gst");R(e.data.gstPercentage||0)}catch(X){console.error("Error fetching GST settings:",X)}})()},[]);const te=(0,r.useCallback)(async()=>{Z(!0);try{const e="admin"===d?{showAdmin:!0}:{shopId:d},t=[Ea.get("".concat(a,"/products"),{params:e,withCredentials:!0})];"/admin"===a&&t.push(Ea.get("/admin/shops",{withCredentials:!0}));const n=await Promise.all(t);i(n[0].data),n.length>1&&u(n[1].data)}catch(e){Y("Failed to fetch data."),console.error("Error fetching data:",e),console.error("Error response:",e.response),console.error("Error request:",e.request)}finally{Z(!1)}},[a,d]);(0,r.useEffect)(()=>{console.log("Calling fetchProductsAndShops"),te()},[te]),(0,r.useEffect)(()=>{const e=C.reduce((e,t)=>e+t.quantity*t.price,0);S(e);let t=0;if("percentage"===E&&_){const n=parseFloat(_);!isNaN(n)&&n>=0&&n<=100&&(t=e*n/100)}else if("cash"===E&&_){const n=parseFloat(_);!isNaN(n)&&n>=0&&n<=e&&(t=n)}D(t);const n=e-t;if(U(n),P>0){M(n-n/(1+P/100)),H(n)}else M(0),H(n)},[C,E,_,P]);const ne=e=>{const t=e.replace(/\D/g,"");return 10===t.length?"+91".concat(t):e};return J?(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading data..."}):(0,Fa.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-md",children:[(0,Fa.jsx)("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-text-primary",children:"Create Bill"}),(0,Fa.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h4",{className:"text-lg sm:text-xl font-medium text-gray-700 mb-3",children:"Customer Details"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-text-secondary text-sm font-medium mb-1",htmlFor:"mobileNumber",children:"Customer Mobile Number"}),(0,Fa.jsx)("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",id:"mobileNumber",value:h,onChange:e=>{let t=e.target.value;t=t.replace(/\D/g,""),t.length>10&&(t=t.slice(0,10)),f(t)},required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"customerName",children:"Customer Name"}),(0,Fa.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"customerName",value:p,onChange:e=>m(e.target.value),required:!0})]})]})]}),"/admin"===a&&(0,Fa.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h4",{className:"text-lg font-semibold text-text-primary mb-3",children:"Select Shop"}),(0,Fa.jsxs)("select",{className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:d,onChange:e=>A(e.target.value),required:"/admin"===a,children:[(0,Fa.jsx)("option",{value:"admin",children:"Admin Bills"}),c.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),"/admin"===a&&(0,Fa.jsxs)("div",{className:"mb-6",children:[(0,Fa.jsx)("h4",{className:"text-lg font-semibold text-text-primary mb-3",children:"FROM & TO Information (Optional)"}),(0,Fa.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,Fa.jsxs)("div",{className:"flex-1 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h5",{className:"text-md font-semibold text-text-primary mb-3",children:"FROM (Sweet Production Factory) - Optional"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{className:"relative group",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Fa.jsx)("input",{type:"text",value:v.name,onChange:e=>y((0,ye.A)((0,ye.A)({},v),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Fa.jsx)("input",{type:"text",value:v.address,onChange:e=>y((0,ye.A)((0,ye.A)({},v),{},{address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GSTIN"}),(0,Fa.jsx)("input",{type:"text",value:v.gstin,onChange:e=>y((0,ye.A)((0,ye.A)({},v),{},{gstin:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,Fa.jsx)("input",{type:"text",value:v.state,onChange:e=>y((0,ye.A)((0,ye.A)({},v),{},{state:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Code"}),(0,Fa.jsx)("input",{type:"text",value:v.stateCode,onChange:e=>y((0,ye.A)((0,ye.A)({},v),{},{stateCode:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,Fa.jsx)("input",{type:"text",value:v.phone,onChange:e=>y((0,ye.A)((0,ye.A)({},v),{},{phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{className:"md:col-span-2",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Fa.jsx)("input",{type:"email",value:v.email,onChange:e=>y((0,ye.A)((0,ye.A)({},v),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,Fa.jsxs)("div",{className:"flex-1 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h5",{className:"text-md font-semibold text-text-primary mb-3",children:"TO (Customer/Business) - Optional"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{className:"relative group",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Fa.jsx)("input",{type:"text",value:b.name,onChange:e=>w((0,ye.A)((0,ye.A)({},b),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Fa.jsx)("input",{type:"text",value:b.address,onChange:e=>w((0,ye.A)((0,ye.A)({},b),{},{address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GSTIN"}),(0,Fa.jsx)("input",{type:"text",value:b.gstin,onChange:e=>w((0,ye.A)((0,ye.A)({},b),{},{gstin:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,Fa.jsx)("input",{type:"text",value:b.state,onChange:e=>w((0,ye.A)((0,ye.A)({},b),{},{state:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Code"}),(0,Fa.jsx)("input",{type:"text",value:b.stateCode,onChange:e=>w((0,ye.A)((0,ye.A)({},b),{},{stateCode:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,Fa.jsx)("input",{type:"text",value:b.phone,onChange:e=>w((0,ye.A)((0,ye.A)({},b),{},{phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]})]})]})]}),(0,Fa.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Add Products"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,Fa.jsxs)("div",{className:"md:col-span-2",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Product"}),(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsx)("input",{type:"text",value:g,onChange:e=>{const t=e.target.value;if(x(t),t){const e=s.filter(e=>e.name&&e.name.toLowerCase().includes(t.toLowerCase())||e.sku&&e.sku.toLowerCase().includes(t.toLowerCase()));l(e)}else l([])},placeholder:"Search by name or SKU...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),o.length>0&&(0,Fa.jsx)("ul",{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:o.map(e=>(0,Fa.jsx)("li",{className:"relative cursor-default select-none py-2 pl-3 pr-9 hover:bg-indigo-600 hover:text-white",onClick:()=>(e=>{x("".concat(e.name," (").concat(e.sku,")")),l([]),e.prices&&e.prices.length>0?(j({product:e,unit:e.prices[0].unit,quantity:"",price:e.prices[0].sellingPrice,productName:e.name,sku:e.sku}),Y("")):(Y('Product "'.concat(e.name,'" has no purchase rates set. Please add them first.')),j({product:null,unit:"",quantity:"",price:0,productName:"",sku:""}))})(e),children:(0,Fa.jsxs)("div",{className:"flex",children:[(0,Fa.jsx)("span",{className:"font-normal truncate",children:e.name}),(0,Fa.jsxs)("span",{className:"ml-2 text-gray-500",children:["(",e.sku,")"]})]})},"".concat(e._id,"-").concat(e.sku)))})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,Fa.jsx)("select",{value:N.unit,onChange:e=>{const t=e.target.value,n=N.product.prices.find(e=>e.unit===t);n&&j(e=>(0,ye.A)((0,ye.A)({},e),{},{unit:n.unit,price:n.sellingPrice}))},disabled:!N.product,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-200",children:null===(t=N.product)||void 0===t||null===(n=t.prices)||void 0===n?void 0:n.map(e=>(0,Fa.jsx)("option",{value:e.unit,children:e.unit},e.unit))})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,Fa.jsx)("input",{type:"text",value:N.quantity,onChange:e=>{const t=e.target.value;if(""===t)j(e=>(0,ye.A)((0,ye.A)({},e),{},{quantity:""}));else{const e=parseInt(t,10);!isNaN(e)&&e>0&&j(t=>(0,ye.A)((0,ye.A)({},t),{},{quantity:e}))}},disabled:!N.product,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-200",min:"1"})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),(0,Fa.jsx)("input",{type:"text",value:N.price,readOnly:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm"})]}),(0,Fa.jsx)("div",{className:"md:col-span-2 flex items-end",children:(0,Fa.jsx)("button",{type:"button",onClick:()=>{const e=""===N.quantity?1:N.quantity;if(!N.product||e<=0)return void Y("Please select a valid product and quantity.");const t={product:N.product._id,productName:N.productName,sku:N.sku,unit:N.unit,quantity:e,price:N.price},n=C.findIndex(e=>e.product===t.product&&e.unit===t.unit);if(n>-1){const e=[...C];e[n].quantity+=t.quantity,B(e)}else B([...C,t]);x(""),j({product:null,unit:"",quantity:"",price:0,productName:"",sku:""}),Y("")},disabled:!N.product,className:"w-full px-4 py-2 bg-blue-600 text-white font-semibold rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400",children:"Add Item"})})]}),X&&!X.includes("purchase rates")&&(0,Fa.jsx)("div",{className:"mt-2 text-red-500 text-sm",children:X})]}),C.length>0&&(0,Fa.jsx)("div",{className:"mt-6 overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Product"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"SKU"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Unit"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Quantity"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Price"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Total"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map((e,t)=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.productName}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.sku}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.unit}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.quantity}),(0,Fa.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",e.price.toFixed(2)]}),(0,Fa.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",(e.quantity*e.price).toFixed(2)]}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Fa.jsx)("button",{onClick:()=>(e=>{const t=C.filter((t,n)=>n!==e);B(t)})(t),className:"text-red-600 hover:text-red-900",children:"Remove"})})]},t))})]})}),(0,Fa.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Discount"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Type"}),(0,Fa.jsxs)("select",{value:E,onChange:e=>F(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,Fa.jsx)("option",{value:"none",children:"No Discount"}),(0,Fa.jsx)("option",{value:"percentage",children:"Percentage (%)"}),(0,Fa.jsx)("option",{value:"cash",children:"Cash (\u20b9)"})]})]}),"none"!==E&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"percentage"===E?"Discount Percentage":"Discount Amount"}),(0,Fa.jsx)("input",{type:"text",value:_,onChange:e=>I(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",min:"0",step:"0.01",max:"percentage"===E?"100":k})]}),(0,Fa.jsx)("div",{className:"flex items-end",children:(0,Fa.jsx)("div",{className:"text-sm",children:(0,Fa.jsxs)("p",{className:"font-medium",children:["Discount Amount: \u20b9",T.toFixed(2)]})})})]})]}),(0,Fa.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Bill Summary"}),(0,Fa.jsxs)("div",{className:"space-y-2",children:[(0,Fa.jsxs)("div",{className:"flex justify-between",children:[(0,Fa.jsx)("span",{children:"Subtotal:"}),(0,Fa.jsxs)("span",{children:["\u20b9",k.toFixed(2)]})]}),T>0&&(0,Fa.jsxs)("div",{className:"flex justify-between",children:[(0,Fa.jsx)("span",{children:"Discount:"}),(0,Fa.jsxs)("span",{children:["-\u20b9",T.toFixed(2)]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between",children:[(0,Fa.jsx)("span",{children:"Net Amount:"}),(0,Fa.jsxs)("span",{children:["\u20b9",L.toFixed(2)]})]}),P>0&&(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("div",{className:"flex justify-between",children:[(0,Fa.jsxs)("span",{children:["GST (",P,"%):"]}),(0,Fa.jsxs)("span",{children:["\u20b9",O.toFixed(2)]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,Fa.jsx)("span",{children:"Total Amount:"}),(0,Fa.jsxs)("span",{children:["\u20b9",Q.toFixed(2)]})]})]}),0===P&&(0,Fa.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,Fa.jsx)("span",{children:"Total Amount:"}),(0,Fa.jsxs)("span",{children:["\u20b9",Q.toFixed(2)]})]})]})]}),(0,Fa.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Payment Details"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"paymentMethod",children:"Payment Method"}),(0,Fa.jsxs)("select",{id:"paymentMethod",value:z,onChange:e=>W(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,Fa.jsx)("option",{value:"Cash",children:"Cash"}),(0,Fa.jsx)("option",{value:"UPI",children:"UPI"}),(0,Fa.jsx)("option",{value:"Card",children:"Card"})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"amountPaid",children:"Amount Paid"}),(0,Fa.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"amountPaid",value:V,onChange:e=>K(e.target.value),required:!0})]})]}),(0,Fa.jsxs)("div",{className:"flex justify-end items-center mt-4",children:[(0,Fa.jsx)("span",{className:"text-lg font-bold text-gray-800 mr-4",children:"Balance:"}),(0,Fa.jsxs)("span",{className:"text-lg font-bold text-red-600",children:["\u20b9",(Q-Number(V)).toFixed(2)]})]})]}),(0,Fa.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[(0,Fa.jsx)("label",{htmlFor:"autoDownload",className:"text-gray-700 font-bold",children:"Auto Download Bill after Creation"}),(0,Fa.jsx)("input",{type:"checkbox",id:"autoDownload",checked:$,onChange:e=>ee(e.target.checked),className:"form-checkbox h-5 w-5 text-primary"})]}),(0,Fa.jsx)("button",{type:"submit",onClick:async e=>{if(e.preventDefault(),q(""),Y(""),"/admin"===a&&!d)return void Y("Please select a shop.");if(!h||!p)return void Y("Please enter customer details.");if(0===C.length)return void Y("Please add at least one item to the bill.");if("none"!==E&&_){const e=parseFloat(_);if(isNaN(e))return void Y("Please enter a valid discount value.");if("percentage"===E&&(e<0||e>100))return void Y("Percentage discount must be between 0 and 100.");if("cash"===E&&(e<0||e>k))return void Y("Cash discount cannot be negative or exceed subtotal.")}const t=Number(V);if(t<Q)return void Y("Amount paid cannot be less than total amount.");const n="".concat(a,"/billing");try{const e=(0,ye.A)((0,ye.A)((0,ye.A)({customerMobileNumber:ne(h),customerName:p,items:C,baseAmount:L,gstPercentage:P,gstAmount:O,totalAmount:Q,paymentMethod:z,amountPaid:t},"/admin"===a&&"admin"!==d&&{shopId:d}),"/admin"===a&&{fromInfo:v,toInfo:b}),{},{discountType:E,discountValue:_?parseFloat(_):0,discountAmount:T}),r=await Ea.post(n,JSON.stringify(e),{headers:{"Content-Type":"application/json"},withCredentials:!0});if(q("Bill created successfully!"),$){const e="/shop"===a?{name:"Tech Shop"}:c.find(e=>e._id===d);G_((0,ye.A)((0,ye.A)({},r.data),{},{fromInfo:v,toInfo:b}),e)}f(""),m(""),B([]),S(0),F("none"),I(""),D(0),U(0),H(0),K(""),x(""),j({product:null,unit:"",quantity:"",price:0,productName:"",sku:""})}catch(i){var r,s;Y((null===(r=i.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Failed to create bill. Please try again."),console.error(i)}},className:"w-full bg-primary hover:bg-primary-dark text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:shadow-outline",children:"Create Bill"}),G&&(0,Fa.jsx)("p",{className:"mt-4 text-green-500",children:G}),X&&(0,Fa.jsx)("p",{className:"mt-4 text-red-500",children:X})]})},X_=e=>{var t,n,r,a,s,i;let{bill:o,onClose:l}=e;return o?(0,Fa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Fa.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,Fa.jsxs)("div",{className:"p-6",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,Fa.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Bill Details"}),(0,Fa.jsx)("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"FROM & TO Information (Optional)"}),(0,Fa.jsx)("p",{className:"text-sm text-gray-500",children:"The following information is optional and may not be present on all bills."})]}),(o.fromInfo||o.toInfo)&&(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[o.fromInfo&&(0,Fa.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"FROM (Sweet Production Factory)"}),(0,Fa.jsx)("p",{className:"text-gray-600 font-medium",children:o.fromInfo.name||""}),(0,Fa.jsx)("p",{className:"text-gray-600",children:o.fromInfo.address||""}),o.fromInfo.gstin&&(0,Fa.jsxs)("p",{className:"text-gray-600",children:["GSTIN: ",o.fromInfo.gstin]}),o.fromInfo.state&&(0,Fa.jsxs)("p",{className:"text-gray-600",children:["State: ",o.fromInfo.state]}),o.fromInfo.stateCode&&(0,Fa.jsxs)("p",{className:"text-gray-600",children:["State Code: ",o.fromInfo.stateCode]}),o.fromInfo.phone&&(0,Fa.jsxs)("p",{className:"text-gray-600",children:["Phone: ",o.fromInfo.phone]}),o.fromInfo.email&&(0,Fa.jsxs)("p",{className:"text-gray-600",children:["Email: ",o.fromInfo.email]})]}),o.toInfo&&(0,Fa.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"TO (Receiving Branch / Shop)"}),(0,Fa.jsx)("p",{className:"text-gray-600 font-medium",children:o.toInfo.name||""}),(0,Fa.jsx)("p",{className:"text-gray-600",children:o.toInfo.address||""}),o.toInfo.gstin&&(0,Fa.jsxs)("p",{className:"text-gray-600",children:["GSTIN: ",o.toInfo.gstin]}),o.toInfo.state&&(0,Fa.jsxs)("p",{className:"text-gray-600",children:["State: ",o.toInfo.state]}),o.toInfo.stateCode&&(0,Fa.jsxs)("p",{className:"text-gray-600",children:["State Code: ",o.toInfo.stateCode]}),o.toInfo.phone&&(0,Fa.jsxs)("p",{className:"text-gray-600",children:["Phone: ",o.toInfo.phone]})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-gray-50 rounded-lg",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Bill Information"}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Bill ID:"})," ",o._id]}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Date:"})," ",new Date(o.billDate).toLocaleDateString()]}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Payment Method:"})," ",o.paymentMethod]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Customer Information"}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Name:"})," ",o.customerName]}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Mobile:"})," ",o.customerMobileNumber]})]})]}),(0,Fa.jsxs)("div",{className:"mb-8",children:[(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Purchased Items"}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.items.map((e,t)=>{var n,r,a;return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.productName||(e.product?e.product.name:"[Deleted Product]")}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.unit||(e.product?e.product.unit:"N/A")}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.quantity}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["\u20b9",(null===(n=e.price)||void 0===n?void 0:n.toFixed(2))||(null===(r=e.unitPrice)||void 0===r?void 0:r.toFixed(2))||"0.00"]}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["\u20b9",(null===(a=e.totalPrice)||void 0===a?void 0:a.toFixed(2))||((e.price||e.unitPrice||0)*e.quantity).toFixed(2)]})]},t)})})]})})]}),(0,Fa.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,Fa.jsx)("div",{className:"flex justify-end",children:(0,Fa.jsxs)("div",{className:"w-full max-w-xs",children:[o.gstPercentage>0?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Base Amount:"}),(0,Fa.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(t=o.baseAmount)||void 0===t?void 0:t.toFixed(2))||"0.00"]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Fa.jsxs)("span",{className:"text-gray-600",children:["GST (",o.gstPercentage,"%):"]}),(0,Fa.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(n=o.gstAmount)||void 0===n?void 0:n.toFixed(2))||"0.00"]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between py-2 border-t border-gray-300 mt-2",children:[(0,Fa.jsx)("span",{className:"text-lg font-bold text-gray-800",children:"Total Amount:"}),(0,Fa.jsxs)("span",{className:"text-lg font-bold text-gray-800",children:["\u20b9",(null===(r=o.totalAmount)||void 0===r?void 0:r.toFixed(2))||"0.00"]})]})]}):(0,Fa.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Total Amount:"}),(0,Fa.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(a=o.totalAmount)||void 0===a?void 0:a.toFixed(2))||"0.00"]})]}),o.amountPaid>0&&(0,Fa.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Amount Paid:"}),(0,Fa.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(s=o.amountPaid)||void 0===s?void 0:s.toFixed(2))||"0.00"]})]}),o.balance>0&&(0,Fa.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Balance:"}),(0,Fa.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(i=o.balance)||void 0===i?void 0:i.toFixed(2))||"0.00"]})]})]})})})]})})}):null};const Y_=function(e){let{baseUrl:t="/admin"}=e;const[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)("All"),[p,m]=(0,r.useState)(""),[g,x]=(0,r.useState)(""),[v,y]=(0,r.useState)([]),[b,w]=(0,r.useState)("admin"),[N,j]=(0,r.useState)(null),[C,B]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{"/admin"===t&&(async()=>{try{const e=await Ea.get("/admin/shops",{withCredentials:!0});y(e.data)}catch(e){console.error("Failed to fetch shops:",e)}})(),(async()=>{try{let e={};"admin"===b?e={showAdmin:!0}:b&&(e={shopId:b});const n=[...(await Ea.get("".concat(t,"/billing"),{params:e,headers:{"Content-Type":"application/json"},withCredentials:!0})).data].sort((e,t)=>{const n=e.billDate?new Date(e.billDate).getTime():1e3*parseInt(e._id.slice(0,8),16);return(t.billDate?new Date(t.billDate).getTime():1e3*parseInt(t._id.slice(0,8),16))-n});a(n)}catch(e){u("Failed to fetch bills."),console.error(e)}finally{l(!1)}})()},[t,b]),(0,r.useEffect)(()=>{let e=[...n];if(d&&(e=e.filter(e=>e.customerName.toLowerCase().includes(d.toLowerCase())||e.customerMobileNumber.includes(d))),"All"!==h&&(e=e.filter(e=>e.paymentMethod===h)),p){const t=new Date(p).getTime();e=e.filter(e=>new Date(e.billDate).getTime()>=t)}if(g){const t=new Date(g).getTime();e=e.filter(e=>new Date(e.billDate).getTime()<=t+864e5)}i(e)},[n,d,h,p,g]),o?(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading bills..."}):c?(0,Fa.jsx)("div",{className:"p-6 text-center text-red-500",children:c}):(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800",children:"View Bills"}),"/admin"===t&&(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Filter by Shop"}),(0,Fa.jsxs)("select",{value:b,onChange:e=>w(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Fa.jsx)("option",{value:"admin",children:"Admin Bills Only"}),v.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Fa.jsx)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:(0,Fa.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Search"}),(0,Fa.jsx)("input",{type:"text",placeholder:"Search by name or number...",value:d,onChange:e=>A(e.target.value),className:"w-full px-4 py-2 border rounded-lg"})]}),(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Payment Method"}),(0,Fa.jsxs)("select",{value:h,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 border rounded-lg",children:[(0,Fa.jsx)("option",{value:"All",children:"All"}),(0,Fa.jsx)("option",{value:"Cash",children:"Cash"}),(0,Fa.jsx)("option",{value:"UPI",children:"UPI"}),(0,Fa.jsx)("option",{value:"Card",children:"Card"})]})]}),(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"From Date"}),(0,Fa.jsx)("input",{type:"date",value:p,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 border rounded-lg"})]}),(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"To Date"}),(0,Fa.jsx)("input",{type:"date",value:g,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border rounded-lg"})]})]})}),0===s.length?(0,Fa.jsx)("p",{children:"No bills found."}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bill ID"}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items Purchased"}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),(0,Fa.jsx)("td",{className:"hidden md:table-cell px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bill Date"}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e._id.slice(-8)}),(0,Fa.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,Fa.jsx)("div",{children:e.customerName}),(0,Fa.jsx)("div",{children:e.customerMobileNumber})]}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.items.map(e=>(0,Fa.jsxs)("div",{children:[e.productName||(e.product?e.product.name:"[Deleted Product]")," (",e.quantity," ",e.unit||(e.product?e.product.unit:"unit"),")"]},e._id))}),(0,Fa.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,Fa.jsxs)("div",{children:["\u20b9",e.totalAmount.toFixed(2)]}),(0,Fa.jsxs)("div",{className:"text-xs text-gray-400",children:["(",e.paymentMethod,")"]})]}),(0,Fa.jsx)("td",{className:"hidden md:table-cell px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.billDate).toLocaleDateString()}),(0,Fa.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{j(e),B(!0)})(e),className:"text-blue-600 hover:text-blue-900 bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded-md transition-colors duration-200",children:"View"}),(0,Fa.jsx)("button",{onClick:()=>(e=>{const t="admin"===b?{name:"Admin Shop",address:"Main Admin Location",phone:"7339200636"}:v.find(e=>e._id===b)||e.shop;G_(e,t)})(e),className:"text-green-600 hover:text-green-900 bg-green-100 hover:bg-green-200 px-3 py-1 rounded-md transition-colors duration-200",children:"Generate Invoice"})]})]},e._id))})]})}),C&&N&&(0,Fa.jsx)(X_,{bill:N,onClose:()=>B(!1)})]})},J_=e=>{let{type:t,message:n,onClose:a}=e;const s={success:"bg-green-100 border-green-400 text-green-700",error:"bg-red-100 border-red-400 text-red-700",info:"bg-blue-100 border-blue-400 text-blue-700",warning:"bg-yellow-100 border-yellow-400 text-yellow-700"}[t]||"bg-gray-100 border-gray-400 text-gray-700",i={success:mt,error:tn,info:Ft,warning:Ft}[t];return(0,r.useEffect)(()=>{if(n&&a){const e=setTimeout(()=>{a()},5e3);return()=>clearTimeout(e)}},[n,a]),n?(0,Fa.jsxs)("div",{className:"flex items-center justify-between p-4 mb-4 rounded-md border ".concat(s," animate-fade-in"),role:"alert",children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[i&&(0,Fa.jsx)(i,{className:"mr-3 text-xl"}),(0,Fa.jsx)("p",{className:"text-sm font-medium",children:n})]}),(0,Fa.jsx)("button",{onClick:a,className:"text-current hover:opacity-75 focus:outline-none",children:(0,Fa.jsx)(tn,{size:20})})]}):null},Z_=()=>{var e;const[t,n]=(0,r.useState)([]),[a,s]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(""),[A,h]=(0,r.useState)(0),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(null),[x,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(""),[w,N]=(0,r.useState)(0),[j,C]=(0,r.useState)(null),[B,k]=(0,r.useState)(null),[S,E]=(0,r.useState)(!1),[F,_]=(0,r.useState)(""),[I,T]=(0,r.useState)([]),[D,L]=(0,r.useState)([]),[U,P]=(0,r.useState)(""),[R,O]=(0,r.useState)(!1),[M,Q]=(0,r.useState)(!1),[H,z]=(0,r.useState)(null),[W,V]=(0,r.useState)(null),[K,G]=(0,r.useState)(!1),[q,X]=(0,r.useState)(""),Y=(0,r.useCallback)(async()=>{try{const e=await Ea.get("/admin/tasks/topics");n(e.data.data)}catch(r){var e,t;z({type:"error",message:(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch topics."})}},[]),J=(0,r.useCallback)(async()=>{try{const e=await Ea.get("/admin/tasks/daily");s(e.data.data)}catch(n){var e,t;z({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch assigned tasks."})}},[]),Z=(0,r.useCallback)(async()=>{try{const e=await Ea.get("/admin/tasks/departments");o(e.data.data)}catch(n){var e,t;z({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch departments."})}},[]),$=(0,r.useCallback)(async()=>{try{const e=await Ea.get("/admin/tasks/workers");c(e.data.data)}catch(n){var e,t;z({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch workers."})}},[]);(0,r.useEffect)(()=>{Y(),J(),Z(),$()},[Y,J,Z,$]);const ee=()=>{d(""),h(0),p(""),g(null)},te=()=>{b(""),N(0),C(null)},ne=()=>{_(""),T([]),L([]),P(""),O(!1)},re=e=>{const{value:t,checked:n}=e.target;L(n?e=>[...e,t]:e=>e.filter(e=>e!==t))},ae=e=>{const{value:t,checked:n}=e.target;T(n?e=>[...e,t]:e=>e.filter(e=>e!==t))},se=U?l.filter(e=>{var t;return(null===(t=e.department)||void 0===t?void 0:t._id)===U}):l,ie=F&&(null===(e=t.find(e=>e._id===F))||void 0===e?void 0:e.subTopics)||[];return(0,Fa.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,Fa.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Daily Tasks Management"}),H&&(0,Fa.jsx)(J_,{type:H.type,message:H.message,onClose:()=>z(null)}),(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Fa.jsxs)("button",{onClick:()=>{ee(),v(!0)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200 shadow-md",children:[(0,Fa.jsx)(Pt,{className:"mr-2"})," Add New Topic"]}),(0,Fa.jsxs)("button",{onClick:()=>{ne(),Q(!0)},className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors duration-200 shadow-md",children:[(0,Fa.jsx)(Ht,{className:"mr-2"})," Assign Task"]})]}),(0,Fa.jsx)("hr",{className:"my-6"}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Pending Tasks"}),(0,Fa.jsx)("div",{className:"overflow-x-auto rounded-lg shadow",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-100",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.length>0?a.map(e=>{var t;return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.worker?e.worker.name:"N/A"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.department?e.department.name:"N/A"}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[null===(t=e.topic)||void 0===t?void 0:t.name," ",e.subTopicName?" - ".concat(e.subTopicName):""]}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.points}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Fa.jsxs)("button",{onClick:()=>{return t=e._id,X("Are you sure you want to mark this task as completed?"),V(()=>async()=>{try{await Ea.put("/admin/tasks/complete/".concat(t)),z({type:"success",message:"Task marked as completed successfully!"}),J()}catch(r){var e,n;z({type:"error",message:(null===(e=r.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||"Failed to mark task as completed."})}finally{G(!1)}}),void G(!0);var t},className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,Fa.jsx)(gt,{className:"mr-2"})," Complete"]})})]},e._id)}):(0,Fa.jsx)("tr",{children:(0,Fa.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No pending tasks found."})})})]})})]}),(0,Fa.jsx)("hr",{className:"my-6"}),(0,Fa.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Task Topics"}),(0,Fa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,Fa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Fa.jsx)("h3",{className:"text-xl font-semibold text-gray-700",children:e.name}),(0,Fa.jsxs)("div",{className:"flex space-x-2",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{var t;g(e),d(e.name),h(e.points),p((null===(t=e.department)||void 0===t?void 0:t._id)||""),v(!0)})(e),className:"p-2 rounded-full bg-yellow-100 text-yellow-700 hover:bg-yellow-200 transition-colors",children:(0,Fa.jsx)(Ut,{size:18})}),(0,Fa.jsx)("button",{onClick:()=>(e=>{X("Are you sure you want to delete this topic? All associated sub-topics and assigned tasks will also be deleted."),V(()=>async()=>{try{await Ea.delete("/admin/tasks/topics/".concat(e)),z({type:"success",message:"Task topic deleted successfully!"}),Y()}catch(r){var t,n;z({type:"error",message:(null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to delete topic."})}finally{G(!1)}}),G(!0)})(e._id),className:"p-2 rounded-full bg-red-100 text-red-700 hover:bg-red-200 transition-colors",children:(0,Fa.jsx)(Kt,{size:18})})]})]}),(0,Fa.jsxs)("p",{className:"text-gray-600 text-sm mb-2",children:["Department: ",e.department?e.department.name:"All Departments"," | Points: ",e.points]}),(0,Fa.jsxs)("details",{className:"group mt-4",children:[(0,Fa.jsxs)("summary",{className:"flex items-center justify-between cursor-pointer text-blue-600 hover:text-blue-800 font-medium",children:["Sub-topics (",e.subTopics.length,")",(0,Fa.jsx)("span",{className:"transform transition-transform duration-200 group-open:rotate-90",children:"\u25b6"})]}),(0,Fa.jsxs)("div",{className:"pt-2 pl-4 space-y-2",children:[e.subTopics.length>0?e.subTopics.map(t=>(0,Fa.jsxs)("div",{className:"flex justify-between items-center text-gray-700 text-sm bg-white p-2 rounded-md shadow-xs border border-gray-100",children:[(0,Fa.jsxs)("span",{children:[t.name," (",t.points," pts)"]}),(0,Fa.jsxs)("div",{className:"flex space-x-1",children:[(0,Fa.jsx)("button",{onClick:()=>((e,t)=>{k(e),C(t),b(t.name),N(t.points),E(!0)})(e,t),className:"p-1 rounded-full text-yellow-600 hover:bg-yellow-100 transition-colors",children:(0,Fa.jsx)(Ut,{size:16})}),(0,Fa.jsx)("button",{onClick:()=>{return n=e._id,r=t._id,X("Are you sure you want to delete this sub-topic? All associated assigned tasks will also be deleted."),V(()=>async()=>{try{await Ea.delete("/admin/tasks/topics/".concat(n,"/subtopics/").concat(r)),z({type:"success",message:"Sub-topic deleted successfully!"}),Y()}catch(a){var e,t;z({type:"error",message:(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to delete sub-topic."})}finally{G(!1)}}),void G(!0);var n,r},className:"p-1 rounded-full text-red-600 hover:bg-red-100 transition-colors",children:(0,Fa.jsx)(Kt,{size:16})})]})]},t._id)):(0,Fa.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No sub-topics defined for this topic."}),(0,Fa.jsxs)("button",{onClick:()=>(e=>{k(e),te(),E(!0)})(e),className:"flex items-center mt-3 px-3 py-1 bg-blue-500 text-white text-sm rounded-md hover:bg-blue-600 transition-colors",children:[(0,Fa.jsx)(Pt,{className:"mr-1"})," Add Sub-Topic"]})]})]})]},e._id))}),(0,Fa.jsx)(Ys,{isOpen:x,onClose:()=>v(!1),title:m?"Edit Task Topic":"Add New Task Topic",children:(0,Fa.jsxs)("div",{className:"space-y-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Topic Name:"}),(0,Fa.jsx)("input",{type:"text",className:"shadow appearance-none border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",value:u,onChange:e=>d(e.target.value),placeholder:"Enter topic name"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Points:"}),(0,Fa.jsx)("input",{type:"number",className:"shadow appearance-none border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",value:A,onChange:e=>h(Number(e.target.value)),min:"0"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Department (Optional):"}),(0,Fa.jsxs)("select",{className:"shadow border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",value:f,onChange:e=>p(e.target.value),children:[(0,Fa.jsx)("option",{value:"",children:"All Departments"}),i.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Fa.jsx)("button",{onClick:async()=>{try{const e={name:u,points:A,department:f||null};m?(await Ea.put("/admin/tasks/topics/".concat(m._id),e),z({type:"success",message:"Task topic updated successfully!"})):(await Ea.post("/admin/tasks/topics",e),z({type:"success",message:"Task topic created successfully!"})),v(!1),ee(),Y()}catch(n){var e,t;z({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to save topic."})}},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors duration-200",children:m?"Update Topic":"Create Topic"})]})}),(0,Fa.jsx)(Ys,{isOpen:S,onClose:()=>E(!1),title:j?'Edit Sub-topic for "'.concat(null===B||void 0===B?void 0:B.name,'"'):'Add Sub-topic for "'.concat(null===B||void 0===B?void 0:B.name,'"'),children:(0,Fa.jsxs)("div",{className:"space-y-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Sub-topic Name:"}),(0,Fa.jsx)("input",{type:"text",className:"shadow appearance-none border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",value:y,onChange:e=>b(e.target.value),placeholder:"Enter sub-topic name"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Points:"}),(0,Fa.jsx)("input",{type:"number",className:"shadow appearance-none border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",value:w,onChange:e=>N(Number(e.target.value)),min:"0"})]}),(0,Fa.jsx)("button",{onClick:async()=>{if(!B||!B._id)return z({type:"error",message:"Cannot add sub-topic. The parent topic is not selected."}),void E(!1);try{const e={name:y,points:w};j?(await Ea.put("/admin/tasks/topics/".concat(B._id,"/subtopics/").concat(j._id),e),z({type:"success",message:"Sub-topic updated successfully!"})):(await Ea.post("/admin/tasks/topics/".concat(B._id,"/subtopics"),e),z({type:"success",message:"Sub-topic added successfully!"})),E(!1),te(),Y()}catch(n){var e,t;z({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to save sub-topic."})}},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors duration-200",children:j?"Update Sub-topic":"Add Sub-topic"})]})}),(0,Fa.jsx)(Ys,{isOpen:M,onClose:()=>Q(!1),title:"Assign New Task",children:(0,Fa.jsxs)("div",{className:"space-y-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Select Topic:"}),(0,Fa.jsxs)("select",{className:"shadow border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",value:F,onChange:e=>{_(e.target.value),T([])},children:[(0,Fa.jsx)("option",{value:"",children:"-- Select a Topic --"}),t.map(e=>(0,Fa.jsxs)("option",{value:e._id,children:[e.name," (",e.points," pts)"]},e._id))]})]}),F&&ie.length>0&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Select Sub-topics (Optional):"}),(0,Fa.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto border p-3 rounded-md",children:ie.map(e=>(0,Fa.jsxs)("label",{className:"flex items-center",children:[(0,Fa.jsx)("input",{type:"checkbox",value:e._id,checked:I.includes(e._id),onChange:ae,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,Fa.jsxs)("span",{className:"ml-2 text-sm text-gray-700",children:[e.name," (",e.points," pts)"]})]},e._id))})]}),(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)("input",{type:"checkbox",id:"isCommonTask",checked:R,onChange:e=>O(e.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,Fa.jsx)("label",{htmlFor:"isCommonTask",className:"ml-2 block text-sm text-gray-900",children:"Assign as Common Task (to all workers in selected department)"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Select Department:"}),(0,Fa.jsxs)("select",{className:"shadow border rounded-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",value:U,onChange:e=>{P(e.target.value),L([])},children:[(0,Fa.jsx)("option",{value:"",children:"-- Select a Department --"}),i.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),!R&&U&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Select Workers (for specific task):"}),(0,Fa.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto border p-3 rounded-md",children:se.length>0?se.map(e=>(0,Fa.jsxs)("label",{className:"flex items-center",children:[(0,Fa.jsx)("input",{type:"checkbox",value:e._id,checked:D.includes(e._id),onChange:re,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,Fa.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e.name})]},e._id)):(0,Fa.jsx)("p",{className:"text-sm text-gray-500 col-span-2",children:"No workers found for this department."})})]}),(0,Fa.jsx)("button",{onClick:async()=>{try{if(R&&!U)return void z({type:"error",message:"Please select a department for common tasks."});if(!R&&0===D.length)return void z({type:"error",message:"Please select at least one worker for specific tasks."});if(!F)return void z({type:"error",message:"Please select a topic to assign."});if(0===I.length)await Ea.post("/admin/tasks/assign",{topicId:F,subTopicId:null,workerIds:R?[]:D,departmentId:U,isCommonTask:R});else{const e=I.map(e=>Ea.post("/admin/tasks/assign",{topicId:F,subTopicId:e,workerIds:R?[]:D,departmentId:U,isCommonTask:R}));await Promise.all(e)}z({type:"success",message:"Task(s) assigned successfully!"}),Q(!1),ne(),J()}catch(n){var e,t;z({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to assign task."})}},className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors duration-200",children:"Assign Task"})]})}),(0,Fa.jsx)(Ys,{isOpen:K,onClose:()=>G(!1),title:"Confirm Action",children:(0,Fa.jsxs)("div",{className:"p-4",children:[(0,Fa.jsx)("p",{className:"text-lg text-gray-700 mb-6",children:q}),(0,Fa.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Fa.jsx)("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors",children:"Cancel"}),(0,Fa.jsx)("button",{onClick:W,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Confirm"})]})]})})]})},$_=()=>{var e,t;const[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)("all"),[d,A]=(0,r.useState)("all"),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,x]=(0,r.useState)(null),[v,y]=(0,r.useState)(null),[b,w]=(0,r.useState)(!1),N=(0,r.useCallback)(async()=>{try{const e={department:c,worker:d,startDate:h,endDate:p},t=await Ea.get("/admin/tasks/completed",{params:e});a(t.data.data)}catch(n){var e,t;x({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch completed tasks."})}},[c,d,h,p]),j=(0,r.useCallback)(async()=>{try{const e=await Ea.get("/admin/tasks/workers");i(e.data.data)}catch(n){var e,t;x({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch workers."})}},[]),C=(0,r.useCallback)(async()=>{try{const e=await Ea.get("/admin/tasks/departments");l(e.data.data)}catch(n){var e,t;x({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch departments."})}},[]);(0,r.useEffect)(()=>{N(),j(),C()},[N,j,C]);return(0,Fa.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,Fa.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Tasks Completed"}),g&&(0,Fa.jsx)(J_,{type:g.type,message:g.message,onClose:()=>x(null)}),(0,Fa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm mb-6 flex flex-wrap gap-4 items-end",children:[(0,Fa.jsxs)("div",{className:"flex-1 min-w-[150px]",children:[(0,Fa.jsx)("label",{htmlFor:"filterDepartment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,Fa.jsxs)("select",{id:"filterDepartment",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:c,onChange:e=>u(e.target.value),children:[(0,Fa.jsx)("option",{value:"all",children:"All Departments"}),o.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Fa.jsxs)("div",{className:"flex-1 min-w-[150px]",children:[(0,Fa.jsx)("label",{htmlFor:"filterWorker",className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee"}),(0,Fa.jsxs)("select",{id:"filterWorker",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:d,onChange:e=>A(e.target.value),children:[(0,Fa.jsx)("option",{value:"all",children:"All Employees"}),s.filter(e=>{var t;return"all"===c||(null===(t=e.department)||void 0===t?void 0:t._id)===c}).map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Fa.jsxs)("div",{className:"flex-1 min-w-[150px]",children:[(0,Fa.jsx)("label",{htmlFor:"filterStartDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,Fa.jsx)("input",{type:"date",id:"filterStartDate",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:h,onChange:e=>f(e.target.value)})]}),(0,Fa.jsxs)("div",{className:"flex-1 min-w-[150px]",children:[(0,Fa.jsx)("label",{htmlFor:"filterEndDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,Fa.jsx)("input",{type:"date",id:"filterEndDate",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:p,onChange:e=>m(e.target.value)})]})]}),(0,Fa.jsx)("div",{className:"overflow-x-auto rounded-lg shadow",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-100",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed On"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length>0?n.map(e=>{var t;return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.worker?e.worker.name:"N/A"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.department?e.department.name:"N/A"}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[null===(t=e.topic)||void 0===t?void 0:t.name," ",e.subTopicName?" - ".concat(e.subTopicName):""]}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.points}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.completedAt?new Date(e.completedAt).toLocaleDateString():"N/A"}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[!e.isCompleted&&(0,Fa.jsxs)("button",{onClick:()=>(e=>{y(e),w(!0)})(e),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,Fa.jsx)(mt,{className:"mr-2"})," Complete"]}),e.isCompleted&&(0,Fa.jsx)("span",{className:"inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Completed"})]})]},e._id)}):(0,Fa.jsx)("tr",{children:(0,Fa.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No completed tasks found."})})})]})}),(0,Fa.jsx)(Ys,{isOpen:b,onClose:()=>w(!1),title:"Confirm Task Completion",children:(0,Fa.jsxs)("div",{className:"p-4",children:[(0,Fa.jsxs)("p",{className:"text-lg text-gray-700 mb-6",children:['Are you sure you want to mark "',(0,Fa.jsxs)("span",{className:"font-semibold",children:[null===v||void 0===v||null===(e=v.topic)||void 0===e?void 0:e.name,null!==v&&void 0!==v&&v.subTopicName?" - ".concat(v.subTopicName):""]}),'" for ',null===v||void 0===v||null===(t=v.worker)||void 0===t?void 0:t.name," as completed?"]}),(0,Fa.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Fa.jsx)("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors",children:"Cancel"}),(0,Fa.jsx)("button",{onClick:async()=>{try{await Ea.put("/admin/tasks/complete/".concat(v._id)),x({type:"success",message:"Task marked as completed successfully!"}),w(!1),N()}catch(n){var e,t;x({type:"error",message:(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to mark task as completed."})}},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Confirm Complete"})]})]})})]})},eI=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[d,A]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)([]),[g,x]=(0,r.useState)(!1),v=(0,r.useCallback)(async()=>{a(!0);try{const e=await Ea.get("/admin/warehouse/store-room");t(e.data),i("")}catch(e){i("Failed to fetch store room items."),console.error(e)}finally{a(!1)}},[]);(0,r.useEffect)(()=>{v()},[v]);const y=e=>{const{name:t,value:n}=e.target;A(e=>(0,ye.A)((0,ye.A)({},e),{},{[t]:n}))},b=()=>{u(!1),A(null)},w=()=>{f(!1),m([])},N=e.filter(e=>e.name.toLowerCase().includes(o.toLowerCase()));return n?(0,Fa.jsx)("div",{className:"p-4",children:"Loading..."}):(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h1",{className:"text-2xl font-bold",children:"Store Room"}),(0,Fa.jsxs)("button",{onClick:async()=>{f(!0),x(!0);try{const e=await Ea.get("/admin/warehouse/vendor-history");m(e.data)}catch(e){i("Failed to fetch vendor history."),console.error(e)}finally{x(!1)}},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center",children:[(0,Fa.jsx)(kt,{className:"mr-2"}),"Vendor History"]})]}),s&&(0,Fa.jsx)("div",{className:"text-red-500 mb-4",children:s}),(0,Fa.jsx)("div",{className:"mb-4",children:(0,Fa.jsx)("input",{type:"text",placeholder:"Search by material name...",className:"w-full md:w-1/3 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",value:o,onChange:e=>l(e.target.value)})}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Fa.jsx)("thead",{className:"bg-light-gray",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Material Name"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Quantity"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Unit"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Price (per unit)"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Vendor"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Stock Alert Threshold"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:N.length>0?N.map(e=>(0,Fa.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.name}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.quantity}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.unit}),(0,Fa.jsxs)("td",{className:"border px-4 py-2",children:["\u20b9",e.price]}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.vendor||"-"}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.stockAlertThreshold}),(0,Fa.jsxs)("td",{className:"border px-4 py-2",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{A((0,ye.A)({},e)),u(!0)})(e),className:"text-blue-600 hover:text-blue-800 mr-3",children:(0,Fa.jsx)(Ut,{})}),(0,Fa.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this item?"))try{await Ea.delete("/admin/warehouse/store-room/".concat(e)),v()}catch(t){i("Failed to delete item."),console.error(t)}})(e._id),className:"text-red-600 hover:text-red-800",children:(0,Fa.jsx)(Kt,{})})]})]},e._id)):(0,Fa.jsx)("tr",{children:(0,Fa.jsx)("td",{colSpan:"7",className:"text-center py-4",children:"No items found. Add items via the Raw Materials page."})})})]})}),c&&d&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center",children:(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,Fa.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Item"}),(0,Fa.jsxs)("div",{className:"space-y-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Name"}),(0,Fa.jsx)("input",{type:"text",name:"name",value:d.name,onChange:y,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Quantity"}),(0,Fa.jsx)("input",{type:"text",name:"quantity",value:d.quantity,onChange:y,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Unit"}),(0,Fa.jsx)("input",{type:"text",name:"unit",value:d.unit,onChange:y,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Price"}),(0,Fa.jsx)("input",{type:"text",name:"price",value:d.price,onChange:y,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Vendor"}),(0,Fa.jsx)("input",{type:"text",name:"vendor",value:d.vendor||"",onChange:y,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Stock Alert Threshold"}),(0,Fa.jsx)("input",{type:"number",name:"stockAlertThreshold",value:d.stockAlertThreshold||"",onChange:y,className:"w-full px-3 py-2 border rounded-md"})]})]}),(0,Fa.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,Fa.jsx)("button",{onClick:b,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Fa.jsx)("button",{onClick:async()=>{if(d)try{await Ea.put("/admin/warehouse/store-room/".concat(d._id),d),b(),v()}catch(e){i("Failed to update item."),console.error(e)}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update"})]})]})}),h&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h2",{className:"text-xl font-bold",children:"All Vendor History"}),(0,Fa.jsx)("button",{onClick:w,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),g?(0,Fa.jsx)("div",{className:"text-center py-4",children:"Loading vendor history..."}):p.length>0?(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Fa.jsx)("thead",{className:"bg-light-gray",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Material Name"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Vendor Name"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Quantity Received"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Unit"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Date & Time"})]})}),(0,Fa.jsx)("tbody",{children:p.map((e,t)=>(0,Fa.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.materialName}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.vendorName}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.quantityReceived}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.unit}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:new Date(e.receivedDate).toLocaleString()})]},t))})]})}):(0,Fa.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No vendor history found."}),(0,Fa.jsx)("div",{className:"mt-6 flex justify-end",children:(0,Fa.jsx)("button",{onClick:w,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Close"})})]})})]})},tI=e=>{let{onUnitAdded:t,className:n=""}=e;const{addUnit:a}=S_(),[s,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)("");return(0,Fa.jsxs)("div",{className:n,children:[h&&(0,Fa.jsx)("p",{className:"mt-2 text-green-500 text-sm",children:h}),d&&(0,Fa.jsx)("p",{className:"mt-2 text-red-500 text-sm",children:d}),s?(0,Fa.jsxs)("div",{className:"mt-2 p-3 border rounded bg-gray-50",children:[(0,Fa.jsx)("h5",{className:"text-md font-medium text-gray-700 mb-2",children:"Add New Unit"}),(0,Fa.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-xs font-bold mb-1",children:"Unit Name"}),(0,Fa.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm",placeholder:"Enter unit name"})]}),(0,Fa.jsx)("button",{type:"button",onClick:async()=>{if(o.trim()){u(!0),A(""),f("");try{const e=await a(o);f('Unit "'.concat(e,'" added successfully')),l(""),i(!1),t&&t(e),setTimeout(()=>f(""),3e3)}catch(e){A(e.message||"Failed to add unit")}finally{u(!1)}}else A("Unit name cannot be empty")},disabled:c,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded text-sm disabled:opacity-50",children:c?"Adding...":"Add"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>{i(!1),l(""),A("")},className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded text-sm",children:"Cancel"})]})]}):(0,Fa.jsx)("button",{type:"button",onClick:()=>i(!0),className:"mt-2 inline-flex items-center px-4 py-2 bg-blue-100 text-blue-700 text-sm font-medium rounded-md hover:bg-blue-200 transition-colors",children:"+ Add New Unit"})]})},nI=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)([]),[d,A]=(0,r.useState)({}),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)({_id:null,sweetName:"",ingredients:[{name:"",quantity:"",unit:"",price:""}],quantity:"",price:"",unit:""}),[v,y]=(0,r.useState)(!1),b=(0,r.useCallback)(async()=>{a(!0);try{const e=await Ea.get("/admin/warehouse/manufacturing");t(e.data),i("")}catch(e){console.error("Failed to fetch manufacturing processes:",e),i("Failed to fetch manufacturing processes. Please check your network or server status.")}finally{a(!1)}},[]);(0,r.useEffect)(()=>{b()},[b]),(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/admin/warehouse/store-room");u(e.data)}catch(s){console.error("Error fetching store room items:",s)}})()},[]);const w=(e,t,n)=>{const r=c.find(t=>t.name.toLowerCase()===e.toLowerCase()),a=(0,ye.A)({},d);r?parseFloat(t)>r.quantity?a[n]={type:"warning",message:"Only ".concat(r.quantity," ").concat(r.unit," available in store room")}:parseFloat(t)>0?a[n]={type:"success",message:"\u2713 Available (".concat(r.quantity," ").concat(r.unit," in stock)")}:delete a[n]:a[n]={type:"error",message:'"'.concat(e,'" is not available in store room')},A(a)},N=e=>{const{name:t,value:n}=e.target;x(e=>(0,ye.A)((0,ye.A)({},e),{},{[t]:n}))},j=(e,t)=>{const{name:n,value:r}=t.target,a=[...g.ingredients];if(a[e][n]=r,x(e=>(0,ye.A)((0,ye.A)({},e),{},{ingredients:a})),"name"===n||"quantity"===n){const t="name"===n?r:a[e].name,s="quantity"===n?r:a[e].quantity;t&&s&&w(t,s,e)}},C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i(""),l(""),e?(m(!0),x((0,ye.A)((0,ye.A)({},e),{},{ingredients:Array.isArray(e.ingredients)?e.ingredients:[{name:"",quantity:"",unit:"",price:""}]}))):(m(!1),x({_id:null,sweetName:"",ingredients:[{name:"",quantity:"",unit:"",price:""}],quantity:"",price:"",unit:""})),f(!0)},B=()=>{f(!1),x({_id:null,sweetName:"",ingredients:[{name:"",quantity:"",unit:"",price:""}],quantity:"",price:"",unit:""}),m(!1)};return n?(0,Fa.jsx)("div",{className:"text-center p-5",children:"Loading manufacturing processes..."}):(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h1",{className:"text-2xl font-bold",children:"Manufacturing Processes"}),(0,Fa.jsxs)("button",{onClick:()=>C(),className:"bg-primary text-white py-2 px-4 rounded-md flex items-center hover:bg-primary-dark transition duration-200",children:[(0,Fa.jsx)(Pt,{className:"mr-2"})," Add New Process"]})]}),s&&(0,Fa.jsx)(J_,{message:s,type:"error"}),o&&(0,Fa.jsx)(J_,{message:o,type:"success"}),(0,Fa.jsx)("div",{className:"overflow-x-auto mt-4",children:0!==e.length||n||s?(0,Fa.jsxs)("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[(0,Fa.jsx)("thead",{className:"bg-light-gray",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Sweet Name"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Ingredients"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Output Quantity"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Output Price"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Output Unit"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:Array.isArray(e)&&e.map(e=>(0,Fa.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:e.sweetName}),(0,Fa.jsx)("td",{className:"py-3 px-4 text-sm text-gray-700",children:Array.isArray(e.ingredients)&&e.ingredients.length>0?e.ingredients.map(e=>"".concat(e.name," (").concat(e.quantity).concat(e.unit,")")).join(", "):"N/A"}),(0,Fa.jsx)("td",{className:"py-3 px-4 text-sm text-gray-700",children:e.quantity}),(0,Fa.jsx)("td",{className:"py-3 px-4 text-sm text-gray-700",children:e.price}),(0,Fa.jsx)("td",{className:"py-3 px-4 text-sm text-gray-700",children:e.unit}),(0,Fa.jsxs)("td",{className:"py-3 px-4 text-sm",children:[(0,Fa.jsx)("button",{onClick:()=>C(e),className:"text-blue-600 hover:text-blue-800 mr-3 p-1 rounded-md bg-blue-100",title:"Edit Process",children:(0,Fa.jsx)(Ut,{size:18})}),(0,Fa.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this process? This action cannot be undone."))try{await Ea.delete("/admin/warehouse/manufacturing/".concat(e)),l("Process deleted successfully."),b()}catch(r){var t,n;console.error("Failed to delete the process:",r),i((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to delete the process.")}})(e._id),className:"text-red-600 hover:text-red-800 p-1 rounded-md bg-red-100",title:"Delete Process",children:(0,Fa.jsx)(Kt,{size:18})})]})]},e._id))})]}):(0,Fa.jsx)("p",{className:"text-center text-gray-500",children:"No manufacturing processes found. Add a new one!"})}),h&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Fa.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,Fa.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:p?"Edit Manufacturing Process":"Add New Manufacturing Process"}),(0,Fa.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),y(!0),l(""),i("");try{if(g.ingredients.some(e=>!e.name||!e.quantity||!e.unit||!e.price))return i("Please fill in all ingredient details."),void y(!1);p?(await Ea.put("/admin/warehouse/manufacturing/".concat(g._id),g),l("Process updated successfully!")):(await Ea.post("/admin/warehouse/manufacturing",g),l("Process added successfully!")),B(),b()}catch(r){var t,n;console.error("Failed to save the process:",r),i((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to save the process.")}finally{y(!1)}},children:[(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sweet Name"}),(0,Fa.jsx)("input",{type:"text",name:"sweetName",value:g.sweetName,onChange:N,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary",required:!0})]}),(0,Fa.jsx)("h3",{className:"text-lg font-semibold mb-3 mt-6 text-gray-800",children:"Overall Product Details"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Overall Quantity"}),(0,Fa.jsx)("input",{type:"text",name:"quantity",value:g.quantity,onChange:N,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Overall Price"}),(0,Fa.jsx)("input",{type:"text",name:"price",value:g.price,onChange:N,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Overall Unit"}),(0,Fa.jsx)(__,{value:g.unit,onChange:e=>x(t=>(0,ye.A)((0,ye.A)({},t),{},{unit:e}))})]})]}),(0,Fa.jsx)("h3",{className:"text-lg font-semibold mb-3 mt-6 text-gray-800",children:"Ingredients Required"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-5 gap-2 mb-2 px-0",children:[(0,Fa.jsx)("div",{className:"text-sm font-semibold text-gray-700 px-11 py-2",children:"Ingredient"}),(0,Fa.jsx)("div",{className:"text-sm font-semibold text-gray-700 px-20 py-2",children:"Qty"}),(0,Fa.jsx)("div",{className:"text-sm font-semibold text-gray-700 px-14 py-2",children:"Unit"}),(0,Fa.jsx)("div",{className:"text-sm font-semibold text-gray-700 px-10 py-2",children:"Price"}),(0,Fa.jsx)("div",{className:"text-sm font-semibold text-gray-700 px-3 py-2",children:"Action"})]}),Array.isArray(g.ingredients)&&g.ingredients.map((e,t)=>(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 mb-2 items-center p-3 border border-gray-200 rounded-md bg-gray-50",children:[(0,Fa.jsxs)("div",{className:"md:col-span-2 relative",children:[(0,Fa.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Ingredient Name"}),(0,Fa.jsx)("input",{type:"text",name:"name",placeholder:"Start typing to see suggestions...",value:e.name,onChange:e=>j(t,e),className:"w-full px-3 py-2 border rounded-md text-sm",required:!0,list:"ingredients-list-".concat(t)}),(0,Fa.jsx)("datalist",{id:"ingredients-list-".concat(t),children:c.map(e=>(0,Fa.jsxs)("option",{value:e.name,children:[e.name," (",e.quantity," ",e.unit," available)"]},e._id))}),e.name&&(0,Fa.jsx)("div",{className:"mt-1 text-xs text-gray-600",children:(()=>{const t=c.find(t=>t.name.toLowerCase()===e.name.toLowerCase());return t?"Available: ".concat(t.quantity," ").concat(t.unit):""})()})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Quantity"}),(0,Fa.jsx)("input",{type:"text",name:"quantity",placeholder:"Qty",value:e.quantity,onChange:e=>j(t,e),className:"w-full px-3 py-2 border rounded-md text-sm",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Unit"}),(0,Fa.jsx)(__,{value:e.unit,onChange:e=>((e,t)=>{const n=[...g.ingredients];n[e].unit=t,x(e=>(0,ye.A)((0,ye.A)({},e),{},{ingredients:n}))})(t,e)})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Price"}),(0,Fa.jsx)("input",{type:"text",name:"price",placeholder:"Price",value:e.price,onChange:e=>j(t,e),className:"w-full px-3 py-2 border rounded-md text-sm",required:!0})]}),(0,Fa.jsx)("div",{className:"flex items-end",children:(0,Fa.jsx)("button",{type:"button",onClick:()=>(e=>{const t=g.ingredients.filter((t,n)=>n!==e);x(e=>(0,ye.A)((0,ye.A)({},e),{},{ingredients:t}))})(t),className:"w-full bg-red-500 text-white p-2 rounded-md hover:bg-red-600 transition duration-200 text-sm",title:"Remove Ingredient",children:"Remove"})})]}),d[t]&&(0,Fa.jsx)("div",{className:"mb-3 p-2 rounded text-sm ".concat("error"===d[t].type?"bg-red-100 text-red-700":"warning"===d[t].type?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:d[t].message})]},t)),(0,Fa.jsxs)("button",{type:"button",onClick:()=>{x(e=>(0,ye.A)((0,ye.A)({},e),{},{ingredients:[...e.ingredients,{name:"",quantity:"",unit:"",price:""}]}))},className:"bg-gray-200 text-gray-800 p-2 mb-4 w-full rounded-md hover:bg-gray-300 transition duration-200 flex items-center justify-center",children:[(0,Fa.jsx)(Pt,{className:"mr-2"})," Add Ingredient"]}),(0,Fa.jsxs)("div",{className:"mb-6",children:[(0,Fa.jsx)("h4",{className:"text-md font-semibold mb-2 text-gray-800",children:"Manage Units"}),(0,Fa.jsx)(tI,{})]}),(0,Fa.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,Fa.jsx)("button",{type:"button",onClick:B,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200",disabled:v,children:"Cancel"}),(0,Fa.jsx)("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-200",disabled:v,children:v?p?"Updating...":"Adding...":p?"Save Changes":"Add Process"})]})]})]})})]})},rI=()=>{const[e,t]=(0,r.useState)(""),[n,a]=(0,r.useState)([{sweetName:"",quantity:"",ingredients:[],ingredientsDisplay:"",price:"",unit:"",manufacturingProcess:null,description:"",isCollapsed:!1}]),[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[d,A]=(0,r.useState)(!0),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(null),v=(0,r.useRef)([]);(0,r.useEffect)(()=>{const e=e=>{if(v.current){v.current.some(t=>t&&t.contains(e.target))||x(null)}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/admin/warehouse/manufacturing");i(e.data)}catch(e){console.error("Error fetching manufacturing products:",e),l("Failed to load manufacturing products for auto-fill. Please ensure the backend is running and the Manufacturing processes are configured."),u("error")}finally{A(!1)}})()},[]);const y=async e=>{try{const t=(await Ea.get("/admin/warehouse/store-room")).data,n=[],r=[],a=[];return e.forEach(e=>{const s=t.find(t=>t.name.toLowerCase()===e.name.toLowerCase());s?s.quantity<e.quantity?r.push({name:e.name,required:e.quantity,available:s.quantity}):a.push(e):n.push(e.name)}),{unavailableIngredients:n,insufficientIngredients:r,availableIngredients:a}}catch(t){throw console.error("Error checking ingredient availability:",t),new Error("Failed to check ingredient availability")}},b=()=>{const t=document.getElementById("daily-schedule-content"),n={margin:1,filename:"Daily_Schedule_Multiple_Sweets_".concat(e,".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};U_()().from(t).set(n).save()};return d?(0,Fa.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-50",children:(0,Fa.jsx)("p",{className:"text-xl text-gray-700",children:"Loading manufacturing products..."})}):(0,Fa.jsxs)("div",{className:"container mx-auto p-6 bg-gray-50 min-h-screen",children:[(0,Fa.jsx)("h1",{className:"text-4xl font-extrabold text-gray-800 mb-10 text-center",children:"Create Daily Schedule"}),o&&(0,Fa.jsx)("div",{className:"mb-6",children:(0,Fa.jsx)(J_,{message:o,type:c})}),(0,Fa.jsxs)("div",{id:"daily-schedule-content",className:"p-8 rounded-2xl shadow-xl max-w-2xl mx-auto space-y-6 bg-white border border-gray-200",children:[(0,Fa.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-4 text-center",children:"Daily Schedule"}),(0,Fa.jsx)("div",{className:"space-y-2",children:(0,Fa.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,Fa.jsx)("strong",{children:"Schedule Date:"})," ",e]})}),(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Sweets to Prepare"}),n.filter(e=>""!==e.sweetName.trim()).map((e,t)=>(0,Fa.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,Fa.jsxs)("div",{className:"space-y-2",children:[(0,Fa.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,Fa.jsx)("strong",{children:"Sweet Name:"})," ",e.sweetName]}),(0,Fa.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,Fa.jsx)("strong",{children:"Quantity:"})," ",e.quantity," ",e.unit]}),(0,Fa.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,Fa.jsx)("strong",{children:"Price per Unit:"})," ",e.price]}),e.description&&(0,Fa.jsxs)("p",{className:"text-lg text-gray-700",children:[(0,Fa.jsx)("strong",{children:"Description:"})," ",e.description]})]}),(0,Fa.jsxs)("div",{className:"space-y-2 mt-3",children:[(0,Fa.jsx)("p",{className:"text-lg font-semibold text-gray-700",children:"Ingredients Required:"}),(0,Fa.jsx)("ul",{className:"list-disc list-inside ml-4",children:e.ingredients.length>0?e.ingredients.map((e,t)=>(0,Fa.jsxs)("li",{className:"text-gray-600",children:[e.name,": ",e.quantity,e.unit]},t)):(0,Fa.jsx)("li",{className:"text-gray-600",children:"No ingredients specified."})})]})]},t))]})]}),(0,Fa.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),f(!0),l(null),u(null);if(!n.some(e=>""!==e.sweetName.trim()))return l("Please select at least one sweet."),u("error"),void f(!1);if(!n.every(e=>""===e.sweetName.trim()||e.ingredients.length>0))return l("Some sweets do not have available ingredients in store room."),u("error"),void f(!1);try{const t=n.filter(e=>""!==e.sweetName.trim()),r=[];for(const n of t){const t=await Ea.post("/admin/daily-schedule",{sweetName:n.sweetName,quantity:n.quantity,ingredients:n.ingredients,price:n.price,unit:n.unit,date:e,description:n.description});r.push(t.data)}l("".concat(t.length," daily schedule(s) created successfully!")),u("success"),m(!0)}catch(s){var r,a;console.error("Error creating daily schedule:",s),l((null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to create daily schedule."),u("error")}finally{f(!1)}},className:"bg-white p-8 rounded-2xl shadow-xl max-w-2xl mx-auto space-y-6 border border-gray-200 mt-6",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"date",className:"block text-lg font-semibold text-gray-700 mb-2",children:"Schedule Date"}),(0,Fa.jsx)("input",{type:"date",id:"date",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition duration-200",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Fa.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Sweets to Prepare"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>{if(n.length>0&&n[0].sweetName&&n[0].quantity){const e=[...n];e[0].isCollapsed=!0,a([{sweetName:"",quantity:"",ingredients:[],ingredientsDisplay:"",price:"",unit:"",manufacturingProcess:null,description:"",isCollapsed:!1},...e])}else a([{sweetName:"",quantity:"",ingredients:[],ingredientsDisplay:"",price:"",unit:"",manufacturingProcess:null,description:"",isCollapsed:!1},...n])},className:"bg-indigo-100 text-indigo-700 py-2 px-4 rounded-lg hover:bg-indigo-200 transition-all duration-200 ease-in-out font-medium",children:"+ Add Sweet"})]}),n.map((e,t)=>(0,Fa.jsxs)("div",{className:"border border-gray-200 rounded-xl p-6 relative",children:[n.length>1&&(0,Fa.jsx)("button",{type:"button",onClick:()=>(e=>{if(n.length>1){const t=n.filter((t,n)=>n!==e);a(t)}})(t),className:"absolute top-4 right-4 text-red-500 hover:text-red-700 font-bold",title:"Remove this sweet",children:"\xd7"}),(0,Fa.jsxs)("div",{className:"flex justify-between items-center cursor-pointer pb-2 border-b border-gray-100",onClick:()=>(e=>{const t=[...n];t[e].isCollapsed=!t[e].isCollapsed,a(t)})(t),children:[(0,Fa.jsxs)("div",{children:[e.sweetName?(0,Fa.jsxs)("h4",{className:"text-lg font-semibold text-gray-800",children:[e.sweetName," - ",e.quantity," ",e.unit]}):(0,Fa.jsx)("h4",{className:"text-lg font-semibold text-gray-500",children:"New Sweet Entry"}),e.description&&(0,Fa.jsx)("p",{className:"text-sm text-gray-600 mt-1 truncate max-w-md",children:e.description})]}),(0,Fa.jsxs)("div",{className:"flex items-center",children:[e.sweetName&&e.quantity&&(0,Fa.jsxs)("span",{className:"mr-2 text-sm text-gray-500",children:["Click to ",e.isCollapsed?"expand":"collapse"]}),(0,Fa.jsx)("svg",{className:"transform transition-transform ".concat(e.isCollapsed?"":"rotate-180"),width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Fa.jsx)("path",{d:"M6 9L12 15L18 9",stroke:"#4B5563",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),!e.isCollapsed&&(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("div",{className:"mt-4",children:[(0,Fa.jsx)("label",{className:"block text-lg font-semibold text-gray-700 mb-2",children:"Sweet Name"}),(0,Fa.jsxs)("div",{className:"relative",ref:e=>{e&&(v.current[t]=e)},children:[(0,Fa.jsxs)("div",{className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition duration-200 bg-white cursor-pointer flex justify-between items-center",onClick:()=>x(g===t?null:t),children:[(0,Fa.jsx)("span",{children:e.sweetName||"Select a sweet name"}),(0,Fa.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,Fa.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})]}),g===t&&(0,Fa.jsx)("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border border-gray-200 max-h-60 overflow-auto",children:Array.isArray(s)&&s.length>0?s.map(e=>(0,Fa.jsx)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>(async(e,t)=>{const r=[...n];r[e].sweetName=t,x(null);const i=s.find(e=>e.sweetName.toLowerCase()===t.toLowerCase());if(i){r[e].quantity=i.quantity||"",r[e].price=i.price||"",r[e].unit=i.unit||"",r[e].manufacturingProcess=i;try{const{unavailableIngredients:t,insufficientIngredients:n,availableIngredients:a}=await y(i.ingredients||[]);let s=[];if(t.length>0&&s.push("Unavailable ingredients: ".concat(t.join(", "))),n.length>0){const e=n.map(e=>"".concat(e.name," (need: ").concat(e.required,", available: ").concat(e.available,")")).join(", ");s.push("Insufficient quantities: ".concat(e))}if(s.length>0?(l("Alert: ".concat(s.join(" | ")," | Proceeding with available ingredients only.")),u("warning")):(l('All ingredients available for "'.concat(i.sweetName,'".')),u("success")),r[e].ingredients=a,a.length>0){const t=a.map(e=>"".concat(e.name," (").concat(e.quantity).concat(e.unit,")")).join(", ");r[e].ingredientsDisplay=t}else r[e].ingredientsDisplay="No ingredients available in store room."}catch(o){l("Failed to check ingredient availability."),u("error")}}else r[e].quantity="",r[e].ingredients=[],r[e].ingredientsDisplay="",r[e].price="",r[e].unit="",r[e].manufacturingProcess=null,t?(l("No matching manufacturing product found."),u("warning")):(l(null),u(null));a(r)})(t,e.sweetName),children:e.sweetName},e._id)):(0,Fa.jsx)("div",{className:"px-4 py-2 text-gray-500",children:"No manufacturing products found"})})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-lg font-semibold text-gray-700 mb-2",children:"Quantity"}),(0,Fa.jsx)("input",{type:"number",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition duration-200",placeholder:"e.g., 100",value:e.quantity,onChange:e=>(async(e,t)=>{const r=[...n];if(r[e].quantity=t,r[e].manufacturingProcess&&t&&!isNaN(t)){const n=r[e].manufacturingProcess,a=parseFloat(n.quantity),i=parseFloat(t);if(a>0){const t=i/a,o=n.ingredients.map(e=>{const n=parseFloat(e.quantity)*t,r=Math.round(1e3*n)/1e3;return(0,ye.A)((0,ye.A)({},e),{},{quantity:r})});try{const{unavailableIngredients:t,insufficientIngredients:n,availableIngredients:a}=await y(o);let s=[];if(t.length>0&&s.push("Unavailable ingredients: ".concat(t.join(", "))),n.length>0){const e=n.map(e=>"".concat(e.name," (need: ").concat(e.required,", available: ").concat(e.available,")")).join(", ");s.push("Insufficient quantities: ".concat(e))}if(s.length>0?(l("Alert: ".concat(s.join(" | ")," | Proceeding with available ingredients only.")),u("warning")):(l('All ingredients available for "'.concat(r[e].sweetName,'".')),u("success")),r[e].ingredients=a,a.length>0){const t=a.map(e=>"".concat(e.name," (").concat(e.quantity).concat(e.unit,")")).join(", ");r[e].ingredientsDisplay=t}else r[e].ingredientsDisplay="No ingredients available in store room."}catch(s){l("Failed to check ingredient availability."),u("error")}}}a(r)})(t,e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-lg font-semibold text-gray-700 mb-2",children:"Unit"}),(0,Fa.jsx)("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition duration-200",value:e.unit,readOnly:!0,placeholder:"Auto-filled from Manufacturing"})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-lg font-semibold text-gray-700 mb-2",children:"Price per Unit"}),(0,Fa.jsx)("input",{type:"number",className:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition duration-200",value:e.price,readOnly:!0,placeholder:"Auto-filled from Manufacturing"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-lg font-semibold text-gray-700 mb-2",children:"Ingredients Required"}),(0,Fa.jsx)("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition duration-200",value:e.ingredientsDisplay,readOnly:!0,placeholder:"Auto-filled from Manufacturing"})]})]}),(0,Fa.jsxs)("div",{className:"mt-4",children:[(0,Fa.jsx)("label",{className:"block text-lg font-semibold text-gray-700 mb-2",children:"Description/Notes"}),(0,Fa.jsx)("textarea",{className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition duration-200",placeholder:"e.g., For order #123, Special Diwali package, etc.",value:e.description,onChange:e=>((e,t,r)=>{const s=[...n];s[e][t]=r,a(s)})(t,"description",e.target.value),rows:"3"})]})]})]},t))]}),p?(0,Fa.jsx)("button",{type:"button",onClick:async()=>{try{var r;const s=n.filter(e=>""!==e.sweetName.trim()),i=s.flatMap(e=>e.ingredients),o=new Map;i.forEach(e=>{const t="".concat(e.name,"-").concat(e.unit);if(o.has(t)){const n=o.get(t);o.set(t,(0,ye.A)((0,ye.A)({},n),{},{quantity:n.quantity+e.quantity}))}else o.set(t,(0,ye.A)({},e))});const c=Array.from(o.values()),d=(null===(r=s[0])||void 0===r?void 0:r.sweetName)||"Multiple Sweets",A={scheduleId:"SCHEDULE_".concat(Date.now()),date:e,sweetName:d,ingredients:c.map(e=>({materialName:e.name,quantityUsed:e.quantity,unit:e.unit,pricePerUnit:e.price||0})),descriptions:s.map(e=>e.description).filter(e=>""!==e.trim())};await Ea.post("/admin/warehouse/outgoing-materials",A),setTimeout(()=>{b(),setTimeout(()=>{t(""),a([{sweetName:"",quantity:"",ingredients:[],ingredientsDisplay:"",price:"",unit:""}]),m(!1)},1e3)},500),l("PDF generated and ingredients automatically deducted from store room!"),u("success")}catch(o){var s,i;console.error("Error processing schedule:",o),l((null===(s=o.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message)||"PDF generated but failed to deduct ingredients from store room."),u("warning"),setTimeout(()=>{b()},500)}},className:"w-full bg-green-700 text-white py-3 rounded-xl hover:bg-green-800 transition-all duration-300 ease-in-out font-bold text-lg shadow-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Create PDF & Deduct Ingredients"}):(0,Fa.jsx)("button",{type:"submit",className:"w-full bg-indigo-700 text-white py-3 rounded-xl hover:bg-indigo-800 transition-all duration-300 ease-in-out font-bold text-lg shadow-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",disabled:h,children:h?"Creating Schedule...":"Submit Daily Schedule"})]})]})},aI=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),d=(0,r.useCallback)(async()=>{a(!0);try{const e=await Ea.get("/admin/warehouse/outgoing-materials");t(e.data)}catch(e){i("Failed to fetch outgoing materials.")}finally{a(!1)}},[]);(0,r.useEffect)(()=>{d()},[d]);const A=e.filter(e=>e.materialName&&e.materialName.toLowerCase().includes(c.toLowerCase())).sort((e,t)=>new Date(t.usedDate)-new Date(e.usedDate));return n?(0,Fa.jsx)("div",{className:"p-4 text-center",children:"Loading..."}):(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Fa.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Outgoing Materials"}),(0,Fa.jsx)("p",{className:"text-gray-600 mb-6",children:"History of materials deducted from store room."}),s&&(0,Fa.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:s}),o&&(0,Fa.jsx)("div",{className:"text-green-700 bg-green-100 p-3 rounded mb-4",children:o}),(0,Fa.jsx)("div",{className:"mb-4",children:(0,Fa.jsx)("input",{type:"text",placeholder:"Search materials...",className:"w-full md:w-1/3 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",value:c,onChange:e=>u(e.target.value)})}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Fa.jsx)("thead",{className:"bg-light-gray",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Material Name"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Quantity Used"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Unit"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Price (per unit)"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Date Used"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Schedule Reference"})]})}),(0,Fa.jsx)("tbody",{children:A.length>0?A.map(e=>(0,Fa.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.materialName}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.quantityUsed}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.unit}),(0,Fa.jsxs)("td",{className:"border px-4 py-2",children:["\u20b9",e.pricePerUnit]}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:new Date(e.usedDate).toLocaleDateString()}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.scheduleReference})]},e._id)):(0,Fa.jsx)("tr",{children:(0,Fa.jsx)("td",{colSpan:"6",className:"text-center py-4",children:"No outgoing materials found."})})})]})})]})},sI=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[d,A]=(0,r.useState)(null),[h,f]=(0,r.useState)(""),p=(0,r.useCallback)(async()=>{a(!0);try{const e=await Ea.get("/admin/warehouse/material-stock-alerts");t(e.data),i("")}catch(e){i("Failed to fetch material stock alerts."),console.error(e)}finally{a(!1)}},[]);(0,r.useEffect)(()=>{p()},[p]);const m=()=>{u(!1),A(null)};return n?(0,Fa.jsx)("div",{className:"p-4 text-center",children:"Loading Alerts..."}):(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Fa.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Material Stock Alerts"}),s&&(0,Fa.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:s}),o&&(0,Fa.jsx)("div",{className:"text-green-700 bg-green-100 p-3 rounded mb-4",children:o}),0===e.length&&!n&&(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)(Dt,{className:"mx-auto text-6xl text-green-500"}),(0,Fa.jsx)("h2",{className:"mt-4 text-xl font-semibold text-gray-700",children:"All Good!"}),(0,Fa.jsx)("p",{className:"text-gray-500 mt-2",children:"There are no material stock alerts at the moment."})]}),(0,Fa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,Fa.jsxs)("div",{className:"border rounded-lg p-4 flex flex-col justify-between shadow-sm hover:shadow-lg transition-shadow",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h3",{className:"font-bold text-lg text-gray-800",children:e.name}),(0,Fa.jsxs)("p",{className:"text-sm text-gray-500",children:["Threshold: ",e.stockAlertThreshold," ",e.unit]}),(0,Fa.jsxs)("div",{className:"my-3",children:[(0,Fa.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:[e.quantity," ",(0,Fa.jsx)("span",{className:"text-base font-normal text-gray-600",children:e.unit})]}),(0,Fa.jsx)("p",{className:"text-xs text-red-500",children:"Current Stock is low"})]})]}),(0,Fa.jsxs)("button",{onClick:()=>(A(e),u(!0),void f("")),className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 flex items-center justify-center gap-2 transition-colors",children:[(0,Fa.jsx)(Pt,{}),"Add Stock"]})]},e._id))}),c&&d&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center",children:(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[(0,Fa.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Add Stock for ",d.name]}),(0,Fa.jsxs)("p",{className:"text-sm mb-4",children:["Current Stock: ",d.quantity," ",d.unit]}),(0,Fa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!d||!h||Number(h)<=0)i("Please enter a valid quantity.");else try{await Ea.post("/admin/warehouse/raw-materials",{name:d.name,quantity:h}),l('Stock for "'.concat(d.name,'" has been updated.')),m(),p()}catch(t){i("Failed to update stock."),console.error(t)}},children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Quantity to Add"}),(0,Fa.jsx)("input",{type:"number",value:h,onChange:e=>f(e.target.value),className:"w-full mt-1 px-3 py-2 border rounded-md",placeholder:"e.g., 50",autoFocus:!0,required:!0})]}),(0,Fa.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,Fa.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Fa.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Stock"})]})]})]})})]})},iI=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[d,A]=(0,r.useState)(null),[h,f]=(0,r.useState)(""),p=(0,r.useCallback)(async()=>{a(!0);try{const e=await Ea.get("/admin/warehouse/packing-materials/alerts");t(e.data),i("")}catch(e){i("Failed to fetch packing material stock alerts."),console.error(e)}finally{a(!1)}},[]);(0,r.useEffect)(()=>{p()},[p]);const m=()=>{u(!1),A(null)};return n?(0,Fa.jsx)("div",{className:"p-4 text-center",children:"Loading Alerts..."}):(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h1",{className:"text-2xl font-bold",children:"Packing Material Stock Alerts"}),(0,Fa.jsx)("button",{onClick:p,className:"p-2 rounded-full hover:bg-light-gray",children:(0,Fa.jsx)(Mt,{className:"transition-transform ".concat(n?"animate-spin":"")})})]}),s&&(0,Fa.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:s}),o&&(0,Fa.jsx)("div",{className:"text-green-700 bg-green-100 p-3 rounded mb-4",children:o}),0!==e.length||n?(0,Fa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,Fa.jsxs)("div",{className:"border border-red-200 bg-red-50 rounded-lg p-4 flex flex-col justify-between shadow-sm hover:shadow-lg transition-shadow",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h3",{className:"font-bold text-lg text-gray-800",children:e.name}),(0,Fa.jsxs)("p",{className:"text-sm text-gray-500",children:["Threshold: ",e.stockAlertThreshold]}),(0,Fa.jsxs)("div",{className:"my-3",children:[(0,Fa.jsx)("p",{className:"text-2xl font-bold text-red-600",children:e.quantity}),(0,Fa.jsx)("p",{className:"text-xs text-red-500",children:"Current Stock is low"})]})]}),(0,Fa.jsxs)("button",{onClick:()=>(A(e),u(!0),void f("")),className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 flex items-center justify-center gap-2 transition-colors",children:[(0,Fa.jsx)(Pt,{}),"Add Stock"]})]},e._id))}):(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)(Dt,{className:"mx-auto text-6xl text-green-500"}),(0,Fa.jsx)("h2",{className:"mt-4 text-xl font-semibold text-gray-700",children:"All Good!"}),(0,Fa.jsx)("p",{className:"text-gray-500 mt-2",children:"There are no packing material stock alerts."})]}),c&&d&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[(0,Fa.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Add Stock for ",d.name]}),(0,Fa.jsxs)("p",{className:"text-sm mb-4",children:["Current Stock: ",d.quantity]}),(0,Fa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!d||!h||Number(h)<=0)i("Please enter a valid quantity to add.");else try{const e=d.quantity+Number(h);await Ea.put("/admin/warehouse/packing-materials/".concat(d._id),(0,ye.A)((0,ye.A)({},d),{},{quantity:e})),l('Stock for "'.concat(d.name,'" has been updated successfully.')),m(),p()}catch(t){i("Failed to update stock."),console.error(t)}},children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Quantity to Add"}),(0,Fa.jsx)("input",{type:"number",value:h,onChange:e=>f(e.target.value),className:"w-full mt-1 px-3 py-2 border rounded-md",placeholder:"e.g., 100",autoFocus:!0,required:!0,min:"1"})]}),(0,Fa.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,Fa.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Fa.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Stock"})]})]})]})})]})},oI=()=>{var e;const[t,n]=(0,r.useState)([]),[a,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[A,h]=(0,r.useState)(!0),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),x=(0,r.useCallback)(async()=>{h(!0);try{const[e,t]=await Promise.all([Ea.get("/admin/warehouse/packing-materials"),Ea.get("/admin/warehouse/packing-materials/outgoing")]);n(e.data.filter(e=>e.quantity>0)),s(t.data),p("")}catch(e){p("Failed to fetch data")}finally{h(!1)}},[]);(0,r.useEffect)(()=>{x()},[x]);return A?(0,Fa.jsx)("div",{className:"p-4 text-center",children:"Loading..."}):(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Fa.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Outgoing Packing Materials"}),f&&(0,Fa.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:f}),m&&(0,Fa.jsx)("div",{className:"text-green-700 bg-green-100 p-3 rounded mb-4",children:m}),(0,Fa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,Fa.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Select Outgoing Packing Materials"}),(0,Fa.jsx)("form",{onSubmit:async e=>{e.preventDefault();try{await Ea.post("/admin/warehouse/packing-materials/outgoing",{materialName:i,quantityUsed:parseFloat(l),notes:u}),g("Outgoing material recorded successfully"),o(""),c(""),d(""),x()}catch(r){var t,n;p((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to record outgoing material")}},children:(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,Fa.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"px-3 py-2 border rounded-md",required:!0,children:[(0,Fa.jsx)("option",{value:"",children:"Select Material"}),t.map(e=>(0,Fa.jsxs)("option",{value:e.name,children:[e.name," (Stock: ",e.quantity,")"]},e._id))]}),(0,Fa.jsx)("input",{type:"number",placeholder:"Quantity to Use",value:l,onChange:e=>c(e.target.value),className:"px-3 py-2 border rounded-md",required:!0,min:"0.01",step:"0.01",max:(null===(e=t.find(e=>e.name===i))||void 0===e?void 0:e.quantity)||0}),(0,Fa.jsx)("input",{type:"text",placeholder:"Notes (optional)",value:u,onChange:e=>d(e.target.value),className:"px-3 py-2 border rounded-md"}),(0,Fa.jsx)("button",{type:"submit",className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700",disabled:!i||!l,children:"Record Outgoing"})]})}),(0,Fa.jsxs)("div",{className:"mt-4",children:[(0,Fa.jsx)("h3",{className:"text-md font-medium mb-2",children:"Available Packing Materials:"}),(0,Fa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:t.map(e=>(0,Fa.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,Fa.jsx)("div",{className:"font-medium",children:e.name}),(0,Fa.jsxs)("div",{className:"text-sm text-gray-600",children:["Stock: ",e.quantity]}),(0,Fa.jsxs)("div",{className:"text-sm text-gray-600",children:["Price: \u20b9",e.price]}),e.quantity<=e.stockAlertThreshold&&(0,Fa.jsx)("div",{className:"text-xs text-red-600 mt-1",children:"\u26a0\ufe0f Low Stock Alert"})]},e._id))})]})]}),(0,Fa.jsxs)("div",{className:"overflow-x-auto",children:[(0,Fa.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Outgoing Records History"}),(0,Fa.jsxs)("table",{className:"min-w-full bg-white border",children:[(0,Fa.jsx)("thead",{className:"bg-gray-100",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"py-3 px-4 text-left",children:"Material Name"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left",children:"Quantity Used"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left",children:"Price per Unit"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left",children:"Total Value"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left",children:"Date Used"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left",children:"Notes"})]})}),(0,Fa.jsx)("tbody",{children:a.length>0?a.map(e=>(0,Fa.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.materialName}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.quantityUsed}),(0,Fa.jsxs)("td",{className:"border px-4 py-2",children:["\u20b9",e.pricePerUnit]}),(0,Fa.jsxs)("td",{className:"border px-4 py-2",children:["\u20b9",(e.quantityUsed*e.pricePerUnit).toFixed(2)]}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:new Date(e.usedDate).toLocaleDateString()}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.notes||"-"})]},e._id)):(0,Fa.jsx)("tr",{children:(0,Fa.jsx)("td",{colSpan:"6",className:"text-center py-4 text-gray-500",children:"No outgoing records found"})})})]})]})]})},lI=e=>{let{onReturnSuccess:t}=e;const[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)({productName:"",batchNumber:"",quantityReturned:"",reasonForReturn:"Damaged",source:"Shop",remarks:""}),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/admin/products",{params:{showAdmin:!0},headers:{"Content-Type":"application/json"},withCredentials:!0});a(e.data),l("")}catch(e){console.error("Failed to fetch products:",e),l("Failed to load products. Check your API connection.")}})()},[]);const h=e=>{const{name:t,value:n}=e.target;i(e=>(0,ye.A)((0,ye.A)({},e),{},{[t]:n}))};return(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md h-full",children:[(0,Fa.jsxs)("h3",{className:"text-xl font-semibold mb-4 flex items-center text-primary",children:[(0,Fa.jsx)(at,{className:"mr-2"})," Return Product Form"]}),c&&(0,Fa.jsxs)("div",{className:"bg-green-100 text-green-700 p-3 rounded-md mb-4 flex items-center",children:[(0,Fa.jsx)(mt,{className:"mr-2"}),c]}),o&&(0,Fa.jsxs)("div",{className:"bg-red-100 text-red-700 p-3 rounded-md mb-4 flex items-center",children:[(0,Fa.jsx)(tn,{className:"mr-2"}),o]}),(0,Fa.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(""),u(""),A(!0);try{await Ea.post("/admin/warehouse/returns",s),u("Product return registered successfully!"),i({productName:"",batchNumber:"",quantityReturned:"",reasonForReturn:"Damaged",source:"Shop",remarks:""}),t()}catch(n){console.error("Failed to register return:",n),l("Failed to register return. Please try again.")}finally{A(!1)}},className:"space-y-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Product Name"}),(0,Fa.jsxs)("select",{name:"productName",value:s.productName,onChange:h,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50",children:[(0,Fa.jsx)("option",{value:"",children:"Select a product"}),n.map(e=>(0,Fa.jsx)("option",{value:e.name,children:e.name},e._id))]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity Returned"}),(0,Fa.jsx)("input",{type:"number",name:"quantityReturned",value:s.quantityReturned,onChange:h,required:!0,min:"1",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Reason for Return"}),(0,Fa.jsxs)("select",{name:"reasonForReturn",value:s.reasonForReturn,onChange:h,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50",children:[(0,Fa.jsx)("option",{value:"Damaged",children:"Damaged"}),(0,Fa.jsx)("option",{value:"Expired",children:"Expired"}),(0,Fa.jsx)("option",{value:"Overproduction",children:"Overproduction"}),(0,Fa.jsx)("option",{value:"Customer Return",children:"Customer Return"})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Source"}),(0,Fa.jsxs)("select",{name:"source",value:s.source,onChange:h,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50",children:[(0,Fa.jsx)("option",{value:"Shop",children:"Shop"}),(0,Fa.jsx)("option",{value:"Customer",children:"Customer"}),(0,Fa.jsx)("option",{value:"Factory",children:"Factory"})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks (Optional)"}),(0,Fa.jsx)("textarea",{name:"remarks",value:s.remarks,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-50"})]}),(0,Fa.jsx)("button",{type:"submit",disabled:d,className:"w-full py-2 px-4 rounded-md text-white font-semibold transition-colors ".concat(d?"bg-gray-400":"bg-primary hover:bg-opacity-90"),children:d?"Registering...":"Register Return"})]})]})},cI=()=>{const[e,t]=(0,r.useState)(!1);return(0,Fa.jsxs)("div",{className:"p-6 h-full flex flex-col",children:[(0,Fa.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"\ud83d\udce6 Return Products Module"}),(0,Fa.jsx)("div",{className:"flex-1",children:(0,Fa.jsx)(lI,{onReturnSuccess:()=>{t(e=>!e)}})})]})},uI=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),[s,i]=(0,r.useState)("");return(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/admin/warehouse/returns");t(e.data)}catch(e){i("Failed to fetch return history")}finally{a(!1)}})()},[]),n?(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading..."}):(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Fa.jsxs)("h1",{className:"text-2xl font-bold mb-6 flex items-center",children:[(0,Fa.jsx)(kt,{className:"mr-3"}),"Return Products History"]}),s&&(0,Fa.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:s}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Fa.jsx)("thead",{className:"bg-gray-100",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"py-3 px-4 text-left",children:"Return ID"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left",children:"Product Name"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left",children:"Quantity"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left",children:"Reason"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left",children:"Source"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left",children:"Date"}),(0,Fa.jsx)("th",{className:"py-3 px-4 text-left",children:"Remarks"})]})}),(0,Fa.jsx)("tbody",{children:e.map(e=>(0,Fa.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.returnId}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.productName}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.quantityReturned}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.reasonForReturn}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.source}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:new Date(e.dateOfReturn).toLocaleDateString()}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.remarks||"-"})]},e._id))})]})})]})},dI=["value","onChange","className"],AI=e=>{let{value:t,onChange:n,className:a=""}=e,s=be(e,dI);const[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),[A,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[x,v]=(0,r.useState)(""),[y,b]=(0,r.useState)([]),[w,N]=(0,r.useState)([]),[j,C]=(0,r.useState)(""),B=(0,r.useRef)(null),k=(0,r.useRef)(null),S=(0,r.useRef)(null),E=async()=>{try{const e=await Ea.get("/admin/warehouse/packing-materials");b(e.data),N(e.data)}catch(e){console.error("Failed to fetch packing materials:",e)}};(0,r.useEffect)(()=>{E()},[]),(0,r.useEffect)(()=>{if(j){const e=y.filter(e=>e.name.toLowerCase().includes(j.toLowerCase()));N(e)}else N(y)},[j,y]),(0,r.useEffect)(()=>{const e=e=>{B.current&&!B.current.contains(e.target)&&(o(!1),h(!1),p(""),C(""),v("")),l&&k.current&&!k.current.contains(e.target)&&(c(!1),d(null))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[l]);const F=async e=>{if(e.stopPropagation(),f.trim()){g(!0),v("");try{if(y.find(e=>e.name.toLowerCase()===f.trim().toLowerCase()))return v("Material already exists"),void g(!1);await Ea.post("/admin/warehouse/packing-materials",{name:f.trim(),quantity:0,price:0,stockAlertThreshold:0});await E(),n(f.trim()),p(""),h(!1),o(!1)}catch(a){var t,r;v((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to add material")}finally{g(!1)}}else v("Material name cannot be empty")};return(0,Fa.jsxs)("div",{className:"relative",ref:B,children:[l&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Fa.jsxs)("div",{ref:k,className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,Fa.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Confirm Delete"}),(0,Fa.jsxs)("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to delete the material "',(0,Fa.jsx)("strong",{children:u}),'"? This action cannot be undone.']}),(0,Fa.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Fa.jsx)("button",{type:"button",onClick:()=>{c(!1),d(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none",children:"Cancel"}),(0,Fa.jsx)("button",{type:"button",onClick:async()=>{if(u)try{const e=y.find(e=>e.name===u);if(e&&e.quantity>0)return alert("Cannot remove material that has quantity in stock"),c(!1),void d(null);const r=y.find(e=>e.name===u);if(!r)throw new Error("Material not found");await Ea.delete("/admin/warehouse/packing-materials/".concat(r._id)),await E(),t===u&&n("")}catch(x){alert(x.message||"Failed to delete material")}finally{c(!1),d(null)}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none",children:"Delete"})]})]})}),(0,Fa.jsxs)("div",(0,ye.A)((0,ye.A)({className:"shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm flex justify-between items-center cursor-pointer bg-white ".concat(a),onClick:()=>o(!i)},s),{},{children:[(0,Fa.jsx)("span",{children:t||"Select material"}),(0,Fa.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,Fa.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})]})),i&&(0,Fa.jsxs)("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md border border-gray-200 max-h-60 overflow-auto",children:[(0,Fa.jsx)("div",{className:"p-2 border-b border-gray-200",children:(0,Fa.jsx)("input",{type:"text",placeholder:"Search materials...",className:"w-full px-3 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",value:j,onChange:e=>C(e.target.value),onClick:e=>e.stopPropagation()})}),w.map(e=>(0,Fa.jsxs)("div",{className:"flex justify-between items-center px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{n(e.name),o(!1),C("")},children:[(0,Fa.jsx)("span",{children:e.name}),(0,Fa.jsx)("button",{type:"button",onClick:t=>{var n;t.stopPropagation(),n=e.name,d(n),c(!0)},className:"text-red-500 hover:text-red-700 font-bold ml-2",title:"Delete this material",children:"\xd7"})]},e._id)),(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("div",{className:"border-t border-gray-200 my-1"}),A?(0,Fa.jsx)("div",{ref:S,className:"px-4 py-2",onClick:e=>e.stopPropagation(),children:(0,Fa.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsx)("input",{type:"text",value:f,onChange:e=>p(e.target.value),className:"shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-sm",placeholder:"Enter material name",onKeyDown:e=>{"Enter"===e.key&&F(e)}}),x&&(0,Fa.jsx)("p",{className:"text-red-500 text-xs mt-1",children:x})]}),(0,Fa.jsx)("button",{type:"button",onClick:F,disabled:m,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded text-xs disabled:opacity-50",children:m?"Adding...":"Add"}),(0,Fa.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),h(!1),p(""),v("")},className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-2 rounded text-xs",children:"Cancel"})]})}):(0,Fa.jsx)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-blue-600 flex items-center",onClick:e=>{e.stopPropagation(),h(!0)},children:(0,Fa.jsx)("span",{children:"+ Add New Material"})})]})]})]})},hI=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)({name:"",quantity:"",price:"",stockAlertThreshold:"",vendor:""}),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)([]),[N,j]=(0,r.useState)(!1),[C,B]=(0,r.useState)(""),k=(0,r.useCallback)(async()=>{i(!0);try{const e=await Ea.get("/admin/warehouse/packing-materials");t(e.data),a(e.data),l("")}catch(e){l("Failed to fetch packing materials.")}finally{i(!1)}},[]);(0,r.useEffect)(()=>{k()},[k]),(0,r.useEffect)(()=>{const t=e.filter(e=>e.name.toLowerCase().includes(d.toLowerCase()));a(t)},[d,e]);const S=e=>{const{name:t,value:n}=e.target;"name"!==t&&f(e=>(0,ye.A)((0,ye.A)({},e),{},{[t]:n}))},E=()=>{m(!1),x(null)},F=e=>{const{name:t,value:n}=e.target;"name"!==t&&x(e=>(0,ye.A)((0,ye.A)({},e),{},{[t]:n}))},_=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;y(!0),j(!0),B(e||"");try{const t=e?"/admin/warehouse/packing-materials/vendor-history/".concat(encodeURIComponent(e)):"/admin/warehouse/vendor-history",n=await Ea.get(t);w(n.data)}catch(t){l("Failed to fetch vendor history."),console.error(t)}finally{j(!1)}},I=()=>{y(!1),w([]),B("")};return s?(0,Fa.jsx)("div",{className:"p-4",children:"Loading..."}):(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h1",{className:"text-2xl font-bold",children:"View Packing Materials"}),(0,Fa.jsxs)("button",{onClick:()=>_(),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center",children:[(0,Fa.jsx)(kt,{className:"mr-2"}),"Vendor History"]})]}),o&&(0,Fa.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:o}),c&&(0,Fa.jsx)("div",{className:"text-green-700 bg-green-100 p-3 rounded mb-4",children:c}),(0,Fa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm mb-6",children:[(0,Fa.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Add New Packing Material"}),(0,Fa.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(""),u("");try{200===(await Ea.post("/admin/warehouse/packing-materials",h)).status?u('Successfully updated "'.concat(h.name,'" with additional quantity.')):u('Successfully added "'.concat(h.name,'".')),f({name:"",quantity:"",price:"",stockAlertThreshold:"",vendor:""}),k()}catch(r){var t,n;l((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to add packing material.")}},className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),(0,Fa.jsx)(AI,{value:h.name,onChange:e=>f(t=>(0,ye.A)((0,ye.A)({},t),{},{name:e})),className:"border p-2 rounded-md w-full"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,Fa.jsx)("input",{type:"text",name:"quantity",placeholder:"Quantity",value:h.quantity,onChange:S,className:"border p-2 rounded-md w-full",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),(0,Fa.jsx)("input",{type:"text",name:"price",placeholder:"Price",value:h.price,onChange:S,className:"border p-2 rounded-md w-full",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alert Threshold"}),(0,Fa.jsx)("input",{type:"text",name:"stockAlertThreshold",placeholder:"Alert Threshold",value:h.stockAlertThreshold,onChange:S,className:"border p-2 rounded-md w-full"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor (Optional)"}),(0,Fa.jsx)("input",{type:"text",name:"vendor",placeholder:"Vendor",value:h.vendor,onChange:S,className:"border p-2 rounded-md w-full"})]}),(0,Fa.jsx)("div",{className:"flex items-end",children:(0,Fa.jsx)("button",{type:"submit",className:"bg-primary text-white p-2 rounded-md hover:bg-primary-dark w-full",children:"Add Material"})})]})]}),(0,Fa.jsx)("div",{className:"mb-4",children:(0,Fa.jsx)("input",{type:"text",placeholder:"Search by material name...",className:"w-full md:w-1/3 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",value:d,onChange:e=>A(e.target.value)})}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Fa.jsx)("thead",{className:"bg-light-gray",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Material Name"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Quantity"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Price (per unit)"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Stock Alert Threshold"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Vendor"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:n.length>0?n.map(e=>(0,Fa.jsxs)("tr",{className:"border-b ".concat(e.quantity<=(e.stockAlertThreshold||0)?"bg-red-50":"hover:bg-gray-50"),children:[(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.name}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.quantity}),(0,Fa.jsxs)("td",{className:"border px-4 py-2",children:["\u20b9",e.price]}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.stockAlertThreshold||"N/A"}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)("span",{children:e.vendor||"-"}),e.vendor&&(0,Fa.jsx)("button",{onClick:()=>_(e.name),className:"ml-2 text-blue-600 hover:text-blue-800",title:"View Vendor History",children:(0,Fa.jsx)(kt,{size:16})})]})}),(0,Fa.jsxs)("td",{className:"border px-4 py-2",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{x((0,ye.A)({},e)),m(!0)})(e),className:"text-blue-600 hover:text-blue-800 mr-3",children:(0,Fa.jsx)(Ut,{})}),(0,Fa.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this packing material?"))try{await Ea.delete("/admin/warehouse/packing-materials/".concat(e)),u("Material deleted successfully."),k()}catch(t){l("Failed to delete material.")}})(e._id),className:"text-red-600 hover:text-red-800",children:(0,Fa.jsx)(Kt,{})})]})]},e._id)):(0,Fa.jsx)("tr",{children:(0,Fa.jsx)("td",{colSpan:"6",className:"text-center py-4",children:"No packing materials found. Add some materials to get started."})})})]})}),p&&g&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,Fa.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Packing Material"}),(0,Fa.jsxs)("div",{className:"space-y-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Name"}),(0,Fa.jsx)(AI,{value:g.name,onChange:e=>x(t=>(0,ye.A)((0,ye.A)({},t),{},{name:e})),className:"w-full px-3 py-2 border rounded-md"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Quantity"}),(0,Fa.jsx)("input",{type:"text",name:"quantity",value:g.quantity,onChange:F,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Price"}),(0,Fa.jsx)("input",{type:"text",name:"price",value:g.price,onChange:F,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Stock Alert Threshold"}),(0,Fa.jsx)("input",{type:"text",name:"stockAlertThreshold",value:g.stockAlertThreshold,onChange:F,className:"w-full px-3 py-2 border rounded-md"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Vendor"}),(0,Fa.jsx)("input",{type:"text",name:"vendor",value:g.vendor||"",onChange:F,className:"w-full px-3 py-2 border rounded-md"})]})]}),(0,Fa.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,Fa.jsx)("button",{onClick:E,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Fa.jsx)("button",{onClick:async()=>{if(g)try{await Ea.put("/admin/warehouse/packing-materials/".concat(g._id),g),u("Material updated successfully."),E(),k()}catch(e){l("Failed to update material.")}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update"})]})]})}),v&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h2",{className:"text-xl font-bold",children:C?'Vendor History for "'.concat(C,'"'):"All Vendor History"}),(0,Fa.jsx)("button",{onClick:I,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),N?(0,Fa.jsx)("div",{className:"text-center py-4",children:"Loading vendor history..."}):b.length>0?(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Fa.jsx)("thead",{className:"bg-light-gray",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Material Name"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Vendor Name"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Quantity Received"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Unit"}),(0,Fa.jsx)("th",{className:"py-2 px-4 text-left",children:"Date & Time"})]})}),(0,Fa.jsx)("tbody",{children:b.map((e,t)=>(0,Fa.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.materialName}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.vendorName}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.quantityReceived}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:e.unit}),(0,Fa.jsx)("td",{className:"border px-4 py-2",children:new Date(e.receivedDate).toLocaleString()})]},t))})]})}):(0,Fa.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No vendor history found."}),(0,Fa.jsx)("div",{className:"mt-6 flex justify-end",children:(0,Fa.jsx)("button",{onClick:I,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Close"})})]})})]})},fI=()=>{const[e,t]=(0,r.useState)(""),[n,a]=(0,r.useState)(""),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)([]),[g,x]=(0,r.useState)(!1),[v,y]=(0,r.useState)([]),[b,w]=(0,r.useState)(""),[N,j]=(0,r.useState)(!1),C=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/admin/warehouse/store-room");m(e.data),y(e.data)}catch(e){console.error("Failed to fetch store room items:",e)}})()},[]),(0,r.useEffect)(()=>{const e=e=>{C.current&&!C.current.contains(e.target)&&(x(!1),j(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,r.useEffect)(()=>{if(e){const t=p.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));y(t)}else y(p)},[e,p]);return(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Fa.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Add Raw Material"}),(0,Fa.jsx)("p",{className:"text-gray-600 mb-6",children:'Use this form to add new raw materials or increase the quantity of existing ones. All materials can be managed in the "Store Room".'}),d&&(0,Fa.jsx)("div",{className:"text-green-700 bg-green-100 p-3 rounded mb-4",children:d}),h&&(0,Fa.jsx)("div",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:h}),(0,Fa.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),f(""),A("");try{const r=await Ea.post("/admin/warehouse/raw-materials",{name:e,quantity:n,unit:s,price:o,vendor:c});A('Successfully added/updated "'.concat(r.data.name,'".')),t(""),a(""),i(""),l(""),u("");try{const e=await Ea.get("/admin/warehouse/store-room");m(e.data)}catch(d){console.error("Failed to refresh store room items:",d)}}catch(d){f("Failed to add raw material. Please try again.")}},className:"space-y-4",children:[(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[(0,Fa.jsxs)("div",{className:"md:col-span-2 relative",ref:C,children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Ingredient Name"}),(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsx)("input",{type:"text",placeholder:"e.g., Sugar",value:e,onChange:e=>{const n=e.target.value;t(n),x(!0),j(!1)},className:"w-full mt-1 px-3 py-2 border rounded-md",required:!0,onFocus:()=>x(!0)}),(0,Fa.jsx)("button",{type:"button",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",onClick:()=>j(!N),children:"+"})]}),N&&(0,Fa.jsxs)("div",{className:"mt-2 p-3 bg-gray-50 rounded-md border",children:[(0,Fa.jsx)("input",{type:"text",placeholder:"Enter new item name",value:b,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border rounded-md text-sm mb-2"}),(0,Fa.jsxs)("div",{className:"flex gap-2",children:[(0,Fa.jsx)("button",{type:"button",onClick:async()=>{if(b.trim())try{if(p.find(e=>e.name.toLowerCase()===b.trim().toLowerCase()))return void f("Item already exists in the list");const e=(await Ea.post("/admin/warehouse/raw-materials",{name:b.trim(),quantity:0,unit:"kg",price:0,vendor:""})).data;m(t=>[...t,e]),y(t=>[...t,e]),t(e.name),i(e.unit),l(e.price.toString()),w(""),j(!1),x(!1),A('Successfully added "'.concat(e.name,'" to the list')),setTimeout(()=>A(""),3e3)}catch(e){f("Failed to add new item. Please try again.")}else f("Please enter a valid item name")},className:"px-3 py-1 bg-green-500 text-white rounded-md text-sm hover:bg-green-600",children:"Add Item"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>j(!1),className:"px-3 py-1 bg-gray-300 rounded-md text-sm hover:bg-gray-400",children:"Cancel"})]})]}),g&&(0,Fa.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[v.map(n=>(0,Fa.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer flex justify-between items-center",onClick:()=>(e=>{t(e),x(!1),j(!1);const n=p.find(t=>t.name===e);n&&(i(n.unit||""),l(n.price||""),u(n.vendor||""))})(n.name),children:[(0,Fa.jsxs)("span",{children:[n.name," (",n.quantity," ",n.unit," available)"]}),(0,Fa.jsx)("button",{type:"button",onClick:r=>{r.stopPropagation(),(async(n,r)=>{try{const a=p.find(e=>e._id===n);if(a&&a.quantity>0)return void f("Cannot remove items that have quantity in stock");await Ea.delete("/admin/warehouse/store-room/".concat(n)),m(e=>e.filter(e=>e._id!==n)),y(e=>e.filter(e=>e._id!==n)),e===r&&(t(""),i(""),l(""),u("")),A('Successfully removed "'.concat(r,'" from the list')),setTimeout(()=>A(""),3e3)}catch(a){f("Failed to remove item. Please try again.")}})(n._id,n.name)},className:"text-red-500 hover:text-red-700 text-sm",title:"Remove item",children:"\xd7"})]},n._id)),0===v.length&&e&&(0,Fa.jsxs)("div",{className:"px-4 py-2 text-gray-500",children:['No items found. Click "+" to add "',e,'" as a new item.']})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Quantity"}),(0,Fa.jsx)("input",{type:"text",placeholder:"e.g., 50",value:n,onChange:e=>a(e.target.value),className:"w-full mt-1 px-3 py-2 border rounded-md",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Unit"}),(0,Fa.jsx)(__,{value:s,onChange:i})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Price (per unit)"}),(0,Fa.jsx)("input",{type:"text",placeholder:"e.g., 55",value:o,onChange:e=>l(e.target.value),className:"w-full mt-1 px-3 py-2 border rounded-md",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium",children:"Vendor Name"}),(0,Fa.jsx)("input",{type:"text",placeholder:"e.g., ABC Supplier",value:c,onChange:e=>u(e.target.value),className:"w-full mt-1 px-3 py-2 border rounded-md"})]})]}),(0,Fa.jsx)("button",{type:"submit",className:"w-full md:w-auto bg-primary text-white py-2 px-6 rounded-md hover:bg-primary-dark",children:"Add Material to Store Room"})]})]})},pI=document.createElement("style");pI.innerHTML="\n  .th-style { padding: 0.75rem; font-weight: 600; }\n  .td-style { padding: 0.75rem; }\n",document.head.appendChild(pI);const mI=e=>{let{invoice:t}=e;if(!t)return(0,Fa.jsx)("div",{className:"text-center p-8",children:"No invoice data to display."});const n="Sweet Hub Admin",r="123 Candy Lane, Sweetville, 45678",a="contact@sweethub.com",s="/sweethub-logo.png";return(0,Fa.jsxs)("div",{id:"invoice-to-print",className:"p-6 sm:p-10 bg-white text-gray-800",children:[(0,Fa.jsxs)("header",{className:"flex justify-between items-start mb-10",children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)("img",{src:s,alt:"Logo",className:"h-16 w-16 mr-4"}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:n}),(0,Fa.jsx)("p",{className:"text-sm text-gray-500",children:r}),(0,Fa.jsx)("p",{className:"text-sm text-gray-500",children:a})]})]}),(0,Fa.jsxs)("div",{className:"text-right",children:[(0,Fa.jsx)("h2",{className:"text-3xl font-bold uppercase text-gray-400",children:"Invoice"}),(0,Fa.jsx)("p",{className:"font-semibold text-gray-700",children:t.invoiceNumber}),(0,Fa.jsxs)("p",{className:"text-sm text-gray-500",children:["Date: ",new Date(t.issueDate).toLocaleDateString()]})]})]}),(0,Fa.jsxs)("section",{className:"mb-10",children:[(0,Fa.jsx)("h3",{className:"text-sm font-semibold uppercase text-gray-500 mb-2",children:"Bill To"}),(0,Fa.jsx)("p",{className:"text-lg font-bold text-gray-900",children:t.shop.name}),(0,Fa.jsx)("p",{className:"text-gray-600",children:t.shop.address||"No address provided"})]}),(0,Fa.jsx)("section",{className:"mb-10",children:(0,Fa.jsxs)("table",{className:"w-full text-left",children:[(0,Fa.jsx)("thead",{className:"bg-gray-100",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"th-style",children:"Product Name"}),(0,Fa.jsx)("th",{className:"th-style text-center",children:"Qty"}),(0,Fa.jsx)("th",{className:"th-style text-right",children:"Unit Price"}),(0,Fa.jsx)("th",{className:"th-style text-right",children:"Total"})]})}),(0,Fa.jsx)("tbody",{children:t.items.map((e,t)=>(0,Fa.jsxs)("tr",{className:"border-b",children:[(0,Fa.jsxs)("td",{className:"td-style",children:[(0,Fa.jsx)("p",{className:"font-medium",children:e.productName||"N/A"}),(0,Fa.jsxs)("p",{className:"text-xs text-gray-500",children:["SKU: ",e.productSku||"N/A"]})]}),(0,Fa.jsx)("td",{className:"td-style text-center",children:e.quantity||0}),(0,Fa.jsxs)("td",{className:"td-style text-right",children:["\u20b9",(e.unitPrice||0).toFixed(2)]}),(0,Fa.jsxs)("td",{className:"td-style text-right",children:["\u20b9",(e.totalPrice||0).toFixed(2)]})]},t))})]})}),(0,Fa.jsx)("section",{className:"flex justify-end mb-10",children:(0,Fa.jsxs)("div",{className:"w-full max-w-sm",children:[(0,Fa.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,Fa.jsxs)("span",{className:"font-semibold",children:["\u20b9",(t.subtotal||0).toFixed(2)]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Tax:"}),(0,Fa.jsxs)("span",{className:"font-semibold",children:["\u20b9",(t.tax||0).toFixed(2)]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between py-3 text-xl font-bold bg-gray-100 px-4 rounded-md",children:[(0,Fa.jsx)("span",{children:"Grand Total:"}),(0,Fa.jsxs)("span",{children:["\u20b9",(t.grandTotal||0).toFixed(2)]})]})]})}),(0,Fa.jsxs)("footer",{className:"text-center text-sm text-gray-500",children:[(0,Fa.jsx)("p",{children:"Thank you for your business!"}),(0,Fa.jsx)("p",{className:"mt-2 font-semibold",children:"Admin Signature"}),(0,Fa.jsx)("div",{className:"w-48 h-12 border-b-2 border-gray-400 mx-auto mt-4"})]})]})},gI=e=>{var t;let{invoice:n}=e;if(!n)return(0,Fa.jsx)("div",{className:"text-center p-8",children:"No invoice data to display."});const r=n.items.filter(e=>e.shopConfirmed&&e.receivedQuantity===e.quantity),a=n.items.filter(e=>e.shopConfirmed&&e.receivedQuantity!==e.quantity),s=n.items.filter(e=>!e.shopConfirmed),i=r.length>0,o=a.length>0,l=s.length>0;return(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("div",{className:"flex items-center justify-between mb-6 border-b pb-4",children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:["Invoice Details - ",n.invoiceNumber]}),(0,Fa.jsx)("p",{className:"text-sm text-gray-500",children:"Detailed view of received and pending items"})]})}),(0,Fa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Invoice Number"}),(0,Fa.jsx)("p",{className:"font-semibold text-gray-800",children:n.invoiceNumber})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Issue Date"}),(0,Fa.jsx)("p",{className:"font-semibold text-gray-800",children:n.issueDate?new Date(n.issueDate).toLocaleDateString():"N/A"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Shop"}),(0,Fa.jsx)("p",{className:"font-semibold text-gray-800",children:(null===(t=n.shop)||void 0===t?void 0:t.name)||"N/A"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("Confirmed"===n.status?"bg-green-100 text-green-800":"Partial"===n.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:n.status})]})]}),i&&(0,Fa.jsxs)("div",{className:"mb-8",children:[(0,Fa.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 mb-3 pb-2 border-b border-green-200 flex items-center",children:[(0,Fa.jsx)(At,{className:"text-green-500 mr-2"}),"\u2705 Fully Received Products"]}),(0,Fa.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-green-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Received Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map((e,t)=>(0,Fa.jsxs)("tr",{className:"hover:bg-green-50",children:[(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.receivedQuantity||"-"}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},"".concat(e.product,"-confirmed")))})]})})]}),o&&(0,Fa.jsxs)("div",{className:"mb-8",children:[(0,Fa.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 mb-3 pb-2 border-b border-blue-200 flex items-center",children:[(0,Fa.jsx)(pt,{className:"text-blue-500 mr-2"}),"\ud83d\udccb Partially Received Products"]}),(0,Fa.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-blue-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Received Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((e,t)=>(0,Fa.jsxs)("tr",{className:"hover:bg-blue-50",children:[(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.receivedQuantity||"-"}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},"".concat(e.product,"-partial")))})]})})]}),l&&(0,Fa.jsxs)("div",{className:"mb-8",children:[(0,Fa.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 mb-3 pb-2 border-b border-yellow-200 flex items-center",children:[(0,Fa.jsx)(xt,{className:"text-yellow-500 mr-2"}),"\u23f3 Not Yet Received Products"]}),(0,Fa.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-yellow-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Received Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((e,t)=>(0,Fa.jsxs)("tr",{className:"hover:bg-yellow-50",children:[(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.receivedQuantity||"-"}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},"".concat(e.product,"-pending")))})]})})]}),(0,Fa.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Fa.jsxs)("div",{className:"text-center p-3 bg-green-100 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Fully Received Items"}),(0,Fa.jsx)("p",{className:"text-xl font-bold text-green-800",children:r.length})]}),(0,Fa.jsxs)("div",{className:"text-center p-3 bg-blue-100 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Partially Received Items"}),(0,Fa.jsx)("p",{className:"text-xl font-bold text-blue-800",children:a.length})]}),(0,Fa.jsxs)("div",{className:"text-center p-3 bg-yellow-100 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Not Received Items"}),(0,Fa.jsx)("p",{className:"text-xl font-bold text-yellow-800",children:s.length})]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Total Invoice Amount:"}),(0,Fa.jsxs)("span",{className:"font-semibold text-gray-800",children:["\u20b9",n.grandTotal.toFixed(2)]})]})]})]})},xI=document.createElement("style");xI.innerHTML="\n  .input-style { padding: 0.5rem 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem; width: 100%; }\n  .th-style { padding: 0.75rem 1rem; text-align: left; font-size: 0.75rem; font-weight: 500; color: #6b7280; text-transform: uppercase; }\n  .td-style { padding: 0.75rem 1rem; font-size: 0.875rem; color: #111827; }\n",document.head.appendChild(xI);const vI=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)({status:"All",shop:"All",startDate:"",endDate:""}),[c,u]=(0,r.useState)(null),[d,A]=(0,r.useState)(!1),[h,f]=(0,r.useState)("standard");(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/admin/invoices",{withCredentials:!0});t(e.data)}catch(e){i("Failed to fetch invoice history.")}finally{a(!1)}})()},[]);const p=e=>{const{name:t,value:n}=e.target;l(e=>(0,ye.A)((0,ye.A)({},e),{},{[t]:n}))},m=(0,r.useMemo)(()=>e.filter(e=>{const t=new Date(e.issueDate),n=o.startDate?new Date(o.startDate):null,r=o.endDate?new Date(o.endDate):null;return!(n&&t<n)&&(!(r&&t>r)&&(("All"===o.status||e.status===o.status)&&("All"===o.shop||e.shop._id===o.shop)))}),[e,o]),g=(0,r.useMemo)(()=>{const t=new Map;return e.forEach(e=>t.set(e.shop._id,e.shop.name)),Array.from(t,e=>{let[t,n]=e;return{_id:t,name:n}})},[e]),x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"standard";u(e),f(t),A(!0)};return n?(0,Fa.jsx)("div",{className:"text-center p-8",children:"Loading invoice history..."}):s?(0,Fa.jsx)("div",{className:"text-center p-8 text-red-500",children:s}):(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Invoice History"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6 p-4 border rounded-md bg-gray-50",children:[(0,Fa.jsxs)("select",{name:"status",value:o.status,onChange:p,className:"input-style",children:[(0,Fa.jsx)("option",{value:"All",children:"All Statuses"}),(0,Fa.jsx)("option",{value:"Pending",children:"Pending"}),(0,Fa.jsx)("option",{value:"Partial",children:"Partial"}),(0,Fa.jsx)("option",{value:"Confirmed",children:"Confirmed"})]}),(0,Fa.jsxs)("select",{name:"shop",value:o.shop,onChange:p,className:"input-style",children:[(0,Fa.jsx)("option",{value:"All",children:"All Shops"}),g.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]}),(0,Fa.jsx)("input",{type:"date",name:"startDate",value:o.startDate,onChange:p,className:"input-style"}),(0,Fa.jsx)("input",{type:"date",name:"endDate",value:o.endDate,onChange:p,className:"input-style"})]}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"th-style",children:"Invoice #"}),(0,Fa.jsx)("th",{className:"th-style",children:"Shop Name"}),(0,Fa.jsx)("th",{className:"th-style",children:"Date"}),(0,Fa.jsx)("th",{className:"th-style",children:"Amount"}),(0,Fa.jsx)("th",{className:"th-style",children:"Status"}),(0,Fa.jsx)("th",{className:"th-style text-right",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(e=>{var t;return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"td-style font-medium text-blue-600",children:e.invoiceNumber}),(0,Fa.jsx)("td",{className:"td-style",children:(null===(t=e.shop)||void 0===t?void 0:t.name)||"N/A"}),(0,Fa.jsx)("td",{className:"td-style",children:e.issueDate?new Date(e.issueDate).toLocaleDateString():"N/A"}),(0,Fa.jsxs)("td",{className:"td-style",children:["\u20b9",(e.grandTotal||0).toFixed(2)]}),(0,Fa.jsx)("td",{className:"td-style",children:(0,Fa.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("Confirmed"===e.status?"bg-green-100 text-green-800":"Partial"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.status||"N/A"})}),(0,Fa.jsxs)("td",{className:"td-style text-right space-x-2",children:[(0,Fa.jsxs)("button",{onClick:()=>x(e,"standard"),className:"inline-flex items-center px-3 py-1.5 bg-blue-100 text-blue-700 text-sm font-medium rounded-md hover:bg-blue-200 transition-colors",children:[(0,Fa.jsx)(wt,{className:"mr-1 h-4 w-4"}),"View"]}),"Partial"===e.status&&(0,Fa.jsxs)("button",{onClick:()=>x(e,"partial-detail"),className:"inline-flex items-center px-3 py-1.5 bg-purple-100 text-purple-700 text-sm font-medium rounded-md hover:bg-purple-200 transition-colors",title:"View Partial Details",children:[(0,Fa.jsx)(wt,{className:"mr-1 h-4 w-4"}),(0,Fa.jsxs)("span",{className:"flex items-center",children:["Partial",(0,Fa.jsx)("span",{className:"ml-1 bg-purple-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:"!"})]})]}),(0,Fa.jsxs)("button",{onClick:()=>(e=>{e?P_(e):console.error("No invoice data provided")})(e),className:"inline-flex items-center px-3 py-1.5 bg-green-100 text-green-700 text-sm font-medium rounded-md hover:bg-green-200 transition-colors",children:[(0,Fa.jsx)(yt,{className:"mr-1 h-4 w-4"}),"PDF"]})]})]},e._id)})})]})}),d&&c&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,Fa.jsxs)("div",{className:"bg-white p-4 sm:p-8 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[(0,Fa.jsx)("button",{onClick:()=>A(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl",children:"\xd7"}),"partial-detail"===h?(0,Fa.jsx)(gI,{invoice:c}):(0,Fa.jsx)(mI,{invoice:c})]})})]})};const yI=function(e){let{shopData:t}=e;const[n,a]=(0,r.useState)("bar"),s=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),i=Math.max(...t.map(e=>e.revenue.totalSales)),o=Math.max(...t.map(e=>e.expenses.totalExpenses)),l=Math.max(i,o),c=()=>(0,Fa.jsx)("div",{className:"space-y-6",children:t.map((e,t)=>{const n=e.revenue.totalSales/l*100,r=e.expenses.totalExpenses/l*100,a=100*Math.abs(e.profitability.netProfit/l),i=e.profitability.netProfit>=0;return(0,Fa.jsxs)("div",{className:"space-y-2",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Fa.jsx)("h4",{className:"font-medium text-gray-800",children:e.shopName}),(0,Fa.jsxs)("span",{className:"text-sm font-medium ".concat(i?"text-green-600":"text-red-600"),children:["Net: ",s(Math.abs(e.profitability.netProfit))]})]}),(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Fa.jsx)("span",{className:"w-16 text-xs text-gray-600",children:"Revenue"}),(0,Fa.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative",children:(0,Fa.jsx)("div",{className:"bg-blue-500 h-6 rounded-full flex items-center justify-end pr-2",style:{width:"".concat(n,"%")},children:(0,Fa.jsx)("span",{className:"text-xs text-white font-medium",children:s(e.revenue.totalSales)})})})]}),(0,Fa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Fa.jsx)("span",{className:"w-16 text-xs text-gray-600",children:"Expenses"}),(0,Fa.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative",children:(0,Fa.jsx)("div",{className:"bg-red-500 h-6 rounded-full flex items-center justify-end pr-2",style:{width:"".concat(r,"%")},children:(0,Fa.jsx)("span",{className:"text-xs text-white font-medium",children:s(e.expenses.totalExpenses)})})})]}),(0,Fa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Fa.jsx)("span",{className:"w-16 text-xs text-gray-600",children:"Net P&L"}),(0,Fa.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative",children:(0,Fa.jsx)("div",{className:"h-6 rounded-full flex items-center justify-end pr-2 ".concat(i?"bg-green-500":"bg-red-600"),style:{width:"".concat(a,"%")},children:(0,Fa.jsx)("span",{className:"text-xs text-white font-medium",children:s(Math.abs(e.profitability.netProfit))})})})]})]})]},e.shopId)})}),u=()=>(0,Fa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>{const t=e.profitability.netProfit>=0,n=e.profitability.profitMargin;return(0,Fa.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,Fa.jsxs)("div",{className:"text-center",children:[(0,Fa.jsx)("h4",{className:"font-semibold text-gray-800",children:e.shopName}),(0,Fa.jsx)("p",{className:"text-xs text-gray-600",children:e.location||"No location"})]}),(0,Fa.jsx)("div",{className:"flex justify-center",children:(0,Fa.jsxs)("div",{className:"relative w-20 h-20",children:[(0,Fa.jsxs)("svg",{className:"w-20 h-20 transform -rotate-90",viewBox:"0 0 100 100",children:[(0,Fa.jsx)("circle",{cx:"50",cy:"50",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-gray-300"}),(0,Fa.jsx)("circle",{cx:"50",cy:"50",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"transparent",strokeDasharray:"".concat(2.51*Math.abs(n)," 251"),className:t?"text-green-500":"text-red-500"})]}),(0,Fa.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,Fa.jsxs)("span",{className:"text-sm font-bold ".concat(t?"text-green-600":"text-red-600"),children:[Math.abs(n).toFixed(1),"%"]})})]})}),(0,Fa.jsxs)("div",{className:"text-center space-y-1",children:[(0,Fa.jsx)("p",{className:"text-xs text-gray-600",children:"Revenue"}),(0,Fa.jsx)("p",{className:"font-semibold text-blue-600",children:s(e.revenue.totalSales)}),(0,Fa.jsx)("p",{className:"text-xs text-gray-600",children:"Net P&L"}),(0,Fa.jsx)("p",{className:"font-semibold ".concat(t?"text-green-600":"text-red-600"),children:s(Math.abs(e.profitability.netProfit))})]})]},e.shopId)})}),d=()=>(0,Fa.jsxs)("div",{className:"space-y-4",children:[(0,Fa.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center mb-6",children:[(0,Fa.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,Fa.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded mx-auto mb-2"}),(0,Fa.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Revenue"})]}),(0,Fa.jsxs)("div",{className:"bg-red-50 rounded-lg p-3",children:[(0,Fa.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded mx-auto mb-2"}),(0,Fa.jsx)("p",{className:"text-sm text-red-600 font-medium",children:"Expenses"})]})]}),(0,Fa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(e=>(0,Fa.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,Fa.jsx)("h4",{className:"font-medium text-gray-800 mb-3 text-center",children:e.shopName}),(0,Fa.jsxs)("div",{className:"space-y-3",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Fa.jsx)("span",{className:"text-sm text-gray-600",children:"Revenue"}),(0,Fa.jsx)("span",{className:"text-sm font-medium text-blue-600",children:s(e.revenue.totalSales)})]}),(0,Fa.jsxs)("div",{className:"flex space-x-2 h-8",children:[(0,Fa.jsx)("div",{className:"bg-blue-500 rounded",style:{width:"".concat(e.revenue.totalSales/(e.revenue.totalSales+e.expenses.totalExpenses)*100,"%")}}),(0,Fa.jsx)("div",{className:"bg-red-500 rounded",style:{width:"".concat(e.expenses.totalExpenses/(e.revenue.totalSales+e.expenses.totalExpenses)*100,"%")}})]}),(0,Fa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Fa.jsx)("span",{className:"text-sm text-gray-600",children:"Expenses"}),(0,Fa.jsx)("span",{className:"text-sm font-medium text-red-600",children:s(e.expenses.totalExpenses)})]}),(0,Fa.jsx)("div",{className:"border-t pt-2 mt-2",children:(0,Fa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Fa.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"Net P&L"}),(0,Fa.jsx)("span",{className:"text-sm font-bold ".concat(e.profitability.netProfit>=0?"text-green-600":"text-red-600"),children:s(Math.abs(e.profitability.netProfit))})]})})]})]},e.shopId))})]});return t&&0!==t.length?(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Fa.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[(0,Fa.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4 sm:mb-0",children:"Financial Performance Charts"}),(0,Fa.jsxs)("div",{className:"flex space-x-2",children:[(0,Fa.jsxs)("button",{onClick:()=>a("bar"),className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("bar"===n?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,Fa.jsx)(ut,{className:"h-4 w-4"}),(0,Fa.jsx)("span",{children:"Bar Chart"})]}),(0,Fa.jsxs)("button",{onClick:()=>a("performance"),className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("performance"===n?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,Fa.jsx)(dt,{className:"h-4 w-4"}),(0,Fa.jsx)("span",{children:"Performance"})]}),(0,Fa.jsxs)("button",{onClick:()=>a("comparison"),className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("comparison"===n?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,Fa.jsx)(qt,{className:"h-4 w-4"}),(0,Fa.jsx)("span",{children:"Comparison"})]})]})]}),(0,Fa.jsxs)("div",{className:"min-h-96",children:["bar"===n&&(0,Fa.jsx)(c,{}),"performance"===n&&(0,Fa.jsx)(u,{}),"comparison"===n&&(0,Fa.jsx)(d,{})]})]}):(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)(ut,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Data Available"}),(0,Fa.jsx)("p",{className:"text-gray-500",children:"No shop data available for the selected period."})]})})};const bI=function(e){let{shop:t,dateRange:n,onClose:a}=e;const[s,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)("purchases");(0,r.useEffect)(()=>{(async()=>{l(!0);try{const e=await Ea.get("/admin/profit-loss/shop/".concat(t.shopId,"/expenses"),{params:n});i(e.data)}catch(e){console.error("Error fetching expense breakdown:",e)}finally{l(!1)}})()},[t,n]);const d=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),A=e=>new Date(e).toLocaleDateString("en-IN");if(o)return(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-60 z-50 flex items-center justify-center p-4",children:(0,Fa.jsx)("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl",children:(0,Fa.jsx)("div",{className:"p-6 flex items-center justify-center h-64",children:(0,Fa.jsxs)("div",{className:"flex items-center space-x-2 text-blue-600",children:[(0,Fa.jsx)(Mt,{className:"animate-spin h-6 w-6"}),(0,Fa.jsx)("span",{className:"text-lg",children:"Loading expense details..."})]})})})});if(!s)return null;const{expenses:h}=s;return(0,Fa.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-60 z-50 flex items-center justify-center p-4",children:(0,Fa.jsxs)("div",{className:"relative w-full max-w-4xl bg-white rounded-lg shadow-xl flex flex-col max-h-[90vh]",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Expense Breakdown"}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:[t.shopName," - ",s.shopName]})]}),(0,Fa.jsx)("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-200",children:(0,Fa.jsx)(tn,{className:"h-5 w-5"})})]}),(0,Fa.jsx)("div",{className:"border-b",children:(0,Fa.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,Fa.jsx)("button",{onClick:()=>u("purchases"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("purchases"===c?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,Fa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Fa.jsx)(Wt,{className:"h-4 w-4"}),(0,Fa.jsx)("span",{children:"Purchases"}),(0,Fa.jsx)("span",{className:"bg-gray-200 text-gray-800 text-xs font-medium px-2 py-0.5 rounded-full",children:h.purchases.length})]})}),(0,Fa.jsx)("button",{onClick:()=>u("salaries"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("salaries"===c?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,Fa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Fa.jsx)(en,{className:"h-4 w-4"}),(0,Fa.jsx)("span",{children:"Salaries"}),(0,Fa.jsx)("span",{className:"bg-gray-200 text-gray-800 text-xs font-medium px-2 py-0.5 rounded-full",children:h.salaries.length})]})}),(0,Fa.jsx)("button",{onClick:()=>u("other"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("other"===c?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,Fa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Fa.jsx)(bt,{className:"h-4 w-4"}),(0,Fa.jsx)("span",{children:"Other Expenses"})]})})]})}),(0,Fa.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["purchases"===c&&(0,Fa.jsxs)("div",{className:"space-y-4",children:[(0,Fa.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Purchase Invoices"}),0===h.purchases.length?(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)(Wt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Purchases"}),(0,Fa.jsx)("p",{className:"text-gray-500",children:"No purchase invoices found for this period."})]}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.purchases.map((e,t)=>(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.invoiceNumber}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A(e.date)}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.adminName}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.itemCount}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:d(e.amount)})]},t))}),(0,Fa.jsx)("tfoot",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{colSpan:"4",className:"px-6 py-3 text-sm font-medium text-gray-900",children:"Total Purchase Expenses"}),(0,Fa.jsx)("td",{className:"px-6 py-3 text-sm font-bold text-gray-900 text-right",children:d(h.purchases.reduce((e,t)=>e+t.amount,0))})]})})]})})]}),"salaries"===c&&(0,Fa.jsxs)("div",{className:"space-y-4",children:[(0,Fa.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Worker Salaries"}),0===h.salaries.length?(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)(en,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Workers"}),(0,Fa.jsx)("p",{className:"text-gray-500",children:"No workers found for this shop."})]}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Worker"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monthly Salary"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period Salary"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.salaries.map((e,t)=>(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.workerName}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.department}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:d(e.monthlySalary)}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:d(e.periodSalary)})]},t))}),(0,Fa.jsx)("tfoot",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{colSpan:"3",className:"px-6 py-3 text-sm font-medium text-gray-900",children:"Total Salary Expenses"}),(0,Fa.jsx)("td",{className:"px-6 py-3 text-sm font-bold text-gray-900 text-right",children:d(h.salaries.reduce((e,t)=>e+t.periodSalary,0))})]})})]})})]}),"other"===c&&(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Other Expenses"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Fa.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6",children:[(0,Fa.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Fa.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Fa.jsx)(Yt,{className:"h-6 w-6 text-blue-600"})}),(0,Fa.jsx)("div",{children:(0,Fa.jsx)("h5",{className:"font-medium text-gray-800",children:"Transport Expenses"})})]}),(0,Fa.jsx)("div",{className:"text-2xl font-bold text-blue-800",children:d(h.transport)})]}),(0,Fa.jsxs)("div",{className:"bg-green-50 rounded-lg p-6",children:[(0,Fa.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Fa.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Fa.jsx)(Ct,{className:"h-6 w-6 text-green-600"})}),(0,Fa.jsx)("div",{children:(0,Fa.jsx)("h5",{className:"font-medium text-gray-800",children:"Petrol / Diesel"})})]}),(0,Fa.jsx)("div",{className:"text-2xl font-bold text-green-800",children:d(h.petrolDiesel)})]}),(0,Fa.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-6",children:[(0,Fa.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Fa.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,Fa.jsx)(Ct,{className:"h-6 w-6 text-yellow-600"})}),(0,Fa.jsx)("div",{children:(0,Fa.jsx)("h5",{className:"font-medium text-gray-800",children:"Electricity"})})]}),(0,Fa.jsx)("div",{className:"text-2xl font-bold text-yellow-800",children:d(h.electricity)})]}),(0,Fa.jsxs)("div",{className:"bg-purple-50 rounded-lg p-6",children:[(0,Fa.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Fa.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,Fa.jsx)(Ct,{className:"h-6 w-6 text-purple-600"})}),(0,Fa.jsx)("div",{children:(0,Fa.jsx)("h5",{className:"font-medium text-gray-800",children:"Raw Materials"})})]}),(0,Fa.jsx)("div",{className:"text-2xl font-bold text-purple-800",children:d(h.rawMaterials)})]}),(0,Fa.jsxs)("div",{className:"bg-red-50 rounded-lg p-6",children:[(0,Fa.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Fa.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,Fa.jsx)(Ct,{className:"h-6 w-6 text-red-600"})}),(0,Fa.jsx)("div",{children:(0,Fa.jsx)("h5",{className:"font-medium text-gray-800",children:"Maintenance"})})]}),(0,Fa.jsx)("div",{className:"text-2xl font-bold text-red-800",children:d(h.maintenance)})]}),(0,Fa.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-6",children:[(0,Fa.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,Fa.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,Fa.jsx)(bt,{className:"h-6 w-6 text-indigo-600"})}),(0,Fa.jsx)("div",{children:(0,Fa.jsx)("h5",{className:"font-medium text-gray-800",children:"Miscellaneous"})})]}),(0,Fa.jsx)("div",{className:"text-2xl font-bold text-indigo-800",children:d(h.miscellaneous)})]})]}),(0,Fa.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,Fa.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,Fa.jsx)("h5",{className:"font-medium text-gray-800",children:"Detailed Expense Records"})}),0===h.actualExpenses.length?(0,Fa.jsxs)("div",{className:"p-6 text-center",children:[(0,Fa.jsx)(Ct,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Other Expenses"}),(0,Fa.jsx)("p",{className:"text-gray-500",children:"No other expenses recorded for this period."})]}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Mode"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.actualExpenses.map((e,t)=>(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A(e.date)}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.category}),(0,Fa.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.description||"-"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.paymentMode}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:d(e.amount)})]},t))}),(0,Fa.jsx)("tfoot",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{colSpan:"4",className:"px-6 py-3 text-sm font-medium text-gray-900",children:"Total Other Expenses"}),(0,Fa.jsx)("td",{className:"px-6 py-3 text-sm font-bold text-gray-900 text-right",children:d(h.transport+h.petrolDiesel+h.electricity+h.rawMaterials+h.maintenance+h.miscellaneous)})]})})]})})]})]})]}),(0,Fa.jsx)("div",{className:"p-6 border-t bg-gray-50 rounded-b-lg",children:(0,Fa.jsx)("div",{className:"flex justify-end",children:(0,Fa.jsx)("button",{onClick:a,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})})})]})})};const wI=function(){var e;const[t,n]=(0,r.useState)(null),[a,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[A,h]=(0,r.useState)({startDate:new Date((new Date).getFullYear(),(new Date).getMonth(),1).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0]}),f=async()=>{s(!0),o("");try{const e=await Ea.get("/admin/profit-loss",{params:A});n(e.data)}catch(r){var e,t;o((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch profit & loss data"),console.error("Error fetching P&L data:",r)}finally{s(!1)}};(0,r.useEffect)(()=>{f()},[A]);const p=(e,t)=>{h(n=>(0,ye.A)((0,ye.A)({},n),{},{[e]:t}))},m=e=>e>0?{color:"text-green-600",icon:qt,text:"Profit"}:e<0?{color:"text-red-600",icon:Gt,text:"Loss"}:{color:"text-gray-600",icon:vt,text:"Break Even"},g=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);if(a)return(0,Fa.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,Fa.jsxs)("div",{className:"flex items-center space-x-2 text-blue-600",children:[(0,Fa.jsx)(Mt,{className:"animate-spin h-6 w-6"}),(0,Fa.jsx)("span",{className:"text-lg",children:"Loading profit & loss data..."})]})});if(i)return(0,Fa.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,Fa.jsxs)("div",{className:"text-red-600 mb-4",children:[(0,Fa.jsx)(Gt,{className:"h-12 w-12 mx-auto mb-2"}),(0,Fa.jsx)("h3",{className:"text-lg font-semibold",children:"Error Loading Data"}),(0,Fa.jsx)("p",{className:"text-sm",children:i})]}),(0,Fa.jsx)("button",{onClick:f,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]});if(!t)return null;const{consolidated:x,shopData:v,summary:y}=t,b=m(x.netProfit);return(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Fa.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Profit & Loss Dashboard"}),(0,Fa.jsx)("p",{className:"text-gray-600",children:"Financial performance overview for all shops"})]}),(0,Fa.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mt-4 lg:mt-0",children:[(0,Fa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Fa.jsx)(lt,{className:"h-5 w-5 text-gray-500"}),(0,Fa.jsx)("input",{type:"date",value:A.startDate,onChange:e=>p("startDate",e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,Fa.jsx)("span",{className:"text-gray-500",children:"to"}),(0,Fa.jsx)("input",{type:"date",value:A.endDate,onChange:e=>p("endDate",e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Fa.jsxs)("button",{onClick:f,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,Fa.jsx)(Mt,{className:"h-4 w-4"}),(0,Fa.jsx)("span",{children:"Refresh"})]})]})]}),(0,Fa.jsxs)("div",{className:"text-center text-sm text-gray-600 mb-6",children:["Period: ",(()=>{const e=new Date(A.startDate).toLocaleDateString("en-IN"),t=new Date(A.endDate).toLocaleDateString("en-IN");return"".concat(e," - ").concat(t)})()]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Fa.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,Fa.jsx)(vt,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),(0,Fa.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Total Revenue"}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-blue-800",children:g(x.totalRevenue)})]}),(0,Fa.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[(0,Fa.jsx)(Gt,{className:"h-8 w-8 text-red-600 mx-auto mb-2"}),(0,Fa.jsx)("p",{className:"text-sm text-red-600 font-medium",children:"Total Expenses"}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-red-800",children:g(x.totalExpenses)})]}),(0,Fa.jsxs)("div",{className:"".concat(x.netProfit>=0?"bg-green-50":"bg-red-50"," rounded-lg p-4 text-center"),children:[(0,Fa.jsx)(b.icon,{className:"h-8 w-8 ".concat(b.color," mx-auto mb-2")}),(0,Fa.jsxs)("p",{className:"text-sm ".concat(b.color," font-medium"),children:["Net ",b.text]}),(0,Fa.jsx)("p",{className:"text-2xl font-bold ".concat(x.netProfit>=0?"text-green-800":"text-red-800"),children:g(Math.abs(x.netProfit))})]}),(0,Fa.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,Fa.jsx)(dt,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),(0,Fa.jsx)("p",{className:"text-sm text-purple-600 font-medium",children:"Profit Margin"}),(0,Fa.jsxs)("p",{className:"text-2xl font-bold text-purple-800",children:[x.profitMargin.toFixed(1),"%"]})]})]}),(0,Fa.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[(0,Fa.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Total Shops"}),(0,Fa.jsx)("p",{className:"text-lg font-bold text-gray-800",children:y.totalShops})]}),(0,Fa.jsxs)("div",{className:"bg-green-50 rounded-lg p-3",children:[(0,Fa.jsx)("p",{className:"text-sm text-green-600",children:"Profitable Shops"}),(0,Fa.jsx)("p",{className:"text-lg font-bold text-green-800",children:y.profitableShops})]}),(0,Fa.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,Fa.jsx)("p",{className:"text-sm text-blue-600",children:"Top Performer"}),(0,Fa.jsx)("p",{className:"text-lg font-bold text-blue-800",children:(null===(e=y.topPerformingShop)||void 0===e?void 0:e.shopName)||"N/A"})]})]})]}),(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Fa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Fa.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Shop Performance Analysis"}),(0,Fa.jsx)(ut,{className:"h-6 w-6 text-gray-600"})]}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shop"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expenses"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net P&L"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Margin %"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(e=>{const t=m(e.profitability.netProfit);return(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.shopName}),(0,Fa.jsx)("div",{className:"text-sm text-gray-500",children:e.location||"No location"})]})}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[(0,Fa.jsx)("div",{className:"text-sm font-medium text-gray-900",children:g(e.revenue.totalSales)}),(0,Fa.jsxs)("div",{className:"text-xs text-gray-500",children:[e.revenue.totalBills," bills"]})]}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[(0,Fa.jsx)("div",{className:"text-sm font-medium text-gray-900",children:g(e.expenses.totalExpenses)}),(0,Fa.jsxs)("div",{className:"text-xs text-gray-500",children:[e.metrics.totalInvoices," invoices"]})]}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,Fa.jsxs)("div",{className:"flex items-center justify-end space-x-1",children:[(0,Fa.jsx)(t.icon,{className:"h-4 w-4 ".concat(t.color)}),(0,Fa.jsx)("span",{className:"text-sm font-medium ".concat(t.color),children:g(Math.abs(e.profitability.netProfit))})]})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,Fa.jsxs)("span",{className:"text-sm font-medium ".concat(t.color),children:[e.profitability.profitMargin.toFixed(1),"%"]})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,Fa.jsx)("button",{onClick:()=>(e=>{c(e),d(!0)})(e),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View Details"})})]},e.shopId)})})]})})]}),(0,Fa.jsx)(yI,{shopData:v}),u&&l&&(0,Fa.jsx)(bI,{shop:l,dateRange:A,onClose:()=>{d(!1),c(null)}})]})};const NI=function(){return(0,Fa.jsx)("div",{className:"p-4 md:p-6",children:(0,Fa.jsx)(wI,{})})},jI=e=>{if(!e)return"--:--";const[t,n]=e.split(":");let r=parseInt(t,10);const a=r>=12?"PM":"AM";return r=r%12||12,"".concat(r,":").concat(n," ").concat(a)},CI=()=>{const[e,t]=(0,r.useState)(""),[n,a]=(0,r.useState)(!1),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)([]),[d,A]=(0,r.useState)({name:"",workingHours:{from:"",to:"",included:!0},lunchBreak:{from:"",to:"",included:!0},breakTime:{from:"",to:"",included:!0}}),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/admin/settings/gst");t(e.data.gstPercentage||"")}catch(e){console.error("Error fetching GST settings:",e),i("Failed to load GST settings."),l("error")}})(),(async()=>{try{const e=await Ea.get("/admin/settings/batches");u(e.data)}catch(e){console.error("Error fetching batch settings:",e)}})()},[]);const g=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;const n=parseFloat(e)||0;if(n<=0)return{baseAmount:t.toFixed(2),gstAmount:"0.00",totalAmount:t.toFixed(2)};const r=t/(1+n/100),a=t-r;return{baseAmount:r.toFixed(2),gstAmount:a.toFixed(2),totalAmount:t.toFixed(2)}}(100);return(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Fa.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Settings"}),(0,Fa.jsx)("p",{className:"text-gray-600 mb-8",children:"Configure application settings and preferences."}),s&&(0,Fa.jsx)("div",{className:"mb-6 p-4 rounded-lg ".concat("success"===o?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:s}),(0,Fa.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 mb-8",children:[(0,Fa.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"GST Management"}),(0,Fa.jsx)("p",{className:"text-gray-600 mb-6",children:"Configure GST settings for billing and invoices."}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Percentage"}),(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsx)("input",{type:"number",step:"0.01",min:"0",max:"100",value:e,onChange:e=>t(e.target.value),placeholder:"Enter GST percentage",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary"}),(0,Fa.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,Fa.jsx)("span",{className:"text-gray-500",children:"%"})})]}),(0,Fa.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Enter the GST percentage to be applied to all bills and invoices."})]}),(0,Fa.jsx)("div",{className:"flex items-end",children:(0,Fa.jsx)("button",{type:"button",onClick:async()=>{if(""===e||isNaN(e)||e<0)return i("Please enter a valid GST percentage."),void l("error");a(!0),i("");try{const t=await Ea.post("/admin/settings/gst",{gstPercentage:e});i(t.data.message),l("success"),setTimeout(()=>{i("")},3e3)}catch(t){console.error("Error saving GST settings:",t),i("Failed to save GST settings. Please try again."),l("error")}finally{a(!1)}},disabled:n,className:"w-full bg-primary text-white py-2 px-4 rounded-md hover:bg-primary-dark transition duration-200 ".concat(n?"opacity-50 cursor-not-allowed":""),children:n?"Saving...":"Save GST Settings"})})]}),(0,Fa.jsxs)("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[(0,Fa.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"GST Calculation Example"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Fa.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Base Amount"}),(0,Fa.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",g.baseAmount]})]}),(0,Fa.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,Fa.jsxs)("p",{className:"text-sm text-gray-600",children:["GST (",e||0,"%)"]}),(0,Fa.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",g.gstAmount]})]}),(0,Fa.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Total Amount"}),(0,Fa.jsxs)("p",{className:"text-lg font-semibold",children:["\u20b9",g.totalAmount]})]})]}),(0,Fa.jsxs)("p",{className:"mt-3 text-sm text-gray-600",children:["When a ",e||0,"% GST is applied to a \u20b9100 bill, the calculation is shown above."]})]})]}),(0,Fa.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,Fa.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Batch Management"}),(0,Fa.jsx)("p",{className:"text-gray-600 mb-6",children:"Configure work batches with predefined working hours, lunch breaks, and break times."}),(0,Fa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,Fa.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:h?"Edit Batch":"Add New Batch"}),(0,Fa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch Name"}),(0,Fa.jsx)("input",{type:"text",value:d.name,onChange:e=>A((0,ye.A)((0,ye.A)({},d),{},{name:e.target.value})),placeholder:"Enter batch name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring focus:ring-primary focus:border-primary"})]})}),(0,Fa.jsxs)("div",{className:"mb-4 p-3 bg-white rounded border",children:[(0,Fa.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Working Hours"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"From"}),(0,Fa.jsx)("input",{type:"time",value:d.workingHours.from,onChange:e=>A((0,ye.A)((0,ye.A)({},d),{},{workingHours:(0,ye.A)((0,ye.A)({},d.workingHours),{},{from:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"To"}),(0,Fa.jsx)("input",{type:"time",value:d.workingHours.to,onChange:e=>A((0,ye.A)((0,ye.A)({},d),{},{workingHours:(0,ye.A)((0,ye.A)({},d.workingHours),{},{to:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Fa.jsx)("div",{className:"flex items-end",children:(0,Fa.jsxs)("label",{className:"flex items-center text-sm",children:[(0,Fa.jsx)("input",{type:"checkbox",checked:d.workingHours.included,onChange:e=>A((0,ye.A)((0,ye.A)({},d),{},{workingHours:(0,ye.A)((0,ye.A)({},d.workingHours),{},{included:e.target.checked})})),className:"mr-2"}),"Included in work time"]})})]})]}),(0,Fa.jsxs)("div",{className:"mb-4 p-3 bg-white rounded border",children:[(0,Fa.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Lunch Break"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"From"}),(0,Fa.jsx)("input",{type:"time",value:d.lunchBreak.from,onChange:e=>A((0,ye.A)((0,ye.A)({},d),{},{lunchBreak:(0,ye.A)((0,ye.A)({},d.lunchBreak),{},{from:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"To"}),(0,Fa.jsx)("input",{type:"time",value:d.lunchBreak.to,onChange:e=>A((0,ye.A)((0,ye.A)({},d),{},{lunchBreak:(0,ye.A)((0,ye.A)({},d.lunchBreak),{},{to:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Fa.jsx)("div",{className:"flex items-end",children:(0,Fa.jsxs)("label",{className:"flex items-center text-sm",children:[(0,Fa.jsx)("input",{type:"checkbox",checked:d.lunchBreak.included,onChange:e=>A((0,ye.A)((0,ye.A)({},d),{},{lunchBreak:(0,ye.A)((0,ye.A)({},d.lunchBreak),{},{included:e.target.checked})})),className:"mr-2"}),"Included in work time"]})})]})]}),(0,Fa.jsxs)("div",{className:"mb-4 p-3 bg-white rounded border",children:[(0,Fa.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Break Time"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"From"}),(0,Fa.jsx)("input",{type:"time",value:d.breakTime.from,onChange:e=>A((0,ye.A)((0,ye.A)({},d),{},{breakTime:(0,ye.A)((0,ye.A)({},d.breakTime),{},{from:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"To"}),(0,Fa.jsx)("input",{type:"time",value:d.breakTime.to,onChange:e=>A((0,ye.A)((0,ye.A)({},d),{},{breakTime:(0,ye.A)((0,ye.A)({},d.breakTime),{},{to:e.target.value})})),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),(0,Fa.jsx)("div",{className:"flex items-end",children:(0,Fa.jsxs)("label",{className:"flex items-center text-sm",children:[(0,Fa.jsx)("input",{type:"checkbox",checked:d.breakTime.included,onChange:e=>A((0,ye.A)((0,ye.A)({},d),{},{breakTime:(0,ye.A)((0,ye.A)({},d.breakTime),{},{included:e.target.checked})})),className:"mr-2"}),"Included in work time"]})})]})]}),(0,Fa.jsxs)("div",{className:"flex gap-2",children:[(0,Fa.jsx)("button",{type:"button",onClick:async()=>{if(!d.name)return i("Please enter a batch name."),void l("error");a(!0),i("");try{const e=h||Date.now().toString(),t=await Ea.post("/admin/settings/batches",{batchId:e,name:d.name,workingHours:d.workingHours,lunchBreak:d.lunchBreak,breakTime:d.breakTime});i(t.data.message),l("success"),A({name:"",workingHours:{from:"",to:"",included:!0},lunchBreak:{from:"",to:"",included:!0},breakTime:{from:"",to:"",included:!0}}),f(null);const n=await Ea.get("/admin/settings/batches");u(n.data),setTimeout(()=>{i("")},3e3)}catch(e){console.error("Error saving batch settings:",e),i("Failed to save batch settings. Please try again."),l("error")}finally{a(!1)}},disabled:n,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition duration-200 ".concat(n?"opacity-50 cursor-not-allowed":""),children:n?"Saving...":h?"Update Batch":"Add Batch"}),h&&(0,Fa.jsx)("button",{type:"button",onClick:()=>{A({name:"",workingHours:{from:"",to:"",included:!0},lunchBreak:{from:"",to:"",included:!0},breakTime:{from:"",to:"",included:!0}}),f(null)},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition duration-200",children:"Cancel"})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Existing Batches"}),0===c.length?(0,Fa.jsx)("p",{className:"text-gray-600 text-center py-4",children:"No batches configured yet."}):(0,Fa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(e=>{var t,n,r,a,s,o,c,d,h,p,m;return(0,Fa.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,Fa.jsx)("h4",{className:"font-semibold text-gray-800",children:e.name}),(0,Fa.jsxs)("div",{className:"flex gap-2",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{A({name:e.name,workingHours:e.workingHours||{from:"",to:"",included:!0},lunchBreak:e.lunchBreak||{from:"",to:"",included:!0},breakTime:e.breakTime||{from:"",to:"",included:!0}}),f(e.id)})(e),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),(0,Fa.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this batch?"))try{const t=await Ea.delete("/admin/settings/batches/".concat(e));i(t.data.message),l("success");const n=await Ea.get("/admin/settings/batches");u(n.data),setTimeout(()=>{i("")},3e3)}catch(t){console.error("Error deleting batch:",t),t.response&&t.response.data&&t.response.data.message?i("Failed to delete batch: ".concat(t.response.data.message)):i("Failed to delete batch. Please try again."),l("error")}})(e.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]}),(0,Fa.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"font-medium text-gray-700",children:"Working Hours"}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:[null!==(t=e.workingHours)&&void 0!==t&&t.from?jI(e.workingHours.from):"--:--"," -",null!==(n=e.workingHours)&&void 0!==n&&n.to?jI(e.workingHours.to):"--:--",!(null!==(r=e.workingHours)&&void 0!==r&&r.included)&&" (Excluded)"]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"font-medium text-gray-700",children:"Lunch Break"}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:[null!==(a=e.lunchBreak)&&void 0!==a&&a.from?jI(e.lunchBreak.from):"--:--"," -",null!==(s=e.lunchBreak)&&void 0!==s&&s.to?jI(e.lunchBreak.to):"--:--",void 0!==(null===(o=e.lunchBreak)||void 0===o?void 0:o.included)&&!(null!==(c=e.lunchBreak)&&void 0!==c&&c.included)&&" (Excluded)"]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"font-medium text-gray-700",children:"Break Time"}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:[null!==(d=e.breakTime)&&void 0!==d&&d.from?jI(e.breakTime.from):"--:--"," -",null!==(h=e.breakTime)&&void 0!==h&&h.to?jI(e.breakTime.to):"--:--",void 0!==(null===(p=e.breakTime)||void 0===p?void 0:p.included)&&!(null!==(m=e.breakTime)&&void 0!==m&&m.included)&&" (Excluded)"]})]})]})]},e.id)})})]})]})]})},BI=e=>{var t;const n=null!==e&&void 0!==e&&e._id?e._id.slice(-8):"N/A",r=null!==e&&void 0!==e&&e.date?new Date(e.date).toLocaleDateString():"N/A",a=(null===e||void 0===e?void 0:e.category)||"N/A",s=(null===e||void 0===e?void 0:e.description)||"N/A",i=(null===e||void 0===e?void 0:e.paymentMode)||"N/A",o=(null===e||void 0===e?void 0:e.vendor)||"N/A",l=(null===e||void 0===e?void 0:e.amount)||0,c=(null===e||void 0===e||null===(t=e.shop)||void 0===t?void 0:t.name)||(null!==e&&void 0!==e&&e.admin?"Admin":"N/A"),u='\n    <div style="font-family: Arial, sans-serif; padding: 30px; max-width: 800px; margin: 0 auto;">\n      \x3c!-- Header --\x3e\n      <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #333; padding-bottom: 20px;">\n        <h1 style="color: #333; margin: 0; font-size: 32px;">The Sweet Hub</h1>\n        <p style="color: #666; font-size: 16px; margin: 10px 0 5px 0;">156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006</p>\n        <p style="color: #666; font-size: 16px; margin: 5px 0;">Phone: 7339200636</p>\n      </div>\n      \n      <div style="text-align: center; margin-bottom: 30px;">\n        <h2 style="color: #333; margin: 0; font-size: 28px;">EXPENSE RECEIPT</h2>\n      </div>\n      \n      \x3c!-- Expense Details --\x3e\n      <div style="margin-bottom: 30px; background-color: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #dee2e6;">\n        <h3 style="color: #333; margin-top: 0; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Expense Details</h3>\n        <div style="display: flex; justify-content: space-between;">\n          <div style="width: 48%;">\n            <p style="margin: 8px 0; font-size: 16px;"><strong>Receipt ID:</strong> '.concat(n,'</p>\n            <p style="margin: 8px 0; font-size: 16px;"><strong>Date:</strong> ').concat(r,'</p>\n            <p style="margin: 8px 0; font-size: 16px;"><strong>Shop:</strong> ').concat(c,'</p>\n          </div>\n          <div style="width: 48%; text-align: right;">\n            <p style="margin: 8px 0; font-size: 16px;"><strong>Category:</strong> ').concat(a,'</p>\n            <p style="margin: 8px 0; font-size: 16px;"><strong>Payment Mode:</strong> ').concat(i,'</p>\n            <p style="margin: 8px 0; font-size: 16px;"><strong>Vendor:</strong> ').concat(o,'</p>\n          </div>\n        </div>\n      </div>\n      \n      \x3c!-- Description --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Description</h3>\n        <div style="border: 1px solid #ddd; padding: 20px; border-radius: 8px; min-height: 60px; background-color: #fff;">\n          <p style="font-size: 16px; margin: 0; color: #333;">').concat(s,'</p>\n        </div>\n      </div>\n      \n      \x3c!-- Amount --\x3e\n      <div style="text-align: right; margin-bottom: 40px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px;">Amount</h3>\n        <div style="border: 1px solid #ddd; padding: 25px; border-radius: 8px; background-color: #f9f9f9;">\n          <p style="font-size: 32px; font-weight: bold; color: #333; margin: 0;">\u20b9').concat(l.toFixed(2),'</p>\n        </div>\n      </div>\n      \n      <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; text-align: center;">\n        <p style="color: #777; font-size: 14px; margin: 0;">\n          Generated on ').concat((new Date).toLocaleDateString()," at ").concat((new Date).toLocaleTimeString(),'\n        </p>\n        <p style="color: #777; font-size: 14px; margin: 5px 0 0 0;">\n          Receipt generated by The Sweet Hub Expense Management System\n        </p>\n      </div>\n    </div>\n  '),d={margin:15,filename:"expense_".concat(n,"_").concat(r.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};U_()().from(u).set(d).save()},kI=e=>{var t;let{expense:n,onClose:r,onDownload:a}=e;const s=e=>new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?(0,Fa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,Fa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fa.jsx)(Ot,{className:"text-blue-500 text-xl"}),(0,Fa.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Expense Details"})]}),(0,Fa.jsx)("button",{onClick:r,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,Fa.jsx)(tn,{className:"text-gray-500 text-xl"})})]}),(0,Fa.jsxs)("div",{className:"p-6",children:[(0,Fa.jsx)("div",{className:"mb-6",children:(0,Fa.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:n.category}),(0,Fa.jsx)("p",{className:"text-gray-600",children:n.description||"No description provided"})]}),(0,Fa.jsxs)("div",{className:"text-right",children:[(0,Fa.jsx)("p",{className:"text-2xl font-bold text-red-600",children:(o=n.amount,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(o))}),(0,Fa.jsxs)("p",{className:"text-sm text-gray-500",children:["Expense ID: ",n._id]})]})]})}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,Fa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Date"}),(0,Fa.jsx)("p",{className:"font-medium",children:(i=n.date,new Date(i).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}))})]}),(0,Fa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Payment Mode"}),(0,Fa.jsx)("p",{className:"font-medium",children:n.paymentMode})]}),(0,Fa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Vendor"}),(0,Fa.jsx)("p",{className:"font-medium",children:n.vendor||"Not specified"})]}),(0,Fa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Created By"}),(0,Fa.jsx)("p",{className:"font-medium",children:(null===(t=n.createdBy)||void 0===t?void 0:t.name)||(n.admin?"Admin":n.shop?n.shop.name:"Unknown")})]}),n.shop&&(0,Fa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Shop"}),(0,Fa.jsx)("p",{className:"font-medium",children:n.shop.name})]}),n.admin&&(0,Fa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Created By"}),(0,Fa.jsx)("p",{className:"font-medium",children:"Admin"})]})]}),(0,Fa.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg mb-6 border border-blue-100",children:(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[(0,Fa.jsxs)("p",{className:"text-sm text-blue-600 mb-1 flex items-center gap-1",children:[(0,Fa.jsx)(lt,{className:"text-blue-500"}),"Created At"]}),(0,Fa.jsx)("p",{className:"font-medium text-blue-800",children:s(n.createdAt)})]}),(0,Fa.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[(0,Fa.jsxs)("p",{className:"text-sm text-blue-600 mb-1 flex items-center gap-1",children:[(0,Fa.jsx)(lt,{className:"text-blue-500"}),"Last Updated"]}),(0,Fa.jsx)("p",{className:"font-medium text-blue-800",children:s(n.updatedAt)})]})]})}),(0,Fa.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,Fa.jsxs)("button",{onClick:()=>window.print(),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 text-gray-700 rounded-lg transition-all shadow-sm hover:shadow-md",children:[(0,Fa.jsx)(Rt,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"Print"})]}),(0,Fa.jsxs)("button",{onClick:()=>(e=>{BI(e)})(n),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all shadow-md hover:shadow-lg",children:[(0,Fa.jsx)(yt,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"Download PDF"})]})]})]})]})}):null;var i,o},SI=()=>{var e;const t=ee(),[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)([]),[d,A]=(0,r.useState)("admin"),[h,f]=(0,r.useState)(null),p=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(e);(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/admin/shops",{withCredentials:!0});u(e.data)}catch(e){console.error("Error fetching shops:",e)}})()},[]),(0,r.useEffect)(()=>{(async()=>{try{let e;i(!0),e="admin"===d?await Ea.get("/admin/expenses?filter=admin",{withCredentials:!0}):await Ea.get("/admin/expenses?shopId=".concat(d),{withCredentials:!0});let t=e.data;t="admin"===d?e.data.filter(e=>e.admin):e.data.filter(e=>e.shop&&e.shop._id===d),a(t)}catch(e){console.error("Error fetching expenses:",e),l("Failed to fetch expenses")}finally{i(!1)}})()},[d]);const m=e=>{BI(e)},g=n.reduce((e,t)=>e+t.amount,0),x=n.filter(e=>{const t=new Date(e.date),n=new Date;return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}).reduce((e,t)=>e+t.amount,0),v=n.filter(e=>{const t=new Date(e.date),n=new Date,r=new Date(n);r.setDate(n.getDate()-n.getDay());const a=new Date(r);return a.setDate(r.getDate()+6),t>=r&&t<=a}).reduce((e,t)=>e+t.amount,0);new Set(n.map(e=>e.category));return(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Expenses Management"}),(0,Fa.jsx)("p",{className:"text-gray-600",children:"Track and manage all expenses"})]}),(0,Fa.jsxs)("div",{className:"flex gap-3",children:[(0,Fa.jsxs)("button",{onClick:()=>t("/admin/expenses/history"),className:"flex items-center gap-2 bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-4 py-2 rounded-xl transition-all shadow-md hover:shadow-lg",children:[(0,Fa.jsx)(kt,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"History"})]}),(0,Fa.jsxs)("button",{onClick:()=>t("/admin/expenses/add"),className:"flex items-center gap-2 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-4 py-2 rounded-xl transition-all shadow-md hover:shadow-lg",children:[(0,Fa.jsx)(Pt,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"Add Expense"})]})]})]}),(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[(0,Fa.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Fa.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[(0,Fa.jsx)(Ot,{className:"text-blue-500"}),"Expense View"]}),(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsxs)("select",{value:d,onChange:e=>A(e.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg py-2 pl-4 pr-10 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",children:[(0,Fa.jsx)("option",{value:"admin",children:"Admin Expenses"}),c.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]}),(0,Fa.jsx)(ht,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),(0,Fa.jsx)("div",{className:"mt-4",children:"admin"===d?(0,Fa.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-4 rounded-lg",children:(0,Fa.jsxs)("p",{className:"text-blue-800 font-bold text-lg flex items-center gap-2",children:[(0,Fa.jsx)(Ot,{className:"text-blue-600"}),"Currently viewing: ",(0,Fa.jsx)("span",{className:"underline",children:"Admin expenses"})]})}):(0,Fa.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-500 p-4 rounded-lg",children:(0,Fa.jsxs)("p",{className:"text-green-800 font-bold text-lg flex items-center gap-2",children:[(0,Fa.jsx)(Ot,{className:"text-green-600"}),"Currently viewing: ",(0,Fa.jsxs)("span",{className:"underline",children:[(null===(e=c.find(e=>e._id===d))||void 0===e?void 0:e.name)||"Shop"," expenses"]})]})})})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow",children:(0,Fa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,Fa.jsx)(Ot,{className:"text-gray-400"}),"Total Expenses"]}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:p(g)})]}),(0,Fa.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,Fa.jsx)(Ot,{className:"text-red-600 text-xl"})})]})}),(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow",children:(0,Fa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,Fa.jsx)(qt,{className:"text-gray-400"}),"This Month"]}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:p(x)})]}),(0,Fa.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,Fa.jsx)(qt,{className:"text-blue-600 text-xl"})})]})}),(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow",children:(0,Fa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,Fa.jsx)(lt,{className:"text-gray-400"}),"This Week"]}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:p(v)})]}),(0,Fa.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,Fa.jsx)(lt,{className:"text-green-600 text-xl"})})]})})]}),(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,Fa.jsxs)("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[(0,Fa.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[(0,Fa.jsx)(Ot,{className:"text-blue-500"}),"Recent Expenses"]}),(0,Fa.jsxs)("button",{onClick:()=>t("/admin/expenses/history"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center gap-1",children:["View All",(0,Fa.jsx)(kt,{className:"text-sm"})]})]}),(0,Fa.jsx)("div",{className:"p-6",children:s?(0,Fa.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,Fa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):o?(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)("div",{className:"text-red-500 mb-4 text-xl",children:"\u26a0\ufe0f"}),(0,Fa.jsx)("div",{className:"text-red-500 mb-4",children:o}),(0,Fa.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors shadow-md hover:shadow-lg",children:"Retry"})]}):0===n.length?(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)(Ot,{className:"mx-auto text-gray-300 text-5xl mb-4"}),(0,Fa.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No expenses recorded yet"}),(0,Fa.jsx)("p",{className:"text-gray-500 mb-4",children:"Add your first expense to get started"}),(0,Fa.jsxs)("button",{onClick:()=>t("/admin/expenses/add"),className:"flex items-center gap-2 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-4 py-2 rounded-lg transition-all shadow-md hover:shadow-lg mx-auto",children:[(0,Fa.jsx)(Pt,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"Add Expense"})]})]}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Mode"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.slice(0,5).map(e=>{return(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(t=e.date,new Date(t).toLocaleDateString("en-IN"))}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.category})}),(0,Fa.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs",children:(0,Fa.jsx)("div",{className:"max-w-xs truncate",title:e.description||"-",children:e.description||"-"})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e.paymentMode||"-"})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.vendor||"-"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:p(e.amount)}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Fa.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{f(e)})(e),className:"p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:(0,Fa.jsx)(wt,{className:"h-5 w-5"})}),(0,Fa.jsx)("button",{onClick:()=>m(e),className:"p-2 text-green-600 hover:text-green-900 hover:bg-green-50 rounded-lg transition-colors",title:"Download PDF",children:(0,Fa.jsx)(yt,{className:"h-5 w-5"})})]})})]},e._id);var t})})]})})})]}),h&&(0,Fa.jsx)(kI,{expense:h,onClose:()=>{f(null)},onDownload:m})]})},EI=()=>{const e=ee(),[t,n]=(0,r.useState)({category:"",amount:"",description:"",date:"",vendor:"",paymentMode:""}),[a,s]=(0,r.useState)(""),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),u=e=>{const{name:t,value:r}=e.target;"category"===t?(n(e=>(0,ye.A)((0,ye.A)({},e),{},{[t]:r})),"Others"!==r&&s("")):n(e=>(0,ye.A)((0,ye.A)({},e),{},{[t]:r}))};return(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Fa.jsx)("button",{onClick:()=>e("/admin/expenses"),className:"p-3 rounded-xl hover:bg-gray-100 transition-colors shadow-sm hover:shadow-md",disabled:i,children:(0,Fa.jsx)(st,{className:"text-gray-600 text-xl"})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Add New Expense"}),(0,Fa.jsx)("p",{className:"text-gray-600",children:"Record a new expense entry"})]})]}),l&&(0,Fa.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg",children:(0,Fa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Error:"}),(0,Fa.jsx)("span",{children:l})]})}),(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,Fa.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,Fa.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Expense Details"})}),(0,Fa.jsxs)("form",{onSubmit:async n=>{n.preventDefault();const r="Others"===t.category?a:t.category;if(r&&t.amount&&t.date&&t.paymentMode){o(!0),c("");try{const n={category:r,amount:parseFloat(t.amount),description:t.description,date:t.date,vendor:t.vendor,paymentMode:t.paymentMode};201===(await Ea.post("/admin/expenses",n,{headers:{"Content-Type":"application/json"},withCredentials:!0})).status&&e("/admin/expenses")}catch(l){var s,i;console.error("Error saving expense:",l),c((null===(s=l.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message)||"Failed to save expense. Please try again.")}finally{o(!1)}}else c("Please fill in all required fields")},className:"p-6 space-y-6",children:[(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:"Category *"}),(0,Fa.jsxs)("select",{name:"category",value:t.category,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",required:!0,disabled:i,children:[(0,Fa.jsx)("option",{value:"",children:"Select Category"}),["Transport","Petrol / Diesel","Electricity","Raw Materials","Salary / Wages","Maintenance","Miscellaneous"].map(e=>(0,Fa.jsx)("option",{value:e,children:e},e)),(0,Fa.jsx)("option",{value:"Others",children:"Others"})]}),"Others"===t.category&&(0,Fa.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Custom Category *"}),(0,Fa.jsx)("input",{type:"text",name:"customCategory",value:a,onChange:e=>{const t=e.target.value;s(t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",placeholder:"Enter custom category",required:!0,disabled:i}),(0,Fa.jsx)("p",{className:"text-xs text-gray-500",children:"Enter your custom expense category"})]})]}),(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsxs)("label",{className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:[(0,Fa.jsx)(Et,{className:"text-gray-500"}),"Amount *"]}),(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Fa.jsx)(Et,{className:"text-gray-400"})}),(0,Fa.jsx)("input",{type:"number",name:"amount",value:t.amount,onChange:u,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",placeholder:"0.00",required:!0,disabled:i,min:"0",step:"0.01"})]})]}),(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsxs)("label",{className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:[(0,Fa.jsx)(lt,{className:"text-gray-500"}),"Date *"]}),(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Fa.jsx)(lt,{className:"text-gray-400"})}),(0,Fa.jsx)("input",{type:"date",name:"date",value:t.date,onChange:u,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",required:!0,disabled:i})]})]}),(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 flex items-center gap-1",children:"Payment Mode *"}),(0,Fa.jsxs)("select",{name:"paymentMode",value:t.paymentMode,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",required:!0,disabled:i,children:[(0,Fa.jsx)("option",{value:"",children:"Select Payment Mode"}),["Cash","UPI","Bank Transfer"].map(e=>(0,Fa.jsx)("option",{value:e,children:e},e))]})]}),(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Vendor"}),(0,Fa.jsx)("input",{type:"text",name:"vendor",value:t.vendor,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",placeholder:"Vendor name",disabled:i})]}),(0,Fa.jsxs)("div",{className:"space-y-1 md:col-span-2",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,Fa.jsx)("textarea",{name:"description",value:t.description,onChange:u,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm",placeholder:"Enter expense description",disabled:i})]})]}),(0,Fa.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,Fa.jsx)("button",{type:"button",onClick:()=>e("/admin/expenses"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:i,children:"Cancel"}),(0,Fa.jsx)("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-6 py-2 rounded-lg transition-all ".concat(i?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white shadow-md hover:shadow-lg"),children:i?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,Fa.jsx)("span",{children:"Saving..."})]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(Pt,{className:"text-lg"}),"Add Expense"]})})]})]})]})]})},FI=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=t?new Date(t).toLocaleDateString():"N/A",s=n?new Date(n).toLocaleDateString():"N/A",i=e.reduce((e,t)=>e+t.amount,0),o={};e.forEach(e=>{const t=e.category||"Uncategorized";o[t]||(o[t]=[]),o[t].push(e)});const l=Object.keys(o).map(e=>{const t=o[e].reduce((e,t)=>e+t.amount,0);return'\n      <tr>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">'.concat(e,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 14px;">').concat(o[e].length,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px;">\u20b9').concat(t.toFixed(2),"</td>\n      </tr>\n    ")}).join(""),c=e.map(e=>{var t;const n=e.date?new Date(e.date).toLocaleDateString():"N/A",r=e.admin?"Admin":(null===(t=e.shop)||void 0===t?void 0:t.name)||"N/A";return'\n      <tr>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">'.concat(n,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">').concat(r,'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">').concat(e.category||"N/A",'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">').concat(e.description||"-",'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; font-size: 14px;">').concat(e.paymentMode||"N/A",'</td>\n        <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 14px;">\u20b9').concat(e.amount.toFixed(2),"</td>\n      </tr>\n    ")}).join(""),u=[];r.shop&&u.push("Shop: ".concat(r.shop)),r.category&&u.push("Category: ".concat(r.category)),r.paymentMode&&u.push("Payment Mode: ".concat(r.paymentMode));const d=u.length>0?'<p style="margin: 8px 0; font-size: 16px;"><strong>Filters Applied:</strong> '.concat(u.join(", "),"</p>"):"",A='\n    <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 1000px; margin: 0 auto;">\n      \x3c!-- Header --\x3e\n      <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #333; padding-bottom: 20px;">\n        <h1 style="color: #333; margin: 0; font-size: 32px;">The Sweet Hub</h1>\n        <p style="color: #666; font-size: 16px; margin: 10px 0 5px 0;">156, Dubai Main Road, Thanjavur, Tamil Nadu - 613006</p>\n        <p style="color: #666; font-size: 16px; margin: 5px 0;">Phone: 7339200636</p>\n      </div>\n      \n      <div style="text-align: center; margin-bottom: 30px;">\n        <h2 style="color: #333; margin: 0; font-size: 28px;">EXPENSE REPORT</h2>\n        <p style="color: #666; font-size: 18px; margin: 15px 0;">\n          Period: '.concat(a," to ").concat(s,"\n        </p>\n        ").concat(d,'\n      </div>\n      \n      \x3c!-- Summary --\x3e\n      <div style="margin-bottom: 30px; background-color: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #dee2e6;">\n        <h3 style="color: #333; margin-top: 0; font-size: 20px;">Report Summary</h3>\n        <div style="display: flex; justify-content: space-around; text-align: center;">\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Expenses</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">').concat(e.length,'</p>\n          </div>\n          <div>\n            <p style="font-size: 16px; color: #666; margin: 0;">Total Amount</p>\n            <p style="font-size: 28px; font-weight: bold; color: #333; margin: 10px 0 0 0;">\u20b9').concat(i.toFixed(2),'</p>\n          </div>\n        </div>\n      </div>\n      \n      \x3c!-- Category Summary --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Expenses by Category</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Category</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: center; font-size: 16px; font-weight: bold;">Count</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: right; font-size: 16px; font-weight: bold;">Total Amount</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(l,'\n          </tbody>\n        </table>\n      </div>\n      \n      \x3c!-- Detailed Expenses --\x3e\n      <div style="margin-bottom: 30px;">\n        <h3 style="color: #333; margin-bottom: 15px; font-size: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee;">Detailed Expenses</h3>\n        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">\n          <thead>\n            <tr style="background-color: #e9ecef;">\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Date</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Shop</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Category</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Description</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: left; font-size: 16px; font-weight: bold;">Payment Mode</th>\n              <th style="padding: 12px; border: 1px solid #ddd; text-align: right; font-size: 16px; font-weight: bold;">Amount</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(c,'\n          </tbody>\n        </table>\n      </div>\n      \n      <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee; text-align: center;">\n        <p style="color: #777; font-size: 14px; margin: 0;">\n          Generated on ').concat((new Date).toLocaleDateString()," at ").concat((new Date).toLocaleTimeString(),'\n        </p>\n        <p style="color: #777; font-size: 14px; margin: 5px 0 0 0;">\n          Report generated by The Sweet Hub Expense Management System\n        </p>\n      </div>\n    </div>\n  '),h={margin:15,filename:"expense_report_".concat(a.replace(/\//g,"-"),"_to_").concat(s.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};U_()().from(A).set(h).save()},_I=()=>{const e=ee(),[t,n]=(0,r.useState)([]),[a,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)([]),[A,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[x,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(""),[w,N]=(0,r.useState)(""),j=[...new Set(t.map(e=>e.category))],C=[...new Set(t.map(e=>e.paymentMode))],B=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(e),k=e=>new Date(e).toLocaleDateString("en-IN");(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/admin/shops",{withCredentials:!0});d(e.data)}catch(e){console.error("Error fetching shops:",e)}})()},[]),(0,r.useEffect)(()=>{(async()=>{try{o(!0);const e=await Ea.get("/admin/expenses",{withCredentials:!0});n(e.data),s(e.data)}catch(e){console.error("Error fetching expenses:",e),c("Failed to fetch expenses")}finally{o(!1)}})()},[]),(0,r.useEffect)(()=>{let e=[...t];w&&(e=e.filter(e=>e.admin?"admin"===w:!!e.shop&&e.shop._id===w)),f&&(e=e.filter(e=>e.category===f)),y&&(e=e.filter(e=>e.paymentMode===y)),m&&(e=e.filter(e=>new Date(e.date)>=new Date(m))),x&&(e=e.filter(e=>{const t=new Date(e.date),n=new Date(x);return n.setHours(23,59,59,999),t<=n})),s(e)},[f,m,x,y,w,t]);const S=()=>{p(""),g(""),v(""),b(""),N("")},E=e=>{BI(e)};return(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Fa.jsx)("button",{onClick:()=>e("/admin/expenses"),className:"p-3 rounded-xl hover:bg-gray-100 transition-colors shadow-sm hover:shadow-md",children:(0,Fa.jsx)(st,{className:"text-gray-600 text-xl"})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Expense History"}),(0,Fa.jsx)("p",{className:"text-gray-600",children:"View and manage all expense records"})]})]}),(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Fa.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[(0,Fa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fa.jsx)(Bt,{className:"text-blue-600 text-xl"}),(0,Fa.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Filter Expenses"})]}),(0,Fa.jsxs)("button",{onClick:S,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-lg transition-colors",children:[(0,Fa.jsx)(tn,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"Clear Filters"})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Shop"}),(0,Fa.jsxs)("select",{value:w,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[(0,Fa.jsx)("option",{value:"",children:"All Shops"}),(0,Fa.jsx)("option",{value:"admin",children:"Admin Expenses"}),u.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,Fa.jsxs)("select",{value:f,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[(0,Fa.jsx)("option",{value:"",children:"All Categories"}),j.map(e=>(0,Fa.jsx)("option",{value:e,children:e},e))]})]}),(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Mode"}),(0,Fa.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[(0,Fa.jsx)("option",{value:"",children:"All Modes"}),C.map(e=>(0,Fa.jsx)("option",{value:e,children:e},e))]})]}),(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"From Date"}),(0,Fa.jsx)("input",{type:"date",value:m,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"To Date"}),(0,Fa.jsx)("input",{type:"date",value:x,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})]}),(m||x)&&(0,Fa.jsx)("div",{className:"mt-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 shadow-sm",children:(0,Fa.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Fa.jsx)(Bt,{className:"text-blue-600"}),(0,Fa.jsx)("span",{className:"text-blue-800 font-semibold",children:"Filtered Report"})]}),(0,Fa.jsxs)("div",{className:"ml-6",children:[(0,Fa.jsx)("p",{className:"text-blue-700 text-sm",children:m&&x?"Period: ".concat(k(m)," to ").concat(k(x)):m?"From: ".concat(k(m)):"To: ".concat(k(x))}),(0,Fa.jsxs)("p",{className:"text-blue-800 font-bold text-lg",children:["Total: ",B(a.reduce((e,t)=>e+t.amount,0))]}),(0,Fa.jsxs)("p",{className:"text-blue-600 text-sm",children:[a.length," expense",1!==a.length?"s":""]})]})]}),(0,Fa.jsxs)("button",{onClick:()=>{if(!m||!x)return;const e={};if(w){const t=u.find(e=>e._id===w);e.shop=t?t.name:"admin"===w?"Admin Expenses":w}f&&(e.category=f),y&&(e.paymentMode=y),FI(a,m,x,e)},disabled:!m||!x,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all ".concat(m&&x?"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white shadow-md hover:shadow-lg transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,Fa.jsx)(yt,{className:"text-lg"}),(0,Fa.jsx)("span",{className:"font-medium",children:"Download Report"})]})]})})]}),(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,Fa.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,Fa.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:["All Expenses (",a.length,")"]})}),(0,Fa.jsx)("div",{className:"p-6",children:i?(0,Fa.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,Fa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l?(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)("div",{className:"text-red-500 mb-4 text-xl",children:"\u26a0\ufe0f"}),(0,Fa.jsx)("div",{className:"text-red-500 mb-4",children:l}),(0,Fa.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors shadow-md hover:shadow-lg",children:"Retry"})]}):0===a.length?(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)(Bt,{className:"mx-auto text-gray-300 text-5xl mb-4"}),(0,Fa.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No expenses found"}),(0,Fa.jsx)("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters"}),(0,Fa.jsx)("button",{onClick:S,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all shadow-md hover:shadow-lg",children:"Clear Filters"})]}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shop"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Mode"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>{var t;return(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k(e.date)}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.admin?(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Admin"}):(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:(null===(t=e.shop)||void 0===t?void 0:t.name)||"Unknown Shop"})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.category}),(0,Fa.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs",children:(0,Fa.jsx)("div",{className:"max-w-xs truncate",title:e.description||"-",children:e.description||"-"})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e.paymentMode})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.vendor||"-"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:B(e.amount)}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Fa.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{const t=a.find(t=>t._id===e);t&&h(t)})(e._id),className:"p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:(0,Fa.jsx)(wt,{className:"h-5 w-5"})}),(0,Fa.jsx)("button",{onClick:()=>E(e),className:"p-2 text-green-600 hover:text-green-900 hover:bg-green-50 rounded-lg transition-colors",title:"Download PDF",children:(0,Fa.jsx)(yt,{className:"h-5 w-5"})})]})})]},e._id)})})]})})})]}),A&&(0,Fa.jsx)(kI,{expense:A,onClose:()=>{h(null)},onDownload:E})]})},II=(0,r.createContext)(),TI=()=>{const e=(0,r.useContext)(II);if(!e)throw new Error("useEWayBills must be used within an EWayBillProvider");return e},DI=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(()=>{try{const e=localStorage.getItem("ewayBills");return e?JSON.parse(e):[]}catch(e){return console.error("Error loading E-Way bills from localStorage:",e),[]}});(0,r.useEffect)(()=>{try{localStorage.setItem("ewayBills",JSON.stringify(n))}catch(e){console.error("Error saving E-Way bills to localStorage:",e)}},[n]);const s=e=>{const t=new Date;return new Date(e)>=t?"Active":"Expired"},i={ewayBills:n,addEWayBill:e=>{let t=0;e.totalInvoiceValue?t=parseFloat(e.totalInvoiceValue):e.goodsDetails&&e.goodsDetails.length>0&&(t=e.goodsDetails.reduce((e,t)=>e+(parseFloat(t.totalAmount)||0),0));const n=(0,ye.A)((0,ye.A)({},e),{},{id:Date.now(),totalAmount:t,status:s(e.validTo)});a(e=>[...e,n])}};return(0,Fa.jsx)(II.Provider,{value:i,children:t})},LI=()=>{const e=ee(),{addEWayBill:t}=TI(),[n,a]=(0,r.useState)({ewbNumber:"",generatedBy:"",generatedDate:"",validFrom:"",validTo:"",supplyType:"Outward",subType:"Supply",documentType:"Invoice",documentNumber:"",documentDate:"",senderGstin:"",senderLegalName:"",senderTradeName:"",senderAddress:"",senderPlace:"",senderPincode:"",senderState:"",senderStateCode:"",receiverGstin:"",receiverLegalName:"",receiverTradeName:"",receiverAddress:"",receiverPlace:"",receiverPincode:"",receiverState:"",receiverStateCode:"",transportMode:"Road",approxDistance:"",transporterId:"",transporterName:"",transporterDocNumber:"",transporterDocDate:"",vehicleNumber:"",vehicleType:"Regular",dispatchPlace:"",dispatchState:""}),[s,i]=(0,r.useState)([{productName:"",hsnCode:"",quantity:"",unit:"",taxableValue:"",cgstRate:"",sgstRate:"",igstRate:"",cgstAmount:"",sgstAmount:"",igstAmount:"",totalAmount:""}]),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),d=e=>{const{name:t,value:n}=e.target;a(e=>(0,ye.A)((0,ye.A)({},e),{},{[t]:n}))},A=(e,t)=>{const{name:n,value:r}=t.target,a=[...s];a[e][n]=r,i(a)};return(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Fa.jsx)("button",{onClick:()=>e("/admin/eway-bills/history"),className:"p-3 rounded-xl hover:bg-gray-100 transition-colors shadow-sm hover:shadow-md",disabled:o,children:(0,Fa.jsx)(st,{className:"text-gray-600 text-xl"})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Create E-Way Bill"}),(0,Fa.jsx)("p",{className:"text-gray-600",children:"Generate a new E-Way bill for transportation"})]})]}),c&&(0,Fa.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg",children:(0,Fa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Error:"}),(0,Fa.jsx)("span",{children:c})]})}),(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,Fa.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,Fa.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"E-Way Bill Details"})}),(0,Fa.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),l(!0),u("");try{const r=(0,ye.A)((0,ye.A)({},n),{},{goodsDetails:s,totalAmount:parseFloat(n.totalInvoiceValue)||0});t(r),e("/admin/eway-bills/history")}catch(a){console.error("Error creating E-Way bill:",a),u("Failed to create E-Way bill. Please try again.")}finally{l(!1)}},className:"p-6 space-y-8",children:[(0,Fa.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Fa.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-4",children:"E-Way Bill Header"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-Way Bill Number"}),(0,Fa.jsx)("input",{type:"text",name:"ewbNumber",value:n.ewbNumber,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter E-Way Bill Number",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Generated By"}),(0,Fa.jsx)("input",{type:"text",name:"generatedBy",value:n.generatedBy,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Generator Name",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Generated Date"}),(0,Fa.jsx)("input",{type:"date",name:"generatedDate",value:n.generatedDate,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid From"}),(0,Fa.jsx)("input",{type:"date",name:"validFrom",value:n.validFrom,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid To"}),(0,Fa.jsx)("input",{type:"date",name:"validTo",value:n.validTo,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supply Type"}),(0,Fa.jsxs)("select",{name:"supplyType",value:n.supplyType,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o,children:[(0,Fa.jsx)("option",{value:"Outward",children:"Outward"}),(0,Fa.jsx)("option",{value:"Inward",children:"Inward"})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub Type"}),(0,Fa.jsxs)("select",{name:"subType",value:n.subType,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o,children:[(0,Fa.jsx)("option",{value:"Supply",children:"Supply"}),(0,Fa.jsx)("option",{value:"Export",children:"Export"}),(0,Fa.jsx)("option",{value:"Job Work",children:"Job Work"}),(0,Fa.jsx)("option",{value:"Others",children:"Others"})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Type"}),(0,Fa.jsxs)("select",{name:"documentType",value:n.documentType,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o,children:[(0,Fa.jsx)("option",{value:"Invoice",children:"Invoice"}),(0,Fa.jsx)("option",{value:"Bill",children:"Bill"}),(0,Fa.jsx)("option",{value:"Challan",children:"Challan"})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Number"}),(0,Fa.jsx)("input",{type:"text",name:"documentNumber",value:n.documentNumber,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Document Number",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Date"}),(0,Fa.jsx)("input",{type:"date",name:"documentDate",value:n.documentDate,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o})]})]})]}),(0,Fa.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Fa.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-4",children:"PART-A: Sender (From) Information"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GSTIN"}),(0,Fa.jsx)("input",{type:"text",name:"senderGstin",value:n.senderGstin,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter GSTIN",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal Name"}),(0,Fa.jsx)("input",{type:"text",name:"senderLegalName",value:n.senderLegalName,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Legal Name",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trade Name"}),(0,Fa.jsx)("input",{type:"text",name:"senderTradeName",value:n.senderTradeName,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Trade Name",disabled:o})]}),(0,Fa.jsxs)("div",{className:"md:col-span-2",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Fa.jsx)("textarea",{name:"senderAddress",value:n.senderAddress,onChange:d,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Address",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Place"}),(0,Fa.jsx)("input",{type:"text",name:"senderPlace",value:n.senderPlace,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Place",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode"}),(0,Fa.jsx)("input",{type:"text",name:"senderPincode",value:n.senderPincode,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Pincode",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,Fa.jsx)("input",{type:"text",name:"senderState",value:n.senderState,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter State",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Code"}),(0,Fa.jsx)("input",{type:"text",name:"senderStateCode",value:n.senderStateCode,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter State Code",disabled:o})]})]})]}),(0,Fa.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Fa.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-4",children:"PART-A: Receiver (To) Information"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GSTIN"}),(0,Fa.jsx)("input",{type:"text",name:"receiverGstin",value:n.receiverGstin,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter GSTIN",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal Name"}),(0,Fa.jsx)("input",{type:"text",name:"receiverLegalName",value:n.receiverLegalName,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Legal Name",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trade Name"}),(0,Fa.jsx)("input",{type:"text",name:"receiverTradeName",value:n.receiverTradeName,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Trade Name",disabled:o})]}),(0,Fa.jsxs)("div",{className:"md:col-span-2",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Fa.jsx)("textarea",{name:"receiverAddress",value:n.receiverAddress,onChange:d,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Address",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Place"}),(0,Fa.jsx)("input",{type:"text",name:"receiverPlace",value:n.receiverPlace,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Place",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode"}),(0,Fa.jsx)("input",{type:"text",name:"receiverPincode",value:n.receiverPincode,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Pincode",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,Fa.jsx)("input",{type:"text",name:"receiverState",value:n.receiverState,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter State",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Code"}),(0,Fa.jsx)("input",{type:"text",name:"receiverStateCode",value:n.receiverStateCode,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter State Code",disabled:o})]})]})]}),(0,Fa.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h3",{className:"text-md font-semibold text-gray-800",children:"PART-A: Goods Details"}),(0,Fa.jsxs)("button",{type:"button",onClick:()=>{i(e=>[...e,{productName:"",hsnCode:"",quantity:"",unit:"",taxableValue:"",cgstRate:"",sgstRate:"",igstRate:"",cgstAmount:"",sgstAmount:"",igstAmount:"",totalAmount:""}])},className:"flex items-center gap-1 px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",disabled:o,children:[(0,Fa.jsx)(Pt,{className:"text-sm"}),(0,Fa.jsx)("span",{children:"Add Row"})]})]}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{className:"bg-gray-50",children:[(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"Product Name"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"HSN Code"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"Qty"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"Unit"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"Taxable Value"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"CGST Rate"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"SGST Rate"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"IGST Rate"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"CGST Amt"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"SGST Amt"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"IGST Amt"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"Total Amt"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs",children:"Action"})]})}),(0,Fa.jsx)("tbody",{children:s.map((e,t)=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Fa.jsx)("input",{type:"text",name:"productName",value:e.productName,onChange:e=>A(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Product",disabled:o})}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Fa.jsx)("input",{type:"text",name:"hsnCode",value:e.hsnCode,onChange:e=>A(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"HSN",disabled:o})}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Fa.jsx)("input",{type:"text",name:"quantity",value:e.quantity,onChange:e=>A(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Qty",disabled:o})}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Fa.jsx)("input",{type:"text",name:"unit",value:e.unit,onChange:e=>A(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Unit",disabled:o})}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Fa.jsx)("input",{type:"text",name:"taxableValue",value:e.taxableValue,onChange:e=>A(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Value",disabled:o})}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Fa.jsx)("input",{type:"text",name:"cgstRate",value:e.cgstRate,onChange:e=>A(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Rate",disabled:o})}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Fa.jsx)("input",{type:"text",name:"sgstRate",value:e.sgstRate,onChange:e=>A(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Rate",disabled:o})}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Fa.jsx)("input",{type:"text",name:"igstRate",value:e.igstRate,onChange:e=>A(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Rate",disabled:o})}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Fa.jsx)("input",{type:"text",name:"cgstAmount",value:e.cgstAmount,onChange:e=>A(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Amt",disabled:o})}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Fa.jsx)("input",{type:"text",name:"sgstAmount",value:e.sgstAmount,onChange:e=>A(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Amt",disabled:o})}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Fa.jsx)("input",{type:"text",name:"igstAmount",value:e.igstAmount,onChange:e=>A(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Amt",disabled:o})}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:(0,Fa.jsx)("input",{type:"text",name:"totalAmount",value:e.totalAmount,onChange:e=>A(t,e),className:"w-full px-1 py-1 text-xs border-none focus:ring-0",placeholder:"Total",disabled:o})}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-center",children:s.length>1&&(0,Fa.jsx)("button",{type:"button",onClick:()=>(e=>{if(s.length>1){const t=[...s];t.splice(e,1),i(t)}})(t),className:"text-red-500 hover:text-red-700",disabled:o,children:(0,Fa.jsx)(Pt,{className:"transform rotate-45 text-sm"})})})]},t))})]})})]}),(0,Fa.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Fa.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-4",children:"PART-B: Transport Details"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport Mode"}),(0,Fa.jsxs)("select",{name:"transportMode",value:n.transportMode,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o,children:[(0,Fa.jsx)("option",{value:"Road",children:"Road"}),(0,Fa.jsx)("option",{value:"Rail",children:"Rail"}),(0,Fa.jsx)("option",{value:"Air",children:"Air"}),(0,Fa.jsx)("option",{value:"Ship",children:"Ship"})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Approx Distance (KM)"}),(0,Fa.jsx)("input",{type:"number",name:"approxDistance",value:n.approxDistance,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Distance",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transporter ID"}),(0,Fa.jsx)("input",{type:"text",name:"transporterId",value:n.transporterId,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Transporter ID",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transporter Name"}),(0,Fa.jsx)("input",{type:"text",name:"transporterName",value:n.transporterName,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Transporter Name",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transporter Document Number"}),(0,Fa.jsx)("input",{type:"text",name:"transporterDocNumber",value:n.transporterDocNumber,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Document Number",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transporter Document Date"}),(0,Fa.jsx)("input",{type:"date",name:"transporterDocDate",value:n.transporterDocDate,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vehicle Number"}),(0,Fa.jsx)("input",{type:"text",name:"vehicleNumber",value:n.vehicleNumber,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Vehicle Number",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vehicle Type"}),(0,Fa.jsxs)("select",{name:"vehicleType",value:n.vehicleType,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o,children:[(0,Fa.jsx)("option",{value:"Regular",children:"Regular"}),(0,Fa.jsx)("option",{value:"ODC",children:"ODC"})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Place of Dispatch"}),(0,Fa.jsx)("input",{type:"text",name:"dispatchPlace",value:n.dispatchPlace,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Dispatch Place",disabled:o})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,Fa.jsx)("input",{type:"text",name:"dispatchState",value:n.dispatchState,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter State",disabled:o})]})]})]}),(0,Fa.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Fa.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-4",children:"Total Summary"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,Fa.jsxs)("div",{className:"md:col-span-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Taxable Amount"}),(0,Fa.jsx)("input",{type:"text",name:"totalTaxableAmount",value:n.totalTaxableAmount||"",onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",disabled:o})]}),(0,Fa.jsxs)("div",{className:"md:col-span-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total CGST"}),(0,Fa.jsx)("input",{type:"text",name:"totalCgst",value:n.totalCgst||"",onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",disabled:o})]}),(0,Fa.jsxs)("div",{className:"md:col-span-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total SGST"}),(0,Fa.jsx)("input",{type:"text",name:"totalSgst",value:n.totalSgst||"",onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",disabled:o})]}),(0,Fa.jsxs)("div",{className:"md:col-span-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total IGST"}),(0,Fa.jsx)("input",{type:"text",name:"totalIgst",value:n.totalIgst||"",onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",disabled:o})]}),(0,Fa.jsxs)("div",{className:"md:col-span-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Invoice Value"}),(0,Fa.jsx)("input",{type:"text",name:"totalInvoiceValue",value:n.totalInvoiceValue||"",onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",disabled:o})]})]})]}),(0,Fa.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Fa.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:"Notes"}),(0,Fa.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-600",children:[(0,Fa.jsx)("li",{children:"Validity depends on distance"}),(0,Fa.jsx)("li",{children:"E-Way Bill needs to be carried during transportation"})]})]}),(0,Fa.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,Fa.jsx)("button",{type:"button",onClick:()=>e("/admin/eway-bills/history"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:o,children:"Cancel"}),(0,Fa.jsx)("button",{type:"submit",disabled:o,className:"flex items-center gap-2 px-6 py-2 rounded-lg transition-all ".concat(o?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white shadow-md hover:shadow-lg"),children:o?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,Fa.jsx)("span",{children:"Creating..."})]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(Pt,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"Create E-Way Bill"})]})})]})]})]})]})},UI=e=>{if(!e)return console.error("Invalid E-Way bill data:",e),void alert("Unable to generate PDF: Invalid E-Way bill data");const t=(e.goodsDetails||[]).map((e,t)=>'\n    <tr>\n      <td style="padding: 8px; border: 1px solid #000; font-size: 12px;">'.concat(e.productName||"",'</td>\n      <td style="padding: 8px; border: 1px solid #000; font-size: 12px;">').concat(e.hsnCode||"",'</td>\n      <td style="padding: 8px; border: 1px solid #000; text-align: center; font-size: 12px;">').concat(e.quantity||"",'</td>\n      <td style="padding: 8px; border: 1px solid #000; font-size: 12px;">').concat(e.unit||"",'</td>\n      <td style="padding: 8px; border: 1px solid #000; text-align: right; font-size: 12px;">').concat(e.taxableValue||"",'</td>\n      <td style="padding: 8px; border: 1px solid #000; text-align: center; font-size: 12px;">').concat(e.cgstRate?"".concat(e.cgstRate,"%"):"",'</td>\n      <td style="padding: 8px; border: 1px solid #000; text-align: center; font-size: 12px;">').concat(e.sgstRate?"".concat(e.sgstRate,"%"):"",'</td>\n      <td style="padding: 8px; border: 1px solid #000; text-align: center; font-size: 12px;">').concat(e.igstRate?"".concat(e.igstRate,"%"):"",'</td>\n      <td style="padding: 8px; border: 1px solid #000; text-align: right; font-size: 12px;">').concat(e.cgstAmount||"",'</td>\n      <td style="padding: 8px; border: 1px solid #000; text-align: right; font-size: 12px;">').concat(e.sgstAmount||"",'</td>\n      <td style="padding: 8px; border: 1px solid #000; text-align: right; font-size: 12px;">').concat(e.igstAmount||"",'</td>\n      <td style="padding: 8px; border: 1px solid #000; text-align: right; font-size: 12px;">').concat(e.totalAmount||"","</td>\n    </tr>\n  ")).join(""),n='\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset="utf-8">\n      <title>E-Way Bill - '.concat(e.ewbNumber||"N/A",'</title>\n      <style>\n        @page {\n          size: A4;\n          margin: 20mm;\n        }\n        \n        body {\n          font-family: Arial, sans-serif;\n          font-size: 12px;\n          line-height: 1.4;\n          color: #000;\n          margin: 0;\n          padding: 0;\n        }\n        \n        .container {\n          max-width: 100%;\n          margin: 0 auto;\n          padding: 0;\n        }\n        \n        .header {\n          text-align: center;\n          margin-bottom: 20px;\n          border-bottom: 2px solid #000;\n          padding-bottom: 15px;\n        }\n        \n        .header h1 {\n          color: #000;\n          margin: 0;\n          font-size: 24px;\n        }\n        \n        .header p {\n          color: #000;\n          font-size: 14px;\n          margin: 5px 0;\n        }\n        \n        .section {\n          margin-bottom: 20px;\n          border: 1px solid #000;\n          padding: 15px;\n          page-break-inside: avoid;\n        }\n        \n        .section-title {\n          font-size: 16px;\n          margin: 0 0 10px 0;\n          border-bottom: 1px solid #000;\n          padding-bottom: 5px;\n          font-weight: bold;\n        }\n        \n        .grid {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 15px;\n        }\n        \n        .grid-2 {\n          grid-template-columns: repeat(2, 1fr);\n        }\n        \n        .grid-5 {\n          grid-template-columns: repeat(5, 1fr);\n        }\n        \n        .field {\n          margin-bottom: 8px;\n        }\n        \n        .field-label {\n          font-size: 12px;\n          margin: 0 0 3px 0;\n          font-weight: bold;\n        }\n        \n        .field-value {\n          font-size: 13px;\n          margin: 0;\n        }\n        \n        table {\n          width: 100%;\n          border-collapse: collapse;\n          font-size: 12px;\n          margin-top: 10px;\n        }\n        \n        th {\n          background-color: #f2f2f2;\n          padding: 8px;\n          border: 1px solid #000;\n          text-align: left;\n          font-weight: bold;\n        }\n        \n        td {\n          padding: 8px;\n          border: 1px solid #000;\n        }\n        \n        .text-center {\n          text-align: center;\n        }\n        \n        .text-right {\n          text-align: right;\n        }\n        \n        .summary-grid {\n          display: grid;\n          grid-template-columns: repeat(5, 1fr);\n          gap: 15px;\n        }\n        \n        .summary-item {\n          padding: 10px;\n          border: 1px solid #000;\n        }\n        \n        .summary-label {\n          font-size: 12px;\n          margin: 0 0 5px 0;\n          font-weight: bold;\n        }\n        \n        .summary-value {\n          font-size: 14px;\n          margin: 0;\n          font-weight: bold;\n        }\n        \n        .notes {\n          font-size: 12px;\n          padding-left: 20px;\n          margin: 0;\n        }\n        \n        .notes li {\n          margin-bottom: 5px;\n        }\n        \n        @media print {\n          body {\n            -webkit-print-color-adjust: exact;\n            print-color-adjust: exact;\n          }\n          \n          .page-break {\n            page-break-before: always;\n          }\n          \n          .page-break-after {\n            page-break-after: always;\n          }\n          \n          .page-break-inside-avoid {\n            page-break-inside: avoid;\n          }\n          \n          table {\n            page-break-inside: auto;\n          }\n          \n          tr {\n            page-break-inside: avoid;\n            page-break-after: auto;\n          }\n          \n          thead {\n            display: table-header-group;\n          }\n          \n          tfoot {\n            display: table-footer-group;\n          }\n        }\n      </style>\n    </head>\n    <body>\n      <div class="container">\n        \x3c!-- Header --\x3e\n        <div class="header">\n          <h1>E-Way Bill</h1>\n          <p>Generated in accordance with the Central Goods and Services Tax Act, 2017</p>\n        </div>\n        \n        \x3c!-- E-Way Bill Header --\x3e\n        <div class="section">\n          <div class="grid">\n            <div class="field">\n              <p class="field-label">E-Way Bill Number:</p>\n              <p class="field-value">').concat(e.ewbNumber||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Generated By:</p>\n              <p class="field-value">').concat(e.generatedBy||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Generated Date:</p>\n              <p class="field-value">').concat(e.generatedDate||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Valid From:</p>\n              <p class="field-value">').concat(e.validFrom||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Valid To:</p>\n              <p class="field-value">').concat(e.validTo||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Supply Type:</p>\n              <p class="field-value">').concat(e.supplyType||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Sub Type:</p>\n              <p class="field-value">').concat(e.subType||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Document Type:</p>\n              <p class="field-value">').concat(e.documentType||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Document Number:</p>\n              <p class="field-value">').concat(e.documentNumber||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Document Date:</p>\n              <p class="field-value">').concat(e.documentDate||"N/A",'</p>\n            </div>\n          </div>\n        </div>\n        \n        \x3c!-- PART-A: Sender Information --\x3e\n        <div class="section">\n          <h3 class="section-title">PART-A: Sender (From) Information</h3>\n          <div class="grid grid-2">\n            <div class="field">\n              <p class="field-label">GSTIN:</p>\n              <p class="field-value">').concat(e.senderGstin||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Legal Name:</p>\n              <p class="field-value">').concat(e.senderLegalName||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Trade Name:</p>\n              <p class="field-value">').concat(e.senderTradeName||"N/A",'</p>\n            </div>\n            \n            <div class="field" style="grid-column: span 2;">\n              <p class="field-label">Address:</p>\n              <p class="field-value">').concat(e.senderAddress||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Place:</p>\n              <p class="field-value">').concat(e.senderPlace||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Pincode:</p>\n              <p class="field-value">').concat(e.senderPincode||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">State:</p>\n              <p class="field-value">').concat(e.senderState||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">State Code:</p>\n              <p class="field-value">').concat(e.senderStateCode||"N/A",'</p>\n            </div>\n          </div>\n        </div>\n        \n        \x3c!-- PART-A: Receiver Information --\x3e\n        <div class="section">\n          <h3 class="section-title">PART-A: Receiver (To) Information</h3>\n          <div class="grid grid-2">\n            <div class="field">\n              <p class="field-label">GSTIN:</p>\n              <p class="field-value">').concat(e.receiverGstin||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Legal Name:</p>\n              <p class="field-value">').concat(e.receiverLegalName||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Trade Name:</p>\n              <p class="field-value">').concat(e.receiverTradeName||"N/A",'</p>\n            </div>\n            \n            <div class="field" style="grid-column: span 2;">\n              <p class="field-label">Address:</p>\n              <p class="field-value">').concat(e.receiverAddress||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Place:</p>\n              <p class="field-value">').concat(e.receiverPlace||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Pincode:</p>\n              <p class="field-value">').concat(e.receiverPincode||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">State:</p>\n              <p class="field-value">').concat(e.receiverState||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">State Code:</p>\n              <p class="field-value">').concat(e.receiverStateCode||"N/A",'</p>\n            </div>\n          </div>\n        </div>\n        \n        \x3c!-- PART-A: Goods Details --\x3e\n        <div class="section">\n          <h3 class="section-title">PART-A: Goods Details</h3>\n          <table>\n            <thead>\n              <tr>\n                <th>Product Name</th>\n                <th>HSN Code</th>\n                <th class="text-center">Qty</th>\n                <th>Unit</th>\n                <th class="text-right">Taxable Value</th>\n                <th class="text-center">CGST Rate</th>\n                <th class="text-center">SGST Rate</th>\n                <th class="text-center">IGST Rate</th>\n                <th class="text-right">CGST Amt</th>\n                <th class="text-right">SGST Amt</th>\n                <th class="text-right">IGST Amt</th>\n                <th class="text-right">Total Amt</th>\n              </tr>\n            </thead>\n            <tbody>\n              ').concat(t,'\n            </tbody>\n          </table>\n        </div>\n        \n        \x3c!-- PART-B: Transport Details --\x3e\n        <div class="section">\n          <h3 class="section-title">PART-B: Transport Details</h3>\n          <div class="grid">\n            <div class="field">\n              <p class="field-label">Transport Mode:</p>\n              <p class="field-value">').concat(e.transportMode||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Approx Distance (KM):</p>\n              <p class="field-value">').concat(e.approxDistance||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Transporter ID:</p>\n              <p class="field-value">').concat(e.transporterId||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Transporter Name:</p>\n              <p class="field-value">').concat(e.transporterName||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Transporter Document Number:</p>\n              <p class="field-value">').concat(e.transporterDocNumber||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Transporter Document Date:</p>\n              <p class="field-value">').concat(e.transporterDocDate||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Vehicle Number:</p>\n              <p class="field-value">').concat(e.vehicleNumber||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Vehicle Type:</p>\n              <p class="field-value">').concat(e.vehicleType||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">Place of Dispatch:</p>\n              <p class="field-value">').concat(e.dispatchPlace||"N/A",'</p>\n            </div>\n            \n            <div class="field">\n              <p class="field-label">State:</p>\n              <p class="field-value">').concat(e.dispatchState||"N/A",'</p>\n            </div>\n          </div>\n        </div>\n        \n        \x3c!-- Total Summary Section --\x3e\n        <div class="section">\n          <h3 class="section-title">Total Summary</h3>\n          <div class="summary-grid">\n            <div class="summary-item">\n              <p class="summary-label">Total Taxable Amount:</p>\n              <p class="summary-value">\u20b9').concat(e.totalTaxableAmount||"0.00",'</p>\n            </div>\n            \n            <div class="summary-item">\n              <p class="summary-label">Total CGST:</p>\n              <p class="summary-value">\u20b9').concat(e.totalCgst||"0.00",'</p>\n            </div>\n            \n            <div class="summary-item">\n              <p class="summary-label">Total SGST:</p>\n              <p class="summary-value">\u20b9').concat(e.totalSgst||"0.00",'</p>\n            </div>\n            \n            <div class="summary-item">\n              <p class="summary-label">Total IGST:</p>\n              <p class="summary-value">\u20b9').concat(e.totalIgst||"0.00",'</p>\n            </div>\n            \n            <div class="summary-item">\n              <p class="summary-label">Total Invoice Value:</p>\n              <p class="summary-value">\u20b9').concat(e.totalInvoiceValue||"0.00",'</p>\n            </div>\n          </div>\n        </div>\n        \n        \x3c!-- Notes Section --\x3e\n        <div class="section">\n          <h3 class="section-title">Notes</h3>\n          <ul class="notes">\n            ').concat((e.notes||["Validity depends on distance","E-Way Bill needs to be carried during transportation"]).map(e=>"<li>".concat(e,"</li>")).join(""),"\n          </ul>\n        </div>\n      </div>\n    </body>\n    </html>\n  "),r=e.ewbNumber||"EWayBill",a=e.generatedDate||(new Date).toISOString().split("T")[0],s={margin:10,filename:"eway_bill_".concat(r,"_").concat(a.replace(/\//g,"-"),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};U_()().from(n).set(s).save()},PI=()=>{const e=ee(),{ewayBills:t}=TI(),[n,a]=(0,r.useState)(t),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=t;if(s){const t=s.toLowerCase();e=e.filter(e=>e.ewbNumber.toLowerCase().includes(t)||e.documentNumber.toLowerCase().includes(t)||e.generatedBy.toLowerCase().includes(t))}o&&"All"!==o&&(e=e.filter(e=>e.status===o)),a(e)},[s,o,t]);const c=e=>{switch(e){case"Active":return"bg-green-100 text-green-800";case"Expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},u=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});return(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"E-Way Bills History"}),(0,Fa.jsx)("p",{className:"text-gray-600",children:"View and manage all E-Way bills"})]}),(0,Fa.jsxs)("button",{onClick:()=>e("/admin/eway-bills/create"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all",children:[(0,Fa.jsx)(Pt,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"Create E-Way Bill"})]})]}),(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Fa.jsx)("div",{className:"md:col-span-2",children:(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Fa.jsx)(Qt,{className:"text-gray-400"})}),(0,Fa.jsx)("input",{type:"text",placeholder:"Search by E-Way Bill Number, Document Number...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:s,onChange:e=>i(e.target.value)})]})}),(0,Fa.jsx)("div",{children:(0,Fa.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:o,onChange:e=>l(e.target.value),children:[(0,Fa.jsx)("option",{value:"",children:"Select Status"}),(0,Fa.jsx)("option",{value:"Active",children:"Active"}),(0,Fa.jsx)("option",{value:"Expired",children:"Expired"})]})})]})}),(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"E-Way Bill Number"}),(0,Fa.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Document Number"}),(0,Fa.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Generated By"}),(0,Fa.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Generated Date"}),(0,Fa.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valid Period"}),(0,Fa.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),(0,Fa.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Fa.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length>0?n.map(t=>(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(Yt,{className:"text-gray-400 mr-2"}),(0,Fa.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.ewbNumber})]})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Fa.jsx)("div",{className:"text-sm text-gray-900",children:t.documentNumber})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Fa.jsx)("div",{className:"text-sm text-gray-900",children:t.generatedBy})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Fa.jsx)("div",{className:"text-sm text-gray-900",children:u(t.generatedDate)})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Fa.jsxs)("div",{className:"text-sm text-gray-900",children:[u(t.validFrom)," to ",u(t.validTo)]})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Fa.jsxs)("div",{className:"text-sm text-gray-900",children:["\u20b9",t.totalAmount.toFixed(2)]})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Fa.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(c(t.status)),children:t.status})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Fa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Fa.jsxs)("button",{onClick:()=>e("/admin/eway-bills/view/".concat(t.id)),className:"text-blue-600 hover:text-blue-900 flex items-center gap-1",children:[(0,Fa.jsx)(Ct,{className:"text-sm"}),(0,Fa.jsx)("span",{children:"View"})]}),(0,Fa.jsxs)("button",{onClick:()=>(e=>{UI(e)})(t),className:"text-green-600 hover:text-green-900 flex items-center gap-1",children:[(0,Fa.jsx)(yt,{className:"text-sm"}),(0,Fa.jsx)("span",{children:"PDF"})]})]})})]},t.id)):(0,Fa.jsx)("tr",{children:(0,Fa.jsx)("td",{colSpan:"8",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No E-Way bills found"})})})]})})}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)("div",{className:"p-3 rounded-lg bg-blue-100",children:(0,Fa.jsx)(Yt,{className:"text-blue-600 text-xl"})}),(0,Fa.jsxs)("div",{className:"ml-4",children:[(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Total E-Way Bills"}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)("div",{className:"p-3 rounded-lg bg-green-100",children:(0,Fa.jsx)(Yt,{className:"text-green-600 text-xl"})}),(0,Fa.jsxs)("div",{className:"ml-4",children:[(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Active E-Way Bills"}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"Active"===e.status).length})]})]})}),(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)("div",{className:"p-3 rounded-lg bg-red-100",children:(0,Fa.jsx)(Yt,{className:"text-red-600 text-xl"})}),(0,Fa.jsxs)("div",{className:"ml-4",children:[(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Expired E-Way Bills"}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"Expired"===e.status).length})]})]})})]})]})},RI=()=>{const e=ee(),{id:t}=function(){let{matches:e}=r.useContext(q),t=e[e.length-1];return t?t.params:{}}(),{ewayBills:n}=TI(),a=n.find(e=>e.id==t)||{};return a.id?(0,Fa.jsxs)("div",{className:"space-y-6 print:p-0 print:max-w-none print:w-full",children:[(0,Fa.jsx)("style",{children:"\n        @media print {\n          @page {\n            size: A4;\n            margin: 20mm;\n          }\n          \n          body {\n            -webkit-print-color-adjust: exact;\n            print-color-adjust: exact;\n            font-family: Arial, sans-serif;\n            font-size: 12px;\n            line-height: 1.4;\n            color: #000;\n            margin: 0;\n            padding: 0;\n          }\n          \n          .print-container {\n            max-width: 100%;\n            margin: 0 auto;\n            padding: 0;\n          }\n          \n          .print-header {\n            text-align: center;\n            margin-bottom: 20px;\n            border-bottom: 2px solid #000;\n            padding-bottom: 15px;\n          }\n          \n          .print-header h1 {\n            color: #000;\n            margin: 0;\n            font-size: 24px;\n          }\n          \n          .print-header p {\n            color: #000;\n            font-size: 14px;\n            margin: 5px 0;\n          }\n          \n          .print-section {\n            margin-bottom: 20px;\n            border: 1px solid #000;\n            padding: 15px;\n            page-break-inside: avoid;\n          }\n          \n          .print-section-title {\n            font-size: 16px;\n            margin: 0 0 10px 0;\n            border-bottom: 1px solid #000;\n            padding-bottom: 5px;\n            font-weight: bold;\n          }\n          \n          .print-grid {\n            display: grid;\n            grid-template-columns: repeat(3, 1fr);\n            gap: 15px;\n          }\n          \n          .print-grid-2 {\n            grid-template-columns: repeat(2, 1fr);\n          }\n          \n          .print-grid-5 {\n            grid-template-columns: repeat(5, 1fr);\n          }\n          \n          .print-field {\n            margin-bottom: 8px;\n          }\n          \n          .print-field-label {\n            font-size: 12px;\n            margin: 0 0 3px 0;\n            font-weight: bold;\n          }\n          \n          .print-field-value {\n            font-size: 13px;\n            margin: 0;\n          }\n          \n          .print-table {\n            width: 100%;\n            border-collapse: collapse;\n            font-size: 12px;\n            margin-top: 10px;\n          }\n          \n          .print-th {\n            background-color: #f2f2f2;\n            padding: 8px;\n            border: 1px solid #000;\n            text-align: left;\n            font-weight: bold;\n          }\n          \n          .print-td {\n            padding: 8px;\n            border: 1px solid #000;\n          }\n          \n          .print-text-center {\n            text-align: center;\n          }\n          \n          .print-text-right {\n            text-align: right;\n          }\n          \n          .print-summary-grid {\n            display: grid;\n            grid-template-columns: repeat(5, 1fr);\n            gap: 15px;\n          }\n          \n          .print-summary-item {\n            padding: 10px;\n            border: 1px solid #000;\n          }\n          \n          .print-summary-label {\n            font-size: 12px;\n            margin: 0 0 5px 0;\n            font-weight: bold;\n          }\n          \n          .print-summary-value {\n            font-size: 14px;\n            margin: 0;\n            font-weight: bold;\n          }\n          \n          .print-notes {\n            font-size: 12px;\n            padding-left: 20px;\n            margin: 0;\n          }\n          \n          .print-notes li {\n            margin-bottom: 5px;\n          }\n          \n          /* Existing print styles */\n          .print\\:text-xs {\n            font-size: 0.75rem !important;\n          }\n          .print\\:text-sm {\n            font-size: 0.875rem !important;\n          }\n          .print\\:px-1 {\n            padding-left: 0.25rem !important;\n            padding-right: 0.25rem !important;\n          }\n          .print\\:py-1 {\n            padding-top: 0.25rem !important;\n            padding-bottom: 0.25rem !important;\n          }\n          .print\\:gap-3 {\n            gap: 0.75rem !important;\n          }\n          .print\\:mb-2 {\n            margin-bottom: 0.5rem !important;\n          }\n          .print\\:pl-4 {\n            padding-left: 1rem !important;\n          }\n          .print\\:font-normal {\n            font-weight: normal !important;\n          }\n          .print\\:text-lg {\n            font-size: 1.125rem !important;\n          }\n          table {\n            page-break-inside: auto;\n          }\n          tr {\n            page-break-inside: avoid;\n            page-break-after: auto;\n          }\n          thead {\n            display: table-header-group;\n          }\n          tfoot {\n            display: table-footer-group;\n          }\n          .print\\:break-after {\n            page-break-after: always;\n          }\n          .print\\:break-inside-avoid {\n            page-break-inside: avoid;\n          }\n        }\n      "}),(0,Fa.jsxs)("div",{className:"flex items-center gap-4 print:hidden",children:[(0,Fa.jsx)("button",{onClick:()=>e("/admin/eway-bills/history"),className:"p-3 rounded-xl hover:bg-gray-100 transition-colors shadow-sm hover:shadow-md",children:(0,Fa.jsx)(st,{className:"text-gray-600 text-xl"})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"E-Way Bill Details"}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:["View E-Way Bill #",a.ewbNumber||"N/A"]})]}),(0,Fa.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,Fa.jsxs)("button",{onClick:()=>{setTimeout(()=>{window.print()},100)},className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,Fa.jsx)(Rt,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"Print"})]}),(0,Fa.jsxs)("button",{onClick:()=>{UI(a)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all",children:[(0,Fa.jsx)(yt,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"Download PDF"})]})]})]}),(0,Fa.jsxs)("div",{className:"hidden print:block print-header",children:[(0,Fa.jsx)("h1",{className:"text-2xl font-bold",children:"E-Way Bill"}),(0,Fa.jsx)("p",{className:"text-sm",children:"Generated in accordance with the Central Goods and Services Tax Act, 2017"}),(0,Fa.jsx)("div",{className:"border-b-2 border-black my-4"})]}),(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 print:p-0 print:border-none print:shadow-none print:rounded-none print:border-0 print-container",children:[(0,Fa.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 mb-6 print:border-black print:rounded-none print:border print:p-4 print:print-section",children:[(0,Fa.jsxs)("div",{className:"text-center mb-4 print:mb-3 print-header",children:[(0,Fa.jsx)("h2",{className:"text-xl font-bold print:text-xl",children:"E-Way Bill"}),(0,Fa.jsx)("p",{className:"text-sm print:text-xs",children:"Generated in accordance with the Central Goods and Services Tax Act, 2017"})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 print:grid-cols-3 print:gap-4 print-grid",children:[(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print:text-xs print:font-normal print-field-label",children:"E-Way Bill Number:"}),(0,Fa.jsx)("p",{className:"font-bold print:text-sm print-field-value",children:a.ewbNumber||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Generated By:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.generatedBy||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Generated Date:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.generatedDate||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Valid From:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.validFrom||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Valid To:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.validTo||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Supply Type:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.supplyType||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Sub Type:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.subType||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Document Type:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.documentType||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Document Number:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.documentNumber||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Document Date:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.documentDate||"N/A"})]})]})]}),(0,Fa.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 mb-6 print:border-black print:rounded-none print:border print:p-4 print:print-section",children:[(0,Fa.jsx)("h3",{className:"text-md font-semibold mb-3 print:text-lg print:mb-2 print-section-title",children:"PART-A: Sender (From) Information"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 print:grid-cols-2 print:gap-4 print-grid print-grid-2",children:[(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print:text-xs print:font-normal print-field-label",children:"GSTIN:"}),(0,Fa.jsx)("p",{className:"print:text-sm print-field-value",children:a.senderGstin||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Legal Name:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.senderLegalName||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Trade Name:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.senderTradeName||"N/A"})]}),(0,Fa.jsxs)("div",{className:"md:col-span-2 print:col-span-2",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Address:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.senderAddress||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Place:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.senderPlace||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Pincode:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.senderPincode||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"State:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.senderState||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"State Code:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.senderStateCode||"N/A"})]})]})]}),(0,Fa.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 mb-6 print:border-black print:rounded-none print:border print:p-4 print:print-section",children:[(0,Fa.jsx)("h3",{className:"text-md font-semibold mb-3 print:text-lg print:mb-2 print-section-title",children:"PART-A: Receiver (To) Information"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 print:grid-cols-2 print:gap-4 print-grid print-grid-2",children:[(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print:text-xs print:font-normal print-field-label",children:"GSTIN:"}),(0,Fa.jsx)("p",{className:"print:text-sm print-field-value",children:a.receiverGstin||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Legal Name:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.receiverLegalName||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Trade Name:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.receiverTradeName||"N/A"})]}),(0,Fa.jsxs)("div",{className:"md:col-span-2 print:col-span-2",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Address:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.receiverAddress||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Place:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.receiverPlace||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Pincode:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.receiverPincode||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"State:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.receiverState||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"State Code:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.receiverStateCode||"N/A"})]})]})]}),(0,Fa.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 mb-6 print:border-black print:rounded-none print:border print:p-4 print:print-section",children:[(0,Fa.jsx)("h3",{className:"text-md font-semibold mb-3 print:text-lg print:mb-2 print-section-title",children:"PART-A: Goods Details"}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full border border-gray-300 print:border-black print:text-xs print-table",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{className:"bg-gray-50 print:bg-white",children:[(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th",children:"Product Name"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th",children:"HSN Code"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-center",children:"Qty"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th",children:"Unit"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-right",children:"Taxable Value"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-center",children:"CGST Rate"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-center",children:"SGST Rate"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-center",children:"IGST Rate"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-right",children:"CGST Amt"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-right",children:"SGST Amt"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-right",children:"IGST Amt"}),(0,Fa.jsx)("th",{className:"border border-gray-300 px-2 py-2 text-xs print:border-black print:px-1 print:py-1 print-th print-text-right",children:"Total Amt"})]})}),(0,Fa.jsx)("tbody",{children:(a.goodsDetails||[]).map((e,t)=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td",children:e.productName||""}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td",children:e.hsnCode||""}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-center",children:e.quantity||""}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td",children:e.unit||""}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-right",children:e.taxableValue||""}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-center",children:e.cgstRate?"".concat(e.cgstRate,"%"):""}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-center",children:e.sgstRate?"".concat(e.sgstRate,"%"):""}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-center",children:e.igstRate?"".concat(e.igstRate,"%"):""}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-right",children:e.cgstAmount||""}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-right",children:e.sgstAmount||""}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-right",children:e.igstAmount||""}),(0,Fa.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs print:border-black print:px-1 print:py-1 print-td print-text-right",children:e.totalAmount||""})]},t))})]})})]}),(0,Fa.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 mb-6 print:border-black print:rounded-none print:border print:p-4 print:print-section",children:[(0,Fa.jsx)("h3",{className:"text-md font-semibold mb-3 print:text-lg print:mb-2 print-section-title",children:"PART-B: Transport Details"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 print:grid-cols-3 print:gap-4 print-grid",children:[(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print:text-xs print:font-normal print-field-label",children:"Transport Mode:"}),(0,Fa.jsx)("p",{className:"print:text-sm print-field-value",children:a.transportMode||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Approx Distance (KM):"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.approxDistance||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Transporter ID:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.transporterId||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Transporter Name:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.transporterName||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Transporter Document Number:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.transporterDocNumber||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Transporter Document Date:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.transporterDocDate||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Vehicle Number:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.vehicleNumber||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Vehicle Type:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.vehicleType||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"Place of Dispatch:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.dispatchPlace||"N/A"})]}),(0,Fa.jsxs)("div",{className:"print-field",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-field-label",children:"State:"}),(0,Fa.jsx)("p",{className:"print-field-value",children:a.dispatchState||"N/A"})]})]})]}),(0,Fa.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 mb-6 print:border-black print:rounded-none print:border print:p-4 print:print-section",children:[(0,Fa.jsx)("h3",{className:"text-md font-semibold mb-3 print:text-lg print:mb-2 print-section-title",children:"Total Summary"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 print:grid-cols-5 print:gap-4 print-grid print-grid-5",children:[(0,Fa.jsxs)("div",{className:"print-summary-item",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print:text-xs print:font-normal print-summary-label",children:"Total Taxable Amount:"}),(0,Fa.jsxs)("p",{className:"font-bold print:text-sm print-summary-value",children:["\u20b9",a.totalTaxableAmount||"0.00"]})]}),(0,Fa.jsxs)("div",{className:"print-summary-item",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-summary-label",children:"Total CGST:"}),(0,Fa.jsxs)("p",{className:"font-bold print-summary-value",children:["\u20b9",a.totalCgst||"0.00"]})]}),(0,Fa.jsxs)("div",{className:"print-summary-item",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-summary-label",children:"Total SGST:"}),(0,Fa.jsxs)("p",{className:"font-bold print-summary-value",children:["\u20b9",a.totalSgst||"0.00"]})]}),(0,Fa.jsxs)("div",{className:"print-summary-item",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-summary-label",children:"Total IGST:"}),(0,Fa.jsxs)("p",{className:"font-bold print-summary-value",children:["\u20b9",a.totalIgst||"0.00"]})]}),(0,Fa.jsxs)("div",{className:"print-summary-item",children:[(0,Fa.jsx)("p",{className:"text-sm font-medium print-summary-label",children:"Total Invoice Value:"}),(0,Fa.jsxs)("p",{className:"font-bold print-summary-value",children:["\u20b9",a.totalInvoiceValue||"0.00"]})]})]})]}),(0,Fa.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 print:border-black print:rounded-none print:border print:p-4 print:print-section",children:[(0,Fa.jsx)("h3",{className:"text-md font-semibold mb-2 print:text-lg print:mb-2 print-section-title",children:"Notes"}),(0,Fa.jsx)("ul",{className:"list-disc pl-5 space-y-1 text-sm print:text-xs print:pl-4 print-notes",children:(a.notes||["Validity depends on distance","E-Way Bill needs to be carried during transportation"]).map((e,t)=>(0,Fa.jsx)("li",{className:"print:text-xs",children:e},t))})]})]})]}):(0,Fa.jsxs)("div",{className:"space-y-6 print:p-0",children:[(0,Fa.jsxs)("div",{className:"flex items-center gap-4 print:hidden",children:[(0,Fa.jsx)("button",{onClick:()=>e("/admin/eway-bills/history"),className:"p-3 rounded-xl hover:bg-gray-100 transition-colors shadow-sm hover:shadow-md",children:(0,Fa.jsx)(st,{className:"text-gray-600 text-xl"})}),(0,Fa.jsx)("div",{children:(0,Fa.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"E-Way Bill Not Found"})})]}),(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,Fa.jsx)("p",{className:"text-gray-600",children:"The E-Way bill you are looking for could not be found."})})]})},OI=()=>{const[e,t]=(0,r.useState)(!1),n=()=>{t(!e)};return(0,Fa.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[e&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 z-30 lg:hidden",onClick:n}),(0,Fa.jsx)("div",{className:"fixed inset-y-0 left-0 transform ".concat(e?"translate-x-0":"-translate-x-full"," \n                             lg:relative lg:translate-x-0 transition-transform duration-300 ease-in-out z-40"),children:(0,Fa.jsx)(Oa,{})}),(0,Fa.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,Fa.jsxs)("header",{className:"lg:hidden bg-white shadow-sm p-4 flex items-center justify-between",children:[(0,Fa.jsx)("button",{onClick:n,className:"text-gray-500 focus:outline-none",children:(0,Fa.jsx)(Ee,{size:24})}),(0,Fa.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"Admin Panel"})]}),(0,Fa.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-4 md:p-6",children:(0,Fa.jsxs)(xe,{children:[(0,Fa.jsx)(me,{path:"dashboard",element:(0,Fa.jsx)(Ws,{})}),(0,Fa.jsx)(me,{path:"workers/add",element:(0,Fa.jsx)(Xs,{})}),(0,Fa.jsx)(me,{path:"workers/view",element:(0,Fa.jsx)($s,{})}),(0,Fa.jsx)(me,{path:"workers/attendance",element:(0,Fa.jsx)(y_,{})}),(0,Fa.jsx)(me,{path:"workers/salary",element:(0,Fa.jsx)(b_,{})}),(0,Fa.jsx)(me,{path:"workers/holidays",element:(0,Fa.jsx)(w_,{})}),(0,Fa.jsx)(me,{path:"workers/face-enrollment",element:(0,Fa.jsx)(N_,{})}),(0,Fa.jsx)(me,{path:"departments/create",element:(0,Fa.jsx)(j_,{})}),(0,Fa.jsx)(me,{path:"departments/view",element:(0,Fa.jsx)(C_,{})}),(0,Fa.jsx)(me,{path:"products/add-category",element:(0,Fa.jsx)(B_,{})}),(0,Fa.jsx)(me,{path:"products/add",element:(0,Fa.jsx)(I_,{})}),(0,Fa.jsx)(me,{path:"products/view",element:(0,Fa.jsx)(O_,{})}),(0,Fa.jsx)(me,{path:"warehouse/track-stock",element:(0,Fa.jsx)(M_,{})}),(0,Fa.jsx)(me,{path:"warehouse/stock-alerts",element:(0,Fa.jsx)(Q_,{})}),(0,Fa.jsx)(me,{path:"warehouse/store-room",element:(0,Fa.jsx)(eI,{})}),(0,Fa.jsx)(me,{path:"warehouse/manufacturing",element:(0,Fa.jsx)(nI,{})}),(0,Fa.jsx)(me,{path:"warehouse/daily-schedule",element:(0,Fa.jsx)(rI,{})}),(0,Fa.jsx)(me,{path:"warehouse/outgoing-materials",element:(0,Fa.jsx)(aI,{})}),(0,Fa.jsx)(me,{path:"warehouse/material-stock-alerts",element:(0,Fa.jsx)(sI,{})}),(0,Fa.jsx)(me,{path:"warehouse/packing-materials/alerts",element:(0,Fa.jsx)(iI,{})}),(0,Fa.jsx)(me,{path:"warehouse/packing-materials/outgoing",element:(0,Fa.jsx)(oI,{})}),(0,Fa.jsx)(me,{path:"warehouse/return-products",element:(0,Fa.jsx)(cI,{})}),(0,Fa.jsx)(me,{path:"warehouse/return-products/history",element:(0,Fa.jsx)(uI,{})}),(0,Fa.jsx)(me,{path:"warehouse/packing-materials/view",element:(0,Fa.jsx)(hI,{})}),(0,Fa.jsx)(me,{path:"warehouse/raw-materials",element:(0,Fa.jsx)(fI,{})}),(0,Fa.jsx)(me,{path:"shops/add",element:(0,Fa.jsx)(W_,{})}),(0,Fa.jsx)(me,{path:"shops/view",element:(0,Fa.jsx)(K_,{})}),(0,Fa.jsx)(me,{path:"settings",element:(0,Fa.jsx)(CI,{})}),(0,Fa.jsx)(me,{path:"tasks/daily",element:(0,Fa.jsx)(Z_,{})}),(0,Fa.jsx)(me,{path:"tasks/completed",element:(0,Fa.jsx)($_,{})}),(0,Fa.jsx)(me,{path:"billing/create",element:(0,Fa.jsx)(q_,{})}),(0,Fa.jsx)(me,{path:"billing/view",element:(0,Fa.jsx)(Y_,{})}),(0,Fa.jsx)(me,{path:"invoices/history",element:(0,Fa.jsx)(vI,{})}),(0,Fa.jsx)(me,{path:"profit-loss",element:(0,Fa.jsx)(NI,{})}),(0,Fa.jsx)(me,{path:"expenses",element:(0,Fa.jsx)(SI,{})}),(0,Fa.jsx)(me,{path:"expenses/add",element:(0,Fa.jsx)(EI,{})}),(0,Fa.jsx)(me,{path:"expenses/history",element:(0,Fa.jsx)(_I,{})}),(0,Fa.jsx)(me,{path:"eway-bills/create",element:(0,Fa.jsx)(LI,{})}),(0,Fa.jsx)(me,{path:"eway-bills/history",element:(0,Fa.jsx)(PI,{})}),(0,Fa.jsx)(me,{path:"eway-bills/view/:id",element:(0,Fa.jsx)(RI,{})}),(0,Fa.jsx)(me,{path:"*",element:(0,Fa.jsx)(pe,{to:"dashboard"})})]})})]})]})},MI=e=>{let{size:t="w-8 h-8",color:n="pink"}=e;return(0,Fa.jsxs)("svg",{viewBox:"0 0 100 100",className:"".concat(t," opacity-20"),children:[(0,Fa.jsx)("rect",{x:"20",y:"60",width:"60",height:"30",rx:"5",fill:"pink"===n?"#ff85a2":"#ffd166"}),(0,Fa.jsx)("rect",{x:"25",y:"45",width:"50",height:"20",rx:"3",fill:"pink"===n?"#ff6b9c":"#ffc44d"}),(0,Fa.jsx)("rect",{x:"30",y:"35",width:"40",height:"15",rx:"2",fill:"pink"===n?"#ff5286":"#ffb734"}),(0,Fa.jsx)("rect",{x:"48",y:"25",width:"4",height:"15",fill:"#4ade80"}),(0,Fa.jsx)("path",{d:"M50 20 Q52 15 50 10 Q48 15 50 20",fill:"#fbbf24"})]})},QI=e=>{let{size:t="w-6 h-6",color:n="yellow"}=e;return(0,Fa.jsxs)("svg",{viewBox:"0 0 100 100",className:"".concat(t," opacity-20"),children:[(0,Fa.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"yellow"===n?"#ffd166":"#c968ff"}),(0,Fa.jsx)("circle",{cx:"40",cy:"40",r:"4",fill:"#78350f"}),(0,Fa.jsx)("circle",{cx:"60",cy:"35",r:"3",fill:"#78350f"}),(0,Fa.jsx)("circle",{cx:"50",cy:"60",r:"3.5",fill:"#78350f"})]})},HI=e=>{let{size:t="w-7 h-7",color:n="pink"}=e;return(0,Fa.jsxs)("svg",{viewBox:"0 0 100 100",className:"".concat(t," opacity-20"),children:[(0,Fa.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"pink"===n?"#ff85a2":"#6dcff6"}),(0,Fa.jsx)("circle",{cx:"50",cy:"50",r:"15",fill:"#f0f0f0"}),(0,Fa.jsx)("circle",{cx:"50",cy:"15",r:"3",fill:"#fbbf24"}),(0,Fa.jsx)("circle",{cx:"75",cy:"35",r:"2.5",fill:"#34d399"})]})},zI=e=>{let{size:t="w-6 h-6",color:n="pink"}=e;return(0,Fa.jsxs)("svg",{viewBox:"0 0 100 100",className:"".concat(t," opacity-20"),children:[(0,Fa.jsx)("path",{d:"M50 70 L35 90 L65 90 Z",fill:"#f59e0b"}),(0,Fa.jsx)("circle",{cx:"50",cy:"50",r:"25",fill:"pink"===n?"#ff85a2":"#6dcff6"})]})},WI=e=>{let{size:t="w-5 h-5",color:n="purple"}=e;return(0,Fa.jsxs)("svg",{viewBox:"0 0 100 100",className:"".concat(t," opacity-20"),children:[(0,Fa.jsx)("path",{d:"M20 30 Q50 10 80 30 L70 70 Q50 90 30 70 Z",fill:"purple"===n?"#c968ff":"#ff85a2"}),(0,Fa.jsx)("ellipse",{cx:"50",cy:"50",rx:"20",ry:"15",fill:"#f0f0f0"})]})};const VI=function(){const[e,t]=(0,r.useState)(0),[n,a]=(0,r.useState)(""),[s,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,A]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=[],t=["cake","cookie","donut","icecream","candy"],n=["pink","yellow","purple","blue"];for(let r=0;r<8;r++)e.push({id:r+1,type:t[Math.floor(Math.random()*t.length)],x:"".concat(100*Math.random(),"%"),y:"".concat(100*Math.random(),"%"),color:n[Math.floor(Math.random()*n.length)],vx:.3*(Math.random()-.5),vy:.3*(Math.random()-.5),rotation:360*Math.random(),rotationSpeed:1*(Math.random()-.5)});A(e)},[]),(0,r.useEffect)(()=>{const e=setInterval(()=>{A(e=>e.map(e=>{let t=parseFloat(e.x)+e.vx,n=parseFloat(e.y)+e.vy,r=e.vx,a=e.vy;(t<=0||t>=100)&&(r=-r,t=t<=0?0:100),(n<=0||n>=100)&&(a=-a,n=n<=0?0:100);const s=e.rotation+e.rotationSpeed;return(0,ye.A)((0,ye.A)({},e),{},{x:"".concat(t,"%"),y:"".concat(n,"%"),vx:r,vy:a,rotation:s})}))},50);return()=>clearInterval(e)},[]);const{logout:h}=(0,r.useContext)(_a);(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/shop/invoices/pending");l(!!e.data)}catch(e){console.error("Failed to check for pending invoices:",e)}})(),(async()=>{try{const e=(await Ea.get("/shop/products")).data.filter(e=>e.stockLevel<=(e.stockAlertThreshold||0));t(e.length)}catch(e){console.error("Failed to fetch low stock count:",e)}})(),(async()=>{try{const e=await Ea.get("/shop/details");a(e.data.name)}catch(e){console.error("Failed to fetch shop name:",e)}})()},[]);const f="text-gray-700",p="text-gray-500",m="hover:bg-gray-50",g="bg-red-500 text-white shadow-sm",x="text-gray-400",v="text-white",y="bg-yellow-400 text-gray-800";return(0,Fa.jsxs)("div",{className:"h-screen w-64 ".concat("bg-white"," ").concat(f," flex flex-col border-r ").concat("border-gray-200"," overflow-hidden shadow-sm relative"),children:[(0,Fa.jsx)("div",{className:"absolute inset-0 z-0 pointer-events-none",children:d.map(e=>(0,Fa.jsxs)("div",{className:"absolute",style:{left:e.x,top:e.y,transform:"translate(-50%, -50%) rotate(".concat(e.rotation,"deg)"),transition:"transform 0.1s linear"},children:["cake"===e.type&&(0,Fa.jsx)(MI,{size:"w-8 h-8",color:e.color}),"cookie"===e.type&&(0,Fa.jsx)(QI,{size:"w-6 h-6",color:e.color}),"donut"===e.type&&(0,Fa.jsx)(HI,{size:"w-7 h-7",color:e.color}),"icecream"===e.type&&(0,Fa.jsx)(zI,{size:"w-6 h-6",color:e.color}),"candy"===e.type&&(0,Fa.jsx)(WI,{size:"w-5 h-5",color:e.color})]},e.id))}),(0,Fa.jsx)("div",{className:"p-6 border-b border-gray-100 relative z-10",children:(0,Fa.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3",children:[(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,Fa.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"h-16 w-auto animate-cottonCandy",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}),(0,Fa.jsxs)("div",{className:"absolute h-20 w-20 rounded-full animate-[orbit_4s_linear_infinite]",children:[(0,Fa.jsx)("span",{className:"absolute top-0 left-1/2 -ml-1 w-2 h-2 bg-primary rounded-full"}),(0,Fa.jsx)("span",{className:"absolute left-0 top-1/2 -mt-1 w-2 h-2 bg-accent-cyan rounded-full"}),(0,Fa.jsx)("span",{className:"absolute bottom-0 left-1/2 -ml-1 w-2 h-2 bg-accent-green rounded-full"}),(0,Fa.jsx)("span",{className:"absolute right-0 top-1/2 -mt-1 w-2 h-2 bg-accent-orange rounded-full"})]})]}),(0,Fa.jsx)("div",{className:"hidden bg-red-500 text-white px-4 py-2 rounded-lg transform rotate-12 shadow-lg",children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)("span",{className:"text-green-400 font-bold text-lg mr-1",children:"H"}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"text-sm font-bold leading-tight",children:"THE"}),(0,Fa.jsx)("div",{className:"text-lg font-bold leading-tight",children:"SWEET"}),(0,Fa.jsx)("div",{className:"text-lg font-bold leading-tight",children:"HUB"})]})]})})]}),(0,Fa.jsx)("div",{className:"flex items-center space-x-3",children:(0,Fa.jsxs)("div",{className:"text-left",children:[(0,Fa.jsx)("div",{className:"".concat("text-gray-800"," font-bold text-lg leading-tight"),children:"Sweet Hub"}),(0,Fa.jsx)("div",{className:"".concat(p," text-sm"),children:"Shop Panel"})]})}),n&&(0,Fa.jsx)("div",{className:"".concat(p," font-bold text-red-600 text-lg font-large"),children:n})]})}),(0,Fa.jsxs)("nav",{className:"flex-1 px-4 py-6 space-y-2 relative z-10 overflow-y-auto",children:[(0,Fa.jsx)(He,{to:"/shop/dashboard",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg transition-all duration-200 ".concat(t?g:"".concat(f," ").concat(m))},children:e=>{let{isActive:t}=e;return(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(_t,{className:"mr-3 text-lg ".concat(t?v:x)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Dashboard"})]})}}),(0,Fa.jsxs)("details",{className:"group",children:[(0,Fa.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-200 ".concat(m," ").concat(f," list-none"),children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(en,{className:"mr-3 text-lg ".concat(x)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Workers"})]}),(0,Fa.jsx)(ft,{className:"w-4 h-4 transition-transform duration-200 group-open:rotate-90 text-gray-400"})]}),(0,Fa.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Fa.jsx)(He,{to:"/shop/workers/add",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?g:"".concat(p," ").concat(m))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Add Worker"})}),(0,Fa.jsx)(He,{to:"/shop/workers/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?g:"".concat(p," ").concat(m))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"View Workers"})}),(0,Fa.jsx)(He,{to:"/shop/workers/attendance",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?g:"".concat(p," ").concat(m))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Attendance Tracking"})}),(0,Fa.jsx)(He,{to:"/shop/workers/salary-report",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?g:"".concat(p," ").concat(m))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Salary Report"})}),(0,Fa.jsx)(He,{to:"/shop/workers/holidays",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?g:"".concat(p," ").concat(m))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Holidays"})})]})]}),(0,Fa.jsxs)("details",{className:"group",children:[(0,Fa.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-200 ".concat(m," ").concat(f," list-none"),children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(ot,{className:"mr-3 text-lg ".concat(x)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Departments"})]}),(0,Fa.jsx)(ft,{className:"w-4 h-4 transition-transform duration-200 group-open:rotate-90 text-gray-400"})]}),(0,Fa.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Fa.jsx)(He,{to:"/shop/departments/create",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?g:"".concat(p," ").concat(m))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Create Department"})}),(0,Fa.jsx)(He,{to:"/shop/departments/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?g:"".concat(p," ").concat(m))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"View Departments"})})]})]}),(0,Fa.jsxs)("details",{className:"group",open:s,onToggle:()=>{i(!s)},children:[(0,Fa.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-200 ".concat(m," ").concat(f," list-none"),children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(it,{className:"mr-3 text-lg ".concat(x)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Products"})]}),(0,Fa.jsxs)("div",{className:"flex items-center space-x-2",children:[!s&&e>0&&(0,Fa.jsx)("span",{className:"".concat(y," text-xs font-bold px-1.5 py-0.5 rounded-full"),children:e}),(0,Fa.jsx)(ft,{className:"w-4 h-4 transition-transform duration-200 group-open:rotate-90 text-gray-400"})]})]}),(0,Fa.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Fa.jsx)(He,{to:"/shop/products/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?g:"".concat(p," ").concat(m))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"View Products"})}),(0,Fa.jsx)(He,{to:"/shop/warehouse/stock",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?g:"".concat(p," ").concat(m))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Track Stock"})}),(0,Fa.jsxs)(He,{to:"/shop/warehouse/alerts",className:e=>{let{isActive:t}=e;return"flex items-center justify-between px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?g:"".concat(p," ").concat(m))},children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Stock Alerts"}),s&&e>0&&(0,Fa.jsx)("span",{className:"".concat(y," text-xs font-bold px-1.5 py-0.5 rounded-full"),children:e})]})]})]}),(0,Fa.jsxs)(He,{to:"/shop/invoice/view",className:e=>{let{isActive:t}=e;return"flex items-center justify-between px-3 py-2.5 rounded-lg transition-all duration-200 ".concat(t?g:"".concat(f," ").concat(m))},children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(Ct,{className:"mr-3 text-lg ".concat(x)}),(0,Fa.jsx)("span",{className:"font-medium",children:"View Invoice"})]}),o&&(0,Fa.jsx)("span",{className:"".concat("bg-green-500 text-white"," text-xs font-bold px-2 py-1 rounded-full animate-pulse"),children:"New"})]}),(0,Fa.jsxs)("details",{className:"group",children:[(0,Fa.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer transition-all duration-200 ".concat(m," ").concat(f," list-none"),children:[(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(Ot,{className:"mr-3 text-lg ".concat(x)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Billing & Invoices"})]}),(0,Fa.jsx)(ft,{className:"w-4 h-4 transition-transform duration-200 group-open:rotate-90 text-gray-400"})]}),(0,Fa.jsxs)("nav",{className:"mt-1 ml-6 space-y-1",children:[(0,Fa.jsx)(He,{to:"/shop/billing/create",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?g:"".concat(p," ").concat(m))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"Create Bill"})}),(0,Fa.jsx)(He,{to:"/shop/billing/view",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(t?g:"".concat(p," ").concat(m))},children:(0,Fa.jsx)("span",{className:"font-medium",children:"View Bills"})})]})]}),(0,Fa.jsx)(He,{to:"/shop/expenses",className:e=>{let{isActive:t}=e;return"flex items-center px-3 py-2.5 rounded-lg transition-all duration-200 ".concat(t?g:"".concat(f," ").concat(m))},children:e=>{let{isActive:t}=e;return(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(Ot,{className:"mr-3 text-lg ".concat(t?v:x)}),(0,Fa.jsx)("span",{className:"font-medium",children:"Expenses"})]})}})]}),(0,Fa.jsx)("div",{className:"px-4 py-6 border-t border-gray-200 relative z-10",children:(0,Fa.jsxs)("button",{onClick:()=>{u(!0)},className:"flex items-center w-full px-3 py-2.5 rounded-lg transition-all duration-200 ".concat(f," ").concat(m," font-medium"),children:[(0,Fa.jsx)(Tt,{className:"mr-3 text-lg ".concat(x)}),(0,Fa.jsx)("span",{children:"Logout"})]})}),(0,Fa.jsx)(Ta,{isOpen:c,onClose:()=>{u(!1)},onConfirm:()=>{u(!1),h()}})]})};const KI=function(){var e,t,n;const[a,s]=(0,r.useState)({}),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),u=ee();if((0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("".concat("/shop","/dashboard"),{headers:{"Content-Type":"application/json"},withCredentials:!0});s(e.data)}catch(e){c("Failed to fetch dashboard data."),console.error(e)}finally{o(!1)}})()},[]),i)return(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading dashboard..."});if(l)return(0,Fa.jsx)("div",{className:"p-6 text-center text-red-500",children:l});const d=()=>{u("/shop/departments/create")},A=()=>{u("/shop/workers/view")},h=()=>{u("/shop/products/view")};return(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Fa.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Shop Dashboard"}),(0,Fa.jsx)("p",{className:"text-gray-600",children:"Overview of your shop's performance and statistics"})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 cursor-pointer hover:shadow-xl transition-shadow duration-300",onClick:d,children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)("div",{className:"p-3 rounded-lg bg-blue-100",children:(0,Fa.jsx)(ot,{className:"h-6 w-6 text-blue-600"})}),(0,Fa.jsxs)("div",{className:"ml-4",children:[(0,Fa.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Departments"}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(e=a.departments)||void 0===e?void 0:e.length)||0})]})]})}),(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 cursor-pointer hover:shadow-xl transition-shadow duration-300",onClick:A,children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)("div",{className:"p-3 rounded-lg bg-green-100",children:(0,Fa.jsx)(en,{className:"h-6 w-6 text-green-600"})}),(0,Fa.jsxs)("div",{className:"ml-4",children:[(0,Fa.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Workers"}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(t=a.workers)||void 0===t?void 0:t.length)||0})]})]})}),(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 cursor-pointer hover:shadow-xl transition-shadow duration-300",onClick:h,children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)("div",{className:"p-3 rounded-lg bg-purple-100",children:(0,Fa.jsx)(it,{className:"h-6 w-6 text-purple-600"})}),(0,Fa.jsxs)("div",{className:"ml-4",children:[(0,Fa.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Products"}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(n=a.stockLevels)||void 0===n?void 0:n.length)||0})]})]})}),(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 cursor-pointer hover:shadow-xl transition-shadow duration-300",onClick:()=>{u("/shop/billing/view")},children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)("div",{className:"p-3 rounded-lg bg-yellow-100",children:(0,Fa.jsx)(Ct,{className:"h-6 w-6 text-yellow-600"})}),(0,Fa.jsxs)("div",{className:"ml-4",children:[(0,Fa.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Invoices"}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.invoiceCount||0})]})]})})]}),(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Fa.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Financial Overview"}),(0,Fa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(0,Fa.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 cursor-pointer hover:bg-blue-100 transition-colors duration-300",onClick:()=>{u("/shop/billing/view")},children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(vt,{className:"h-8 w-8 text-blue-600"}),(0,Fa.jsxs)("div",{className:"ml-3",children:[(0,Fa.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Total Sales"}),(0,Fa.jsx)("p",{className:"text-xl font-bold text-blue-800",children:(f=a.totalSales,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(f||0))})]})]})})})]}),a.departments&&a.departments.length>0&&(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Departments"}),(0,Fa.jsx)("button",{onClick:d,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All"})]}),(0,Fa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.departments.map(e=>(0,Fa.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)("div",{className:"p-2 rounded-lg bg-blue-100",children:(0,Fa.jsx)(ot,{className:"h-5 w-5 text-blue-600"})}),(0,Fa.jsx)("div",{className:"ml-3",children:(0,Fa.jsx)("h4",{className:"font-medium text-gray-900",children:e.name})})]})},e._id))})]}),a.workers&&a.workers.length>0&&(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Workers"}),(0,Fa.jsx)("button",{onClick:A,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All"})]}),(0,Fa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.workers.map(e=>{var t,n;return(0,Fa.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)("div",{className:"p-2 rounded-lg bg-green-100",children:(0,Fa.jsx)(en,{className:"h-5 w-5 text-green-600"})}),(0,Fa.jsxs)("div",{className:"ml-3",children:[(0,Fa.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,Fa.jsxs)("p",{className:"text-sm text-gray-500",children:[null===(t=e.workingHours)||void 0===t?void 0:t.from," - ",null===(n=e.workingHours)||void 0===n?void 0:n.to]})]})]})},e._id)})})]}),a.stockLevels&&a.stockLevels.length>0&&(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Current Stock Levels"}),(0,Fa.jsx)("button",{onClick:h,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All"})]}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock Level"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.stockLevels.map(e=>(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.stockLevel," ",e.unit]})]},e._id))})]})})]})]});var f},GI=e=>{if(!e)return"09:00";const[t,n]=e.split(" ");let[r,a]=t.split(":");return r=parseInt(r,10),"PM"===n&&12!==r&&(r+=12),"AM"===n&&12===r&&(r=0),"".concat(r.toString().padStart(2,"0"),":").concat(a)},qI=()=>{ee();const e=(0,r.useRef)(null),[t,n]=(0,r.useState)({name:"",username:"",department:"",workingHoursFrom:"9:00 AM",workingHoursTo:"5:00 PM",lunchBreakFrom:"12:00 PM",lunchBreakTo:"1:00 PM",salary:""}),[a,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(""),[A,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(!0),[m,g]=(0,r.useState)(""),[x,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)([]),[w,N]=(0,r.useState)({type:"",text:""}),[j,C]=(0,r.useState)(!1),[B,k]=(0,r.useState)(null),[S,E]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(f){const e=(()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="0123456789";let n="",r="";for(let a=0;a<2;a++)n+=e.charAt(Math.floor(26*Math.random()));for(let a=0;a<4;a++)r+=t.charAt(Math.floor(10*Math.random()));return n+r})();g(e)}else g("")},[f]),(0,r.useEffect)(()=>{(async()=>{try{const e=await Ea.get("/shop/departments");s(e.data),e.data.length>0&&n(t=>(0,ye.A)((0,ye.A)({},t),{},{department:e.data[0]._id}))}catch(e){console.error("Failed to fetch departments:",e),c(!0),o("Failed to load departments. Please try again later.")}})();(async()=>{try{console.log("Initializing face recognition service..."),await kw.initialize(),console.log("Face recognition service initialized successfully");const e=await Ea.get("/shop/attendance/face-status");console.log("Service status response:",e.data),E(e.data)}catch(e){console.error("Failed to check service status:",e),E({serviceReady:!1})}})()},[]);const F=e=>{n((0,ye.A)((0,ye.A)({},t),{},{[e.target.name]:e.target.value}))},_="w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400 transition-shadow",I="block text-sm font-semibold text-gray-600 mb-1",T="w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400 transition-shadow appearance-none",D=()=>{const e=[];for(let t=0;t<24;t++)for(let n=0;n<60;n+=30){const r=t>=12?"PM":"AM",a="".concat(t%12||12,":").concat(0===n?"00":n," ").concat(r),s="".concat(t.toString().padStart(2,"0"),":").concat(0===n?"00":n);e.push({value:a,value24:s})}return e};return(0,Fa.jsxs)("div",{className:"container mx-auto p-6 bg-white rounded-2xl shadow-xl h-full max-h-[calc(100vh-2rem)] overflow-y-auto",children:[(0,Fa.jsxs)("div",{className:"flex items-center mb-6 text-gray-800",children:[(0,Fa.jsx)($t,{className:"text-3xl text-red-500"}),(0,Fa.jsx)("h1",{className:"text-3xl font-bold ml-3",children:"Add New Worker"})]}),i&&(0,Fa.jsxs)("div",{className:"flex items-center p-4 mb-4 rounded-lg ".concat(l?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),role:"alert",children:[(0,Fa.jsx)(pt,{className:"w-5 h-5 mr-3"}),(0,Fa.jsx)("span",{className:"font-medium",children:i}),!l&&u&&(0,Fa.jsxs)("span",{className:"ml-2",children:["Temporary Password: ",(0,Fa.jsx)("strong",{children:u})]}),!l&&A&&(0,Fa.jsxs)("span",{className:"ml-2",children:["RFID: ",(0,Fa.jsx)("strong",{children:A})]})]}),(0,Fa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o(""),c(!1),d(""),h(""),!t.department)return c(!0),void o("Please select a department.");const r=GI(t.workingHoursFrom),a=GI(t.workingHoursTo);let s;if(t.lunchBreakFrom&&t.lunchBreakTo){s={from:GI(t.lunchBreakFrom),to:GI(t.lunchBreakTo)}}const i=(0,ye.A)((0,ye.A)((0,ye.A)({},t),{},{workingHours:{from:r,to:a}},s&&{lunchBreak:s}),{},{createRFID:f},f&&{rfid:m});try{const e=await Ea.post("/shop/workers",i);o(e.data.message||"Worker added successfully!"),c(!1),d(e.data.tempPassword||""),e.data.rfid&&h(e.data.rfid),e.data.workerId&&k(e.data.workerId),n({name:"",username:"",department:"",workingHoursFrom:"9:00 AM",workingHoursTo:"5:00 PM",lunchBreakFrom:"12:00 PM",lunchBreakTo:"1:00 PM",salary:""}),p(!0),g("")}catch(A){var l,u;c(!0),o((null===(l=A.response)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.message)||"An error occurred while adding the worker."),console.error("Error adding worker:",A)}},className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"name",className:I,children:"Full Name"}),(0,Fa.jsx)("input",{type:"text",name:"name",id:"name",value:t.name,onChange:F,className:_,placeholder:"e.g., John Doe",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"username",className:I,children:"Username"}),(0,Fa.jsx)("input",{type:"text",name:"username",id:"username",value:t.username,onChange:F,className:_,placeholder:"Create a unique username",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"department",className:I,children:"Department"}),(0,Fa.jsxs)("select",{name:"department",id:"department",value:t.department,onChange:F,className:T,required:!0,children:[(0,Fa.jsx)("option",{value:"",children:"Select Department"}),a.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"salary",className:I,children:"Salary (per month)"}),(0,Fa.jsx)("input",{type:"text",name:"salary",id:"salary",value:t.salary,onChange:F,className:_,placeholder:"Enter monthly salary amount",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"workingHoursFrom",className:I,children:"Working Hours (From)"}),(0,Fa.jsx)("select",{name:"workingHoursFrom",id:"workingHoursFrom",value:t.workingHoursFrom,onChange:F,className:T,required:!0,children:D().map(e=>(0,Fa.jsx)("option",{value:e.value,children:e.value},e.value24))})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"workingHoursTo",className:I,children:"Working Hours (To)"}),(0,Fa.jsx)("select",{name:"workingHoursTo",id:"workingHoursTo",value:t.workingHoursTo,onChange:F,className:T,required:!0,children:D().map(e=>(0,Fa.jsx)("option",{value:e.value,children:e.value},e.value24))})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"lunchBreakFrom",className:I,children:"Lunch Break (From)"}),(0,Fa.jsx)("select",{name:"lunchBreakFrom",id:"lunchBreakFrom",value:t.lunchBreakFrom,onChange:F,className:T,required:!0,children:D().map(e=>(0,Fa.jsx)("option",{value:e.value,children:e.value},e.value24))})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{htmlFor:"lunchBreakTo",className:I,children:"Lunch Break (To)"}),(0,Fa.jsx)("select",{name:"lunchBreakTo",id:"lunchBreakTo",value:t.lunchBreakTo,onChange:F,className:T,required:!0,children:D().map(e=>(0,Fa.jsx)("option",{value:e.value,children:e.value},e.value24))})]})]}),(0,Fa.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,Fa.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"RFID Card"}),(0,Fa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Fa.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Fa.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Create RFID for this worker"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>p(!f),className:"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ".concat(f?"bg-red-600":"bg-gray-200"),children:(0,Fa.jsx)("span",{"aria-hidden":"true",className:"pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 ".concat(f?"translate-x-5":"translate-x-0")})})]}),f&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"RFID"}),(0,Fa.jsx)("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 bg-gray-100",value:m,readOnly:!0}),(0,Fa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This RFID will be automatically assigned to the worker"})]}),!f&&(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"RFID creation is disabled. You can enable it using the toggle above."})]})]}),(0,Fa.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,Fa.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Face Enrollment"}),S&&(0,Fa.jsx)("div",{className:"mb-4 p-3 rounded-lg ".concat(S.serviceReady?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:(0,Fa.jsx)("div",{className:"text-sm font-medium",children:S.serviceReady?"\u2705 React Face Recognition: Ready (High Accuracy)":"\u26a0\ufe0f Face Recognition Service: Unavailable"})}),w.text&&(0,Fa.jsx)("div",{className:"p-3 mb-4 rounded-lg ".concat("success"===w.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:w.text}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Fa.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[x?(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)(Ks(),{audio:!1,ref:e,screenshotFormat:"image/jpeg",className:"w-full rounded-md"}),(0,Fa.jsxs)("button",{type:"button",onClick:()=>{if(e.current&&y.length<5){const t=e.current.getScreenshot();if(t){const e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),a=new Uint8Array(r);for(let t=0;t<e.length;t++)a[t]=e.charCodeAt(t);const s=new Blob([r],{type:n}),i=new File([s],"capture-".concat(Date.now(),".jpeg"),{type:n});b(e=>[...e,{file:i,preview:t}])}}else N({type:"error",text:"You can only add up to 5 images."})},disabled:j||y.length>=5,className:"mt-4 w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[(0,Fa.jsx)(ct,{className:"mr-2"})," Capture Image"]})]}):(0,Fa.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,Fa.jsx)(Jt,{className:"text-4xl text-gray-400 mb-2"}),(0,Fa.jsx)("label",{htmlFor:"face-upload",className:"cursor-pointer text-sm font-medium text-red-600 hover:text-red-500",children:"Upload up to 5 images"}),(0,Fa.jsx)("input",{id:"face-upload",type:"file",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files){const t=Array.from(e.target.files).slice(0,5-y.length).map(e=>({file:e,preview:URL.createObjectURL(e)}));b(e=>[...e,...t])}},className:"sr-only",disabled:j||y.length>=5}),(0,Fa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"or"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>v(!0),className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-500",children:"Use Camera"})]}),x&&(0,Fa.jsx)("button",{type:"button",onClick:()=>v(!1),className:"mt-2 text-sm text-gray-600 hover:text-gray-800",children:"Close Camera"})]}),(0,Fa.jsxs)("div",{className:"space-y-2",children:[(0,Fa.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["Image Previews (",y.length,"/5)"]}),y.length>0?(0,Fa.jsx)("div",{className:"grid grid-cols-3 gap-2",children:y.map((e,t)=>(0,Fa.jsxs)("div",{className:"relative group",children:[(0,Fa.jsx)("img",{src:e.preview,alt:"preview ".concat(t),className:"w-full h-24 object-cover rounded-md"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>(e=>{b(y.filter((t,n)=>n!==e))})(t),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2715"})]},t))}):(0,Fa.jsx)("div",{className:"flex items-center justify-center h-24 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,Fa.jsx)("p",{className:"text-sm text-gray-500",children:"No images selected"})})]})]}),(0,Fa.jsx)("div",{className:"mt-4",children:(0,Fa.jsx)("button",{type:"button",onClick:async()=>{if(B&&0!==y.length){C(!0),N({type:"",text:""});try{await kw.initialize();const e=[];for(const s of y)try{const t=await kw.loadImageFromDataURL(s.preview),n=await kw.detectFaceFromImage(t);n&&n.descriptor&&e.push(Array.from(n.descriptor))}catch(n){console.warn("Failed to detect face in one image:",n)}if(0===e.length)return N({type:"error",text:"No faces detected in the uploaded images. Please ensure faces are clearly visible."}),void C(!1);await kw.enrollFace(B,e.map(e=>new Float32Array(e)));const t=new FormData;t.append("workerId",B);const r=e.map(e=>Array.from(e));t.append("faceDescriptors",JSON.stringify(r)),y.forEach((e,n)=>{t.append("faces",e.file)}),console.log("Sending face enrollment data:",{workerId:B,faceDescriptorsCount:r.length,faceImagesCount:y.length,faceDescriptorsSample:r.length>0?r[0]:null}),console.log("FormData contents:");for(let[n,s]of t.entries())console.log(n,s);const a=await Ea.post("/shop/attendance/enroll-face",t);console.log("Face enrollment response:",a.data),N({type:"success",text:"Face enrolled successfully!"}),b([]),v(!1)}catch(r){var e,t;console.error("Error enrolling face:",r),console.error("Error response:",r.response);const n=(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||r.message||"An error occurred during enrollment.";N({type:"error",text:n})}finally{C(!1)}}else N({type:"error",text:"Please select a worker and provide at least one image."})},disabled:j||!B||0===y.length,className:"w-full flex justify-center items-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-red-300",children:j?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(It,{className:"animate-spin mr-2"})," Enrolling..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(Zt,{className:"mr-2"})," Enroll Face"]})})})]}),(0,Fa.jsx)("button",{type:"submit",className:"w-full bg-red-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-transform transform hover:scale-105 shadow-md",children:"Add Worker"})]})]})},XI=e=>{if(!e)return"Not set";const[t,n]=e.split(":");let r=parseInt(t,10);const a=r>=12?"PM":"AM";return r=r%12||12,"".concat(r,":").concat(n," ").concat(a)},YI="/shop/workers",JI=()=>{var e,t,n,a;ee();const[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[d,A]=(0,r.useState)(""),h=(0,r.useRef)(null),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),[x,v]=(0,r.useState)({}),[y,b]=(0,r.useState)([]),[w,N]=(0,r.useState)(!1),[j,C]=(0,r.useState)(null),[B,k]=(0,r.useState)([]),[S,E]=(0,r.useState)(!1),[F,_]=(0,r.useState)(!1),[I,T]=(0,r.useState)({type:"",text:""});(0,r.useEffect)(()=>{(async()=>{try{const[e,t]=await Promise.all([Ea.get(YI,{withCredentials:!0}),Ea.get("/shop/departments",{withCredentials:!0})]);i(e.data),b(t.data)}catch(e){u("Failed to fetch data."),console.error(e)}finally{l(!1)}})()},[]);const D=s.filter(e=>{var t;return e.name.toLowerCase().includes(d.toLowerCase())||e.username.toLowerCase().includes(d.toLowerCase())||(null===(t=e.department)||void 0===t?void 0:t.name)&&e.department.name.toLowerCase().includes(d.toLowerCase())}),L=()=>{p(!1),g(null),v({})},U=(e,t)=>{if(t.includes(".")){const[n,r]=t.split(".");v(t=>(0,ye.A)((0,ye.A)({},t),{},{[n]:(0,ye.A)((0,ye.A)({},t[n]),{},{[r]:e.target.value})}))}else v((0,ye.A)((0,ye.A)({},x),{},{[t]:e.target.value}))},P=()=>{N(!1),C(null),k([]),E(!1),T({type:"",text:""})};return o?(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading workers..."}):c?(0,Fa.jsx)("div",{className:"p-6 text-center text-red-500",children:c}):(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("h3",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Existing Workers"}),(0,Fa.jsx)("div",{className:"relative w-full sm:w-1/3 mb-6",children:(0,Fa.jsx)("input",{type:"text",placeholder:"Search by staff name or ID...",className:"w-full pl-10 pr-4 py-2 border border-medium-gray rounded-lg text-sm",value:d,onChange:e=>A(e.target.value)})}),0===D.length?(0,Fa.jsx)("p",{children:"No workers found. Please add a worker."}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Username"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salary"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Working Hours"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lunch Break"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RFID"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Face Enrolled"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>{var t,n,r,a,o;return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.username}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:null===(t=e.department)||void 0===t?void 0:t.name}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.salary}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:null!==(n=e.workingHours)&&void 0!==n&&n.from&&null!==(r=e.workingHours)&&void 0!==r&&r.to?"".concat(XI(e.workingHours.from)," - ").concat(XI(e.workingHours.to)):"Not set"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:null!==(a=e.lunchBreak)&&void 0!==a&&a.from&&null!==(o=e.lunchBreak)&&void 0!==o&&o.to?"".concat(XI(e.lunchBreak.from)," - ").concat(XI(e.lunchBreak.to)):"Not set"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.rfid||"Not Assigned"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.faceImages&&e.faceImages.length>0?(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(At,{className:"text-green-500 mr-2",size:20}),(0,Fa.jsx)("span",{className:"text-green-600 font-medium",children:"Yes"})]}):(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(tn,{className:"text-red-500 mr-2",size:20}),(0,Fa.jsx)("span",{className:"text-red-600 font-medium",children:"No"})]})}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{var t;g(e),v((0,ye.A)((0,ye.A)({},e),{},{department:(null===(t=e.department)||void 0===t?void 0:t._id)||e.department||""})),p(!0)})(e),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),(0,Fa.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this worker?"))try{await Ea.delete("".concat(YI,"/").concat(e),{withCredentials:!0}),i(s.filter(t=>t._id!==e))}catch(t){u("Failed to delete worker."),console.error(t)}})(e._id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e._id)})})]})}),(0,Fa.jsx)(Ys,{isOpen:f,onClose:L,title:"Edit Worker",children:m&&(0,Fa.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await Ea.put("".concat(YI,"/").concat(m._id),x,{withCredentials:!0});i(s.map(t=>t._id===m._id?e.data:t)),L()}catch(t){u("Failed to update worker."),console.error(t)}},className:"space-y-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Fa.jsx)("input",{type:"text",value:x.name||"",onChange:e=>U(e,"name"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Fa.jsx)("input",{type:"text",value:x.username||"",onChange:e=>U(e,"username"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,Fa.jsxs)("select",{value:x.department||"",onChange:e=>{v((0,ye.A)((0,ye.A)({},x),{},{department:e.target.value}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,Fa.jsx)("option",{value:"",children:"Select Department"}),y.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salary"}),(0,Fa.jsx)("input",{type:"number",value:x.salary||"",onChange:e=>U(e,"salary"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RFID"}),(0,Fa.jsx)("input",{type:"text",value:x.rfid||"",onChange:e=>U(e,"rfid"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Working Hours (From)"}),(0,Fa.jsx)("input",{type:"time",value:(null===(e=x.workingHours)||void 0===e?void 0:e.from)||"",onChange:e=>U(e,"workingHours.from"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Working Hours (To)"}),(0,Fa.jsx)("input",{type:"time",value:(null===(t=x.workingHours)||void 0===t?void 0:t.to)||"",onChange:e=>U(e,"workingHours.to"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lunch Break (From)"}),(0,Fa.jsx)("input",{type:"time",value:(null===(n=x.lunchBreak)||void 0===n?void 0:n.from)||"",onChange:e=>U(e,"lunchBreak.from"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lunch Break (To)"}),(0,Fa.jsx)("input",{type:"time",value:(null===(a=x.lunchBreak)||void 0===a?void 0:a.to)||"",onChange:e=>U(e,"lunchBreak.to"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Fa.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Fa.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Face Enrollment"}),m.faceImages&&m.faceImages.length>0?(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Enrolled"}):(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Not Enrolled"})]}),(0,Fa.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:m.faceImages&&m.faceImages.length>0?"Worker has ".concat(m.faceImages.length," face images enrolled."):"Worker has not been enrolled for face recognition."}),(0,Fa.jsx)("button",{type:"button",onClick:()=>(C(m),k([]),E(!0),T({type:"",text:""}),void N(!0)),className:"mt-2 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:m.faceImages&&m.faceImages.length>0?"Update Face Enrollment":"Enroll Face"})]}),(0,Fa.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Fa.jsx)("button",{type:"button",onClick:L,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,Fa.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 rounded-md shadow-sm text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Update Worker"})]})]})}),(0,Fa.jsx)(Ys,{isOpen:w,onClose:P,title:"Face Enrollment",children:j&&(0,Fa.jsxs)("div",{className:"space-y-4",children:[(0,Fa.jsxs)("p",{className:"text-sm text-gray-600",children:["Enrolling face for worker: ",(0,Fa.jsx)("span",{className:"font-medium",children:j.name})]}),(0,Fa.jsxs)("div",{className:"bg-blue-50 p-4 rounded-md",children:[(0,Fa.jsx)("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Instructions"}),(0,Fa.jsxs)("ul",{className:"text-xs text-blue-700 list-disc pl-5 space-y-1",children:[(0,Fa.jsx)("li",{children:"Position the worker's face clearly in the camera frame"}),(0,Fa.jsx)("li",{children:"Capture multiple images from different angles for better recognition"}),(0,Fa.jsx)("li",{children:"Ensure good lighting and avoid shadows on the face"}),(0,Fa.jsx)("li",{children:"Remove glasses or hats that might obstruct facial features"}),(0,Fa.jsx)("li",{children:'Click "Capture Image" to take a photo, or upload existing images'})]})]}),I.text&&(0,Fa.jsx)("div",{className:"p-3 rounded ".concat("error"===I.type?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),children:I.text}),(0,Fa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),j&&0!==B.length){_(!0),T({type:"",text:""});try{const e=new FormData;e.append("workerId",j._id),B.forEach(t=>{e.append("faces",t.file)}),await Ea.post("/shop/attendance/enroll-face",e),T({type:"success",text:"Face enrollment successful!"});(async()=>{try{const e=await Ea.get(YI,{withCredentials:!0});i(e.data)}catch(e){u("Failed to refresh worker data."),console.error(e)}})(),setTimeout(()=>{P()},2e3)}catch(c){var t,n;console.error("Error enrolling face:",c);const r=(null===(t=c.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||c.message||"An error occurred during enrollment.";T({type:"error",text:r})}finally{_(!1)}}else T({type:"error",text:"Please select a worker and provide at least one image."})},className:"space-y-4",children:[(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Fa.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[S?(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)(Ks(),{audio:!1,ref:h,screenshotFormat:"image/jpeg",className:"w-full rounded-md"}),(0,Fa.jsxs)("button",{type:"button",onClick:()=>{if(B.length<5){const e=h.current.getScreenshot();if(e){const t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]);let a=r.length;const s=new Uint8Array(a);for(;a--;)s[a]=r.charCodeAt(a);const i=new Blob([s],{type:n}),o=new File([i],"capture-".concat(Date.now(),".jpeg"),{type:n});k(t=>[...t,{file:o,preview:e}])}}else T({type:"error",text:"You can only add up to 5 images."})},disabled:F||B.length>=5,className:"mt-4 w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[(0,Fa.jsx)(ct,{className:"mr-2"})," Capture Image"]})]}):(0,Fa.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,Fa.jsx)(Jt,{className:"text-4xl text-gray-400 mb-2"}),(0,Fa.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer text-sm font-medium text-red-600 hover:text-red-500",children:"Upload up to 5 images"}),(0,Fa.jsx)("input",{id:"file-upload",type:"file",multiple:!0,accept:"image/*",onChange:e=>{const t=Array.from(e.target.files),n=[];B.length+t.length<=5?t.forEach(e=>{const r=new FileReader;r.onload=r=>{n.push({file:e,preview:r.target.result}),n.length===t.length&&k(e=>[...e,...n])},r.readAsDataURL(e)}):T({type:"error",text:"You can only add up to 5 images."})},className:"sr-only",disabled:F||B.length>=5}),(0,Fa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"or"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>E(!0),className:"mt-2 text-sm font-medium text-blue-600 hover:text-blue-500",children:"Use Camera"})]}),S&&(0,Fa.jsx)("button",{type:"button",onClick:()=>E(!1),className:"mt-2 text-sm text-gray-600 hover:text-gray-800",children:"Close Camera"})]}),(0,Fa.jsxs)("div",{className:"space-y-2",children:[(0,Fa.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["Image Previews (",B.length,"/5)"]}),B.length>0?(0,Fa.jsx)("div",{className:"grid grid-cols-3 gap-2",children:B.map((e,t)=>(0,Fa.jsxs)("div",{className:"relative group",children:[(0,Fa.jsx)("img",{src:e.preview,alt:"preview ".concat(t),className:"w-full h-24 object-cover rounded-md"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>(e=>{k(B.filter((t,n)=>n!==e))})(t),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\u2715"})]},t))}):(0,Fa.jsx)("div",{className:"flex items-center justify-center h-24 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,Fa.jsx)("p",{className:"text-sm text-gray-500",children:"No images selected"})})]})]}),(0,Fa.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Fa.jsx)("button",{type:"button",onClick:P,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:F,children:"Cancel"}),(0,Fa.jsx)("button",{type:"submit",disabled:F||0===B.length,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:F?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Fa.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fa.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enrolling..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)($t,{className:"mr-2"})," Enroll Face"]})})]})]})]})})]})};const ZI=function(e){let{onAttendanceRecorded:t}=e;const[n,a]=(0,r.useState)(""),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(null),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)("");return(0,r.useEffect)(()=>()=>{h&&clearTimeout(h)},[h]),(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,Fa.jsx)("h3",{className:"text-xl font-semibold mb-4 text-text-primary",children:"RFID Attendance"}),(0,Fa.jsx)("form",{onSubmit:async e=>{e.preventDefault(),i(""),l(""),u(null),A("");const t=n.trim();t?(x(t),m(!0)):l("Please enter an RFID.")},className:"mb-6",children:(0,Fa.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Scan RFID"}),(0,Fa.jsx)("input",{type:"text",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:n,onChange:e=>a(e.target.value),placeholder:"Enter RFID (e.g., AB0000)",autoFocus:!0})]}),(0,Fa.jsxs)("div",{className:"flex gap-2",children:[(0,Fa.jsx)("button",{type:"submit",className:"bg-primary text-white font-semibold py-2 px-6 rounded-lg hover:bg-primary-dark transition-colors",children:"Submit"}),(0,Fa.jsx)("button",{type:"button",onClick:()=>{a(""),i(""),l(""),u(null),A(""),m(!1),x(""),h&&(clearTimeout(h),f(null))},className:"bg-gray-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-gray-600 transition-colors",children:"Clear"})]})]})}),p&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full",children:[(0,Fa.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Confirm RFID Submission"}),(0,Fa.jsx)("p",{className:"mb-4",children:"Are you sure you want to submit this RFID for attendance?"}),(0,Fa.jsxs)("p",{className:"mb-6 font-semibold",children:["RFID: ",g]}),(0,Fa.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,Fa.jsx)("button",{onClick:()=>{m(!1),x("")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),(0,Fa.jsx)("button",{onClick:async()=>{m(!1);try{const e=await Ea.post("/shop/attendance/rfid-attendance",{rfid:g},{withCredentials:!0});i(e.data.message),u({name:e.data.worker}),A(e.data.type),h&&clearTimeout(h);const n=setTimeout(()=>{a("")},3e3);f(n),t&&e.data.attendance&&setTimeout(()=>{t({workerName:e.data.worker,rfid:e.data.rfid,checkIn:e.data.attendance.checkIn,checkOut:e.data.attendance.checkOut,type:e.data.type,attendance:e.data.attendance})},100)}catch(c){var e,n,r,s,o;if(429===(null===(e=c.response)||void 0===e?void 0:e.status)&&null!==(n=c.response)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.message)l(c.response.data.message);else l((null===(s=c.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message)||"Failed to process RFID attendance.");console.error(c)}},className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark",children:"Confirm"})]})]})}),s&&(0,Fa.jsx)("div",{className:"p-4 rounded-lg mb-4 ".concat("checkin"===d?"bg-green-500 text-white":"checkout"===d?"bg-red-500 text-white":"bg-green-100 text-green-800"),children:s}),o&&(0,Fa.jsx)("div",{className:"p-4 bg-red-100 text-red-800 rounded-lg mb-4",children:o}),c&&(0,Fa.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Fa.jsx)("h4",{className:"font-semibold text-lg mb-2",children:"Attendance Recorded"}),(0,Fa.jsxs)("p",{className:"text-gray-700",children:["Worker: ",(0,Fa.jsx)("span",{className:"font-semibold",children:c.name})]}),(0,Fa.jsxs)("p",{className:"text-gray-700",children:["Action: ",(0,Fa.jsx)("span",{className:"font-semibold capitalize ".concat("checkin"===d?"text-green-500":"checkout"===d?"text-red-500":""),children:d})]}),(0,Fa.jsx)("p",{className:"text-gray-700 text-sm mt-2",children:"RFID input will clear automatically in 3 seconds..."})]})]})},$I=e=>{let{onAttendanceRecorded:t}=e;const n=(0,r.useRef)(null),[a,s]=(0,r.useState)({type:"info",text:"Initializing Camera..."}),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!0),[A,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(0),[m,g]=(0,r.useState)(!1),[x,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(""),[w,N]=(0,r.useState)({}),j=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{try{console.log("Initializing face recognition service..."),await kw.initialize(),console.log("Face recognition service initialized successfully");const e=await Ea.get("/shop/attendance/face-status");console.log("Service status response:",e.data),h(e.data),e.data.serviceReady?s({type:"success",text:"Face recognition service is ready!"}):s({type:"error",text:"Face recognition service unavailable. Use RFID attendance instead."})}catch(e){console.error("Failed to check service status:",e),h({serviceReady:!1}),s({type:"error",text:"Unable to initialize face recognition: ".concat(e.message)})}})()},[]),(0,r.useEffect)(()=>{const e=setInterval(()=>{const e=Date.now(),t={};Object.keys(w).forEach(n=>{w[n]>e&&(t[n]=w[n])}),N(t)},3e4);return()=>clearInterval(e)},[w]);const C=(0,r.useCallback)(async()=>{if(i||!n.current||!l)return;if(A&&!A.serviceReady)return void s({type:"error",text:"Face recognition service is not available. Please use RFID attendance."});const e=n.current.getScreenshot();if(!e)return s({type:"error",text:"Failed to capture image. Please try again."}),void setTimeout(()=>{o(!1),"success"!==a.type&&s({type:"info",text:"Scanning for face..."})},3e3);o(!0),s({type:"info",text:"Detecting face..."});try{await kw.initialize();const n=await kw.loadImageFromDataURL(e),i=await kw.recognizeFace(n);if(i.success){const e=Date.now();if(w[i.workerId]&&w[i.workerId]>e){const t=Math.ceil((w[i.workerId]-e)/1e3);return s({type:"error",text:"Please wait ".concat(t," seconds before marking attendance again.")}),void setTimeout(()=>{o(!1),s({type:"info",text:"Scanning for face..."})},3e3)}const n=await Ea.post("/shop/attendance/recognize-face",{faceDescriptor:Array.from(i.descriptor||[]),workerId:i.workerId,confidence:i.confidence});var r,c;if(s({type:"success",text:n.data.message}),p(0),N(t=>(0,ye.A)((0,ye.A)({},t),{},{[i.workerId]:e+12e4})),b(n.data.worker),v(n.data.message),g(!0),setTimeout(()=>{g(!1),o(!1),s({type:"info",text:"Scanning for next face..."})},2e3),t)t({workerName:n.data.worker,rfid:"FACE",checkIn:null===(r=n.data.attendance)||void 0===r?void 0:r.checkIn,checkOut:null===(c=n.data.attendance)||void 0===c?void 0:c.checkOut,type:n.data.type,attendance:n.data.attendance,isYesterdayPunchOut:n.data.message.includes("completed yesterday's session")})}else s({type:"error",text:"Face not recognized. Please enroll first or try again."}),setTimeout(()=>{o(!1),"success"!==a.type&&s({type:"info",text:"Scanning for face..."})},3e3)}catch(x){var u,d,h,f,m;console.error("Face recognition error:",x);let e="Face recognition failed.";x.message.includes("No face detected")?e="No face detected. Please position your face clearly in the camera.":x.message.includes("not recognized")?e="Face not recognized. Please enroll first or try again.":(429===(null===(u=x.response)||void 0===u?void 0:u.status)&&null!==(d=x.response)&&void 0!==d&&null!==(h=d.data)&&void 0!==h&&h.message||null!==(f=x.response)&&void 0!==f&&null!==(m=f.data)&&void 0!==m&&m.message)&&(e=x.response.data.message),s({type:"error",text:e}),setTimeout(()=>{o(!1),"success"!==a.type&&s({type:"info",text:"Scanning for face..."})},3e3)}},[i,l,A,w,t,a.type]);(0,r.useEffect)(()=>(u&&l&&!i&&"success"!==a.type&&(j.current=setInterval(()=>{C()},3e3)),()=>{j.current&&clearInterval(j.current)}),[u,l,i,a.type,C]);return(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Face Recognition Attendance"}),(0,Fa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Fa.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Auto-scan"}),(0,Fa.jsx)("button",{onClick:()=>d(!u),className:"relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ".concat(u?"bg-red-600":"bg-gray-200"),children:(0,Fa.jsx)("span",{"aria-hidden":"true",className:"pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 ".concat(u?"translate-x-5":"translate-x-0")})})]})]}),A&&(0,Fa.jsxs)("div",{className:"mb-4 p-3 rounded-lg ".concat(A.serviceReady?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:[(0,Fa.jsx)("div",{className:"text-sm font-medium",children:A.serviceReady?"\u2705 React Face Recognition: Ready (High Accuracy)":"\u26a0\ufe0f Face Recognition Service: Unavailable"}),A.currentMode&&(0,Fa.jsxs)("div",{className:"text-xs mt-1",children:[(0,Fa.jsx)("strong",{children:"Current Mode:"})," ",A.currentMode]}),A.features&&A.serviceReady&&(0,Fa.jsxs)("div",{className:"text-xs mt-1 space-y-1",children:[(0,Fa.jsx)("div",{children:(0,Fa.jsx)("strong",{children:"Features:"})}),(0,Fa.jsxs)("ul",{className:"text-xs text-green-700 ml-4 space-y-1",children:[(0,Fa.jsx)("li",{children:"\u2022 Real-time face detection and recognition"}),(0,Fa.jsx)("li",{children:"\u2022 High accuracy with neural networks"}),(0,Fa.jsx)("li",{children:"\u2022 Works entirely in the browser"}),(0,Fa.jsx)("li",{children:"\u2022 No server dependencies required"})]})]})]}),(0,Fa.jsx)("div",{className:"p-3 mb-4 rounded-lg text-center ".concat("success"===a.type?"bg-green-100 text-green-800":"error"===a.type?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:a.text}),(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg overflow-hidden bg-gray-100",children:(0,Fa.jsx)(Ks(),{audio:!1,ref:n,screenshotFormat:"image/jpeg",className:"w-full h-64 object-cover",onUserMedia:()=>{c(!0),s({type:"info",text:"Scanning for face..."})},onUserMediaError:()=>{s({type:"error",text:"Camera access denied or not available."}),c(!1)}})}),i&&(0,Fa.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,Fa.jsx)(It,{className:"animate-spin text-white text-4xl"})})]}),(0,Fa.jsx)("div",{className:"mt-4",children:(0,Fa.jsxs)("button",{onClick:()=>{j.current&&clearInterval(j.current),C()},disabled:i||!l,className:"w-full flex items-center justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:[(0,Fa.jsx)(ct,{className:"mr-2"}),"Capture & Recognize Face"]})}),m&&(0,Fa.jsx)("div",{className:"fixed top-4 right-4 bg-green-500 text-white py-3 px-6 rounded-lg shadow-lg z-50 animate-fade-in-down",children:(0,Fa.jsxs)("div",{className:"flex items-center",children:[(0,Fa.jsx)(mt,{className:"mr-2 text-xl"}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"font-medium",children:y}),(0,Fa.jsx)("p",{className:"text-sm",children:x})]})]})}),f>2&&(0,Fa.jsx)("div",{className:"mt-4 p-3 bg-yellow-100 text-yellow-800 rounded-lg",children:(0,Fa.jsx)("p",{className:"text-sm",children:"Having trouble? Make sure your face is clearly visible and well-lit. If problems persist, please use RFID attendance instead."})})]})},eT=e=>{if(!e)return"--:--";const t=new Date(e);let n=t.getHours();const r=t.getMinutes().toString().padStart(2,"0"),a=t.getSeconds().toString().padStart(2,"0"),s=n>=12?"PM":"AM";return n=n%12||12,"".concat(n,":").concat(r,":").concat(a," ").concat(s)},tT=e=>{if(!e)return"--/--/----";let t;return t="string"===typeof e?(e.includes("-"),new Date(e)):e,isNaN(t.getTime())?"--/--/----":t.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})},nT=e=>{const t=new Map;e.forEach(e=>{e._id&&t.set(e._id.toString(),e)});const n=new Map;t.forEach(e=>{if(e.attendanceRecordsGroupedByDate&&e.attendanceRecordsGroupedByDate.length>0)e.attendanceRecordsGroupedByDate.forEach(t=>{const r=t.date,a=t.records,s=e._id.toString(),i="".concat(s,"-").concat(r);n.has(i)||n.set(i,{worker:e,date:r,records:[]}),n.get(i).records.push(...a)});else if(e.attendanceRecords&&e.attendanceRecords.length>0){const t=new Map;e.attendanceRecords.forEach(r=>{if(r._id&&t.has(r._id))return;let a;r._id&&t.set(r._id,!0);try{if(!e._id)return void console.warn("Worker missing _id:",e);a=e._id.toString()}catch(o){return void console.error("Error processing worker ID:",e,o)}const s=new Date(r.checkIn).toISOString().split("T")[0],i="".concat(a,"-").concat(s);n.has(i)||n.set(i,{worker:e,date:s,records:[]}),n.get(i).records.push(r)})}});const r=[];return n.forEach(e=>{e.records.sort((e,t)=>new Date(e.checkIn)-new Date(t.checkIn)),r.push(e)}),r},rT=(e,t)=>{const n=new Date(t);n.setDate(n.getDate()-1);const r=n.toISOString().split("T")[0];return new Date(e.checkIn).toISOString().split("T")[0]===r&&e.checkOut&&e.isManualCorrection};const aT=function(){const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(2),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(""),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[v,y]=(0,r.useState)(null),[b,w]=(0,r.useState)(""),N=(0,r.useCallback)(async()=>{try{const e=await Ea.get("/shop/attendance",{withCredentials:!0});console.log("Attendance data received:",e.data),t(e.data),l(!1)}catch(e){u("Failed to fetch today's attendance data."),console.error(e),l(!1)}},[]);if((0,r.useEffect)(()=>{N();const e=setInterval(()=>{N()},2e3);return()=>{clearInterval(e)}},[N]),(0,r.useEffect)(()=>{const t=e.filter(e=>!!(e.attendanceRecordsGroupedByDate&&e.attendanceRecordsGroupedByDate.length>0)||!!(e.attendanceRecords&&e.attendanceRecords.length>0)).filter((e,t,n)=>t===n.findIndex(t=>t._id===e._id)),n=[...nT(t)].sort((e,t)=>{const n=e=>{let t=new Date(0);return e.records.forEach(e=>{e.checkIn&&new Date(e.checkIn)>t&&(t=new Date(e.checkIn)),e.checkOut&&new Date(e.checkOut)>t&&(t=new Date(e.checkOut))}),t},r=n(e);return n(t)-r}),r=(new Date).toISOString().split("T")[0],i=n.filter(e=>e.date===r),o=n.filter(e=>e.date!==r),l=[...new Set(o.map(e=>e.date))].sort((e,t)=>new Date(t)-new Date(e)),c=l.slice(0,s),u=[...i,...o.filter(e=>c.includes(e.date))];a(u)},[e,s]),o)return(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading attendance data..."});if(c)return(0,Fa.jsx)("div",{className:"p-6 text-center text-red-500",children:c});const j=e.filter(e=>!!(e.attendanceRecordsGroupedByDate&&e.attendanceRecordsGroupedByDate.length>0)||!!(e.attendanceRecords&&e.attendanceRecords.length>0)).filter((e,t,n)=>t===n.findIndex(t=>t._id===e._id)),C=[...nT(j)].sort((e,t)=>{const n=e=>{let t=new Date(0);return e.records.forEach(e=>{e.checkIn&&new Date(e.checkIn)>t&&(t=new Date(e.checkIn)),e.checkOut&&new Date(e.checkOut)>t&&(t=new Date(e.checkOut))}),t},r=n(e);return n(t)-r}),B=(new Date).toISOString().split("T")[0],k=(C.filter(e=>e.date===B),C.filter(e=>e.date!==B)),S=[...new Set(k.map(e=>e.date))].sort((e,t)=>new Date(t)-new Date(e)),E=S.length>s;return(0,Fa.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-lg space-y-6",children:[(0,Fa.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[(0,Fa.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Attendance Tracker"}),(0,Fa.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 w-full sm:w-auto",children:[(0,Fa.jsx)("button",{onClick:()=>f(!0),className:"bg-primary text-white font-semibold py-2 px-4 rounded-lg hover:bg-primary-dark transition-colors text-sm sm:text-base",children:"RFID"}),(0,Fa.jsx)("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base",children:"Face Attendance"}),(0,Fa.jsx)("button",{onClick:()=>{const e=[];n.forEach(t=>{const n=[...t.records].sort((e,t)=>new Date(e.checkIn)-new Date(t.checkIn)),r=n.filter(e=>e.checkIn).map(e=>eT(e.checkIn)),a=n.filter(e=>e.checkOut).map(e=>eT(e.checkOut));let s=0;n.forEach(e=>{if(e.checkIn&&e.checkOut){const t=new Date(e.checkIn),n=new Date(e.checkOut);s+=n-t}});const i=Math.floor(s/1e3),o=Math.floor(i/3600).toString().padStart(2,"0"),l=Math.floor(i%3600/60).toString().padStart(2,"0"),c=(i%60).toString().padStart(2,"0"),u="".concat(o,".").concat(l,".").concat(c),d=Math.max(r.length,a.length);for(let A=0;A<d;A++)e.push({"Employee Name":t.worker.name,"RF ID":t.worker.rfid||"N/A",Date:tT(t.date),"Punch In":r[A]||"","Punch Out":a[A]||"","Total Duration":0===A?u:""});0===d&&e.push({"Employee Name":t.worker.name,"RF ID":t.worker.rfid||"N/A",Date:tT(t.date),"Punch In":"","Punch Out":"","Total Duration":u})});const t=p_.json_to_sheet(e),r=p_.book_new();p_.book_append_sheet(r,t,"Attendance Report"),r_(r,"attendance_report.xlsx")},className:"bg-green-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-700 transition-colors text-sm sm:text-base",children:"Download"})]})]}),(0,Fa.jsx)(Ys,{isOpen:h,onClose:()=>f(!1),title:"RFID Attendance",children:(0,Fa.jsx)(ZI,{onAttendanceRecorded:e=>{N()}})}),(0,Fa.jsx)(Ys,{isOpen:p,onClose:()=>m(!1),title:"Face Attendance",children:(0,Fa.jsx)($I,{onAttendanceRecorded:e=>{N()}})}),(0,Fa.jsx)(Ys,{isOpen:g,onClose:()=>{x(!1),y(null),w("")},title:"Correct Missing Punch Out",children:(0,Fa.jsxs)("div",{className:"p-4",children:[v&&(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsxs)("p",{className:"font-semibold text-sm sm:text-base",children:["Worker: ",v.worker.name]}),(0,Fa.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:["Missing Punch In: ",eT(v.incompleteRecord.checkIn)]})]}),(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Punch Out Time"}),(0,Fa.jsx)("input",{type:"datetime-local",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",value:b,onChange:e=>w(e.target.value)})]}),(0,Fa.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2",children:[(0,Fa.jsx)("button",{onClick:()=>{x(!1),y(null),w("")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 text-sm",children:"Cancel"}),(0,Fa.jsx)("button",{onClick:async()=>{if(v&&b)try{await Ea.post("/shop/attendance/correct-missing-punch",{workerId:v.worker._id,checkOutTime:b},{withCredentials:!0});alert("Missing punch corrected successfully"),x(!1),w(""),y(null),N()}catch(n){var e,t;console.error("Error correcting missing punch:",n),alert("Failed to correct missing punch: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Server error"))}else alert("Please select a worker and enter a punch out time")},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm",children:"Correct Punch"})]})]})}),(0,Fa.jsx)("div",{className:"relative w-full sm:w-1/3 mb-6",children:(0,Fa.jsx)("input",{type:"text",placeholder:"Search by staff name or ID...",className:"w-full pl-10 pr-4 py-2 border border-medium-gray rounded-lg text-sm",value:d,onChange:e=>A(e.target.value)})}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full bg-white rounded-lg shadow-md",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee Name"}),(0,Fa.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RF ID"}),(0,Fa.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Fa.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Punch In"}),(0,Fa.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Punch Out"}),(0,Fa.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Duration"}),(0,Fa.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((e,t)=>{const n=[...e.records].sort((e,t)=>new Date(e.checkIn)-new Date(t.checkIn)),r=n.filter(e=>e.checkIn).map(t=>{const n=new Date(e.date);return rT(t,n)?{time:eT(t.checkIn),isMissedPunchOut:!0,checkOutTime:eT(t.checkOut)}:{time:eT(t.checkIn),isMissedPunchOut:!1}}),a=n.filter(e=>e.checkOut).map(t=>{const n=new Date(e.date);return rT(t,n)?{time:eT(t.checkOut),isMissedPunchOut:!0}:{time:eT(t.checkOut),isMissedPunchOut:!1}});let s=0;n.forEach(e=>{if(e.checkIn&&e.checkOut){const t=new Date(e.checkIn),n=new Date(e.checkOut);s+=n-t}});const i=Math.floor(s/1e3),o=Math.floor(i/3600).toString().padStart(2,"0"),l=Math.floor(i%3600/60).toString().padStart(2,"0"),c=(i%60).toString().padStart(2,"0"),u="".concat(o,".").concat(l,".").concat(c),d=new Date(e.date),A=((e,t)=>{const n=new Date(t);n.setDate(n.getDate()-1);const r=n.toISOString().split("T")[0];return e.filter(e=>new Date(e.checkIn).toISOString().split("T")[0]===r).find(e=>!e.checkOut)})(e.records,d),h="".concat(e.worker._id,"-").concat(e.date,"-").concat(Math.random().toString(36).substr(2,9));return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm font-medium text-gray-900",children:e.worker.name}),(0,Fa.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:e.worker.rfid||"N/A"}),(0,Fa.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:tT(e.date)}),(0,Fa.jsx)("td",{className:"px-4 sm:px-6 py-4 text-xs sm:text-sm",children:(0,Fa.jsx)("div",{className:"space-y-1",children:r.length>0?r.map((e,t)=>(0,Fa.jsx)("div",{className:"flex items-center",children:e.isMissedPunchOut?(0,Fa.jsxs)("span",{className:"text-xs sm:text-sm text-gray-400 flex items-center",children:[(0,Fa.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Fa.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.time]}):(0,Fa.jsx)("span",{className:"text-xs sm:text-sm text-green-500",children:e.time})},"in-".concat(t))):(0,Fa.jsx)("span",{className:"text-xs sm:text-sm text-green-500",children:"--:--"})})}),(0,Fa.jsx)("td",{className:"px-4 sm:px-6 py-4 text-xs sm:text-sm",children:(0,Fa.jsx)("div",{className:"space-y-1",children:a.length>0?a.map((e,t)=>(0,Fa.jsx)("div",{className:"flex items-center",children:e.isMissedPunchOut?(0,Fa.jsxs)("span",{className:"text-xs sm:text-sm text-gray-400 flex items-center",children:[(0,Fa.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Fa.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.time]}):(0,Fa.jsx)("span",{className:"text-xs sm:text-sm text-red-500",children:e.time})},"out-".concat(t))):(0,Fa.jsx)("span",{className:"text-xs sm:text-sm text-red-500",children:"--:--"})})}),(0,Fa.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:u}),(0,Fa.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:A&&(0,Fa.jsx)("button",{onClick:()=>{y({worker:e.worker,incompleteRecord:A}),x(!0)},className:"px-2 sm:px-3 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600 text-xs",children:"Correct Missing Punch"})})]},h)})})]})}),E&&(0,Fa.jsx)("div",{className:"flex justify-center mt-4",children:(0,Fa.jsx)("button",{onClick:()=>{i(e=>e+2)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Load More"})})]})};const sT=function(){const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(null),[s,i]=(0,r.useState)(new Set),[o,l]=(0,r.useState)({}),[c,u]=(0,r.useState)(""),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)(!0),[p,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)([]),N=(0,r.useCallback)(async()=>{f(!0),u(""),A("");try{const e=await Ea.get("/shop/invoices/all");t(e.data||[])}catch(e){u("Failed to fetch invoices. Please try again later."),console.error(e)}finally{f(!1)}},[]);(0,r.useEffect)(()=>{N()},[N]);const j=()=>{x(!1),a(null),i(new Set),l({}),u(""),A("")},C=()=>{if(s.size===n.items.length)i(new Set);else{const e=new Set(n.items.map(e=>e.product));i(e)}},B=e=>{i(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},k=(e,t)=>{l(n=>(0,ye.A)((0,ye.A)({},n),{},{[e]:t}))},S=async()=>{if(0===s.size&&"Pending"===n.status)return void u("You must select at least one item to confirm.");const e=n.items.filter(e=>s.has(e.product)).map(e=>{const t=o[e.product]||e.receivedQuantity||0;return(0,ye.A)((0,ye.A)({},e),{},{receivedQuantity:t})});w(e),y(!0)},E=()=>{(async()=>{m(!0),u(""),A(""),y(!1),w([]);try{const e={confirmedItems:Array.from(s),receivedQuantities:o},t=await Ea.post("/shop/invoices/".concat(n._id,"/confirm"),e);A(t.data.message),setTimeout(()=>{N(),j()},1500)}catch(r){var e,t;u((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to confirm the invoice."),console.error(r)}finally{m(!1)}})()},F=()=>{y(!1),w([])},_=e=>{const t=new Date(e);return{date:t.toLocaleDateString(),time:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}},I=e=>"Pending"===e?(0,Fa.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,Fa.jsx)(xt,{className:"mr-1 h-3 w-3"}),"Pending"]}):"Partial"===e?(0,Fa.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[(0,Fa.jsx)(Xt,{className:"mr-1 h-3 w-3"}),"Partial"]}):"Confirmed"===e?(0,Fa.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,Fa.jsx)(At,{className:"mr-1 h-3 w-3"}),"Confirmed"]}):(0,Fa.jsx)("span",{className:"text-gray-500",children:e});if(h)return(0,Fa.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Loading invoices..."});if(g&&n){var T;const e=n.items.filter(e=>e.shopConfirmed&&e.receivedQuantity===e.quantity),t=n.items.filter(e=>e.shopConfirmed&&e.receivedQuantity!==e.quantity),r=n.items.filter(e=>!e.shopConfirmed),a=e.length>0,i=t.length>0,l=r.length>0;return(0,Fa.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-md",children:[(0,Fa.jsx)(Ys,{isOpen:v,onClose:F,title:"Confirm Invoice Submission",children:(0,Fa.jsxs)("div",{className:"p-4",children:[(0,Fa.jsx)("p",{className:"text-gray-700 mb-4",children:"You are about to confirm the following pending product(s):"}),(0,Fa.jsx)("ul",{className:"mb-4 text-gray-700",children:b.map((e,t)=>(0,Fa.jsx)("li",{className:"mb-2 p-2 bg-yellow-50 rounded",children:(0,Fa.jsxs)("div",{className:"font-medium",children:[e.productName," \u2014 Quantity: ",e.quantity," | Received: ",e.receivedQuantity||0]})},t))}),(0,Fa.jsx)("p",{className:"text-gray-700 mb-4",children:"Do you want to confirm this pending product?"}),(0,Fa.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Fa.jsx)("button",{onClick:F,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100",children:"Cancel"}),(0,Fa.jsx)("button",{onClick:E,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark",children:"Confirm"})]})]})}),(0,Fa.jsx)("button",{onClick:j,className:"mb-4 text-blue-600 hover:text-blue-800 flex items-center",children:"\u2190 Back to Invoice List"}),(0,Fa.jsxs)("div",{className:"flex items-center justify-between mb-4 border-b pb-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Pending"===n.status?"Review Incoming Invoice":"Invoice Details"}),(0,Fa.jsx)("p",{className:"text-sm text-gray-500",children:"Pending"===n.status?"Confirm the items you have received from the admin.":"Partial"===n.status?"This invoice has been partially confirmed. You can confirm additional items.":"This invoice has been fully confirmed."})]}),(0,Fa.jsx)(Nt,{className:"text-3xl text-primary"})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Invoice Number"}),(0,Fa.jsx)("p",{className:"font-semibold text-gray-800",children:n.invoiceNumber})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Issue Date"}),(0,Fa.jsx)("p",{className:"font-semibold text-gray-800",children:_(n.issueDate).date})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"From (Admin)"}),(0,Fa.jsx)("p",{className:"font-semibold text-gray-800",children:(null===(T=n.admin)||void 0===T?void 0:T.name)||"N/A"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Status"}),I(n.status)]})]}),("Confirmed"===n.status||"Partial"===n.status)&&(0,Fa.jsxs)("div",{className:"space-y-8",children:[a&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h4",{className:"text-lg font-semibold text-gray-700 mb-3 pb-2 border-b border-green-200",children:"\u2705 Received Products"}),(0,Fa.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-green-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Received Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,Fa.jsxs)("tr",{className:"hover:bg-green-50",children:[(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.receivedQuantity||"-"}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},"".concat(e.product,"-confirmed")))})]})})]}),i&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h4",{className:"text-lg font-semibold text-gray-700 mb-3 pb-2 border-b border-blue-200",children:"\ud83d\udccb Partial Products"}),(0,Fa.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-blue-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Received Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,Fa.jsxs)("tr",{className:"hover:bg-blue-50",children:[(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.receivedQuantity||"-"}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},"".concat(e.product,"-partial")))})]})})]}),l&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h4",{className:"text-lg font-semibold text-gray-700 mb-3 pb-2 border-b border-yellow-200",children:"\u23f3 Pending Products"}),(0,Fa.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-yellow-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase w-12",children:"Confirm"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Received Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(e=>(0,Fa.jsxs)("tr",{className:"hover:bg-yellow-50",children:[(0,Fa.jsx)("td",{className:"px-4 py-4",children:(0,Fa.jsx)("input",{type:"checkbox",checked:s.has(e.product),onChange:()=>B(e.product),className:"h-5 w-5 rounded border-gray-300 text-primary focus:ring-primary",disabled:"Confirmed"===n.status})}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center",children:(0,Fa.jsx)("input",{type:"text",min:"0",value:o[e.product]||"",onChange:t=>k(e.product,t.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-center",placeholder:"0",disabled:"Confirmed"===n.status})}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},"".concat(e.product,"-pending")))})]})}),(0,Fa.jsxs)("div",{className:"mt-6",children:[c&&(0,Fa.jsx)("p",{className:"mb-4 text-center text-red-600 bg-red-100 p-3 rounded-lg",children:c}),d&&(0,Fa.jsx)("p",{className:"mb-4 text-center text-green-600 bg-green-100 p-3 rounded-lg",children:d}),(0,Fa.jsxs)("button",{onClick:S,disabled:p||0===s.size,className:"w-full bg-primary hover:bg-primary-dark text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline flex items-center justify-center transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:[(0,Fa.jsx)(Ht,{className:"mr-2"}),p?"Submitting...":"Confirm & Add ".concat(s.size," Item(s) to Inventory")]})]})]})]}),"Pending"===n.status&&(0,Fa.jsxs)("div",{className:"mt-6",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Fa.jsx)("h4",{className:"text-lg font-semibold text-gray-700",children:"Invoice Items"}),(0,Fa.jsx)("button",{onClick:C,className:"text-sm text-primary hover:text-primary-dark font-medium",children:s.size===n.items.length?"Deselect All":"Select All"})]}),(0,Fa.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase w-12",children:"Confirm"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Product (SKU)"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Unit"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Received Quantity"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Unit Price"}),(0,Fa.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Total Price"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.items.map(e=>(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"px-4 py-4",children:(0,Fa.jsx)("input",{type:"checkbox",checked:s.has(e.product),onChange:()=>B(e.product),className:"h-5 w-5 rounded border-gray-300 text-primary focus:ring-primary"})}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.productName," (",e.productSku,")"]}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.unit||"N/A"})}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center text-gray-600",children:e.quantity}),(0,Fa.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center",children:(0,Fa.jsx)("input",{type:"text",min:"0",value:o[e.product]||"",onChange:t=>k(e.product,t.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-center",placeholder:"0"})}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-600",children:["\u20b9",e.unitPrice.toFixed(2)]}),(0,Fa.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-800",children:["\u20b9",e.totalPrice.toFixed(2)]})]},e.product))})]})})]}),(0,Fa.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Total Invoice Amount:"}),(0,Fa.jsxs)("span",{className:"font-semibold text-gray-800",children:["\u20b9",n.grandTotal.toFixed(2)]})]}),("Pending"===n.status||"Partial"===n.status)&&(0,Fa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Selected Items Total:"}),(0,Fa.jsxs)("span",{className:"text-xl font-bold text-primary",children:["\u20b9",n.items.filter(e=>s.has(e.product)).reduce((e,t)=>e+t.totalPrice,0).toFixed(2)]})]})]}),"Pending"===n.status&&(0,Fa.jsxs)("div",{className:"mt-8",children:[c&&(0,Fa.jsx)("p",{className:"mb-4 text-center text-red-600 bg-red-100 p-3 rounded-lg",children:c}),d&&(0,Fa.jsx)("p",{className:"mb-4 text-center text-green-600 bg-green-100 p-3 rounded-lg",children:d}),(0,Fa.jsxs)("button",{onClick:S,disabled:p||0===s.size,className:"w-full bg-primary hover:bg-primary-dark text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline flex items-center justify-center transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:[(0,Fa.jsx)(Ht,{className:"mr-2"}),p?"Submitting...":"Confirm & Add ".concat(s.size," Item(s) to Inventory")]})]})]})}return(0,Fa.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-md",children:[(0,Fa.jsxs)("div",{className:"flex items-center justify-between mb-6 border-b pb-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Invoice History"}),(0,Fa.jsx)("p",{className:"text-sm text-gray-500",children:"View all invoices sent by admin with date and time."})]}),(0,Fa.jsx)(Nt,{className:"text-3xl text-primary"})]}),c&&(0,Fa.jsx)("div",{className:"mb-4 p-4 bg-red-100 text-red-800 rounded-lg",children:(0,Fa.jsx)("p",{children:c})}),d&&(0,Fa.jsx)("div",{className:"mb-4 p-4 bg-green-100 text-green-800 rounded-lg",children:(0,Fa.jsx)("p",{children:d})}),0===e.length?(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)(St,{className:"mx-auto text-5xl text-gray-400 mb-4"}),(0,Fa.jsx)("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Invoices Found"}),(0,Fa.jsx)("p",{className:"text-gray-500",children:"There are no invoices from admin yet. When admin sends invoices, they will appear here."})]}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice #"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"From Admin"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var t;const{date:n,time:r}=_(e.issueDate);return(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.invoiceNumber}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"font-medium",children:n}),(0,Fa.jsx)("div",{className:"text-xs text-gray-500",children:r})]})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:(null===(t=e.admin)||void 0===t?void 0:t.name)||"N/A"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:I(e.status)}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:["\u20b9",e.grandTotal.toFixed(2)]}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium space-x-2",children:[(0,Fa.jsxs)("button",{onClick:()=>(e=>{if(a(e),x(!0),"Pending"===e.status){const t=new Set(e.items.map(e=>e.product));i(t);const n={};e.items.forEach(e=>{n[e.product]=e.receivedQuantity||""}),l(n)}else{i(new Set);const t={};e.items.forEach(e=>{t[e.product]=e.receivedQuantity||""}),l(t)}})(e),className:"inline-flex items-center px-3 py-1.5 bg-blue-100 text-blue-700 text-sm font-medium rounded-md hover:bg-blue-200 transition-colors",children:[(0,Fa.jsx)(wt,{className:"mr-1 h-4 w-4"}),"Partial"===e.status?"View Partial":"View"]}),(0,Fa.jsxs)("button",{onClick:()=>{e?P_(e):console.error("No invoice data provided")},className:"inline-flex items-center px-3 py-1.5 bg-green-100 text-green-700 text-sm font-medium rounded-md hover:bg-green-200 transition-colors",children:[(0,Fa.jsx)(yt,{className:"mr-1 h-4 w-4"}),"PDF"]})]})]},e._id)})})]})})]})};const iT=function(e){var t,n;let{baseUrl:a="/shop"}=e;const[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(""),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)({product:null,unit:"",quantity:"",price:0,productName:"",sku:""}),[g,x]=(0,r.useState)([]),[v,y]=(0,r.useState)(0),[b,w]=(0,r.useState)("none"),[N,j]=(0,r.useState)(""),[C,B]=(0,r.useState)(0),[k,S]=(0,r.useState)(0),[E,F]=(0,r.useState)(0),[_,I]=(0,r.useState)("Cash"),[T,D]=(0,r.useState)(""),[L,U]=(0,r.useState)(""),[P,R]=(0,r.useState)(""),[O,M]=(0,r.useState)(!0),[Q,H]=(0,r.useState)(!0),z="".concat(a,"/products"),W=(0,r.useCallback)(async()=>{M(!0);try{const e=await Ea.get(z,{headers:{"Content-Type":"application/json"},withCredentials:!0});i(e.data)}catch(e){R("Failed to fetch products."),console.error(e)}finally{M(!1)}},[z]);return(0,r.useEffect)(()=>{W()},[W]),(0,r.useEffect)(()=>{const e=g.reduce((e,t)=>e+t.quantity*t.price,0);y(e);let t=0;if("percentage"===b&&N){const n=parseFloat(N);!isNaN(n)&&n>=0&&n<=100&&(t=e*n/100)}else if("cash"===b&&N){const n=parseFloat(N);!isNaN(n)&&n>=0&&n<=e&&(t=n)}B(t);const n=e-t;S(n),F(n)},[g,b,N]),O?(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading data..."}):(0,Fa.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-md",children:[(0,Fa.jsx)("h3",{className:"text-xl sm:text-2xl font-semibold mb-4 text-text-primary",children:"Create Bill"}),(0,Fa.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h4",{className:"text-lg sm:text-xl font-medium text-gray-700 mb-3",children:"Customer Details"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-text-secondary text-sm font-medium mb-1",htmlFor:"mobileNumber",children:"Customer Mobile Number"}),(0,Fa.jsx)("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",id:"mobileNumber",value:c,onChange:e=>u(e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"customerName",children:"Customer Name"}),(0,Fa.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"customerName",value:d,onChange:e=>A(e.target.value),required:!0})]})]})]}),(0,Fa.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Add Products"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,Fa.jsxs)("div",{className:"md:col-span-2",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Product"}),(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsx)("input",{type:"text",value:h,onChange:e=>{const t=e.target.value;if(f(t),t){const e=s.filter(e=>e.name&&e.name.toLowerCase().includes(t.toLowerCase())||e.sku&&e.sku.toLowerCase().includes(t.toLowerCase()));l(e)}else l([])},placeholder:"Search by name or SKU...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),o.length>0&&(0,Fa.jsx)("ul",{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:o.map(e=>(0,Fa.jsx)("li",{className:"relative cursor-default select-none py-2 pl-3 pr-9 hover:bg-indigo-600 hover:text-white",onClick:()=>(e=>{f("".concat(e.name," (").concat(e.sku,")")),l([]),e.prices&&e.prices.length>0?(m({product:e,unit:e.prices[0].unit,quantity:"",price:e.prices[0].sellingPrice,productName:e.name,sku:e.sku}),R("")):(R('Product "'.concat(e.name,'" has no purchase rates set. Please add them first.')),m({product:null,unit:"",quantity:"",price:0,productName:"",sku:""}))})(e),children:(0,Fa.jsxs)("div",{className:"flex",children:[(0,Fa.jsx)("span",{className:"font-normal truncate",children:e.name}),(0,Fa.jsxs)("span",{className:"ml-2 text-gray-500",children:["(",e.sku,")"]})]})},"".concat(e._id,"-").concat(e.sku)))})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,Fa.jsx)("select",{value:p.unit,onChange:e=>{const t=e.target.value,n=p.product.prices.find(e=>e.unit===t);n&&m(e=>(0,ye.A)((0,ye.A)({},e),{},{unit:n.unit,price:n.sellingPrice}))},disabled:!p.product,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-200",children:null===(t=p.product)||void 0===t||null===(n=t.prices)||void 0===n?void 0:n.map(e=>(0,Fa.jsx)("option",{value:e.unit,children:e.unit},e.unit))})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,Fa.jsx)("input",{type:"text",value:p.quantity,onChange:e=>{const t=e.target.value;if(""===t)m(e=>(0,ye.A)((0,ye.A)({},e),{},{quantity:""}));else{const e=parseInt(t,10);!isNaN(e)&&e>0&&m(t=>(0,ye.A)((0,ye.A)({},t),{},{quantity:e}))}},disabled:!p.product,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-200",min:"1"})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),(0,Fa.jsx)("input",{type:"text",value:p.price,readOnly:!0,className:"mt-1 block w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm"})]}),(0,Fa.jsx)("div",{className:"md:col-span-2 flex items-end",children:(0,Fa.jsx)("button",{type:"button",onClick:()=>{const e=""===p.quantity?1:p.quantity;if(!p.product||e<=0)return void R("Please select a valid product and quantity.");const t={product:p.product._id,productName:p.productName,sku:p.sku,unit:p.unit,quantity:e,price:p.price},n=g.findIndex(e=>e.product===t.product&&e.unit===t.unit);if(n>-1){const e=[...g];e[n].quantity+=t.quantity,x(e)}else x([...g,t]);f(""),m({product:null,unit:"",quantity:"",price:0,productName:"",sku:""}),R("")},disabled:!p.product,className:"w-full px-4 py-2 bg-blue-600 text-white font-semibold rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400",children:"Add Item"})})]}),P&&!P.includes("purchase rates")&&(0,Fa.jsx)("div",{className:"mt-2 text-red-500 text-sm",children:P})]}),g.length>0&&(0,Fa.jsx)("div",{className:"mt-6 overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Product"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"SKU"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Unit"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Quantity"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Price"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Total"}),(0,Fa.jsx)("th",{className:"px-2 sm:px-6 py-3 text-left text-xs font-semibold text-text-secondary uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map((e,t)=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.productName}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.sku}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.unit}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.quantity}),(0,Fa.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",e.price.toFixed(2)]}),(0,Fa.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",(e.quantity*e.price).toFixed(2)]}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Fa.jsx)("button",{onClick:()=>(e=>{const t=g.filter((t,n)=>n!==e);x(t)})(t),className:"text-red-600 hover:text-red-900",children:"Remove"})})]},t))})]})}),(0,Fa.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Discount"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Type"}),(0,Fa.jsxs)("select",{value:b,onChange:e=>w(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,Fa.jsx)("option",{value:"none",children:"No Discount"}),(0,Fa.jsx)("option",{value:"percentage",children:"Percentage (%)"}),(0,Fa.jsx)("option",{value:"cash",children:"Cash (\u20b9)"})]})]}),"none"!==b&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"percentage"===b?"Discount Percentage":"Discount Amount"}),(0,Fa.jsx)("input",{type:"text",value:N,onChange:e=>j(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",min:"0",step:"0.01",max:"percentage"===b?"100":v})]}),(0,Fa.jsx)("div",{className:"flex items-end",children:(0,Fa.jsx)("div",{className:"text-sm",children:(0,Fa.jsxs)("p",{className:"font-medium",children:["Discount Amount: \u20b9",C.toFixed(2)]})})})]})]}),(0,Fa.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Bill Summary"}),(0,Fa.jsxs)("div",{className:"space-y-2",children:[(0,Fa.jsxs)("div",{className:"flex justify-between",children:[(0,Fa.jsx)("span",{children:"Subtotal:"}),(0,Fa.jsxs)("span",{children:["\u20b9",v.toFixed(2)]})]}),C>0&&(0,Fa.jsxs)("div",{className:"flex justify-between",children:[(0,Fa.jsx)("span",{children:"Discount:"}),(0,Fa.jsxs)("span",{children:["-\u20b9",C.toFixed(2)]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between",children:[(0,Fa.jsx)("span",{children:"Net Amount:"}),(0,Fa.jsxs)("span",{children:["\u20b9",k.toFixed(2)]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,Fa.jsx)("span",{children:"Total Amount:"}),(0,Fa.jsxs)("span",{children:["\u20b9",E.toFixed(2)]})]})]})]}),(0,Fa.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Payment Details"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"paymentMethod",children:"Payment Method"}),(0,Fa.jsxs)("select",{id:"paymentMethod",value:_,onChange:e=>I(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,Fa.jsx)("option",{value:"Cash",children:"Cash"}),(0,Fa.jsx)("option",{value:"UPI",children:"UPI"}),(0,Fa.jsx)("option",{value:"Card",children:"Card"})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"amountPaid",children:"Amount Paid"}),(0,Fa.jsx)("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"amountPaid",value:T,onChange:e=>D(e.target.value),required:!0})]})]}),(0,Fa.jsxs)("div",{className:"flex justify-end items-center mt-4",children:[(0,Fa.jsx)("span",{className:"text-lg font-bold text-gray-800 mr-4",children:"Balance:"}),(0,Fa.jsxs)("span",{className:"text-lg font-bold text-red-600",children:["\u20b9",(E-Number(T)).toFixed(2)]})]})]}),(0,Fa.jsxs)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[(0,Fa.jsx)("label",{htmlFor:"autoDownload",className:"text-gray-700 font-bold",children:"Auto Download Bill after Creation"}),(0,Fa.jsx)("input",{type:"checkbox",id:"autoDownload",checked:Q,onChange:e=>H(e.target.checked),className:"form-checkbox h-5 w-5 text-primary"})]}),(0,Fa.jsx)("button",{type:"submit",onClick:async e=>{if(e.preventDefault(),U(""),R(""),!c||!d)return void R("Please enter customer details.");if(0===g.length)return void R("Please add at least one item to the bill.");if("none"!==b&&N){const e=parseFloat(N);if(isNaN(e))return void R("Please enter a valid discount value.");if("percentage"===b&&(e<0||e>100))return void R("Percentage discount must be between 0 and 100.");if("cash"===b&&(e<0||e>v))return void R("Cash discount cannot be negative or exceed subtotal.")}const t=Number(T);if(t<E)return void R("Amount paid cannot be less than total amount.");const n="".concat(a,"/billing");try{const e={customerMobileNumber:c,customerName:d,items:g,totalAmount:E,paymentMethod:_,amountPaid:t,discountType:b,discountValue:N?parseFloat(N):0,discountAmount:C},r=await Ea.post(n,JSON.stringify(e),{headers:{"Content-Type":"application/json"},withCredentials:!0});U("Bill created successfully!"),Q&&P_(r.data,r.data.shop),u(""),A(""),x([]),y(0),w("none"),j(""),B(0),S(0),F(0),D(""),f(""),m({product:null,unit:"",quantity:"",price:0,productName:"",sku:""})}catch(i){var r,s;R((null===(r=i.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Failed to create bill. Please try again."),console.error(i)}},className:"w-full bg-primary hover:bg-primary-dark text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:shadow-outline",children:"Create Bill"}),L&&(0,Fa.jsx)("p",{className:"mt-4 text-green-500",children:L}),P&&(0,Fa.jsx)("p",{className:"mt-4 text-red-500",children:P})]})},oT=e=>{var t,n,r,a,s,i;let{bill:o,onClose:l}=e;return o?(0,Fa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Fa.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,Fa.jsxs)("div",{className:"p-6",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,Fa.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Bill Details"}),(0,Fa.jsx)("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-gray-50 rounded-lg",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Bill Information"}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Bill ID:"})," ",o._id]}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Date:"})," ",new Date(o.billDate).toLocaleDateString()]}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Payment Method:"})," ",o.paymentMethod]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Customer Information"}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Name:"})," ",o.customerName]}),(0,Fa.jsxs)("p",{className:"text-gray-600",children:[(0,Fa.jsx)("span",{className:"font-medium",children:"Mobile:"})," ",o.customerMobileNumber]})]})]}),(0,Fa.jsxs)("div",{className:"mb-8",children:[(0,Fa.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Purchased Items"}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.items.map((e,t)=>{var n,r,a;return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.productName||(e.product?e.product.name:"[Deleted Product]")}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.unit||(e.product?e.product.unit:"N/A")}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.quantity}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["\u20b9",(null===(n=e.price)||void 0===n?void 0:n.toFixed(2))||(null===(r=e.unitPrice)||void 0===r?void 0:r.toFixed(2))||"0.00"]}),(0,Fa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["\u20b9",(null===(a=e.totalPrice)||void 0===a?void 0:a.toFixed(2))||((e.price||e.unitPrice||0)*e.quantity).toFixed(2)]})]},t)})})]})})]}),(0,Fa.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,Fa.jsx)("div",{className:"flex justify-end",children:(0,Fa.jsxs)("div",{className:"w-full max-w-xs",children:[(0,Fa.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,Fa.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(t=o.subtotal)||void 0===t?void 0:t.toFixed(2))||(null===(n=o.totalAmount)||void 0===n?void 0:n.toFixed(2))||"0.00"]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Tax:"}),(0,Fa.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(r=o.tax)||void 0===r?void 0:r.toFixed(2))||"0.00"]})]}),(0,Fa.jsxs)("div",{className:"flex justify-between py-2 border-t border-gray-300 mt-2",children:[(0,Fa.jsx)("span",{className:"text-lg font-bold text-gray-800",children:"Total Amount:"}),(0,Fa.jsxs)("span",{className:"text-lg font-bold text-gray-800",children:["\u20b9",(null===(a=o.totalAmount)||void 0===a?void 0:a.toFixed(2))||"0.00"]})]}),o.amountPaid>0&&(0,Fa.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Amount Paid:"}),(0,Fa.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(s=o.amountPaid)||void 0===s?void 0:s.toFixed(2))||"0.00"]})]}),o.balance>0&&(0,Fa.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Fa.jsx)("span",{className:"text-gray-600",children:"Balance:"}),(0,Fa.jsxs)("span",{className:"font-medium",children:["\u20b9",(null===(i=o.balance)||void 0===i?void 0:i.toFixed(2))||"0.00"]})]})]})})})]})})}):null};const lT=function(){const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(""),[d,A]=(0,r.useState)("All"),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,x]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async()=>{try{const e=[...(await Ea.get("/shop/billing",{headers:{"Content-Type":"application/json"},withCredentials:!0})).data].sort((e,t)=>{const n=e.billDate?new Date(e.billDate).getTime():1e3*parseInt(e._id.slice(0,8),16);return(t.billDate?new Date(t.billDate).getTime():1e3*parseInt(t._id.slice(0,8),16))-n});t(e)}catch(e){l("Failed to fetch bills."),console.error(e)}finally{i(!1)}})()},[]),(0,r.useEffect)(()=>{let t=[...e];if(c&&(t=t.filter(e=>e.customerName.toLowerCase().includes(c.toLowerCase())||e.customerMobileNumber.includes(c))),"All"!==d&&(t=t.filter(e=>e.paymentMethod===d)),h){const e=new Date(h).getTime();t=t.filter(t=>new Date(t.billDate).getTime()>=e)}if(p){const e=new Date(p).getTime();t=t.filter(t=>new Date(t.billDate).getTime()<=e+864e5)}a(t)},[e,c,d,h,p]),s?(0,Fa.jsx)("div",{className:"p-6 text-center",children:"Loading bills..."}):o?(0,Fa.jsx)("div",{className:"p-6 text-center text-red-500",children:o}):(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("h3",{className:"text-xl md:text-2xl font-semibold mb-4 text-gray-800",children:"View Bills"}),(0,Fa.jsx)("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:(0,Fa.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Search"}),(0,Fa.jsx)("input",{type:"text",placeholder:"Search by name or number...",value:c,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border rounded-lg"})]}),(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Payment Method"}),(0,Fa.jsxs)("select",{value:d,onChange:e=>A(e.target.value),className:"w-full px-4 py-2 border rounded-lg",children:[(0,Fa.jsx)("option",{value:"All",children:"All"}),(0,Fa.jsx)("option",{value:"Cash",children:"Cash"}),(0,Fa.jsx)("option",{value:"UPI",children:"UPI"}),(0,Fa.jsx)("option",{value:"Card",children:"Card"})]})]}),(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"From Date"}),(0,Fa.jsx)("input",{type:"date",value:h,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 border rounded-lg"})]}),(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"To Date"}),(0,Fa.jsx)("input",{type:"date",value:p,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 border rounded-lg"})]})]})}),0===n.length?(0,Fa.jsx)("p",{children:"No bills found."}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bill ID"}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items Purchased"}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),(0,Fa.jsx)("td",{className:"hidden md:table-cell px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bill Date"}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>{var t;return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e._id.slice(-6).toUpperCase()}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"font-medium text-gray-900",children:e.customerName}),(0,Fa.jsx)("div",{className:"text-gray-500",children:e.customerMobileNumber})]})}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 text-sm text-gray-500",children:(0,Fa.jsxs)("div",{className:"max-w-xs",children:[e.items.slice(0,2).map((e,t)=>(0,Fa.jsxs)("div",{className:"text-xs",children:[e.productName," x",e.quantity]},t)),e.items.length>2&&(0,Fa.jsxs)("div",{className:"text-xs text-gray-400",children:["+",e.items.length-2," more items"]})]})}),(0,Fa.jsx)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"font-medium text-gray-900",children:["\u20b9",(null===(t=e.totalAmount)||void 0===t?void 0:t.toFixed(2))||"0.00"]}),(0,Fa.jsx)("div",{className:"text-xs text-gray-500",children:e.paymentMethod})]})}),(0,Fa.jsx)("td",{className:"hidden md:table-cell px-2 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.billDate?new Date(e.billDate).toLocaleDateString():"N/A"}),(0,Fa.jsxs)("td",{className:"px-2 sm:px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{x(e),y(!0)})(e),className:"text-blue-600 hover:text-blue-900 bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded-md transition-colors duration-200",children:"View"}),(0,Fa.jsx)("button",{onClick:()=>(e=>{G_(e,e.shop)})(e),className:"text-indigo-600 hover:text-indigo-900 bg-indigo-100 hover:bg-indigo-200 px-3 py-1 rounded-md transition-colors duration-200",children:"Print"})]})]},e._id)})})]})}),v&&g&&(0,Fa.jsx)(oT,{bill:g,onClose:()=>y(!1)})]})},cT=()=>{const e=ee(),[t,n]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(null),u=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(e);(0,r.useEffect)(()=>{(async()=>{try{s(!0);const e=await Ea.get("/shop/expenses",{withCredentials:!0});n(e.data)}catch(e){console.error("Error fetching expenses:",e),o("Failed to fetch expenses")}finally{s(!1)}})()},[]);const d=e=>{alert("Downloading expense as PDF:\n".concat(e.category," - ").concat(u(e.amount),"\nThis feature will generate a PDF receipt in a future implementation."))},A=t.reduce((e,t)=>e+t.amount,0),h=t.filter(e=>{const t=new Date(e.date),n=new Date;return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}).reduce((e,t)=>e+t.amount,0),f=t.filter(e=>{const t=new Date(e.date),n=new Date,r=new Date(n);r.setDate(n.getDate()-n.getDay());const a=new Date(r);return a.setDate(r.getDate()+6),t>=r&&t<=a}).reduce((e,t)=>e+t.amount,0);new Set(t.map(e=>e.category));return(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Shop Expenses"}),(0,Fa.jsx)("p",{className:"text-gray-600",children:"Track and manage shop expenses"})]}),(0,Fa.jsxs)("div",{className:"flex gap-2",children:[(0,Fa.jsxs)("button",{onClick:()=>e("/shop/expenses/history"),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,Fa.jsx)(kt,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"History"})]}),(0,Fa.jsxs)("button",{onClick:()=>e("/shop/expenses/add"),className:"flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,Fa.jsx)(Pt,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"Add Expense"})]})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow",children:(0,Fa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,Fa.jsx)(Ot,{className:"text-gray-400"}),"Total Expenses"]}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:u(A)})]}),(0,Fa.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,Fa.jsx)(Ot,{className:"text-red-600 text-xl"})})]})}),(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow",children:(0,Fa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,Fa.jsx)(qt,{className:"text-gray-400"}),"This Month"]}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:u(h)})]}),(0,Fa.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,Fa.jsx)(qt,{className:"text-blue-600 text-xl"})})]})}),(0,Fa.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow",children:(0,Fa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("p",{className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,Fa.jsx)(lt,{className:"text-gray-400"}),"This Week"]}),(0,Fa.jsx)("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:u(f)})]}),(0,Fa.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,Fa.jsx)(lt,{className:"text-green-600 text-xl"})})]})})]}),(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,Fa.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,Fa.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Recent Expenses"})}),(0,Fa.jsx)("div",{className:"p-6",children:a?(0,Fa.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,Fa.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"})}):i?(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)("div",{className:"text-red-500 mb-4",children:i}),(0,Fa.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Retry"})]}):0===t.length?(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)(Ot,{className:"mx-auto text-gray-300 text-4xl mb-4"}),(0,Fa.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No expenses recorded yet"}),(0,Fa.jsx)("p",{className:"text-gray-500 mb-4",children:"Add your first expense to get started"}),(0,Fa.jsxs)("button",{onClick:()=>e("/shop/expenses/add"),className:"flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors mx-auto",children:[(0,Fa.jsx)(Pt,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"Add Expense"})]})]}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Mode"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.slice(0,5).map(e=>{return(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(t=e.date,new Date(t).toLocaleDateString("en-IN"))}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.category})}),(0,Fa.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs",children:(0,Fa.jsx)("div",{className:"max-w-xs truncate",title:e.description||"-",children:e.description||"-"})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e.paymentMode||"-"})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.vendor||"-"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:u(e.amount)}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Fa.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{c(e)})(e),className:"p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:(0,Fa.jsx)(wt,{className:"h-5 w-5"})}),(0,Fa.jsx)("button",{onClick:()=>d(e),className:"p-2 text-green-600 hover:text-green-900 hover:bg-green-50 rounded-lg transition-colors",title:"Download PDF",children:(0,Fa.jsx)(yt,{className:"h-5 w-5"})})]})})]},e._id);var t})})]})})})]}),l&&(0,Fa.jsx)(kI,{expense:l,onClose:()=>{c(null)},onDownload:d})]})},uT=()=>{const e=ee(),[t,n]=(0,r.useState)({category:"",amount:"",description:"",date:"",vendor:"",paymentMode:""}),[a,s]=(0,r.useState)(""),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),u=e=>{const{name:t,value:r}=e.target;"category"===t?(n(e=>(0,ye.A)((0,ye.A)({},e),{},{[t]:r})),"Others"!==r&&s("")):n(e=>(0,ye.A)((0,ye.A)({},e),{},{[t]:r}))};return(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Fa.jsx)("button",{onClick:()=>e("/shop/expenses"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",disabled:i,children:(0,Fa.jsx)(st,{className:"text-gray-600 text-xl"})}),(0,Fa.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Add New Expense"})]}),l&&(0,Fa.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,Fa.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,Fa.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Expense Details"})}),(0,Fa.jsxs)("form",{onSubmit:async n=>{n.preventDefault();const r="Others"===t.category?a:t.category;if(r&&t.amount&&t.date&&t.paymentMode){o(!0),c("");try{const n={category:r,amount:parseFloat(t.amount),description:t.description,date:t.date,vendor:t.vendor,paymentMode:t.paymentMode};201===(await Ea.post("/shop/expenses",n,{headers:{"Content-Type":"application/json"},withCredentials:!0})).status&&e("/shop/expenses")}catch(l){var s,i;console.error("Error saving expense:",l),c((null===(s=l.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message)||"Failed to save expense. Please try again.")}finally{o(!1)}}else c("Please fill in all required fields")},className:"p-6 space-y-6",children:[(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,Fa.jsxs)("select",{name:"category",value:t.category,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",required:!0,disabled:i,children:[(0,Fa.jsx)("option",{value:"",children:"Select Category"}),["Transport","Petrol / Diesel","Electricity","Raw Materials","Salary / Wages","Maintenance","Miscellaneous"].map(e=>(0,Fa.jsx)("option",{value:e,children:e},e)),(0,Fa.jsx)("option",{value:"Others",children:"Others"})]}),"Others"===t.category&&(0,Fa.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Custom Category *"}),(0,Fa.jsx)("input",{type:"text",name:"customCategory",value:a,onChange:e=>{const t=e.target.value;s(t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Enter custom category",required:!0,disabled:i}),(0,Fa.jsx)("p",{className:"text-xs text-gray-500",children:"Enter your custom expense category"})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount *"}),(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Fa.jsx)(Et,{className:"text-gray-400"})}),(0,Fa.jsx)("input",{type:"number",name:"amount",value:t.amount,onChange:u,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"0.00",required:!0,disabled:i,min:"0",step:"0.01"})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Fa.jsx)(lt,{className:"text-gray-400"})}),(0,Fa.jsx)("input",{type:"date",name:"date",value:t.date,onChange:u,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",required:!0,disabled:i})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Mode *"}),(0,Fa.jsxs)("select",{name:"paymentMode",value:t.paymentMode,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",required:!0,disabled:i,children:[(0,Fa.jsx)("option",{value:"",children:"Select Payment Mode"}),["Cash","UPI","Bank Transfer"].map(e=>(0,Fa.jsx)("option",{value:e,children:e},e))]})]}),(0,Fa.jsxs)("div",{className:"md:col-span-2",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paid To / Vendor"}),(0,Fa.jsx)("input",{type:"text",name:"vendor",value:t.vendor,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Vendor or payee name",disabled:i})]}),(0,Fa.jsxs)("div",{className:"md:col-span-2",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description / Notes"}),(0,Fa.jsx)("textarea",{name:"description",value:t.description,onChange:u,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Add any notes or description about this expense",disabled:i})]})]}),(0,Fa.jsxs)("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-100",children:[(0,Fa.jsx)("button",{type:"button",onClick:()=>e("/shop/expenses"),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",disabled:i,children:"Cancel"}),(0,Fa.jsx)("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors disabled:opacity-50",disabled:i,children:i?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),(0,Fa.jsx)("span",{children:"Saving..."})]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)(Pt,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"Add Expense"})]})})]})]})]})]})},dT=()=>{const e=ee(),[t,n]=(0,r.useState)([]),[a,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(null),[A,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[x,v]=(0,r.useState)(""),y=[...new Set(t.map(e=>e.category))],b=[...new Set(t.map(e=>e.paymentMode))],w=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(e),N=e=>new Date(e).toLocaleDateString("en-IN");(0,r.useEffect)(()=>{(async()=>{try{o(!0);const e=await Ea.get("/shop/expenses",{withCredentials:!0});n(e.data),s(e.data)}catch(e){console.error("Error fetching expenses:",e),c("Failed to fetch expenses")}finally{o(!1)}})()},[]),(0,r.useEffect)(()=>{let e=[...t];A&&(e=e.filter(e=>e.category===A)),x&&(e=e.filter(e=>e.paymentMode===x)),f&&(e=e.filter(e=>new Date(e.date)>=new Date(f))),m&&(e=e.filter(e=>{const t=new Date(e.date),n=new Date(m);return n.setHours(23,59,59,999),t<=n})),s(e)},[A,f,m,x,t]);const j=()=>{h(""),p(""),g(""),v("")},C=e=>{BI(e)};return(0,Fa.jsxs)("div",{className:"space-y-6",children:[(0,Fa.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Fa.jsx)("button",{onClick:()=>e("/shop/expenses"),className:"p-3 rounded-xl hover:bg-gray-100 transition-colors shadow-sm hover:shadow-md",children:(0,Fa.jsx)(st,{className:"text-gray-600 text-xl"})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Expense History"}),(0,Fa.jsx)("p",{className:"text-gray-600",children:"View and manage all expense records"})]})]}),(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Fa.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[(0,Fa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fa.jsx)(Bt,{className:"text-blue-600 text-xl"}),(0,Fa.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Filter Expenses"})]}),(0,Fa.jsxs)("button",{onClick:j,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-lg transition-colors",children:[(0,Fa.jsx)(tn,{className:"text-lg"}),(0,Fa.jsx)("span",{children:"Clear Filters"})]})]}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,Fa.jsxs)("select",{value:A,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[(0,Fa.jsx)("option",{value:"",children:"All Categories"}),y.map(e=>(0,Fa.jsx)("option",{value:e,children:e},e))]})]}),(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Mode"}),(0,Fa.jsxs)("select",{value:x,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[(0,Fa.jsx)("option",{value:"",children:"All Modes"}),b.map(e=>(0,Fa.jsx)("option",{value:e,children:e},e))]})]}),(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"From Date"}),(0,Fa.jsx)("input",{type:"date",value:f,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),(0,Fa.jsxs)("div",{className:"space-y-1",children:[(0,Fa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"To Date"}),(0,Fa.jsx)("input",{type:"date",value:m,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})]}),(f||m)&&(0,Fa.jsx)("div",{className:"mt-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 shadow-sm",children:(0,Fa.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Fa.jsxs)("div",{className:"flex-1",children:[(0,Fa.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Fa.jsx)(Bt,{className:"text-blue-600"}),(0,Fa.jsx)("span",{className:"text-blue-800 font-semibold",children:"Filtered Report"})]}),(0,Fa.jsxs)("div",{className:"ml-6",children:[(0,Fa.jsx)("p",{className:"text-blue-700 text-sm",children:f&&m?"Period: ".concat(N(f)," to ").concat(N(m)):f?"From: ".concat(N(f)):"To: ".concat(N(m))}),(0,Fa.jsxs)("p",{className:"text-blue-800 font-bold text-lg",children:["Total: ",w(a.reduce((e,t)=>e+t.amount,0))]}),(0,Fa.jsxs)("p",{className:"text-blue-600 text-sm",children:[a.length," expense",1!==a.length?"s":""]})]})]}),(0,Fa.jsxs)("button",{onClick:()=>{f&&m&&FI(a,f,m)},disabled:!f||!m,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all ".concat(f&&m?"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white shadow-md hover:shadow-lg transform hover:-translate-y-0.5":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,Fa.jsx)(yt,{className:"text-lg"}),(0,Fa.jsx)("span",{className:"font-medium",children:"Download Report"})]})]})})]}),(0,Fa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,Fa.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,Fa.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:["All Expenses (",a.length,")"]})}),(0,Fa.jsx)("div",{className:"p-6",children:i?(0,Fa.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,Fa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l?(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)("div",{className:"text-red-500 mb-4 text-xl",children:"\u26a0\ufe0f"}),(0,Fa.jsx)("div",{className:"text-red-500 mb-4",children:l}),(0,Fa.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors shadow-md hover:shadow-lg",children:"Retry"})]}):0===a.length?(0,Fa.jsxs)("div",{className:"text-center py-12",children:[(0,Fa.jsx)(Bt,{className:"mx-auto text-gray-300 text-5xl mb-4"}),(0,Fa.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No expenses found"}),(0,Fa.jsx)("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters"}),(0,Fa.jsx)("button",{onClick:j,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all shadow-md hover:shadow-lg",children:"Clear Filters"})]}):(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Fa.jsx)("thead",{className:"bg-gray-50",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Mode"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Fa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>(0,Fa.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N(e.date)}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.category})}),(0,Fa.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs",children:(0,Fa.jsx)("div",{className:"max-w-xs truncate",title:e.description||"-",children:e.description||"-"})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Fa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e.paymentMode})}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.vendor||"-"}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:w(e.amount)}),(0,Fa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Fa.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Fa.jsx)("button",{onClick:()=>(e=>{const t=a.find(t=>t._id===e);t&&d(t)})(e._id),className:"p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:(0,Fa.jsx)(wt,{className:"h-5 w-5"})}),(0,Fa.jsx)("button",{onClick:()=>C(e),className:"p-2 text-green-600 hover:text-green-900 hover:bg-green-50 rounded-lg transition-colors",title:"Download PDF",children:(0,Fa.jsx)(yt,{className:"h-5 w-5"})})]})})]},e._id))})]})})})]}),u&&(0,Fa.jsx)(kI,{expense:u,onClose:()=>{d(null)},onDownload:C})]})},AT=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)({}),[p,m]=(0,r.useState)([]),[g,x]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),[N,j]=(0,r.useState)(""),[C,B]=(0,r.useState)((new Date).getMonth()+1),[k,S]=(0,r.useState)((new Date).getFullYear()),[E,F]=(0,r.useState)(!1),[_,I]=(0,r.useState)(null),[T,D]=(0,r.useState)((new Date).getMonth()+1),[L,U]=(0,r.useState)((new Date).getFullYear()),[P,R]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{i(!0),l("");try{const e=await Ea.get("/shop/workers");console.log("Workers data:",e.data),t(e.data),a(e.data)}catch(e){l("Failed to fetch data"),console.error(e)}finally{i(!1)}})()},[]),(0,r.useEffect)(()=>{const t=e.filter(e=>{var t;const n=e.name.toLowerCase().includes(d.toLowerCase()),r=e.rfid&&e.rfid.toLowerCase().includes(d.toLowerCase()),a=(null===(t=e.department)||void 0===t?void 0:t.name)&&e.department.name.toLowerCase().includes(d.toLowerCase());return n||r||a});a(t)},[d,e,h]);const O=e=>e.workingHours&&e.workingHours.from&&e.workingHours.to?"".concat(e.workingHours.from," - ").concat(e.workingHours.to):"N/A",M=async()=>{if(b&&N)try{await Ea.post("/admin/incentives",{workerId:b._id,amount:parseFloat(N),month:C,year:k}),u("Incentive of \u20b9".concat(N," added for ").concat(b.name)),y(!1);const e=await Ea.get("/shop/workers");t(e.data),a(e.data),setTimeout(()=>u(""),3e3)}catch(r){var e,n;l("Failed to add incentive: "+((null===(e=r.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||r.message)),console.error("Incentive error:",r)}},Q=async()=>{if(_){R(!0),l("");try{var e;new Date(L,T-1,1);const t=new Date(L,T,0).getDate(),n=[];let r=0,a=0,s=0,i=0,o=0,l=0,c=0;for(let e=1;e<=t;e++){const t=new Date(L,T-1,e),u=0===t.getDay(),d=Math.random()>.95;let A="Present";if(u?A="Sunday":d?A="Holiday":Math.random()>.9?A="Absent":Math.random()>.8&&(A="Permission"),"Present"===A){r++;const e="09:00 AM",a="06:00 PM",s=Math.random()>.7?"00:15":"-",i="-"!==s?"\u20b9".concat((50*Math.random()).toFixed(2)):"\u20b90.00";if(n.push({date:t.getDate(),status:A,inTime:e,outTime:a,delayTime:s,delayDeduction:i}),o+=8,"-"!==s){c+=parseFloat(i.replace("\u20b9",""))}}else if("Permission"===A){r++;const e="09:00 AM",a="03:00 PM",s=3,i="-",c="\u20b90.00";n.push({date:t.getDate(),status:A,inTime:e,outTime:a,delayTime:i,delayDeduction:c}),o+=8-s,l+=60*s}else"Absent"===A?(a++,n.push({date:t.getDate(),status:A,inTime:"Absent",outTime:"Absent",delayTime:"-",delayDeduction:"\u20b9333.33"}),c+=333.33):"Holiday"===A?(s++,n.push({date:t.getDate(),status:A,inTime:"-",outTime:"-",delayTime:"-",delayDeduction:"\u20b90.00"})):"Sunday"===A&&(i++,n.push({date:t.getDate(),status:A,inTime:"-",outTime:"-",delayTime:"-",delayDeduction:"\u20b90.00"}))}const u=parseFloat(_.salary)||0,d=t,A=r,h=25,f=u/h,p=f/480,m=a*(u/h),g=l*p,v=c+m+g,y=u-v,b=n.map(e=>{let t=0;if("Present"===e.status){const n=parseFloat(e.delayDeduction.replace("\u20b9",""))||0;t=f-n}else"Absent"===e.status?t=0:"Holiday"!==e.status&&"Sunday"!==e.status||(t=f);return(0,ye.A)((0,ye.A)({},e),{},{totalSalaryForDay:"\u20b9".concat(t.toFixed(2))})});x({worker:_,month:T,year:L,summary:{employeeId:(null===(e=_.user)||void 0===e?void 0:e.username)||"N/A",originalSalary:"\u20b9".concat(u.toFixed(2)),actualEarnedSalary:"\u20b9".concat(y.toFixed(2)),totalFinalSalary:"\u20b9".concat(y.toFixed(2)),totalDaysInPeriod:d,totalWorkingDays:r,totalAbsentDays:a,totalHolidays:s,totalSundays:i,actualWorkingDays:A,totalWorkingHours:o.toFixed(2),totalPermissionTime:l.toFixed(2),absentDeduction:"\u20b9".concat(m.toFixed(2)),permissionDeduction:"\u20b9".concat(g.toFixed(2)),totalDeductions:"\u20b9".concat(v.toFixed(2)),attendanceRate:"".concat((r/d*100).toFixed(2),"%"),perMinuteSalary:"\u20b9".concat(p.toFixed(4))},dailyData:b})}catch(t){l("Failed to generate salary report"),console.error("Salary report error:",t)}finally{R(!1)}}},H=()=>{alert("PDF download functionality would be implemented here")},z=e=>["January","February","March","April","May","June","July","August","September","October","November","December"][e-1]||"",W=e=>(parseFloat(e.salary)||0)+(e.currentMonthIncentives||0),V=()=>v?(0,Fe.createPortal)((0,Fa.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Fa.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:(0,Fa.jsxs)("div",{className:"p-6",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Add Incentive"}),(0,Fa.jsx)("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-700",children:(0,Fa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),b&&(0,Fa.jsx)("div",{className:"mb-4",children:(0,Fa.jsxs)("p",{className:"text-gray-700",children:["Adding incentive for: ",(0,Fa.jsx)("strong",{children:b.name})]})}),(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Incentive Amount (\u20b9)"}),(0,Fa.jsx)("input",{type:"number",value:N,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter amount",min:"0",step:"0.01",autoFocus:!0})]}),(0,Fa.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Fa.jsx)("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none",children:"Cancel"}),(0,Fa.jsx)("button",{type:"button",onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none",children:"Add Incentive"})]})]})})}),document.body):null,K=()=>{var e;return E?(0,Fe.createPortal)((0,Fa.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Fa.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-screen overflow-y-auto",children:(0,Fa.jsxs)("div",{className:"p-6",children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Fa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Salary Report"}),(0,Fa.jsx)("button",{onClick:()=>F(!1),className:"text-gray-500 hover:text-gray-700",children:(0,Fa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),_&&(0,Fa.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Employee"}),(0,Fa.jsx)("p",{className:"font-medium",children:_.name})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Period"}),(0,Fa.jsxs)("p",{className:"font-medium",children:[z(T)," ",L]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Employee ID"}),(0,Fa.jsx)("p",{className:"font-medium",children:(null===g||void 0===g||null===(e=g.summary)||void 0===e?void 0:e.employeeId)||"N/A"})]})]}),(0,Fa.jsxs)("div",{className:"mt-4 flex space-x-3",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Month"}),(0,Fa.jsx)("select",{value:T,onChange:e=>D(parseInt(e.target.value)),className:"px-3 py-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(e=>(0,Fa.jsx)("option",{value:e,children:z(e)},e))})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Year"}),(0,Fa.jsx)("select",{value:L,onChange:e=>U(parseInt(e.target.value)),className:"px-3 py-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[2022,2023,2024,2025,2026].map(e=>(0,Fa.jsx)("option",{value:e,children:e},e))})]}),(0,Fa.jsx)("div",{className:"self-end",children:(0,Fa.jsx)("button",{onClick:Q,className:"px-4 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none text-sm",children:"Generate"})})]})]}),P&&(0,Fa.jsxs)("div",{className:"text-center py-4",children:[(0,Fa.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,Fa.jsx)("p",{className:"mt-2 text-gray-600",children:"Generating report..."})]}),g&&!P&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"mb-6",children:[(0,Fa.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Salary Summary"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Fa.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Original Salary"}),(0,Fa.jsx)("p",{className:"text-lg font-bold text-blue-700",children:g.summary.originalSalary})]}),(0,Fa.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Actual Earned"}),(0,Fa.jsx)("p",{className:"text-lg font-bold text-green-700",children:g.summary.actualEarnedSalary})]}),(0,Fa.jsxs)("div",{className:"p-3 bg-yellow-50 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Total Deductions"}),(0,Fa.jsx)("p",{className:"text-lg font-bold text-yellow-700",children:g.summary.totalDeductions})]}),(0,Fa.jsxs)("div",{className:"p-3 bg-purple-50 rounded-lg",children:[(0,Fa.jsx)("p",{className:"text-sm text-gray-600",children:"Attendance Rate"}),(0,Fa.jsx)("p",{className:"text-lg font-bold text-purple-700",children:g.summary.attendanceRate})]})]})]}),(0,Fa.jsxs)("div",{className:"mb-6",children:[(0,Fa.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Detailed Summary"}),(0,Fa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-gray-600",children:"Total Days"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.totalDaysInPeriod})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-gray-600",children:"Working Days"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.totalWorkingDays})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-gray-600",children:"Absent Days"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.totalAbsentDays})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-gray-600",children:"Holidays"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.totalHolidays})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-gray-600",children:"Sundays"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.totalSundays})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-gray-600",children:"Working Hours"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.totalWorkingHours})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-gray-600",children:"Permission Time (min)"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.totalPermissionTime})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("p",{className:"text-gray-600",children:"Per Minute Salary"}),(0,Fa.jsx)("p",{className:"font-medium",children:g.summary.perMinuteSalary})]})]})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Fa.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Daily Attendance"}),(0,Fa.jsxs)("button",{onClick:H,className:"px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none text-sm flex items-center",children:[(0,Fa.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download PDF"]})]}),(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{className:"bg-gray-100",children:[(0,Fa.jsx)("th",{className:"px-4 py-2 border-b text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,Fa.jsx)("th",{className:"px-4 py-2 border-b text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,Fa.jsx)("th",{className:"px-4 py-2 border-b text-left text-xs font-medium text-gray-500 uppercase",children:"In Time"}),(0,Fa.jsx)("th",{className:"px-4 py-2 border-b text-left text-xs font-medium text-gray-500 uppercase",children:"Out Time"}),(0,Fa.jsx)("th",{className:"px-4 py-2 border-b text-left text-xs font-medium text-gray-500 uppercase",children:"Delay"}),(0,Fa.jsx)("th",{className:"px-4 py-2 border-b text-left text-xs font-medium text-gray-500 uppercase",children:"Deduction"}),(0,Fa.jsx)("th",{className:"px-4 py-2 border-b text-left text-xs font-medium text-gray-500 uppercase",children:"Salary"})]})}),(0,Fa.jsx)("tbody",{children:g.dailyData.map((e,t)=>(0,Fa.jsxs)("tr",{className:t%2===0?"bg-gray-50":"",children:[(0,Fa.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.date}),(0,Fa.jsx)("td",{className:"px-4 py-3 text-sm font-medium ".concat("Present"===e.status?"text-green-600":"Absent"===e.status?"text-red-600":"Holiday"===e.status||"Sunday"===e.status?"text-blue-600":"text-yellow-600"),children:e.status}),(0,Fa.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.inTime}),(0,Fa.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.outTime}),(0,Fa.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.delayTime}),(0,Fa.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.delayDeduction}),(0,Fa.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.totalSalaryForDay})]},t))})]})})]})]}),!P&&!g&&(0,Fa.jsx)("div",{className:"text-center py-4 text-gray-500",children:(0,Fa.jsx)("p",{children:"Select a worker and generate a report to view details."})})]})})}),document.body):null};return(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Fa.jsx)("h3",{className:"text-2xl font-semibold text-gray-800",children:"Salary Report"})}),c&&(0,Fa.jsx)("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg",children:c}),o&&(0,Fa.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:o}),(0,Fa.jsx)("div",{className:"mb-6",children:(0,Fa.jsxs)("div",{className:"relative w-full sm:w-1/3",children:[(0,Fa.jsx)("input",{type:"text",placeholder:"Search workers...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:d,onChange:e=>A(e.target.value)}),(0,Fa.jsx)("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),s&&(0,Fa.jsxs)("div",{className:"text-center py-8",children:[(0,Fa.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,Fa.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading workers..."})]}),!s&&n.length>0&&(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{className:"bg-gray-100",children:[(0,Fa.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Name"}),(0,Fa.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Salary"}),(0,Fa.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Salary (This Month)"}),(0,Fa.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Working Hours"}),(0,Fa.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Employee ID"}),(0,Fa.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Department"}),(0,Fa.jsx)("th",{className:"py-3 px-4 border-b text-left",children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:n.map((e,t)=>{var n;return(0,Fa.jsxs)("tr",{className:t%2===0?"bg-gray-50":"",children:[(0,Fa.jsx)("td",{className:"py-3 px-4 border-b",children:e.name}),(0,Fa.jsxs)("td",{className:"py-3 px-4 border-b",children:["\u20b9",e.salary||0]}),(0,Fa.jsxs)("td",{className:"py-3 px-4 border-b",children:["\u20b9",W(e)]}),(0,Fa.jsx)("td",{className:"py-3 px-4 border-b",children:O(e)}),(0,Fa.jsx)("td",{className:"py-3 px-4 border-b",children:e.rfid||"N/A"}),(0,Fa.jsx)("td",{className:"py-3 px-4 border-b",children:(null===(n=e.department)||void 0===n?void 0:n.name)||"N/A"}),(0,Fa.jsx)("td",{className:"py-3 px-4 border-b",children:(0,Fa.jsxs)("div",{className:"flex space-x-2",children:[(0,Fa.jsxs)("button",{onClick:()=>(e=>{w(e),j(""),B((new Date).getMonth()+1),S((new Date).getFullYear()),y(!0)})(e),className:"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none text-sm flex items-center",title:"Add Incentive",children:[(0,Fa.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Fa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Incentive"]}),(0,Fa.jsxs)("button",{onClick:()=>(e=>{I(e),D((new Date).getMonth()+1),U((new Date).getFullYear()),x(null),F(!0),Promise.resolve().then(()=>{Q()})})(e),className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none text-sm flex items-center",title:"Generate Report",children:[(0,Fa.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Fa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Report"]})]})})]},e._id)})})]})}),!s&&0===n.length&&!o&&(0,Fa.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,Fa.jsx)("p",{children:"No workers found."})}),!s&&e.length>0&&0===n.length&&d&&(0,Fa.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,Fa.jsx)("p",{children:"No workers match your search criteria."})}),(0,Fa.jsx)(V,{}),(0,Fa.jsx)(K,{})]})},hT=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!1),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,A]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(!0),[g,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{v()},[]);const v=async()=>{a(!0),i("");try{const e=await Ea.get("/shop/holidays");t(e.data)}catch(e){i("Failed to fetch holidays"),console.error(e)}finally{a(!1)}};return(0,Fa.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,Fa.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Fa.jsx)("h3",{className:"text-2xl font-semibold text-gray-800",children:"Holiday Management"})}),o&&(0,Fa.jsx)("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-lg",children:o}),s&&(0,Fa.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:s}),(0,Fa.jsxs)("div",{className:"mb-8 p-4 border rounded-lg bg-gray-50",children:[(0,Fa.jsx)("h4",{className:"text-lg font-medium text-gray-800 mb-4",children:g?"Edit Holiday":"Add New Holiday"}),(0,Fa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i(""),l(""),c&&d)try{i("Shops cannot create or modify holidays. Please contact admin.")}catch(r){var t,n;i((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to save holiday"),console.error(r)}else i("Name and date are required")},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Holiday Name *"}),(0,Fa.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter holiday name",required:!0,readOnly:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Date *"}),(0,Fa.jsx)("input",{type:"date",value:d,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,readOnly:!0})]}),(0,Fa.jsxs)("div",{className:"md:col-span-2",children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),(0,Fa.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter holiday description (optional)",rows:"3",readOnly:!0})]}),(0,Fa.jsx)("div",{children:(0,Fa.jsxs)("label",{className:"flex items-center",children:[(0,Fa.jsx)("input",{type:"checkbox",checked:p,onChange:e=>m(e.target.checked),className:"rounded text-blue-600 focus:ring-blue-500",disabled:!0}),(0,Fa.jsx)("span",{className:"ml-2 text-gray-700",children:"Paid Holiday"})]})}),(0,Fa.jsxs)("div",{className:"flex space-x-3 md:col-span-2",children:[(0,Fa.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none",disabled:!0,children:g?"Update Holiday":"Add Holiday"}),g&&(0,Fa.jsx)("button",{type:"button",onClick:()=>{u(""),A(""),f(""),m(!0),x(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none",children:"Cancel"})]})]}),(0,Fa.jsx)("div",{className:"mt-4 p-3 bg-blue-50 text-blue-700 rounded-lg",children:(0,Fa.jsxs)("p",{className:"text-sm",children:[(0,Fa.jsx)("strong",{children:"Note:"})," Shops can only view holidays. To create or modify holidays, please contact your administrator."]})})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h4",{className:"text-lg font-medium text-gray-800 mb-4",children:"Existing Holidays"}),n&&(0,Fa.jsxs)("div",{className:"text-center py-4",children:[(0,Fa.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,Fa.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading holidays..."})]}),!n&&e.length>0&&(0,Fa.jsx)("div",{className:"overflow-x-auto",children:(0,Fa.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{className:"bg-gray-100",children:[(0,Fa.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Name"}),(0,Fa.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Date"}),(0,Fa.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Description"}),(0,Fa.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Paid"})]})}),(0,Fa.jsx)("tbody",{children:e.map((e,t)=>{return(0,Fa.jsxs)("tr",{className:t%2===0?"bg-gray-50":"",children:[(0,Fa.jsx)("td",{className:"py-2 px-4 border-b",children:e.name}),(0,Fa.jsx)("td",{className:"py-2 px-4 border-b",children:(n=e.date,new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"}))}),(0,Fa.jsx)("td",{className:"py-2 px-4 border-b",children:e.description||"-"}),(0,Fa.jsx)("td",{className:"py-2 px-4 border-b",children:(0,Fa.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(e.isPaid?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isPaid?"Yes":"No"})})]},e._id);var n})})]})}),!n&&0===e.length&&(0,Fa.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,Fa.jsx)("p",{children:"No holidays found. Add a new holiday to get started."})})]})]})},fT=()=>{const[e,t]=(0,r.useState)(!1),n=()=>{t(!e)};return(0,Fa.jsxs)("div",{className:"flex h-screen bg-background",children:[e&&(0,Fa.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 z-30 md:hidden",onClick:n}),(0,Fa.jsx)("div",{className:"fixed inset-y-0 left-0 transform ".concat(e?"translate-x-0":"-translate-x-full"," transition-transform duration-300 ease-in-out md:relative md:translate-x-0 md:flex md:flex-shrink-0 z-40"),children:(0,Fa.jsx)(VI,{})}),(0,Fa.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,Fa.jsxs)("header",{className:"md:hidden bg-sidebar shadow-md p-4 flex items-center justify-between",children:[(0,Fa.jsx)("h1",{className:"text-xl font-bold text-text-primary",children:"Shop Dashboard"}),(0,Fa.jsx)("button",{onClick:n,className:"text-gray-500 focus:outline-none focus:text-gray-700",children:(0,Fa.jsx)(Ee,{size:24})})]}),(0,Fa.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-background p-4 md:p-6",children:(0,Fa.jsxs)(xe,{children:[(0,Fa.jsx)(me,{path:"dashboard",element:(0,Fa.jsx)(KI,{})}),(0,Fa.jsx)(me,{path:"departments/create",element:(0,Fa.jsx)(j_,{baseUrl:"/shop"})}),(0,Fa.jsx)(me,{path:"departments/view",element:(0,Fa.jsx)(C_,{baseUrl:"/shop"})}),(0,Fa.jsx)(me,{path:"workers/add",element:(0,Fa.jsx)(qI,{baseUrl:"/shop"})}),(0,Fa.jsx)(me,{path:"workers/view",element:(0,Fa.jsx)(JI,{baseUrl:"/shop"})}),(0,Fa.jsx)(me,{path:"workers/attendance",element:(0,Fa.jsx)(aT,{baseUrl:"/shop"})}),(0,Fa.jsx)(me,{path:"workers/salary-report",element:(0,Fa.jsx)(AT,{})}),(0,Fa.jsx)(me,{path:"workers/holidays",element:(0,Fa.jsx)(hT,{})}),(0,Fa.jsx)(me,{path:"products/add",element:(0,Fa.jsx)(I_,{baseUrl:"/shop"})}),(0,Fa.jsx)(me,{path:"products/category",element:(0,Fa.jsx)(B_,{baseUrl:"/shop"})}),(0,Fa.jsx)(me,{path:"products/view",element:(0,Fa.jsx)(O_,{baseUrl:"/shop"})}),(0,Fa.jsx)(me,{path:"warehouse/stock",element:(0,Fa.jsx)(M_,{baseUrl:"/shop"})}),(0,Fa.jsx)(me,{path:"warehouse/alerts",element:(0,Fa.jsx)(Q_,{baseUrl:"/shop"})}),(0,Fa.jsx)(me,{path:"invoice/view",element:(0,Fa.jsx)(sT,{})}),(0,Fa.jsx)(me,{path:"billing/create",element:(0,Fa.jsx)(iT,{})}),(0,Fa.jsx)(me,{path:"billing/view",element:(0,Fa.jsx)(lT,{})}),(0,Fa.jsx)(me,{path:"expenses",element:(0,Fa.jsx)(cT,{})}),(0,Fa.jsx)(me,{path:"expenses/add",element:(0,Fa.jsx)(uT,{})}),(0,Fa.jsx)(me,{path:"expenses/history",element:(0,Fa.jsx)(dT,{})}),(0,Fa.jsx)(me,{index:!0,element:(0,Fa.jsx)(pe,{to:"dashboard"})})]})})]})]})};const pT=function(){const{login:e}=(0,r.useContext)(_a),t=ee(),n=(0,r.useRef)(null),[a,s]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(!1);return(0,Fa.jsxs)("div",{className:"relative flex justify-center items-center min-h-screen bg-gradient-to-br from-white via-red-50 to-white px-4 py-6",children:[(0,Fa.jsx)("div",{className:"absolute inset-0 z-0"}),(0,Fa.jsxs)("div",{ref:n,className:"relative z-10 bg-white p-6 sm:p-8 rounded-xl shadow-lg w-full max-w-md",children:[(0,Fa.jsx)("div",{className:"flex justify-center mb-6",children:(0,Fa.jsx)("div",{className:"relative flex items-center justify-center",children:(0,Fa.jsx)("img",{src:"/sweethub-logo.png",alt:"Sweet Hub Logo",className:"h-16 sm:h-20 w-auto"})})}),(0,Fa.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-center text-red-600 mb-2",children:"Sign In"}),(0,Fa.jsx)("p",{className:"text-center text-gray-600 mb-6",children:"to access your account"}),(0,Fa.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),c("");try{const n=await Ea.post("/auth/login",JSON.stringify({username:a,password:i}),{headers:{"Content-Type":"application/json"},withCredentials:!0}),{token:r,role:s}=n.data;e(r,s),t("admin"===s?"/admin":"/shop")}catch(o){var r,s;null!==o&&void 0!==o&&o.response?400===(null===(r=o.response)||void 0===r?void 0:r.status)?c("Missing Username or Password"):401===(null===(s=o.response)||void 0===s?void 0:s.status)?c("Unauthorized"):c("Login Failed"):c("No Server Response")}},className:"space-y-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-1",htmlFor:"username",children:"Username"}),(0,Fa.jsx)("input",{type:"text",id:"username",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",value:a,onChange:e=>s(e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-1",htmlFor:"password",children:"Password"}),(0,Fa.jsxs)("div",{className:"relative",children:[(0,Fa.jsx)("input",{type:u?"text":"password",id:"password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 pr-10",value:i,onChange:e=>o(e.target.value),required:!0}),(0,Fa.jsx)("button",{type:"button",onClick:()=>d(!u),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500",children:u?(0,Fa.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,Fa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.243 4.243L6.228 6.228"})}):(0,Fa.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[(0,Fa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,Fa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),l&&(0,Fa.jsx)("div",{className:"text-red-500 text-sm text-center",children:l}),(0,Fa.jsx)("button",{type:"submit",className:"w-full bg-red-500 text-white py-2 px-4 rounded-lg font-semibold hover:bg-red-600 transition duration-200",children:"Sign In"})]}),(0,Fa.jsxs)("p",{className:"text-center text-sm text-gray-600 mt-4",children:["Forgot your password?"," ",(0,Fa.jsx)(Qe,{to:"/forgot-password",className:"text-red-500 hover:underline",children:"Reset it here"})]})]})]})};const mT=function(){return(0,Fa.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-200 text-gray-800 text-center",children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h1",{className:"text-6xl font-bold",children:"404"}),(0,Fa.jsx)("p",{className:"text-xl mt-4",children:"Page Not Found"}),(0,Fa.jsx)("p",{className:"mt-2",children:"The page you are looking for does not exist."}),(0,Fa.jsx)(Qe,{to:"/",className:"mt-6 inline-block bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors",children:"Go to Home"})]})})};const gT=function(){return(0,Fa.jsx)("div",{className:"min-h-screen",children:(0,Fa.jsx)(E_,{children:(0,Fa.jsx)(DI,{children:(0,Fa.jsxs)(xe,{children:[(0,Fa.jsx)(me,{path:"/",element:(0,Fa.jsx)(pT,{})}),(0,Fa.jsx)(me,{path:"/admin/*",element:(0,Fa.jsx)(OI,{})}),(0,Fa.jsx)(me,{path:"/shop/*",element:(0,Fa.jsx)(fT,{})}),(0,Fa.jsx)(me,{path:"*",element:(0,Fa.jsx)(mT,{})})]})})})})};s.createRoot(document.getElementById("root")).render((0,Fa.jsx)(r.StrictMode,{children:(0,Fa.jsx)(Re,{children:(0,Fa.jsx)(Ia,{children:(0,Fa.jsx)(gT,{})})})}))})()})();